<!DOCTYPE html>
<html><head><title>BinaryDataExtensions.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(58);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Azure.Messaging.EventGrid/Customization/BinaryDataExtensions.cs" target="_top">Customization\BinaryDataExtensions.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Azure.Messaging.EventGrid" target="_top">Azure.Messaging.EventGrid.csproj</a> (Azure.Messaging.EventGrid)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License.</span>
 
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Text</span>.<span class="i n">Json</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Core</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Messaging</span>.<span class="i n">EventGrid</span>.<span class="i n">Models</span>;
 
<b>namespace</b> <span class="i n">Azure</span>.<span class="i n">Messaging</span>.<span class="i n">EventGrid</span>
{
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
    <span class="c">///</span><span class="c"> Extension methods for BinaryData to use for parsing JSON-encoded events.</span>
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
    <b>public static class</b> <a id="3860a1e41cbfca68" href="../R/../../0000000000.html" target="n" data-glyph="0,0" class="t t">BinaryDataExtensions</a>
    {
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Given a single JSON-encoded event, parses the event envelope and returns an EventGridEvent.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r0 r">binaryData</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c"> Specifies the instance of </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="/System.Memory.Data/A.html#b41210c71e293f88" class="t t">BinaryData</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">. </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c"> An </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="EventGridEvent.cs.html#6bf184dbad8b1fb5" class="t t">EventGridEvent</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">. </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>public static</b> <a href="EventGridEvent.cs.html#6bf184dbad8b1fb5" class="t t">EventGridEvent</a> <a id="3d0739e2d555f116" href="../R/3d0739e2d555f116.html" target="n" data-glyph="220,1" class="i method">ToEventGridEvent</a>(<b>this</b> <a href="/System.Memory.Data/A.html#b41210c71e293f88" class="t t">BinaryData</a> <span id="r0 rd" class="r0 r">binaryData</span>)
        {
            <span class="c">// Deserialize JsonElement to single event, parse event envelope properties</span>
            <span class="t t">JsonDocument</span> <span id="r1 rd" class="r1 r">requestDocument</span> = <span class="t t">JsonDocument</span>.<span class="i method">Parse</span>(<span class="r0 r">binaryData</span>.<a href="/System.Memory.Data/A.html#70215acd3ec597c9" class="i method">ToMemory</a>());
            <a href="../P/0482baaf9bfb205b.html#0482baaf9bfb205b" class="t t">EventGridEventInternal</a> <span id="r2 rd" class="r2 r">egEventInternal</span> = <a href="../P/0482baaf9bfb205b.html#0482baaf9bfb205b" class="t t">EventGridEventInternal</a>.<a href="../Generated/Models/EventGridEventInternal.Serialization.cs.html#6264b7765252308b" class="i method">DeserializeEventGridEventInternal</a>(<span class="r1 r">requestDocument</span>.<span class="i property">RootElement</span>);
 
            <a href="EventGridEvent.cs.html#6bf184dbad8b1fb5" class="t t">EventGridEvent</a> <span id="r3 rd" class="r3 r">egEvent</span> = <b>new</b> <a href="EventGridEvent.cs.html#5c6f7c0841b6e802" class="t constructor">EventGridEvent</a>(<span class="r2 r">egEventInternal</span>);
 
            <b>return</b> <span class="r3 r">egEvent</span>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Given a single JSON-encoded event, parses the event envelope and returns a CloudEvent.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r4 r">binaryData</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c"> Specifies the instance of </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="/System.Memory.Data/A.html#b41210c71e293f88" class="t t">BinaryData</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">. </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c"> A </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="CloudEvent.cs.html#56ea29b3e43849e8" class="t t">CloudEvent</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">. </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>public static</b> <a href="CloudEvent.cs.html#56ea29b3e43849e8" class="t t">CloudEvent</a> <a id="9815b07c75813fe2" href="../R/9815b07c75813fe2.html" target="n" data-glyph="220,1" class="i method">ToCloudEvent</a>(<b>this</b> <a href="/System.Memory.Data/A.html#b41210c71e293f88" class="t t">BinaryData</a> <span id="r4 rd" class="r4 r">binaryData</span>)
        {
            <span class="c">// Deserialize JsonElement to single event, parse event envelope properties</span>
            <span class="t t">JsonDocument</span> <span id="r5 rd" class="r5 r">requestDocument</span> = <span class="t t">JsonDocument</span>.<span class="i method">Parse</span>(<span class="r4 r">binaryData</span>.<a href="/System.Memory.Data/A.html#70215acd3ec597c9" class="i method">ToMemory</a>());
            <a href="../P/24a5fa0863d81fee.html#24a5fa0863d81fee" class="t t">CloudEventInternal</a> <span id="r6 rd" class="r6 r">cloudEventInternal</span> = <a href="../P/24a5fa0863d81fee.html#24a5fa0863d81fee" class="t t">CloudEventInternal</a>.<a href="../Generated/Models/CloudEventInternal.Serialization.cs.html#f151d0eff4ce070a" class="i method">DeserializeCloudEventInternal</a>(<span class="r5 r">requestDocument</span>.<span class="i property">RootElement</span>);
 
            <a href="CloudEvent.cs.html#56ea29b3e43849e8" class="t t">CloudEvent</a> <span id="r7 rd" class="r7 r">cloudEvent</span> = <b>new</b> <a href="CloudEvent.cs.html#54cccaae255cce2c" class="t constructor">CloudEvent</a>(<span class="r6 r">cloudEventInternal</span>);
 
            <b>if</b> (<span class="r6 r">cloudEventInternal</span>.<a href="../Generated/Models/CloudEventInternal.cs.html#04b2072374c3d65e" class="i property">AdditionalProperties</a> != <b>null</b>)
            {
                <b>foreach</b> (<a href="@1@netstandard/A.html#8585965bb176a426" class="t t">KeyValuePair</a>&lt;<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>, <b>object</b>&gt; <span id="r8 rd" class="r8 r">kvp</span> <b>in</b> <span class="r6 r">cloudEventInternal</span>.<a href="../Generated/Models/CloudEventInternal.cs.html#04b2072374c3d65e" class="i property">AdditionalProperties</a>)
                {
                    <span class="r7 r">cloudEvent</span>.<a href="CloudEvent.cs.html#4157158f923ed703" class="i property">ExtensionAttributes</a>.<a href="@1@netstandard/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="r8 r">kvp</span>.<a href="@1@netstandard/A.html#f9d1c04feb1af032" class="i property">Key</a>, <span class="r8 r">kvp</span>.<a href="@1@netstandard/A.html#38c0e86cc4b30170" class="i property">Value</a>);
                }
            }
 
            <b>return</b> <span class="r7 r">cloudEvent</span>;
        }
    }
}
</pre></td></tr></table></div></body></html>

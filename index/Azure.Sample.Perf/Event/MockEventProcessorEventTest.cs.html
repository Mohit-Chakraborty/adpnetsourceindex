<!DOCTYPE html>
<html><head><title>MockEventProcessorEventTest.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(42);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Azure.Sample.Perf/Event/MockEventProcessorEventTest.cs" target="_top">Event\MockEventProcessorEventTest.cs</a><br/></td><td><a class="blueLink" href="https://github.com/Azure/azure-sdk-for-net/tree/main/common/Perf/Azure.Sample.Perf/Event/MockEventProcessorEventTest.cs" target="_blank">View on GitHub</a></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Azure.Sample.Perf" target="_top">Azure.Sample.Perf.csproj</a> (Azure.Sample.Perf)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License.</span>
 
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Test</span>.<span class="i n">Perf</span>;
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>.<span class="i n">Tasks</span>;
 
<b>namespace</b> <span class="i n">Azure</span>.<span class="i n">Sample</span>.<span class="i n">Perf</span>.<span class="i n">Event</span>
{
    <b>public class</b> <a id="427b05040f2cf084" href="../R/../../0000000000.html" target="n" data-glyph="0,0" class="t t">MockEventProcessorEventTest</a> : <a href="/Azure.Test.Perf/A.html#43d1e337ad24116f" class="t t">EventPerfTest</a>&lt;<a href="MockEventProcessorOptions.cs.html#5c367fde7357f735" class="t t">MockEventProcessorOptions</a>&gt;
    {
        <b>private readonly</b> <a href="MockEventProcessor.cs.html#641a8c388e763fcb" class="t t">MockEventProcessor</a> <a id="07025f5e8c4372c1" href="../R/07025f5e8c4372c1.html" target="n" data-glyph="46,1" class="i field">_eventProcessor</a>;
 
        <b>public</b> <a id="6ddc88b3d40ae751" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="t constructor">MockEventProcessorEventTest</a>(<a href="MockEventProcessorOptions.cs.html#5c367fde7357f735" class="t t">MockEventProcessorOptions</a> <span id="r0 rd" class="r0 r">options</span>) : <a href="/Azure.Test.Perf/A.html#2f71f4eb6d995b17" class="k">base</a>(<span class="r0 r">options</span>)
        {
            <a href="#07025f5e8c4372c1" class="i field">_eventProcessor</a> = <b>new</b> <a href="MockEventProcessor.cs.html#314f3e97c346f5aa" class="t constructor">MockEventProcessor</a>(<span class="r0 r">options</span>.<a href="MockEventProcessorOptions.cs.html#ed3cd5720d6b7121" class="i property">Partitions</a>, <span class="r0 r">options</span>.<a href="MockEventProcessorOptions.cs.html#a37b3480a6a1b3ba" class="i property">MaxEventsPerSecond</a>,
                <span class="r0 r">options</span>.<a href="MockEventProcessorOptions.cs.html#76b0d7128feafe3f" class="i property">ErrorAfterSeconds</a>.<a href="@0@mscorlib/A.html#7bbe60e33e857298" class="i property">HasValue</a> ? <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(<span class="r0 r">options</span>.<a href="MockEventProcessorOptions.cs.html#76b0d7128feafe3f" class="i property">ErrorAfterSeconds</a>.<a href="@0@mscorlib/A.html#7b38d1fa76071c95" class="i property">Value</a>) : <b>null</b>);
 
            <a href="#07025f5e8c4372c1" class="i field">_eventProcessor</a>.<a href="MockEventProcessor.cs.html#42a6728c9bac6603" class="i">ProcessEventAsync</a> += <a href="#d4b8f00b0579b7f3" class="i method">ProcessEventAsync</a>;
            <a href="#07025f5e8c4372c1" class="i field">_eventProcessor</a>.<a href="MockEventProcessor.cs.html#32be36e5260f4628" class="i">ProcessErrorAsync</a> += <a href="#5948f7316dbacba3" class="i method">ProcessErrorAsync</a>;
        }
 
        <b>private</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="d4b8f00b0579b7f3" href="../R/d4b8f00b0579b7f3.html" target="n" data-glyph="76,1" class="i method">ProcessEventAsync</a>(<a href="MockEventArgs.cs.html#5b5ce6ed444093e7" class="t t">MockEventArgs</a> <span id="r1 rd" class="r1 r">arg</span>)
        {
            <a href="/Azure.Test.Perf/A.html#74d3e45d60ac31cc" class="i method">EventRaised</a>();
            <b>return</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a>.<a href="@0@mscorlib/A.html#66f1c3e3e272f591" class="i property">CompletedTask</a>;
        }
 
        <b>private</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="5948f7316dbacba3" href="../R/5948f7316dbacba3.html" target="n" data-glyph="76,1" class="i method">ProcessErrorAsync</a>(<a href="MockErrorEventArgs.cs.html#39e9ee4307173d35" class="t t">MockErrorEventArgs</a> <span id="r2 rd" class="r2 r">arg</span>)
        {
            <a href="/Azure.Test.Perf/A.html#71af74cb8a88d83b" class="i method">ErrorRaised</a>(<span class="r2 r">arg</span>.<a href="MockErrorEventArgs.cs.html#bf41ccf0af544f63" class="i property">Exception</a>);
            <b>return</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a>.<a href="@0@mscorlib/A.html#66f1c3e3e272f591" class="i property">CompletedTask</a>;
        }
 
        <b>public override async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="3afc99a41dec90cf" href="../R/3afc99a41dec90cf.html" target="n" data-glyph="72,1" class="i method">SetupAsync</a>()
        {
            <b>await</b> <a href="/Azure.Test.Perf/A.html#43d1e337ad24116f" class="k">base</a>.<a href="/Azure.Test.Perf/A.html#a685002f0fee8393" class="i method">SetupAsync</a>();
            <b>await</b> <a href="#07025f5e8c4372c1" class="i field">_eventProcessor</a>.<a href="MockEventProcessor.cs.html#b17f9814d5c147e5" class="i method">StartProcessingAsync</a>();
        }
    }
}
</pre></td></tr></table></div></body></html>

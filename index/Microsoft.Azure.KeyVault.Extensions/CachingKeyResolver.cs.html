<!DOCTYPE html>
<html><head><title>CachingKeyResolver.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(194);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Microsoft.Azure.KeyVault.Extensions/CachingKeyResolver.cs" target="_top">CachingKeyResolver.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Microsoft.Azure.KeyVault.Extensions" target="_top">Microsoft.Azure.KeyVault.Extensions\src\Microsoft.Azure.KeyVault.Extensions.csproj</a> (Microsoft.Azure.KeyVault.Extensions)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License. See License.txt in the project root for</span>
<span class="c">// license information.</span>
 
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>.<span class="i n">Tasks</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">KeyVault</span>.<span class="i n">Core</span>;
 
<b>namespace</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">KeyVault</span>
{
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
    <span class="c">///</span><span class="c"> A simple caching Key Resolver using a LRU cache</span>
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
    <b>public class</b> <a id="f920b0dae493466a" href="R/f920b0dae493466a.html" target="n" data-glyph="0,0" class="t t">CachingKeyResolver</a> : <a href="/Microsoft.Azure.KeyVault.Core/A.html#695bd67eed0f2929" class="t t">IKeyResolver</a>, <a href="@0@mscorlib/A.html#1f55292c3174123d" class="t t">IDisposable</a>
    {
        <b>private</b> <a href="LRUCache.cs.html#7742b3af75bbd764" class="t t">LRUCache</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="/Microsoft.Azure.KeyVault.Core/A.html#f936b5b17e061da7" class="t t">IKey</a>&gt; <a id="4a7825dfdf671b63" href="R/4a7825dfdf671b63.html" target="n" data-glyph="46,1" class="i field">_cache</a>;
        <b>private</b> <a href="/Microsoft.Azure.KeyVault.Core/A.html#695bd67eed0f2929" class="t t">IKeyResolver</a>           <a id="26de980d2343bd01" href="R/26de980d2343bd01.html" target="n" data-glyph="46,1" class="i field">_inner</a>;
        <b>private bool</b>                   <a id="4a7bbca911bc8745" href="R/4a7bbca911bc8745.html" target="n" data-glyph="46,1" class="i field">_isDisposed</a>;
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Constructor.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r0 r">capacity</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The maximim capacity for the cache</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r1 r">inner</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The IKeyResolver to wrap</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <b>public</b> <a id="e1a49e0416309ba6" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="t constructor">CachingKeyResolver</a>( <b>int</b> <span id="r0 rd" class="r0 r">capacity</span>, <a href="/Microsoft.Azure.KeyVault.Core/A.html#695bd67eed0f2929" class="t t">IKeyResolver</a> <span id="r1 rd" class="r1 r">inner</span> )
        {
            <b>if</b> ( <span class="r1 r">inner</span> == <b>null</b> )
                <b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#8314938388254d5a" class="t constructor">ArgumentNullException</a>( <span class="s">&quot;inner&quot;</span> );
 
            <a href="#4a7825dfdf671b63" class="i field">_cache</a> = <b>new</b> <a href="LRUCache.cs.html#c4d4960ee3be716f" class="t constructor">LRUCache</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="/Microsoft.Azure.KeyVault.Core/A.html#f936b5b17e061da7" class="t t">IKey</a>&gt;( <span class="r0 r">capacity</span> );
            <a href="#26de980d2343bd01" class="i field">_inner</a> = <span class="r1 r">inner</span>;
        }
 
        <span class="k preprocess">#</span><span class="k preprocess">region</span> IKeyResolver
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Resolve a key indicated by its ID to the corresponding </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="/Microsoft.Azure.KeyVault.Core/A.html#f936b5b17e061da7" class="t t">IKey</a><span class="c">&quot;</span><span class="c">/&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r2 r">kid</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c"> the key identifier </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r3 r">token</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c"> the cancellation token </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c"> task result of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="/Microsoft.Azure.KeyVault.Core/A.html#f936b5b17e061da7" class="t t">IKey</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>public async</b> <a href="@0@mscorlib/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<a href="/Microsoft.Azure.KeyVault.Core/A.html#f936b5b17e061da7" class="t t">IKey</a>&gt; <a id="a91b6b9e50b4bf1a" href="R/a91b6b9e50b4bf1a.html" target="n" data-glyph="72,1" class="i method">ResolveKeyAsync</a>( <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r2 rd" class="r2 r">kid</span>, <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r3 rd" class="r3 r">token</span> )
        {
            <b>if</b> ( <a href="#4a7bbca911bc8745" class="i field">_isDisposed</a> )
                <b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#53515c848f859933" class="t constructor">ObjectDisposedException</a>( <span class="s">&quot;CachingKeyResolver&quot;</span> );
 
            <b>if</b> ( <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>( <span class="r2 r">kid</span> ) )
                <b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#8314938388254d5a" class="t constructor">ArgumentNullException</a>( <span class="s">&quot;kid&quot;</span> );
 
            <a href="/Microsoft.Azure.KeyVault.Core/A.html#f936b5b17e061da7" class="t t">IKey</a> <span id="r4 rd" class="r4 r">result</span> = <a href="#4a7825dfdf671b63" class="i field">_cache</a>.<a href="LRUCache.cs.html#a2ba26b795125817" class="i method">Get</a>( <span class="r2 r">kid</span> );
 
            <b>if</b> ( <span class="r4 r">result</span> == <b>null</b> )
            {
                <span class="r4 r">result</span> = <b>await</b> <a href="#26de980d2343bd01" class="i field">_inner</a>.<a href="/Microsoft.Azure.KeyVault.Core/A.html#deb65c120473aa4e" class="i method">ResolveKeyAsync</a>( <span class="r2 r">kid</span>, <span class="r3 r">token</span> ).<a href="@0@mscorlib/A.html#07ef75a8fa372c94" class="i method">ConfigureAwait</a>( <b>false</b> );
                <b>if</b> ( <span class="r4 r">result</span> != <b>null</b> )
                {
                    <span class="c">// Cache the resolved key using the result&#39;s Kid.</span>
                    <span class="c">// This is especially for the case when the resolved key contains information about the key version</span>
                    <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r5 rd" class="r5 r">cacheKid</span> = <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>( <span class="r4 r">result</span>.<a href="/Microsoft.Azure.KeyVault.Core/A.html#d9610ec3b515d30d" class="i property">Kid</a> ) ? <span class="r2 r">kid</span> : <span class="r4 r">result</span>.<a href="/Microsoft.Azure.KeyVault.Core/A.html#d9610ec3b515d30d" class="i property">Kid</a>;
 
                    <a href="#2c9ec39f499574aa" class="k">var</a> <span id="r6 rd" class="r6 r">cachedKey</span> = <b>new</b> <a href="#7480d47746a25dd4" class="t constructor">CacheKey</a>(<span class="r4 r">result</span>);
                    <a href="#4a7825dfdf671b63" class="i field">_cache</a>.<a href="LRUCache.cs.html#0a9aed479f6b0f6f" class="i method">Add</a>( <span class="r5 r">cacheKid</span>, <span class="r6 r">cachedKey</span> );
                    <b>return</b> <span class="r6 r">cachedKey</span>;
                }
            }
 
            <b>return</b> <span class="r4 r">result</span>;
        }
 
        <span class="k preprocess">#</span><span class="k preprocess">endregion</span>
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Disposes the object</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public void</b> <a id="98832f07ad11f90e" href="R/98832f07ad11f90e.html" target="n" data-glyph="72,1" class="i method">Dispose</a>()
        {
            <a href="#34e323aab39b349d" class="i method">Dispose</a>( <b>true</b> );
            <a href="@0@mscorlib/A.html#25d9c1e022317a99" class="t t">GC</a>.<a href="@0@mscorlib/A.html#2673f5220a565bf2" class="i method">SuppressFinalize</a>( <a href="#f920b0dae493466a" class="k">this</a> );
        }
 
        <b>protected virtual void</b> <a id="34e323aab39b349d" href="R/34e323aab39b349d.html" target="n" data-glyph="75,1" class="i method">Dispose</a>( <b>bool</b> <span id="r7 rd" class="r7 r">disposing</span> )
        {
            <b>if</b> ( <span class="r7 r">disposing</span> )
            {
                <b>if</b> ( !<a href="#4a7bbca911bc8745" class="i field">_isDisposed</a> )
                {
                   <a href="#4a7bbca911bc8745" class="i field">_isDisposed</a> = <b>true</b>;
 
                    <b>foreach</b> (<a href="#2c9ec39f499574aa" class="k">var</a> <span id="r8 rd" class="r8 r">cacheKey</span> <b>in</b> <a href="#4a7825dfdf671b63" class="i field">_cache</a>.<a href="@0@System.Core/A.html#4ba4a3f8a5530e33" class="i method">OfType</a>&lt;<a href="#2c9ec39f499574aa" class="t t">CacheKey</a>&gt;())
                    {
                        <span class="r8 r">cacheKey</span>.<a href="#9533a3ee8de84ec2" class="i method">Dispose</a>(<b>true</b>);
                    }
 
                    <a href="#4a7825dfdf671b63" class="i field">_cache</a>.<a href="LRUCache.cs.html#fd8b713fc177f181" class="i method">Dispose</a>();
                    <a href="#4a7825dfdf671b63" class="i field">_cache</a> = <b>null</b>;
                }
            }
        }
 
        <span class="k preprocess">#</span> <span class="k preprocess">region</span> CacheKey class
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> This class wraps the key that is cached using </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#f920b0dae493466a" class="t t">CachingKeyResolver</a><span class="c">&quot;</span><span class="c">/&gt;</span>
        <span class="c">///</span><span class="c"> The main purpose of </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#2c9ec39f499574aa" class="t t">CacheKey</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> is to evict disposing cached key from the cache.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>class</b> <a id="2c9ec39f499574aa" href="R/2c9ec39f499574aa.html" target="n" data-glyph="4,1" class="t t">CacheKey</a> : <a href="/Microsoft.Azure.KeyVault.Core/A.html#f936b5b17e061da7" class="t t">IKey</a>
        {
            <b>private readonly</b> <a href="/Microsoft.Azure.KeyVault.Core/A.html#f936b5b17e061da7" class="t t">IKey</a> <a id="d967683b3faf8545" href="R/d967683b3faf8545.html" target="n" data-glyph="46,2" class="i field">_key</a>;
 
            <b>public</b> <a id="7480d47746a25dd4" href="R/7480d47746a25dd4.html" target="n" data-glyph="72,2" class="t constructor">CacheKey</a>(<a href="/Microsoft.Azure.KeyVault.Core/A.html#f936b5b17e061da7" class="t t">IKey</a> <span id="r9 rd" class="r9 r">key</span>)
            {
                <a href="#d967683b3faf8545" class="i field">_key</a> = <span class="r9 r">key</span>;
            }
 
            <b>public string</b> <a id="4fc1eea188a0b790" href="R/4fc1eea188a0b790.html" target="n" data-glyph="102,2" class="i property">Kid</a>
            {
                <b>get</b> { <b>return</b> <a href="#d967683b3faf8545" class="i field">_key</a>.<a href="/Microsoft.Azure.KeyVault.Core/A.html#d9610ec3b515d30d" class="i property">Kid</a>; }
            }
 
            <b>public string</b> <a id="c85b02914b102aa2" href="R/c85b02914b102aa2.html" target="n" data-glyph="102,2" class="i property">DefaultEncryptionAlgorithm</a>
            {
                <b>get</b> { <b>return</b> <a href="#d967683b3faf8545" class="i field">_key</a>.<a href="/Microsoft.Azure.KeyVault.Core/A.html#90f7633cd4014dea" class="i property">DefaultEncryptionAlgorithm</a>; }
            }
 
            <b>public string</b> <a id="4d2cdeca43681822" href="R/4d2cdeca43681822.html" target="n" data-glyph="102,2" class="i property">DefaultKeyWrapAlgorithm</a>
            {
                <b>get</b> { <b>return</b> <a href="#d967683b3faf8545" class="i field">_key</a>.<a href="/Microsoft.Azure.KeyVault.Core/A.html#40397ed586f7b53b" class="i property">DefaultKeyWrapAlgorithm</a>; }
            }
 
            <b>public string</b> <a id="c7e021fce5b1df1c" href="R/c7e021fce5b1df1c.html" target="n" data-glyph="102,2" class="i property">DefaultSignatureAlgorithm</a>
            {
                <b>get</b> { <b>return</b> <a href="#d967683b3faf8545" class="i field">_key</a>.<a href="/Microsoft.Azure.KeyVault.Core/A.html#a27314c7a4c1e8a9" class="i property">DefaultSignatureAlgorithm</a>; }
            }
 
            <b>public</b> <a href="@0@mscorlib/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<b>byte</b>[]&gt; <a id="e8b76ada82d68a63" href="R/e8b76ada82d68a63.html" target="n" data-glyph="72,2" class="i method">DecryptAsync</a>(<b>byte</b>[] <span id="r10 rd" class="r10 r">ciphertext</span>, <b>byte</b>[] <span id="r11 rd" class="r11 r">iv</span>, <b>byte</b>[] <span id="r12 rd" class="r12 r">authenticationData</span> = <b>null</b>, <b>byte</b>[] <span id="r13 rd" class="r13 r">authenticationTag</span> = <b>null</b>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r14 rd" class="r14 r">algorithm</span> = <b>null</b>, <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r15 rd" class="r15 r">token</span> = <b>default</b>(<a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a>))
            {
                <b>return</b> <a href="#d967683b3faf8545" class="i field">_key</a>.<a href="/Microsoft.Azure.KeyVault.Core/A.html#9425f132f8964780" class="i method">DecryptAsync</a>(<span class="r10 r">ciphertext</span>, <span class="r11 r">iv</span>, <span class="r12 r">authenticationData</span>, <span class="r13 r">authenticationTag</span>, <span class="r14 r">algorithm</span>, <span class="r15 r">token</span>);
            }
 
            <b>public</b> <a href="@0@mscorlib/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<a href="@0@mscorlib/A.html#ec6128d1b3907918" class="t t">Tuple</a>&lt;<b>byte</b>[], <b>byte</b>[], <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;&gt; <a id="e8ec6f095fa68a7c" href="R/e8ec6f095fa68a7c.html" target="n" data-glyph="72,2" class="i method">EncryptAsync</a>(<b>byte</b>[] <span id="r16 rd" class="r16 r">plaintext</span>, <b>byte</b>[] <span id="r17 rd" class="r17 r">iv</span>, <b>byte</b>[] <span id="r18 rd" class="r18 r">authenticationData</span> = <b>null</b>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r19 rd" class="r19 r">algorithm</span> = <b>null</b>, <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r20 rd" class="r20 r">token</span> = <b>default</b>(<a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a>))
            {
                <b>return</b> <a href="#d967683b3faf8545" class="i field">_key</a>.<a href="/Microsoft.Azure.KeyVault.Core/A.html#8d9ae6b512972d82" class="i method">EncryptAsync</a>(<span class="r16 r">plaintext</span>, <span class="r17 r">iv</span>, <span class="r18 r">authenticationData</span>, <span class="r19 r">algorithm</span>, <span class="r20 r">token</span>);
            }
 
            <b>public</b> <a href="@0@mscorlib/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<a href="@0@mscorlib/A.html#1806cf6634f5a371" class="t t">Tuple</a>&lt;<b>byte</b>[], <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;&gt; <a id="30270a59f534a495" href="R/30270a59f534a495.html" target="n" data-glyph="72,2" class="i method">WrapKeyAsync</a>(<b>byte</b>[] <span id="r21 rd" class="r21 r">key</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r22 rd" class="r22 r">algorithm</span> = <b>null</b>, <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r23 rd" class="r23 r">token</span> = <b>default</b>(<a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a>))
            {
                <b>return</b> <a href="#d967683b3faf8545" class="i field">_key</a>.<a href="/Microsoft.Azure.KeyVault.Core/A.html#d2e59db70b40e5d7" class="i method">WrapKeyAsync</a>(<span class="r21 r">key</span>, <span class="r22 r">algorithm</span>, <span class="r23 r">token</span>);
            }
 
            <b>public</b> <a href="@0@mscorlib/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<b>byte</b>[]&gt; <a id="d37b0a8dd6e18514" href="R/d37b0a8dd6e18514.html" target="n" data-glyph="72,2" class="i method">UnwrapKeyAsync</a>(<b>byte</b>[] <span id="r24 rd" class="r24 r">encryptedKey</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r25 rd" class="r25 r">algorithm</span> = <b>null</b>, <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r26 rd" class="r26 r">token</span> = <b>default</b>(<a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a>))
            {
                <b>return</b> <a href="#d967683b3faf8545" class="i field">_key</a>.<a href="/Microsoft.Azure.KeyVault.Core/A.html#44b032683f399fbe" class="i method">UnwrapKeyAsync</a>(<span class="r24 r">encryptedKey</span>, <span class="r25 r">algorithm</span>, <span class="r26 r">token</span>);
            }
 
            <b>public</b> <a href="@0@mscorlib/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<a href="@0@mscorlib/A.html#1806cf6634f5a371" class="t t">Tuple</a>&lt;<b>byte</b>[], <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;&gt; <a id="e9d75ede4ccb4099" href="R/e9d75ede4ccb4099.html" target="n" data-glyph="72,2" class="i method">SignAsync</a>(<b>byte</b>[] <span id="r27 rd" class="r27 r">digest</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r28 rd" class="r28 r">algorithm</span> = <b>null</b>, <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r29 rd" class="r29 r">token</span> = <b>default</b>(<a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a>))
            {
                <b>return</b> <a href="#d967683b3faf8545" class="i field">_key</a>.<a href="/Microsoft.Azure.KeyVault.Core/A.html#175b48befe26d9dc" class="i method">SignAsync</a>(<span class="r27 r">digest</span>, <span class="r28 r">algorithm</span>, <span class="r29 r">token</span>);
            }
 
            <b>public</b> <a href="@0@mscorlib/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<b>bool</b>&gt; <a id="16d4398d1e53e969" href="R/16d4398d1e53e969.html" target="n" data-glyph="72,2" class="i method">VerifyAsync</a>(<b>byte</b>[] <span id="r30 rd" class="r30 r">digest</span>, <b>byte</b>[] <span id="r31 rd" class="r31 r">signature</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r32 rd" class="r32 r">algorithm</span> = <b>null</b>, <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r33 rd" class="r33 r">token</span> = <b>default</b>(<a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a>))
            {
                <b>return</b> <a href="#d967683b3faf8545" class="i field">_key</a>.<a href="/Microsoft.Azure.KeyVault.Core/A.html#2394d3a6c6dab4b7" class="i method">VerifyAsync</a>(<span class="r30 r">digest</span>, <span class="r31 r">signature</span>, <span class="r32 r">algorithm</span>, <span class="r33 r">token</span>);
            }
 
            <b>public void</b> <a id="92d262d36e9b8855" href="R/92d262d36e9b8855.html" target="n" data-glyph="72,2" class="i method">Dispose</a>()
            {
                <span class="c">// do not dispose because there may be multiple references to the cached object</span>
            }
 
            <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
            <span class="c">///</span><span class="c"> Disposes the cached key only when cache is disposing</span>
            <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
            <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r34 r">force</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c"> whether to force dispose </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
            <b>internal void</b> <a id="9533a3ee8de84ec2" href="R/9533a3ee8de84ec2.html" target="n" data-glyph="74,2" class="i method">Dispose</a>(<b>bool</b> <span id="r34 rd" class="r34 r">force</span>)
            {
                <a href="#306e30a4e6720d76" class="i method">Dispose</a>(<b>true</b>, <span class="r34 r">force</span>);
                <a href="@0@mscorlib/A.html#25d9c1e022317a99" class="t t">GC</a>.<a href="@0@mscorlib/A.html#2673f5220a565bf2" class="i method">SuppressFinalize</a>(<a href="#2c9ec39f499574aa" class="k">this</a>);
            }
 
            <b>private void</b> <a id="306e30a4e6720d76" href="R/306e30a4e6720d76.html" target="n" data-glyph="76,2" class="i method">Dispose</a>(<b>bool</b> <span id="r35 rd" class="r35 r">disposing</span>, <b>bool</b> <span id="r36 rd" class="r36 r">force</span>)
            {
                <b>if</b> (<span class="r35 r">disposing</span> &amp; <span class="r36 r">force</span>)
                {
                    <a href="#d967683b3faf8545" class="i field">_key</a>.<a href="@0@mscorlib/A.html#4e23fed29bd598fa" class="i method">Dispose</a>();
                }
            }
        }
 
        <span class="k preprocess">#</span> <span class="k preprocess">endregion</span> CacheKey class
    }
}
</pre></td></tr></table></div></body></html>

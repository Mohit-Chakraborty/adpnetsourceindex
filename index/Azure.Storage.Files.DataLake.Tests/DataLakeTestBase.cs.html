<!DOCTYPE html>
<html><head><title>DataLakeTestBase.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(492);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Azure.Storage.Files.DataLake.Tests/DataLakeTestBase.cs" target="_top">DataLakeTestBase.cs</a><br/></td><td><a class="blueLink" href="https://github.com/Azure/azure-sdk-for-net/tree/master/sdk/storage/Azure.Storage.Files.DataLake/tests/DataLakeTestBase.cs" target="_blank">View on GitHub</a></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Azure.Storage.Files.DataLake.Tests" target="_top">Azure.Storage.Files.DataLake.Tests.csproj</a> (Azure.Storage.Files.DataLake.Tests)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License.</span>
 
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">IO</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Net</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>.<span class="i n">Tasks</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Core</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Core</span>.<span class="i n">Pipeline</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Core</span>.<span class="i n">TestFramework</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Storage</span>.<span class="i n">Files</span>.<span class="i n">DataLake</span>.<span class="i n">Models</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Storage</span>.<span class="i n">Sas</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Storage</span>.<span class="i n">Test</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Storage</span>.<span class="i n">Test</span>.<span class="i n">Shared</span>;
<b>using</b> <span class="i n">NUnit</span>.<span class="i n">Framework</span>;
 
<b>namespace</b> <span class="i n">Azure</span>.<span class="i n">Storage</span>.<span class="i n">Files</span>.<span class="i n">DataLake</span>.<span class="i n">Tests</span>
{
    [<a href="/Azure.Core.TestFramework/A.html#d30718efac4079d1" class="t constructor">ClientTestFixture</a>(
        <a href="/Azure.Storage.Files.DataLake/A.html#28c2b173f57dc328" class="t t">DataLakeClientOptions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#6d4cd013d7a649e3" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Files.DataLake/A.html#c5b0644f1b6c5e5c" class="i field">V2019_02_02</a>,
        <a href="/Azure.Storage.Files.DataLake/A.html#28c2b173f57dc328" class="t t">DataLakeClientOptions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#6d4cd013d7a649e3" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Files.DataLake/A.html#398f1f9b11802d4c" class="i field">V2019_07_07</a>,
        <a href="/Azure.Storage.Files.DataLake/A.html#28c2b173f57dc328" class="t t">DataLakeClientOptions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#6d4cd013d7a649e3" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Files.DataLake/A.html#88146c22b890d10e" class="i field">V2019_12_12</a>,
        <a href="/Azure.Storage.Files.DataLake/A.html#28c2b173f57dc328" class="t t">DataLakeClientOptions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#6d4cd013d7a649e3" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Files.DataLake/A.html#c074e78ec8fc8e78" class="i field">V2020_02_10</a>,
        <a href="/Azure.Storage.Files.DataLake/A.html#28c2b173f57dc328" class="t t">DataLakeClientOptions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#6d4cd013d7a649e3" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Files.DataLake/A.html#bda0854a7b925e21" class="i field">V2020_04_08</a>,
        <a href="/Azure.Storage.Files.DataLake/A.html#28c2b173f57dc328" class="t t">DataLakeClientOptions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#6d4cd013d7a649e3" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Files.DataLake/A.html#cb60107ca380c35b" class="i field">V2020_06_12</a>,
        <a href="/Azure.Storage.Files.DataLake/A.html#28c2b173f57dc328" class="t t">DataLakeClientOptions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#6d4cd013d7a649e3" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Files.DataLake/A.html#4f7237557ee81b1b" class="i field">V2020_08_04</a>,
        <a href="/Azure.Storage.Files.DataLake/A.html#4a7d1e05d61c5df5" class="t t">StorageVersionExtensions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#25d3938756383333" class="i field">LatestVersion</a>,
        <a href="/Azure.Storage.Files.DataLake/A.html#4a7d1e05d61c5df5" class="t t">StorageVersionExtensions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#39989651a60f6d33" class="i field">MaxVersion</a>,
        <a href="/Azure.Core.TestFramework/A.html#2c1e3c981ba4e83a" class="i property">RecordingServiceVersion</a> = <a href="/Azure.Storage.Files.DataLake/A.html#4a7d1e05d61c5df5" class="t t">StorageVersionExtensions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#39989651a60f6d33" class="i field">MaxVersion</a>,
        <a href="/Azure.Core.TestFramework/A.html#13f334c5c56a9209" class="i property">LiveServiceVersions</a> = <b>new</b> <b>object</b>[] { <a href="/Azure.Storage.Files.DataLake/A.html#4a7d1e05d61c5df5" class="t t">StorageVersionExtensions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#25d3938756383333" class="i field">LatestVersion</a> })]
    <b>public abstract class</b> <a id="c1aa455c37b09bf7" href="R/c1aa455c37b09bf7.html" target="n" data-glyph="0,0" class="t t">DataLakeTestBase</a> : <a href="P/e65052d4973b0f19.html#e65052d4973b0f19" class="t t">StorageTestBase</a>&lt;<a href="DataLakeTestEnvironment.cs.html#bd4c3080c141c3af" class="t t">DataLakeTestEnvironment</a>&gt;
    {
        <b>protected readonly</b> <a href="/Azure.Storage.Files.DataLake/A.html#28c2b173f57dc328" class="t t">DataLakeClientOptions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#6d4cd013d7a649e3" class="t t">ServiceVersion</a> <a id="e3d7442def3d7665" href="R/e3d7442def3d7665.html" target="n" data-glyph="45,1" class="i field">_serviceVersion</a>;
        <b>public readonly string</b> <a id="035cdd8ad6ea9cf5" href="R/035cdd8ad6ea9cf5.html" target="n" data-glyph="42,1" class="i field">ReceivedETag</a> = <span class="s">&quot;\&quot;received\&quot;&quot;</span>;
        <b>public readonly string</b> <a id="b2e12d9c3b02db4d" href="R/b2e12d9c3b02db4d.html" target="n" data-glyph="42,1" class="i field">GarbageETag</a> = <span class="s">&quot;\&quot;garbage\&quot;&quot;</span>;
        <b>public readonly string</b> <a id="fa23f9e7b7beaf03" href="R/fa23f9e7b7beaf03.html" target="n" data-glyph="42,1" class="i field">ReceivedLeaseId</a> = <span class="s">&quot;received&quot;</span>;
        <b>public readonly string</b> <a id="6f9eb6ed8af2c85b" href="R/6f9eb6ed8af2c85b.html" target="n" data-glyph="42,1" class="i field">CacheControl</a> = <span class="s">&quot;control&quot;</span>;
        <b>public readonly string</b> <a id="d1b3d36fc72a96e1" href="R/d1b3d36fc72a96e1.html" target="n" data-glyph="42,1" class="i field">ContentDisposition</a> = <span class="s">&quot;disposition&quot;</span>;
        <b>public readonly string</b> <a id="3ed85ad005a7927c" href="R/3ed85ad005a7927c.html" target="n" data-glyph="42,1" class="i field">ContentEncoding</a> = <span class="s">&quot;encoding&quot;</span>;
        <b>public readonly string</b> <a id="6ea5bf20bc86226b" href="R/6ea5bf20bc86226b.html" target="n" data-glyph="42,1" class="i field">ContentLanguage</a> = <span class="s">&quot;language&quot;</span>;
        <b>public readonly string</b> <a id="901d290a0dea5ed1" href="R/901d290a0dea5ed1.html" target="n" data-glyph="42,1" class="i field">ContentType</a> = <span class="s">&quot;type&quot;</span>;
        <b>public readonly</b> <a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<a href="/Azure.Storage.Files.DataLake/A.html#f87a437500909847" class="t t">PathAccessControlItem</a>&gt; <a id="f1222d4ceb7929cd" href="R/f1222d4ceb7929cd.html" target="n" data-glyph="42,1" class="i field">AccessControlList</a>
            = <a href="/Azure.Storage.Files.DataLake/A.html#73b343fb2d32a57a" class="t t">PathAccessControlExtensions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#2bbb8c096740221b" class="i method">ParseAccessControlList</a>(<span class="s">&quot;user::rwx,group::r--,other::---,mask::rwx&quot;</span>);
        <b>public readonly</b> <a href="/Azure.Storage.Files.DataLake/A.html#bbb7377c029e2f46" class="t t">PathPermissions</a> <a id="14f23b92e34297cd" href="R/14f23b92e34297cd.html" target="n" data-glyph="42,1" class="i field">PathPermissions</a> = <a href="/Azure.Storage.Files.DataLake/A.html#bbb7377c029e2f46" class="t t">PathPermissions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#bfd65bfc1022b5c1" class="i method">ParseSymbolicPermissions</a>(<span class="s">&quot;rwxrwxrwx&quot;</span>);
        <b>public readonly</b> <a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<a href="/Azure.Storage.Files.DataLake/A.html#f87a437500909847" class="t t">PathAccessControlItem</a>&gt; <a id="b7499abe4dc3b639" href="R/b7499abe4dc3b639.html" target="n" data-glyph="42,1" class="i field">ExecuteOnlyAccessControlList</a>
            = <a href="/Azure.Storage.Files.DataLake/A.html#73b343fb2d32a57a" class="t t">PathAccessControlExtensions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#2bbb8c096740221b" class="i method">ParseAccessControlList</a>(<span class="s">&quot;user::--x,group::--x,other::--x&quot;</span>);
        <b>public readonly</b> <a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<a href="/Azure.Storage.Files.DataLake/A.html#067e0102526b6c4e" class="t t">RemovePathAccessControlItem</a>&gt; <a id="adede65abfd008a9" href="R/adede65abfd008a9.html" target="n" data-glyph="42,1" class="i field">RemoveAccessControlList</a>
            = <a href="/Azure.Storage.Files.DataLake/A.html#067e0102526b6c4e" class="t t">RemovePathAccessControlItem</a>.<a href="/Azure.Storage.Files.DataLake/A.html#031f51bfbd02c89e" class="i method">ParseAccessControlList</a>(
                <span class="s">&quot;mask,&quot;</span> +
                <span class="s">&quot;default:user,default:group,&quot;</span> +
                <span class="s">&quot;user:ec3595d6-2c17-4696-8caa-7e139758d24a,group:ec3595d6-2c17-4696-8caa-7e139758d24a,&quot;</span> +
                <span class="s">&quot;default:user:ec3595d6-2c17-4696-8caa-7e139758d24a,default:group:ec3595d6-2c17-4696-8caa-7e139758d24a&quot;</span>);
        <b>public</b> <a id="2022300cab4ef944" href="R/2022300cab4ef944.html" target="n" data-glyph="72,1" class="t constructor">DataLakeTestBase</a>(<b>bool</b> <span id="r0 rd" class="r0 r">async</span>, <a href="/Azure.Storage.Files.DataLake/A.html#28c2b173f57dc328" class="t t">DataLakeClientOptions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#6d4cd013d7a649e3" class="t t">ServiceVersion</a> <span id="r1 rd" class="r1 r">serviceVersion</span>, <a href="/Azure.Core.TestFramework/A.html#d7d5cc97dd76217f" class="t t">RecordedTestMode</a>? <span id="r2 rd" class="r2 r">mode</span> = <b>null</b>)
            : <a href="Shared/StorageTestBase.cs.html#f33f981e45c28ef0" class="k">base</a>(<span class="r0 r">async</span>, <span class="r2 r">mode</span>)
        {
            <a href="#e3d7442def3d7665" class="i field">_serviceVersion</a> = <span class="r1 r">serviceVersion</span>;
        }
 
        <b>public</b> <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a> <a id="14f17429f5427fd7" href="R/14f17429f5427fd7.html" target="n" data-glyph="102,1" class="i property">OldDate</a> =&gt; <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#e6b56eb0cd3db64f" class="i property">Now</a>.<a href="@0@mscorlib/A.html#3e8c965efd4d9021" class="i method">AddDays</a>(-1);
        <b>public</b> <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a> <a id="ba35d1baa29f39e0" href="R/ba35d1baa29f39e0.html" target="n" data-glyph="102,1" class="i property">NewDate</a> =&gt; <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#e6b56eb0cd3db64f" class="i property">Now</a>.<a href="@0@mscorlib/A.html#3e8c965efd4d9021" class="i method">AddDays</a>(1);
        <b>public string</b> <a id="41687f4b6fc22730" href="R/41687f4b6fc22730.html" target="n" data-glyph="72,1" class="i method">GetGarbageLeaseId</a>() =&gt; <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
        <b>public string</b> <a id="1eb18810a9a2f12d" href="R/1eb18810a9a2f12d.html" target="n" data-glyph="72,1" class="i method">GetNewFileSystemName</a>() =&gt; <span class="s">$&quot;</span><span class="s">test-filesystem-</span>{<a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>()}<span class="s">&quot;</span>;
        <b>public string</b> <a id="82e91d246b23cd43" href="R/82e91d246b23cd43.html" target="n" data-glyph="72,1" class="i method">GetNewDirectoryName</a>() =&gt; <span class="s">$&quot;</span><span class="s">test-directory-</span>{<a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>()}<span class="s">&quot;</span>;
        <b>public string</b> <a id="46810cde80e284ab" href="R/46810cde80e284ab.html" target="n" data-glyph="72,1" class="i method">GetNewNonAsciiDirectoryName</a>() =&gt; <span class="s">$&quot;</span><span class="s">test-dire¢t Ø®ϒ%3A-</span>{<a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>()}<span class="s">&quot;</span>;
        <b>public string</b> <a id="0d684cebaf6c1486" href="R/0d684cebaf6c1486.html" target="n" data-glyph="72,1" class="i method">GetNewFileName</a>() =&gt; <span class="s">$&quot;</span><span class="s">test-file-</span>{<a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>()}<span class="s">&quot;</span>;
        <b>public string</b> <a id="2487371a01c277d2" href="R/2487371a01c277d2.html" target="n" data-glyph="72,1" class="i method">GetNewNonAsciiFileName</a>() =&gt; <span class="s">$&quot;</span><span class="s">test-ƒ¡£€‽%3A-</span>{<a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>()}<span class="s">&quot;</span>;
 
        <b>public</b> <a href="/Azure.Storage.Files.DataLake/A.html#28c2b173f57dc328" class="t t">DataLakeClientOptions</a> <a id="6c242f696910149c" href="R/6c242f696910149c.html" target="n" data-glyph="72,1" class="i method">GetOptions</a>(<b>bool</b> <span id="r3 rd" class="r3 r">parallelRange</span> = <b>false</b>)
        {
            <a href="/Azure.Storage.Files.DataLake/A.html#28c2b173f57dc328" class="k">var</a> <span id="r4 rd" class="r4 r">options</span> = <b>new</b> <a href="/Azure.Storage.Files.DataLake/A.html#69de9634982a35cf" class="t constructor">DataLakeClientOptions</a>(<a href="#e3d7442def3d7665" class="i field">_serviceVersion</a>)
            {
                <a href="/Azure.Core/A.html#474c2d6954521438" class="i property">Diagnostics</a> = { <a href="/Azure.Core/A.html#05e65f43ee77d43b" class="i property">IsLoggingEnabled</a> = <b>true</b> },
                <a href="/Azure.Core/A.html#4e89db28e0273a49" class="i property">Retry</a> =
                {
                    <a href="/Azure.Core/A.html#ad0fd4a2aba9e6dd" class="i property">Mode</a> = <a href="/Azure.Core/A.html#1ef0eec63e4fb071" class="t t">RetryMode</a>.<a href="/Azure.Core/A.html#5582691dd6765e68" class="i field">Exponential</a>,
                    <a href="/Azure.Core/A.html#d425589fdc59b38b" class="i property">MaxRetries</a> = <a href="/Azure.Storage.Files.DataLake/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Files.DataLake/A.html#c66b0e31ad263065" class="i field">MaxReliabilityRetries</a>,
                    <a href="/Azure.Core/A.html#9015c66ddc06fc12" class="i property">Delay</a> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(<a href="/Azure.Core.TestFramework/A.html#eb077c11a09b6b1e" class="i property">Mode</a> == <a href="/Azure.Core.TestFramework/A.html#d7d5cc97dd76217f" class="t t">RecordedTestMode</a>.<a href="/Azure.Core.TestFramework/A.html#bde4663b03b59b85" class="i field">Playback</a> ? 0.01 : 1),
                    <a href="/Azure.Core/A.html#787df67e661c859b" class="i property">MaxDelay</a> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(<a href="/Azure.Core.TestFramework/A.html#eb077c11a09b6b1e" class="i property">Mode</a> == <a href="/Azure.Core.TestFramework/A.html#d7d5cc97dd76217f" class="t t">RecordedTestMode</a>.<a href="/Azure.Core.TestFramework/A.html#bde4663b03b59b85" class="i field">Playback</a> ? 0.1 : 60),
                    <a href="/Azure.Core/A.html#e8f681985df01945" class="i property">NetworkTimeout</a> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(<a href="/Azure.Core.TestFramework/A.html#eb077c11a09b6b1e" class="i property">Mode</a> == <a href="/Azure.Core.TestFramework/A.html#d7d5cc97dd76217f" class="t t">RecordedTestMode</a>.<a href="/Azure.Core.TestFramework/A.html#bde4663b03b59b85" class="i field">Playback</a> ? 100 : 400),
                },
            };
            <b>if</b> (<a href="/Azure.Core.TestFramework/A.html#eb077c11a09b6b1e" class="i property">Mode</a> != <a href="/Azure.Core.TestFramework/A.html#d7d5cc97dd76217f" class="t t">RecordedTestMode</a>.<a href="/Azure.Core.TestFramework/A.html#6de2da8c848daf8b" class="i field">Live</a>)
            {
                <span class="r4 r">options</span>.<a href="/Azure.Core/A.html#9f0a7ff3a06072c8" class="i method">AddPolicy</a>(<b>new</b> <a href="Shared/RecordedClientRequestIdPolicy.cs.html#932741975888658b" class="t constructor">RecordedClientRequestIdPolicy</a>(<a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>, <span class="r3 r">parallelRange</span>), <a href="/Azure.Core/A.html#94ec96b92b26ad43" class="t t">HttpPipelinePosition</a>.<a href="/Azure.Core/A.html#e88e4f922d2a2ed8" class="i field">PerCall</a>);
            }
 
            <b>return</b> <a href="/Azure.Core.TestFramework/A.html#53f8a36b77464500" class="i method">InstrumentClientOptions</a>(<span class="r4 r">options</span>);
        }
 
        <b>public</b> <a href="/Azure.Storage.Files.DataLake/A.html#28c2b173f57dc328" class="t t">DataLakeClientOptions</a> <a id="e526d2d986280444" href="R/e526d2d986280444.html" target="n" data-glyph="72,1" class="i method">GetFaultyDataLakeConnectionOptions</a>(
            <b>int</b> <span id="r5 rd" class="r5 r">raiseAt</span> = <b>default</b>,
            <a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a> <span id="r6 rd" class="r6 r">raise</span> = <b>default</b>,
            <a href="@0@mscorlib/A.html#9147ae6f76643aae" class="t t">Action</a> <span id="r7 rd" class="r7 r">onFault</span> = <b>default</b>)
        {
            <span class="r6 r">raise</span> = <span class="r6 r">raise</span> ?? <b>new</b> <a href="@0@mscorlib/A.html#db370b64091ac4df" class="t constructor">IOException</a>(<span class="s">&quot;Simulated connection fault&quot;</span>);
            <a href="/Azure.Storage.Files.DataLake/A.html#28c2b173f57dc328" class="t t">DataLakeClientOptions</a> <span id="r8 rd" class="r8 r">options</span> = <a href="#6c242f696910149c" class="i method">GetOptions</a>();
            <span class="r8 r">options</span>.<a href="/Azure.Core/A.html#9f0a7ff3a06072c8" class="i method">AddPolicy</a>(<b>new</b> <a href="Shared/FaultyDownloadPipelinePolicy.cs.html#91fc6dc20d8c6651" class="t constructor">FaultyDownloadPipelinePolicy</a>(<span class="r5 r">raiseAt</span>, <span class="r6 r">raise</span>, <span class="r7 r">onFault</span>), <a href="/Azure.Core/A.html#94ec96b92b26ad43" class="t t">HttpPipelinePosition</a>.<a href="/Azure.Core/A.html#e88e4f922d2a2ed8" class="i field">PerCall</a>);
            <b>return</b> <span class="r8 r">options</span>;
        }
 
        <b>public</b> <a href="/Azure.Storage.Files.DataLake/A.html#72a3781650abbd16" class="t t">DataLakeServiceClient</a> <a id="556f0e51f35de7dd" href="R/556f0e51f35de7dd.html" target="n" data-glyph="72,1" class="i method">GetServiceClientFromSharedKeyConfig</a>(<a href="Shared/TenantConfiguration.cs.html#62e7bd508929cb2a" class="t t">TenantConfiguration</a> <span id="r9 rd" class="r9 r">config</span>)
            =&gt; <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(
                <b>new</b> <a href="/Azure.Storage.Files.DataLake/A.html#98b97925229117f5" class="t constructor">DataLakeServiceClient</a>(
                    <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="r9 r">config</span>.<a href="Shared/TenantConfiguration.cs.html#9c094343c57a64fb" class="i property">BlobServiceEndpoint</a>),
                    <b>new</b> <a href="/Azure.Storage.Common/A.html#5886b33715fef501" class="t constructor">StorageSharedKeyCredential</a>(<span class="r9 r">config</span>.<a href="Shared/TenantConfiguration.cs.html#774d8fba75d6b5dd" class="i property">AccountName</a>, <span class="r9 r">config</span>.<a href="Shared/TenantConfiguration.cs.html#fc6c2fe34872ce46" class="i property">AccountKey</a>),
                    <a href="#6c242f696910149c" class="i method">GetOptions</a>()));
 
        <b>public</b> <a href="/Azure.Storage.Files.DataLake/A.html#72a3781650abbd16" class="t t">DataLakeServiceClient</a> <a id="7e48c07321ba0668" href="R/7e48c07321ba0668.html" target="n" data-glyph="72,1" class="i method">GetServiceClientFromOauthConfig</a>(<a href="Shared/TenantConfiguration.cs.html#62e7bd508929cb2a" class="t t">TenantConfiguration</a> <span id="r10 rd" class="r10 r">config</span>)
            =&gt; <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(
                <b>new</b> <a href="/Azure.Storage.Files.DataLake/A.html#79319e37ed53531b" class="t constructor">DataLakeServiceClient</a>(
                    (<b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="r10 r">config</span>.<a href="Shared/TenantConfiguration.cs.html#9c094343c57a64fb" class="i property">BlobServiceEndpoint</a>)).<a href="UriExtensions.cs.html#94090fa2879b041a" class="i method">ToHttps</a>(),
                    <a href="Shared/StorageTestBase.cs.html#208f01e6ed6a7f0c" class="i method">GetOAuthCredential</a>(<span class="r10 r">config</span>),
                    <a href="#6c242f696910149c" class="i method">GetOptions</a>()));
 
        <b>public</b> <a href="/Azure.Storage.Files.DataLake/A.html#72a3781650abbd16" class="t t">DataLakeServiceClient</a> <a id="3c386cd19e8ed196" href="R/3c386cd19e8ed196.html" target="n" data-glyph="72,1" class="i method">GetServiceClient_SharedKey</a>()
            =&gt; <a href="#556f0e51f35de7dd" class="i method">GetServiceClientFromSharedKeyConfig</a>(<a href="Shared/StorageTestBase.cs.html#cc52c33c34e7c8bb" class="i property">TestConfigHierarchicalNamespace</a>);
 
        <b>public</b> <a href="/Azure.Storage.Files.DataLake/A.html#72a3781650abbd16" class="t t">DataLakeServiceClient</a> <a id="903be1fb4e997f1d" href="R/903be1fb4e997f1d.html" target="n" data-glyph="72,1" class="i method">GetServiceClient_OAuth</a>()
            =&gt; <a href="#7e48c07321ba0668" class="i method">GetServiceClientFromOauthConfig</a>(<a href="Shared/StorageTestBase.cs.html#cc52c33c34e7c8bb" class="i property">TestConfigHierarchicalNamespace</a>);
 
        <b>public</b> <a href="/Azure.Storage.Common/A.html#6b51bf09188ec1c0" class="t t">StorageSharedKeyCredential</a> <a id="3d3a39bcfd9e3200" href="R/3d3a39bcfd9e3200.html" target="n" data-glyph="72,1" class="i method">GetStorageSharedKeyCredentials</a>()
            =&gt; <b>new</b> <a href="/Azure.Storage.Common/A.html#5886b33715fef501" class="t constructor">StorageSharedKeyCredential</a>(
                <a href="Shared/StorageTestBase.cs.html#cc52c33c34e7c8bb" class="i property">TestConfigHierarchicalNamespace</a>.<a href="Shared/TenantConfiguration.cs.html#774d8fba75d6b5dd" class="i property">AccountName</a>,
                <a href="Shared/StorageTestBase.cs.html#cc52c33c34e7c8bb" class="i property">TestConfigHierarchicalNamespace</a>.<a href="Shared/TenantConfiguration.cs.html#fc6c2fe34872ce46" class="i property">AccountKey</a>);
 
        <b>public async</b> <a href="@0@mscorlib/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<a href="#dd91f76fdb115331" class="t t">DisposingFileSystem</a>&gt; <a id="fb80151422161204" href="R/fb80151422161204.html" target="n" data-glyph="72,1" class="i method">GetNewFileSystem</a>(
            <a href="/Azure.Storage.Files.DataLake/A.html#72a3781650abbd16" class="t t">DataLakeServiceClient</a> <span id="r11 rd" class="r11 r">service</span> = <b>default</b>,
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r12 rd" class="r12 r">fileSystemName</span> = <b>default</b>,
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r13 rd" class="r13 r">metadata</span> = <b>default</b>,
            <a href="/Azure.Storage.Files.DataLake/A.html#72ea0a1ecb02dfa0" class="t t">PublicAccessType</a>? <span id="r14 rd" class="r14 r">publicAccessType</span> = <b>default</b>,
            <b>bool</b> <span id="r15 rd" class="r15 r">premium</span> = <b>default</b>)
        {
            <span class="r12 r">fileSystemName</span> ??= <a href="#1eb18810a9a2f12d" class="i method">GetNewFileSystemName</a>();
            <span class="r11 r">service</span> ??= <a href="#3c386cd19e8ed196" class="i method">GetServiceClient_SharedKey</a>();
 
            <b>if</b> (<span class="r14 r">publicAccessType</span> == <b>default</b>)
            {
                <span class="r14 r">publicAccessType</span> = <span class="r15 r">premium</span> ? <a href="/Azure.Storage.Files.DataLake/A.html#72ea0a1ecb02dfa0" class="t t">PublicAccessType</a>.<a href="/Azure.Storage.Files.DataLake/A.html#ee6a1baf0427dd04" class="i field">None</a> : <a href="/Azure.Storage.Files.DataLake/A.html#72ea0a1ecb02dfa0" class="t t">PublicAccessType</a>.<a href="/Azure.Storage.Files.DataLake/A.html#0544180a20196c40" class="i field">FileSystem</a>;
            }
 
            <a href="/Azure.Storage.Files.DataLake/A.html#ea909608102ce2f0" class="t t">DataLakeFileSystemClient</a> <span id="r16 rd" class="r16 r">fileSystem</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r11 r">service</span>.<a href="/Azure.Storage.Files.DataLake/A.html#fe8c42550dcee374" class="i method">GetFileSystemClient</a>(<span class="r12 r">fileSystemName</span>));
 
            <span class="c">// due to a service issue, if the initial container creation request times out, subsequent requests</span>
            <span class="c">// can return a ContainerAlreadyExists code even though the container doesn&#39;t really exist.</span>
            <span class="c">// we delay until after the service cache timeout and then attempt to create the container one more time.</span>
            <span class="c">// If this attempt still fails, we mark the test as inconclusive.</span>
            <span class="c">// TODO Remove this handling after the service bug is fixed https://github.com/Azure/azure-sdk-for-net/issues/9399</span>
            <b>try</b>
            {
                <b>await</b> <a href="Shared/StorageTestBase.cs.html#f572a64728c5b3a8" class="i method">RetryAsync</a>(
                    <b>async</b> () =&gt; <b>await</b> <span class="r16 r">fileSystem</span>.<a href="/Azure.Storage.Files.DataLake/A.html#794b418c2bd9c77f" class="i method">CreateAsync</a>(<span class="r17 r">metadata</span>: <span class="r13 r">metadata</span>, <span class="r18 r">publicAccessType</span>: <span class="r14 r">publicAccessType</span>.<a href="@0@mscorlib/A.html#7b38d1fa76071c95" class="i property">Value</a>),
                    <span id="r19 rd" class="r19 r">ex</span> =&gt; <span class="r19 r">ex</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a> == <span class="i n">Blobs</span>.<span class="i n">Models</span>.<a href="/Azure.Storage.Blobs/A.html#e0d947616d6aba70" class="t t">BlobErrorCode</a>.<a href="/Azure.Storage.Blobs/A.html#8e96f2a96bb80557" class="i property">ContainerAlreadyExists</a>,
                    <span class="r20 r">retryDelay</span>: <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a>.<a href="Shared/TestConstants.cs.html#bfb9fe8659564aa8" class="i field">DataLakeRetryDelay</a>,
                    <span class="r21 r">retryAttempts</span>: 1);
            }
            <b>catch</b> (<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a> <span id="r22 rd" class="r22 r">storageRequestFailedException</span>)
            <b>when</b> (<span class="r22 r">storageRequestFailedException</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a> == <span class="i n">Blobs</span>.<span class="i n">Models</span>.<a href="/Azure.Storage.Blobs/A.html#e0d947616d6aba70" class="t t">BlobErrorCode</a>.<a href="/Azure.Storage.Blobs/A.html#8e96f2a96bb80557" class="i property">ContainerAlreadyExists</a>)
            {
                <span class="c">// if we still get this error after retrying, mark the test as inconclusive</span>
                <span class="t t">TestContext</span>.<span class="i property">Out</span>.<a href="@0@mscorlib/A.html#5238cceaebfeaa74" class="i method">WriteLine</a>(
                    <span class="s">$&quot;</span>{<span class="t t">TestContext</span>.<span class="i property">CurrentContext</span>.<span class="i property">Test</span>.<span class="i property">Name</span>}<span class="s"> is inconclusive due to hitting </span><span class="s">&quot;</span> +
                    <span class="s">$&quot;</span><span class="s">the DataLake service bug described in https://github.com/Azure/azure-sdk-for-net/issues/9399</span><span class="s">&quot;</span>);
                <span class="t t">Assert</span>.<span class="i method">Inconclusive</span>(); <span class="c">// passing the message in Inconclusive call doesn&#39;t show up in Console output.</span>
            }
 
            <b>return</b> <b>new</b> <a href="#14dd9664cbf844bf" class="t constructor">DisposingFileSystem</a>(<span class="r16 r">fileSystem</span>);
        }
 
        <b>public static void</b> <a id="a1be5aba132f9c14" href="R/a1be5aba132f9c14.html" target="n" data-glyph="72,1" class="i method">AssertValidStoragePathInfo</a>(<a href="/Azure.Storage.Files.DataLake/A.html#9ae75d96c041af76" class="t t">PathInfo</a> <span id="r23 rd" class="r23 r">pathInfo</span>)
        {
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r23 r">pathInfo</span>.<a href="/Azure.Storage.Files.DataLake/A.html#185207f2efba0d2b" class="i property">ETag</a>);
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r23 r">pathInfo</span>.<a href="/Azure.Storage.Files.DataLake/A.html#85cfc92280a4ee2c" class="i property">LastModified</a>);
        }
 
        <b>public void</b> <a id="0007c204915851de" href="R/0007c204915851de.html" target="n" data-glyph="72,1" class="i method">AssertMetadataEquality</a>(
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r24 rd" class="r24 r">expected</span>,
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r25 rd" class="r25 r">actual</span>,
            <b>bool</b> <span id="r26 rd" class="r26 r">isDirectory</span>)
        {
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r24 r">expected</span>, <span class="s">&quot;Expected metadata is null&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r25 r">actual</span>, <span class="s">&quot;Actual metadata is null&quot;</span>);
 
            <b>if</b> (<span class="r26 r">isDirectory</span>)
            {
                <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r24 r">expected</span>.<a href="@0@mscorlib/A.html#3d6c21c4e9bd5f63" class="i property">Count</a> + 1, <span class="r25 r">actual</span>.<a href="@0@mscorlib/A.html#3d6c21c4e9bd5f63" class="i property">Count</a>, <span class="s">&quot;Metadata counts are not equal&quot;</span>);
            }
            <b>else</b>
            {
                <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r24 r">expected</span>.<a href="@0@mscorlib/A.html#3d6c21c4e9bd5f63" class="i property">Count</a>, <span class="r25 r">actual</span>.<a href="@0@mscorlib/A.html#3d6c21c4e9bd5f63" class="i property">Count</a>, <span class="s">&quot;Metadata counts are not equal&quot;</span>);
            }
 
            <b>foreach</b> (<a href="@0@mscorlib/A.html#8585965bb176a426" class="t t">KeyValuePair</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r27 rd" class="r27 r">kvp</span> <b>in</b> <span class="r24 r">expected</span>)
            {
                <b>if</b> (!<span class="r25 r">actual</span>.<a href="@0@mscorlib/A.html#6b9f9049901aacea" class="i method">TryGetValue</a>(<span class="r27 r">kvp</span>.<a href="@0@mscorlib/A.html#f9d1c04feb1af032" class="i property">Key</a>, <b>out</b> <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r28 rd" class="r28 r">value</span>) ||
                    <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0be9474bc8e160b6" class="i method">Compare</a>(<span class="r27 r">kvp</span>.<a href="@0@mscorlib/A.html#38c0e86cc4b30170" class="i property">Value</a>, <span class="r28 r">value</span>, <a href="@0@mscorlib/A.html#702797def97ecb7c" class="t t">StringComparison</a>.<a href="@0@mscorlib/A.html#6c3139b940557bf9" class="i field">OrdinalIgnoreCase</a>) != 0)
                {
                    <span class="t t">Assert</span>.<span class="i method">Fail</span>(<span class="s">$&quot;</span><span class="s">Expected key &lt;</span>{<span class="r27 r">kvp</span>.<a href="@0@mscorlib/A.html#f9d1c04feb1af032" class="i property">Key</a>}<span class="s">&gt; with value &lt;</span>{<span class="r27 r">kvp</span>.<a href="@0@mscorlib/A.html#38c0e86cc4b30170" class="i property">Value</a>}<span class="s">&gt; not found</span><span class="s">&quot;</span>);
                }
            }
        }
 
        <b>public void</b> <a id="8fc2a20d1bc5637b" href="R/8fc2a20d1bc5637b.html" target="n" data-glyph="72,1" class="i method">AssertPathPermissionsEquality</a>(<a href="/Azure.Storage.Files.DataLake/A.html#bbb7377c029e2f46" class="t t">PathPermissions</a> <span id="r29 rd" class="r29 r">expected</span>, <a href="/Azure.Storage.Files.DataLake/A.html#bbb7377c029e2f46" class="t t">PathPermissions</a> <span id="r30 rd" class="r30 r">actual</span>)
        {
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r29 r">expected</span>.<a href="/Azure.Storage.Files.DataLake/A.html#4a28866b04dab688" class="i property">Owner</a>, <span class="r30 r">actual</span>.<a href="/Azure.Storage.Files.DataLake/A.html#4a28866b04dab688" class="i property">Owner</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r29 r">expected</span>.<a href="/Azure.Storage.Files.DataLake/A.html#50075c7ff16c6f80" class="i property">Group</a>, <span class="r30 r">actual</span>.<a href="/Azure.Storage.Files.DataLake/A.html#50075c7ff16c6f80" class="i property">Group</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r29 r">expected</span>.<a href="/Azure.Storage.Files.DataLake/A.html#ef9d02d11ade3fc9" class="i property">Other</a>, <span class="r30 r">actual</span>.<a href="/Azure.Storage.Files.DataLake/A.html#ef9d02d11ade3fc9" class="i property">Other</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r29 r">expected</span>.<a href="/Azure.Storage.Files.DataLake/A.html#f60d30c12da16011" class="i property">StickyBit</a>, <span class="r30 r">actual</span>.<a href="/Azure.Storage.Files.DataLake/A.html#f60d30c12da16011" class="i property">StickyBit</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r29 r">expected</span>.<a href="/Azure.Storage.Files.DataLake/A.html#2978fe479801edb7" class="i property">ExtendedAcls</a>, <span class="r30 r">actual</span>.<a href="/Azure.Storage.Files.DataLake/A.html#2978fe479801edb7" class="i property">ExtendedAcls</a>);
        }
 
        <b>public</b> <a href="/Azure.Storage.Files.DataLake/A.html#72a3781650abbd16" class="t t">DataLakeServiceClient</a> <a id="5bda09ceb24dbde5" href="R/5bda09ceb24dbde5.html" target="n" data-glyph="72,1" class="i method">GetServiceClient_AccountSas</a>(
            <a href="/Azure.Storage.Common/A.html#6b51bf09188ec1c0" class="t t">StorageSharedKeyCredential</a> <span id="r31 rd" class="r31 r">sharedKeyCredentials</span> = <b>default</b>,
            <a href="/Azure.Storage.Files.DataLake/A.html#dd1dd9db38b03120" class="t t">DataLakeSasQueryParameters</a> <span id="r32 rd" class="r32 r">sasCredentials</span> = <b>default</b>)
            =&gt; <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(
                <b>new</b> <a href="/Azure.Storage.Files.DataLake/A.html#a8723334d39511ef" class="t constructor">DataLakeServiceClient</a>(
                    <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span>{<a href="Shared/StorageTestBase.cs.html#cc52c33c34e7c8bb" class="i property">TestConfigHierarchicalNamespace</a>.<a href="Shared/TenantConfiguration.cs.html#9c094343c57a64fb" class="i property">BlobServiceEndpoint</a>}<span class="s">?</span>{<span class="r32 r">sasCredentials</span> ?? <a href="#61a79c27294a6fe0" class="i method">GetNewAccountSasCredentials</a>(<span class="r31 r">sharedKeyCredentials</span> ?? <a href="#bfbd2975e68f1f5b" class="i method">GetNewSharedKeyCredentials</a>())}<span class="s">&quot;</span>),
                    <a href="#6c242f696910149c" class="i method">GetOptions</a>()));
 
        <b>public</b> <a href="/Azure.Storage.Files.DataLake/A.html#72a3781650abbd16" class="t t">DataLakeServiceClient</a> <a id="8e06f7673ef1d65a" href="R/8e06f7673ef1d65a.html" target="n" data-glyph="72,1" class="i method">GetServiceClient_DataLakeServiceSas_FileSystem</a>(
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r33 rd" class="r33 r">fileSystemName</span>,
            <a href="/Azure.Storage.Common/A.html#6b51bf09188ec1c0" class="t t">StorageSharedKeyCredential</a> <span id="r34 rd" class="r34 r">sharedKeyCredentials</span> = <b>default</b>,
            <a href="/Azure.Storage.Files.DataLake/A.html#dd1dd9db38b03120" class="t t">DataLakeSasQueryParameters</a> <span id="r35 rd" class="r35 r">sasCredentials</span> = <b>default</b>)
            =&gt; <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(
                <b>new</b> <a href="/Azure.Storage.Files.DataLake/A.html#a8723334d39511ef" class="t constructor">DataLakeServiceClient</a>(
                    <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span>{<a href="Shared/StorageTestBase.cs.html#cc52c33c34e7c8bb" class="i property">TestConfigHierarchicalNamespace</a>.<a href="Shared/TenantConfiguration.cs.html#9c094343c57a64fb" class="i property">BlobServiceEndpoint</a>}<span class="s">?</span>{<span class="r35 r">sasCredentials</span> ?? <a href="#fa9c11cdf00e1d42" class="i method">GetNewDataLakeServiceSasCredentialsFileSystem</a>(<span class="r36 r">fileSystemName</span>: <span class="r33 r">fileSystemName</span>, <span class="r37 r">sharedKeyCredentials</span>: <span class="r34 r">sharedKeyCredentials</span> ?? <a href="#bfbd2975e68f1f5b" class="i method">GetNewSharedKeyCredentials</a>())}<span class="s">&quot;</span>),
                    <a href="#6c242f696910149c" class="i method">GetOptions</a>()));
 
        <b>public</b> <a href="/Azure.Storage.Files.DataLake/A.html#72a3781650abbd16" class="t t">DataLakeServiceClient</a> <a id="87f106e73e6148c3" href="R/87f106e73e6148c3.html" target="n" data-glyph="72,1" class="i method">GetServiceClient_DataLakeServiceIdentitySas_FileSystem</a>(
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r38 rd" class="r38 r">fileSystemName</span>,
            <a href="/Azure.Storage.Files.DataLake/A.html#9aced272785b05b2" class="t t">UserDelegationKey</a> <span id="r39 rd" class="r39 r">userDelegationKey</span>,
            <a href="/Azure.Storage.Files.DataLake/A.html#dd1dd9db38b03120" class="t t">DataLakeSasQueryParameters</a> <span id="r40 rd" class="r40 r">sasCredentials</span> = <b>default</b>)
            =&gt; <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(
                <b>new</b> <a href="/Azure.Storage.Files.DataLake/A.html#a8723334d39511ef" class="t constructor">DataLakeServiceClient</a>(
                    (<b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span>{<a href="Shared/StorageTestBase.cs.html#cc52c33c34e7c8bb" class="i property">TestConfigHierarchicalNamespace</a>.<a href="Shared/TenantConfiguration.cs.html#9c094343c57a64fb" class="i property">BlobServiceEndpoint</a>}<span class="s">?</span>{<span class="r40 r">sasCredentials</span> ?? <a href="#f1057d10ab68bab8" class="i method">GetNewDataLakeServiceIdentitySasCredentialsFileSystem</a>(<span class="r41 r">fileSystemName</span>: <span class="r38 r">fileSystemName</span>, <span class="r39 r">userDelegationKey</span>, <a href="Shared/StorageTestBase.cs.html#cc52c33c34e7c8bb" class="i property">TestConfigHierarchicalNamespace</a>.<a href="Shared/TenantConfiguration.cs.html#774d8fba75d6b5dd" class="i property">AccountName</a>)}<span class="s">&quot;</span>)).<a href="UriExtensions.cs.html#94090fa2879b041a" class="i method">ToHttps</a>(),
                    <a href="#6c242f696910149c" class="i method">GetOptions</a>()));
 
        <b>public</b> <a href="/Azure.Storage.Files.DataLake/A.html#72a3781650abbd16" class="t t">DataLakeServiceClient</a> <a id="5ad70448c2ad6f03" href="R/5ad70448c2ad6f03.html" target="n" data-glyph="72,1" class="i method">GetServiceClient_DataLakeServiceSas_Path</a>(
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r42 rd" class="r42 r">fileSystemName</span>,
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r43 rd" class="r43 r">path</span>,
            <a href="/Azure.Storage.Common/A.html#6b51bf09188ec1c0" class="t t">StorageSharedKeyCredential</a> <span id="r44 rd" class="r44 r">sharedKeyCredentials</span> = <b>default</b>,
            <a href="/Azure.Storage.Files.DataLake/A.html#dd1dd9db38b03120" class="t t">DataLakeSasQueryParameters</a> <span id="r45 rd" class="r45 r">sasCredentials</span> = <b>default</b>)
            =&gt; <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(
                <b>new</b> <a href="/Azure.Storage.Files.DataLake/A.html#a8723334d39511ef" class="t constructor">DataLakeServiceClient</a>(
                    <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span>{<a href="Shared/StorageTestBase.cs.html#cc52c33c34e7c8bb" class="i property">TestConfigHierarchicalNamespace</a>.<a href="Shared/TenantConfiguration.cs.html#9c094343c57a64fb" class="i property">BlobServiceEndpoint</a>}<span class="s">?</span>{<span class="r45 r">sasCredentials</span> ?? <a href="#753e2ad3bbe74fb7" class="i method">GetNewDataLakeServiceSasCredentialsPath</a>(<span class="r46 r">fileSystemName</span>: <span class="r42 r">fileSystemName</span>, <span class="r47 r">path</span>: <span class="r43 r">path</span>, <span class="r48 r">sharedKeyCredentials</span>: <span class="r44 r">sharedKeyCredentials</span> ?? <a href="#bfbd2975e68f1f5b" class="i method">GetNewSharedKeyCredentials</a>())}<span class="s">&quot;</span>),
                    <a href="#6c242f696910149c" class="i method">GetOptions</a>()));
 
        <b>public</b> <a href="/Azure.Storage.Files.DataLake/A.html#72a3781650abbd16" class="t t">DataLakeServiceClient</a> <a id="7767d83feb5d12f7" href="R/7767d83feb5d12f7.html" target="n" data-glyph="72,1" class="i method">GetServiceClient_DataLakeServiceIdentitySas_Path</a>(
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r49 rd" class="r49 r">fileSystemName</span>,
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r50 rd" class="r50 r">path</span>,
            <a href="/Azure.Storage.Files.DataLake/A.html#9aced272785b05b2" class="t t">UserDelegationKey</a> <span id="r51 rd" class="r51 r">userDelegationKey</span>,
            <a href="/Azure.Storage.Files.DataLake/A.html#dd1dd9db38b03120" class="t t">DataLakeSasQueryParameters</a> <span id="r52 rd" class="r52 r">sasCredentials</span> = <b>default</b>)
            =&gt; <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(
                <b>new</b> <a href="/Azure.Storage.Files.DataLake/A.html#a8723334d39511ef" class="t constructor">DataLakeServiceClient</a>(
                    (<b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span>{<a href="Shared/StorageTestBase.cs.html#cc52c33c34e7c8bb" class="i property">TestConfigHierarchicalNamespace</a>.<a href="Shared/TenantConfiguration.cs.html#9c094343c57a64fb" class="i property">BlobServiceEndpoint</a>}<span class="s">?</span>{<span class="r52 r">sasCredentials</span> ?? <a href="#507d8db86f7537ae" class="i method">GetNewDataLakeServiceIdentitySasCredentialsPath</a>(<span class="r53 r">fileSystemName</span>: <span class="r49 r">fileSystemName</span>, <span class="r54 r">path</span>: <span class="r50 r">path</span>, <span class="r55 r">userDelegationKey</span>: <span class="r51 r">userDelegationKey</span>, <span class="r56 r">accountName</span>: <a href="Shared/StorageTestBase.cs.html#cc52c33c34e7c8bb" class="i property">TestConfigHierarchicalNamespace</a>.<a href="Shared/TenantConfiguration.cs.html#774d8fba75d6b5dd" class="i property">AccountName</a>)}<span class="s">&quot;</span>)).<a href="UriExtensions.cs.html#94090fa2879b041a" class="i method">ToHttps</a>(),
                    <a href="#6c242f696910149c" class="i method">GetOptions</a>()));
 
        <b>public</b> <a href="/Azure.Storage.Common/A.html#6b51bf09188ec1c0" class="t t">StorageSharedKeyCredential</a> <a id="bfbd2975e68f1f5b" href="R/bfbd2975e68f1f5b.html" target="n" data-glyph="72,1" class="i method">GetNewSharedKeyCredentials</a>()
            =&gt; <b>new</b> <a href="/Azure.Storage.Common/A.html#5886b33715fef501" class="t constructor">StorageSharedKeyCredential</a>(
                    <a href="Shared/StorageTestBase.cs.html#cc52c33c34e7c8bb" class="i property">TestConfigHierarchicalNamespace</a>.<a href="Shared/TenantConfiguration.cs.html#774d8fba75d6b5dd" class="i property">AccountName</a>,
                    <a href="Shared/StorageTestBase.cs.html#cc52c33c34e7c8bb" class="i property">TestConfigHierarchicalNamespace</a>.<a href="Shared/TenantConfiguration.cs.html#fc6c2fe34872ce46" class="i property">AccountKey</a>);
 
        <b>public</b> <a href="/Azure.Storage.Common/A.html#6d8135d9673080f5" class="t t">SasQueryParameters</a> <a id="61a79c27294a6fe0" href="R/61a79c27294a6fe0.html" target="n" data-glyph="72,1" class="i method">GetNewAccountSasCredentials</a>(<a href="/Azure.Storage.Common/A.html#6b51bf09188ec1c0" class="t t">StorageSharedKeyCredential</a> <span id="r57 rd" class="r57 r">sharedKeyCredentials</span> = <b>default</b>)
        {
            <a href="/Azure.Storage.Common/A.html#9ce56d23198efd7e" class="k">var</a> <span id="r58 rd" class="r58 r">builder</span> = <b>new</b> <a href="/Azure.Storage.Common/A.html#f12e731e35413cd6" class="t constructor">AccountSasBuilder</a>
            {
                <a href="/Azure.Storage.Common/A.html#9c188c8afa2f76a8" class="i property">Protocol</a> = <a href="/Azure.Storage.Common/A.html#0acd3b9b8aa8ffc2" class="t t">SasProtocol</a>.<a href="/Azure.Storage.Common/A.html#848f533f51ab1184" class="i field">None</a>,
                <a href="/Azure.Storage.Common/A.html#cc25051703a160b5" class="i property">Services</a> = <a href="/Azure.Storage.Common/A.html#0a5d24da836f2db6" class="t t">AccountSasServices</a>.<a href="/Azure.Storage.Common/A.html#0fa0498d548f0dc7" class="i field">Blobs</a>,
                <a href="/Azure.Storage.Common/A.html#b595ea5c6b07ce36" class="i property">ResourceTypes</a> = <a href="/Azure.Storage.Common/A.html#1e2952f573dd64b0" class="t t">AccountSasResourceTypes</a>.<a href="/Azure.Storage.Common/A.html#fb06b0ba251e75ec" class="i field">All</a>,
                <a href="/Azure.Storage.Common/A.html#b122347d1a0fbefb" class="i property">StartsOn</a> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(-1),
                <a href="/Azure.Storage.Common/A.html#42dc66dc8a568375" class="i property">ExpiresOn</a> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(+1),
                <a href="/Azure.Storage.Common/A.html#9c5df8e8e89e95d9" class="i property">IPRange</a> = <b>new</b> <a href="/Azure.Storage.Common/A.html#6c3b5693020cf6b5" class="t constructor">SasIPRange</a>(<a href="@0@System/A.html#966bd1c3b2dc55c7" class="t t">IPAddress</a>.<a href="@0@System/A.html#eb12009d0f65f719" class="i field">None</a>, <a href="@0@System/A.html#966bd1c3b2dc55c7" class="t t">IPAddress</a>.<a href="@0@System/A.html#eb12009d0f65f719" class="i field">None</a>)
            };
            <span class="r58 r">builder</span>.<a href="/Azure.Storage.Common/A.html#a4e6daa13f62ce35" class="i method">SetPermissions</a>(
                <a href="/Azure.Storage.Common/A.html#ac762c6c5829d9cc" class="t t">AccountSasPermissions</a>.<a href="/Azure.Storage.Common/A.html#9a7c879d31375fb6" class="i field">Read</a> |
                <a href="/Azure.Storage.Common/A.html#ac762c6c5829d9cc" class="t t">AccountSasPermissions</a>.<a href="/Azure.Storage.Common/A.html#f681b93438653534" class="i field">Add</a> |
                <a href="/Azure.Storage.Common/A.html#ac762c6c5829d9cc" class="t t">AccountSasPermissions</a>.<a href="/Azure.Storage.Common/A.html#d080f3419e8510a5" class="i field">Create</a> |
                <a href="/Azure.Storage.Common/A.html#ac762c6c5829d9cc" class="t t">AccountSasPermissions</a>.<a href="/Azure.Storage.Common/A.html#7ff3fe0ed71db607" class="i field">Write</a> |
                <a href="/Azure.Storage.Common/A.html#ac762c6c5829d9cc" class="t t">AccountSasPermissions</a>.<a href="/Azure.Storage.Common/A.html#04f3efd6e13c7752" class="i field">Delete</a> |
                <a href="/Azure.Storage.Common/A.html#ac762c6c5829d9cc" class="t t">AccountSasPermissions</a>.<a href="/Azure.Storage.Common/A.html#cdb269708444ef8d" class="i field">List</a>);
            <b>return</b> <span class="r58 r">builder</span>.<a href="/Azure.Storage.Common/A.html#09d1ecf8b33816fc" class="i method">ToSasQueryParameters</a>(<span class="r57 r">sharedKeyCredentials</span> ?? <a href="#bfbd2975e68f1f5b" class="i method">GetNewSharedKeyCredentials</a>());
        }
 
        <b>public</b> <a href="/Azure.Storage.Files.DataLake/A.html#dd1dd9db38b03120" class="t t">DataLakeSasQueryParameters</a> <a id="fa9c11cdf00e1d42" href="R/fa9c11cdf00e1d42.html" target="n" data-glyph="72,1" class="i method">GetNewDataLakeServiceSasCredentialsFileSystem</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r36 rd" class="r36 r">fileSystemName</span>, <a href="/Azure.Storage.Common/A.html#6b51bf09188ec1c0" class="t t">StorageSharedKeyCredential</a> <span id="r37 rd" class="r37 r">sharedKeyCredentials</span> = <b>default</b>)
        {
            <a href="/Azure.Storage.Files.DataLake/A.html#35f26eb8f6a47796" class="k">var</a> <span id="r59 rd" class="r59 r">builder</span> = <b>new</b> <a href="/Azure.Storage.Files.DataLake/A.html#03a4ec6a3723ae08" class="t constructor">DataLakeSasBuilder</a>
            {
                <a href="/Azure.Storage.Files.DataLake/A.html#bae459f1dd597372" class="i property">FileSystemName</a> = <span class="r36 r">fileSystemName</span>,
                <a href="/Azure.Storage.Files.DataLake/A.html#a9807838bbac976e" class="i property">Protocol</a> = <a href="/Azure.Storage.Common/A.html#0acd3b9b8aa8ffc2" class="t t">SasProtocol</a>.<a href="/Azure.Storage.Common/A.html#848f533f51ab1184" class="i field">None</a>,
                <a href="/Azure.Storage.Files.DataLake/A.html#4aaf26e88477df4b" class="i property">StartsOn</a> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(-1),
                <a href="/Azure.Storage.Files.DataLake/A.html#9443692dbac8d5ce" class="i property">ExpiresOn</a> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(+1),
                <a href="/Azure.Storage.Files.DataLake/A.html#4d86cde09b4a0b4e" class="i property">IPRange</a> = <b>new</b> <a href="/Azure.Storage.Common/A.html#6c3b5693020cf6b5" class="t constructor">SasIPRange</a>(<a href="@0@System/A.html#966bd1c3b2dc55c7" class="t t">IPAddress</a>.<a href="@0@System/A.html#eb12009d0f65f719" class="i field">None</a>, <a href="@0@System/A.html#966bd1c3b2dc55c7" class="t t">IPAddress</a>.<a href="@0@System/A.html#eb12009d0f65f719" class="i field">None</a>)
            };
            <span class="r59 r">builder</span>.<a href="/Azure.Storage.Files.DataLake/A.html#96efc949c7531181" class="i method">SetPermissions</a>(<a href="/Azure.Storage.Files.DataLake/A.html#6b14e80a7577b352" class="t t">DataLakeFileSystemSasPermissions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#e274aed6af6357d5" class="i field">All</a>);
            <b>return</b> <span class="r59 r">builder</span>.<a href="/Azure.Storage.Files.DataLake/A.html#2b961491a858566d" class="i method">ToSasQueryParameters</a>(<span class="r37 r">sharedKeyCredentials</span> ?? <a href="#bfbd2975e68f1f5b" class="i method">GetNewSharedKeyCredentials</a>());
        }
 
        <b>public</b> <a href="/Azure.Storage.Files.DataLake/A.html#dd1dd9db38b03120" class="t t">DataLakeSasQueryParameters</a> <a id="f1057d10ab68bab8" href="R/f1057d10ab68bab8.html" target="n" data-glyph="72,1" class="i method">GetNewDataLakeServiceIdentitySasCredentialsFileSystem</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r41 rd" class="r41 r">fileSystemName</span>, <a href="/Azure.Storage.Files.DataLake/A.html#9aced272785b05b2" class="t t">UserDelegationKey</a> <span id="r60 rd" class="r60 r">userDelegationKey</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r61 rd" class="r61 r">accountName</span>)
        {
            <a href="/Azure.Storage.Files.DataLake/A.html#35f26eb8f6a47796" class="k">var</a> <span id="r62 rd" class="r62 r">builder</span> = <b>new</b> <a href="/Azure.Storage.Files.DataLake/A.html#03a4ec6a3723ae08" class="t constructor">DataLakeSasBuilder</a>
            {
                <a href="/Azure.Storage.Files.DataLake/A.html#bae459f1dd597372" class="i property">FileSystemName</a> = <span class="r41 r">fileSystemName</span>,
                <a href="/Azure.Storage.Files.DataLake/A.html#a9807838bbac976e" class="i property">Protocol</a> = <a href="/Azure.Storage.Common/A.html#0acd3b9b8aa8ffc2" class="t t">SasProtocol</a>.<a href="/Azure.Storage.Common/A.html#848f533f51ab1184" class="i field">None</a>,
                <a href="/Azure.Storage.Files.DataLake/A.html#4aaf26e88477df4b" class="i property">StartsOn</a> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(-1),
                <a href="/Azure.Storage.Files.DataLake/A.html#9443692dbac8d5ce" class="i property">ExpiresOn</a> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(+1),
                <a href="/Azure.Storage.Files.DataLake/A.html#4d86cde09b4a0b4e" class="i property">IPRange</a> = <b>new</b> <a href="/Azure.Storage.Common/A.html#6c3b5693020cf6b5" class="t constructor">SasIPRange</a>(<a href="@0@System/A.html#966bd1c3b2dc55c7" class="t t">IPAddress</a>.<a href="@0@System/A.html#eb12009d0f65f719" class="i field">None</a>, <a href="@0@System/A.html#966bd1c3b2dc55c7" class="t t">IPAddress</a>.<a href="@0@System/A.html#eb12009d0f65f719" class="i field">None</a>)
            };
            <span class="r62 r">builder</span>.<a href="/Azure.Storage.Files.DataLake/A.html#96efc949c7531181" class="i method">SetPermissions</a>(<a href="/Azure.Storage.Files.DataLake/A.html#6b14e80a7577b352" class="t t">DataLakeFileSystemSasPermissions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#e274aed6af6357d5" class="i field">All</a>);
            <b>return</b> <span class="r62 r">builder</span>.<a href="/Azure.Storage.Files.DataLake/A.html#4f2f0281ab0eeaf1" class="i method">ToSasQueryParameters</a>(<span class="r60 r">userDelegationKey</span>, <span class="r61 r">accountName</span>);
        }
 
        <b>public</b> <a href="/Azure.Storage.Files.DataLake/A.html#dd1dd9db38b03120" class="t t">DataLakeSasQueryParameters</a> <a id="753e2ad3bbe74fb7" href="R/753e2ad3bbe74fb7.html" target="n" data-glyph="72,1" class="i method">GetNewDataLakeServiceSasCredentialsPath</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r46 rd" class="r46 r">fileSystemName</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r47 rd" class="r47 r">path</span>, <a href="/Azure.Storage.Common/A.html#6b51bf09188ec1c0" class="t t">StorageSharedKeyCredential</a> <span id="r48 rd" class="r48 r">sharedKeyCredentials</span> = <b>default</b>)
        {
            <a href="/Azure.Storage.Files.DataLake/A.html#35f26eb8f6a47796" class="k">var</a> <span id="r63 rd" class="r63 r">builder</span> = <b>new</b> <a href="/Azure.Storage.Files.DataLake/A.html#03a4ec6a3723ae08" class="t constructor">DataLakeSasBuilder</a>
            {
                <a href="/Azure.Storage.Files.DataLake/A.html#bae459f1dd597372" class="i property">FileSystemName</a> = <span class="r46 r">fileSystemName</span>,
                <a href="/Azure.Storage.Files.DataLake/A.html#d48175253ac48e21" class="i property">Path</a> = <span class="r47 r">path</span>,
                <a href="/Azure.Storage.Files.DataLake/A.html#a9807838bbac976e" class="i property">Protocol</a> = <a href="/Azure.Storage.Common/A.html#0acd3b9b8aa8ffc2" class="t t">SasProtocol</a>.<a href="/Azure.Storage.Common/A.html#848f533f51ab1184" class="i field">None</a>,
                <a href="/Azure.Storage.Files.DataLake/A.html#4aaf26e88477df4b" class="i property">StartsOn</a> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(-1),
                <a href="/Azure.Storage.Files.DataLake/A.html#9443692dbac8d5ce" class="i property">ExpiresOn</a> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(+1),
                <a href="/Azure.Storage.Files.DataLake/A.html#4d86cde09b4a0b4e" class="i property">IPRange</a> = <b>new</b> <a href="/Azure.Storage.Common/A.html#6c3b5693020cf6b5" class="t constructor">SasIPRange</a>(<a href="@0@System/A.html#966bd1c3b2dc55c7" class="t t">IPAddress</a>.<a href="@0@System/A.html#eb12009d0f65f719" class="i field">None</a>, <a href="@0@System/A.html#966bd1c3b2dc55c7" class="t t">IPAddress</a>.<a href="@0@System/A.html#eb12009d0f65f719" class="i field">None</a>)
            };
            <span class="r63 r">builder</span>.<a href="/Azure.Storage.Files.DataLake/A.html#5dd783aa1f03f049" class="i method">SetPermissions</a>(
                <a href="/Azure.Storage.Files.DataLake/A.html#363ea56c8724558f" class="t t">DataLakeSasPermissions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#bc94a1ee7c1244bb" class="i field">Read</a> |
                <a href="/Azure.Storage.Files.DataLake/A.html#363ea56c8724558f" class="t t">DataLakeSasPermissions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#9079afdf6862320a" class="i field">Add</a> |
                <a href="/Azure.Storage.Files.DataLake/A.html#363ea56c8724558f" class="t t">DataLakeSasPermissions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#270f196a545ba538" class="i field">Create</a> |
                <a href="/Azure.Storage.Files.DataLake/A.html#363ea56c8724558f" class="t t">DataLakeSasPermissions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#bba56946efbcd22e" class="i field">Delete</a> |
                <a href="/Azure.Storage.Files.DataLake/A.html#363ea56c8724558f" class="t t">DataLakeSasPermissions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#3860d36476bc8e89" class="i field">Write</a>);
            <b>return</b> <span class="r63 r">builder</span>.<a href="/Azure.Storage.Files.DataLake/A.html#2b961491a858566d" class="i method">ToSasQueryParameters</a>(<span class="r48 r">sharedKeyCredentials</span> ?? <a href="#bfbd2975e68f1f5b" class="i method">GetNewSharedKeyCredentials</a>());
        }
 
        <b>public</b> <a href="/Azure.Storage.Files.DataLake/A.html#dd1dd9db38b03120" class="t t">DataLakeSasQueryParameters</a> <a id="507d8db86f7537ae" href="R/507d8db86f7537ae.html" target="n" data-glyph="72,1" class="i method">GetNewDataLakeServiceIdentitySasCredentialsPath</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r53 rd" class="r53 r">fileSystemName</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r54 rd" class="r54 r">path</span>, <a href="/Azure.Storage.Files.DataLake/A.html#9aced272785b05b2" class="t t">UserDelegationKey</a> <span id="r55 rd" class="r55 r">userDelegationKey</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r56 rd" class="r56 r">accountName</span>)
        {
            <a href="/Azure.Storage.Files.DataLake/A.html#35f26eb8f6a47796" class="k">var</a> <span id="r64 rd" class="r64 r">builder</span> = <b>new</b> <a href="/Azure.Storage.Files.DataLake/A.html#03a4ec6a3723ae08" class="t constructor">DataLakeSasBuilder</a>
            {
                <a href="/Azure.Storage.Files.DataLake/A.html#bae459f1dd597372" class="i property">FileSystemName</a> = <span class="r53 r">fileSystemName</span>,
                <a href="/Azure.Storage.Files.DataLake/A.html#d48175253ac48e21" class="i property">Path</a> = <span class="r54 r">path</span>,
                <a href="/Azure.Storage.Files.DataLake/A.html#a9807838bbac976e" class="i property">Protocol</a> = <a href="/Azure.Storage.Common/A.html#0acd3b9b8aa8ffc2" class="t t">SasProtocol</a>.<a href="/Azure.Storage.Common/A.html#848f533f51ab1184" class="i field">None</a>,
                <a href="/Azure.Storage.Files.DataLake/A.html#4aaf26e88477df4b" class="i property">StartsOn</a> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(-1),
                <a href="/Azure.Storage.Files.DataLake/A.html#9443692dbac8d5ce" class="i property">ExpiresOn</a> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(+1),
                <a href="/Azure.Storage.Files.DataLake/A.html#4d86cde09b4a0b4e" class="i property">IPRange</a> = <b>new</b> <a href="/Azure.Storage.Common/A.html#6c3b5693020cf6b5" class="t constructor">SasIPRange</a>(<a href="@0@System/A.html#966bd1c3b2dc55c7" class="t t">IPAddress</a>.<a href="@0@System/A.html#eb12009d0f65f719" class="i field">None</a>, <a href="@0@System/A.html#966bd1c3b2dc55c7" class="t t">IPAddress</a>.<a href="@0@System/A.html#eb12009d0f65f719" class="i field">None</a>)
            };
            <span class="r64 r">builder</span>.<a href="/Azure.Storage.Files.DataLake/A.html#5dd783aa1f03f049" class="i method">SetPermissions</a>(
                <a href="/Azure.Storage.Files.DataLake/A.html#363ea56c8724558f" class="t t">DataLakeSasPermissions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#bc94a1ee7c1244bb" class="i field">Read</a> |
                <a href="/Azure.Storage.Files.DataLake/A.html#363ea56c8724558f" class="t t">DataLakeSasPermissions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#9079afdf6862320a" class="i field">Add</a> |
                <a href="/Azure.Storage.Files.DataLake/A.html#363ea56c8724558f" class="t t">DataLakeSasPermissions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#270f196a545ba538" class="i field">Create</a> |
                <a href="/Azure.Storage.Files.DataLake/A.html#363ea56c8724558f" class="t t">DataLakeSasPermissions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#bba56946efbcd22e" class="i field">Delete</a> |
                <a href="/Azure.Storage.Files.DataLake/A.html#363ea56c8724558f" class="t t">DataLakeSasPermissions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#3860d36476bc8e89" class="i field">Write</a>);
            <b>return</b> <span class="r64 r">builder</span>.<a href="/Azure.Storage.Files.DataLake/A.html#4f2f0281ab0eeaf1" class="i method">ToSasQueryParameters</a>(<span class="r55 r">userDelegationKey</span>, <span class="r56 r">accountName</span>);
        }
 
        <b>public</b> <a href="/Azure.Storage.Files.DataLake/A.html#dd1dd9db38b03120" class="t t">DataLakeSasQueryParameters</a> <a id="f707423d2c66131d" href="R/f707423d2c66131d.html" target="n" data-glyph="72,1" class="i method">GetNewDataLakeSasCredentialsOwner</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r65 rd" class="r65 r">fileSystemName</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r66 rd" class="r66 r">ownerName</span>, <a href="/Azure.Storage.Files.DataLake/A.html#9aced272785b05b2" class="t t">UserDelegationKey</a> <span id="r67 rd" class="r67 r">userDelegationKey</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r68 rd" class="r68 r">accountName</span>)
        {
            <a href="/Azure.Storage.Files.DataLake/A.html#35f26eb8f6a47796" class="t t">DataLakeSasBuilder</a> <span id="r69 rd" class="r69 r">dataLakeSasBuilder</span> = <b>new</b> <a href="/Azure.Storage.Files.DataLake/A.html#03a4ec6a3723ae08" class="t constructor">DataLakeSasBuilder</a>
            {
                <a href="/Azure.Storage.Files.DataLake/A.html#4aaf26e88477df4b" class="i property">StartsOn</a> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(-1),
                <a href="/Azure.Storage.Files.DataLake/A.html#9443692dbac8d5ce" class="i property">ExpiresOn</a> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(1),
                <a href="/Azure.Storage.Files.DataLake/A.html#bae459f1dd597372" class="i property">FileSystemName</a> = <span class="r65 r">fileSystemName</span>,
                <a href="/Azure.Storage.Files.DataLake/A.html#37af941a809d1c61" class="i property">AgentObjectId</a> = <span class="r66 r">ownerName</span>
            };
            <span class="r69 r">dataLakeSasBuilder</span>.<a href="/Azure.Storage.Files.DataLake/A.html#5dd783aa1f03f049" class="i method">SetPermissions</a>(<a href="/Azure.Storage.Files.DataLake/A.html#363ea56c8724558f" class="t t">DataLakeSasPermissions</a>.<a href="/Azure.Storage.Files.DataLake/A.html#bb10a1c3cb41a729" class="i field">All</a>);
            <b>return</b> <span class="r69 r">dataLakeSasBuilder</span>.<a href="/Azure.Storage.Files.DataLake/A.html#4f2f0281ab0eeaf1" class="i method">ToSasQueryParameters</a>(<span class="r67 r">userDelegationKey</span>, <span class="r68 r">accountName</span>);
        }
 
        <b>public</b> <a href="/Azure.Storage.Common/A.html#6d8135d9673080f5" class="t t">SasQueryParameters</a> <a id="11ef44ff094febac" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetNewAccountSas</a>(
            <a href="/Azure.Storage.Common/A.html#1e2952f573dd64b0" class="t t">AccountSasResourceTypes</a> <span id="r70 rd" class="r70 r">resourceTypes</span> = <a href="/Azure.Storage.Common/A.html#1e2952f573dd64b0" class="t t">AccountSasResourceTypes</a>.<a href="/Azure.Storage.Common/A.html#fb06b0ba251e75ec" class="i field">All</a>,
            <a href="/Azure.Storage.Common/A.html#ac762c6c5829d9cc" class="t t">AccountSasPermissions</a> <span id="r71 rd" class="r71 r">permissions</span> = <a href="/Azure.Storage.Common/A.html#ac762c6c5829d9cc" class="t t">AccountSasPermissions</a>.<a href="/Azure.Storage.Common/A.html#dec433cd96ddae14" class="i field">All</a>,
            <a href="/Azure.Storage.Common/A.html#6b51bf09188ec1c0" class="t t">StorageSharedKeyCredential</a> <span id="r72 rd" class="r72 r">sharedKeyCredentials</span> = <b>default</b>)
        {
            <a href="/Azure.Storage.Common/A.html#9ce56d23198efd7e" class="k">var</a> <span id="r73 rd" class="r73 r">builder</span> = <b>new</b> <a href="/Azure.Storage.Common/A.html#f12e731e35413cd6" class="t constructor">AccountSasBuilder</a>
            {
                <a href="/Azure.Storage.Common/A.html#9c188c8afa2f76a8" class="i property">Protocol</a> = <a href="/Azure.Storage.Common/A.html#0acd3b9b8aa8ffc2" class="t t">SasProtocol</a>.<a href="/Azure.Storage.Common/A.html#848f533f51ab1184" class="i field">None</a>,
                <a href="/Azure.Storage.Common/A.html#cc25051703a160b5" class="i property">Services</a> = <a href="/Azure.Storage.Common/A.html#0a5d24da836f2db6" class="t t">AccountSasServices</a>.<a href="/Azure.Storage.Common/A.html#0fa0498d548f0dc7" class="i field">Blobs</a>,
                <a href="/Azure.Storage.Common/A.html#b595ea5c6b07ce36" class="i property">ResourceTypes</a> = <span class="r70 r">resourceTypes</span>,
                <a href="/Azure.Storage.Common/A.html#b122347d1a0fbefb" class="i property">StartsOn</a> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(-1),
                <a href="/Azure.Storage.Common/A.html#42dc66dc8a568375" class="i property">ExpiresOn</a> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(+1),
                <a href="/Azure.Storage.Common/A.html#9c5df8e8e89e95d9" class="i property">IPRange</a> = <b>new</b> <a href="/Azure.Storage.Common/A.html#6c3b5693020cf6b5" class="t constructor">SasIPRange</a>(<a href="@0@System/A.html#966bd1c3b2dc55c7" class="t t">IPAddress</a>.<a href="@0@System/A.html#eb12009d0f65f719" class="i field">None</a>, <a href="@0@System/A.html#966bd1c3b2dc55c7" class="t t">IPAddress</a>.<a href="@0@System/A.html#eb12009d0f65f719" class="i field">None</a>),
            };
            <span class="r73 r">builder</span>.<a href="/Azure.Storage.Common/A.html#a4e6daa13f62ce35" class="i method">SetPermissions</a>(<span class="r71 r">permissions</span>);
            <b>return</b> <span class="r73 r">builder</span>.<a href="/Azure.Storage.Common/A.html#09d1ecf8b33816fc" class="i method">ToSasQueryParameters</a>(<span class="r72 r">sharedKeyCredentials</span> ?? <a href="#bfbd2975e68f1f5b" class="i method">GetNewSharedKeyCredentials</a>());
        }
 
        <b>public string</b> <a id="0bb926068051065f" href="R/0bb926068051065f.html" target="n" data-glyph="72,1" class="i method">BlobEndpointToDfsEndpoint</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r74 rd" class="r74 r">blobEndpoint</span> = <b>default</b>)
        {
            <b>if</b> (<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#23a8597f842071f4" class="i method">IsNullOrEmpty</a>(<span class="r74 r">blobEndpoint</span>))
            {
                <span class="r74 r">blobEndpoint</span> = <a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#9c094343c57a64fb" class="i property">BlobServiceEndpoint</a>;
            }
 
            <b>int</b> <span id="r75 rd" class="r75 r">pos</span> = <span class="r74 r">blobEndpoint</span>.<a href="@0@mscorlib/A.html#cf9e6bfe83442551" class="i method">IndexOf</a>(<a href="/Azure.Storage.Files.DataLake/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Files.DataLake/A.html#a19904d9c699ff5f" class="t t">DataLake</a>.<a href="/Azure.Storage.Files.DataLake/A.html#efc3664cc1ee321e" class="i field">BlobUriSuffix</a>);
            <b>if</b> (<span class="r75 r">pos</span> &lt; 0)
            {
                <b>return</b> <span class="r74 r">blobEndpoint</span>;
            }
            <b>return</b> <span class="r74 r">blobEndpoint</span>.<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, <span class="r75 r">pos</span>) + <a href="/Azure.Storage.Files.DataLake/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Files.DataLake/A.html#a19904d9c699ff5f" class="t t">DataLake</a>.<a href="/Azure.Storage.Files.DataLake/A.html#47d0fc9218a62cef" class="i field">DfsUriSuffix</a> +
                <span class="r74 r">blobEndpoint</span>.<a href="@0@mscorlib/A.html#882fa7998d6ca35a" class="i method">Substring</a>(<span class="r75 r">pos</span> + <a href="/Azure.Storage.Files.DataLake/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Files.DataLake/A.html#a19904d9c699ff5f" class="t t">DataLake</a>.<a href="/Azure.Storage.Files.DataLake/A.html#efc3664cc1ee321e" class="i field">BlobUriSuffix</a>.<a href="@0@mscorlib/A.html#e13f5829ef28aa07" class="i property">Length</a>);
        }
 
        <span class="c">//TODO consider removing this.</span>
        <b>public async</b> <a href="@0@mscorlib/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <a id="7243b0f3d79105f5" href="R/7243b0f3d79105f5.html" target="n" data-glyph="72,1" class="i method">SetupPathMatchCondition</a>(<a href="/Azure.Storage.Files.DataLake/A.html#c54dbd3ebac65f4f" class="t t">DataLakePathClient</a> <span id="r76 rd" class="r76 r">path</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r77 rd" class="r77 r">match</span>)
        {
            <b>if</b> (<span class="r77 r">match</span> == <a href="#035cdd8ad6ea9cf5" class="i field">ReceivedETag</a>)
            {
                <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Files.DataLake/A.html#04f1bcd838401da6" class="t t">PathProperties</a>&gt; <span id="r78 rd" class="r78 r">headers</span> = <b>await</b> <span class="r76 r">path</span>.<a href="/Azure.Storage.Files.DataLake/A.html#5578f14b22285c98" class="i method">GetPropertiesAsync</a>();
                <b>return</b> <span class="r78 r">headers</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Files.DataLake/A.html#c17906ce03eb4385" class="i property">ETag</a>.<a href="/Azure.Core/A.html#c02596ded366f933" class="i method">ToString</a>();
            }
            <b>else</b>
            {
                <b>return</b> <span class="r77 r">match</span>;
            }
        }
 
        <span class="c">//TODO consider removing this.</span>
        <b>public async</b> <a href="@0@mscorlib/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <a id="a833fafbf229812c" href="R/a833fafbf229812c.html" target="n" data-glyph="72,1" class="i method">SetupPathLeaseCondition</a>(<a href="/Azure.Storage.Files.DataLake/A.html#c54dbd3ebac65f4f" class="t t">DataLakePathClient</a> <span id="r79 rd" class="r79 r">path</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r80 rd" class="r80 r">leaseId</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r81 rd" class="r81 r">garbageLeaseId</span>)
        {
            <span class="i n">Models</span>.<a href="/Azure.Storage.Files.DataLake/A.html#d5a97c22413f7d3d" class="t t">DataLakeLease</a> <span id="r82 rd" class="r82 r">lease</span> = <b>null</b>;
            <b>if</b> (<span class="r80 r">leaseId</span> == <a href="#fa23f9e7b7beaf03" class="i field">ReceivedLeaseId</a> || <span class="r80 r">leaseId</span> == <span class="r81 r">garbageLeaseId</span>)
            {
                <span class="r82 r">lease</span> = <b>await</b> <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r79 r">path</span>.<a href="/Azure.Storage.Files.DataLake/A.html#fcc71e7e880b1c5d" class="i method">GetDataLakeLeaseClient</a>(<a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>())).<a href="/Azure.Storage.Files.DataLake/A.html#da0a2a7797e89ada" class="i method">AcquireAsync</a>(<a href="/Azure.Storage.Files.DataLake/A.html#7eee50b965816e85" class="t t">DataLakeLeaseClient</a>.<a href="/Azure.Storage.Files.DataLake/A.html#b9f0009b0cef69b2" class="i field">InfiniteLeaseDuration</a>);
            }
            <b>return</b> <span class="r80 r">leaseId</span> == <a href="#fa23f9e7b7beaf03" class="i field">ReceivedLeaseId</a> ? <span class="r82 r">lease</span>.<a href="/Azure.Storage.Files.DataLake/A.html#7d3a88a0720abeaa" class="i property">LeaseId</a> : <span class="r80 r">leaseId</span>;
        }
 
        <span class="c">//TODO consider removing this.</span>
        <b>public async</b> <a href="@0@mscorlib/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <a id="711a23fe76181289" href="R/711a23fe76181289.html" target="n" data-glyph="72,1" class="i method">SetupFileSystemLeaseCondition</a>(<a href="/Azure.Storage.Files.DataLake/A.html#ea909608102ce2f0" class="t t">DataLakeFileSystemClient</a> <span id="r83 rd" class="r83 r">fileSystem</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r84 rd" class="r84 r">leaseId</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r85 rd" class="r85 r">garbageLeaseId</span>)
        {
            <span class="i n">Models</span>.<a href="/Azure.Storage.Files.DataLake/A.html#d5a97c22413f7d3d" class="t t">DataLakeLease</a> <span id="r86 rd" class="r86 r">lease</span> = <b>null</b>;
            <b>if</b> (<span class="r84 r">leaseId</span> == <a href="#fa23f9e7b7beaf03" class="i field">ReceivedLeaseId</a> || <span class="r84 r">leaseId</span> == <span class="r85 r">garbageLeaseId</span>)
            {
                <span class="r86 r">lease</span> = <b>await</b> <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r83 r">fileSystem</span>.<a href="/Azure.Storage.Files.DataLake/A.html#17f19541072156fe" class="i method">GetDataLakeLeaseClient</a>(<a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>())).<a href="/Azure.Storage.Files.DataLake/A.html#da0a2a7797e89ada" class="i method">AcquireAsync</a>(<a href="/Azure.Storage.Files.DataLake/A.html#7eee50b965816e85" class="t t">DataLakeLeaseClient</a>.<a href="/Azure.Storage.Files.DataLake/A.html#b9f0009b0cef69b2" class="i field">InfiniteLeaseDuration</a>);
            }
            <b>return</b> <span class="r84 r">leaseId</span> == <a href="#fa23f9e7b7beaf03" class="i field">ReceivedLeaseId</a> ? <span class="r86 r">lease</span>.<a href="/Azure.Storage.Files.DataLake/A.html#7d3a88a0720abeaa" class="i property">LeaseId</a> : <span class="r84 r">leaseId</span>;
        }
 
        <b>public</b> <a href="/Azure.Storage.Files.DataLake/A.html#28f707b6b08f94c1" class="t t">DataLakeSignedIdentifier</a>[] <a id="6c538d623f1abc83" href="R/6c538d623f1abc83.html" target="n" data-glyph="72,1" class="i method">BuildSignedIdentifiers</a>() =&gt;
            <b>new</b>[]
            {
                <b>new</b> <a href="/Azure.Storage.Files.DataLake/A.html#f17af340cc94e329" class="t constructor">DataLakeSignedIdentifier</a>
                {
                    <a href="/Azure.Storage.Files.DataLake/A.html#074a6897b14c7e7a" class="i property">Id</a> = <a href="Shared/StorageTestBase.cs.html#afa2e83b31a1aec6" class="i method">GetNewString</a>(),
                    <a href="/Azure.Storage.Files.DataLake/A.html#d5f45d65d7d2153d" class="i property">AccessPolicy</a> =
                        <b>new</b> <a href="/Azure.Storage.Files.DataLake/A.html#77ed64e33e3cc6d1" class="t constructor">DataLakeAccessPolicy</a>
                        {
                            <a href="/Azure.Storage.Files.DataLake/A.html#19c7f6b1955859b3" class="i property">PolicyStartsOn</a> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(-1),
                            <a href="/Azure.Storage.Files.DataLake/A.html#339c622bf770a746" class="i property">PolicyExpiresOn</a> =  <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(1),
                            <a href="/Azure.Storage.Files.DataLake/A.html#4e3988aa60b0f083" class="i property">Permissions</a> = <span class="s">&quot;rcw&quot;</span>
                        }
                }
            };
 
        <b>public class</b> <a id="dd91f76fdb115331" href="R/dd91f76fdb115331.html" target="n" data-glyph="0,1" class="t t">DisposingFileSystem</a> : <span class="t t">IAsyncDisposable</span>
        {
            <b>public</b> <a href="/Azure.Storage.Files.DataLake/A.html#ea909608102ce2f0" class="t t">DataLakeFileSystemClient</a> <a id="8ae5d5bab2560c03" href="R/8ae5d5bab2560c03.html" target="n" data-glyph="42,2" class="i field">FileSystem</a>;
 
            <b>public</b> <a id="14dd9664cbf844bf" href="R/14dd9664cbf844bf.html" target="n" data-glyph="72,2" class="t constructor">DisposingFileSystem</a>(<a href="/Azure.Storage.Files.DataLake/A.html#ea909608102ce2f0" class="t t">DataLakeFileSystemClient</a> <span id="r87 rd" class="r87 r">fileSystem</span>)
            {
                <a href="#8ae5d5bab2560c03" class="i field">FileSystem</a> = <span class="r87 r">fileSystem</span>;
            }
 
            <b>public async</b> <span class="t t">ValueTask</span> <a id="73fc002bab4a4111" href="R/73fc002bab4a4111.html" target="n" data-glyph="72,2" class="i method">DisposeAsync</a>()
            {
                <b>if</b> (<a href="#8ae5d5bab2560c03" class="i field">FileSystem</a> != <b>null</b>)
                {
                    <b>try</b>
                    {
                        <b>await</b> <a href="#8ae5d5bab2560c03" class="i field">FileSystem</a>.<a href="/Azure.Storage.Files.DataLake/A.html#807b4e0f715f64a5" class="i method">DeleteIfExistsAsync</a>();
                        <a href="#8ae5d5bab2560c03" class="i field">FileSystem</a> = <b>null</b>;
                    }
                    <b>catch</b>
                    {
                        <span class="c">// swallow the exception to avoid hiding another test failure</span>
                    }
                }
            }
        }
 
        <b>public string</b>[] <a id="2bf1db15b7f96c1c" href="R/2bf1db15b7f96c1c.html" target="n" data-glyph="102,1" class="i property">PathNames</a>
        =&gt; <b>new</b>[]
            {
                <span class="s">&quot;foo&quot;</span>,
                <span class="s">&quot;bar&quot;</span>,
                <span class="s">&quot;baz&quot;</span>,
                <span class="s">&quot;baz/bar&quot;</span>,
                <span class="s">&quot;foo/foo&quot;</span>,
                <span class="s">&quot;foo/bar&quot;</span>,
                <span class="s">&quot;baz/foo&quot;</span>,
                <span class="s">&quot;baz/foo/bar&quot;</span>,
                <span class="s">&quot;baz/bar/foo&quot;</span>
            };
        }
}
</pre></td></tr></table></div></body></html>

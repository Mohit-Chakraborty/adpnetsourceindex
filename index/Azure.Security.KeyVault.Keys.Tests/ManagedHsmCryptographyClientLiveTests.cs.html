<!DOCTYPE html>
<html><head><title>ManagedHsmCryptographyClientLiveTests.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(242);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Azure.Security.KeyVault.Keys.Tests/ManagedHsmCryptographyClientLiveTests.cs" target="_top">ManagedHsmCryptographyClientLiveTests.cs</a><br/></td><td><a class="blueLink" href="https://github.com/Azure/azure-sdk-for-net/tree/main/sdk/keyvault/Azure.Security.KeyVault.Keys/tests/ManagedHsmCryptographyClientLiveTests.cs" target="_blank">View on GitHub</a></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Azure.Security.KeyVault.Keys.Tests" target="_top">Azure.Security.KeyVault.Keys.Tests.csproj</a> (Azure.Security.KeyVault.Keys.Tests)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License.</span>
 
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>.<span class="i n">Tasks</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Core</span>.<span class="i n">TestFramework</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Security</span>.<span class="i n">KeyVault</span>.<span class="i n">Keys</span>.<span class="i n">Cryptography</span>;
<b>using</b> <span class="i n">NUnit</span>.<span class="i n">Framework</span>;
 
<b>namespace</b> <span class="i n">Azure</span>.<span class="i n">Security</span>.<span class="i n">KeyVault</span>.<span class="i n">Keys</span>.<span class="i n">Tests</span>
{
    [<a href="/Azure.Core.TestFramework/A.html#d30718efac4079d1" class="t constructor">ClientTestFixture</a>(
        <a href="/Azure.Security.KeyVault.Keys/A.html#76a904978eb605a1" class="t t">KeyClientOptions</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#658f9853cdaaa7c8" class="t t">ServiceVersion</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#b4f09a576d5b863e" class="i field">V7_2</a>,
        <a href="/Azure.Security.KeyVault.Keys/A.html#76a904978eb605a1" class="t t">KeyClientOptions</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#658f9853cdaaa7c8" class="t t">ServiceVersion</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#09f6da23e2945fc0" class="i field">V7_3_Preview</a>)]
    <b>public class</b> <a id="8caac37e123c629f" href="R/../../0000000000.html" target="n" data-glyph="0,0" class="t t">ManagedHsmCryptographyClientLiveTests</a> : <a href="CryptographyClientLiveTests.cs.html#8c47e530450c78a5" class="t t">CryptographyClientLiveTests</a>
    {
        <b>private static readonly</b> <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="/Azure.Security.KeyVault.Keys/A.html#bb3f9bfb63445a8f" class="t t">KeyOperation</a>&gt; <a id="c13525d5cb1014b3" href="R/c13525d5cb1014b3.html" target="n" data-glyph="46,1" class="i field">s_aesKeyOps</a> = <b>new</b>[]
        {
            <a href="/Azure.Security.KeyVault.Keys/A.html#bb3f9bfb63445a8f" class="t t">KeyOperation</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#ba75dc978c4a7852" class="i property">Encrypt</a>,
            <a href="/Azure.Security.KeyVault.Keys/A.html#bb3f9bfb63445a8f" class="t t">KeyOperation</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#d7ec5e16d892d17b" class="i property">Decrypt</a>,
            <a href="/Azure.Security.KeyVault.Keys/A.html#bb3f9bfb63445a8f" class="t t">KeyOperation</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#e23559279de4f5b6" class="i property">WrapKey</a>,
            <a href="/Azure.Security.KeyVault.Keys/A.html#bb3f9bfb63445a8f" class="t t">KeyOperation</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#b1fa0b5c661cacba" class="i property">UnwrapKey</a>,
        };
 
        <b>public</b> <a id="ced676d225d7ef25" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="t constructor">ManagedHsmCryptographyClientLiveTests</a>(<b>bool</b> <span id="r0 rd" class="r0 r">isAsync</span>, <a href="/Azure.Security.KeyVault.Keys/A.html#76a904978eb605a1" class="t t">KeyClientOptions</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#658f9853cdaaa7c8" class="t t">ServiceVersion</a> <span id="r1 rd" class="r1 r">serviceVersion</span>)
            : <a href="CryptographyClientLiveTests.cs.html#f6b3d4c3436dc0f0" class="k">base</a>(<span class="r0 r">isAsync</span>, <span class="r1 r">serviceVersion</span>, <b>null</b> <span class="c">/* RecordedTestMode.Record /* to re-record */</span>)
        {
        }
 
        <b>protected internal override bool</b> <a id="42e5099ca4890d54" href="R/42e5099ca4890d54.html" target="n" data-glyph="105,1" class="i property">IsManagedHSM</a> =&gt; <b>true</b>;
 
        <b>public override</b> <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <a id="dbd7a2506d766829" href="R/dbd7a2506d766829.html" target="n" data-glyph="102,1" class="i property">Uri</a> =&gt;
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a>.<a href="@0@System/A.html#49754736d6982eb6" class="i method">TryCreate</a>(<a href="/Azure.Core.TestFramework/A.html#9185092834304053" class="i property">TestEnvironment</a>.<a href="KeyVaultTestEnvironment.cs.html#2bec6159a007321c" class="i property">ManagedHsmUrl</a>, <a href="@0@System/A.html#ac43655101ad74be" class="t t">UriKind</a>.<a href="@0@System/A.html#d734108197254429" class="i field">Absolute</a>, <b>out</b> <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r2 rd" class="r2 r">uri</span>)
                ? <span class="r2 r">uri</span>
                <span class="c">// If the AZURE_MANAGEDHSM_URL variable is not defined, we didn&#39;t provision one</span>
                <span class="c">// due to limitations: https://github.com/Azure/azure-sdk-for-net/issues/16531</span>
                <span class="c">// To provision Managed HSM: New-TestResources.ps1 -AdditionalParameters @{enableHsm=$true}</span>
                : <b>throw</b> <b>new</b> <span class="t constructor">IgnoreException</span>(<span class="s">$&quot;</span><span class="s">Required variable &#39;AZURE_MANAGEDHSM_URL&#39; is not defined</span><span class="s">&quot;</span>);
 
        [<span class="t constructor">Test</span>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="1ac13a3548ec6c47" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">EncryptLocalDecryptOnManagedHsm</a>([<a href="/Azure.Core.TestFramework/A.html#2c4eff4d02c3625b" class="t constructor">EnumValues</a>(
            <b>nameof</b>(<a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#ad84f7fb7f528a6d" class="i property">A128Cbc</a>),
            <b>nameof</b>(<a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#7b97b49f7e13ba12" class="i property">A192Cbc</a>),
            <b>nameof</b>(<a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#f1d09d1b8f991eee" class="i property">A256Cbc</a>),
            <b>nameof</b>(<a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#3fad8e40e7c0725a" class="i property">A128CbcPad</a>),
            <b>nameof</b>(<a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#2852a14a476da37b" class="i property">A192CbcPad</a>),
            <b>nameof</b>(<a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#906a3df72104f05b" class="i property">A256CbcPad</a>))] <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a> <span id="r3 rd" class="r3 r">algorithm</span>)
        {
            <b>int</b> <span id="r4 rd" class="r4 r">keySizeInBytes</span> = <span class="r3 r">algorithm</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#8689b90fd63ed4d3" class="i method">GetAesCbcEncryptionAlgorithm</a>().<a href="/Azure.Security.KeyVault.Keys/A.html#bbf68939c7bd0645" class="i property">KeySizeInBytes</a>;
            <a href="/Azure.Security.KeyVault.Keys/A.html#8ceafa21ccf18468" class="t t">JsonWebKey</a> <span id="r5 rd" class="r5 r">jwk</span> = <a href="KeyUtilities.cs.html#cb37042329c13945" class="t t">KeyUtilities</a>.<a href="KeyUtilities.cs.html#d3c4c4d22e1e8156" class="i method">CreateAesKey</a>(<span class="r4 r">keySizeInBytes</span>, <a href="#c13525d5cb1014b3" class="i field">s_aesKeyOps</a>);
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r6 rd" class="r6 r">keyName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#14299882c0b67341" class="i method">GenerateId</a>();
            <a href="/Azure.Security.KeyVault.Keys/A.html#a7c89d0da669bf6c" class="t t">KeyVaultKey</a> <span id="r7 rd" class="r7 r">key</span> = <b>await</b> <a href="KeysTestBase.cs.html#133e617df6a0412f" class="i property">Client</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#d8e0d9d68a0b9752" class="i method">ImportKeyAsync</a>(
                <b>new</b> <a href="/Azure.Security.KeyVault.Keys/A.html#23a2ae2f24f79c87" class="t constructor">ImportKeyOptions</a>(<span class="r6 r">keyName</span>, <span class="r5 r">jwk</span>));
            <a href="KeysTestBase.cs.html#f63efa6d1c9d9e2d" class="i method">RegisterForCleanup</a>(<span class="r7 r">key</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#cc2e71497ac8b8be" class="i property">Name</a>);
 
            <a href="/Azure.Security.KeyVault.Keys/A.html#e593c1fe23197f66" class="t t">CryptographyClient</a> <span id="r8 rd" class="r8 r">remoteClient</span> = <a href="CryptographyClientLiveTests.cs.html#0b1e528f5d2bb2d1" class="i method">GetCryptoClient</a>(<span class="r7 r">key</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#c498a15307d8a378" class="i property">Id</a>, <span class="r9 r">forceRemote</span>: <b>true</b>);
            <a href="/Azure.Security.KeyVault.Keys/A.html#e593c1fe23197f66" class="t t">CryptographyClient</a> <span id="r10 rd" class="r10 r">localClient</span> = <a href="CryptographyClientLiveTests.cs.html#96839f60b6d123d0" class="i method">GetLocalCryptoClient</a>(<span class="r5 r">jwk</span>);
 
            <b>byte</b>[] <span id="r11 rd" class="r11 r">plaintext</span> = <b>new</b> <b>byte</b>[32];
            <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="@0@mscorlib/A.html#04910e5e5c6c9a8b" class="i method">NextBytes</a>(<span class="r11 r">plaintext</span>);
 
            <b>byte</b>[] <span id="r12 rd" class="r12 r">iv</span> = <b>new</b> <b>byte</b>[16];
            <b>if</b> (<span class="r3 r">algorithm</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#8689b90fd63ed4d3" class="i method">GetAesCbcEncryptionAlgorithm</a>() <b>is</b> <a href="/Azure.Security.KeyVault.Keys/A.html#450f10b3d56b48cb" class="t t">AesCbc</a>)
            {
                <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="@0@mscorlib/A.html#04910e5e5c6c9a8b" class="i method">NextBytes</a>(<span class="r12 r">iv</span>);
            }
 
            <a href="/Azure.Security.KeyVault.Keys/A.html#e2e13fc43fcd026d" class="t t">EncryptParameters</a> <span id="r13 rd" class="r13 r">encryptParams</span> = <span class="r3 r">algorithm</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#06392bc7d4a631d7" class="i method">ToString</a>() <b>switch</b>
            {
                <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#d3ccc35bccb9a16b" class="i field">A128CbcValue</a> =&gt; <a href="/Azure.Security.KeyVault.Keys/A.html#e2e13fc43fcd026d" class="t t">EncryptParameters</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#6d24d9fdd952df9e" class="i method">A128CbcParameters</a>(<span class="r11 r">plaintext</span>, <span class="r12 r">iv</span>),
                <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#3d3a730a6897ea26" class="i field">A192CbcValue</a> =&gt; <a href="/Azure.Security.KeyVault.Keys/A.html#e2e13fc43fcd026d" class="t t">EncryptParameters</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#e3e965a9edafb1d3" class="i method">A192CbcParameters</a>(<span class="r11 r">plaintext</span>, <span class="r12 r">iv</span>),
                <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#5982be293c155cd8" class="i field">A256CbcValue</a> =&gt; <a href="/Azure.Security.KeyVault.Keys/A.html#e2e13fc43fcd026d" class="t t">EncryptParameters</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#8b4694b5159d4d26" class="i method">A256CbcParameters</a>(<span class="r11 r">plaintext</span>, <span class="r12 r">iv</span>),
 
                <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#b6c38d9e90914a5d" class="i field">A128CbcPadValue</a> =&gt; <a href="/Azure.Security.KeyVault.Keys/A.html#e2e13fc43fcd026d" class="t t">EncryptParameters</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#048db4ecc5c46953" class="i method">A128CbcPadParameters</a>(<span class="r11 r">plaintext</span>, <span class="r12 r">iv</span>),
                <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#c52c4998b108deee" class="i field">A192CbcPadValue</a> =&gt; <a href="/Azure.Security.KeyVault.Keys/A.html#e2e13fc43fcd026d" class="t t">EncryptParameters</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#c9281a4fc5bf6ddf" class="i method">A192CbcPadParameters</a>(<span class="r11 r">plaintext</span>, <span class="r12 r">iv</span>),
                <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#5493109ee5773f79" class="i field">A256CbcPadValue</a> =&gt; <a href="/Azure.Security.KeyVault.Keys/A.html#e2e13fc43fcd026d" class="t t">EncryptParameters</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#0cb38ba399c5ec79" class="i method">A256CbcPadParameters</a>(<span class="r11 r">plaintext</span>, <span class="r12 r">iv</span>),
 
                <b>_</b> =&gt; <b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#3d3c2c03118be4f8" class="t constructor">NotSupportedException</a>(<span class="s">$&quot;</span>{<span class="r3 r">algorithm</span>}<span class="s"> is not supported</span><span class="s">&quot;</span>),
            };
 
            <a href="/Azure.Security.KeyVault.Keys/A.html#d0307270ddf2558d" class="t t">EncryptResult</a> <span id="r14 rd" class="r14 r">encrypted</span> = <b>await</b> <span class="r10 r">localClient</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#e624f33c41c48bbe" class="i method">EncryptAsync</a>(<span class="r13 r">encryptParams</span>);
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r14 r">encrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#ac9d8387d6f6a4ff" class="i property">Ciphertext</a>);
 
            <a href="/Azure.Security.KeyVault.Keys/A.html#18932364da79e64c" class="t t">DecryptParameters</a> <span id="r15 rd" class="r15 r">decryptParameters</span> = <span class="r3 r">algorithm</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#06392bc7d4a631d7" class="i method">ToString</a>() <b>switch</b>
            {
                <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#d3ccc35bccb9a16b" class="i field">A128CbcValue</a> =&gt; <a href="/Azure.Security.KeyVault.Keys/A.html#18932364da79e64c" class="t t">DecryptParameters</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#6d1f83fac96cd37a" class="i method">A128CbcParameters</a>(<span class="r14 r">encrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#ac9d8387d6f6a4ff" class="i property">Ciphertext</a>, <span class="r14 r">encrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#f68e3145925ce984" class="i property">Iv</a>),
                <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#3d3a730a6897ea26" class="i field">A192CbcValue</a> =&gt; <a href="/Azure.Security.KeyVault.Keys/A.html#18932364da79e64c" class="t t">DecryptParameters</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#d820d8ca06ee0215" class="i method">A192CbcParameters</a>(<span class="r14 r">encrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#ac9d8387d6f6a4ff" class="i property">Ciphertext</a>, <span class="r14 r">encrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#f68e3145925ce984" class="i property">Iv</a>),
                <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#5982be293c155cd8" class="i field">A256CbcValue</a> =&gt; <a href="/Azure.Security.KeyVault.Keys/A.html#18932364da79e64c" class="t t">DecryptParameters</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#76a14dc19f972a75" class="i method">A256CbcParameters</a>(<span class="r14 r">encrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#ac9d8387d6f6a4ff" class="i property">Ciphertext</a>, <span class="r14 r">encrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#f68e3145925ce984" class="i property">Iv</a>),
 
                <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#b6c38d9e90914a5d" class="i field">A128CbcPadValue</a> =&gt; <a href="/Azure.Security.KeyVault.Keys/A.html#18932364da79e64c" class="t t">DecryptParameters</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#acc8e221e5648f81" class="i method">A128CbcPadParameters</a>(<span class="r14 r">encrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#ac9d8387d6f6a4ff" class="i property">Ciphertext</a>, <span class="r14 r">encrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#f68e3145925ce984" class="i property">Iv</a>),
                <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#c52c4998b108deee" class="i field">A192CbcPadValue</a> =&gt; <a href="/Azure.Security.KeyVault.Keys/A.html#18932364da79e64c" class="t t">DecryptParameters</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#ba1eb2e1d0ca3b09" class="i method">A192CbcPadParameters</a>(<span class="r14 r">encrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#ac9d8387d6f6a4ff" class="i property">Ciphertext</a>, <span class="r14 r">encrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#f68e3145925ce984" class="i property">Iv</a>),
                <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#5493109ee5773f79" class="i field">A256CbcPadValue</a> =&gt; <a href="/Azure.Security.KeyVault.Keys/A.html#18932364da79e64c" class="t t">DecryptParameters</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#5fe091e751400e94" class="i method">A256CbcPadParameters</a>(<span class="r14 r">encrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#ac9d8387d6f6a4ff" class="i property">Ciphertext</a>, <span class="r14 r">encrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#f68e3145925ce984" class="i property">Iv</a>),
 
                <b>_</b> =&gt; <b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#3d3c2c03118be4f8" class="t constructor">NotSupportedException</a>(<span class="s">$&quot;</span>{<span class="r3 r">algorithm</span>}<span class="s"> is not supported</span><span class="s">&quot;</span>),
            };
 
            <a href="/Azure.Security.KeyVault.Keys/A.html#1f37e16a1bd35eb4" class="t t">DecryptResult</a> <span id="r16 rd" class="r16 r">decrypted</span> = <b>await</b> <span class="r8 r">remoteClient</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#f456f502456495b5" class="i method">DecryptAsync</a>(<span class="r15 r">decryptParameters</span>);
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r16 r">decrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#b73b34dfdab77090" class="i property">Plaintext</a>);
 
            <span class="t t">CollectionAssert</span>.<span class="i method">AreEqual</span>(<span class="r11 r">plaintext</span>, <span class="r16 r">decrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#b73b34dfdab77090" class="i property">Plaintext</a>);
        }
 
        [<span class="t constructor">Test</span>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="529521f0beb37fe1" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">AesGcmEncryptDecrypt</a>([<a href="/Azure.Core.TestFramework/A.html#2c4eff4d02c3625b" class="t constructor">EnumValues</a>(
            <b>nameof</b>(<a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#1894028f67d75f95" class="i property">A128Gcm</a>),
            <b>nameof</b>(<a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#84ce0b2f57a8ca7c" class="i property">A192Gcm</a>),
            <b>nameof</b>(<a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#c133795361c9e2d6" class="i property">A256Gcm</a>)
            )] <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a> <span id="r17 rd" class="r17 r">algorithm</span>)
        {
            <b>int</b> <span id="r18 rd" class="r18 r">keySizeInBytes</span> = <span class="r17 r">algorithm</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#06392bc7d4a631d7" class="i method">ToString</a>() <b>switch</b>
            {
                <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#9d396f2e632003f2" class="i field">A128GcmValue</a> =&gt; 128 &gt;&gt; 3,
                <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#e2d90889656f667e" class="i field">A192GcmValue</a> =&gt; 192 &gt;&gt; 3,
                <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#99bb22fe8b665661" class="i field">A256GcmValue</a> =&gt; 256 &gt;&gt; 3,
 
                <b>_</b> =&gt; <b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#3d3c2c03118be4f8" class="t constructor">NotSupportedException</a>(<span class="s">$&quot;</span>{<span class="r17 r">algorithm</span>}<span class="s"> is not supported</span><span class="s">&quot;</span>),
            };
 
            <a href="/Azure.Security.KeyVault.Keys/A.html#8ceafa21ccf18468" class="t t">JsonWebKey</a> <span id="r19 rd" class="r19 r">jwk</span> = <a href="KeyUtilities.cs.html#cb37042329c13945" class="t t">KeyUtilities</a>.<a href="KeyUtilities.cs.html#d3c4c4d22e1e8156" class="i method">CreateAesKey</a>(<span class="r18 r">keySizeInBytes</span>, <a href="#c13525d5cb1014b3" class="i field">s_aesKeyOps</a>);
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r20 rd" class="r20 r">keyName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#14299882c0b67341" class="i method">GenerateId</a>();
            <a href="/Azure.Security.KeyVault.Keys/A.html#a7c89d0da669bf6c" class="t t">KeyVaultKey</a> <span id="r21 rd" class="r21 r">key</span> = <b>await</b> <a href="KeysTestBase.cs.html#133e617df6a0412f" class="i property">Client</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#d8e0d9d68a0b9752" class="i method">ImportKeyAsync</a>(
                <b>new</b> <a href="/Azure.Security.KeyVault.Keys/A.html#23a2ae2f24f79c87" class="t constructor">ImportKeyOptions</a>(<span class="r20 r">keyName</span>, <span class="r19 r">jwk</span>));
            <a href="KeysTestBase.cs.html#f63efa6d1c9d9e2d" class="i method">RegisterForCleanup</a>(<span class="r21 r">key</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#cc2e71497ac8b8be" class="i property">Name</a>);
 
            <a href="/Azure.Security.KeyVault.Keys/A.html#e593c1fe23197f66" class="t t">CryptographyClient</a> <span id="r22 rd" class="r22 r">remoteClient</span> = <a href="CryptographyClientLiveTests.cs.html#0b1e528f5d2bb2d1" class="i method">GetCryptoClient</a>(<span class="r21 r">key</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#c498a15307d8a378" class="i property">Id</a>, <span class="r9 r">forceRemote</span>: <b>true</b>);
 
            <b>byte</b>[] <span id="r23 rd" class="r23 r">plaintext</span> = <b>new</b> <b>byte</b>[32];
            <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="@0@mscorlib/A.html#04910e5e5c6c9a8b" class="i method">NextBytes</a>(<span class="r23 r">plaintext</span>);
 
            <b>byte</b>[] <span id="r24 rd" class="r24 r">iv</span> = <b>new</b> <b>byte</b>[16];
            <b>if</b> (<span class="r17 r">algorithm</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#8689b90fd63ed4d3" class="i method">GetAesCbcEncryptionAlgorithm</a>() <b>is</b> <a href="/Azure.Security.KeyVault.Keys/A.html#450f10b3d56b48cb" class="t t">AesCbc</a>)
            {
                <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="@0@mscorlib/A.html#04910e5e5c6c9a8b" class="i method">NextBytes</a>(<span class="r24 r">iv</span>);
            }
 
            <a href="/Azure.Security.KeyVault.Keys/A.html#e2e13fc43fcd026d" class="t t">EncryptParameters</a> <span id="r25 rd" class="r25 r">encryptParams</span> = <span class="r17 r">algorithm</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#06392bc7d4a631d7" class="i method">ToString</a>() <b>switch</b>
            {
                <span class="c">// TODO: Re-record with random additionalAuthenticatedData once the &quot;aad&quot; issue is fixed with Managed HSM.</span>
                <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#9d396f2e632003f2" class="i field">A128GcmValue</a> =&gt; <a href="/Azure.Security.KeyVault.Keys/A.html#e2e13fc43fcd026d" class="t t">EncryptParameters</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#1a4a43292b522c85" class="i method">A128GcmParameters</a>(<span class="r23 r">plaintext</span>),
                <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#e2d90889656f667e" class="i field">A192GcmValue</a> =&gt; <a href="/Azure.Security.KeyVault.Keys/A.html#e2e13fc43fcd026d" class="t t">EncryptParameters</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#6a4c1c7aa09bb381" class="i method">A192GcmParameters</a>(<span class="r23 r">plaintext</span>),
                <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#99bb22fe8b665661" class="i field">A256GcmValue</a> =&gt; <a href="/Azure.Security.KeyVault.Keys/A.html#e2e13fc43fcd026d" class="t t">EncryptParameters</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#080415585412a469" class="i method">A256GcmParameters</a>(<span class="r23 r">plaintext</span>),
 
                <b>_</b> =&gt; <b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#3d3c2c03118be4f8" class="t constructor">NotSupportedException</a>(<span class="s">$&quot;</span>{<span class="r17 r">algorithm</span>}<span class="s"> is not supported</span><span class="s">&quot;</span>),
            };
 
            <a href="/Azure.Security.KeyVault.Keys/A.html#d0307270ddf2558d" class="t t">EncryptResult</a> <span id="r26 rd" class="r26 r">encrypted</span> = <b>await</b> <span class="r22 r">remoteClient</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#e624f33c41c48bbe" class="i method">EncryptAsync</a>(<span class="r25 r">encryptParams</span>);
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r26 r">encrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#ac9d8387d6f6a4ff" class="i property">Ciphertext</a>);
 
            <a href="/Azure.Security.KeyVault.Keys/A.html#18932364da79e64c" class="t t">DecryptParameters</a> <span id="r27 rd" class="r27 r">decryptParameters</span> = <span class="r17 r">algorithm</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#06392bc7d4a631d7" class="i method">ToString</a>() <b>switch</b>
            {
                <span class="c">// TODO: Re-record with random additionalAuthenticatedData once the &quot;aad&quot; issue is fixed with Managed HSM.</span>
                <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#9d396f2e632003f2" class="i field">A128GcmValue</a> =&gt; <a href="/Azure.Security.KeyVault.Keys/A.html#18932364da79e64c" class="t t">DecryptParameters</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#0a2b4419c73d8a47" class="i method">A128GcmParameters</a>(<span class="r26 r">encrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#ac9d8387d6f6a4ff" class="i property">Ciphertext</a>, <span class="r26 r">encrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#f68e3145925ce984" class="i property">Iv</a>, <span class="r26 r">encrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#114eb33352eb2d57" class="i property">AuthenticationTag</a>),
                <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#e2d90889656f667e" class="i field">A192GcmValue</a> =&gt; <a href="/Azure.Security.KeyVault.Keys/A.html#18932364da79e64c" class="t t">DecryptParameters</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#3dc3978cfbb50f80" class="i method">A192GcmParameters</a>(<span class="r26 r">encrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#ac9d8387d6f6a4ff" class="i property">Ciphertext</a>, <span class="r26 r">encrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#f68e3145925ce984" class="i property">Iv</a>, <span class="r26 r">encrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#114eb33352eb2d57" class="i property">AuthenticationTag</a>),
                <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#99bb22fe8b665661" class="i field">A256GcmValue</a> =&gt; <a href="/Azure.Security.KeyVault.Keys/A.html#18932364da79e64c" class="t t">DecryptParameters</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#3639f14ba6615c5d" class="i method">A256GcmParameters</a>(<span class="r26 r">encrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#ac9d8387d6f6a4ff" class="i property">Ciphertext</a>, <span class="r26 r">encrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#f68e3145925ce984" class="i property">Iv</a>, <span class="r26 r">encrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#114eb33352eb2d57" class="i property">AuthenticationTag</a>),
 
                <b>_</b> =&gt; <b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#3d3c2c03118be4f8" class="t constructor">NotSupportedException</a>(<span class="s">$&quot;</span>{<span class="r17 r">algorithm</span>}<span class="s"> is not supported</span><span class="s">&quot;</span>),
            };
 
            <a href="/Azure.Security.KeyVault.Keys/A.html#1f37e16a1bd35eb4" class="t t">DecryptResult</a> <span id="r28 rd" class="r28 r">decrypted</span> = <b>await</b> <span class="r22 r">remoteClient</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#f456f502456495b5" class="i method">DecryptAsync</a>(<span class="r27 r">decryptParameters</span>);
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r28 r">decrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#b73b34dfdab77090" class="i property">Plaintext</a>);
 
            <span class="t t">CollectionAssert</span>.<span class="i method">AreEqual</span>(<span class="r23 r">plaintext</span>, <span class="r28 r">decrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#b73b34dfdab77090" class="i property">Plaintext</a>);
        }
 
        [<span class="t constructor">Test</span>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="5dd4905c619c7e0a" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">AesKwWrapUnwrapRoundTrip</a>([<a href="/Azure.Core.TestFramework/A.html#2c4eff4d02c3625b" class="t constructor">EnumValues</a>(
            <b>nameof</b>(<a href="/Azure.Security.KeyVault.Keys/A.html#b5e736943aa71937" class="t t">KeyWrapAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#8f822e5231c473ac" class="i property">A128KW</a>),
            <b>nameof</b>(<a href="/Azure.Security.KeyVault.Keys/A.html#b5e736943aa71937" class="t t">KeyWrapAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#7ccd4a27034f25c4" class="i property">A192KW</a>),
            <b>nameof</b>(<a href="/Azure.Security.KeyVault.Keys/A.html#b5e736943aa71937" class="t t">KeyWrapAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#3b56f8b5f3a1dbbf" class="i property">A256KW</a>))] <a href="/Azure.Security.KeyVault.Keys/A.html#b5e736943aa71937" class="t t">KeyWrapAlgorithm</a> <span id="r29 rd" class="r29 r">algorithm</span>)
        {
            <a href="/Azure.Security.KeyVault.Keys/A.html#a7c89d0da669bf6c" class="t t">KeyVaultKey</a> <span id="r30 rd" class="r30 r">key</span> = <b>await</b> <a href="CryptographyClientLiveTests.cs.html#06dfe51d85ddab0e" class="i method">CreateTestKey</a>(<span class="r29 r">algorithm</span>);
            <a href="KeysTestBase.cs.html#f63efa6d1c9d9e2d" class="i method">RegisterForCleanup</a>(<span class="r30 r">key</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#cc2e71497ac8b8be" class="i property">Name</a>);
 
            <a href="/Azure.Security.KeyVault.Keys/A.html#e593c1fe23197f66" class="t t">CryptographyClient</a> <span id="r31 rd" class="r31 r">remoteClient</span> = <a href="CryptographyClientLiveTests.cs.html#0b1e528f5d2bb2d1" class="i method">GetCryptoClient</a>(<span class="r30 r">key</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#c498a15307d8a378" class="i property">Id</a>, <span class="r9 r">forceRemote</span>: <b>true</b>);
 
            <b>byte</b>[] <span id="r32 rd" class="r32 r">plaintext</span> = <b>new</b> <b>byte</b>[32];
            <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="@0@mscorlib/A.html#04910e5e5c6c9a8b" class="i method">NextBytes</a>(<span class="r32 r">plaintext</span>);
 
            <a href="/Azure.Security.KeyVault.Keys/A.html#6579cd39f860e106" class="t t">WrapResult</a> <span id="r33 rd" class="r33 r">encrypted</span> = <b>await</b> <span class="r31 r">remoteClient</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#493af2edb40f568b" class="i method">WrapKeyAsync</a>(<span class="r29 r">algorithm</span>, <span class="r32 r">plaintext</span>);
 
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r29 r">algorithm</span>, <span class="r33 r">encrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#e9f80dd30b626b60" class="i property">Algorithm</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r30 r">key</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#c498a15307d8a378" class="i property">Id</a>, <span class="r33 r">encrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#1da0add2bbae8533" class="i property">KeyId</a>);
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r33 r">encrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#afd7dfa4f8d7516a" class="i property">EncryptedKey</a>);
 
            <a href="/Azure.Security.KeyVault.Keys/A.html#71d6e7a4c597fcd3" class="t t">UnwrapResult</a> <span id="r34 rd" class="r34 r">decrypted</span> = <b>await</b> <span class="r31 r">remoteClient</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#4ab2210691a4b6e8" class="i method">UnwrapKeyAsync</a>(<span class="r29 r">algorithm</span>, <span class="r33 r">encrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#afd7dfa4f8d7516a" class="i property">EncryptedKey</a>);
 
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r29 r">algorithm</span>, <span class="r34 r">decrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#f21560e3c3ef7e4b" class="i property">Algorithm</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r30 r">key</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#c498a15307d8a378" class="i property">Id</a>, <span class="r34 r">decrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#0e19325ba62a8e3b" class="i property">KeyId</a>);
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r34 r">decrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#ef836bf367997a22" class="i property">Key</a>);
 
            <span class="t t">CollectionAssert</span>.<span class="i method">AreEqual</span>(<span class="r32 r">plaintext</span>, <span class="r34 r">decrypted</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#ef836bf367997a22" class="i property">Key</a>);
        }
 
        <b>private async</b> <a href="@0@mscorlib/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<a href="/Azure.Security.KeyVault.Keys/A.html#a7c89d0da669bf6c" class="t t">KeyVaultKey</a>&gt; <a id="ee8e881fcc1f49ea" href="R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">CreateTestKey</a>(<a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a> <span id="r35 rd" class="r35 r">algorithm</span>)
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r36 rd" class="r36 r">keyName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#14299882c0b67341" class="i method">GenerateId</a>();
 
            <b>switch</b> (<span class="r35 r">algorithm</span>.<a href="/Azure.Security.KeyVault.Keys/A.html#06392bc7d4a631d7" class="i method">ToString</a>())
            {
                <b>case</b> <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#33f0335615433090" class="i field">Rsa15Value</a>:
                <b>case</b> <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#6289972e59c59003" class="i field">RsaOaepValue</a>:
                <b>case</b> <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#deaa37765dc72d73" class="i field">RsaOaep256Value</a>:
                    <b>return</b> <b>await</b> <a href="KeysTestBase.cs.html#133e617df6a0412f" class="i property">Client</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#da99c84f617dd5de" class="i method">CreateRsaKeyAsync</a>(
                        <b>new</b> <a href="/Azure.Security.KeyVault.Keys/A.html#5662967a66c9c6c0" class="t constructor">CreateRsaKeyOptions</a>(<span class="r36 r">keyName</span>));
 
                <b>case</b> <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#d3ccc35bccb9a16b" class="i field">A128CbcValue</a>:
                <b>case</b> <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#b6c38d9e90914a5d" class="i field">A128CbcPadValue</a>:
                <b>case</b> <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#9d396f2e632003f2" class="i field">A128GcmValue</a>:
                    <b>return</b> <b>await</b> <a href="KeysTestBase.cs.html#133e617df6a0412f" class="i property">Client</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#6d8b303694e07342" class="i method">CreateOctKeyAsync</a>(
                        <b>new</b> <a href="/Azure.Security.KeyVault.Keys/A.html#a808aaf0505590a5" class="t constructor">CreateOctKeyOptions</a>(<span class="r36 r">keyName</span>)
                        {
                            <a href="/Azure.Security.KeyVault.Keys/A.html#3eb4e3e769369885" class="i property">KeySize</a> = 128,
                        });
 
                <b>case</b> <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#3d3a730a6897ea26" class="i field">A192CbcValue</a>:
                <b>case</b> <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#c52c4998b108deee" class="i field">A192CbcPadValue</a>:
                <b>case</b> <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#e2d90889656f667e" class="i field">A192GcmValue</a>:
                    <b>return</b> <b>await</b> <a href="KeysTestBase.cs.html#133e617df6a0412f" class="i property">Client</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#6d8b303694e07342" class="i method">CreateOctKeyAsync</a>(
                        <b>new</b> <a href="/Azure.Security.KeyVault.Keys/A.html#a808aaf0505590a5" class="t constructor">CreateOctKeyOptions</a>(<span class="r36 r">keyName</span>)
                        {
                            <a href="/Azure.Security.KeyVault.Keys/A.html#3eb4e3e769369885" class="i property">KeySize</a> = 192,
                        });
 
                <b>case</b> <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#5982be293c155cd8" class="i field">A256CbcValue</a>:
                <b>case</b> <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#5493109ee5773f79" class="i field">A256CbcPadValue</a>:
                <b>case</b> <a href="/Azure.Security.KeyVault.Keys/A.html#eae012ce7ea35301" class="t t">EncryptionAlgorithm</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#99bb22fe8b665661" class="i field">A256GcmValue</a>:
                    <b>return</b> <b>await</b> <a href="KeysTestBase.cs.html#133e617df6a0412f" class="i property">Client</a>.<a href="/Azure.Security.KeyVault.Keys/A.html#6d8b303694e07342" class="i method">CreateOctKeyAsync</a>(
                        <b>new</b> <a href="/Azure.Security.KeyVault.Keys/A.html#a808aaf0505590a5" class="t constructor">CreateOctKeyOptions</a>(<span class="r36 r">keyName</span>)
                        {
                            <a href="/Azure.Security.KeyVault.Keys/A.html#3eb4e3e769369885" class="i property">KeySize</a> = 256,
                        });
 
                <b>default</b>:
                    <b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#4b20cd3790b6426a" class="t constructor">ArgumentException</a>(<span class="s">&quot;Invalid Algorithm&quot;</span>, <b>nameof</b>(<span class="r35 r">algorithm</span>));
            }
        }
    }
}
</pre></td></tr></table></div></body></html>

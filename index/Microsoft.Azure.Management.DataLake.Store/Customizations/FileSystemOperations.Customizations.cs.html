<!DOCTYPE html>
<html><head><title>FileSystemOperations.Customizations.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(755);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Microsoft.Azure.Management.DataLake.Store/Customizations/FileSystemOperations.Customizations.cs" target="_top">Customizations\FileSystemOperations.Customizations.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Microsoft.Azure.Management.DataLake.Store" target="_top">Microsoft.Azure.Management.DataLake.Store.csproj</a> (Microsoft.Azure.Management.DataLake.Store)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License. See License.txt in the project root for</span>
<span class="c">// license information.</span>
 
<b>namespace</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i n">DataLake</span>.<span class="i n">Store</span>
{
    <b>using</b> <span class="i n">System</span>;
    <b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
    <b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
    <b>using</b> <span class="i n">System</span>.<span class="i n">Net</span>;
    <b>using</b> <span class="i n">System</span>.<span class="i n">Net</span>.<span class="i">Http</span>;
    <b>using</b> <span class="i n">System</span>.<span class="i n">Net</span>.<span class="i">Http</span>.<span class="i">Headers</span>;
    <b>using</b> <span class="i n">System</span>.<span class="i n">Text</span>;
    <b>using</b> <span class="i n">System</span>.<span class="i n">Text</span>.<span class="i n">RegularExpressions</span>;
    <b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>;
    <b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>.<span class="i n">Tasks</span>;
    <b>using</b> <span class="i n">Microsoft</span>.<span class="i">Rest</span>;
    <b>using</b> <span class="i n">Microsoft</span>.<span class="i">Rest</span>.<span class="i">Serialization</span>;
    <b>using</b> <span class="i">Newtonsoft</span>.<span class="i">Json</span>;
    <b>using</b> <span class="i n">Microsoft</span>.<span class="i">Rest</span>.<span class="i">Azure</span>;
    <b>using</b> <span class="i n">Models</span>;
    <b>using</b> <span class="i n">System</span>.<span class="i n">IO</span>;
 
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
    <span class="c">///</span><span class="c"> FileSystemOperations operations.</span>
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
    <b>internal</b> <b>partial</b> <b>class</b> <a id="37f12618dcfa6698" href="../R/../../0000000000.html" target="n" data-glyph="2,0" class="t t"><span id="f202a29fb82c122b">FileSystemOperations</span></a> : <span class="i">IServiceOperations</span>&lt;<a href="DataLakeStoreFileSystemManagementClient.Customizations.cs.html#adb83a44424a752e" class="t t">DataLakeStoreFileSystemManagementClient</a>&gt;, <a href="IFileSystemOperations.Customizations.cs.html#c5fa2ec1e21f1313" class="t t">IFileSystemOperations</a>
    {
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Test the existence of a file or directory object specified by the file path.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r0 r">accountName</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The Azure Data Lake Store account to execute filesystem operations on.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r1 r">getFilePath</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The Data Lake Store path (starting with &#39;/&#39;) of the file or directory for</span>
        <span class="c">///</span><span class="c"> which to test.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r2 r">customHeaders</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Headers that will be added to request.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r3 r">cancellationToken</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The cancellation token.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i">AdlsErrorException</span><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown when the operation returned an invalid status code</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i">SerializationException</span><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown when unable to deserialize the response</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i">ValidationException</span><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown when a required parameter is null</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">return</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> A response object containing the response body and response headers.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">return</span><span class="c">&gt;</span>
        <b>public async</b> <a href="@0@mscorlib/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<span class="i">AzureOperationResponse</span>&lt;<b>bool</b>&gt;&gt; <a id="48d7de19c8de3b08" href="../R/48d7de19c8de3b08.html" target="n" data-glyph="72,1" class="i method">PathExistsWithHttpMessagesAsync</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r0 rd" class="r0 r">accountName</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1 rd" class="r1 r">getFilePath</span>, <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#cf7f4095e4de7646" class="t t">List</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;&gt; <span id="r2 rd" class="r2 r">customHeaders</span> = <b>null</b>, <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r3 rd" class="r3 r">cancellationToken</span> = <b>default</b>(<a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a>))
        {
            <b>if</b> (<span class="r0 r">accountName</span> == <b>null</b>)
            {
                <b>throw</b> <b>new</b> <span class="i">ValidationException</span>(<span class="i">ValidationRules</span>.<span class="i">CannotBeNull</span>, <span class="s">&quot;accountName&quot;</span>);
            }
            <b>if</b> (<a href="#37f12618dcfa6698" class="k">this</a>.<span class="i">Client</span>.<span class="i">AdlsFileSystemDnsSuffix</span> == <b>null</b>)
            {
                <b>throw</b> <b>new</b> <span class="i">ValidationException</span>(<span class="i">ValidationRules</span>.<span class="i">CannotBeNull</span>, <span class="s">&quot;this.Client.AdlsFileSystemDnsSuffix&quot;</span>);
            }
            <b>if</b> (<span class="r1 r">getFilePath</span> == <b>null</b>)
            {
                <b>throw</b> <b>new</b> <span class="i">ValidationException</span>(<span class="i">ValidationRules</span>.<span class="i">CannotBeNull</span>, <span class="s">&quot;getFilePath&quot;</span>);
            }
            <b>if</b> (<a href="#37f12618dcfa6698" class="k">this</a>.<span class="i">Client</span>.<span class="i">ApiVersion</span> == <b>null</b>)
            {
                <b>throw</b> <b>new</b> <span class="i">ValidationException</span>(<span class="i">ValidationRules</span>.<span class="i">CannotBeNull</span>, <span class="s">&quot;this.Client.ApiVersion&quot;</span>);
            }
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r4 rd" class="r4 r">op</span> = <span class="s">&quot;GETFILESTATUS&quot;</span>;
            <span class="c">// Tracing</span>
            <b>bool</b> <span id="r5 rd" class="r5 r">_shouldTrace</span> = <span class="i">ServiceClientTracing</span>.<span class="i">IsEnabled</span>;
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r6 rd" class="r6 r">_invocationId</span> = <b>null</b>;
            <b>if</b> (<span class="r5 r">_shouldTrace</span>)
            {
                <span class="r6 r">_invocationId</span> = <span class="i">ServiceClientTracing</span>.<span class="i">NextInvocationId</span>.<span class="i">ToString</span>();
                <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <b>object</b>&gt; <span id="r7 rd" class="r7 r">tracingParameters</span> = <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <b>object</b>&gt;();
                <span class="r7 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;accountName&quot;</span>, <span class="r0 r">accountName</span>);
                <span class="r7 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;getFilePath&quot;</span>, <span class="r1 r">getFilePath</span>);
                <span class="r7 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;op&quot;</span>, <span class="r4 r">op</span>);
                <span class="r7 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;cancellationToken&quot;</span>, <span class="r3 r">cancellationToken</span>);
                <span class="i">ServiceClientTracing</span>.<span class="i">Enter</span>(<span class="r6 r">_invocationId</span>, <a href="#37f12618dcfa6698" class="k">this</a>, <span class="s">&quot;GetFileStatus&quot;</span>, <span class="r7 r">tracingParameters</span>);
            }
            <span class="c">// Construct URL</span>
            <b>var</b> <span id="r8 rd" class="r8 r">_baseUrl</span> = <a href="#37f12618dcfa6698" class="k">this</a>.<span class="i">Client</span>.<span class="i">BaseUri</span>;
            <b>var</b> <span id="r9 rd" class="r9 r">_url</span> = <span class="r8 r">_baseUrl</span> + (<span class="r8 r">_baseUrl</span>.<span class="i">EndsWith</span>(<span class="s">&quot;/&quot;</span>) ? <span class="s">&quot;&quot;</span> : <span class="s">&quot;/&quot;</span>) + <span class="s">&quot;webhdfs/v1/{getFilePath}&quot;</span>;
            <span class="r9 r">_url</span> = <span class="r9 r">_url</span>.<span class="i">Replace</span>(<span class="s">&quot;{accountName}&quot;</span>, <span class="r0 r">accountName</span>);
            <span class="r9 r">_url</span> = <span class="r9 r">_url</span>.<span class="i">Replace</span>(<span class="s">&quot;{adlsFileSystemDnsSuffix}&quot;</span>, <a href="#37f12618dcfa6698" class="k">this</a>.<span class="i">Client</span>.<span class="i">AdlsFileSystemDnsSuffix</span>);
            <span class="r9 r">_url</span> = <span class="r9 r">_url</span>.<span class="i">Replace</span>(<span class="s">&quot;{getFilePath}&quot;</span>, <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a>.<a href="@0@System/A.html#39926dc8cc434ff4" class="i method">EscapeDataString</a>(<span class="r1 r">getFilePath</span>));
            <a href="@0@mscorlib/A.html#cf7f4095e4de7646" class="t t">List</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r10 rd" class="r10 r">_queryParameters</span> = <b>new</b> <a href="@0@mscorlib/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;();
            <b>if</b> (<span class="r4 r">op</span> != <b>null</b>)
            {
                <span class="r10 r">_queryParameters</span>.<a href="@0@mscorlib/A.html#9cc11588bffd57c1" class="i method">Add</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#9d5604d4425b216f" class="i method">Format</a>(<span class="s">&quot;op={0}&quot;</span>, <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a>.<a href="@0@System/A.html#39926dc8cc434ff4" class="i method">EscapeDataString</a>(<span class="r4 r">op</span>)));
            }
            <b>if</b> (<a href="#37f12618dcfa6698" class="k">this</a>.<span class="i">Client</span>.<span class="i">ApiVersion</span> != <b>null</b>)
            {
                <span class="r10 r">_queryParameters</span>.<a href="@0@mscorlib/A.html#9cc11588bffd57c1" class="i method">Add</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#9d5604d4425b216f" class="i method">Format</a>(<span class="s">&quot;api-version={0}&quot;</span>, <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a>.<span class="i">EscapeDataString</span>(<a href="#37f12618dcfa6698" class="k">this</a>.<span class="i">Client</span>.<span class="i">ApiVersion</span>)));
            }
            <b>if</b> (<span class="r10 r">_queryParameters</span>.<a href="@0@mscorlib/A.html#78a69d857716bc68" class="i property">Count</a> &gt; 0)
            {
                <span class="r9 r">_url</span> += <span class="s">&quot;?&quot;</span> + <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#fa961ce440526a4d" class="i method">Join</a>(<span class="s">&quot;&amp;&quot;</span>, <span class="r10 r">_queryParameters</span>);
            }
            <span class="c">// Create HTTP transport objects</span>
            <span class="i">HttpRequestMessage</span> <span id="r11 rd" class="r11 r">_httpRequest</span> = <b>new</b> <span class="i">HttpRequestMessage</span>();
            <span class="i">HttpResponseMessage</span> <span id="r12 rd" class="r12 r">_httpResponse</span> = <b>null</b>;
            <span class="r11 r">_httpRequest</span>.<span class="i">Method</span> = <b>new</b> <span class="i">HttpMethod</span>(<span class="s">&quot;GET&quot;</span>);
            <span class="r11 r">_httpRequest</span>.<span class="i">RequestUri</span> = <b>new</b> <span class="t">Uri</span>(<span class="r9 r">_url</span>);
            <span class="c">// Set Headers</span>
            <b>if</b> (<a href="#37f12618dcfa6698" class="k">this</a>.<span class="i">Client</span>.<span class="i">GenerateClientRequestId</span> != <b>null</b> &amp;&amp; <a href="#37f12618dcfa6698" class="k">this</a>.<span class="i">Client</span>.<span class="i">GenerateClientRequestId</span>.<span class="i">Value</span>)
            {
                <span class="r11 r">_httpRequest</span>.<span class="i">Headers</span>.<span class="i">TryAddWithoutValidation</span>(<span class="s">&quot;x-ms-client-request-id&quot;</span>, <a href="@0@mscorlib/A.html#b622ef5f6b76c10a" class="t t">Guid</a>.<a href="@0@mscorlib/A.html#b7fae6994c22c22e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>());
            }
            <b>if</b> (<a href="#37f12618dcfa6698" class="k">this</a>.<span class="i">Client</span>.<span class="i">AcceptLanguage</span> != <b>null</b>)
            {
                <b>if</b> (<span class="r11 r">_httpRequest</span>.<span class="i">Headers</span>.<span class="i">Contains</span>(<span class="s">&quot;accept-language&quot;</span>))
                {
                    <span class="r11 r">_httpRequest</span>.<span class="i">Headers</span>.<span class="i">Remove</span>(<span class="s">&quot;accept-language&quot;</span>);
                }
                <span class="r11 r">_httpRequest</span>.<span class="i">Headers</span>.<span class="i">TryAddWithoutValidation</span>(<span class="s">&quot;accept-language&quot;</span>, <a href="#37f12618dcfa6698" class="k">this</a>.<span class="i">Client</span>.<span class="i">AcceptLanguage</span>);
            }
            <b>if</b> (<span class="r2 r">customHeaders</span> != <b>null</b>)
            {
                <b>foreach</b> (<a href="@0@mscorlib/A.html#8585965bb176a426" class="k">var</a> <span id="r13 rd" class="r13 r">_header</span> <b>in</b> <span class="r2 r">customHeaders</span>)
                {
                    <b>if</b> (<span class="r11 r">_httpRequest</span>.<span class="i">Headers</span>.<span class="i">Contains</span>(<span class="r13 r">_header</span>.<a href="@0@mscorlib/A.html#f9d1c04feb1af032" class="i property">Key</a>))
                    {
                        <span class="r11 r">_httpRequest</span>.<span class="i">Headers</span>.<span class="i">Remove</span>(<span class="r13 r">_header</span>.<a href="@0@mscorlib/A.html#f9d1c04feb1af032" class="i property">Key</a>);
                    }
                    <span class="r11 r">_httpRequest</span>.<span class="i">Headers</span>.<span class="i">TryAddWithoutValidation</span>(<span class="r13 r">_header</span>.<a href="@0@mscorlib/A.html#f9d1c04feb1af032" class="i property">Key</a>, <span class="r13 r">_header</span>.<a href="@0@mscorlib/A.html#38c0e86cc4b30170" class="i property">Value</a>);
                }
            }
 
            <span class="c">// Serialize Request</span>
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r14 rd" class="r14 r">_requestContent</span> = <b>null</b>;
            <span class="c">// Set Credentials</span>
            <b>if</b> (<a href="#37f12618dcfa6698" class="k">this</a>.<span class="i">Client</span>.<span class="i">Credentials</span> != <b>null</b>)
            {
                <span class="r3 r">cancellationToken</span>.<a href="@0@mscorlib/A.html#d2864d73804288fc" class="i method">ThrowIfCancellationRequested</a>();
                <b>await</b> <a href="#37f12618dcfa6698" class="k">this</a>.<span class="i">Client</span>.<span class="i">Credentials</span>.<span class="i">ProcessHttpRequestAsync</span>(<span class="r11 r">_httpRequest</span>, <span class="r3 r">cancellationToken</span>).<span class="i">ConfigureAwait</span>(<b>false</b>);
            }
            <span class="c">// Send Request</span>
            <b>if</b> (<span class="r5 r">_shouldTrace</span>)
            {
                <span class="i">ServiceClientTracing</span>.<span class="i">SendRequest</span>(<span class="r6 r">_invocationId</span>, <span class="r11 r">_httpRequest</span>);
            }
            <span class="r3 r">cancellationToken</span>.<a href="@0@mscorlib/A.html#d2864d73804288fc" class="i method">ThrowIfCancellationRequested</a>();
            <span class="r12 r">_httpResponse</span> = <b>await</b> <a href="#37f12618dcfa6698" class="k">this</a>.<span class="i">Client</span>.<span class="i">HttpClient</span>.<span class="i">SendAsync</span>(<span class="r11 r">_httpRequest</span>, <span class="r3 r">cancellationToken</span>).<span class="i">ConfigureAwait</span>(<b>false</b>);
            <b>if</b> (<span class="r5 r">_shouldTrace</span>)
            {
                <span class="i">ServiceClientTracing</span>.<span class="i">ReceiveResponse</span>(<span class="r6 r">_invocationId</span>, <span class="r12 r">_httpResponse</span>);
            }
            <a href="@0@System/A.html#9b95c882b40ef96e" class="t t">HttpStatusCode</a> <span id="r15 rd" class="r15 r">_statusCode</span> = <span class="r12 r">_httpResponse</span>.<span class="i">StatusCode</span>;
            <span class="r3 r">cancellationToken</span>.<a href="@0@mscorlib/A.html#d2864d73804288fc" class="i method">ThrowIfCancellationRequested</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r16 rd" class="r16 r">_responseContent</span> = <b>null</b>;
            <b>if</b> ((<b>int</b>)<span class="r15 r">_statusCode</span> != 200)
            {
                <b>var</b> <span id="r17 rd" class="r17 r">ex</span> = <b>new</b> <span class="i">AdlsErrorException</span>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#9d5604d4425b216f" class="i method">Format</a>(<span class="s">&quot;Operation returned an invalid status code &#39;{0}&#39;&quot;</span>, <span class="r15 r">_statusCode</span>));
                <b>try</b>
                {
                    <span class="r16 r">_responseContent</span> = <b>await</b> <span class="r12 r">_httpResponse</span>.<span class="i">Content</span>.<span class="i">ReadAsStringAsync</span>().<span class="i">ConfigureAwait</span>(<b>false</b>);
                    <span class="i">AdlsError</span> <span id="r18 rd" class="r18 r">_errorBody</span> = <span class="i">SafeJsonConvert</span>.<span class="i">DeserializeObject</span>&lt;<span class="i">AdlsError</span>&gt;(<span class="r16 r">_responseContent</span>, <a href="#37f12618dcfa6698" class="k">this</a>.<span class="i">Client</span>.<span class="i">DeserializationSettings</span>);
                    <b>if</b> (<span class="r18 r">_errorBody</span> != <b>null</b>)
                    {
                        <span class="r17 r">ex</span>.<span class="i">Body</span> = <span class="r18 r">_errorBody</span>;
                        
                        <span class="c">// there is only one exception in case in which we will return false and not throw,</span>
                        <span class="c">// which is when the exception returned is a FileNotFoundException</span>
                        <b>if</b>(<span class="r17 r">ex</span>.<span class="i">Body</span>.<span class="i">RemoteException</span> <b>is</b> <span class="i">AdlsFileNotFoundException</span>)
                        {
                            <b>var</b> <span id="r19 rd" class="r19 r">_toReturn</span> = <b>new</b> <span class="i">AzureOperationResponse</span>&lt;<b>bool</b>&gt;();
                            <span class="r19 r">_toReturn</span>.<span class="i">Request</span> = <span class="r11 r">_httpRequest</span>;
                            <span class="r19 r">_toReturn</span>.<span class="i">Response</span> = <span class="r12 r">_httpResponse</span>;
                            <b>if</b> (<span class="r12 r">_httpResponse</span>.<span class="i">Headers</span>.<span class="i">Contains</span>(<span class="s">&quot;x-ms-request-id&quot;</span>))
                            {
                                <span class="r19 r">_toReturn</span>.<span class="i">RequestId</span> = <span class="r12 r">_httpResponse</span>.<span class="i">Headers</span>.<span class="i">GetValues</span>(<span class="s">&quot;x-ms-request-id&quot;</span>).<span class="i">FirstOrDefault</span>();
                            }
 
                            <span class="c">// the file or folder does not exist</span>
                            <span class="r19 r">_toReturn</span>.<span class="i">Body</span> = <b>false</b>;
 
                            <b>if</b> (<span class="r5 r">_shouldTrace</span>)
                            {
                                <span class="i">ServiceClientTracing</span>.<span class="i">Exit</span>(<span class="r6 r">_invocationId</span>, <span class="r19 r">_toReturn</span>);
                            }
 
                            <b>return</b> <span class="r19 r">_toReturn</span>;
                        }
                    }
                }
                <b>catch</b> (<span class="i">JsonException</span>)
                {
                    <span class="c">// Ignore the exception if the response can&#39;t be parsed, </span>
                    <span class="c">// to ensure the original error is thrown with request/response information</span>
                }
                <span class="r17 r">ex</span>.<span class="i">Request</span> = <b>new</b> <span class="i">HttpRequestMessageWrapper</span>(<span class="r11 r">_httpRequest</span>, <span class="r14 r">_requestContent</span>);
                <span class="r17 r">ex</span>.<span class="i">Response</span> = <b>new</b> <span class="i">HttpResponseMessageWrapper</span>(<span class="r12 r">_httpResponse</span>, <span class="r16 r">_responseContent</span>);
                <b>if</b> (<span class="r5 r">_shouldTrace</span>)
                {
                    <span class="i">ServiceClientTracing</span>.<span class="i">Error</span>(<span class="r6 r">_invocationId</span>, <span class="r17 r">ex</span>);
                }
                <span class="r11 r">_httpRequest</span>.<span class="i">Dispose</span>();
                <b>if</b> (<span class="r12 r">_httpResponse</span> != <b>null</b>)
                {
                    <span class="r12 r">_httpResponse</span>.<span class="i">Dispose</span>();
                }
                <b>throw</b> <span class="r17 r">ex</span>;
            }
 
            <span class="c">// Create Result</span>
            <b>var</b> <span id="r20 rd" class="r20 r">_result</span> = <b>new</b> <span class="i">AzureOperationResponse</span>&lt;<b>bool</b>&gt;();
            <span class="r20 r">_result</span>.<span class="i">Request</span> = <span class="r11 r">_httpRequest</span>;
            <span class="r20 r">_result</span>.<span class="i">Response</span> = <span class="r12 r">_httpResponse</span>;
            <b>if</b> (<span class="r12 r">_httpResponse</span>.<span class="i">Headers</span>.<span class="i">Contains</span>(<span class="s">&quot;x-ms-request-id&quot;</span>))
            {
                <span class="r20 r">_result</span>.<span class="i">RequestId</span> = <span class="r12 r">_httpResponse</span>.<span class="i">Headers</span>.<span class="i">GetValues</span>(<span class="s">&quot;x-ms-request-id&quot;</span>).<span class="i">FirstOrDefault</span>();
            }
            <span class="c">// Deserialize Response</span>
            <b>if</b> ((<b>int</b>)<span class="r15 r">_statusCode</span> == 200)
            {
                <span class="r20 r">_result</span>.<span class="i">Body</span> = <b>true</b>;
            }
            <b>if</b> (<span class="r5 r">_shouldTrace</span>)
            {
                <span class="i">ServiceClientTracing</span>.<span class="i">Exit</span>(<span class="r6 r">_invocationId</span>, <span class="r20 r">_result</span>);
            }
            <b>return</b> <span class="r20 r">_result</span>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Downloads a file from the specified Data Lake Store account.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r21 r">accountName</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The Azure Data Lake Store account to execute filesystem operations on.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r22 r">sourcePath</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The Data Lake Store path (starting with &#39;/&#39;) of the file to download.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r23 r">destinationPath</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The local path to download the file to. If a directory is specified, the file name will be the same as the source file name</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r24 r">threadCount</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The maximum number of threads to use during the download. By default, this number will be computed based on file size.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r25 r">resume</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> A switch indicating if this download is a continuation of a previous, failed download. Default is false.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r26 r">overwrite</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> A switch indicating this download should overwrite the the target file if it exists. Default is false, and the download will fast fail if the target file exists.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r27 r">progressTracker</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> An optional delegate that can be used to track the progress of the download operation asynchronously.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r28 r">cancellationToken</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The cancellation token.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i">AdlsErrorException</span><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown when the operation returned an invalid status code.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#30edb7a318d221fa" class="t t">TaskCanceledException</a><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown when the operation takes too long to complete or if the user explicitly cancels it.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="DataTransfer/Common/InvalidMetadataException.cs.html#9dfcbe20582bb796" class="t t">InvalidMetadataException</a><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown when resume metadata is corrupt or not associated with the current operation.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#fd582974d1f75ac7" class="t t">FileNotFoundException</a><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown when the source path cannot be found.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#beac22dfca574cd4" class="t t">InvalidOperationException</a><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown if an invalid download is attempted or a file is modified externally during the operation.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="DataTransfer/Common/TransferFailedException.cs.html#020a0db52cedc36b" class="t t">TransferFailedException</a><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown if the transfer operation fails.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i">SerializationException</span><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown when unable to deserialize the response</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i">ValidationException</span><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown when a required parameter is null</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <b>public void</b> <a id="b143301f77fe0b6a" href="../R/b143301f77fe0b6a.html" target="n" data-glyph="72,1" class="i method">DownloadFile</a>(
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r21 rd" class="r21 r">accountName</span>,
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r22 rd" class="r22 r">sourcePath</span>,
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r23 rd" class="r23 r">destinationPath</span>,
            <b>int</b> <span id="r24 rd" class="r24 r">threadCount</span> = -1,
            <b>bool</b> <span id="r25 rd" class="r25 r">resume</span> = <b>false</b>,
            <b>bool</b> <span id="r26 rd" class="r26 r">overwrite</span> = <b>false</b>,
            <a href="@0@mscorlib/A.html#766adb700a2972f5" class="t t">IProgress</a>&lt;<a href="DataTransfer/Common/TransferProgress.cs.html#826dd519f4b122e1" class="t t">TransferProgress</a>&gt; <span id="r27 rd" class="r27 r">progressTracker</span> = <b>null</b>,
            <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r28 rd" class="r28 r">cancellationToken</span> = <b>default</b>(<a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a>))
        {
            <b>bool</b> <span id="r29 rd" class="r29 r">_shouldTrace</span> = <span class="i">ServiceClientTracing</span>.<span class="i">IsEnabled</span>;
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r30 rd" class="r30 r">_invocationId</span> = <b>null</b>;
            <b>if</b> (<span class="r29 r">_shouldTrace</span>)
            {
                <span class="r30 r">_invocationId</span> = <span class="i">ServiceClientTracing</span>.<span class="i">NextInvocationId</span>.<span class="i">ToString</span>();
                <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <b>object</b>&gt; <span id="r31 rd" class="r31 r">tracingParameters</span> = <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <b>object</b>&gt;();
                <span class="r31 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;accountName&quot;</span>, <span class="r21 r">accountName</span>);
                <span class="r31 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;sourcePath&quot;</span>, <span class="r22 r">sourcePath</span>);
                <span class="r31 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;destinationPath&quot;</span>, <span class="r23 r">destinationPath</span>);
                <span class="r31 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;threadCount&quot;</span>, <span class="r24 r">threadCount</span>);
                <span class="r31 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;resume&quot;</span>, <span class="r25 r">resume</span>);
                <span class="r31 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;overwrite&quot;</span>, <span class="r26 r">overwrite</span>);
                <span class="r31 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;progressTracker&quot;</span>, <span class="r27 r">progressTracker</span>);
                <span class="r31 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;cancellationToken&quot;</span>, <span class="r28 r">cancellationToken</span>);
                <span class="i">ServiceClientTracing</span>.<span class="i">Enter</span>(<span class="r30 r">_invocationId</span>, <a href="#37f12618dcfa6698" class="k">this</a>, <span class="s">&quot;DownloadFile&quot;</span>, <span class="r31 r">tracingParameters</span>);
            }
 
            <b>try</b>
            {
                <a href="DataTransfer/Common/TransferParameters.cs.html#9d54476a1d8187dd" class="k">var</a> <span id="r32 rd" class="r32 r">parameters</span> = <b>new</b> <a href="DataTransfer/Common/TransferParameters.cs.html#270628b86ab2d1da" class="t constructor">TransferParameters</a>(
                    <span class="r33 r">inputFilePath</span>: <span class="r22 r">sourcePath</span>,
                    <span class="r34 r">targetStreamPath</span>: <span class="r23 r">destinationPath</span>,
                    <span class="r35 r">accountName</span>: <span class="r21 r">accountName</span>,
                    <span class="r36 r">perFileThreadCount</span>: <span class="r24 r">threadCount</span>,
                    <span class="r37 r">isOverwrite</span>: <span class="r26 r">overwrite</span>,
                    <span class="r38 r">isResume</span>: <span class="r25 r">resume</span>,
                    <span class="r39 r">isDownload</span>: <b>true</b>
                    );
 
                <a href="DataTransfer/Common/DataLakeStoreFrontEndAdapter.cs.html#1d3c3772f85addbc" class="k">var</a> <span id="r40 rd" class="r40 r">transferAdapter</span> = <b>new</b> <span class="t">DataLakeStoreFrontEndAdapter</span>(<span class="r21 r">accountName</span>, <a href="#37f12618dcfa6698" class="k">this</a>.<span class="i">Client</span>);
                <a href="DataTransfer/DataLakeStoreTransferClient.cs.html#976b7e4d8dc73b48" class="k">var</a> <span id="r41 rd" class="r41 r">transferClient</span> = <b>new</b> <a href="DataTransfer/DataLakeStoreTransferClient.cs.html#b92e45ee4a7d4339" class="t constructor">DataLakeStoreTransferClient</a>(
                    <span class="r32 r">parameters</span>,
                    <span class="r40 r">transferAdapter</span>,
                    <span class="r28 r">cancellationToken</span>,
                    <span class="r27 r">progressTracker</span>);
 
                <span class="r41 r">transferClient</span>.<a href="DataTransfer/DataLakeStoreTransferClient.cs.html#ee0b3cc8caac54d9" class="i method">Execute</a>();
 
                <b>if</b> (<span class="r29 r">_shouldTrace</span>)
                {
                    <span class="i">ServiceClientTracing</span>.<span class="i">Exit</span>(
                        <span class="r30 r">_invocationId</span>,
                        <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#6e5f254563fed78e" class="i method">Format</a>(
                            <span class="s">&quot;Download of stream in account: {0} from source location: {1} to destination: {2} completed successfully.&quot;</span>,
                            <span class="r21 r">accountName</span>,
                            <span class="r22 r">sourcePath</span>,
                            <span class="r23 r">destinationPath</span>));
                }
            }
            <b>catch</b> (<a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a> <span id="r42 rd" class="r42 r">ex</span>)
            {
                <b>if</b> (<span class="r29 r">_shouldTrace</span>)
                {
                    <span class="i">ServiceClientTracing</span>.<span class="i">Error</span>(<span class="r30 r">_invocationId</span>, <span class="r42 r">ex</span>);
                }
 
                <b>throw</b> <span class="r42 r">ex</span>;
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Uploads a file to the specified Data Lake Store account.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r43 r">accountName</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The Azure Data Lake Store account to execute filesystem operations on.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r44 r">sourcePath</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The local source file to upload to the Data Lake Store account.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r45 r">destinationPath</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The Data Lake Store path (starting with &#39;/&#39;) of the directory or directory and filename to upload to.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r46 r">threadCount</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The maximum number of threads to use during the upload. By default, this number will be computed based on file size.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r47 r">resume</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> A switch indicating if this upload is a continuation of a previous, failed upload. Default is false.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r48 r">overwrite</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> A switch indicating this upload should overwrite the target file if it exists. Default is false, and the upload will fast fail if the target file exists.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r49 r">uploadAsBinary</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> A switch indicating this upload should treat the file as binary, which is slightly more performant but does not ensure record boundary integrity.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r50 r">progressTracker</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> An optional delegate that can be used to track the progress of the upload operation asynchronously.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r51 r">cancellationToken</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The cancellation token.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i">AdlsErrorException</span><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown when the operation returned an invalid status code.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#30edb7a318d221fa" class="t t">TaskCanceledException</a><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown when the operation takes too long to complete or if the user explicitly cancels it.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="DataTransfer/Common/InvalidMetadataException.cs.html#9dfcbe20582bb796" class="t t">InvalidMetadataException</a><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown when resume metadata is corrupt or not associated with the current operation.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#fd582974d1f75ac7" class="t t">FileNotFoundException</a><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown when the source path cannot be found.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#beac22dfca574cd4" class="t t">InvalidOperationException</a><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown if an invalid upload is attempted or the file is modified externally during the operation.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="DataTransfer/Common/TransferFailedException.cs.html#020a0db52cedc36b" class="t t">TransferFailedException</a><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown if the transfer operation fails.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i">SerializationException</span><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown when unable to deserialize the response</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i">ValidationException</span><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown when a required parameter is null</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <b>public void</b> <a id="b7bc8bf0a644e684" href="../R/b7bc8bf0a644e684.html" target="n" data-glyph="72,1" class="i method">UploadFile</a>(
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r43 rd" class="r43 r">accountName</span>,
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r44 rd" class="r44 r">sourcePath</span>,
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r45 rd" class="r45 r">destinationPath</span>,
            <b>int</b> <span id="r46 rd" class="r46 r">threadCount</span> = -1,
            <b>bool</b> <span id="r47 rd" class="r47 r">resume</span> = <b>false</b>,
            <b>bool</b> <span id="r48 rd" class="r48 r">overwrite</span> = <b>false</b>,
            <b>bool</b> <span id="r49 rd" class="r49 r">uploadAsBinary</span> = <b>false</b>,
            <a href="@0@mscorlib/A.html#766adb700a2972f5" class="t t">IProgress</a>&lt;<a href="DataTransfer/Common/TransferProgress.cs.html#826dd519f4b122e1" class="t t">TransferProgress</a>&gt; <span id="r50 rd" class="r50 r">progressTracker</span> = <b>null</b>,
            <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r51 rd" class="r51 r">cancellationToken</span> = <b>default</b>(<a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a>))
        {
            <b>bool</b> <span id="r52 rd" class="r52 r">_shouldTrace</span> = <span class="i">ServiceClientTracing</span>.<span class="i">IsEnabled</span>;
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r53 rd" class="r53 r">_invocationId</span> = <b>null</b>;
            <b>if</b> (<span class="r52 r">_shouldTrace</span>)
            {
                <span class="r53 r">_invocationId</span> = <span class="i">ServiceClientTracing</span>.<span class="i">NextInvocationId</span>.<span class="i">ToString</span>();
                <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <b>object</b>&gt; <span id="r54 rd" class="r54 r">tracingParameters</span> = <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <b>object</b>&gt;();
                <span class="r54 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;accountName&quot;</span>, <span class="r43 r">accountName</span>);
                <span class="r54 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;sourcePath&quot;</span>, <span class="r44 r">sourcePath</span>);
                <span class="r54 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;destinationPath&quot;</span>, <span class="r45 r">destinationPath</span>);
                <span class="r54 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;threadCount&quot;</span>, <span class="r46 r">threadCount</span>);
                <span class="r54 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;resume&quot;</span>, <span class="r47 r">resume</span>);
                <span class="r54 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;overwrite&quot;</span>, <span class="r48 r">overwrite</span>);
                <span class="r54 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;uploadAsBinary&quot;</span>, <span class="r49 r">uploadAsBinary</span>);
                <span class="r54 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;progressTracker&quot;</span>, <span class="r50 r">progressTracker</span>);
                <span class="r54 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;cancellationToken&quot;</span>, <span class="r51 r">cancellationToken</span>);
                <span class="i">ServiceClientTracing</span>.<span class="i">Enter</span>(<span class="r53 r">_invocationId</span>, <a href="#37f12618dcfa6698" class="k">this</a>, <span class="s">&quot;UploadFile&quot;</span>, <span class="r54 r">tracingParameters</span>);
            }
 
            <b>try</b>
            {
                <a href="DataTransfer/Common/TransferParameters.cs.html#9d54476a1d8187dd" class="k">var</a> <span id="r55 rd" class="r55 r">parameters</span> = <b>new</b> <a href="DataTransfer/Common/TransferParameters.cs.html#270628b86ab2d1da" class="t constructor">TransferParameters</a>(
                    <span class="r33 r">inputFilePath</span>: <span class="r44 r">sourcePath</span>,
                    <span class="r34 r">targetStreamPath</span>: <span class="r45 r">destinationPath</span>,
                    <span class="r35 r">accountName</span>: <span class="r43 r">accountName</span>,
                    <span class="r36 r">perFileThreadCount</span>: <span class="r46 r">threadCount</span>,
                    <span class="r37 r">isOverwrite</span>: <span class="r48 r">overwrite</span>,
                    <span class="r38 r">isResume</span>: <span class="r47 r">resume</span>,
                    <span class="r56 r">isBinary</span>: <span class="r49 r">uploadAsBinary</span>
                    );
 
                <a href="DataTransfer/Common/DataLakeStoreFrontEndAdapter.cs.html#1d3c3772f85addbc" class="k">var</a> <span id="r57 rd" class="r57 r">transferAdapter</span> = <b>new</b> <span class="t">DataLakeStoreFrontEndAdapter</span>(<span class="r43 r">accountName</span>, <a href="#37f12618dcfa6698" class="k">this</a>.<span class="i">Client</span>);
                <a href="DataTransfer/DataLakeStoreTransferClient.cs.html#976b7e4d8dc73b48" class="k">var</a> <span id="r58 rd" class="r58 r">transferClient</span> = <b>new</b> <a href="DataTransfer/DataLakeStoreTransferClient.cs.html#b92e45ee4a7d4339" class="t constructor">DataLakeStoreTransferClient</a>(
                    <span class="r55 r">parameters</span>,
                    <span class="r57 r">transferAdapter</span>,
                    <span class="r51 r">cancellationToken</span>,
                    <span class="r50 r">progressTracker</span>);
 
                <span class="r58 r">transferClient</span>.<a href="DataTransfer/DataLakeStoreTransferClient.cs.html#ee0b3cc8caac54d9" class="i method">Execute</a>();
 
                <b>if</b> (<span class="r52 r">_shouldTrace</span>)
                {
                    <span class="i">ServiceClientTracing</span>.<span class="i">Exit</span>(
                        <span class="r53 r">_invocationId</span>,
                        <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#6e5f254563fed78e" class="i method">Format</a>(
                            <span class="s">&quot;Upload of stream to account: {0} from source location: {1} to destination: {2} completed successfully.&quot;</span>,
                            <span class="r43 r">accountName</span>,
                            <span class="r44 r">sourcePath</span>,
                            <span class="r45 r">destinationPath</span>));
                }
            }
            <b>catch</b> (<a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a> <span id="r59 rd" class="r59 r">ex</span>)
            {
                <b>if</b> (<span class="r52 r">_shouldTrace</span>)
                {
                    <span class="i">ServiceClientTracing</span>.<span class="i">Error</span>(<span class="r53 r">_invocationId</span>, <span class="r59 r">ex</span>);
                }
 
                <b>throw</b> <span class="r59 r">ex</span>;
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Downloads a folder from the specified Data Lake Store account.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r60 r">accountName</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The Azure Data Lake Store account to execute filesystem operations on.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r61 r">sourcePath</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The Data Lake Store path (starting with &#39;/&#39;) of the directory to download.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r62 r">destinationPath</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The local path to download the folder to.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r63 r">perFileThreadCount</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The maximum number of threads to use per file during the download. By default, this number will be computed based on folder structure and average file size.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r64 r">concurrentFileCount</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The maximum number of files to download at once. By default, this number will be computed based on folder structure and number of files.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r65 r">resume</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> A switch indicating if this download is a continuation of a previous, failed download. Default is false.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r66 r">overwrite</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> A switch indicating this download should overwrite the contents of the target directory if it exists. Default is false, and the download will fast fail if the target location exists.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r67 r">recurse</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> A switch indicating this download should download the source directory recursively or just the top level. Default is false, only the top level will be downloaded.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r68 r">progressTracker</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> An optional delegate that can be used to track the progress of the download operation asynchronously.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r69 r">cancellationToken</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The cancellation token.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i">AdlsErrorException</span><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown when the operation returned an invalid status code.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#30edb7a318d221fa" class="t t">TaskCanceledException</a><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown when the operation takes too long to complete or if the user explicitly cancels it.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="DataTransfer/Common/InvalidMetadataException.cs.html#9dfcbe20582bb796" class="t t">InvalidMetadataException</a><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown when resume metadata is corrupt or not associated with the current operation.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#fd582974d1f75ac7" class="t t">FileNotFoundException</a><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown when the source path cannot be found.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#beac22dfca574cd4" class="t t">InvalidOperationException</a><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown if an invalid download is attempted or a file/folder is modified externally during the operation.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="DataTransfer/Common/TransferFailedException.cs.html#020a0db52cedc36b" class="t t">TransferFailedException</a><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown if the transfer operation fails.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i">SerializationException</span><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown when unable to deserialize the response</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i">ValidationException</span><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown when a required parameter is null</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <b>public void</b> <a id="a5aba23dbddc89af" href="../R/a5aba23dbddc89af.html" target="n" data-glyph="72,1" class="i method">DownloadFolder</a>(
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r60 rd" class="r60 r">accountName</span>,
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r61 rd" class="r61 r">sourcePath</span>,
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r62 rd" class="r62 r">destinationPath</span>,
            <b>int</b> <span id="r63 rd" class="r63 r">perFileThreadCount</span> = -1,
            <b>int</b> <span id="r64 rd" class="r64 r">concurrentFileCount</span> = -1,
            <b>bool</b> <span id="r65 rd" class="r65 r">resume</span> = <b>false</b>,
            <b>bool</b> <span id="r66 rd" class="r66 r">overwrite</span> = <b>false</b>,
            <b>bool</b> <span id="r67 rd" class="r67 r">recurse</span> = <b>false</b>,
            <a href="@0@mscorlib/A.html#766adb700a2972f5" class="t t">IProgress</a>&lt;<a href="DataTransfer/Common/TransferFolderProgress.cs.html#bff5545549325dae" class="t t">TransferFolderProgress</a>&gt; <span id="r68 rd" class="r68 r">progressTracker</span> = <b>null</b>,
            <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r69 rd" class="r69 r">cancellationToken</span> = <b>default</b>(<a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a>))
        {
            <b>bool</b> <span id="r70 rd" class="r70 r">_shouldTrace</span> = <span class="i">ServiceClientTracing</span>.<span class="i">IsEnabled</span>;
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r71 rd" class="r71 r">_invocationId</span> = <b>null</b>;
            <b>if</b> (<span class="r70 r">_shouldTrace</span>)
            {
                <span class="r71 r">_invocationId</span> = <span class="i">ServiceClientTracing</span>.<span class="i">NextInvocationId</span>.<span class="i">ToString</span>();
                <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <b>object</b>&gt; <span id="r72 rd" class="r72 r">tracingParameters</span> = <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <b>object</b>&gt;();
                <span class="r72 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;accountName&quot;</span>, <span class="r60 r">accountName</span>);
                <span class="r72 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;sourcePath&quot;</span>, <span class="r61 r">sourcePath</span>);
                <span class="r72 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;destinationPath&quot;</span>, <span class="r62 r">destinationPath</span>);
                <span class="r72 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;perFileThreadCount&quot;</span>, <span class="r63 r">perFileThreadCount</span>);
                <span class="r72 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;concurrentFileCount&quot;</span>, <span class="r64 r">concurrentFileCount</span>);
                <span class="r72 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;resume&quot;</span>, <span class="r65 r">resume</span>);
                <span class="r72 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;overwrite&quot;</span>, <span class="r66 r">overwrite</span>);
                <span class="r72 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;recurse&quot;</span>, <span class="r67 r">recurse</span>);
                <span class="r72 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;progressTracker&quot;</span>, <span class="r68 r">progressTracker</span>);
                <span class="r72 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;cancellationToken&quot;</span>, <span class="r69 r">cancellationToken</span>);
                <span class="i">ServiceClientTracing</span>.<span class="i">Enter</span>(<span class="r71 r">_invocationId</span>, <a href="#37f12618dcfa6698" class="k">this</a>, <span class="s">&quot;DownloadFolder&quot;</span>, <span class="r72 r">tracingParameters</span>);
            }
 
            <b>try</b>
            {
                <a href="DataTransfer/Common/TransferParameters.cs.html#9d54476a1d8187dd" class="k">var</a> <span id="r73 rd" class="r73 r">parameters</span> = <b>new</b> <a href="DataTransfer/Common/TransferParameters.cs.html#270628b86ab2d1da" class="t constructor">TransferParameters</a>(
                    <span class="r33 r">inputFilePath</span>: <span class="r61 r">sourcePath</span>,
                    <span class="r34 r">targetStreamPath</span>: <span class="r62 r">destinationPath</span>,
                    <span class="r35 r">accountName</span>: <span class="r60 r">accountName</span>,
                    <span class="r36 r">perFileThreadCount</span>: <span class="r63 r">perFileThreadCount</span>,
                    <span class="r74 r">concurrentFileCount</span>: <span class="r64 r">concurrentFileCount</span>,
                    <span class="r37 r">isOverwrite</span>: <span class="r66 r">overwrite</span>,
                    <span class="r38 r">isResume</span>: <span class="r65 r">resume</span>,
                    <span class="r75 r">isRecursive</span>: <span class="r67 r">recurse</span>,
                    <span class="r39 r">isDownload</span>: <b>true</b>
                    );
 
                <a href="DataTransfer/Common/DataLakeStoreFrontEndAdapter.cs.html#1d3c3772f85addbc" class="k">var</a> <span id="r76 rd" class="r76 r">transferAdapter</span> = <b>new</b> <span class="t">DataLakeStoreFrontEndAdapter</span>(<span class="r60 r">accountName</span>, <a href="#37f12618dcfa6698" class="k">this</a>.<span class="i">Client</span>);
                <a href="DataTransfer/DataLakeStoreTransferClient.cs.html#976b7e4d8dc73b48" class="k">var</a> <span id="r77 rd" class="r77 r">transferClient</span> = <b>new</b> <a href="DataTransfer/DataLakeStoreTransferClient.cs.html#b92e45ee4a7d4339" class="t constructor">DataLakeStoreTransferClient</a>(
                    <span class="r73 r">parameters</span>,
                    <span class="r76 r">transferAdapter</span>,
                    <span class="r78 r">token</span>: <span class="r69 r">cancellationToken</span>,
                    <span class="r79 r">folderProgressTracker</span>: <span class="r68 r">progressTracker</span>);
 
                <span class="r77 r">transferClient</span>.<a href="DataTransfer/DataLakeStoreTransferClient.cs.html#ee0b3cc8caac54d9" class="i method">Execute</a>();
 
                <b>if</b> (<span class="r70 r">_shouldTrace</span>)
                {
                    <span class="i">ServiceClientTracing</span>.<span class="i">Exit</span>(
                        <span class="r71 r">_invocationId</span>,
                        <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#ad9f5b0b214ae8f3" class="i method">Format</a>(
                            <span class="s">&quot;Download of folder in account: {0} from source location: {1}{2} to destination: {3} completed successfully.&quot;</span>,
                            <span class="r60 r">accountName</span>,
                            <span class="r61 r">sourcePath</span>,
                            <span class="r67 r">recurse</span> ? <span class="s">&quot;, recursively,&quot;</span> : <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>,
                            <span class="r62 r">destinationPath</span>));
                }
            }
            <b>catch</b> (<a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a> <span id="r80 rd" class="r80 r">ex</span>)
            {
                <b>if</b> (<span class="r70 r">_shouldTrace</span>)
                {
                    <span class="i">ServiceClientTracing</span>.<span class="i">Error</span>(<span class="r71 r">_invocationId</span>, <span class="r80 r">ex</span>);
                }
 
                <b>throw</b> <span class="r80 r">ex</span>;
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Uploads a folder to the specified Data Lake Store account.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r81 r">accountName</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The Azure Data Lake Store account to execute filesystem operations on.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r82 r">sourcePath</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The local source folder to upload to the Data Lake Store account.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r83 r">destinationPath</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The Data Lake Store path (starting with &#39;/&#39;) of the directory to upload to.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r84 r">perFileThreadCount</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The maximum number of threads to use per file during the upload. By default, this number will be computed based on folder structure and average file size.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r85 r">concurrentFileCount</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The maximum number of files to upload at once. By default, this number will be computed based on folder structure and number of files.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r86 r">resume</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> A switch indicating if this upload is a continuation of a previous, failed upload. Default is false.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r87 r">overwrite</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> A switch indicating this upload should overwrite the contents of the target directory if it exists. Default is false, and the upload will fast fail if the target location exists.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r88 r">uploadAsBinary</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> A switch indicating this upload should treat all data as binary, which is slightly more performant but does not ensure record boundary integrity. This is recommended for large folders of mixed binary and text files or binary only directories. Default is false</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r89 r">recurse</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> A switch indicating this upload should upload the source directory recursively or just the top level. Default is false, only the top level will be uploaded.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r90 r">progressTracker</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> An optional delegate that can be used to track the progress of the upload operation asynchronously.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r91 r">cancellationToken</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The cancellation token.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i">AdlsErrorException</span><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown when the operation returned an invalid status code.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#30edb7a318d221fa" class="t t">TaskCanceledException</a><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown when the operation takes too long to complete or if the user explicitly cancels it.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="DataTransfer/Common/InvalidMetadataException.cs.html#9dfcbe20582bb796" class="t t">InvalidMetadataException</a><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown when resume metadata is corrupt or not associated with the current operation.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#fd582974d1f75ac7" class="t t">FileNotFoundException</a><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown when the source path cannot be found.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#beac22dfca574cd4" class="t t">InvalidOperationException</a><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown if an invalid upload is attempted or a file/folder is modified externally during the operation.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="DataTransfer/Common/TransferFailedException.cs.html#020a0db52cedc36b" class="t t">TransferFailedException</a><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown if the transfer operation fails.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i">SerializationException</span><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown when unable to deserialize the response</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i">ValidationException</span><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Thrown when a required parameter is null</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <b>public void</b> <a id="b100bbf0e1b55c68" href="../R/b100bbf0e1b55c68.html" target="n" data-glyph="72,1" class="i method">UploadFolder</a>(
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r81 rd" class="r81 r">accountName</span>,
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r82 rd" class="r82 r">sourcePath</span>,
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r83 rd" class="r83 r">destinationPath</span>,
            <b>int</b> <span id="r84 rd" class="r84 r">perFileThreadCount</span> = -1,
            <b>int</b> <span id="r85 rd" class="r85 r">concurrentFileCount</span> = -1,
            <b>bool</b> <span id="r86 rd" class="r86 r">resume</span> = <b>false</b>,
            <b>bool</b> <span id="r87 rd" class="r87 r">overwrite</span> = <b>false</b>,
            <b>bool</b> <span id="r88 rd" class="r88 r">uploadAsBinary</span> = <b>false</b>,
            <b>bool</b> <span id="r89 rd" class="r89 r">recurse</span> = <b>false</b>,
            <a href="@0@mscorlib/A.html#766adb700a2972f5" class="t t">IProgress</a>&lt;<a href="DataTransfer/Common/TransferFolderProgress.cs.html#bff5545549325dae" class="t t">TransferFolderProgress</a>&gt; <span id="r90 rd" class="r90 r">progressTracker</span> = <b>null</b>,
            <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r91 rd" class="r91 r">cancellationToken</span> = <b>default</b>(<a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a>))
        {
            <b>bool</b> <span id="r92 rd" class="r92 r">_shouldTrace</span> = <span class="i">ServiceClientTracing</span>.<span class="i">IsEnabled</span>;
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r93 rd" class="r93 r">_invocationId</span> = <b>null</b>;
            <b>if</b> (<span class="r92 r">_shouldTrace</span>)
            {
                <span class="r93 r">_invocationId</span> = <span class="i">ServiceClientTracing</span>.<span class="i">NextInvocationId</span>.<span class="i">ToString</span>();
                <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <b>object</b>&gt; <span id="r94 rd" class="r94 r">tracingParameters</span> = <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <b>object</b>&gt;();
                <span class="r94 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;accountName&quot;</span>, <span class="r81 r">accountName</span>);
                <span class="r94 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;sourcePath&quot;</span>, <span class="r82 r">sourcePath</span>);
                <span class="r94 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;destinationPath&quot;</span>, <span class="r83 r">destinationPath</span>);
                <span class="r94 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;perFileThreadCount&quot;</span>, <span class="r84 r">perFileThreadCount</span>);
                <span class="r94 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;concurrentFileCount&quot;</span>, <span class="r85 r">concurrentFileCount</span>);
                <span class="r94 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;resume&quot;</span>, <span class="r86 r">resume</span>);
                <span class="r94 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;overwrite&quot;</span>, <span class="r87 r">overwrite</span>);
                <span class="r94 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;recurse&quot;</span>, <span class="r89 r">recurse</span>);
                <span class="r94 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;uploadAsBinary&quot;</span>, <span class="r88 r">uploadAsBinary</span>);
                <span class="r94 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;progressTracker&quot;</span>, <span class="r90 r">progressTracker</span>);
                <span class="r94 r">tracingParameters</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;cancellationToken&quot;</span>, <span class="r91 r">cancellationToken</span>);
                <span class="i">ServiceClientTracing</span>.<span class="i">Enter</span>(<span class="r93 r">_invocationId</span>, <a href="#37f12618dcfa6698" class="k">this</a>, <span class="s">&quot;UploadFolder&quot;</span>, <span class="r94 r">tracingParameters</span>);
            }
 
            <b>try</b>
            {
                <a href="DataTransfer/Common/TransferParameters.cs.html#9d54476a1d8187dd" class="k">var</a> <span id="r95 rd" class="r95 r">parameters</span> = <b>new</b> <a href="DataTransfer/Common/TransferParameters.cs.html#270628b86ab2d1da" class="t constructor">TransferParameters</a>(
                    <span class="r33 r">inputFilePath</span>: <span class="r82 r">sourcePath</span>,
                    <span class="r34 r">targetStreamPath</span>: <span class="r83 r">destinationPath</span>,
                    <span class="r35 r">accountName</span>: <span class="r81 r">accountName</span>,
                    <span class="r36 r">perFileThreadCount</span>: <span class="r84 r">perFileThreadCount</span>,
                    <span class="r74 r">concurrentFileCount</span>: <span class="r85 r">concurrentFileCount</span>,
                    <span class="r37 r">isOverwrite</span>: <span class="r87 r">overwrite</span>,
                    <span class="r38 r">isResume</span>: <span class="r86 r">resume</span>,
                    <span class="r75 r">isRecursive</span>: <span class="r89 r">recurse</span>,
                    <span class="r56 r">isBinary</span>: <span class="r88 r">uploadAsBinary</span>
                    );
 
                <a href="DataTransfer/Common/DataLakeStoreFrontEndAdapter.cs.html#1d3c3772f85addbc" class="k">var</a> <span id="r96 rd" class="r96 r">transferAdapter</span> = <b>new</b> <span class="t">DataLakeStoreFrontEndAdapter</span>(<span class="r81 r">accountName</span>, <a href="#37f12618dcfa6698" class="k">this</a>.<span class="i">Client</span>);
                <a href="DataTransfer/DataLakeStoreTransferClient.cs.html#976b7e4d8dc73b48" class="k">var</a> <span id="r97 rd" class="r97 r">transferClient</span> = <b>new</b> <a href="DataTransfer/DataLakeStoreTransferClient.cs.html#b92e45ee4a7d4339" class="t constructor">DataLakeStoreTransferClient</a>(
                    <span class="r95 r">parameters</span>,
                    <span class="r96 r">transferAdapter</span>,
                    <span class="r78 r">token</span>: <span class="r91 r">cancellationToken</span>,
                    <span class="r79 r">folderProgressTracker</span>: <span class="r90 r">progressTracker</span>);
 
                <span class="r97 r">transferClient</span>.<a href="DataTransfer/DataLakeStoreTransferClient.cs.html#ee0b3cc8caac54d9" class="i method">Execute</a>();
 
                <b>if</b> (<span class="r92 r">_shouldTrace</span>)
                {
                    <span class="i">ServiceClientTracing</span>.<span class="i">Exit</span>(
                        <span class="r93 r">_invocationId</span>,
                        <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#ad9f5b0b214ae8f3" class="i method">Format</a>(
                            <span class="s">&quot;Upload of folder to account: {0} from source location: {1}{2} to destination: {3} completed successfully.&quot;</span>,
                            <span class="r81 r">accountName</span>,
                            <span class="r82 r">sourcePath</span>,
                            <span class="r89 r">recurse</span> ? <span class="s">&quot;, recursively,&quot;</span> : <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>,
                            <span class="r83 r">destinationPath</span>));
                }
            }
            <b>catch</b> (<a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a> <span id="r98 rd" class="r98 r">ex</span>)
            {
                <b>if</b> (<span class="r92 r">_shouldTrace</span>)
                {
                    <span class="i">ServiceClientTracing</span>.<span class="i">Error</span>(<span class="r93 r">_invocationId</span>, <span class="r98 r">ex</span>);
                }
 
                <b>throw</b> <span class="r98 r">ex</span>;
            }
        }
    }
}
</pre></td></tr></table></div></body></html>

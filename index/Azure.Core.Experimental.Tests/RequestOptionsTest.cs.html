<!DOCTYPE html>
<html><head><title>RequestOptionsTest.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(88);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Azure.Core.Experimental.Tests/RequestOptionsTest.cs" target="_top">RequestOptionsTest.cs</a><br/></td><td><a class="blueLink" href="https://github.com/Azure/azure-sdk-for-net/tree/main/sdk/core/Azure.Core.Experimental/tests/RequestOptionsTest.cs" target="_blank">View on GitHub</a></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Azure.Core.Experimental.Tests" target="_top">Azure.Core.Experimental.Tests.csproj</a> (Azure.Core.Experimental.Tests)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License.</span>
 
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Core</span>.<span class="i n">TestFramework</span>;
<b>using</b> <span class="i n">NUnit</span>.<span class="i n">Framework</span>;
 
<b>namespace</b> <span class="i n">Azure</span>.<span class="i n">Core</span>.<span class="i n">Tests</span>
{
    <b>public class</b> <a id="fc10c12bb2d271bf" href="R/../../0000000000.html" target="n" data-glyph="0,0" class="t t"><span id="b3fc51f80a197de8">RequestOptionsTest</span></a>
    {
        [<span class="t constructor">Test</span>]
        <b>public void</b> <a id="875805c7080c4f37" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanOverrideDefaultClassificationSuccess</a>()
        {
            <a href="/Azure.Core/A.html#0d3a69186ac45549" class="k">var</a> <span id="r0 rd" class="r0 r">m</span> = <a href="#a50073ab7135412a" class="i method">CreateTestMessage</a>(404);
 
            <a href="/Azure.Core.Experimental/A.html#5eca986b88379479" class="k">var</a> <span id="r1 rd" class="r1 r">options</span> = <b>new</b> <a href="/Azure.Core.Experimental/A.html#d8e9493a7aff8122" class="t constructor">RequestOptions</a>();
            <span class="r1 r">options</span>.<a href="/Azure.Core.Experimental/A.html#32904990a237a038" class="i method">AddClassifier</a>(<b>new</b>[] { 404 }, <a href="/Azure.Core.Experimental/A.html#bb253de5df46dd98" class="t t">ResponseClassification</a>.<a href="/Azure.Core.Experimental/A.html#cc6b6c0a6a45f948" class="i field">Success</a>);
 
            <a href="/Azure.Core.Experimental/A.html#5eca986b88379479" class="t t">RequestOptions</a>.<a href="/Azure.Core.Experimental/A.html#bc2b61330299abb2" class="i method">Apply</a>(<span class="r1 r">options</span>, <span class="r0 r">m</span>);
 
            <span class="t t">Assert</span>.<span class="i method">False</span>(<span class="r0 r">m</span>.<a href="/Azure.Core/A.html#e098f6f0a9341072" class="i property">ResponseClassifier</a>.<a href="/Azure.Core/A.html#4e59b113d4e05ee4" class="i method">IsErrorResponse</a>(<span class="r0 r">m</span>));
        }
 
        [<span class="t constructor">Test</span>]
        <b>public void</b> <a id="5fae2ac9b7095ebc" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanOverrideDefaultClassificationThrow</a>()
        {
            <a href="/Azure.Core/A.html#0d3a69186ac45549" class="k">var</a> <span id="r2 rd" class="r2 r">m</span> = <a href="#a50073ab7135412a" class="i method">CreateTestMessage</a>(200);
 
            <a href="/Azure.Core.Experimental/A.html#5eca986b88379479" class="k">var</a> <span id="r3 rd" class="r3 r">options</span> = <b>new</b> <a href="/Azure.Core.Experimental/A.html#d8e9493a7aff8122" class="t constructor">RequestOptions</a>();
            <span class="r3 r">options</span>.<a href="/Azure.Core.Experimental/A.html#32904990a237a038" class="i method">AddClassifier</a>(<b>new</b>[] { 200 }, <a href="/Azure.Core.Experimental/A.html#bb253de5df46dd98" class="t t">ResponseClassification</a>.<a href="/Azure.Core.Experimental/A.html#09eb1a9df2417066" class="i field">Throw</a>);
 
            <a href="/Azure.Core.Experimental/A.html#5eca986b88379479" class="t t">RequestOptions</a>.<a href="/Azure.Core.Experimental/A.html#bc2b61330299abb2" class="i method">Apply</a>(<span class="r3 r">options</span>, <span class="r2 r">m</span>);
 
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r2 r">m</span>.<a href="/Azure.Core/A.html#e098f6f0a9341072" class="i property">ResponseClassifier</a>.<a href="/Azure.Core/A.html#4e59b113d4e05ee4" class="i method">IsErrorResponse</a>(<span class="r2 r">m</span>));
        }
 
        [<span class="t constructor">Test</span>]
        <b>public void</b> <a id="ad861f1d7f2c03fa" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanOverrideDefaultClassificationRetry</a>()
        {
            <a href="/Azure.Core/A.html#0d3a69186ac45549" class="k">var</a> <span id="r4 rd" class="r4 r">m</span> = <a href="#a50073ab7135412a" class="i method">CreateTestMessage</a>(200);
 
            <a href="/Azure.Core.Experimental/A.html#5eca986b88379479" class="k">var</a> <span id="r5 rd" class="r5 r">options</span> = <b>new</b> <a href="/Azure.Core.Experimental/A.html#d8e9493a7aff8122" class="t constructor">RequestOptions</a>();
            <span class="r5 r">options</span>.<a href="/Azure.Core.Experimental/A.html#32904990a237a038" class="i method">AddClassifier</a>(<b>new</b>[] { 200 }, <a href="/Azure.Core.Experimental/A.html#bb253de5df46dd98" class="t t">ResponseClassification</a>.<a href="/Azure.Core.Experimental/A.html#bc3a8703d2557ae9" class="i field">Retry</a>);
 
            <a href="/Azure.Core.Experimental/A.html#5eca986b88379479" class="t t">RequestOptions</a>.<a href="/Azure.Core.Experimental/A.html#bc2b61330299abb2" class="i method">Apply</a>(<span class="r5 r">options</span>, <span class="r4 r">m</span>);
 
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r4 r">m</span>.<a href="/Azure.Core/A.html#e098f6f0a9341072" class="i property">ResponseClassifier</a>.<a href="/Azure.Core/A.html#fafc101046621fc7" class="i method">IsRetriableResponse</a>(<span class="r4 r">m</span>));
        }
 
        [<span class="t constructor">Test</span>]
        <b>public void</b> <a id="486d78ba5f44365b" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanOverrideDefaultClassificationNoRetry</a>()
        {
            <a href="/Azure.Core/A.html#0d3a69186ac45549" class="k">var</a> <span id="r6 rd" class="r6 r">m</span> = <a href="#a50073ab7135412a" class="i method">CreateTestMessage</a>(500);
 
            <a href="/Azure.Core.Experimental/A.html#5eca986b88379479" class="k">var</a> <span id="r7 rd" class="r7 r">options</span> = <b>new</b> <a href="/Azure.Core.Experimental/A.html#d8e9493a7aff8122" class="t constructor">RequestOptions</a>();
            <span class="r7 r">options</span>.<a href="/Azure.Core.Experimental/A.html#32904990a237a038" class="i method">AddClassifier</a>(<b>new</b>[] { 500 }, <a href="/Azure.Core.Experimental/A.html#bb253de5df46dd98" class="t t">ResponseClassification</a>.<a href="/Azure.Core.Experimental/A.html#845f7d8d67dc2d0c" class="i field">DontRetry</a>);
 
            <a href="/Azure.Core.Experimental/A.html#5eca986b88379479" class="t t">RequestOptions</a>.<a href="/Azure.Core.Experimental/A.html#bc2b61330299abb2" class="i method">Apply</a>(<span class="r7 r">options</span>, <span class="r6 r">m</span>);
 
            <span class="t t">Assert</span>.<span class="i method">False</span>(<span class="r6 r">m</span>.<a href="/Azure.Core/A.html#e098f6f0a9341072" class="i property">ResponseClassifier</a>.<a href="/Azure.Core/A.html#fafc101046621fc7" class="i method">IsRetriableResponse</a>(<span class="r6 r">m</span>));
        }
 
        [<span class="t constructor">Test</span>]
        <b>public void</b> <a id="ad5fa460de696064" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanOverrideDefaultClassificationWithFunc</a>()
        {
            <a href="/Azure.Core/A.html#0d3a69186ac45549" class="t t">HttpMessage</a> <span id="r8 rd" class="r8 r">m</span> = <b>new</b> <a href="/Azure.Core/A.html#75c747635e2ec070" class="t constructor">HttpMessage</a>(<b>new</b> <a href="/Azure.Core.TestFramework/A.html#0c2649fa090b5cd0" class="t constructor">MockRequest</a>(), <b>new</b> <a href="/Azure.Core/A.html#894d8985d5619d82" class="t constructor">ResponseClassifier</a>())
            {
                <a href="/Azure.Core/A.html#0bc18a223263c879" class="i property">Response</a> = <b>new</b> <a href="/Azure.Core.TestFramework/A.html#ef2adc622c2950d8" class="t constructor">MockResponse</a>(500)
            };
 
            <a href="/Azure.Core.Experimental/A.html#5eca986b88379479" class="k">var</a> <span id="r9 rd" class="r9 r">options</span> = <b>new</b> <a href="/Azure.Core.Experimental/A.html#d8e9493a7aff8122" class="t constructor">RequestOptions</a>();
            <span class="r9 r">options</span>.<a href="/Azure.Core.Experimental/A.html#ba5bec302e6076a4" class="i method">AddClassifier</a>(<span id="r10 rd" class="r10 r">_</span> =&gt; <a href="/Azure.Core.Experimental/A.html#bb253de5df46dd98" class="t t">ResponseClassification</a>.<a href="/Azure.Core.Experimental/A.html#cc6b6c0a6a45f948" class="i field">Success</a>);
 
            <a href="/Azure.Core.Experimental/A.html#5eca986b88379479" class="t t">RequestOptions</a>.<a href="/Azure.Core.Experimental/A.html#bc2b61330299abb2" class="i method">Apply</a>(<span class="r9 r">options</span>, <span class="r8 r">m</span>);
 
            <span class="t t">Assert</span>.<span class="i method">False</span>(<span class="r8 r">m</span>.<a href="/Azure.Core/A.html#e098f6f0a9341072" class="i property">ResponseClassifier</a>.<a href="/Azure.Core/A.html#4e59b113d4e05ee4" class="i method">IsErrorResponse</a>(<span class="r8 r">m</span>));
        }
 
        <b>private static</b> <a href="/Azure.Core/A.html#0d3a69186ac45549" class="t t">HttpMessage</a> <a id="a50073ab7135412a" href="R/a50073ab7135412a.html" target="n" data-glyph="76,1" class="i method">CreateTestMessage</a>(<b>int</b> <span id="r11 rd" class="r11 r">status</span>)
        {
            <a href="/Azure.Core/A.html#0d3a69186ac45549" class="t t">HttpMessage</a> <span id="r12 rd" class="r12 r">m</span> = <b>new</b> <a href="/Azure.Core/A.html#75c747635e2ec070" class="t constructor">HttpMessage</a>(<b>new</b> <a href="/Azure.Core.TestFramework/A.html#0c2649fa090b5cd0" class="t constructor">MockRequest</a>(), <b>new</b> <a href="/Azure.Core/A.html#894d8985d5619d82" class="t constructor">ResponseClassifier</a>())
            {
                <a href="/Azure.Core/A.html#0bc18a223263c879" class="i property">Response</a> = <b>new</b> <a href="/Azure.Core.TestFramework/A.html#ef2adc622c2950d8" class="t constructor">MockResponse</a>(<span class="r11 r">status</span>)
            };
            <b>return</b> <span class="r12 r">m</span>;
        }
    }
}</pre></td></tr></table></div></body></html>

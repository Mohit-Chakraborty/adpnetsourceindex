<!DOCTYPE html>
<html><head><title>CertificateOperationProperties.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(188);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Azure.Security.KeyVault.Certificates/CertificateOperationProperties.cs" target="_top">CertificateOperationProperties.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Azure.Security.KeyVault.Certificates" target="_top">Azure.Security.KeyVault.Certificates\src\Azure.Security.KeyVault.Certificates.csproj</a> (Azure.Security.KeyVault.Certificates)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License.</span>
 
<b>using</b> <span class="i">System</span>;
<b>using</b> <span class="i">System</span>.<span class="i">Globalization</span>;
<b>using</b> <span class="i">System</span>.<span class="i">Text</span>.<span class="i">Json</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Core</span>;
 
<b>namespace</b> <span class="i n">Azure</span>.<span class="i n">Security</span>.<span class="i n">KeyVault</span>.<span class="i n">Certificates</span>
{
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
    <span class="c">///</span><span class="c"> Properties pertaining to the status of a certificate operation.</span>
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
    <b>public class</b> <a id="d6c4d81da905a796" href="R/d6c4d81da905a796.html" target="n" data-glyph="0,0" class="t t">CertificateOperationProperties</a> : <a href="IJsonSerializable.cs.html#201b828974defe8f" class="t t">IJsonDeserializable</a>
    {
        <b>private const string</b> <a id="c0eb78dd9564acca" href="R/c0eb78dd9564acca.html" target="n" data-glyph="10,1" class="i field">IdPropertyName</a> = <span class="s">&quot;id&quot;</span>;
        <b>private const string</b> <a id="192bd825d7658687" href="R/192bd825d7658687.html" target="n" data-glyph="10,1" class="i field">IssuerProperyName</a> = <span class="s">&quot;issuer&quot;</span>;
        <b>private const string</b> <a id="21251b5f376f47ae" href="R/21251b5f376f47ae.html" target="n" data-glyph="10,1" class="i field">CsrPropertyName</a> = <span class="s">&quot;csr&quot;</span>;
        <b>private const string</b> <a id="649221fbd71ef4c1" href="R/649221fbd71ef4c1.html" target="n" data-glyph="10,1" class="i field">CancellationRequestedPropertyName</a> = <span class="s">&quot;cancellation_requested&quot;</span>;
        <b>private const string</b> <a id="f7954049f3a71810" href="R/f7954049f3a71810.html" target="n" data-glyph="10,1" class="i field">RequestIdPropertyName</a> = <span class="s">&quot;request_id&quot;</span>;
        <b>private const string</b> <a id="9b2ba0cea1d23259" href="R/9b2ba0cea1d23259.html" target="n" data-glyph="10,1" class="i field">StatusPropertyName</a> = <span class="s">&quot;status&quot;</span>;
        <b>private const string</b> <a id="3b9f98b2ac06c0b2" href="R/3b9f98b2ac06c0b2.html" target="n" data-glyph="10,1" class="i field">StatusDetailsPropertyName</a> = <span class="s">&quot;status_details&quot;</span>;
        <b>private const string</b> <a id="7d3489cad5e3e426" href="R/7d3489cad5e3e426.html" target="n" data-glyph="10,1" class="i field">TargetPropertyName</a> = <span class="s">&quot;target&quot;</span>;
        <b>private const string</b> <a id="e2b2d8f224a689a4" href="R/e2b2d8f224a689a4.html" target="n" data-glyph="10,1" class="i field">ErrorPropertyName</a> = <span class="s">&quot;error&quot;</span>;
        <b>private const string</b> <a id="d9a1fb0235cf400f" href="R/d9a1fb0235cf400f.html" target="n" data-glyph="10,1" class="i field">Collection</a> = <span class="s">&quot;certificates/&quot;</span>;
 
        <b>private</b> <a href="IssuerParameters.cs.html#d6a0437f4cda424a" class="t t">IssuerParameters</a> <a id="e129605069dd6577" href="R/e129605069dd6577.html" target="n" data-glyph="46,1" class="i field">_issuer</a>;
 
        <b>internal</b> <a id="03c68285b30cd065" href="R/03c68285b30cd065.html" target="n" data-glyph="74,1" class="t constructor">CertificateOperationProperties</a>()
        {
        }
 
        <b>internal</b> <a id="dd776f01dd907f12" href="R/dd776f01dd907f12.html" target="n" data-glyph="74,1" class="t constructor">CertificateOperationProperties</a>(<span class="i">Uri</span> <span id="r0 rd" class="r0 r">vaultUri</span>, <b>string</b> <span id="r1 rd" class="r1 r">name</span>)
        {
            <a href="#4de7ee912d3211a0" class="i property">VaultUri</a> = <span class="r0 r">vaultUri</span>;
            <a href="#9d4ea696b31155c5" class="i property">Name</a> = <span class="r1 r">name</span>;
 
            <span class="i">RequestUriBuilder</span> <span id="r2 rd" class="r2 r">builder</span> = <b>new</b> <span class="i">RequestUriBuilder</span>
            {
                <span class="i">Scheme</span> = <span class="r0 r">vaultUri</span>.<span class="i">Scheme</span>,
                <span class="i">Host</span> = <span class="r0 r">vaultUri</span>.<span class="i">Host</span>,
                <span class="i">Port</span> = <span class="r0 r">vaultUri</span>.<span class="i">Port</span>,
                <span class="i">Path</span> = <a href="#d9a1fb0235cf400f" class="i field">Collection</a> + <span class="r1 r">name</span>,
            };
 
            <a href="#ef357967d629438b" class="i property">Id</a> = <span class="r2 r">builder</span>.<span class="i">ToUri</span>();
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets the identifier of the certificate operation.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public</b> <span class="i">Uri</span> <a id="ef357967d629438b" href="R/ef357967d629438b.html" target="n" data-glyph="102,1" class="i property">Id</a> { <b>get</b>; <b>internal set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets the name of the certificate to which the operation applies.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public string</b> <a id="9d4ea696b31155c5" href="R/9d4ea696b31155c5.html" target="n" data-glyph="102,1" class="i property">Name</a> { <b>get</b>; <b>internal set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i">Uri</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> of the vault executing the certificate operation.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public</b> <span class="i">Uri</span> <a id="4de7ee912d3211a0" href="R/4de7ee912d3211a0.html" target="n" data-glyph="102,1" class="i property">VaultUri</a> { <b>get</b>; <b>internal set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets the name of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="CertificateIssuer.cs.html#9ab1bf85698766a3" class="t t">CertificateIssuer</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> for the certificate to create.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public string</b> <a id="d7505e60eb55ecf4" href="R/d7505e60eb55ecf4.html" target="n" data-glyph="102,1" class="i property">IssuerName</a>
        {
            <b>get</b> =&gt; <a href="#e129605069dd6577" class="i field">_issuer</a>.<a href="IssuerParameters.cs.html#1d30c24b8ae4c2c5" class="i property">IssuerName</a>;
            <b>internal set</b> =&gt; <a href="#e129605069dd6577" class="i field">_issuer</a>.<a href="IssuerParameters.cs.html#1d30c24b8ae4c2c5" class="i property">IssuerName</a> = <b>value</b>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets the type of the certificate to create.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public string</b> <a id="bdbed6dbe9231f63" href="R/bdbed6dbe9231f63.html" target="n" data-glyph="102,1" class="i property">CertificateType</a>
        {
            <b>get</b> =&gt; <a href="#e129605069dd6577" class="i field">_issuer</a>.<a href="IssuerParameters.cs.html#9caddf68ead72669" class="i property">CertificateType</a>;
            <b>internal set</b> =&gt; <a href="#e129605069dd6577" class="i field">_issuer</a>.<a href="IssuerParameters.cs.html#9caddf68ead72669" class="i property">CertificateType</a> = <b>value</b>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets a value indicating whether the certificate will be published to the certificate transparency list when created.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public bool</b>? <a id="f104f437957deed0" href="R/f104f437957deed0.html" target="n" data-glyph="102,1" class="i property">CertificateTransparency</a>
        {
            <b>get</b> =&gt; <a href="#e129605069dd6577" class="i field">_issuer</a>.<a href="IssuerParameters.cs.html#704a76081abe21ff" class="i property">CertificateTransparency</a>;
            <b>internal set</b> =&gt; <a href="#e129605069dd6577" class="i field">_issuer</a>.<a href="IssuerParameters.cs.html#704a76081abe21ff" class="i property">CertificateTransparency</a> = <b>value</b>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets the certificate signing request (CSR) that is being used in the certificate operation.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public byte</b>[] <a id="45a46c53ff1e6257" href="R/45a46c53ff1e6257.html" target="n" data-glyph="102,1" class="i property">Csr</a> { <b>get</b>; <b>internal set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets a value indicating whether a cancellation has been requested for the operation.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public bool</b> <a id="55e728953e6b840e" href="R/55e728953e6b840e.html" target="n" data-glyph="102,1" class="i property">CancellationRequested</a> { <b>get</b>; <b>internal set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets the request identifier of the certificate operation.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public string</b> <a id="9a0844ada74566fa" href="R/9a0844ada74566fa.html" target="n" data-glyph="102,1" class="i property">RequestId</a> { <b>get</b>; <b>internal set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets the current status of the operation.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public string</b> <a id="aac654dad5de4966" href="R/aac654dad5de4966.html" target="n" data-glyph="102,1" class="i property">Status</a> { <b>get</b>; <b>internal set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets extended details on the status of the operation.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public string</b> <a id="990af97e7e956381" href="R/990af97e7e956381.html" target="n" data-glyph="102,1" class="i property">StatusDetails</a> { <b>get</b>; <b>internal set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets the location which will contain the result of the certificate operation.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public string</b> <a id="3708fd090523cd25" href="R/3708fd090523cd25.html" target="n" data-glyph="102,1" class="i property">Target</a> { <b>get</b>; <b>internal set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets any errors encountered during the processing of the certificate operation.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public</b> <a href="CertificateOperationError.cs.html#f4aaec5c21ab883a" class="t t">CertificateOperationError</a> <a id="74e7852feee1fee3" href="R/74e7852feee1fee3.html" target="n" data-glyph="102,1" class="i property">Error</a> { <b>get</b>; <b>internal set</b>; }
 
        <b>void</b> <a href="IJsonSerializable.cs.html#201b828974defe8f" class="t t">IJsonDeserializable</a>.<a href="IJsonSerializable.cs.html#65190f481ad3e1bb" class="i method">ReadProperties</a>(<span class="i">JsonElement</span> <span id="r3 rd" class="r3 r">json</span>)
        {
            <b>foreach</b> (<span class="i">JsonProperty</span> <span id="r4 rd" class="r4 r">prop</span> <b>in</b> <span class="r3 r">json</span>.<span class="i">EnumerateObject</span>())
            {
                <b>switch</b> (<span class="r4 r">prop</span>.<span class="i">Name</span>)
                {
                    <b>case</b> <a href="#c0eb78dd9564acca" class="i field">IdPropertyName</a>:
                        <b>var</b> <span id="r5 rd" class="r5 r">id</span> = <span class="r4 r">prop</span>.<span class="i">Value</span>.<span class="i">GetString</span>();
                        <a href="#ef357967d629438b" class="i property">Id</a> = <b>new</b> <span class="i">Uri</span>(<span class="r5 r">id</span>);
                        <a href="#f708e884b3dc2bb4" class="i method">ParseId</a>(<a href="#ef357967d629438b" class="i property">Id</a>);
                        <b>break</b>;
 
                    <b>case</b> <a href="#192bd825d7658687" class="i field">IssuerProperyName</a>:
                        <a href="#e129605069dd6577" class="i field">_issuer</a>.<span class="i">ReadProperties</span>(<span class="r4 r">prop</span>.<span class="i">Value</span>);
                        <b>break</b>;
 
                    <b>case</b> <a href="#21251b5f376f47ae" class="i field">CsrPropertyName</a>:
                        <a href="#45a46c53ff1e6257" class="i property">Csr</a> = <span class="r4 r">prop</span>.<span class="i">Value</span>.<span class="i">GetBytesFromBase64</span>();
                        <b>break</b>;
 
                    <b>case</b> <a href="#649221fbd71ef4c1" class="i field">CancellationRequestedPropertyName</a>:
                        <a href="#55e728953e6b840e" class="i property">CancellationRequested</a> = <span class="r4 r">prop</span>.<span class="i">Value</span>.<span class="i">GetBoolean</span>();
                        <b>break</b>;
 
                    <b>case</b> <a href="#f7954049f3a71810" class="i field">RequestIdPropertyName</a>:
                        <a href="#9a0844ada74566fa" class="i property">RequestId</a> = <span class="r4 r">prop</span>.<span class="i">Value</span>.<span class="i">GetString</span>();
                        <b>break</b>;
 
                    <b>case</b> <a href="#9b2ba0cea1d23259" class="i field">StatusPropertyName</a>:
                        <a href="#aac654dad5de4966" class="i property">Status</a> = <span class="r4 r">prop</span>.<span class="i">Value</span>.<span class="i">GetString</span>();
                        <b>break</b>;
 
                    <b>case</b> <a href="#3b9f98b2ac06c0b2" class="i field">StatusDetailsPropertyName</a>:
                        <a href="#990af97e7e956381" class="i property">StatusDetails</a> = <span class="r4 r">prop</span>.<span class="i">Value</span>.<span class="i">GetString</span>();
                        <b>break</b>;
 
                    <b>case</b> <a href="#7d3489cad5e3e426" class="i field">TargetPropertyName</a>:
                        <a href="#3708fd090523cd25" class="i property">Target</a> = <span class="r4 r">prop</span>.<span class="i">Value</span>.<span class="i">GetString</span>();
                        <b>break</b>;
 
                    <b>case</b> <a href="#e2b2d8f224a689a4" class="i field">ErrorPropertyName</a>:
                        <a href="#74e7852feee1fee3" class="i property">Error</a> = <b>new</b> <a href="CertificateOperationError.cs.html#5c94ea3f8781b745" class="t constructor">CertificateOperationError</a>();
                        ((<a href="IJsonSerializable.cs.html#201b828974defe8f" class="t t">IJsonDeserializable</a>)<a href="#74e7852feee1fee3" class="i property">Error</a>).<span class="i">ReadProperties</span>(<span class="r4 r">prop</span>.<span class="i">Value</span>);
                        <b>break</b>;
                }
            }
        }
 
        <b>private void</b> <a id="f708e884b3dc2bb4" href="R/f708e884b3dc2bb4.html" target="n" data-glyph="76,1" class="i method">ParseId</a>(<span class="i">Uri</span> <span id="r6 rd" class="r6 r">idToParse</span>)
        {
            <span class="c">// We expect an identifier with either 3 or 4 segments: host + collection + name [+ version]</span>
            <b>if</b> (<span class="r6 r">idToParse</span>.<span class="i">Segments</span>.<span class="i">Length</span> != 3 &amp;&amp; <span class="r6 r">idToParse</span>.<span class="i">Segments</span>.<span class="i">Length</span> != 4)
                <b>throw</b> <b>new</b> <span class="i">ArgumentException</span>(<b>string</b>.<span class="i">Format</span>(<span class="i">CultureInfo</span>.<span class="i">InvariantCulture</span>, <span class="s">&quot;Invalid ObjectIdentifier: {0}. Bad number of segments: {1}&quot;</span>, <span class="r6 r">idToParse</span>, <span class="r6 r">idToParse</span>.<span class="i">Segments</span>.<span class="i">Length</span>));
 
            <b>if</b> (!<b>string</b>.<span class="i">Equals</span>(<span class="r6 r">idToParse</span>.<span class="i">Segments</span>[1], <a href="#d9a1fb0235cf400f" class="i field">Collection</a>, <span class="i">StringComparison</span>.<span class="i">OrdinalIgnoreCase</span>))
                <b>throw</b> <b>new</b> <span class="i">ArgumentException</span>(<b>string</b>.<span class="i">Format</span>(<span class="i">CultureInfo</span>.<span class="i">InvariantCulture</span>, <span class="s">&quot;Invalid ObjectIdentifier: {0}. segment [1] should be &#39;{1}&#39;, found &#39;{2}&#39;&quot;</span>, <span class="r6 r">idToParse</span>, <a href="#d9a1fb0235cf400f" class="i field">Collection</a>, <span class="r6 r">idToParse</span>.<span class="i">Segments</span>[1]));
 
            <a href="#4de7ee912d3211a0" class="i property">VaultUri</a> = <b>new</b> <span class="i">Uri</span>(<span class="s">$&quot;</span>{<span class="r6 r">idToParse</span>.<span class="i">Scheme</span>}<span class="s">://</span>{<span class="r6 r">idToParse</span>.<span class="i">Authority</span>}<span class="s">&quot;</span>);
            <a href="#9d4ea696b31155c5" class="i property">Name</a> = <span class="r6 r">idToParse</span>.<span class="i">Segments</span>[2].<span class="i">Trim</span>(<span class="s">&#39;/&#39;</span>);
        }
    }
}
</pre></td></tr></table></div></body></html>

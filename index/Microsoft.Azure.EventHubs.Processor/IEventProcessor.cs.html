<!DOCTYPE html>
<html><head><title>IEventProcessor.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(58);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Microsoft.Azure.EventHubs.Processor/IEventProcessor.cs" target="_top">IEventProcessor.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Microsoft.Azure.EventHubs.Processor" target="_top">..\..\Microsoft.Azure.EventHubs.Processor\src\Microsoft.Azure.EventHubs.Processor.csproj</a> (Microsoft.Azure.EventHubs.Processor)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft. All rights reserved.</span>
<span class="c">// Licensed under the MIT license. See LICENSE file in the project root for full license information.</span>
 
<b>namespace</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">EventHubs</span>.<span class="i n">Processor</span>
{
    <b>using</b> <span class="i">System</span>;
    <b>using</b> <span class="i">System</span>.<span class="i">Collections</span>.<span class="i">Generic</span>;
    <b>using</b> <span class="i">System</span>.<span class="i">Threading</span>.<span class="i">Tasks</span>;
 
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
    <span class="c">///</span><span class="c"> Interface that must be implemented by event processor classes.</span>
    <span class="c">///</span><span class="c"> </span>
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">para</span><span class="c">&gt;</span><span class="c">Any given instance of an event processor class will only process events from one partition</span>
    <span class="c">///</span><span class="c"> of one Event Hub. A PartitionContext is provided with each call to the event processor because</span>
    <span class="c">///</span><span class="c"> some parameters could change, but it will always be the same partition.</span><span class="c">&lt;/</span><span class="c">para</span><span class="c">&gt;</span>
    <span class="c">///</span><span class="c"> </span>
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">para</span><span class="c">&gt;</span><span class="c">Although EventProcessorHost is multithreaded, calls to a given instance of an event processor</span>
    <span class="c">///</span><span class="c"> class are serialized, except for OnError(). OnOpen() is called first, then OnEvents() will be called zero or more</span>
    <span class="c">///</span><span class="c"> times. When the event processor needs to be shut down, whether because there was a failure</span>
    <span class="c">///</span><span class="c"> somewhere, or the lease for the partition has been lost, or because the entire processor host</span>
    <span class="c">///</span><span class="c"> is being shut down, OnClose() is called after the last OnEvents() call returns.</span><span class="c">&lt;/</span><span class="c">para</span><span class="c">&gt;</span>
    <span class="c">///</span><span class="c"> </span>
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">para</span><span class="c">&gt;</span><span class="c">OnError() could be called while OnEvents() or OnClose() is executing. No synchronization is attempted</span>
    <span class="c">///</span><span class="c"> in order to avoid possibly deadlocking.</span><span class="c">&lt;/</span><span class="c">para</span><span class="c">&gt;</span>
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
    <b>public interface</b> <a id="7062f369be53b4b4" href="R/7062f369be53b4b4.html" target="n" data-glyph="48,0" class="t t">IEventProcessor</a>
    {
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Called by processor host to initialize the event processor.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r0 r">context</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Information about the partition that this event processor will process events from.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="i">Task</span> <a id="95e6bbeef64df8f8" href="R/95e6bbeef64df8f8.html" target="n" data-glyph="72,1" class="i method">OpenAsync</a>(<a href="PartitionContext.cs.html#c380694dc3e40146" class="t t">PartitionContext</a> <span id="r0 rd" class="r0 r">context</span>);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Called by processor host to indicate that the event processor is being stopped.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r1 r">context</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Information about the partition.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r2 r">reason</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Reason why the event processor is being stopped.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="i">Task</span> <a id="336aa5fc45947438" href="R/336aa5fc45947438.html" target="n" data-glyph="72,1" class="i method">CloseAsync</a>(<a href="PartitionContext.cs.html#c380694dc3e40146" class="t t">PartitionContext</a> <span id="r1 rd" class="r1 r">context</span>, <a href="CloseReason.cs.html#b558f2f6b81c2c26" class="t t">CloseReason</a> <span id="r2 rd" class="r2 r">reason</span>);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Called by the processor host when a batch of events has arrived.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">para</span><span class="c">&gt;</span><span class="c">This is where the real work of the event processor is done.</span><span class="c">&lt;/</span><span class="c">para</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r3 r">context</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Information about the partition.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r4 r">messages</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The events to be processed.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="i">Task</span> <a id="8a73bf81f4fe6475" href="R/8a73bf81f4fe6475.html" target="n" data-glyph="72,1" class="i method">ProcessEventsAsync</a>(<a href="PartitionContext.cs.html#c380694dc3e40146" class="t t">PartitionContext</a> <span id="r3 rd" class="r3 r">context</span>, <span class="i">IEnumerable</span>&lt;<a href="/Microsoft.Azure.EventHubs/A.html#f56ed6e805f7061b" class="t t">EventData</a>&gt; <span id="r4 rd" class="r4 r">messages</span>);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Called when the underlying client experiences an error while receiving. EventProcessorHost will take</span>
        <span class="c">///</span><span class="c"> care of recovering from the error and continuing to pump messages, so no action is required from</span>
        <span class="c">///</span><span class="c"> your code. This method is provided for informational purposes.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r5 r">context</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Information about the partition.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r6 r">error</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The error that occured.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="i">Task</span> <a id="e5a6eca3b9bcd118" href="R/e5a6eca3b9bcd118.html" target="n" data-glyph="72,1" class="i method">ProcessErrorAsync</a>(<a href="PartitionContext.cs.html#c380694dc3e40146" class="t t">PartitionContext</a> <span id="r5 rd" class="r5 r">context</span>, <span class="i">Exception</span> <span id="r6 rd" class="r6 r">error</span>);
    }
}</pre></td></tr></table></div></body></html>

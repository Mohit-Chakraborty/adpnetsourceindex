<!DOCTYPE html>
<html><head><title>IotHubServiceClient.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(176);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Azure.IoT.Hub.Service/IotHubServiceClient.cs" target="_top">IotHubServiceClient.cs</a><br/></td><td><a class="blueLink" href="https://github.com/Azure/azure-sdk-for-net/tree/main/sdk/iot/Azure.IoT.Hub.Service/src/IotHubServiceClient.cs" target="_blank">View on GitHub</a></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Azure.IoT.Hub.Service" target="_top">Azure.IoT.Hub.Service.csproj</a> (Azure.IoT.Hub.Service)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License.</span>
 
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Core</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Core</span>.<span class="i n">Pipeline</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">IoT</span>.<span class="i n">Hub</span>.<span class="i n">Service</span>.<span class="i n">Authentication</span>;
 
<b>namespace</b> <span class="i n">Azure</span>.<span class="i n">IoT</span>.<span class="i n">Hub</span>.<span class="i n">Service</span>
{
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
    <span class="c">///</span><span class="c"> The IoT Hub Service Client.</span>
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
    <b>public class</b> <a id="ecc564323401762c" href="R/ecc564323401762c.html" target="n" data-glyph="0,0" class="t t">IotHubServiceClient</a>
    {
        <b>private readonly</b> <a href="/Azure.Core/A.html#ce2f2fae396f36c5" class="t t">HttpPipeline</a> <a id="db68d996a0b24ae0" href="R/db68d996a0b24ae0.html" target="n" data-glyph="46,1" class="i field">_httpPipeline</a>;
        <b>private readonly</b> <a href="Shared/Azure.Core/ClientDiagnostics.cs.html#60221cb69e1f903a" class="t t">ClientDiagnostics</a> <a id="1e46095ffd7c83f4" href="R/1e46095ffd7c83f4.html" target="n" data-glyph="46,1" class="i field">_clientDiagnostics</a>;
 
        <b>private readonly</b> <a href="Generated/DevicesRestClient.cs.html#c01224fa0070a2fd" class="t t">DevicesRestClient</a> <a id="595930699979f5ca" href="R/595930699979f5ca.html" target="n" data-glyph="46,1" class="i field">_devicesRestClient</a>;
        <b>private readonly</b> <a href="Generated/ModulesRestClient.cs.html#570dd25d948fa8f6" class="t t">ModulesRestClient</a> <a id="5eef3321caf8fa6f" href="R/5eef3321caf8fa6f.html" target="n" data-glyph="46,1" class="i field">_modulesRestClient</a>;
        <b>private readonly</b> <a href="Generated/QueryRestClient.cs.html#d48e081fe9344710" class="t t">QueryRestClient</a> <a id="7e73a010092df284" href="R/7e73a010092df284.html" target="n" data-glyph="46,1" class="i field">_queryRestClient</a>;
        <b>private readonly</b> <a href="Generated/StatisticsRestClient.cs.html#5d8126a5bdc34d19" class="t t">StatisticsRestClient</a> <a id="0d43a5e25709594f" href="R/0d43a5e25709594f.html" target="n" data-glyph="46,1" class="i field">_statisticsRestClient</a>;
        <b>private readonly</b> <a href="Generated/ConfigurationRestClient.cs.html#c45c344d0022c679" class="t t">ConfigurationRestClient</a> <a id="cdc8b26f30766405" href="R/cdc8b26f30766405.html" target="n" data-glyph="46,1" class="i field">_configurationRestClient</a>;
        <b>private readonly</b> <a href="P/640f8fb113534dad.html#640f8fb113534dad" class="t t">JobsRestClient</a> <a id="ac1257d4bc88d2e2" href="R/ac1257d4bc88d2e2.html" target="n" data-glyph="46,1" class="i field">_jobsRestClient</a>;
        <b>private readonly</b> <a href="Generated/BulkRegistryRestClient.cs.html#531ca180b521c5c6" class="t t">BulkRegistryRestClient</a> <a id="c8a97ffc97f0849a" href="R/c8a97ffc97f0849a.html" target="n" data-glyph="46,1" class="i field">_bulkRegistryRestClient</a>;
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Client to perform actions on a device.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public virtual</b> <a href="DevicesClient.cs.html#6c1bc851ae7077ce" class="t t">DevicesClient</a> <a id="f236258ceb45a1fe" href="R/f236258ceb45a1fe.html" target="n" data-glyph="102,1" class="i property">Devices</a> { <b>get</b>; <b>private set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Client to perform actions on a module.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public virtual</b> <a href="ModulesClient.cs.html#f97567e42fea66a5" class="t t">ModulesClient</a> <a id="a495b1c7125c0fef" href="R/a495b1c7125c0fef.html" target="n" data-glyph="102,1" class="i property">Modules</a> { <b>get</b>; <b>private set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Client to get statistics.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public virtual</b> <a href="StatisticsClient.cs.html#816d56c9fdb904a7" class="t t">StatisticsClient</a> <a id="c92647c00261364e" href="R/c92647c00261364e.html" target="n" data-glyph="102,1" class="i property">Statistics</a> { <b>get</b>; <b>private set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Client for automatic device management.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public virtual</b> <a href="ConfigurationsClient.cs.html#324f965a2f03dc93" class="t t">ConfigurationsClient</a> <a id="3c13b6ff7807bb79" href="R/3c13b6ff7807bb79.html" target="n" data-glyph="102,1" class="i property">Configurations</a> { <b>get</b>; <b>private set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> place holder for Messages.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public virtual</b> <a href="CloudToDeviceMessagesClient.cs.html#ace342a135b00757" class="t t">CloudToDeviceMessagesClient</a> <a id="33cc82940b613b81" href="R/33cc82940b613b81.html" target="n" data-glyph="102,1" class="i property">Messages</a> { <b>get</b>; <b>private set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> place holder for Files.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public virtual</b> <a href="FilesClient.cs.html#f90037152cb2ec22" class="t t">FilesClient</a> <a id="7b4d52177cc8cdd3" href="R/7b4d52177cc8cdd3.html" target="n" data-glyph="102,1" class="i property">Files</a> { <b>get</b>; <b>private set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Client to start jobs.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public virtual</b> <a href="JobsClient.cs.html#acbc622067552b96" class="t t">JobsClient</a> <a id="6630c79d13e704c2" href="R/6630c79d13e704c2.html" target="n" data-glyph="102,1" class="i property">Jobs</a> { <b>get</b>; <b>private set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Client to perform queries on twins.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public virtual</b> <a href="QueryClient.cs.html#580335a6b88b5c90" class="t t">QueryClient</a> <a id="6d88a0d9862c5010" href="R/6d88a0d9862c5010.html" target="n" data-glyph="102,1" class="i property">Query</a> { <b>get</b>; <b>private set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Initializes a new instance of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#ecc564323401762c" class="t t">IotHubServiceClient</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> class.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>protected</b> <a id="d6e3aece3ee57bb0" href="R/../../0000000000.html" target="n" data-glyph="75,1" class="t constructor">IotHubServiceClient</a>()
        {
            <span class="c">// This constructor only exists for mocking purposes in unit tests. It should not be used otherwise.</span>
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Initializes a new instance of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#ecc564323401762c" class="t t">IotHubServiceClient</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> class.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r0 r">connectionString</span><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The IoT Hub connection string, with either &quot;iothubowner&quot;, &quot;service&quot;, &quot;registryRead&quot; or &quot;registryReadWrite&quot; policy, as applicable.</span>
        <span class="c">///</span><span class="c"> For more information, see </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">href</span><span class="c">=</span><span class="c">&quot;</span><span class="c">https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-devguide-security#access-control-and-permissions</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">seealso</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#80f3f1c74772ad48" class="t constructor">IotHubServiceClient</a>(<a href="@1@netstandard/A.html#991565dd25f47c90" class="t t">Uri</a>, <a href="Authentication/IotHubSasCredential.cs.html#9059758863ff02f0" class="t t">IotHubSasCredential</a>, <a href="IotHubServiceClientOptions.cs.html#d046da757fae1091" class="t t">IotHubServiceClientOptions</a>)<span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> This other constructor provides an opportunity to override default behavior, including setting the sas token time to live, specifying the service API version,</span>
        <span class="c">///</span><span class="c"> overriding </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">href</span><span class="c">=</span><span class="c">&quot;</span><span class="c">https://github.com/Azure/azure-sdk-for-net/blob/main/sdk/core/Azure.Core/samples/Pipeline.md</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">transport</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span><span class="c">,</span>
        <span class="c">///</span><span class="c"> enabling </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">href</span><span class="c">=</span><span class="c">&quot;</span><span class="c">https://github.com/Azure/azure-sdk-for-net/blob/main/sdk/core/Azure.Core/samples/Diagnostics.md</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">diagnostics</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span><span class="c">,</span>
        <span class="c">///</span><span class="c"> and controlling </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">href</span><span class="c">=</span><span class="c">&quot;</span><span class="c">https://github.com/Azure/azure-sdk-for-net/blob/main/sdk/core/Azure.Core/samples/Configuration.md</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">retry strategy</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span><span class="c">.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">seealso</span><span class="c">&gt;</span>
        <b>public</b> <a id="25e1adc7d89e9fe8" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="t constructor">IotHubServiceClient</a>(<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r0 rd" class="r0 r">connectionString</span>)
            : <a href="#a78a07b36b2746f9" class="k">this</a>(<span class="r0 r">connectionString</span>, <b>new</b> <a href="IotHubServiceClientOptions.cs.html#58dc498063bd33f3" class="t constructor">IotHubServiceClientOptions</a>())
        {
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Initializes a new instance of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#ecc564323401762c" class="t t">IotHubServiceClient</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> class.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r1 r">connectionString</span><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The IoT Hub connection string, with either &quot;iothubowner&quot;, &quot;service&quot;, &quot;registryRead&quot; or &quot;registryReadWrite&quot; policy, as applicable.</span>
        <span class="c">///</span><span class="c"> For more information, see </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">href</span><span class="c">=</span><span class="c">&quot;</span><span class="c">https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-devguide-security#access-control-and-permissions</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r2 r">options</span><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Options that allow configuration of requests sent to the IoT Hub service.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">seealso</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#80f3f1c74772ad48" class="t constructor">IotHubServiceClient</a>(<a href="@1@netstandard/A.html#991565dd25f47c90" class="t t">Uri</a>, <a href="Authentication/IotHubSasCredential.cs.html#9059758863ff02f0" class="t t">IotHubSasCredential</a>, <a href="IotHubServiceClientOptions.cs.html#d046da757fae1091" class="t t">IotHubServiceClientOptions</a>)<span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> This other constructor provides an opportunity to override default behavior, including setting the sas token time to live, specifying the service API version,</span>
        <span class="c">///</span><span class="c"> overriding </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">href</span><span class="c">=</span><span class="c">&quot;</span><span class="c">https://github.com/Azure/azure-sdk-for-net/blob/main/sdk/core/Azure.Core/samples/Pipeline.md</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">transport</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span><span class="c">,</span>
        <span class="c">///</span><span class="c"> enabling </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">href</span><span class="c">=</span><span class="c">&quot;</span><span class="c">https://github.com/Azure/azure-sdk-for-net/blob/main/sdk/core/Azure.Core/samples/Diagnostics.md</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">diagnostics</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span><span class="c">,</span>
        <span class="c">///</span><span class="c"> and controlling </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">href</span><span class="c">=</span><span class="c">&quot;</span><span class="c">https://github.com/Azure/azure-sdk-for-net/blob/main/sdk/core/Azure.Core/samples/Configuration.md</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">retry strategy</span><span class="c">&lt;/</span><span class="c">see</span><span class="c">&gt;</span><span class="c">.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">seealso</span><span class="c">&gt;</span>
        <b>public</b> <a id="a78a07b36b2746f9" href="R/a78a07b36b2746f9.html" target="n" data-glyph="72,1" class="t constructor">IotHubServiceClient</a>(<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1 rd" class="r1 r">connectionString</span>, <a href="IotHubServiceClientOptions.cs.html#d046da757fae1091" class="t t">IotHubServiceClientOptions</a> <span id="r2 rd" class="r2 r">options</span>)
            : <a href="#fbe506c50474f9e3" class="k">this</a>(<b>new</b> <a href="Authentication/IotHubSasCredential.cs.html#15b771881d31a332" class="t constructor">IotHubSasCredential</a>(<span class="r1 r">connectionString</span>), <span class="r2 r">options</span>)
        {
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Initializes a new instance of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#ecc564323401762c" class="t t">IotHubServiceClient</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> class.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r3 r">endpoint</span><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The IoT Hub service instance endpoint to connect to.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r4 r">credential</span><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The IoT Hub credentials, to be used for authenticating against an IoT Hub instance via SAS tokens.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r5 r">options</span><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> (optional) Options that allow configuration of requests sent to the IoT Hub service.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span> <span class="c">snippet</span><span class="c">=</span><span class="c">&quot;</span><span class="c">Snippet:IotHubServiceClientInitializeWithIotHubSasCredential</span><span class="c">&quot;</span> <span class="c">language</span><span class="c">=</span><span class="c">&quot;</span><span class="c">csharp</span><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> // Create an IotHubSasCredential type to use sas tokens to authenticate against your IoT Hub instance.</span>
        <span class="c">///</span><span class="c"> // The default lifespan of the sas token is 30 minutes, and it is set to be renewed when at 15% or less of its lifespan.</span>
        <span class="c">///</span><span class="c"> var credential = new IotHubSasCredential(options.IotHubSharedAccessPolicy, options.IotHubSharedAccessKey);</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> IotHubServiceClient hubClient = new IotHubServiceClient(options.Endpoint, credential);</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
        <b>public</b> <a id="80f3f1c74772ad48" href="R/80f3f1c74772ad48.html" target="n" data-glyph="72,1" class="t constructor">IotHubServiceClient</a>(<a href="@1@netstandard/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r3 rd" class="r3 r">endpoint</span>, <a href="Authentication/IotHubSasCredential.cs.html#9059758863ff02f0" class="t t">IotHubSasCredential</a> <span id="r4 rd" class="r4 r">credential</span>, <a href="IotHubServiceClientOptions.cs.html#d046da757fae1091" class="t t">IotHubServiceClientOptions</a> <span id="r5 rd" class="r5 r">options</span> = <b>default</b>)
            : <a href="#fbe506c50474f9e3" class="k">this</a>(<a href="#9c670ee5e177d8da" class="i method">SetEndpointToIotHubSasCredential</a>(<span class="r3 r">endpoint</span>, <span class="r4 r">credential</span>), <span class="r5 r">options</span>)
        {
        }
 
        <b>private</b> <a id="fbe506c50474f9e3" href="R/fbe506c50474f9e3.html" target="n" data-glyph="76,1" class="t constructor">IotHubServiceClient</a>(<a href="Authentication/IotHubSasCredential.cs.html#9059758863ff02f0" class="t t">IotHubSasCredential</a> <span id="r6 rd" class="r6 r">credential</span>, <a href="IotHubServiceClientOptions.cs.html#d046da757fae1091" class="t t">IotHubServiceClientOptions</a> <span id="r7 rd" class="r7 r">options</span>)
        {
            <span class="r7 r">options</span> ??= <b>new</b> <a href="IotHubServiceClientOptions.cs.html#58dc498063bd33f3" class="t constructor">IotHubServiceClientOptions</a>();
            <a href="#1e46095ffd7c83f4" class="i field">_clientDiagnostics</a> = <b>new</b> <a href="Shared/Azure.Core/ClientDiagnostics.cs.html#4399d236463c3dac" class="t constructor">ClientDiagnostics</a>(<span class="r7 r">options</span>);
 
            <span class="r7 r">options</span>.<a href="/Azure.Core/A.html#9f0a7ff3a06072c8" class="i method">AddPolicy</a>(<b>new</b> <a href="Authentication/SasTokenAuthenticationPolicy.cs.html#93e6ba7db3659079" class="t constructor">SasTokenAuthenticationPolicy</a>(<span class="r6 r">credential</span>), <a href="/Azure.Core/A.html#94ec96b92b26ad43" class="t t">HttpPipelinePosition</a>.<a href="/Azure.Core/A.html#e88e4f922d2a2ed8" class="i field">PerCall</a>);
            <a href="#db68d996a0b24ae0" class="i field">_httpPipeline</a> = <a href="/Azure.Core/A.html#caf101e059b27790" class="t t">HttpPipelineBuilder</a>.<a href="/Azure.Core/A.html#e4c688f935b020a5" class="i method">Build</a>(<span class="r7 r">options</span>);
 
            <a href="#595930699979f5ca" class="i field">_devicesRestClient</a> = <b>new</b> <a href="Generated/DevicesRestClient.cs.html#920cf3c4d9f6daad" class="t constructor">DevicesRestClient</a>(<a href="#1e46095ffd7c83f4" class="i field">_clientDiagnostics</a>, <a href="#db68d996a0b24ae0" class="i field">_httpPipeline</a>, <span class="r6 r">credential</span>.<a href="Authentication/IotHubSasCredential.cs.html#669648f924b7366e" class="i property">Endpoint</a>, <span class="r7 r">options</span>.<a href="IotHubServiceClientOptions.cs.html#e7e0458e99b83931" class="i method">GetVersionString</a>());
            <a href="#5eef3321caf8fa6f" class="i field">_modulesRestClient</a> = <b>new</b> <a href="Generated/ModulesRestClient.cs.html#b8392a45241b2795" class="t constructor">ModulesRestClient</a>(<a href="#1e46095ffd7c83f4" class="i field">_clientDiagnostics</a>, <a href="#db68d996a0b24ae0" class="i field">_httpPipeline</a>, <span class="r6 r">credential</span>.<a href="Authentication/IotHubSasCredential.cs.html#669648f924b7366e" class="i property">Endpoint</a>, <span class="r7 r">options</span>.<a href="IotHubServiceClientOptions.cs.html#e7e0458e99b83931" class="i method">GetVersionString</a>());
            <a href="#7e73a010092df284" class="i field">_queryRestClient</a> = <b>new</b> <a href="Generated/QueryRestClient.cs.html#a334df3064b75ff5" class="t constructor">QueryRestClient</a>(<a href="#1e46095ffd7c83f4" class="i field">_clientDiagnostics</a>, <a href="#db68d996a0b24ae0" class="i field">_httpPipeline</a>, <span class="r6 r">credential</span>.<a href="Authentication/IotHubSasCredential.cs.html#669648f924b7366e" class="i property">Endpoint</a>, <span class="r7 r">options</span>.<a href="IotHubServiceClientOptions.cs.html#e7e0458e99b83931" class="i method">GetVersionString</a>());
            <a href="#0d43a5e25709594f" class="i field">_statisticsRestClient</a> = <b>new</b> <a href="Generated/StatisticsRestClient.cs.html#cdfd6fa8d821e870" class="t constructor">StatisticsRestClient</a>(<a href="#1e46095ffd7c83f4" class="i field">_clientDiagnostics</a>, <a href="#db68d996a0b24ae0" class="i field">_httpPipeline</a>, <span class="r6 r">credential</span>.<a href="Authentication/IotHubSasCredential.cs.html#669648f924b7366e" class="i property">Endpoint</a>, <span class="r7 r">options</span>.<a href="IotHubServiceClientOptions.cs.html#e7e0458e99b83931" class="i method">GetVersionString</a>());
            <a href="#cdc8b26f30766405" class="i field">_configurationRestClient</a> = <b>new</b> <a href="Generated/ConfigurationRestClient.cs.html#9cf48574bcd93ae9" class="t constructor">ConfigurationRestClient</a>(<a href="#1e46095ffd7c83f4" class="i field">_clientDiagnostics</a>, <a href="#db68d996a0b24ae0" class="i field">_httpPipeline</a>, <span class="r6 r">credential</span>.<a href="Authentication/IotHubSasCredential.cs.html#669648f924b7366e" class="i property">Endpoint</a>, <span class="r7 r">options</span>.<a href="IotHubServiceClientOptions.cs.html#e7e0458e99b83931" class="i method">GetVersionString</a>());
            <a href="#ac1257d4bc88d2e2" class="i field">_jobsRestClient</a> = <b>new</b> <a href="Generated/JobsRestClient.cs.html#5397edfe85dfb0d8" class="t constructor">JobsRestClient</a>(<a href="#1e46095ffd7c83f4" class="i field">_clientDiagnostics</a>, <a href="#db68d996a0b24ae0" class="i field">_httpPipeline</a>, <span class="r6 r">credential</span>.<a href="Authentication/IotHubSasCredential.cs.html#669648f924b7366e" class="i property">Endpoint</a>, <span class="r7 r">options</span>.<a href="IotHubServiceClientOptions.cs.html#e7e0458e99b83931" class="i method">GetVersionString</a>());
            <a href="#c8a97ffc97f0849a" class="i field">_bulkRegistryRestClient</a> = <b>new</b> <a href="Generated/BulkRegistryRestClient.cs.html#347a09addfc48527" class="t constructor">BulkRegistryRestClient</a>(<a href="#1e46095ffd7c83f4" class="i field">_clientDiagnostics</a>, <a href="#db68d996a0b24ae0" class="i field">_httpPipeline</a>, <span class="r6 r">credential</span>.<a href="Authentication/IotHubSasCredential.cs.html#669648f924b7366e" class="i property">Endpoint</a>, <span class="r7 r">options</span>.<a href="IotHubServiceClientOptions.cs.html#e7e0458e99b83931" class="i method">GetVersionString</a>());
 
            <span class="c">// Note that the devices and modules subclient take a reference to the Query convenience layer client. This</span>
            <span class="c">// is because they each expose a helper function that uses the query client for listing twins. By passing in</span>
            <span class="c">// the convenience layer query client rather than the protocol layer query client, we minimize rewriting the</span>
            <span class="c">// same pagination logic that now exists only in the query convenience layer client.</span>
            <a href="#6d88a0d9862c5010" class="i property">Query</a> = <b>new</b> <a href="QueryClient.cs.html#90a3dd04701a1d4e" class="t constructor">QueryClient</a>(<a href="#7e73a010092df284" class="i field">_queryRestClient</a>);
            <a href="#f236258ceb45a1fe" class="i property">Devices</a> = <b>new</b> <a href="DevicesClient.cs.html#fe2109bd4095bef6" class="t constructor">DevicesClient</a>(<a href="#595930699979f5ca" class="i field">_devicesRestClient</a>, <a href="#6d88a0d9862c5010" class="i property">Query</a>, <a href="#c8a97ffc97f0849a" class="i field">_bulkRegistryRestClient</a>);
            <a href="#a495b1c7125c0fef" class="i property">Modules</a> = <b>new</b> <a href="ModulesClient.cs.html#91e6fc7582f8fed8" class="t constructor">ModulesClient</a>(<a href="#595930699979f5ca" class="i field">_devicesRestClient</a>, <a href="#5eef3321caf8fa6f" class="i field">_modulesRestClient</a>, <a href="#6d88a0d9862c5010" class="i property">Query</a>, <a href="#c8a97ffc97f0849a" class="i field">_bulkRegistryRestClient</a>);
            <a href="#c92647c00261364e" class="i property">Statistics</a> = <b>new</b> <a href="StatisticsClient.cs.html#f74e620081c65e74" class="t constructor">StatisticsClient</a>(<a href="#0d43a5e25709594f" class="i field">_statisticsRestClient</a>);
            <a href="#3c13b6ff7807bb79" class="i property">Configurations</a> = <b>new</b> <a href="ConfigurationsClient.cs.html#69047c4c7d16d9b5" class="t constructor">ConfigurationsClient</a>(<a href="#cdc8b26f30766405" class="i field">_configurationRestClient</a>);
 
            <a href="#33cc82940b613b81" class="i property">Messages</a> = <b>new</b> <a href="CloudToDeviceMessagesClient.cs.html#69beaf8bbc87482d" class="t constructor">CloudToDeviceMessagesClient</a>();
            <a href="#7b4d52177cc8cdd3" class="i property">Files</a> = <b>new</b> <a href="FilesClient.cs.html#14e5e976686741f0" class="t constructor">FilesClient</a>();
            <a href="#6630c79d13e704c2" class="i property">Jobs</a> = <b>new</b> <a href="JobsClient.cs.html#8070861e03e35103" class="t constructor">JobsClient</a>(<a href="#ac1257d4bc88d2e2" class="i field">_jobsRestClient</a>);
        }
 
        <b>private static</b> <a href="Authentication/IotHubSasCredential.cs.html#9059758863ff02f0" class="t t">IotHubSasCredential</a> <a id="9c670ee5e177d8da" href="R/9c670ee5e177d8da.html" target="n" data-glyph="76,1" class="i method">SetEndpointToIotHubSasCredential</a>(<a href="@1@netstandard/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r8 rd" class="r8 r">endpoint</span>, <a href="Authentication/IotHubSasCredential.cs.html#9059758863ff02f0" class="t t">IotHubSasCredential</a> <span id="r9 rd" class="r9 r">credential</span>)
        {
            <span class="r9 r">credential</span>.<a href="Authentication/IotHubSasCredential.cs.html#669648f924b7366e" class="i property">Endpoint</a> = <span class="r8 r">endpoint</span>;
            <b>return</b> <span class="r9 r">credential</span>;
        }
    }
}
</pre></td></tr></table></div></body></html>

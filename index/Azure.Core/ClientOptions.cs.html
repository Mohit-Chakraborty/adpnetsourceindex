<!DOCTYPE html>
<html><head><title>ClientOptions.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(111);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Azure.Core/ClientOptions.cs" target="_top">ClientOptions.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Azure.Core" target="_top">Azure.Core.csproj</a> (Azure.Core)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License.</span>
 
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">ComponentModel</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Core</span>.<span class="i n">Pipeline</span>;
 
<b>namespace</b> <span class="i n">Azure</span>.<span class="i n">Core</span>
{
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
    <span class="c">///</span><span class="c"> Base type for all client option types, exposes various common client options like </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#474c2d6954521438" class="i property">Diagnostics</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">, </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#4e89db28e0273a49" class="i property">Retry</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">, </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#d1bdf798bcd1c508" class="i property">Transport</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">.</span>
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
    <b>public abstract class</b> <a id="8780afb4f9ef31a0" href="R/8780afb4f9ef31a0.html" target="n" data-glyph="0,0" class="t t">ClientOptions</a>
    {
        <b>private</b> <a href="Pipeline/HttpPipelineTransport.cs.html#744d0090cb2d4e15" class="t t">HttpPipelineTransport</a> <a id="718c289fb382e104" href="R/718c289fb382e104.html" target="n" data-glyph="46,1" class="i field">_transport</a> = <a href="#1048d268e2d956b9" class="i method">GetDefaultTransport</a>();
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Creates a new instance of </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#8780afb4f9ef31a0" class="t t">ClientOptions</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>protected</b> <a id="d546ffb7aa4730e5" href="R/../../0000000000.html" target="n" data-glyph="75,1" class="t constructor">ClientOptions</a>()
        {
            <a href="#4e89db28e0273a49" class="i property">Retry</a> = <b>new</b> <a href="RetryOptions.cs.html#cdea16fa8f98370d" class="t constructor">RetryOptions</a>();
            <a href="#474c2d6954521438" class="i property">Diagnostics</a> = <b>new</b> <a href="DiagnosticsOptions.cs.html#f658944326abe939" class="t constructor">DiagnosticsOptions</a>();
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="Pipeline/HttpPipelineTransport.cs.html#744d0090cb2d4e15" class="t t">HttpPipelineTransport</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> to be used for this client. Defaults to an instance of </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="Pipeline/HttpClientTransport.cs.html#546178958a509374" class="t t">HttpClientTransport</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public</b> <a href="Pipeline/HttpPipelineTransport.cs.html#744d0090cb2d4e15" class="t t">HttpPipelineTransport</a> <a id="d1bdf798bcd1c508" href="R/d1bdf798bcd1c508.html" target="n" data-glyph="102,1" class="i property">Transport</a>
        {
            <b>get</b> =&gt; <a href="#718c289fb382e104" class="i field">_transport</a>;
            <b>set</b> =&gt; <a href="#718c289fb382e104" class="i field">_transport</a> = <b>value</b> ?? <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#8314938388254d5a" class="t constructor">ArgumentNullException</a>(<b>nameof</b>(<b>value</b>));
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets the client diagnostic options.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public</b> <a href="DiagnosticsOptions.cs.html#c74a7bd2e077c689" class="t t">DiagnosticsOptions</a> <a id="474c2d6954521438" href="R/474c2d6954521438.html" target="n" data-glyph="102,1" class="i property">Diagnostics</a> { <b>get</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets the client retry options.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public</b> <a href="RetryOptions.cs.html#63708e66e4cf81d0" class="t t">RetryOptions</a> <a id="4e89db28e0273a49" href="R/4e89db28e0273a49.html" target="n" data-glyph="102,1" class="i property">Retry</a> { <b>get</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Adds an </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="Pipeline/HttpPipeline.cs.html#ce2f2fae396f36c5" class="t t">HttpPipeline</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> policy into the client pipeline. The position of policy in the pipeline is controlled by </span><span class="c">&lt;</span><span class="c">paramref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r0 r">position</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> parameter.</span>
        <span class="c">///</span><span class="c"> If you want the policy to execute once per client request use </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="HttpPipelinePosition.cs.html#94ec96b92b26ad43" class="t t">HttpPipelinePosition</a>.<a href="HttpPipelinePosition.cs.html#e88e4f922d2a2ed8" class="i field">PerCall</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> otherwise use </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="HttpPipelinePosition.cs.html#94ec96b92b26ad43" class="t t">HttpPipelinePosition</a>.<a href="HttpPipelinePosition.cs.html#752e7dbcca997a74" class="i field">PerRetry</a><span class="c">&quot;</span><span class="c">/&gt;</span>
        <span class="c">///</span><span class="c"> to run the policy for every retry. Note that the same instance of </span><span class="c">&lt;</span><span class="c">paramref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r1 r">policy</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> would be added to all pipelines of client constructed using this </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#8780afb4f9ef31a0" class="t t">ClientOptions</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> object.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r1 r">policy</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="Pipeline/HttpPipelinePolicy.cs.html#afce2b8855e35f1f" class="t t">HttpPipelinePolicy</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> instance to be added to the pipeline.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r0 r">position</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The position of policy in the pipeline.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <b>public void</b> <a id="9f0a7ff3a06072c8" href="R/9f0a7ff3a06072c8.html" target="n" data-glyph="72,1" class="i method">AddPolicy</a>(<a href="Pipeline/HttpPipelinePolicy.cs.html#afce2b8855e35f1f" class="t t">HttpPipelinePolicy</a> <span id="r1 rd" class="r1 r">policy</span>, <a href="HttpPipelinePosition.cs.html#94ec96b92b26ad43" class="t t">HttpPipelinePosition</a> <span id="r0 rd" class="r0 r">position</span>)
        {
            <b>switch</b> (<span class="r0 r">position</span>)
            {
                <b>case</b> <a href="HttpPipelinePosition.cs.html#94ec96b92b26ad43" class="t t">HttpPipelinePosition</a>.<a href="HttpPipelinePosition.cs.html#e88e4f922d2a2ed8" class="i field">PerCall</a>:
                    <a href="#43662c0d9cda0dce" class="i property">PerCallPolicies</a>.<a href="@1@netstandard/A.html#a9319db8c62ae453" class="i method">Add</a>(<span class="r1 r">policy</span>);
                    <b>break</b>;
                <b>case</b> <a href="HttpPipelinePosition.cs.html#94ec96b92b26ad43" class="t t">HttpPipelinePosition</a>.<a href="HttpPipelinePosition.cs.html#752e7dbcca997a74" class="i field">PerRetry</a>:
                    <a href="#e5fc1349ced14240" class="i property">PerRetryPolicies</a>.<a href="@1@netstandard/A.html#a9319db8c62ae453" class="i method">Add</a>(<span class="r1 r">policy</span>);
                    <b>break</b>;
                <b>default</b>:
                    <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#c524af42f1a5665e" class="t constructor">ArgumentOutOfRangeException</a>(<b>nameof</b>(<span class="r0 r">position</span>), <span class="r0 r">position</span>, <b>null</b>);
            }
        }
 
        <b>internal</b> <a href="@1@netstandard/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<a href="Pipeline/HttpPipelinePolicy.cs.html#afce2b8855e35f1f" class="t t">HttpPipelinePolicy</a>&gt; <a id="43662c0d9cda0dce" href="R/43662c0d9cda0dce.html" target="n" data-glyph="104,1" class="i property">PerCallPolicies</a> { <b>get</b>; } = <b>new</b> <a href="@1@netstandard/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<a href="Pipeline/HttpPipelinePolicy.cs.html#afce2b8855e35f1f" class="t t">HttpPipelinePolicy</a>&gt;();
 
        <b>internal</b> <a href="@1@netstandard/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<a href="Pipeline/HttpPipelinePolicy.cs.html#afce2b8855e35f1f" class="t t">HttpPipelinePolicy</a>&gt; <a id="e5fc1349ced14240" href="R/e5fc1349ced14240.html" target="n" data-glyph="104,1" class="i property">PerRetryPolicies</a> { <b>get</b>; } = <b>new</b> <a href="@1@netstandard/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<a href="Pipeline/HttpPipelinePolicy.cs.html#afce2b8855e35f1f" class="t t">HttpPipelinePolicy</a>&gt;();
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">inheritdoc</span> <span class="c">/&gt;</span>
        [<a href="@1@netstandard/A.html#ab67c52c634f618d" class="t constructor">EditorBrowsable</a>(<a href="@1@netstandard/A.html#1a60f7b04af02e88" class="t t">EditorBrowsableState</a>.<a href="@1@netstandard/A.html#043ce0a55050bfc5" class="i field">Never</a>)]
        <b>public override bool</b> <a id="430f588cdcd8aa8d" href="R/430f588cdcd8aa8d.html" target="n" data-glyph="72,1" class="i method">Equals</a>(<b>object</b>? <span id="r2 rd" class="r2 r">obj</span>) =&gt; <a href="@1@netstandard/A.html#d9262ceecc1719ab" class="k">base</a>.<a href="@1@netstandard/A.html#517682d5f6f4f8b4" class="i method">Equals</a>(<span class="r2 r">obj</span>);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">inheritdoc</span> <span class="c">/&gt;</span>
        [<a href="@1@netstandard/A.html#ab67c52c634f618d" class="t constructor">EditorBrowsable</a>(<a href="@1@netstandard/A.html#1a60f7b04af02e88" class="t t">EditorBrowsableState</a>.<a href="@1@netstandard/A.html#043ce0a55050bfc5" class="i field">Never</a>)]
        <b>public override int</b> <a id="316ab4e960b49de1" href="R/316ab4e960b49de1.html" target="n" data-glyph="72,1" class="i method">GetHashCode</a>() =&gt; <a href="@1@netstandard/A.html#d9262ceecc1719ab" class="k">base</a>.<a href="@1@netstandard/A.html#4de9cf234d0d8b16" class="i method">GetHashCode</a>();
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">inheritdoc</span> <span class="c">/&gt;</span>
        [<a href="@1@netstandard/A.html#ab67c52c634f618d" class="t constructor">EditorBrowsable</a>(<a href="@1@netstandard/A.html#1a60f7b04af02e88" class="t t">EditorBrowsableState</a>.<a href="@1@netstandard/A.html#043ce0a55050bfc5" class="i field">Never</a>)]
        <b>public override string</b>? <a id="d2d9cf0384b914f2" href="R/d2d9cf0384b914f2.html" target="n" data-glyph="72,1" class="i method">ToString</a>() =&gt; <a href="@1@netstandard/A.html#d9262ceecc1719ab" class="k">base</a>.<a href="@1@netstandard/A.html#ff31a6bf27c58f89" class="i method">ToString</a>();
 
        <b>private static</b> <a href="Pipeline/HttpPipelineTransport.cs.html#744d0090cb2d4e15" class="t t">HttpPipelineTransport</a> <a id="1048d268e2d956b9" href="R/1048d268e2d956b9.html" target="n" data-glyph="76,1" class="i method">GetDefaultTransport</a>()
        {
<span class="k preprocess">#</span><span class="k preprocess">if</span> <span class="i">NETFRAMEWORK</span>
<span class="e">            bool GetSwitchValue(string switchName, string envVariable)
            {
                if (!AppContext.TryGetSwitch(switchName, out bool ret))
                {
                    string? switchValue = Environment.GetEnvironmentVariable(envVariable);
                    if (switchValue != null)
                    {
                        ret = string.Equals(&quot;true&quot;, switchValue, StringComparison.InvariantCultureIgnoreCase) ||
                              switchValue.Equals(&quot;1&quot;, StringComparison.InvariantCultureIgnoreCase);
                    }
                }
 
                return ret;
            }
 
            if (!GetSwitchValue(&quot;Azure.Core.Pipeline.DisableHttpWebRequestTransport&quot;, &quot;AZURE_CORE_DISABLE_HTTPWEBREQUESTTRANSPORT&quot;))
            {
                return HttpWebRequestTransport.Shared;
            }
</span><span class="k preprocess">#</span><span class="k preprocess">endif</span>
            <b>return</b> <a href="Pipeline/HttpClientTransport.cs.html#546178958a509374" class="t t">HttpClientTransport</a>.<a href="Pipeline/HttpClientTransport.cs.html#0044072c58ca9194" class="i field">Shared</a>;
        }
    }
}
</pre></td></tr></table></div></body></html>

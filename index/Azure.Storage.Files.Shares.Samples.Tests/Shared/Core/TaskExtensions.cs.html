<!DOCTYPE html>
<html><head><title>TaskExtensions.cs</title><link rel="stylesheet" href="../../../styles.css"><script src="../../../scripts.js"></script></head>
<body class="cB" onload="i(314);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Azure.Storage.Files.Shares.Samples.Tests/Shared/Core/TaskExtensions.cs" target="_top">Shared\Core\TaskExtensions.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Azure.Storage.Files.Shares.Samples.Tests" target="_top">Azure.Storage.Files.Shares.Samples.Tests.csproj</a> (Azure.Storage.Files.Shares.Samples.Tests)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License.</span>
 
<span class="k preprocess">#</span><span class="k preprocess">nullable</span> <span class="k preprocess">disable</span>
 
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Diagnostics</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Runtime</span>.<span class="i n">CompilerServices</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>.<span class="i n">Tasks</span>;
 
<b>namespace</b> <span class="i n">Azure</span>.<span class="i n">Core</span>.<span class="i n">Pipeline</span>
{
    <b>internal static class</b> <a id="b697c2964116e255" href="../../R/../../0000000000.html" target="n" data-glyph="2,0" class="t t">TaskExtensions</a>
    {
        <b>public static</b> <a href="#f6326224d423b845" class="t t">WithCancellationTaskAwaitable</a> <a id="6a233014df1673ae" href="../../R/../../0000000000.html" target="n" data-glyph="220,1" class="i method">AwaitWithCancellation</a>(<b>this</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <span id="r0 rd" class="r0 r">task</span>, <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r1 rd" class="r1 r">cancellationToken</span>)
            =&gt; <b>new</b> <a href="#3698e28a74b19752" class="t constructor">WithCancellationTaskAwaitable</a>(<span class="r0 r">task</span>, <span class="r1 r">cancellationToken</span>);
 
        <b>public static</b> <a href="#a710ec326f285d3b" class="t t">WithCancellationTaskAwaitable</a>&lt;<span class="r2 r t">T</span>&gt; <a id="4368accee5eff0f0" href="../../R/../../0000000000.html" target="n" data-glyph="220,1" class="i method">AwaitWithCancellation</a>&lt;<span id="r2 rd t" class="r2 r t">T</span>&gt;(<b>this</b> <a href="@0@mscorlib/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<span class="r2 r t">T</span>&gt; <span id="r3 rd" class="r3 r">task</span>, <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r4 rd" class="r4 r">cancellationToken</span>)
            =&gt; <b>new</b> <a href="#af68fc2d93aaf48d" class="t constructor">WithCancellationTaskAwaitable</a>&lt;<span class="r2 r t">T</span>&gt;(<span class="r3 r">task</span>, <span class="r4 r">cancellationToken</span>);
 
        <b>public static</b> <a href="#78572dda1da352a9" class="t t">WithCancellationValueTaskAwaitable</a>&lt;<span class="r5 r t">T</span>&gt; <a id="f1c00e7894be5ad8" href="../../R/../../0000000000.html" target="n" data-glyph="220,1" class="i method">AwaitWithCancellation</a>&lt;<span id="r5 rd t" class="r5 r t">T</span>&gt;(<b>this</b> <span class="t t">ValueTask</span>&lt;<span class="r5 r t">T</span>&gt; <span id="r6 rd" class="r6 r">task</span>, <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r7 rd" class="r7 r">cancellationToken</span>)
            =&gt; <b>new</b> <a href="#f79b481a6336249c" class="t constructor">WithCancellationValueTaskAwaitable</a>&lt;<span class="r5 r t">T</span>&gt;(<span class="r6 r">task</span>, <span class="r7 r">cancellationToken</span>);
 
        <b>public static</b> <span class="r8 r t">T</span> <a id="c5b047e3cbfab399" href="../../R/c5b047e3cbfab399.html" target="n" data-glyph="220,1" class="i method">EnsureCompleted</a>&lt;<span id="r8 rd t" class="r8 r t">T</span>&gt;(<b>this</b> <a href="@0@mscorlib/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<span class="r8 r t">T</span>&gt; <span id="r9 rd" class="r9 r">task</span>)
        {
<span class="k preprocess">#</span><span class="k preprocess">if</span> <span class="i">DEBUG</span>
            <a href="#99ff37a7df15d033" class="i method">VerifyTaskCompleted</a>(<span class="r9 r">task</span>.<a href="@0@mscorlib/A.html#8d8a16ab86bf7a8a" class="i property">IsCompleted</a>);
<span class="k preprocess">#</span><span class="k preprocess">endif</span>
<span class="k preprocess">#</span><span class="k preprocess">pragma</span> <span class="k preprocess">warning</span> <span class="k preprocess">disable</span> <span class="i">AZC0102</span> <span class="c">// Do not use GetAwaiter().GetResult(). Use the TaskExtensions.EnsureCompleted() extension method instead.</span>
            <b>return</b> <span class="r9 r">task</span>.<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
<span class="k preprocess">#</span><span class="k preprocess">pragma</span> <span class="k preprocess">warning</span> <span class="k preprocess">restore</span> <span class="i">AZC0102</span> <span class="c">// Do not use GetAwaiter().GetResult(). Use the TaskExtensions.EnsureCompleted() extension method instead.</span>
        }
 
        <b>public static void</b> <a id="9a35b0afd931dc48" href="../../R/9a35b0afd931dc48.html" target="n" data-glyph="220,1" class="i method">EnsureCompleted</a>(<b>this</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <span id="r10 rd" class="r10 r">task</span>)
        {
<span class="k preprocess">#</span><span class="k preprocess">if</span> <span class="i">DEBUG</span>
            <a href="#99ff37a7df15d033" class="i method">VerifyTaskCompleted</a>(<span class="r10 r">task</span>.<a href="@0@mscorlib/A.html#8d8a16ab86bf7a8a" class="i property">IsCompleted</a>);
<span class="k preprocess">#</span><span class="k preprocess">endif</span>
<span class="k preprocess">#</span><span class="k preprocess">pragma</span> <span class="k preprocess">warning</span> <span class="k preprocess">disable</span> <span class="i">AZC0102</span> <span class="c">// Do not use GetAwaiter().GetResult(). Use the TaskExtensions.EnsureCompleted() extension method instead.</span>
            <span class="r10 r">task</span>.<a href="@0@mscorlib/A.html#9865ec4fb8abca74" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#fac5be2731353aa8" class="i method">GetResult</a>();
<span class="k preprocess">#</span><span class="k preprocess">pragma</span> <span class="k preprocess">warning</span> <span class="k preprocess">restore</span> <span class="i">AZC0102</span> <span class="c">// Do not use GetAwaiter().GetResult(). Use the TaskExtensions.EnsureCompleted() extension method instead.</span>
        }
 
        <b>public static</b> <span class="r11 r t">T</span> <a id="8c91f60473262282" href="../../R/8c91f60473262282.html" target="n" data-glyph="220,1" class="i method">EnsureCompleted</a>&lt;<span id="r11 rd t" class="r11 r t">T</span>&gt;(<b>this</b> <span class="t t">ValueTask</span>&lt;<span class="r11 r t">T</span>&gt; <span id="r12 rd" class="r12 r">task</span>)
        {
<span class="k preprocess">#</span><span class="k preprocess">if</span> <span class="i">DEBUG</span>
            <a href="#99ff37a7df15d033" class="i method">VerifyTaskCompleted</a>(<span class="r12 r">task</span>.<span class="i property">IsCompleted</span>);
<span class="k preprocess">#</span><span class="k preprocess">endif</span>
<span class="k preprocess">#</span><span class="k preprocess">pragma</span> <span class="k preprocess">warning</span> <span class="k preprocess">disable</span> <span class="i">AZC0102</span> <span class="c">// Do not use GetAwaiter().GetResult(). Use the TaskExtensions.EnsureCompleted() extension method instead.</span>
            <b>return</b> <span class="r12 r">task</span>.<span class="i method">GetAwaiter</span>().<span class="i method">GetResult</span>();
<span class="k preprocess">#</span><span class="k preprocess">pragma</span> <span class="k preprocess">warning</span> <span class="k preprocess">restore</span> <span class="i">AZC0102</span> <span class="c">// Do not use GetAwaiter().GetResult(). Use the TaskExtensions.EnsureCompleted() extension method instead.</span>
        }
 
        <b>public static void</b> <a id="0c5100eb7549725f" href="../../R/0c5100eb7549725f.html" target="n" data-glyph="220,1" class="i method">EnsureCompleted</a>(<b>this</b> <span class="t t">ValueTask</span> <span id="r13 rd" class="r13 r">task</span>)
        {
<span class="k preprocess">#</span><span class="k preprocess">if</span> <span class="i">DEBUG</span>
            <a href="#99ff37a7df15d033" class="i method">VerifyTaskCompleted</a>(<span class="r13 r">task</span>.<span class="i property">IsCompleted</span>);
<span class="k preprocess">#</span><span class="k preprocess">endif</span>
<span class="k preprocess">#</span><span class="k preprocess">pragma</span> <span class="k preprocess">warning</span> <span class="k preprocess">disable</span> <span class="i">AZC0102</span> <span class="c">// Do not use GetAwaiter().GetResult(). Use the TaskExtensions.EnsureCompleted() extension method instead.</span>
            <span class="r13 r">task</span>.<span class="i method">GetAwaiter</span>().<span class="i method">GetResult</span>();
<span class="k preprocess">#</span><span class="k preprocess">pragma</span> <span class="k preprocess">warning</span> <span class="k preprocess">restore</span> <span class="i">AZC0102</span> <span class="c">// Do not use GetAwaiter().GetResult(). Use the TaskExtensions.EnsureCompleted() extension method instead.</span>
        }
 
        <b>public static</b> <a href="#7100844c47e62c8c" class="t t">Enumerable</a>&lt;<span class="r14 r t">T</span>&gt; <a id="fdb4f8a2058b2107" href="../../R/../../0000000000.html" target="n" data-glyph="220,1" class="i method">EnsureSyncEnumerable</a>&lt;<span id="r14 rd t" class="r14 r t">T</span>&gt;(<b>this</b> <span class="t t">IAsyncEnumerable</span>&lt;<span class="r14 r t">T</span>&gt; <span id="r15 rd" class="r15 r">asyncEnumerable</span>) =&gt; <b>new</b> <a href="#bdaa54e52737aca0" class="t constructor">Enumerable</a>&lt;<span class="r14 r t">T</span>&gt;(<span class="r15 r">asyncEnumerable</span>);
 
        <b>public static</b> <span class="t t">ConfiguredValueTaskAwaitable</span>&lt;<span class="r16 r t">T</span>&gt; <a id="dcb1ea8954073c41" href="../../R/../../0000000000.html" target="n" data-glyph="220,1" class="i method">EnsureCompleted</a>&lt;<span id="r16 rd t" class="r16 r t">T</span>&gt;(<b>this</b> <span class="t t">ConfiguredValueTaskAwaitable</span>&lt;<span class="r16 r t">T</span>&gt; <span id="r17 rd" class="r17 r">awaitable</span>, <b>bool</b> <span id="r18 rd" class="r18 r">async</span>)
        {
            <b>if</b> (!<span class="r18 r">async</span>)
            {
<span class="k preprocess">#</span><span class="k preprocess">if</span> <span class="i">DEBUG</span>
                <a href="#99ff37a7df15d033" class="i method">VerifyTaskCompleted</a>(<span class="r17 r">awaitable</span>.<span class="i method">GetAwaiter</span>().<span class="i property">IsCompleted</span>);
<span class="k preprocess">#</span><span class="k preprocess">endif</span>
            }
            <b>return</b> <span class="r17 r">awaitable</span>;
        }
 
        <b>public static</b> <span class="t t">ConfiguredValueTaskAwaitable</span> <a id="582366f5bca63de7" href="../../R/../../0000000000.html" target="n" data-glyph="220,1" class="i method">EnsureCompleted</a>(<b>this</b> <span class="t t">ConfiguredValueTaskAwaitable</span> <span id="r19 rd" class="r19 r">awaitable</span>, <b>bool</b> <span id="r20 rd" class="r20 r">async</span>)
        {
            <b>if</b> (!<span class="r20 r">async</span>)
            {
<span class="k preprocess">#</span><span class="k preprocess">if</span> <span class="i">DEBUG</span>
                <a href="#99ff37a7df15d033" class="i method">VerifyTaskCompleted</a>(<span class="r19 r">awaitable</span>.<span class="i method">GetAwaiter</span>().<span class="i property">IsCompleted</span>);
<span class="k preprocess">#</span><span class="k preprocess">endif</span>
            }
            <b>return</b> <span class="r19 r">awaitable</span>;
        }
 
        [<a href="@0@mscorlib/A.html#2cde19ac63a3b25e" class="t constructor">Conditional</a>(<span class="s">&quot;DEBUG&quot;</span>)]
        <b>private static void</b> <a id="99ff37a7df15d033" href="../../R/99ff37a7df15d033.html" target="n" data-glyph="76,1" class="i method">VerifyTaskCompleted</a>(<b>bool</b> <span id="r21 rd" class="r21 r">isCompleted</span>)
        {
            <b>if</b> (!<span class="r21 r">isCompleted</span>)
            {
                <b>if</b> (<a href="@0@mscorlib/A.html#0652ef6f5bf8d78b" class="t t">Debugger</a>.<a href="@0@mscorlib/A.html#c70d3a0fb6f77726" class="i property">IsAttached</a>)
                {
                    <a href="@0@mscorlib/A.html#0652ef6f5bf8d78b" class="t t">Debugger</a>.<a href="@0@mscorlib/A.html#56a547f298d7fa12" class="i method">Break</a>();
                }
                <span class="c">// Throw an InvalidOperationException instead of using</span>
                <span class="c">// Debug.Assert because that brings down nUnit immediately</span>
                <b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#265d72f49e915224" class="t constructor">InvalidOperationException</a>(<span class="s">&quot;Task is not completed&quot;</span>);
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Both </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#7100844c47e62c8c" class="t t">Enumerable</a>{<span class="r22 r t">T</span>}<span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> and </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#f5451d1de33ccfe8" class="t t">Enumerator</a>{<span class="r23 r t">T</span>}<span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> are defined as public structs so that foreach can use duck typing</span>
        <span class="c">///</span><span class="c"> to call </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#7100844c47e62c8c" class="t t">Enumerable</a>{<span class="r24 r t">T</span>}.<a href="#1f057f0555417d50" class="i method">GetEnumerator</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> and avoid heap memory allocation.</span>
        <span class="c">///</span><span class="c"> Please don&#39;t delete this method and don&#39;t make these types private.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">typeparam</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r25 r t">T</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">typeparam</span><span class="c">&gt;</span>
        <b>public readonly struct</b> <a id="7100844c47e62c8c" href="../../R/7100844c47e62c8c.html" target="n" data-glyph="108,1" class="t t"><span id="17674ce0ff5cabc3">Enumerable</span></a>&lt;<span id="r25 rd t" class="r25 r t">T</span>&gt; : <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="r25 r t">T</span>&gt;
        {
            <b>private readonly</b> <span class="t t">IAsyncEnumerable</span>&lt;<span class="r25 r t">T</span>&gt; <a id="805c789ea2eb225b" href="../../R/805c789ea2eb225b.html" target="n" data-glyph="46,2" class="i field">_asyncEnumerable</a>;
 
            <b>public</b> <a id="bdaa54e52737aca0" href="../../R/bdaa54e52737aca0.html" target="n" data-glyph="72,2" class="t constructor">Enumerable</a>(<span class="t t">IAsyncEnumerable</span>&lt;<span class="r25 r t">T</span>&gt; <span id="r26 rd" class="r26 r">asyncEnumerable</span>) =&gt; <a href="#805c789ea2eb225b" class="i field">_asyncEnumerable</a> = <span class="r26 r">asyncEnumerable</span>;
 
            <b>public</b> <a href="#f5451d1de33ccfe8" class="t t">Enumerator</a>&lt;<span class="r25 r t">T</span>&gt; <a id="1f057f0555417d50" href="../../R/1f057f0555417d50.html" target="n" data-glyph="72,2" class="i method">GetEnumerator</a>() =&gt; <b>new</b> <a href="#2ecee16011f2947d" class="t constructor">Enumerator</a>&lt;<span class="r25 r t">T</span>&gt;(<a href="#805c789ea2eb225b" class="i field">_asyncEnumerable</a>.<span class="i method">GetAsyncEnumerator</span>());
 
            <a href="@0@mscorlib/A.html#893e8cdebffde2da" class="t t">IEnumerator</a>&lt;<span class="r25 r t">T</span>&gt; <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="r25 r t">T</span>&gt;.<a href="@0@mscorlib/A.html#a242475701b655b2" class="i method">GetEnumerator</a>() =&gt; <b>new</b> <a href="#2ecee16011f2947d" class="t constructor">Enumerator</a>&lt;<span class="r25 r t">T</span>&gt;(<a href="#805c789ea2eb225b" class="i field">_asyncEnumerable</a>.<span class="i method">GetAsyncEnumerator</span>());
 
            <a href="@0@mscorlib/A.html#6624f38cb955bfe0" class="t t">IEnumerator</a> <a href="@0@mscorlib/A.html#9be451ac13d86a97" class="t t">IEnumerable</a>.<a href="@0@mscorlib/A.html#02a44b09e26b964f" class="i method">GetEnumerator</a>() =&gt; <a href="#1f057f0555417d50" class="i method">GetEnumerator</a>();
        }
 
        <b>public readonly struct</b> <a id="f5451d1de33ccfe8" href="../../R/f5451d1de33ccfe8.html" target="n" data-glyph="108,1" class="t t"><span id="0a0d7a5869518e36">Enumerator</span></a>&lt;<span id="r27 rd t" class="r27 r t">T</span>&gt; : <a href="@0@mscorlib/A.html#893e8cdebffde2da" class="t t">IEnumerator</a>&lt;<span class="r27 r t">T</span>&gt;
        {
            <b>private readonly</b> <span class="t t">IAsyncEnumerator</span>&lt;<span class="r27 r t">T</span>&gt; <a id="ad363244d1a0acca" href="../../R/ad363244d1a0acca.html" target="n" data-glyph="46,2" class="i field">_asyncEnumerator</a>;
 
            <b>public</b> <a id="2ecee16011f2947d" href="../../R/2ecee16011f2947d.html" target="n" data-glyph="72,2" class="t constructor">Enumerator</a>(<span class="t t">IAsyncEnumerator</span>&lt;<span class="r27 r t">T</span>&gt; <span id="r28 rd" class="r28 r">asyncEnumerator</span>) =&gt; <a href="#ad363244d1a0acca" class="i field">_asyncEnumerator</a> = <span class="r28 r">asyncEnumerator</span>;
 
<span class="k preprocess">#</span><span class="k preprocess">pragma</span> <span class="k preprocess">warning</span> <span class="k preprocess">disable</span> <span class="i">AZC0107</span> <span class="c">// Do not call public asynchronous method in synchronous scope.</span>
            <b>public bool</b> <a id="8debfdb50d31a087" href="../../R/8debfdb50d31a087.html" target="n" data-glyph="72,2" class="i method">MoveNext</a>() =&gt; <a href="#ad363244d1a0acca" class="i field">_asyncEnumerator</a>.<span class="i method">MoveNextAsync</span>().<a href="#8c91f60473262282" class="i method">EnsureCompleted</a>();
<span class="k preprocess">#</span><span class="k preprocess">pragma</span> <span class="k preprocess">warning</span> <span class="k preprocess">restore</span> <span class="i">AZC0107</span> <span class="c">// Do not call public asynchronous method in synchronous scope.</span>
 
            <b>public void</b> <a id="55d5ad8fe58dd833" href="../../R/55d5ad8fe58dd833.html" target="n" data-glyph="72,2" class="i method">Reset</a>() =&gt; <b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#3d3c2c03118be4f8" class="t constructor">NotSupportedException</a>(<span class="s">$&quot;</span>{<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()}<span class="s"> is a synchronous wrapper for </span>{<a href="#ad363244d1a0acca" class="i field">_asyncEnumerator</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()}<span class="s"> async enumerator, which can&#39;t be reset, so IEnumerable.Reset() calls aren&#39;t supported.</span><span class="s">&quot;</span>);
 
            <b>public</b> <span class="r27 r t">T</span> <a id="8b9c930be5735e07" href="../../R/8b9c930be5735e07.html" target="n" data-glyph="102,2" class="i property">Current</a> =&gt; <a href="#ad363244d1a0acca" class="i field">_asyncEnumerator</a>.<span class="i property">Current</span>;
 
            <b>object</b> <a href="@0@mscorlib/A.html#6624f38cb955bfe0" class="t t">IEnumerator</a>.<a href="@0@mscorlib/A.html#3f12a86aa5b0da2b" class="i property">Current</a> =&gt; <a href="#8b9c930be5735e07" class="i property">Current</a>;
 
<span class="k preprocess">#</span><span class="k preprocess">pragma</span> <span class="k preprocess">warning</span> <span class="k preprocess">disable</span> <span class="i">AZC0107</span> <span class="c">// Do not call public asynchronous method in synchronous scope.</span>
            <b>public void</b> <a id="184b019e8395d49d" href="../../R/184b019e8395d49d.html" target="n" data-glyph="72,2" class="i method">Dispose</a>() =&gt; <a href="#ad363244d1a0acca" class="i field">_asyncEnumerator</a>.<span class="i method">DisposeAsync</span>().<a href="#0c5100eb7549725f" class="i method">EnsureCompleted</a>();
<span class="k preprocess">#</span><span class="k preprocess">pragma</span> <span class="k preprocess">warning</span> <span class="k preprocess">restore</span> <span class="i">AZC0107</span> <span class="c">// Do not call public asynchronous method in synchronous scope.</span>
        }
 
        <b>public readonly struct</b> <a id="f6326224d423b845" href="../../R/f6326224d423b845.html" target="n" data-glyph="108,1" class="t t"><span id="a8e3cc3ffa5480aa">WithCancellationTaskAwaitable</span></a>
        {
            <b>private readonly</b> <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <a id="35e3bc55fa4ddbe1" href="../../R/35e3bc55fa4ddbe1.html" target="n" data-glyph="46,2" class="i field">_cancellationToken</a>;
            <b>private readonly</b> <a href="@0@mscorlib/A.html#71e736efa1b4ccaa" class="t t">ConfiguredTaskAwaitable</a> <a id="889eefe08b091cdf" href="../../R/889eefe08b091cdf.html" target="n" data-glyph="46,2" class="i field">_awaitable</a>;
 
            <b>public</b> <a id="3698e28a74b19752" href="../../R/3698e28a74b19752.html" target="n" data-glyph="72,2" class="t constructor">WithCancellationTaskAwaitable</a>(<a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <span id="r29 rd" class="r29 r">task</span>, <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r30 rd" class="r30 r">cancellationToken</span>)
            {
                <a href="#889eefe08b091cdf" class="i field">_awaitable</a> = <span class="r29 r">task</span>.<a href="@0@mscorlib/A.html#9ca6b2f012ce7587" class="i method">ConfigureAwait</a>(<b>false</b>);
                <a href="#35e3bc55fa4ddbe1" class="i field">_cancellationToken</a> = <span class="r30 r">cancellationToken</span>;
            }
 
            <b>public</b> <a href="#cdb6fd37569d4d73" class="t t">WithCancellationTaskAwaiter</a> <a id="eb6044c6b30f887e" href="../../R/../../0000000000.html" target="n" data-glyph="72,2" class="i method">GetAwaiter</a>() =&gt; <b>new</b> <a href="#3fe6cb5a8e25f552" class="t constructor">WithCancellationTaskAwaiter</a>(<a href="#889eefe08b091cdf" class="i field">_awaitable</a>.<a href="@0@mscorlib/A.html#b8626cdb2f1cbe65" class="i method">GetAwaiter</a>(), <a href="#35e3bc55fa4ddbe1" class="i field">_cancellationToken</a>);
        }
 
        <b>public readonly struct</b> <a id="a710ec326f285d3b" href="../../R/a710ec326f285d3b.html" target="n" data-glyph="108,1" class="t t"><span id="e15349fcd7adfadc">WithCancellationTaskAwaitable</span></a>&lt;<span id="r31 rd t" class="r31 r t">T</span>&gt;
        {
            <b>private readonly</b> <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <a id="541b93f20a961e6d" href="../../R/541b93f20a961e6d.html" target="n" data-glyph="46,2" class="i field">_cancellationToken</a>;
            <b>private readonly</b> <a href="@0@mscorlib/A.html#22febede00d2b90f" class="t t">ConfiguredTaskAwaitable</a>&lt;<span class="r31 r t">T</span>&gt; <a id="62e6e8ce35e3f03b" href="../../R/62e6e8ce35e3f03b.html" target="n" data-glyph="46,2" class="i field">_awaitable</a>;
 
            <b>public</b> <a id="af68fc2d93aaf48d" href="../../R/af68fc2d93aaf48d.html" target="n" data-glyph="72,2" class="t constructor">WithCancellationTaskAwaitable</a>(<a href="@0@mscorlib/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<span class="r31 r t">T</span>&gt; <span id="r32 rd" class="r32 r">task</span>, <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r33 rd" class="r33 r">cancellationToken</span>)
            {
                <a href="#62e6e8ce35e3f03b" class="i field">_awaitable</a> = <span class="r32 r">task</span>.<a href="@0@mscorlib/A.html#07ef75a8fa372c94" class="i method">ConfigureAwait</a>(<b>false</b>);
                <a href="#541b93f20a961e6d" class="i field">_cancellationToken</a> = <span class="r33 r">cancellationToken</span>;
            }
 
            <b>public</b> <a href="#c4c59c87b75f98ac" class="t t">WithCancellationTaskAwaiter</a>&lt;<span class="r31 r t">T</span>&gt; <a id="82217a3b78754c22" href="../../R/../../0000000000.html" target="n" data-glyph="72,2" class="i method">GetAwaiter</a>() =&gt; <b>new</b> <a href="#2f0776ec909afb0a" class="t constructor">WithCancellationTaskAwaiter</a>&lt;<span class="r31 r t">T</span>&gt;(<a href="#62e6e8ce35e3f03b" class="i field">_awaitable</a>.<a href="@0@mscorlib/A.html#e356d5440a3c14ad" class="i method">GetAwaiter</a>(), <a href="#541b93f20a961e6d" class="i field">_cancellationToken</a>);
        }
 
        <b>public readonly struct</b> <a id="78572dda1da352a9" href="../../R/78572dda1da352a9.html" target="n" data-glyph="108,1" class="t t"><span id="a55191593a0ff3b0">WithCancellationValueTaskAwaitable</span></a>&lt;<span id="r34 rd t" class="r34 r t">T</span>&gt;
        {
            <b>private readonly</b> <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <a id="425c70972bae371c" href="../../R/425c70972bae371c.html" target="n" data-glyph="46,2" class="i field">_cancellationToken</a>;
            <b>private readonly</b> <span class="t t">ConfiguredValueTaskAwaitable</span>&lt;<span class="r34 r t">T</span>&gt; <a id="41a86828ff9df81e" href="../../R/41a86828ff9df81e.html" target="n" data-glyph="46,2" class="i field">_awaitable</a>;
 
            <b>public</b> <a id="f79b481a6336249c" href="../../R/f79b481a6336249c.html" target="n" data-glyph="72,2" class="t constructor">WithCancellationValueTaskAwaitable</a>(<span class="t t">ValueTask</span>&lt;<span class="r34 r t">T</span>&gt; <span id="r35 rd" class="r35 r">task</span>, <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r36 rd" class="r36 r">cancellationToken</span>)
            {
                <a href="#41a86828ff9df81e" class="i field">_awaitable</a> = <span class="r35 r">task</span>.<span class="i method">ConfigureAwait</span>(<b>false</b>);
                <a href="#425c70972bae371c" class="i field">_cancellationToken</a> = <span class="r36 r">cancellationToken</span>;
            }
 
            <b>public</b> <a href="#3f4fa91fc51b6714" class="t t">WithCancellationValueTaskAwaiter</a>&lt;<span class="r34 r t">T</span>&gt; <a id="6b661a93909a1ad2" href="../../R/../../0000000000.html" target="n" data-glyph="72,2" class="i method">GetAwaiter</a>() =&gt; <b>new</b> <a href="#37e86533c4f0a9c1" class="t constructor">WithCancellationValueTaskAwaiter</a>&lt;<span class="r34 r t">T</span>&gt;(<a href="#41a86828ff9df81e" class="i field">_awaitable</a>.<span class="i method">GetAwaiter</span>(), <a href="#425c70972bae371c" class="i field">_cancellationToken</a>);
        }
 
        <b>public readonly struct</b> <a id="cdb6fd37569d4d73" href="../../R/cdb6fd37569d4d73.html" target="n" data-glyph="108,1" class="t t"><span id="624ce1b3b65dbac6">WithCancellationTaskAwaiter</span></a> : <a href="@0@mscorlib/A.html#ea481ee05c6f2191" class="t t">ICriticalNotifyCompletion</a>
        {
            <b>private readonly</b> <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <a id="5311e614813dbf9f" href="../../R/5311e614813dbf9f.html" target="n" data-glyph="46,2" class="i field">_cancellationToken</a>;
            <b>private readonly</b> <a href="@0@mscorlib/A.html#71e736efa1b4ccaa" class="t t">ConfiguredTaskAwaitable</a>.<a href="@0@mscorlib/A.html#fc01ff2cae915cef" class="t t">ConfiguredTaskAwaiter</a> <a id="1b7a8b6566fd0968" href="../../R/1b7a8b6566fd0968.html" target="n" data-glyph="46,2" class="i field">_taskAwaiter</a>;
 
            <b>public</b> <a id="3fe6cb5a8e25f552" href="../../R/3fe6cb5a8e25f552.html" target="n" data-glyph="72,2" class="t constructor">WithCancellationTaskAwaiter</a>(<a href="@0@mscorlib/A.html#71e736efa1b4ccaa" class="t t">ConfiguredTaskAwaitable</a>.<a href="@0@mscorlib/A.html#fc01ff2cae915cef" class="t t">ConfiguredTaskAwaiter</a> <span id="r37 rd" class="r37 r">awaiter</span>, <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r38 rd" class="r38 r">cancellationToken</span>)
            {
                <a href="#1b7a8b6566fd0968" class="i field">_taskAwaiter</a> = <span class="r37 r">awaiter</span>;
                <a href="#5311e614813dbf9f" class="i field">_cancellationToken</a> = <span class="r38 r">cancellationToken</span>;
            }
 
            <b>public bool</b> <a id="80cc968c3398a5c1" href="../../R/80cc968c3398a5c1.html" target="n" data-glyph="102,2" class="i property">IsCompleted</a> =&gt; <a href="#1b7a8b6566fd0968" class="i field">_taskAwaiter</a>.<a href="@0@mscorlib/A.html#af7ea460ac90a628" class="i property">IsCompleted</a> || <a href="#5311e614813dbf9f" class="i field">_cancellationToken</a>.<a href="@0@mscorlib/A.html#f32abbe8e2f1f6c1" class="i property">IsCancellationRequested</a>;
 
            <b>public void</b> <a id="43fb405f2107ce8c" href="../../R/43fb405f2107ce8c.html" target="n" data-glyph="72,2" class="i method">OnCompleted</a>(<a href="@0@mscorlib/A.html#9147ae6f76643aae" class="t t">Action</a> <span id="r39 rd" class="r39 r">continuation</span>) =&gt; <a href="#1b7a8b6566fd0968" class="i field">_taskAwaiter</a>.<a href="@0@mscorlib/A.html#5220d89dcfbf8c05" class="i method">OnCompleted</a>(<a href="#a171c84a52a3e364" class="i method">WrapContinuation</a>(<span class="r39 r">continuation</span>));
 
            <b>public void</b> <a id="b9b2b728483f2672" href="../../R/b9b2b728483f2672.html" target="n" data-glyph="72,2" class="i method">UnsafeOnCompleted</a>(<a href="@0@mscorlib/A.html#9147ae6f76643aae" class="t t">Action</a> <span id="r40 rd" class="r40 r">continuation</span>) =&gt; <a href="#1b7a8b6566fd0968" class="i field">_taskAwaiter</a>.<a href="@0@mscorlib/A.html#274df7eaea683d88" class="i method">UnsafeOnCompleted</a>(<a href="#a171c84a52a3e364" class="i method">WrapContinuation</a>(<span class="r40 r">continuation</span>));
 
            <b>public void</b> <a id="d1026ba15b4b764a" href="../../R/../../0000000000.html" target="n" data-glyph="72,2" class="i method">GetResult</a>()
            {
                <a href="@0@System/A.html#632c6da37ce825df" class="t t">Debug</a>.<a href="@0@System/A.html#74ae7c85c0e36e34" class="i method">Assert</a>(<a href="#80cc968c3398a5c1" class="i property">IsCompleted</a>);
                <b>if</b> (!<a href="#1b7a8b6566fd0968" class="i field">_taskAwaiter</a>.<a href="@0@mscorlib/A.html#af7ea460ac90a628" class="i property">IsCompleted</a>)
                {
                    <a href="#5311e614813dbf9f" class="i field">_cancellationToken</a>.<a href="@0@mscorlib/A.html#d2864d73804288fc" class="i method">ThrowIfCancellationRequested</a>();
                }
                <a href="#1b7a8b6566fd0968" class="i field">_taskAwaiter</a>.<a href="@0@mscorlib/A.html#12a17040b220358e" class="i method">GetResult</a>();
            }
 
            <b>private</b> <a href="@0@mscorlib/A.html#9147ae6f76643aae" class="t t">Action</a> <a id="a171c84a52a3e364" href="../../R/a171c84a52a3e364.html" target="n" data-glyph="76,2" class="i method">WrapContinuation</a>(<b>in</b> <a href="@0@mscorlib/A.html#9147ae6f76643aae" class="t t">Action</a> <span id="r41 rd" class="r41 r">originalContinuation</span>)
                =&gt; <a href="#5311e614813dbf9f" class="i field">_cancellationToken</a>.<a href="@0@mscorlib/A.html#072de537dec2c13e" class="i property">CanBeCanceled</a>
                    ? <b>new</b> <a href="#cd0a0cfcd87757e1" class="t constructor">WithCancellationContinuationWrapper</a>(<span class="r41 r">originalContinuation</span>, <a href="#5311e614813dbf9f" class="i field">_cancellationToken</a>).<a href="#4e22611eb7944971" class="i property">Continuation</a>
                    : <span class="r41 r">originalContinuation</span>;
        }
 
        <b>public readonly struct</b> <a id="c4c59c87b75f98ac" href="../../R/c4c59c87b75f98ac.html" target="n" data-glyph="108,1" class="t t"><span id="4859dfb505500ace">WithCancellationTaskAwaiter</span></a>&lt;<span id="r42 rd t" class="r42 r t">T</span>&gt; : <a href="@0@mscorlib/A.html#ea481ee05c6f2191" class="t t">ICriticalNotifyCompletion</a>
        {
            <b>private readonly</b> <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <a id="eaf27e77de4c3ad9" href="../../R/eaf27e77de4c3ad9.html" target="n" data-glyph="46,2" class="i field">_cancellationToken</a>;
            <b>private readonly</b> <a href="@0@mscorlib/A.html#22febede00d2b90f" class="t t">ConfiguredTaskAwaitable</a>&lt;<span class="r42 r t">T</span>&gt;.<a href="@0@mscorlib/A.html#301da9e200d82664" class="t t">ConfiguredTaskAwaiter</a> <a id="055de58961fe433b" href="../../R/055de58961fe433b.html" target="n" data-glyph="46,2" class="i field">_taskAwaiter</a>;
 
            <b>public</b> <a id="2f0776ec909afb0a" href="../../R/2f0776ec909afb0a.html" target="n" data-glyph="72,2" class="t constructor">WithCancellationTaskAwaiter</a>(<a href="@0@mscorlib/A.html#22febede00d2b90f" class="t t">ConfiguredTaskAwaitable</a>&lt;<span class="r42 r t">T</span>&gt;.<a href="@0@mscorlib/A.html#301da9e200d82664" class="t t">ConfiguredTaskAwaiter</a> <span id="r43 rd" class="r43 r">awaiter</span>, <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r44 rd" class="r44 r">cancellationToken</span>)
            {
                <a href="#055de58961fe433b" class="i field">_taskAwaiter</a> = <span class="r43 r">awaiter</span>;
                <a href="#eaf27e77de4c3ad9" class="i field">_cancellationToken</a> = <span class="r44 r">cancellationToken</span>;
            }
 
            <b>public bool</b> <a id="d525ade078d960cb" href="../../R/d525ade078d960cb.html" target="n" data-glyph="102,2" class="i property">IsCompleted</a> =&gt; <a href="#055de58961fe433b" class="i field">_taskAwaiter</a>.<a href="@0@mscorlib/A.html#e245797e0a9b96e2" class="i property">IsCompleted</a> || <a href="#eaf27e77de4c3ad9" class="i field">_cancellationToken</a>.<a href="@0@mscorlib/A.html#f32abbe8e2f1f6c1" class="i property">IsCancellationRequested</a>;
 
            <b>public void</b> <a id="07308adea48cadbe" href="../../R/07308adea48cadbe.html" target="n" data-glyph="72,2" class="i method">OnCompleted</a>(<a href="@0@mscorlib/A.html#9147ae6f76643aae" class="t t">Action</a> <span id="r45 rd" class="r45 r">continuation</span>) =&gt; <a href="#055de58961fe433b" class="i field">_taskAwaiter</a>.<a href="@0@mscorlib/A.html#31534dcc71b8334a" class="i method">OnCompleted</a>(<a href="#26453f45e1bea804" class="i method">WrapContinuation</a>(<span class="r45 r">continuation</span>));
 
            <b>public void</b> <a id="7796166edbac32b6" href="../../R/7796166edbac32b6.html" target="n" data-glyph="72,2" class="i method">UnsafeOnCompleted</a>(<a href="@0@mscorlib/A.html#9147ae6f76643aae" class="t t">Action</a> <span id="r46 rd" class="r46 r">continuation</span>) =&gt; <a href="#055de58961fe433b" class="i field">_taskAwaiter</a>.<a href="@0@mscorlib/A.html#83adb6a7770cbe0a" class="i method">UnsafeOnCompleted</a>(<a href="#26453f45e1bea804" class="i method">WrapContinuation</a>(<span class="r46 r">continuation</span>));
 
            <b>public</b> <span class="r42 r t">T</span> <a id="520207a5012b3f7d" href="../../R/../../0000000000.html" target="n" data-glyph="72,2" class="i method">GetResult</a>()
            {
                <a href="@0@System/A.html#632c6da37ce825df" class="t t">Debug</a>.<a href="@0@System/A.html#74ae7c85c0e36e34" class="i method">Assert</a>(<a href="#d525ade078d960cb" class="i property">IsCompleted</a>);
                <b>if</b> (!<a href="#055de58961fe433b" class="i field">_taskAwaiter</a>.<a href="@0@mscorlib/A.html#e245797e0a9b96e2" class="i property">IsCompleted</a>)
                {
                    <a href="#eaf27e77de4c3ad9" class="i field">_cancellationToken</a>.<a href="@0@mscorlib/A.html#d2864d73804288fc" class="i method">ThrowIfCancellationRequested</a>();
                }
                <b>return</b> <a href="#055de58961fe433b" class="i field">_taskAwaiter</a>.<a href="@0@mscorlib/A.html#6979b218613f292b" class="i method">GetResult</a>();
            }
 
            <b>private</b> <a href="@0@mscorlib/A.html#9147ae6f76643aae" class="t t">Action</a> <a id="26453f45e1bea804" href="../../R/26453f45e1bea804.html" target="n" data-glyph="76,2" class="i method">WrapContinuation</a>(<b>in</b> <a href="@0@mscorlib/A.html#9147ae6f76643aae" class="t t">Action</a> <span id="r47 rd" class="r47 r">originalContinuation</span>)
                =&gt; <a href="#eaf27e77de4c3ad9" class="i field">_cancellationToken</a>.<a href="@0@mscorlib/A.html#072de537dec2c13e" class="i property">CanBeCanceled</a>
                    ? <b>new</b> <a href="#cd0a0cfcd87757e1" class="t constructor">WithCancellationContinuationWrapper</a>(<span class="r47 r">originalContinuation</span>, <a href="#eaf27e77de4c3ad9" class="i field">_cancellationToken</a>).<a href="#4e22611eb7944971" class="i property">Continuation</a>
                    : <span class="r47 r">originalContinuation</span>;
        }
 
        <b>public readonly struct</b> <a id="3f4fa91fc51b6714" href="../../R/3f4fa91fc51b6714.html" target="n" data-glyph="108,1" class="t t"><span id="87567bfc0815b55a">WithCancellationValueTaskAwaiter</span></a>&lt;<span id="r48 rd t" class="r48 r t">T</span>&gt; : <a href="@0@mscorlib/A.html#ea481ee05c6f2191" class="t t">ICriticalNotifyCompletion</a>
        {
            <b>private readonly</b> <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <a id="cc52628ae530a38a" href="../../R/cc52628ae530a38a.html" target="n" data-glyph="46,2" class="i field">_cancellationToken</a>;
            <b>private readonly</b> <span class="t t">ConfiguredValueTaskAwaitable</span>&lt;<span class="r48 r t">T</span>&gt;.<span class="t t">ConfiguredValueTaskAwaiter</span> <a id="e9c86630f6ec2818" href="../../R/e9c86630f6ec2818.html" target="n" data-glyph="46,2" class="i field">_taskAwaiter</a>;
 
            <b>public</b> <a id="37e86533c4f0a9c1" href="../../R/37e86533c4f0a9c1.html" target="n" data-glyph="72,2" class="t constructor">WithCancellationValueTaskAwaiter</a>(<span class="t t">ConfiguredValueTaskAwaitable</span>&lt;<span class="r48 r t">T</span>&gt;.<span class="t t">ConfiguredValueTaskAwaiter</span> <span id="r49 rd" class="r49 r">awaiter</span>, <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r50 rd" class="r50 r">cancellationToken</span>)
            {
                <a href="#e9c86630f6ec2818" class="i field">_taskAwaiter</a> = <span class="r49 r">awaiter</span>;
                <a href="#cc52628ae530a38a" class="i field">_cancellationToken</a> = <span class="r50 r">cancellationToken</span>;
            }
 
            <b>public bool</b> <a id="adb9277f34b0e4b0" href="../../R/adb9277f34b0e4b0.html" target="n" data-glyph="102,2" class="i property">IsCompleted</a> =&gt; <a href="#e9c86630f6ec2818" class="i field">_taskAwaiter</a>.<span class="i property">IsCompleted</span> || <a href="#cc52628ae530a38a" class="i field">_cancellationToken</a>.<a href="@0@mscorlib/A.html#f32abbe8e2f1f6c1" class="i property">IsCancellationRequested</a>;
 
            <b>public void</b> <a id="f09626560a56b2fe" href="../../R/f09626560a56b2fe.html" target="n" data-glyph="72,2" class="i method">OnCompleted</a>(<a href="@0@mscorlib/A.html#9147ae6f76643aae" class="t t">Action</a> <span id="r51 rd" class="r51 r">continuation</span>) =&gt; <a href="#e9c86630f6ec2818" class="i field">_taskAwaiter</a>.<span class="i method">OnCompleted</span>(<a href="#fbe01593b06919a2" class="i method">WrapContinuation</a>(<span class="r51 r">continuation</span>));
 
            <b>public void</b> <a id="bb7a8c9783e7ab2b" href="../../R/bb7a8c9783e7ab2b.html" target="n" data-glyph="72,2" class="i method">UnsafeOnCompleted</a>(<a href="@0@mscorlib/A.html#9147ae6f76643aae" class="t t">Action</a> <span id="r52 rd" class="r52 r">continuation</span>) =&gt; <a href="#e9c86630f6ec2818" class="i field">_taskAwaiter</a>.<span class="i method">UnsafeOnCompleted</span>(<a href="#fbe01593b06919a2" class="i method">WrapContinuation</a>(<span class="r52 r">continuation</span>));
 
            <b>public</b> <span class="r48 r t">T</span> <a id="1213b5d14e4ca056" href="../../R/../../0000000000.html" target="n" data-glyph="72,2" class="i method">GetResult</a>()
            {
                <a href="@0@System/A.html#632c6da37ce825df" class="t t">Debug</a>.<a href="@0@System/A.html#74ae7c85c0e36e34" class="i method">Assert</a>(<a href="#adb9277f34b0e4b0" class="i property">IsCompleted</a>);
                <b>if</b> (!<a href="#e9c86630f6ec2818" class="i field">_taskAwaiter</a>.<span class="i property">IsCompleted</span>)
                {
                    <a href="#cc52628ae530a38a" class="i field">_cancellationToken</a>.<a href="@0@mscorlib/A.html#d2864d73804288fc" class="i method">ThrowIfCancellationRequested</a>();
                }
                <b>return</b> <a href="#e9c86630f6ec2818" class="i field">_taskAwaiter</a>.<span class="i method">GetResult</span>();
            }
 
            <b>private</b> <a href="@0@mscorlib/A.html#9147ae6f76643aae" class="t t">Action</a> <a id="fbe01593b06919a2" href="../../R/fbe01593b06919a2.html" target="n" data-glyph="76,2" class="i method">WrapContinuation</a>(<b>in</b> <a href="@0@mscorlib/A.html#9147ae6f76643aae" class="t t">Action</a> <span id="r53 rd" class="r53 r">originalContinuation</span>)
                =&gt; <a href="#cc52628ae530a38a" class="i field">_cancellationToken</a>.<a href="@0@mscorlib/A.html#072de537dec2c13e" class="i property">CanBeCanceled</a>
                    ? <b>new</b> <a href="#cd0a0cfcd87757e1" class="t constructor">WithCancellationContinuationWrapper</a>(<span class="r53 r">originalContinuation</span>, <a href="#cc52628ae530a38a" class="i field">_cancellationToken</a>).<a href="#4e22611eb7944971" class="i property">Continuation</a>
                    : <span class="r53 r">originalContinuation</span>;
        }
 
        <b>private class</b> <a id="babc593b91b062c0" href="../../R/babc593b91b062c0.html" target="n" data-glyph="4,1" class="t t">WithCancellationContinuationWrapper</a>
        {
            <b>private</b> <a href="@0@mscorlib/A.html#9147ae6f76643aae" class="t t">Action</a> <a id="8ac35d05f5fca58e" href="../../R/8ac35d05f5fca58e.html" target="n" data-glyph="46,2" class="i field">_originalContinuation</a>;
            <b>private readonly</b> <a href="@0@mscorlib/A.html#2d80bf84f593cc0c" class="t t">CancellationTokenRegistration</a> <a id="229bacd0be04b624" href="../../R/229bacd0be04b624.html" target="n" data-glyph="46,2" class="i field">_registration</a>;
 
            <b>public</b> <a id="cd0a0cfcd87757e1" href="../../R/cd0a0cfcd87757e1.html" target="n" data-glyph="72,2" class="t constructor">WithCancellationContinuationWrapper</a>(<a href="@0@mscorlib/A.html#9147ae6f76643aae" class="t t">Action</a> <span id="r54 rd" class="r54 r">originalContinuation</span>, <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r55 rd" class="r55 r">cancellationToken</span>)
            {
                <a href="@0@mscorlib/A.html#9147ae6f76643aae" class="t t">Action</a> <span id="r56 rd" class="r56 r">continuation</span> = <a href="#3ffdd17085968c92" class="i method">ContinuationImplementation</a>;
                <a href="#8ac35d05f5fca58e" class="i field">_originalContinuation</a> = <span class="r54 r">originalContinuation</span>;
                <a href="#229bacd0be04b624" class="i field">_registration</a> = <span class="r55 r">cancellationToken</span>.<a href="@0@mscorlib/A.html#b4627f3ac7f722a5" class="i method">Register</a>(<span class="r56 r">continuation</span>);
                <a href="#4e22611eb7944971" class="i property">Continuation</a> = <span class="r56 r">continuation</span>;
            }
 
            <b>public</b> <a href="@0@mscorlib/A.html#9147ae6f76643aae" class="t t">Action</a> <a id="4e22611eb7944971" href="../../R/4e22611eb7944971.html" target="n" data-glyph="102,2" class="i property">Continuation</a> { <b>get</b>; }
 
            <b>private void</b> <a id="3ffdd17085968c92" href="../../R/3ffdd17085968c92.html" target="n" data-glyph="76,2" class="i method">ContinuationImplementation</a>()
            {
                <a href="@0@mscorlib/A.html#9147ae6f76643aae" class="t t">Action</a> <span id="r57 rd" class="r57 r">originalContinuation</span> = <a href="@0@mscorlib/A.html#8792520ddc6dadcb" class="t t">Interlocked</a>.<a href="@0@mscorlib/A.html#19d00939423c949f" class="i method">Exchange</a>(<b>ref</b> <a href="#8ac35d05f5fca58e" class="i field">_originalContinuation</a>, <b>null</b>);
                <b>if</b> (<span class="r57 r">originalContinuation</span> != <b>null</b>)
                {
                    <a href="#229bacd0be04b624" class="i field">_registration</a>.<a href="@0@mscorlib/A.html#f05a1300415bcfde" class="i method">Dispose</a>();
                    <span class="r57 r">originalContinuation</span>();
                }
            }
        }
    }
}
</pre></td></tr></table></div></body></html>

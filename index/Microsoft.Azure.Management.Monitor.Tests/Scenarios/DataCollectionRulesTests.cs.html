<!DOCTYPE html>
<html><head><title>DataCollectionRulesTests.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(592);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Microsoft.Azure.Management.Monitor.Tests/Scenarios/DataCollectionRulesTests.cs" target="_top">Scenarios\DataCollectionRulesTests.cs</a><br/></td><td><a class="blueLink" href="https://github.com/Azure/azure-sdk-for-net/tree/main/sdk/monitor/Microsoft.Azure.Management.Monitor/tests/Scenarios/DataCollectionRulesTests.cs" target="_blank">View on GitHub</a></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Microsoft.Azure.Management.Monitor.Tests" target="_top">Microsoft.Azure.Management.Monitor.Tests.csproj</a> (Microsoft.Azure.Management.Monitor.Tests)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License. See License.txt in the project root for license information.</span>
 
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Net</span>;
<b>using</b> <span class="i n">Monitor</span>.<span class="i n">Tests</span>.<span class="i n">Helpers</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i n">Monitor</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i n">Monitor</span>.<span class="i n">Models</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Rest</span>.<span class="i n">ClientRuntime</span>.<span class="i n">Azure</span>.<span class="i n">TestFramework</span>;
<b>using</b> <span class="i n">Xunit</span>;
 
<b>namespace</b> <span class="i n">Monitor</span>.<span class="i n">Tests</span>.<span class="i n">Scenarios</span>
{
    <span class="c">/**</span><span class="c"> commenting this out because DataCollectionRules have a different error response format from everything else in AzureMonitor and so they can&#39;t be built with this SDK.</span>
    <span class="c">public class DataCollectionRulesTests : TestBase</span>
    <span class="c">{</span>
        <span class="c">private const string ResourceGroupName = &quot;netSdkTestRecord&quot;;</span>
        <span class="c">private const string vmResourceUri = &quot;/subscriptions/b97224f3-b199-49b1-84c7-25b09e8fbf84/resourcegroups/netSdkTestRecord/providers/Microsoft.Compute/virtualMachines/vm-dcrTestRecordSession&quot;;</span>
 
        <span class="c">private RecordedDelegatingHandler handler;</span>
 
        <span class="c">public DataCollectionRulesTests()</span>
            <span class="c">: base()</span>
        <span class="c">{</span>
            <span class="c">handler = new RecordedDelegatingHandler { SubsequentStatusCodeToReturn = HttpStatusCode.OK };</span>
        <span class="c">}</span>
 
        <span class="c">#region DCR</span>
        <span class="c">[Fact]</span>
        <span class="c">[Trait(&quot;Category&quot;, &quot;Scenario&quot;)]</span>
        <span class="c">public void CreateDcrTest()</span>
        <span class="c">{</span>
            <span class="c">using (MockContext context = MockContext.Start(this.GetType()))</span>
            <span class="c">{</span>
                <span class="c">var dcrName = &quot;dcrSdkCreateTest&quot;;</span>
                <span class="c">MonitorManagementClient insightsClient = GetMonitorManagementClient(context, handler);</span>
 
                <span class="c">var dcr = CreateDcr(insightsClient, dcrName);</span>
                <span class="c">Assert.NotNull(dcr);</span>
 
                <span class="c">var dcrFromGet = insightsClient.DataCollectionRules.Get(ResourceGroupName, dcrName);</span>
                <span class="c">insightsClient.DataCollectionRules.Delete(ResourceGroupName, dcrName);</span>
 
                <span class="c">AreEqual(dcr, dcrFromGet);</span>
            <span class="c">}</span>
        <span class="c">}</span>
 
        <span class="c">[Fact]</span>
        <span class="c">[Trait(&quot;Category&quot;, &quot;Scenario&quot;)]</span>
        <span class="c">public void DeleteDcrTest()</span>
        <span class="c">{</span>
            <span class="c">using (MockContext context = MockContext.Start(this.GetType()))</span>
            <span class="c">{</span>
                <span class="c">var dcrName = &quot;dcrSdkDeleteTest&quot;;</span>
                <span class="c">MonitorManagementClient insightsClient = GetMonitorManagementClient(context, handler);</span>
                <span class="c">var dcrDelete = CreateDcr(insightsClient, dcrName); ;</span>
 
                <span class="c">Assert.NotNull(dcrDelete);</span>
 
                <span class="c">var dcrList = insightsClient.DataCollectionRules.ListByResourceGroup(ResourceGroupName).ToList();</span>
                <span class="c">Assert.Equal(1, dcrList.Count(x =&gt; x.Name == dcrName));</span>
 
                <span class="c">insightsClient.DataCollectionRules.Delete(ResourceGroupName, dcrName);</span>
 
                <span class="c">dcrList = insightsClient.DataCollectionRules.ListByResourceGroup(ResourceGroupName).ToList();</span>
                <span class="c">Assert.Equal(0, dcrList.Count(x =&gt; x.Name == dcrName));</span>
            <span class="c">}</span>
        <span class="c">}</span>
 
        <span class="c">[Fact]</span>
        <span class="c">[Trait(&quot;Category&quot;, &quot;Scenario&quot;)]</span>
        <span class="c">public void ListDcrBySubscriptionTest()</span>
        <span class="c">{</span>
            <span class="c">using (MockContext context = MockContext.Start(this.GetType()))</span>
            <span class="c">{</span>
                <span class="c">string[] dcrNames = { &quot;dcrListOneTest&quot;, &quot;dcrListTwoTest&quot;, &quot;dcrListThreeTest&quot;, &quot;dcrListFourTest&quot; }; ;</span>
                <span class="c">MonitorManagementClient insightsClient = GetMonitorManagementClient(context, handler);</span>
                <span class="c">foreach (var dcrName in dcrNames) _ = CreateDcr(insightsClient, dcrName);</span>
 
                <span class="c">var dcrList = insightsClient.DataCollectionRules.ListBySubscription().ToList();</span>
 
                <span class="c">Assert.NotNull(dcrList);</span>
                <span class="c">Assert.True(dcrList.Count &gt;= 3, &quot;List must be greather than 3 items&quot;);</span>
 
                <span class="c">foreach (var dcrName in dcrNames)</span>
                <span class="c">{</span>
                    <span class="c">Assert.Equal(1, dcrList.Count(x =&gt; x.Name == dcrName));</span>
                <span class="c">}</span>
 
                <span class="c">foreach (var dcrName in dcrNames) insightsClient.DataCollectionRules.Delete(ResourceGroupName, dcrName);</span>
            <span class="c">}</span>
        <span class="c">}</span>
 
        <span class="c">[Fact]</span>
        <span class="c">[Trait(&quot;Category&quot;, &quot;Scenario&quot;)]</span>
        <span class="c">public void UpdateDcrTest()</span>
        <span class="c">{</span>
            <span class="c">using (MockContext context = MockContext.Start(this.GetType()))</span>
            <span class="c">{</span>
                <span class="c">var dcrName = &quot;dcrSdkUpdateTest&quot;;</span>
                <span class="c">MonitorManagementClient insightsClient = GetMonitorManagementClient(context, handler);</span>
 
                <span class="c">var dcr = CreateDcr(insightsClient, dcrName);</span>
                <span class="c">Assert.NotNull(dcr);</span>
 
                <span class="c">dcr = insightsClient.DataCollectionRules.Update(ResourceGroupName, dcrName, new Dictionary</span><span class="c">&lt;</span><span class="c">string</span><span class="c">,</span> <span class="c">string</span><span class="c">&gt;</span>
                <span class="c">{</span>
                    <span class="c">{ &quot;TagUpdated&quot;, &quot;ValueUpdate&quot; }</span>
                <span class="c">});</span>
                <span class="c">Assert.NotNull(dcr);</span>
 
                <span class="c">var dcrList = insightsClient.DataCollectionRules.ListByResourceGroup(ResourceGroupName).ToList();</span>
                <span class="c">dcr = dcrList.FirstOrDefault(x =&gt; x.Name == dcrName);</span>
                <span class="c">Assert.NotNull(dcr);</span>
                <span class="c">Assert.True(dcr.Tags.Count == 1);</span>
                <span class="c">Assert.Equal(&quot;TagUpdated&quot;, dcr.Tags.Keys.First());</span>
                <span class="c">Assert.Equal(&quot;ValueUpdate&quot;, dcr.Tags[&quot;TagUpdated&quot;]);</span>
 
                <span class="c">insightsClient.DataCollectionRules.Delete(ResourceGroupName, dcrName);</span>
            <span class="c">}</span>
        <span class="c">}</span>
 
        <span class="c">[Fact]</span>
        <span class="c">[Trait(&quot;Category&quot;, &quot;Scenario&quot;)]</span>
        <span class="c">public void ErrorResponseDcrTest()</span>
        <span class="c">{</span>
            <span class="c">using (MockContext context = MockContext.Start(this.GetType()))</span>
            <span class="c">{</span>
                <span class="c">var dcrName = &quot;dcrError&quot;;</span>
                <span class="c">MonitorManagementClient insightsClient = GetMonitorManagementClient(context, handler);</span>
 
                <span class="c">var dcrWithBadStream = new DataCollectionRuleResource</span>
                <span class="c">{</span>
                    <span class="c">Location = &quot;eastus&quot;,</span>
                    <span class="c">DataSources = new DataCollectionRuleDataSources</span>
                    <span class="c">{</span>
                        <span class="c">PerformanceCounters = new List</span><span class="c">&lt;</span><span class="c">PerfCounterDataSource</span><span class="c">&gt;</span>
                            <span class="c">{</span>
                                <span class="c">new PerfCounterDataSource</span>
                                <span class="c">{</span>
                                    <span class="c">Name = &quot;perfCounterDataSource1&quot;,</span>
                                    <span class="c">Streams = new List</span><span class="c">&lt;</span><span class="c">string</span><span class="c">&gt;</span><span class="c"> { &quot;Microsoft-UnknownStream&quot; },</span>
                                    <span class="c">SamplingFrequencyInSeconds = 10,</span>
                                    <span class="c">CounterSpecifiers = new List</span><span class="c">&lt;</span><span class="c">string</span><span class="c">&gt;</span>
                                    <span class="c">{</span>
                                        <span class="c">&quot;\\Memory\\% Committed Bytes In Use&quot;,</span>
                                        <span class="c">&quot;\\Memory\\Available Bytes&quot;,</span>
                                        <span class="c">&quot;\\Network Interface(*)\\Bytes Received/sec&quot;,</span>
                                    <span class="c">}</span>
                                <span class="c">}</span>
                            <span class="c">}</span>
                    <span class="c">},</span>
                    <span class="c">Destinations = new DataCollectionRuleDestinations</span>
                    <span class="c">{</span>
                        <span class="c">AzureMonitorMetrics = new DestinationsSpecAzureMonitorMetrics { Name = &quot;ammDestination&quot; }</span>
                    <span class="c">},</span>
                    <span class="c">DataFlows = new List</span><span class="c">&lt;</span><span class="c">DataFlow</span><span class="c">&gt;</span>
                        <span class="c">{</span>
                            <span class="c">new DataFlow</span>
                            <span class="c">{</span>
                                <span class="c">Streams = new List</span><span class="c">&lt;</span><span class="c">string</span><span class="c">&gt;</span><span class="c">{ &quot;Microsoft-UnknownStream&quot; },</span>
                                <span class="c">Destinations = new List</span><span class="c">&lt;</span><span class="c">string</span><span class="c">&gt;</span><span class="c">{ &quot;ammDestination&quot; }</span>
                            <span class="c">}</span>
                        <span class="c">}</span>
                <span class="c">};</span>
 
                <span class="c">try</span>
                <span class="c">{</span>
                    <span class="c">insightsClient.DataCollectionRules.Create(ResourceGroupName, dcrName, dcrWithBadStream);</span>
                    <span class="c">Assert.True(false, &quot;ErrorResponseException expected.&quot;);</span>
                <span class="c">}</span>
                <span class="c">catch (ErrorResponseCommonV2Exception monitorError) </span>
                <span class="c">{</span>
                    <span class="c">Assert.NotNull(monitorError.Body?.Error);</span>
                    <span class="c">Assert.Equal(&quot;Operation returned an invalid status code &#39;BadRequest&#39;&quot;, monitorError.Message);</span>
 
                    <span class="c">var errorDetail = monitorError.Body.Error;</span>
                    <span class="c">Assert.Equal(&quot;Data collection rule is invalid&quot;, errorDetail.Message);</span>
                    <span class="c">Assert.Equal(&quot;InvalidPayload&quot;, errorDetail.Code);</span>
 
                    <span class="c">Assert.NotNull(errorDetail.Details);</span>
                    <span class="c">Assert.Equal(2, errorDetail.Details.Count);</span>
 
                    <span class="c">var errorDetailOne = errorDetail.Details[0];</span>
                    <span class="c">Assert.Equal(&quot;InvalidStream&quot;, errorDetailOne.Code);</span>
                    <span class="c">Assert.Equal(&quot;&#39;Streams&#39; item 0 must have one of the allowed values: Microsoft-InsightsMetrics,Microsoft-Perf.&quot;, errorDetailOne.Message);</span>
                    <span class="c">Assert.Equal(&quot;Properties.DataSources.PerformanceCounters[0].Streams[0]&quot;, errorDetailOne.Target);</span>
 
                    <span class="c">var errorDetailTwo = errorDetail.Details[1];</span>
                    <span class="c">Assert.Equal(&quot;InvalidStream&quot;, errorDetailTwo.Code);</span>
                    <span class="c">Assert.Equal(&quot;&#39;Streams&#39; item 0 must have one of the allowed values: Microsoft-AntiMalwareStatus,Microsoft-Auditd,Microsoft-CiscoAsa,Microsoft-CommonSecurityLog,Microsoft-ComputerGroup,Microsoft-ConfigurationChange,Microsoft-ContainerInventory,Microsoft-ContainerLog,Microsoft-ContainerLogV2,Microsoft-ContainerNodeInventory,Microsoft-DefenderForSqlAlerts,Microsoft-DefenderForSqlLogins,Microsoft-DefenderForSqlScanEvents,Microsoft-DefenderForSqlScanResults,Microsoft-DefenderForSqlTelemetry,Microsoft-Event,Microsoft-FirewallLog,Microsoft-HealthStateChange,Microsoft-Heartbeat,Microsoft-InsightsMetrics,Microsoft-KubeEvents,Microsoft-KubeHealth,Microsoft-KubeMonAgentEvents,Microsoft-KubeNodeInventory,Microsoft-KubePodInventory,Microsoft-KubePVInventory,Microsoft-KubeServices,Microsoft-NWConnectionMonitorPathResult,Microsoft-NWConnectionMonitorTestResult,Microsoft-OperationLog,Microsoft-OperationJson,Microsoft-Perf,Microsoft-ProcessInvestigator,Microsoft-ProtectionStatus,Microsoft-RomeDetectionEvent,Microsoft-SecurityBaseline,Microsoft-SecurityBaselineSummary,Microsoft-SecurityEvent,Microsoft-ServiceMap,Microsoft-SqlAtpStatus-DefenderForSql,Microsoft-Syslog,Microsoft-WindowsEvent,Microsoft-WorkloadDiagnosticLogs,Microsoft-CommonSecurityLog-Raw.&quot;, errorDetailTwo.Message);</span>
                    <span class="c">Assert.Equal(&quot;Properties.DataFlows[0].Streams[0]&quot;, errorDetailTwo.Target);</span>
                <span class="c">}</span>
                <span class="c">catch (System.Exception)</span>
                <span class="c">{</span>
                    <span class="c">Assert.True(false, &quot;General exception not expected&quot;);</span>
                <span class="c">}</span>
            <span class="c">}</span>
        <span class="c">}</span>
        <span class="c">#endregion</span>
 
        <span class="c">#region DCRA</span>
        <span class="c">[Fact]</span>
        <span class="c">[Trait(&quot;Category&quot;, &quot;Scenario&quot;)]</span>
        <span class="c">public void DcrAssociationTest()</span>
        <span class="c">{</span>
            <span class="c">using (MockContext context = MockContext.Start(this.GetType()))</span>
            <span class="c">{</span>
                <span class="c">var dcrName = &quot;dcraSdkCreateTest&quot;;</span>
                <span class="c">var dcraName = &quot;dcraSdkCreateTestAssoc&quot;;</span>
                <span class="c">MonitorManagementClient insightsClient = GetMonitorManagementClient(context, handler);</span>
 
                <span class="c">var dcr = CreateDcr(insightsClient, dcrName);</span>
                <span class="c">Assert.NotNull(dcr);</span>
 
                <span class="c">var dcra = insightsClient.DataCollectionRuleAssociations.Create(vmResourceUri, dcraName, new DataCollectionRuleAssociationProxyOnlyResource</span>
                <span class="c">{</span>
                    <span class="c">DataCollectionRuleId = dcr.Id,</span>
                    <span class="c">Description = &quot;Assoc with virtual machine&quot;</span>
                <span class="c">});</span>
                <span class="c">Assert.NotNull(dcra);</span>
 
                <span class="c">var dcraListByRule = insightsClient.DataCollectionRuleAssociations.ListByRule(ResourceGroupName, dcrName);</span>
                <span class="c">Assert.Equal(1, dcraListByRule.Count(x =&gt; x.Name == dcraName.ToLower()));</span>
 
                <span class="c">var dcraListByResource = insightsClient.DataCollectionRuleAssociations.ListByResource(vmResourceUri);</span>
                <span class="c">Assert.Equal(1, dcraListByResource.Count(x =&gt; x.Name == dcraName));</span>
 
                <span class="c">var dcraFromGet = insightsClient.DataCollectionRuleAssociations.Get(vmResourceUri, dcraName);</span>
                <span class="c">AreEqual(dcra, dcraFromGet);</span>
 
                <span class="c">insightsClient.DataCollectionRuleAssociations.Delete(vmResourceUri, dcra.Name);</span>
                <span class="c">insightsClient.DataCollectionRules.Delete(ResourceGroupName, dcrName);</span>
            <span class="c">}</span>
        <span class="c">}</span>
        <span class="c">#endregion</span>
 
        <span class="c">#region DCRE</span>
        <span class="c">[Fact]</span>
        <span class="c">[Trait(&quot;Category&quot;, &quot;Scenario&quot;)]</span>
        <span class="c">public void CreateDceTest()</span>
        <span class="c">{</span>
            <span class="c">using (MockContext context = MockContext.Start(this.GetType()))</span>
            <span class="c">{</span>
                <span class="c">var dceName = &quot;createTestDce&quot;;</span>
                <span class="c">MonitorManagementClient insightsClient = GetMonitorManagementClient(context, handler);</span>
 
                <span class="c">var dce = CreateDce(insightsClient, dceName);</span>
                <span class="c">Assert.NotNull(dce);</span>
 
                <span class="c">var dceFromGet = insightsClient.DataCollectionEndpoints.Get(ResourceGroupName, dceName);</span>
                <span class="c">insightsClient.DataCollectionEndpoints.Delete(ResourceGroupName, dceName);</span>
 
                <span class="c">AreEqual(dce, dceFromGet);</span>
            <span class="c">}</span>
        <span class="c">}</span>
 
        <span class="c">[Fact]</span>
        <span class="c">[Trait(&quot;Category&quot;, &quot;Scenario&quot;)]</span>
        <span class="c">public void DeleteDceTest()</span>
        <span class="c">{</span>
            <span class="c">using (MockContext context = MockContext.Start(this.GetType()))</span>
            <span class="c">{</span>
                <span class="c">var dceName = &quot;deleteTestDce&quot;;</span>
                <span class="c">MonitorManagementClient insightsClient = GetMonitorManagementClient(context, handler);</span>
                <span class="c">var dceDelete = CreateDce(insightsClient, dceName); ;</span>
 
                <span class="c">Assert.NotNull(dceDelete);</span>
 
                <span class="c">var dceList = insightsClient.DataCollectionEndpoints.ListByResourceGroup(ResourceGroupName).ToList();</span>
                <span class="c">Assert.Equal(1, dceList.Count(x =&gt; x.Name == dceName));</span>
 
                <span class="c">insightsClient.DataCollectionEndpoints.Delete(ResourceGroupName, dceName);</span>
 
                <span class="c">dceList = insightsClient.DataCollectionEndpoints.ListByResourceGroup(ResourceGroupName).ToList();</span>
                <span class="c">Assert.Equal(0, dceList.Count(x =&gt; x.Name == dceName));</span>
            <span class="c">}</span>
        <span class="c">}</span>
 
        <span class="c">[Fact]</span>
        <span class="c">[Trait(&quot;Category&quot;, &quot;Scenario&quot;)]</span>
        <span class="c">public void ListDceBySubscriptionTest()</span>
        <span class="c">{</span>
            <span class="c">using (MockContext context = MockContext.Start(this.GetType()))</span>
            <span class="c">{</span>
                <span class="c">string[] dceNames = { &quot;dceListOneTest&quot;, &quot;dceListTwoTest&quot;, &quot;dceListThreeTest&quot;, &quot;dceListFourTest&quot; }; ;</span>
                <span class="c">MonitorManagementClient insightsClient = GetMonitorManagementClient(context, handler);</span>
                <span class="c">foreach (var dceName in dceNames) _ = CreateDce(insightsClient, dceName);</span>
 
                <span class="c">var dceList = insightsClient.DataCollectionEndpoints.ListBySubscription().ToList();</span>
 
                <span class="c">Assert.NotNull(dceList);</span>
                <span class="c">Assert.True(dceList.Count &gt;= 3, &quot;List must be greather than 3 items&quot;);</span>
 
                <span class="c">foreach (var dceName in dceNames)</span>
                <span class="c">{</span>
                    <span class="c">Assert.Equal(1, dceList.Count(x =&gt; x.Name == dceName));</span>
                <span class="c">}</span>
 
                <span class="c">foreach (var dceName in dceNames) insightsClient.DataCollectionEndpoints.Delete(ResourceGroupName, dceName);</span>
            <span class="c">}</span>
        <span class="c">}</span>
 
        <span class="c">[Fact]</span>
        <span class="c">[Trait(&quot;Category&quot;, &quot;Scenario&quot;)]</span>
        <span class="c">public void UpdateDceTest()</span>
        <span class="c">{</span>
            <span class="c">using (MockContext context = MockContext.Start(this.GetType()))</span>
            <span class="c">{</span>
                <span class="c">var dceName = &quot;dceSdkUpdateTest&quot;;</span>
                <span class="c">MonitorManagementClient insightsClient = GetMonitorManagementClient(context, handler);</span>
 
                <span class="c">var dce = CreateDce(insightsClient, dceName);</span>
                <span class="c">Assert.NotNull(dce);</span>
 
                <span class="c">dce = insightsClient.DataCollectionEndpoints.Update(ResourceGroupName, dceName, new Dictionary</span><span class="c">&lt;</span><span class="c">string</span><span class="c">,</span> <span class="c">string</span><span class="c">&gt;</span>
                <span class="c">{</span>
                    <span class="c">{ &quot;TagUpdated&quot;, &quot;ValueUpdate&quot; }</span>
                <span class="c">});</span>
                <span class="c">Assert.NotNull(dce);</span>
 
                <span class="c">var dcrList = insightsClient.DataCollectionEndpoints.ListByResourceGroup(ResourceGroupName).ToList();</span>
                <span class="c">dce = dcrList.FirstOrDefault(x =&gt; x.Name == dceName);</span>
                <span class="c">Assert.NotNull(dce);</span>
                <span class="c">Assert.True(dce.Tags.Count == 1);</span>
                <span class="c">Assert.Equal(&quot;TagUpdated&quot;, dce.Tags.Keys.First());</span>
                <span class="c">Assert.Equal(&quot;ValueUpdate&quot;, dce.Tags[&quot;TagUpdated&quot;]);</span>
 
                <span class="c">insightsClient.DataCollectionEndpoints.Delete(ResourceGroupName, dceName);</span>
            <span class="c">}</span>
        <span class="c">}</span>
        <span class="c">#endregion</span>
 
        <span class="c">#region Helpers</span>
        <span class="c">private DataCollectionRuleResource CreateDcr(MonitorManagementClient insightsClient, string dcrName)</span>
        <span class="c">{</span>
            <span class="c">return insightsClient.DataCollectionRules.Create(</span>
                    <span class="c">resourceGroupName: ResourceGroupName,</span>
                    <span class="c">dataCollectionRuleName: dcrName,</span>
                    <span class="c">new DataCollectionRuleResource</span>
                    <span class="c">{</span>
                        <span class="c">Location = &quot;eastus&quot;,</span>
                        <span class="c">Tags = new Dictionary</span><span class="c">&lt;</span><span class="c">string</span><span class="c">,</span> <span class="c">string</span><span class="c">&gt;</span>
                        <span class="c">{</span>
                            <span class="c">{ &quot;tagOne&quot;, &quot;valueOne&quot; },</span>
                            <span class="c">{ &quot;tagTwo&quot;, &quot;valueTwo&quot; }</span>
                        <span class="c">},</span>
                        <span class="c">DataSources = new DataCollectionRuleDataSources</span>
                        <span class="c">{</span>
                            <span class="c">PerformanceCounters = new List</span><span class="c">&lt;</span><span class="c">PerfCounterDataSource</span><span class="c">&gt;</span>
                            <span class="c">{</span>
                                <span class="c">new PerfCounterDataSource</span>
                                <span class="c">{</span>
                                    <span class="c">Name = &quot;perfCounterDataSource1&quot;,</span>
                                    <span class="c">Streams = new List</span><span class="c">&lt;</span><span class="c">string</span><span class="c">&gt;</span><span class="c"> { &quot;Microsoft-InsightsMetrics&quot; },</span>
                                    <span class="c">SamplingFrequencyInSeconds = 10,</span>
                                    <span class="c">CounterSpecifiers = new List</span><span class="c">&lt;</span><span class="c">string</span><span class="c">&gt;</span>
                                    <span class="c">{</span>
                                        <span class="c">&quot;\\Memory\\% Committed Bytes In Use&quot;,</span>
                                        <span class="c">&quot;\\Memory\\Available Bytes&quot;,</span>
                                        <span class="c">&quot;\\Network Interface(*)\\Bytes Received/sec&quot;,</span>
                                    <span class="c">}</span>
                                <span class="c">}</span>
                            <span class="c">}</span>
                        <span class="c">},</span>
                        <span class="c">Destinations = new DataCollectionRuleDestinations</span>
                        <span class="c">{</span>
                            <span class="c">AzureMonitorMetrics = new DestinationsSpecAzureMonitorMetrics { Name = &quot;ammDestination&quot; }</span>
                        <span class="c">},</span>
                        <span class="c">DataFlows = new List</span><span class="c">&lt;</span><span class="c">DataFlow</span><span class="c">&gt;</span>
                        <span class="c">{</span>
                            <span class="c">new DataFlow</span>
                            <span class="c">{</span>
                                <span class="c">Streams = new List</span><span class="c">&lt;</span><span class="c">string</span><span class="c">&gt;</span><span class="c">{ &quot;Microsoft-InsightsMetrics&quot; },</span>
                                <span class="c">Destinations = new List</span><span class="c">&lt;</span><span class="c">string</span><span class="c">&gt;</span><span class="c">{ &quot;ammDestination&quot; }</span>
                            <span class="c">}</span>
                        <span class="c">}</span>
                    <span class="c">}</span>
                <span class="c">);</span>
        <span class="c">}</span>
 
        <span class="c">private DataCollectionEndpointResource CreateDce(MonitorManagementClient insightsClient, string dceName)</span>
        <span class="c">{</span>
            <span class="c">return insightsClient.DataCollectionEndpoints.Create(</span>
                <span class="c">resourceGroupName: ResourceGroupName,</span>
                <span class="c">dataCollectionEndpointName: dceName,</span>
                <span class="c">body: new DataCollectionEndpointResource</span>
                <span class="c">{</span>
                    <span class="c">Location = &quot;eastus2euap&quot;,</span>
                    <span class="c">Tags = new Dictionary</span><span class="c">&lt;</span><span class="c">string</span><span class="c">,</span> <span class="c">string</span><span class="c">&gt;</span>
                        <span class="c">{</span>
                            <span class="c">{ &quot;tagOne&quot;, &quot;valueOne&quot; },</span>
                            <span class="c">{ &quot;tagTwo&quot;, &quot;valueTwo&quot; }</span>
                        <span class="c">},</span>
                    <span class="c">NetworkAcls = new DataCollectionEndpointNetworkAcls { PublicNetworkAccess = &quot;Enabled&quot; }</span>
                <span class="c">});</span>
        <span class="c">}</span>
        <span class="c">#endregion</span>
 
        <span class="c">#region DCR AreEqual Helpers</span>
        <span class="c">private static void AreEqual(DataCollectionRuleResource exp, DataCollectionRuleResource act)</span>
        <span class="c">{</span>
            <span class="c">if (exp != null)</span>
            <span class="c">{</span>
                <span class="c">Assert.Equal(exp.Id, act.Id);</span>
                <span class="c">Assert.Equal(exp.Name, act.Name);</span>
                <span class="c">Assert.Equal(exp.Description, act.Description);</span>
                <span class="c">Assert.Equal(exp.Etag, act.Etag);</span>
                <span class="c">Assert.Equal(exp.Location, act.Location);</span>
                <span class="c">Assert.Equal(exp.ProvisioningState, act.ProvisioningState);</span>
                <span class="c">Assert.Equal(exp.Type, act.Type);</span>
                <span class="c">Utilities.AreEqual(exp.Tags, act.Tags);</span>
 
                <span class="c">AreEqual(exp.DataFlows, act.DataFlows);</span>
                <span class="c">AreEqual(exp.DataSources, act.DataSources);</span>
                <span class="c">AreEqual(exp.Destinations, act.Destinations);</span>
            <span class="c">}</span>
        <span class="c">}</span>
 
        <span class="c">private static void AreEqual(IList</span><span class="c">&lt;</span><span class="c">DataFlow</span><span class="c">&gt;</span><span class="c"> exp, IList</span><span class="c">&lt;</span><span class="c">DataFlow</span><span class="c">&gt;</span><span class="c"> act)</span>
        <span class="c">{</span>
            <span class="c">if (exp != null)</span>
            <span class="c">{</span>
                <span class="c">for (int i = 0; i </span><span class="c">&lt;</span> <span class="c">exp.Count</span><span class="c">;</span> <span class="c">i</span><span class="c">+</span><span class="c">+</span><span class="c">)</span>
                <span class="c">{</span>
                    <span class="c">AreEqual</span><span class="c">(</span><span class="c">exp</span><span class="c">[</span><span class="c">i</span><span class="c">]</span><span class="c">,</span> <span class="c">act</span><span class="c">[</span><span class="c">i</span><span class="c">]</span><span class="c">)</span><span class="c">;</span>
                <span class="c">}</span>
            <span class="c">}</span>
        <span class="c">}</span>
 
        <span class="c">private</span> <span class="c">static</span> <span class="c">void</span> <span class="c">AreEqual</span><span class="c">(</span><span class="c">DataCollectionRuleDataSources</span> <span class="c">exp</span><span class="c">,</span> <span class="c">DataCollectionRuleDataSources</span> <span class="c">act</span><span class="c">)</span>
        <span class="c">{</span>
            <span class="c">if</span> <span class="c">(</span><span class="c">exp</span> <span class="c">!</span><span class="c">=</span> <span class="c">null</span><span class="c">)</span>
            <span class="c">{</span>
                <span class="c">if</span> <span class="c">(</span><span class="c">exp.PerformanceCounters</span> <span class="c">!</span><span class="c">=</span> <span class="c">null</span><span class="c">)</span>
                <span class="c">{</span>
                    <span class="c">for</span> <span class="c">(</span><span class="c">int</span> <span class="c">i</span> <span class="c">=</span> <span class="c">0</span><span class="c">;</span> <span class="c">i</span><span class="c"> </span><span class="c">&lt;</span> <span class="c">exp.PerformanceCounters.Count</span><span class="c">;</span> <span class="c">i</span><span class="c">+</span><span class="c">+</span><span class="c">)</span>
                    <span class="c">{</span>
                        <span class="c">AreEqual</span><span class="c">(</span><span class="c">exp.PerformanceCounters</span><span class="c">[</span><span class="c">i</span><span class="c">]</span><span class="c">,</span> <span class="c">act.PerformanceCounters</span><span class="c">[</span><span class="c">i</span><span class="c">]</span><span class="c">)</span><span class="c">;</span>
                    <span class="c">}</span>
                <span class="c">}</span>
 
                <span class="c">if</span> <span class="c">(</span><span class="c">exp.WindowsEventLogs</span> <span class="c">!</span><span class="c">=</span> <span class="c">null</span><span class="c">)</span>
                <span class="c">{</span>
                    <span class="c">for</span> <span class="c">(</span><span class="c">int</span> <span class="c">i</span> <span class="c">=</span> <span class="c">0</span><span class="c">;</span> <span class="c">i</span><span class="c"> </span><span class="c">&lt;</span> <span class="c">exp.WindowsEventLogs.Count</span><span class="c">;</span> <span class="c">i</span><span class="c">+</span><span class="c">+</span><span class="c">)</span>
                    <span class="c">{</span>
                        <span class="c">AreEqual</span><span class="c">(</span><span class="c">exp.WindowsEventLogs</span><span class="c">[</span><span class="c">i</span><span class="c">]</span><span class="c">,</span> <span class="c">act.WindowsEventLogs</span><span class="c">[</span><span class="c">i</span><span class="c">]</span><span class="c">)</span><span class="c">;</span>
                    <span class="c">}</span>
                <span class="c">}</span>
 
                <span class="c">if</span> <span class="c">(</span><span class="c">exp.Syslog</span> <span class="c">!</span><span class="c">=</span> <span class="c">null</span><span class="c">)</span>
                <span class="c">{</span>
                    <span class="c">for</span> <span class="c">(</span><span class="c">int</span> <span class="c">i</span> <span class="c">=</span> <span class="c">0</span><span class="c">;</span> <span class="c">i</span><span class="c"> </span><span class="c">&lt;</span> <span class="c">exp.Syslog.Count</span><span class="c">;</span> <span class="c">i</span><span class="c">+</span><span class="c">+</span><span class="c">)</span>
                    <span class="c">{</span>
                        <span class="c">AreEqual</span><span class="c">(</span><span class="c">exp.Syslog</span><span class="c">[</span><span class="c">i</span><span class="c">]</span><span class="c">,</span> <span class="c">act.Syslog</span><span class="c">[</span><span class="c">i</span><span class="c">]</span><span class="c">)</span><span class="c">;</span>
                    <span class="c">}</span>
                <span class="c">}</span>
 
                <span class="c">if</span> <span class="c">(</span><span class="c">exp.Extensions</span> <span class="c">!</span><span class="c">=</span> <span class="c">null</span><span class="c">)</span>
                <span class="c">{</span>
                    <span class="c">for</span> <span class="c">(</span><span class="c">int</span> <span class="c">i</span> <span class="c">=</span> <span class="c">0</span><span class="c">;</span> <span class="c">i</span><span class="c"> </span><span class="c">&lt;</span> <span class="c">exp.Extensions.Count</span><span class="c">;</span> <span class="c">i</span><span class="c">+</span><span class="c">+</span><span class="c">)</span>
                    <span class="c">{</span>
                        <span class="c">AreEqual</span><span class="c">(</span><span class="c">exp.Extensions</span><span class="c">[</span><span class="c">i</span><span class="c">]</span><span class="c">,</span> <span class="c">act.Extensions</span><span class="c">[</span><span class="c">i</span><span class="c">]</span><span class="c">)</span><span class="c">;</span>
                    <span class="c">}</span>
                <span class="c">}</span>
            <span class="c">}</span>
        <span class="c">}</span>
 
        <span class="c">private</span> <span class="c">static</span> <span class="c">void</span> <span class="c">AreEqual</span><span class="c">(</span><span class="c">DataCollectionRuleDestinations</span> <span class="c">exp</span><span class="c">,</span> <span class="c">DataCollectionRuleDestinations</span> <span class="c">act</span><span class="c">)</span>
        <span class="c">{</span>
            <span class="c">if</span> <span class="c">(</span><span class="c">exp</span> <span class="c">!</span><span class="c">=</span> <span class="c">null</span><span class="c">)</span>
            <span class="c">{</span>
                <span class="c">if</span> <span class="c">(</span><span class="c">exp.AzureMonitorMetrics</span> <span class="c">!</span><span class="c">=</span> <span class="c">null</span><span class="c">)</span>
                <span class="c">{</span>
                    <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.AzureMonitorMetrics.Name</span><span class="c">,</span> <span class="c">act.AzureMonitorMetrics.Name</span><span class="c">)</span><span class="c">;</span>
                <span class="c">}</span>
 
                <span class="c">if</span> <span class="c">(</span><span class="c">exp.LogAnalytics</span> <span class="c">!</span><span class="c">=</span> <span class="c">null</span><span class="c">)</span>
                <span class="c">{</span>
                    <span class="c">for</span> <span class="c">(</span><span class="c">int</span> <span class="c">i</span> <span class="c">=</span> <span class="c">0</span><span class="c">;</span> <span class="c">i</span><span class="c"> </span><span class="c">&lt;</span> <span class="c">exp.LogAnalytics.Count</span><span class="c">;</span> <span class="c">i</span><span class="c">+</span><span class="c">+</span><span class="c">)</span>
                    <span class="c">{</span>
                        <span class="c">AreEqual</span><span class="c">(</span><span class="c">exp.LogAnalytics</span><span class="c">[</span><span class="c">i</span><span class="c">]</span><span class="c">,</span> <span class="c">act.LogAnalytics</span><span class="c">[</span><span class="c">i</span><span class="c">]</span><span class="c">)</span><span class="c">;</span>
                    <span class="c">}</span>
                <span class="c">}</span>
            <span class="c">}</span>
        <span class="c">}</span>
 
        <span class="c">private</span> <span class="c">static</span> <span class="c">void</span> <span class="c">AreEqual</span><span class="c">(</span><span class="c">DataFlow</span> <span class="c">exp</span><span class="c">,</span> <span class="c">DataFlow</span> <span class="c">act</span><span class="c">)</span>
        <span class="c">{</span>
            <span class="c">if</span> <span class="c">(</span><span class="c">exp</span> <span class="c">!</span><span class="c">=</span> <span class="c">null</span><span class="c">)</span>
            <span class="c">{</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.Destinations.ToJson</span><span class="c">(</span><span class="c">)</span><span class="c">,</span> <span class="c">act.Destinations.ToJson</span><span class="c">(</span><span class="c">)</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.Streams.ToJson</span><span class="c">(</span><span class="c">)</span><span class="c">,</span> <span class="c">act.Streams.ToJson</span><span class="c">(</span><span class="c">)</span><span class="c">)</span><span class="c">;</span>
            <span class="c">}</span>
        <span class="c">}</span>
 
        <span class="c">private</span> <span class="c">static</span> <span class="c">void</span> <span class="c">AreEqual</span><span class="c">(</span><span class="c">PerfCounterDataSource</span> <span class="c">exp</span><span class="c">,</span> <span class="c">PerfCounterDataSource</span> <span class="c">act</span><span class="c">)</span>
        <span class="c">{</span>
            <span class="c">if</span> <span class="c">(</span><span class="c">exp</span> <span class="c">!</span><span class="c">=</span> <span class="c">null</span><span class="c">)</span>
            <span class="c">{</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.CounterSpecifiers.ToJson</span><span class="c">(</span><span class="c">)</span><span class="c">,</span> <span class="c">act.CounterSpecifiers.ToJson</span><span class="c">(</span><span class="c">)</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.Name</span><span class="c">,</span> <span class="c">act.Name</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.SamplingFrequencyInSeconds</span><span class="c">,</span> <span class="c">act.SamplingFrequencyInSeconds</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.Streams.ToJson</span><span class="c">(</span><span class="c">)</span><span class="c">,</span> <span class="c">act.Streams.ToJson</span><span class="c">(</span><span class="c">)</span><span class="c">)</span><span class="c">;</span>
            <span class="c">}</span>
        <span class="c">}</span>
 
        <span class="c">private</span> <span class="c">static</span> <span class="c">void</span> <span class="c">AreEqual</span><span class="c">(</span><span class="c">WindowsEventLogDataSource</span> <span class="c">exp</span><span class="c">,</span> <span class="c">WindowsEventLogDataSource</span> <span class="c">act</span><span class="c">)</span>
        <span class="c">{</span>
            <span class="c">if</span> <span class="c">(</span><span class="c">exp</span> <span class="c">!</span><span class="c">=</span> <span class="c">null</span><span class="c">)</span>
            <span class="c">{</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.Name</span><span class="c">,</span> <span class="c">act.Name</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.Streams.ToJson</span><span class="c">(</span><span class="c">)</span><span class="c">,</span> <span class="c">act.Streams.ToJson</span><span class="c">(</span><span class="c">)</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.XPathQueries.ToJson</span><span class="c">(</span><span class="c">)</span><span class="c">,</span> <span class="c">act.XPathQueries.ToJson</span><span class="c">(</span><span class="c">)</span><span class="c">)</span><span class="c">;</span>
            <span class="c">}</span>
        <span class="c">}</span>
 
        <span class="c">private</span> <span class="c">static</span> <span class="c">void</span> <span class="c">AreEqual</span><span class="c">(</span><span class="c">SyslogDataSource</span> <span class="c">exp</span><span class="c">,</span> <span class="c">SyslogDataSource</span> <span class="c">act</span><span class="c">)</span>
        <span class="c">{</span>
            <span class="c">if</span> <span class="c">(</span><span class="c">exp</span> <span class="c">!</span><span class="c">=</span> <span class="c">null</span><span class="c">)</span>
            <span class="c">{</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.FacilityNames.ToJson</span><span class="c">(</span><span class="c">)</span><span class="c">,</span> <span class="c">act.FacilityNames.ToJson</span><span class="c">(</span><span class="c">)</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.LogLevels.ToJson</span><span class="c">(</span><span class="c">)</span><span class="c">,</span> <span class="c">act.LogLevels.ToJson</span><span class="c">(</span><span class="c">)</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.Name</span><span class="c">,</span> <span class="c">act.Name</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.Streams.ToJson</span><span class="c">(</span><span class="c">)</span><span class="c">,</span> <span class="c">act.Streams.ToJson</span><span class="c">(</span><span class="c">)</span><span class="c">)</span><span class="c">;</span>
            <span class="c">}</span>
        <span class="c">}</span>
 
        <span class="c">private</span> <span class="c">static</span> <span class="c">void</span> <span class="c">AreEqual</span><span class="c">(</span><span class="c">ExtensionDataSource</span> <span class="c">exp</span><span class="c">,</span> <span class="c">ExtensionDataSource</span> <span class="c">act</span><span class="c">)</span>
        <span class="c">{</span>
            <span class="c">if</span> <span class="c">(</span><span class="c">exp</span> <span class="c">!</span><span class="c">=</span> <span class="c">null</span><span class="c">)</span>
            <span class="c">{</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.ExtensionName</span><span class="c">,</span> <span class="c">act.ExtensionName</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.ExtensionSettings.ToJson</span><span class="c">(</span><span class="c">)</span><span class="c">,</span> <span class="c">act.ExtensionSettings.ToJson</span><span class="c">(</span><span class="c">)</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.Name</span><span class="c">,</span> <span class="c">act.Name</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.Streams.ToJson</span><span class="c">(</span><span class="c">)</span><span class="c">,</span> <span class="c">act.Streams.ToJson</span><span class="c">(</span><span class="c">)</span><span class="c">)</span><span class="c">;</span>
            <span class="c">}</span>
        <span class="c">}</span>
 
        <span class="c">private</span> <span class="c">static</span> <span class="c">void</span> <span class="c">AreEqual</span><span class="c">(</span><span class="c">LogAnalyticsDestination</span> <span class="c">exp</span><span class="c">,</span> <span class="c">LogAnalyticsDestination</span> <span class="c">act</span><span class="c">)</span>
        <span class="c">{</span>
            <span class="c">if</span> <span class="c">(</span><span class="c">exp</span> <span class="c">!</span><span class="c">=</span> <span class="c">null</span><span class="c">)</span>
            <span class="c">{</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.Name</span><span class="c">,</span> <span class="c">act.Name</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.WorkspaceResourceId</span><span class="c">,</span> <span class="c">act.WorkspaceResourceId</span><span class="c">)</span><span class="c">;</span>
            <span class="c">}</span>
        <span class="c">}</span>
        <span class="c">#</span><span class="c">endregion</span>
 
        <span class="c">#</span><span class="c">region</span> <span class="c">DCRA</span> <span class="c">AreEqual</span> <span class="c">Helpers</span>
        <span class="c">private</span> <span class="c">static</span> <span class="c">void</span> <span class="c">AreEqual</span><span class="c">(</span><span class="c">DataCollectionRuleAssociationProxyOnlyResource</span> <span class="c">exp</span><span class="c">,</span> <span class="c">DataCollectionRuleAssociationProxyOnlyResource</span> <span class="c">act</span><span class="c">)</span>
        <span class="c">{</span>
            <span class="c">if</span> <span class="c">(</span><span class="c">exp</span> <span class="c">!</span><span class="c">=</span> <span class="c">null</span><span class="c">)</span>
            <span class="c">{</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.DataCollectionRuleId.ToLower</span><span class="c">(</span><span class="c">)</span><span class="c">,</span> <span class="c">act.DataCollectionRuleId.ToLower</span><span class="c">(</span><span class="c">)</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.Description</span><span class="c">,</span> <span class="c">act.Description</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.Etag</span><span class="c">,</span> <span class="c">act.Etag</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.Id</span><span class="c">,</span> <span class="c">act.Id</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.Name</span><span class="c">,</span> <span class="c">act.Name</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.ProvisioningState</span><span class="c">,</span> <span class="c">act.ProvisioningState</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.Type</span><span class="c">,</span> <span class="c">act.Type</span><span class="c">)</span><span class="c">;</span>
            <span class="c">}</span>
        <span class="c">}</span>
        <span class="c">#</span><span class="c">endregion</span>
 
        <span class="c">#</span><span class="c">region</span> <span class="c">DCE</span> <span class="c">AreEqual</span> <span class="c">Helpers</span>
        <span class="c">private</span> <span class="c">static</span> <span class="c">void</span> <span class="c">AreEqual</span><span class="c">(</span><span class="c">DataCollectionEndpointResource</span> <span class="c">exp</span><span class="c">,</span> <span class="c">DataCollectionEndpointResource</span> <span class="c">act</span><span class="c">)</span>
        <span class="c">{</span>
            <span class="c">if</span> <span class="c">(</span><span class="c">exp</span> <span class="c">!</span><span class="c">=</span> <span class="c">null</span><span class="c">)</span>
            <span class="c">{</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.Id</span><span class="c">,</span> <span class="c">act.Id</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.Name</span><span class="c">,</span> <span class="c">act.Name</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.Description</span><span class="c">,</span> <span class="c">act.Description</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.Etag</span><span class="c">,</span> <span class="c">act.Etag</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.Location</span><span class="c">,</span> <span class="c">act.Location</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.ProvisioningState</span><span class="c">,</span> <span class="c">act.ProvisioningState</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.Type</span><span class="c">,</span> <span class="c">act.Type</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.Kind</span><span class="c">,</span> <span class="c">act.Kind</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp.ImmutableId</span><span class="c">,</span> <span class="c">act.ImmutableId</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Utilities.AreEqual</span><span class="c">(</span><span class="c">exp.Tags</span><span class="c">,</span> <span class="c">act.Tags</span><span class="c">)</span><span class="c">;</span>
 
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp</span><span class="c">?</span><span class="c">.</span><span class="c">ConfigurationAccess</span><span class="c">?</span><span class="c">.</span><span class="c">Endpoint</span><span class="c">,</span> <span class="c">act</span><span class="c">?</span><span class="c">.</span><span class="c">ConfigurationAccess</span><span class="c">?</span><span class="c">.</span><span class="c">Endpoint</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp</span><span class="c">?</span><span class="c">.</span><span class="c">LogsIngestion</span><span class="c">?</span><span class="c">.</span><span class="c">Endpoint</span><span class="c">,</span> <span class="c">act</span><span class="c">?</span><span class="c">.</span><span class="c">LogsIngestion</span><span class="c">?</span><span class="c">.</span><span class="c">Endpoint</span><span class="c">)</span><span class="c">;</span>
                <span class="c">Assert.Equal</span><span class="c">(</span><span class="c">exp</span><span class="c">?</span><span class="c">.</span><span class="c">NetworkAcls</span><span class="c">?</span><span class="c">.</span><span class="c">PublicNetworkAccess</span><span class="c">,</span> <span class="c">act</span><span class="c">?</span><span class="c">.</span><span class="c">NetworkAcls</span><span class="c">?</span><span class="c">.</span><span class="c">PublicNetworkAccess</span><span class="c">)</span><span class="c">;</span>
            <span class="c">}</span>
        <span class="c">}</span>
        <span class="c">#</span><span class="c">endregion</span>
    <span class="c">}</span>
    <span class="c">*/</span>
}
</pre></td></tr></table></div></body></html>

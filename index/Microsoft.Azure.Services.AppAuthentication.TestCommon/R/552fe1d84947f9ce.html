<!DOCTYPE html>
<html><head><title>Constants</title><link rel="stylesheet" href="../../styles.css"/><script src="../../scripts.js"></script></head><body onload="ro();">
<div class="rH">504 references to Constants</div><div class="rA">Microsoft.Azure.Services.AppAuthentication.IntegrationTests (41)</div><div class="rG" id="Microsoft.Azure.Services.AppAuthentication.IntegrationTests"><div class="rF"><div class="rN">EndtoEndPositiveTests.cs (33)</div>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#37"><b>37</b>AzureServiceTokenProvider azureServiceTokenProvider = new AzureServiceTokenProvider(<i>Constants</i>.AzureCliConnectionString);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#38"><b>38</b>await azureServiceTokenProvider.GetAccessTokenAsync(<i>Constants</i>.ArmResourceId).ConfigureAwait(false);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#54"><b>54</b>? <i>Constants</i>.AzureCliConnectionString</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#55"><b>55</b>: <i>Constants</i>.VisualStudioConnectionString;</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#63"><b>63</b>tasks.Add(astp1.GetAccessTokenAsync(<i>Constants</i>.SqlAzureResourceId));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#72"><b>72</b><i>Constants</i>.SqlAzureResourceId,</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#73"><b>73</b><i>Constants</i>.GraphResourceId,</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#74"><b>74</b><i>Constants</i>.ArmResourceId,</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#75"><b>75</b><i>Constants</i>.DataLakeResourceId,</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#76"><b>76</b><i>Constants</i>.KeyVaultResourceId</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#87"><b>87</b>Validator.ValidateToken(authResult.AccessToken, astp.PrincipalUsed, <i>Constants</i>.UserType, _tenantId, expiresOn: authResult.ExpiresOn);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#91"><b>91</b>string tokenForKeyVault = await callback($&quot;{<i>Constants</i>.AzureAdInstance}{_tenantId}&quot;, <i>Constants</i>.KeyVaultResourceId, string.Empty);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#93"><b>93</b>Validator.ValidateToken(tokenForKeyVault, astp.PrincipalUsed, <i>Constants</i>.UserType, _tenantId);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#119"><b>119</b>AzureServiceTokenProvider astp = new AzureServiceTokenProvider(<i>Constants</i>.IntegratedAuthConnectionString);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#126"><b>126</b>astp.GetAuthenticationResultAsync(<i>Constants</i>.GraphResourceId);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#129"><b>129</b>AzureServiceTokenProvider astp1 = new AzureServiceTokenProvider(<i>Constants</i>.IntegratedAuthConnectionString);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#130"><b>130</b>await astp1.GetAccessTokenAsync(<i>Constants</i>.SqlAzureResourceId);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#132"><b>132</b>Validator.ValidateToken(authResult.AccessToken, astp.PrincipalUsed, <i>Constants</i>.UserType, astp1.PrincipalUsed.TenantId, expiresOn: authResult.ExpiresOn);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#148"><b>148</b>string connectionString = $&quot;server={Environment.GetEnvironmentVariable(<i>Constants</i>.TestSqlServerEndpoint)};Authentication=Active Directory Interactive;UID=AnyString&quot;;</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#182"><b>182</b>string testCertUrl = Environment.GetEnvironmentVariable(<i>Constants</i>.TestCertUrlEnv);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#186"><b>186</b>AzureServiceTokenProvider azureServiceTokenProvider = new AzureServiceTokenProvider(<i>Constants</i>.AzureCliConnectionString);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#209"><b>209</b>connectionString = $&quot;RunAs=App;AppId={app.AppId};TenantId={_tenantId};{thumbprintOrSubjectName};CertificateStoreLocation={<i>Constants</i>.CurrentUserStore};&quot;;</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#213"><b>213</b>? $&quot;RunAs=App;AppId={app.AppId};KeyVaultCertificateSecretIdentifier={testCertUrl};KeyVaultUserAssignedManagedIdentityId={<i>Constants</i>.TestUserAssignedManagedIdentityId}&quot; //TODO: figure out real MSI to use here. Also, does the test really use MSI or does it rely on the fallback?</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#232"><b>232</b>await astp.GetAccessTokenAsync(<i>Constants</i>.KeyVaultResourceId);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#234"><b>234</b>authResult = await astp.GetAuthenticationResultAsync(<i>Constants</i>.SqlAzureResourceId, _tenantId);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#256"><b>256</b>await astp.GetAccessTokenAsync(<i>Constants</i>.SqlAzureResourceId, _tenantId);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#261"><b>261</b>Validator.ValidateToken(authResult.AccessToken, astp.PrincipalUsed, <i>Constants</i>.AppType, _tenantId,</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#276"><b>276</b>Environment.SetEnvironmentVariable(<i>Constants</i>.ConnectionStringEnvironmentVariableName, $&quot;RunAs=App;TenantId={_tenantId};AppId={app.AppId};AppKey={secret}&quot;);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#283"><b>283</b>authResult = await astp.GetAuthenticationResultAsync(<i>Constants</i>.SqlAzureResourceId, _tenantId);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#285"><b>285</b>await astp.GetAccessTokenAsync(<i>Constants</i>.KeyVaultResourceId);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#301"><b>301</b>Environment.SetEnvironmentVariable(<i>Constants</i>.ConnectionStringEnvironmentVariableName, null);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/EndtoEndPositiveTests.cs.html#303"><b>303</b>Validator.ValidateToken(authResult.AccessToken, astp.PrincipalUsed, <i>Constants</i>.AppType, _tenantId, app.AppId, expiresOn: authResult.ExpiresOn);</a>
</div>
<div class="rF"><div class="rN">Helpers\GraphHelper.cs (6)</div>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/Helpers/GraphHelper.cs.html#29"><b>29</b>_azureServiceTokenProvider = new AzureServiceTokenProvider(<i>Constants</i>.AzureCliConnectionString);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/Helpers/GraphHelper.cs.html#128"><b>128</b>$&quot;{<i>Constants</i>.GraphResourceId}{_directory}/applications?api-version=1.6&quot;,</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/Helpers/GraphHelper.cs.html#140"><b>140</b>$&quot;{<i>Constants</i>.GraphResourceId}{_directory}/servicePrincipals?api-version=1.6&quot;,</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/Helpers/GraphHelper.cs.html#156"><b>156</b>$&quot;{<i>Constants</i>.GraphResourceId}{_directory}/directoryObjects/{app.ServicePrincipal.ObjectId}?api-version=1.6&quot;).ConfigureAwait(false);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/Helpers/GraphHelper.cs.html#159"><b>159</b>$&quot;{<i>Constants</i>.GraphResourceId}{_directory}/applications/{app.ObjectId}?api-version=1.6&quot;).ConfigureAwait(false);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/Helpers/GraphHelper.cs.html#176"><b>176</b>var accessToken = await _azureServiceTokenProvider.GetAccessTokenAsync(<i>Constants</i>.GraphResourceId, _directory).ConfigureAwait(false);</a>
</div>
<div class="rF"><div class="rN">NegativeTests.cs (2)</div>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/NegativeTests.cs.html#19"><b>19</b>AzureServiceTokenProvider azureServiceTokenProvider = new AzureServiceTokenProvider(<i>Constants</i>.AzureCliConnectionString);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.IntegrationTests/NegativeTests.cs.html#23"><b>23</b>Assert.Contains(<i>Constants</i>.InvalidResource, exception.Message);</a>
</div>
</div>
<div class="rA">Microsoft.Azure.Services.AppAuthentication.Unit.Tests (463)</div><div class="rG" id="Microsoft.Azure.Services.AppAuthentication.Unit.Tests"><div class="rF"><div class="rN">AzureCliAccessTokenProviderTests.cs (12)</div>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureCliAccessTokenProviderTests.cs.html#25"><b>25</b>var authResult = await azureCliAccessTokenProvider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, <i>Constants</i>.TenantId).ConfigureAwait(false);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureCliAccessTokenProviderTests.cs.html#27"><b>27</b>Validator.ValidateToken(authResult.AccessToken, azureCliAccessTokenProvider.PrincipalUsed, <i>Constants</i>.UserType, <i>Constants</i>.TenantId);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureCliAccessTokenProviderTests.cs.html#41"><b>41</b>var exception = await Assert.ThrowsAsync&lt;AzureServiceTokenProviderException&gt;(() =&gt; Task.Run(() =&gt; azureCliAccessTokenProvider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, <i>Constants</i>.TenantId)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureCliAccessTokenProviderTests.cs.html#43"><b>43</b>Assert.Contains(<i>Constants</i>.ProgramNotFoundError, exception.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureCliAccessTokenProviderTests.cs.html#57"><b>57</b>var exception = await Assert.ThrowsAsync&lt;AzureServiceTokenProviderException&gt;(() =&gt; Task.Run(() =&gt; azureCliAccessTokenProvider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, <i>Constants</i>.TenantId)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureCliAccessTokenProviderTests.cs.html#60"><b>60</b>Assert.Contains(<i>Constants</i>.DeveloperToolError, exception.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureCliAccessTokenProviderTests.cs.html#75"><b>75</b>var exception = await Assert.ThrowsAsync&lt;AzureServiceTokenProviderException&gt;(() =&gt; Task.Run(() =&gt; azureCliAccessTokenProvider.GetAuthResultAsync(&quot;https://test^&quot;, <i>Constants</i>.TenantId)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureCliAccessTokenProviderTests.cs.html#77"><b>77</b>Assert.Contains(<i>Constants</i>.NotInExpectedFormatError, exception.Message);</a>
</div>
<div class="rF"><div class="rN">AzureServiceTokenProviderFactoryTests.cs (68)</div>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#19"><b>19</b>var provider = AzureServiceTokenProviderFactory.Create(<i>Constants</i>.AzureCliConnectionString, <i>Constants</i>.AzureAdInstance);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#21"><b>21</b>Assert.Equal(<i>Constants</i>.AzureCliConnectionString, provider.ConnectionString);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#24"><b>24</b>provider = AzureServiceTokenProviderFactory.Create(<i>Constants</i>.AzureCliConnectionStringWithSpaces, <i>Constants</i>.AzureAdInstance);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#26"><b>26</b>Assert.Equal(<i>Constants</i>.AzureCliConnectionStringWithSpaces, provider.ConnectionString);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#36"><b>36</b>var exception = Assert.Throws&lt;ArgumentException&gt;(() =&gt; AzureServiceTokenProviderFactory.Create(<i>Constants</i>.InvalidDeveloperToolConnectionString, <i>Constants</i>.AzureAdInstance));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#38"><b>38</b>Assert.Contains(<i>Constants</i>.InvalidConnectionString, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#47"><b>47</b>var exception = Assert.Throws&lt;ArgumentException&gt;(() =&gt; AzureServiceTokenProviderFactory.Create(<i>Constants</i>.InvalidRunAsConnectionString, <i>Constants</i>.AzureAdInstance));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#49"><b>49</b>Assert.Contains(<i>Constants</i>.InvalidConnectionString, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#58"><b>58</b>var exception = Assert.Throws&lt;ArgumentException&gt;(() =&gt; AzureServiceTokenProviderFactory.Create(<i>Constants</i>.AzureCliConnectionStringNoRunAs, <i>Constants</i>.AzureAdInstance));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#60"><b>60</b>Assert.Contains(<i>Constants</i>.InvalidConnectionString, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#62"><b>62</b>exception = Assert.Throws&lt;ArgumentException&gt;(() =&gt; AzureServiceTokenProviderFactory.Create(<i>Constants</i>.AzureCliConnectionStringWithEmptyDeveloperTool, <i>Constants</i>.AzureAdInstance));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#64"><b>64</b>Assert.Contains(<i>Constants</i>.InvalidConnectionString, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#73"><b>73</b>var exception = Assert.Throws&lt;ArgumentException&gt;(() =&gt; AzureServiceTokenProviderFactory.Create(<i>Constants</i>.AzureCliConnectionStringRepeatedRunAs, <i>Constants</i>.AzureAdInstance));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#75"><b>75</b>Assert.Contains(<i>Constants</i>.KeyRepeatedInConnectionString, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#84"><b>84</b>var exception = Assert.Throws&lt;ArgumentException&gt;(() =&gt; AzureServiceTokenProviderFactory.Create(<i>Constants</i>.IncorrectFormatConnectionString, <i>Constants</i>.AzureAdInstance));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#86"><b>86</b>Assert.Contains(<i>Constants</i>.NotInProperFormatError, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#95"><b>95</b>var exception = Assert.Throws&lt;ArgumentException&gt;(() =&gt; AzureServiceTokenProviderFactory.Create(null, <i>Constants</i>.AzureAdInstance));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#97"><b>97</b>Assert.Contains(<i>Constants</i>.ConnectionStringEmpty, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#99"><b>99</b>exception = Assert.Throws&lt;ArgumentException&gt;(() =&gt; AzureServiceTokenProviderFactory.Create(string.Empty, <i>Constants</i>.AzureAdInstance));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#101"><b>101</b>Assert.Contains(<i>Constants</i>.ConnectionStringEmpty, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#110"><b>110</b>var exception = Assert.Throws&lt;ArgumentException&gt;(() =&gt; AzureServiceTokenProviderFactory.Create(<i>Constants</i>.AppConnStringNoLocationOrAppKey, <i>Constants</i>.AzureAdInstance));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#112"><b>112</b>Assert.Contains(<i>Constants</i>.ConnectionStringMissingCertLocation, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#121"><b>121</b>var exception = Assert.Throws&lt;ArgumentException&gt;(() =&gt; AzureServiceTokenProviderFactory.Create(<i>Constants</i>.CertificateConnStringThumbprintInvalidLocation, <i>Constants</i>.AzureAdInstance));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#123"><b>123</b>Assert.Contains(<i>Constants</i>.InvalidCertLocationError, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#132"><b>132</b>var provider = AzureServiceTokenProviderFactory.Create(<i>Constants</i>.AzureCliConnectionStringEndingWithSemiColonAndSpace, <i>Constants</i>.AzureAdInstance);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#135"><b>135</b>Assert.Equal(<i>Constants</i>.AzureCliConnectionStringEndingWithSemiColonAndSpace, provider.ConnectionString);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#143"><b>143</b>var provider = AzureServiceTokenProviderFactory.Create(<i>Constants</i>.ActiveDirectoryIntegratedConnectionString, <i>Constants</i>.AzureAdInstance);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#145"><b>145</b>Assert.Equal(<i>Constants</i>.ActiveDirectoryIntegratedConnectionString, provider.ConnectionString);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#159"><b>159</b>var provider = AzureServiceTokenProviderFactory.Create(<i>Constants</i>.ManagedServiceIdentityConnectionString, <i>Constants</i>.AzureAdInstance);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#161"><b>161</b>Assert.Equal(<i>Constants</i>.ManagedServiceIdentityConnectionString, provider.ConnectionString);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#168"><b>168</b>var provider = AzureServiceTokenProviderFactory.Create(<i>Constants</i>.ManagedUserAssignedIdentityConnectionString, <i>Constants</i>.AzureAdInstance);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#170"><b>170</b>Assert.Equal(<i>Constants</i>.ManagedUserAssignedIdentityConnectionString, provider.ConnectionString);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#177"><b>177</b>var provider = AzureServiceTokenProviderFactory.Create(<i>Constants</i>.CertificateConnStringThumbprintLocalMachine, <i>Constants</i>.AzureAdInstance);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#179"><b>179</b>Assert.Equal(<i>Constants</i>.CertificateConnStringThumbprintLocalMachine, provider.ConnectionString);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#182"><b>182</b>provider = AzureServiceTokenProviderFactory.Create(<i>Constants</i>.CertificateConnStringThumbprintCurrentUser, <i>Constants</i>.AzureAdInstance);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#184"><b>184</b>Assert.Equal(<i>Constants</i>.CertificateConnStringThumbprintCurrentUser, provider.ConnectionString);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#187"><b>187</b>provider = AzureServiceTokenProviderFactory.Create(<i>Constants</i>.CertificateConnStringSubjectNameCurrentUser, <i>Constants</i>.AzureAdInstance);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#189"><b>189</b>Assert.Equal(<i>Constants</i>.CertificateConnStringSubjectNameCurrentUser, provider.ConnectionString);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#192"><b>192</b>provider = AzureServiceTokenProviderFactory.Create(<i>Constants</i>.CertificateConnStringKeyVaultCertificateSecretIdentifier, <i>Constants</i>.AzureAdInstance);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#194"><b>194</b>Assert.Equal(<i>Constants</i>.CertificateConnStringKeyVaultCertificateSecretIdentifier, provider.ConnectionString);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#197"><b>197</b>provider = AzureServiceTokenProviderFactory.Create(<i>Constants</i>.CertificateConnStringKeyVaultCertificateSecretIdentifierUserAssignedMsi, <i>Constants</i>.AzureAdInstance);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#199"><b>199</b>Assert.Equal(<i>Constants</i>.CertificateConnStringKeyVaultCertificateSecretIdentifierUserAssignedMsi, provider.ConnectionString);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#202"><b>202</b>provider = AzureServiceTokenProviderFactory.Create(<i>Constants</i>.CertificateConnStringKeyVaultCertificateSecretIdentifierWithOptionalTenantId, <i>Constants</i>.AzureAdInstance);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#204"><b>204</b>Assert.Equal(<i>Constants</i>.CertificateConnStringKeyVaultCertificateSecretIdentifierWithOptionalTenantId, provider.ConnectionString);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#211"><b>211</b>var provider = AzureServiceTokenProviderFactory.Create(<i>Constants</i>.ClientSecretConnString, <i>Constants</i>.AzureAdInstance);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#213"><b>213</b>Assert.Equal(<i>Constants</i>.ClientSecretConnString, provider.ConnectionString);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderFactoryTests.cs.html#241"><b>241</b>Assert.Contains(<i>Constants</i>.NotInProperFormatError, exception.ToString());</a>
</div>
<div class="rF"><div class="rN">AzureServiceTokenProviderTests.cs (62)</div>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#28"><b>28</b>Environment.SetEnvironmentVariable(<i>Constants</i>.TestCertUrlEnv, null);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#29"><b>29</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiAppServiceEndpointEnv, null);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#30"><b>30</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiAppServiceHeaderEnv, null);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#60"><b>60</b>await azureServiceTokenProvider.GetAccessTokenAsync(<i>Constants</i>.KeyVaultResourceId);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#70"><b>70</b>await azureServiceTokenProvider1.GetAccessTokenAsync(<i>Constants</i>.KeyVaultResourceId);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#87"><b>87</b>tasks.Add(azureServiceTokenProvider.GetAccessTokenAsync(<i>Constants</i>.KeyVaultResourceId));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#106"><b>106</b>tasks.Add(azureServiceTokenProvider.GetAccessTokenAsync(<i>Constants</i>.KeyVaultResourceId));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#129"><b>129</b>await azureServiceTokenProvider.GetAccessTokenAsync(<i>Constants</i>.KeyVaultResourceId);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#132"><b>132</b>await azureServiceTokenProvider.GetAccessTokenAsync(<i>Constants</i>.KeyVaultResourceId);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#135"><b>135</b>await azureServiceTokenProvider.GetAccessTokenAsync(<i>Constants</i>.KeyVaultResourceId, forceRefresh: true);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#138"><b>138</b>await azureServiceTokenProvider1.GetAccessTokenAsync(<i>Constants</i>.KeyVaultResourceId);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#141"><b>141</b>await azureServiceTokenProvider1.GetAccessTokenAsync(<i>Constants</i>.KeyVaultResourceId, forceRefresh: true);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#160"><b>160</b>await Assert.ThrowsAsync&lt;AzureServiceTokenProviderException&gt;(() =&gt; Task.Run(() =&gt; azureServiceTokenProvider.GetAccessTokenAsync(<i>Constants</i>.GraphResourceId, <i>Constants</i>.TenantId)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#165"><b>165</b>var exception = await Assert.ThrowsAsync&lt;AzureServiceTokenProviderException&gt;(() =&gt; Task.Run(() =&gt; azureServiceTokenProvider.GetAccessTokenAsync(<i>Constants</i>.GraphResourceId, <i>Constants</i>.TenantId)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#172"><b>172</b>Assert.Contains(<i>Constants</i>.GraphResourceId, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#173"><b>173</b>Assert.Contains(<i>Constants</i>.TenantId, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#184"><b>184</b>Assert.Contains(<i>Constants</i>.MustUseHttpsError, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#198"><b>198</b>var exception = await Assert.ThrowsAsync&lt;ArgumentNullException&gt;(() =&gt; Task.Run(() =&gt; azureServiceTokenProvider.GetAccessTokenAsync(null, <i>Constants</i>.TenantId)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#200"><b>200</b>Assert.Contains(<i>Constants</i>.CannotBeNullError, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#202"><b>202</b>exception = await Assert.ThrowsAsync&lt;ArgumentNullException&gt;(() =&gt; Task.Run(() =&gt; azureServiceTokenProvider.GetAccessTokenAsync(string.Empty, <i>Constants</i>.TenantId)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#204"><b>204</b>Assert.Contains(<i>Constants</i>.CannotBeNullError, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#216"><b>216</b>Assert.Contains(<i>Constants</i>.CannotBeNullError, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#220"><b>220</b>Assert.Contains(<i>Constants</i>.CannotBeNullError, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#231"><b>231</b>Environment.SetEnvironmentVariable(<i>Constants</i>.ConnectionStringEnvironmentVariableName, <i>Constants</i>.AzureCliConnectionString);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#238"><b>238</b>Environment.SetEnvironmentVariable(<i>Constants</i>.ConnectionStringEnvironmentVariableName, null);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#253"><b>253</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiAppServiceEndpointEnv, <i>Constants</i>.MsiEndpoint);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#254"><b>254</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiAppServiceHeaderEnv, <i>Constants</i>.ClientSecret);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#260"><b>260</b>var token = await azureServiceTokenProvider.GetAccessTokenAsync(<i>Constants</i>.GraphResourceId, <i>Constants</i>.TenantId);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#268"><b>268</b>Validator.ValidateToken(token, azureServiceTokenProvider.PrincipalUsed, <i>Constants</i>.UserType, <i>Constants</i>.TenantId);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#283"><b>283</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiAppServiceEndpointEnv, <i>Constants</i>.MsiEndpoint);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#284"><b>284</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiAppServiceHeaderEnv, <i>Constants</i>.ClientSecret);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#290"><b>290</b>var token = await azureServiceTokenProvider.GetAccessTokenAsync(<i>Constants</i>.GraphResourceId, <i>Constants</i>.TenantId);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#299"><b>299</b>Validator.ValidateToken(token, azureServiceTokenProvider.PrincipalUsed, <i>Constants</i>.AppType, <i>Constants</i>.TenantId, <i>Constants</i>.TestAppId);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#317"><b>317</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiAppServiceEndpointEnv, <i>Constants</i>.MsiEndpoint);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#318"><b>318</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiAppServiceHeaderEnv, <i>Constants</i>.ClientSecret);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#327"><b>327</b>var exception = Assert.ThrowsAsync&lt;AzureServiceTokenProviderException&gt;(() =&gt; azureServiceTokenProvider.GetAccessTokenAsync(<i>Constants</i>.GraphResourceId, <i>Constants</i>.TenantId));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#328"><b>328</b>Assert.Contains(<i>Constants</i>.NoMethodWorkedToGetTokenError, exception.Result.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#337"><b>337</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiAppServiceEndpointEnv, null);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#338"><b>338</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiAppServiceHeaderEnv, null);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#359"><b>359</b>var azureServiceTokenProvider = new AzureServiceTokenProvider(<i>Constants</i>.ClientSecretConnString, <i>Constants</i>.AzureAdInstance, factory);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#363"><b>363</b>azureServiceTokenProvider.GetAccessTokenAsync(<i>Constants</i>.GraphResourceId, <i>Constants</i>.TenantId));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#378"><b>378</b>var azureServiceTokenProvider = new AzureServiceTokenProvider(<i>Constants</i>.ClientSecretConnString, <i>Constants</i>.AzureAdInstance);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/AzureServiceTokenProviderTests.cs.html#382"><b>382</b>azureServiceTokenProvider.GetAccessTokenAsync(<i>Constants</i>.GraphResourceId, <i>Constants</i>.TenantId));</a>
</div>
<div class="rF"><div class="rN">ClientCertificateAccessTokenProviderTests.cs (95)</div>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#25"><b>25</b>X509Certificate2 cert = new X509Certificate2(Convert.FromBase64String(<i>Constants</i>.TestCert), string.Empty);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#33"><b>33</b>X509Certificate2 cert = new X509Certificate2(Convert.FromBase64String(<i>Constants</i>.TestCert), string.Empty);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#40"><b>40</b>ClientCertificateAzureServiceTokenProvider provider = new ClientCertificateAzureServiceTokenProvider(<i>Constants</i>.TestAppId,</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#41"><b>41</b>cert.Thumbprint, CertificateIdentifierType.Thumbprint, <i>Constants</i>.CurrentUserStore, <i>Constants</i>.AzureAdInstance, <i>Constants</i>.TenantId, 0, authenticationContext: mockAuthenticationContext);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#44"><b>44</b>var authResult = await provider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, <i>Constants</i>.TenantId).ConfigureAwait(false);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#49"><b>49</b>Validator.ValidateToken(authResult.AccessToken, provider.PrincipalUsed, <i>Constants</i>.AppType, <i>Constants</i>.TenantId, <i>Constants</i>.TestAppId, cert.Thumbprint, expiresOn: authResult.ExpiresOn);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#59"><b>59</b>X509Certificate2 cert = new X509Certificate2(Convert.FromBase64String(<i>Constants</i>.TestCert), string.Empty);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#66"><b>66</b>ClientCertificateAzureServiceTokenProvider provider = new ClientCertificateAzureServiceTokenProvider(<i>Constants</i>.TestAppId,</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#67"><b>67</b>cert.Thumbprint, CertificateIdentifierType.Thumbprint, <i>Constants</i>.CurrentUserStore, <i>Constants</i>.AzureAdInstance, <i>Constants</i>.TenantId, 0, authenticationContext: mockAuthenticationContext);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#70"><b>70</b>var exception = await Assert.ThrowsAsync&lt;AzureServiceTokenProviderException&gt;(() =&gt; provider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, <i>Constants</i>.TenantId));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#84"><b>84</b>X509Certificate2 cert = new X509Certificate2(Convert.FromBase64String(<i>Constants</i>.TestCert), string.Empty);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#92"><b>92</b>cert.Thumbprint, CertificateIdentifierType.Thumbprint, <i>Constants</i>.CurrentUserStore, <i>Constants</i>.AzureAdInstance, <i>Constants</i>.TenantId, 0, authenticationContext: mockAuthenticationContext));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#94"><b>94</b>Assert.Contains(<i>Constants</i>.CannotBeNullError, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#97"><b>97</b>cert.Thumbprint, CertificateIdentifierType.Thumbprint, <i>Constants</i>.CurrentUserStore, <i>Constants</i>.AzureAdInstance, <i>Constants</i>.TenantId, 0, authenticationContext: mockAuthenticationContext));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#99"><b>99</b>Assert.Contains(<i>Constants</i>.CannotBeNullError, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#109"><b>109</b>X509Certificate2 cert = new X509Certificate2(Convert.FromBase64String(<i>Constants</i>.TestCert), string.Empty);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#116"><b>116</b>var exception = Assert.Throws&lt;ArgumentNullException&gt;(() =&gt; new ClientCertificateAzureServiceTokenProvider(<i>Constants</i>.TestAppId,</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#117"><b>117</b>cert.Thumbprint, CertificateIdentifierType.Thumbprint, null, <i>Constants</i>.AzureAdInstance, <i>Constants</i>.TenantId, 0, authenticationContext: mockAuthenticationContext));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#119"><b>119</b>Assert.Contains(<i>Constants</i>.CannotBeNullError, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#121"><b>121</b>exception = Assert.Throws&lt;ArgumentNullException&gt;(() =&gt; new ClientCertificateAzureServiceTokenProvider(<i>Constants</i>.TestAppId,</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#122"><b>122</b>cert.Thumbprint, CertificateIdentifierType.Thumbprint, string.Empty, <i>Constants</i>.AzureAdInstance, <i>Constants</i>.TenantId, 0, authenticationContext: mockAuthenticationContext));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#124"><b>124</b>Assert.Contains(<i>Constants</i>.CannotBeNullError, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#137"><b>137</b>var exception = Assert.Throws&lt;ArgumentNullException&gt;(() =&gt; new ClientCertificateAzureServiceTokenProvider(<i>Constants</i>.TestAppId,</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#138"><b>138</b>null, CertificateIdentifierType.Thumbprint, <i>Constants</i>.CurrentUserStore, <i>Constants</i>.AzureAdInstance, <i>Constants</i>.TenantId, 0, authenticationContext: mockAuthenticationContext));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#140"><b>140</b>Assert.Contains(<i>Constants</i>.CannotBeNullError, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#142"><b>142</b>exception = Assert.Throws&lt;ArgumentNullException&gt;(() =&gt; new ClientCertificateAzureServiceTokenProvider(<i>Constants</i>.TestAppId,</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#143"><b>143</b>string.Empty, CertificateIdentifierType.Thumbprint, <i>Constants</i>.CurrentUserStore, <i>Constants</i>.AzureAdInstance, <i>Constants</i>.TenantId, 0, authenticationContext: mockAuthenticationContext));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#145"><b>145</b>Assert.Contains(<i>Constants</i>.CannotBeNullError, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#155"><b>155</b>X509Certificate2 cert = new X509Certificate2(Convert.FromBase64String(<i>Constants</i>.TestCert), string.Empty);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#162"><b>162</b>var exception = Assert.Throws&lt;ArgumentException&gt;(() =&gt; new ClientCertificateAzureServiceTokenProvider(<i>Constants</i>.TestAppId,</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#163"><b>163</b>cert.Thumbprint, CertificateIdentifierType.Thumbprint, <i>Constants</i>.InvalidString, <i>Constants</i>.AzureAdInstance, <i>Constants</i>.TenantId, 0, authenticationContext: mockAuthenticationContext));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#165"><b>165</b>Assert.Contains(<i>Constants</i>.InvalidCertLocationError, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#172"><b>172</b>X509Certificate2 cert = new X509Certificate2(Convert.FromBase64String(<i>Constants</i>.TestCert), string.Empty);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#179"><b>179</b>ClientCertificateAzureServiceTokenProvider provider = new ClientCertificateAzureServiceTokenProvider(<i>Constants</i>.TestAppId,</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#180"><b>180</b>cert.Subject, CertificateIdentifierType.SubjectName, <i>Constants</i>.CurrentUserStore, <i>Constants</i>.AzureAdInstance, <i>Constants</i>.TenantId, 0, authenticationContext: mockAuthenticationContext);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#183"><b>183</b>var authResult = await provider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, string.Empty).ConfigureAwait(false);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#188"><b>188</b>Validator.ValidateToken(authResult.AccessToken, provider.PrincipalUsed, <i>Constants</i>.AppType, <i>Constants</i>.TenantId, <i>Constants</i>.TestAppId, cert.Thumbprint, expiresOn: authResult.ExpiresOn);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#199"><b>199</b>X509Certificate2 cert = new X509Certificate2(Convert.FromBase64String(<i>Constants</i>.TestCert), string.Empty);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#206"><b>206</b>ClientCertificateAzureServiceTokenProvider provider = new ClientCertificateAzureServiceTokenProvider(<i>Constants</i>.TestAppId,</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#207"><b>207</b>cert.Subject, CertificateIdentifierType.SubjectName, <i>Constants</i>.CurrentUserStore, <i>Constants</i>.AzureAdInstance, <i>Constants</i>.TenantId, 0, authenticationContext: mockAuthenticationContext);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#210"><b>210</b>var exception = Assert.ThrowsAsync&lt;AzureServiceTokenProviderException&gt;(() =&gt; provider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, string.Empty));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#215"><b>215</b>Assert.Contains(<i>Constants</i>.TokenFormatExceptionMessage, exception.Result.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#216"><b>216</b>Assert.Contains(<i>Constants</i>.TokenNotInExpectedFormatError, exception.Result.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#228"><b>228</b>ClientCertificateAzureServiceTokenProvider provider = new ClientCertificateAzureServiceTokenProvider(<i>Constants</i>.TestAppId,</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#229"><b>229</b>Guid.NewGuid().ToString(), CertificateIdentifierType.SubjectName, <i>Constants</i>.CurrentUserStore, <i>Constants</i>.AzureAdInstance, <i>Constants</i>.TenantId, 0, authenticationContext: mockAuthenticationContext);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#231"><b>231</b>var exception = await Assert.ThrowsAsync&lt;AzureServiceTokenProviderException&gt;(() =&gt; Task.Run(() =&gt; provider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, <i>Constants</i>.TenantId)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#233"><b>233</b>Assert.Contains(<i>Constants</i>.KeyVaultResourceId, exception.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#234"><b>234</b>Assert.Contains(<i>Constants</i>.TenantId, exception.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#235"><b>235</b>Assert.Contains(<i>Constants</i>.LocalCertificateNotFoundError, exception.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#243"><b>243</b>X509Certificate2 cert = new X509Certificate2(Convert.FromBase64String(<i>Constants</i>.TestCert), string.Empty);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#256"><b>256</b>string tenantIdParam = includeTenantId ? <i>Constants</i>.TenantId : null;</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#259"><b>259</b>ClientCertificateAzureServiceTokenProvider provider = new ClientCertificateAzureServiceTokenProvider(<i>Constants</i>.TestAppId,</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#260"><b>260</b><i>Constants</i>.TestKeyVaultCertificateSecretIdentifier, CertificateIdentifierType.KeyVaultCertificateSecretIdentifier, null, <i>Constants</i>.AzureAdInstance, tenantIdParam, 0, authenticationContext: mockAuthenticationContext, keyVaultClient: keyVaultClient);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#263"><b>263</b>var authResult = await provider.GetAuthResultAsync(<i>Constants</i>.ArmResourceId, string.Empty).ConfigureAwait(false);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#265"><b>265</b>Validator.ValidateToken(authResult.AccessToken, provider.PrincipalUsed, <i>Constants</i>.AppType, <i>Constants</i>.TenantId, <i>Constants</i>.TestAppId, cert.Thumbprint, expiresOn: authResult.ExpiresOn);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#285"><b>285</b>ClientCertificateAzureServiceTokenProvider provider = new ClientCertificateAzureServiceTokenProvider(<i>Constants</i>.TestAppId,</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#286"><b>286</b>SecretIdentifier, CertificateIdentifierType.KeyVaultCertificateSecretIdentifier, <i>Constants</i>.CurrentUserStore, <i>Constants</i>.AzureAdInstance, <i>Constants</i>.TenantId, 0, authenticationContext: mockAuthenticationContext, keyVaultClient: keyVaultClient);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#288"><b>288</b>var exception = await Assert.ThrowsAsync&lt;AzureServiceTokenProviderException&gt;(() =&gt; Task.Run(() =&gt; provider.GetAuthResultAsync(<i>Constants</i>.ArmResourceId, <i>Constants</i>.TenantId)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#290"><b>290</b>Assert.Contains(<i>Constants</i>.ArmResourceId, exception.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientCertificateAccessTokenProviderTests.cs.html#291"><b>291</b>Assert.Contains(<i>Constants</i>.TenantId, exception.Message);</a>
</div>
<div class="rF"><div class="rN">ClientSecretAccessTokenProviderTests.cs (49)</div>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientSecretAccessTokenProviderTests.cs.html#23"><b>23</b>ClientSecretAccessTokenProvider clientSecretAccessTokenProvider = new ClientSecretAccessTokenProvider(<i>Constants</i>.TestAppId, <i>Constants</i>.ClientSecret, <i>Constants</i>.TenantId, <i>Constants</i>.AzureAdInstance, mockAuthenticationContext);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientSecretAccessTokenProviderTests.cs.html#26"><b>26</b>var authResult = await clientSecretAccessTokenProvider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, <i>Constants</i>.TenantId).ConfigureAwait(false);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientSecretAccessTokenProviderTests.cs.html#29"><b>29</b>Validator.ValidateToken(authResult.AccessToken, clientSecretAccessTokenProvider.PrincipalUsed, <i>Constants</i>.AppType, <i>Constants</i>.TenantId, <i>Constants</i>.TestAppId, expiresOn: authResult.ExpiresOn);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientSecretAccessTokenProviderTests.cs.html#40"><b>40</b>ClientSecretAccessTokenProvider clientSecretAccessTokenProvider = new ClientSecretAccessTokenProvider(<i>Constants</i>.TestAppId, <i>Constants</i>.ClientSecret, <i>Constants</i>.TenantId, <i>Constants</i>.AzureAdInstance, mockAuthenticationContext);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientSecretAccessTokenProviderTests.cs.html#41"><b>41</b>var exception = await Assert.ThrowsAsync&lt;AzureServiceTokenProviderException&gt;(() =&gt; Task.Run(() =&gt; clientSecretAccessTokenProvider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, string.Empty)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientSecretAccessTokenProviderTests.cs.html#43"><b>43</b>Assert.Contains(<i>Constants</i>.KeyVaultResourceId, exception.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientSecretAccessTokenProviderTests.cs.html#44"><b>44</b>Assert.Contains(<i>Constants</i>.TenantId, exception.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientSecretAccessTokenProviderTests.cs.html#45"><b>45</b>Assert.Contains(<i>Constants</i>.NoConnectionString, exception.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientSecretAccessTokenProviderTests.cs.html#56"><b>56</b>ClientSecretAccessTokenProvider clientSecretAccessTokenProvider = new ClientSecretAccessTokenProvider(<i>Constants</i>.TestAppId, <i>Constants</i>.ClientSecret, <i>Constants</i>.TenantId, <i>Constants</i>.AzureAdInstance, mockAuthenticationContext);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientSecretAccessTokenProviderTests.cs.html#57"><b>57</b>var exception = await Assert.ThrowsAsync&lt;AzureServiceTokenProviderException&gt;(() =&gt; Task.Run(() =&gt; clientSecretAccessTokenProvider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, <i>Constants</i>.TenantId)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientSecretAccessTokenProviderTests.cs.html#59"><b>59</b>Assert.Contains(<i>Constants</i>.KeyVaultResourceId, exception.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientSecretAccessTokenProviderTests.cs.html#60"><b>60</b>Assert.Contains(<i>Constants</i>.TenantId, exception.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientSecretAccessTokenProviderTests.cs.html#61"><b>61</b>Assert.Contains(<i>Constants</i>.AdalException, exception.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientSecretAccessTokenProviderTests.cs.html#62"><b>62</b>Assert.Contains(<i>Constants</i>.NoConnectionString, exception.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientSecretAccessTokenProviderTests.cs.html#73"><b>73</b>AzureServiceTokenProvider azureServiceTokenProvider = new AzureServiceTokenProvider(<i>Constants</i>.ClientSecretConnString);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientSecretAccessTokenProviderTests.cs.html#75"><b>75</b>var exception = await Assert.ThrowsAsync&lt;AzureServiceTokenProviderException&gt;(() =&gt; Task.Run(() =&gt; azureServiceTokenProvider.GetAccessTokenAsync(<i>Constants</i>.KeyVaultResourceId)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientSecretAccessTokenProviderTests.cs.html#77"><b>77</b>Assert.Contains(<i>Constants</i>.KeyVaultResourceId, exception.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientSecretAccessTokenProviderTests.cs.html#78"><b>78</b>Assert.Contains(<i>Constants</i>.TenantId, exception.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientSecretAccessTokenProviderTests.cs.html#79"><b>79</b>Assert.Contains(<i>Constants</i>.Redacted, exception.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientSecretAccessTokenProviderTests.cs.html#80"><b>80</b>Assert.DoesNotContain(<i>Constants</i>.ClientSecret, exception.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientSecretAccessTokenProviderTests.cs.html#93"><b>93</b>var exception = Assert.Throws&lt;ArgumentNullException&gt;(() =&gt; new ClientSecretAccessTokenProvider(null, <i>Constants</i>.ClientSecret, <i>Constants</i>.TenantId, <i>Constants</i>.AzureAdInstance, mockAuthenticationContext));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientSecretAccessTokenProviderTests.cs.html#95"><b>95</b>Assert.Contains(<i>Constants</i>.CannotBeNullError, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientSecretAccessTokenProviderTests.cs.html#98"><b>98</b>exception = Assert.Throws&lt;ArgumentNullException&gt;(() =&gt; new ClientSecretAccessTokenProvider(string.Empty, <i>Constants</i>.ClientSecret, <i>Constants</i>.TenantId, <i>Constants</i>.AzureAdInstance, mockAuthenticationContext));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientSecretAccessTokenProviderTests.cs.html#100"><b>100</b>Assert.Contains(<i>Constants</i>.CannotBeNullError, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientSecretAccessTokenProviderTests.cs.html#113"><b>113</b>var exception = Assert.Throws&lt;ArgumentNullException&gt;(() =&gt; new ClientSecretAccessTokenProvider(<i>Constants</i>.TestAppId, null, <i>Constants</i>.TenantId, <i>Constants</i>.AzureAdInstance, mockAuthenticationContext));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientSecretAccessTokenProviderTests.cs.html#115"><b>115</b>Assert.Contains(<i>Constants</i>.CannotBeNullError, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientSecretAccessTokenProviderTests.cs.html#118"><b>118</b>exception = Assert.Throws&lt;ArgumentNullException&gt;(() =&gt; new ClientSecretAccessTokenProvider(<i>Constants</i>.TestAppId, string.Empty, <i>Constants</i>.TenantId, <i>Constants</i>.AzureAdInstance, mockAuthenticationContext));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/ClientSecretAccessTokenProviderTests.cs.html#120"><b>120</b>Assert.Contains(<i>Constants</i>.CannotBeNullError, exception.ToString());</a>
</div>
<div class="rF"><div class="rN">KeyVaultClientTests.cs (10)</div>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/KeyVaultClientTests.cs.html#20"><b>20</b>var exception = await Assert.ThrowsAnyAsync&lt;Exception&gt;(() =&gt; Task.Run(() =&gt; keyVaultClient.GetCertificateAsync(<i>Constants</i>.TestKeyVaultCertificateSecretIdentifier)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/KeyVaultClientTests.cs.html#29"><b>29</b>string secretIdentifier = <i>Constants</i>.TestKeyVaultCertificateSecretIdentifier.Replace(&quot;https://&quot;, string.Empty);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/KeyVaultClientTests.cs.html#40"><b>40</b>string secretIdentifier = <i>Constants</i>.TestKeyVaultCertificateSecretIdentifier.Replace(&quot;https://&quot;, &quot;http://&quot;);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/KeyVaultClientTests.cs.html#51"><b>51</b>string secretIdentifier = <i>Constants</i>.TestKeyVaultCertificateSecretIdentifier.Replace(&quot;/secrets/&quot;, &quot;/keys/&quot;);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/KeyVaultClientTests.cs.html#64"><b>64</b>var exception = await Assert.ThrowsAnyAsync&lt;Exception&gt;(() =&gt; Task.Run(() =&gt; keyVaultClient.GetCertificateAsync(<i>Constants</i>.TestKeyVaultCertificateSecretIdentifier)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/KeyVaultClientTests.cs.html#76"><b>76</b>var exception = await Assert.ThrowsAnyAsync&lt;Exception&gt;(() =&gt; Task.Run(() =&gt; keyVaultClient.GetCertificateAsync(<i>Constants</i>.TestKeyVaultCertificateSecretIdentifier)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/KeyVaultClientTests.cs.html#91"><b>91</b>var exception = await Assert.ThrowsAnyAsync&lt;Exception&gt;(() =&gt; Task.Run(() =&gt; keyVaultClient.GetCertificateAsync(<i>Constants</i>.TestKeyVaultCertificateSecretIdentifier)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/KeyVaultClientTests.cs.html#95"><b>95</b>Assert.Contains(<i>Constants</i>.DeveloperToolError, exception.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/KeyVaultClientTests.cs.html#109"><b>109</b>var exception = await Assert.ThrowsAnyAsync&lt;Exception&gt;(() =&gt; Task.Run(() =&gt; keyVaultClient.GetCertificateAsync(<i>Constants</i>.TestKeyVaultCertificateSecretIdentifier)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/KeyVaultClientTests.cs.html#123"><b>123</b>var exception = await Assert.ThrowsAnyAsync&lt;Exception&gt;(() =&gt; Task.Run(() =&gt; keyVaultClient.GetCertificateAsync(<i>Constants</i>.TestKeyVaultCertificateSecretIdentifier)));</a>
</div>
<div class="rF"><div class="rN">Mocks\MockAuthenticationContext.cs (1)</div>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/Mocks/MockAuthenticationContext.cs.html#61"><b>61</b>throw new Exception(<i>Constants</i>.AdalException);</a>
</div>
<div class="rF"><div class="rN">Mocks\MockKeyVault.cs (3)</div>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/Mocks/MockKeyVault.cs.html#88"><b>88</b>response.Content = new StringContent(&quot;{\&quot;value\&quot;:\&quot;&quot; + <i>Constants</i>.TestCert + &quot;\&quot;,\&quot;contentType\&quot;:\&quot;application/x-pkcs12\&quot;,\&quot;id\&quot;:\&quot;dummyId\&quot;,\&quot;managed\&quot;:true,\&quot;attributes\&quot;:{\&quot;enabled\&quot;:true,\&quot;nbf\&quot;:1531943910,\&quot;exp\&quot;:1595102910,\&quot;created\&quot;:1531944510,\&quot;updated\&quot;:1531944510,\&quot;recoveryLevel\&quot;:\&quot;Purgeable\&quot;},\&quot;kid\&quot;:\&quot;dummyKid\&quot;}&quot;,</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/Mocks/MockKeyVault.cs.html#90"><b>90</b><i>Constants</i>.JsonContentType);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/Mocks/MockKeyVault.cs.html#97"><b>97</b><i>Constants</i>.JsonContentType);</a>
</div>
<div class="rF"><div class="rN">Mocks\MockMsi.cs (15)</div>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/Mocks/MockMsi.cs.html#73"><b>73</b>Content = new StringContent(<i>Constants</i>.IncorrectSecretError,</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/Mocks/MockMsi.cs.html#75"><b>75</b><i>Constants</i>.JsonContentType)</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/Mocks/MockMsi.cs.html#87"><b>87</b><i>Constants</i>.JsonContentType)</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/Mocks/MockMsi.cs.html#96"><b>96</b><i>Constants</i>.JsonContentType)</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/Mocks/MockMsi.cs.html#110"><b>110</b><i>Constants</i>.JsonContentType)</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/Mocks/MockMsi.cs.html#125"><b>125</b><i>Constants</i>.JsonContentType)</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/Mocks/MockMsi.cs.html#140"><b>140</b><i>Constants</i>.JsonContentType)</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/Mocks/MockMsi.cs.html#154"><b>154</b><i>Constants</i>.JsonContentType)</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/Mocks/MockMsi.cs.html#169"><b>169</b><i>Constants</i>.JsonContentType)</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/Mocks/MockMsi.cs.html#184"><b>184</b><i>Constants</i>.JsonContentType)</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/Mocks/MockMsi.cs.html#192"><b>192</b>Content = new StringContent(<i>Constants</i>.IncorrectFormatError,</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/Mocks/MockMsi.cs.html#194"><b>194</b><i>Constants</i>.JsonContentType)</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/Mocks/MockMsi.cs.html#223"><b>223</b><i>Constants</i>.JsonContentType)</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/Mocks/MockMsi.cs.html#237"><b>237</b><i>Constants</i>.JsonContentType)</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/Mocks/MockMsi.cs.html#240"><b>240</b>else if (Environment.GetEnvironmentVariable(<i>Constants</i>.MsiAppServiceEndpointEnv) != null</a>
</div>
<div class="rF"><div class="rN">Mocks\MockProcessManager.cs (2)</div>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/Mocks/MockProcessManager.cs.html#58"><b>58</b>throw new Exception(<i>Constants</i>.ProgramNotFoundError);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/Mocks/MockProcessManager.cs.html#61"><b>61</b>throw new Exception(<i>Constants</i>.DeveloperToolError);</a>
</div>
<div class="rF"><div class="rN">MsiAccessTokenProviderTests.cs (92)</div>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#24"><b>24</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiAppServiceEndpointEnv, null);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#25"><b>25</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiAppServiceHeaderEnv, null);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#27"><b>27</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiServiceFabricEndpointEnv, null);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#28"><b>28</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiServiceFabricHeaderEnv, null);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#29"><b>29</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiServiceFabricThumbprintEnv, null);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#30"><b>30</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiServiceFabricApiVersionEnv, null);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#45"><b>45</b>managedIdentityArgument = <i>Constants</i>.TestUserAssignedManagedIdentityId;</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#47"><b>47</b>expectedAppId = <i>Constants</i>.TestUserAssignedManagedIdentityId;</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#53"><b>53</b>expectedAppId = <i>Constants</i>.TestAppId;</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#61"><b>61</b>var authResult = await msiAccessTokenProvider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, <i>Constants</i>.TenantId).ConfigureAwait(false);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#64"><b>64</b>Validator.ValidateToken(authResult.AccessToken, msiAccessTokenProvider.PrincipalUsed, <i>Constants</i>.AppType, <i>Constants</i>.TenantId, expectedAppId, expiresOn: authResult.ExpiresOn);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#79"><b>79</b>var exception = await Assert.ThrowsAsync&lt;AzureServiceTokenProviderException&gt;(() =&gt; msiAccessTokenProvider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, <i>Constants</i>.TenantId));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#81"><b>81</b>Assert.Contains(<i>Constants</i>.TokenResponseFormatExceptionMessage, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#82"><b>82</b>Assert.Contains(<i>Constants</i>.JsonParseErrorException, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#97"><b>97</b>var exception = await Assert.ThrowsAsync&lt;AzureServiceTokenProviderException&gt;(() =&gt; msiAccessTokenProvider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, <i>Constants</i>.TenantId));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#100"><b>100</b>Assert.Contains(<i>Constants</i>.CannotBeNullError, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#109"><b>109</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiAppServiceEndpointEnv, <i>Constants</i>.MsiEndpoint);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#110"><b>110</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiAppServiceHeaderEnv, <i>Constants</i>.ClientSecret);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#119"><b>119</b>managedIdentityArgument = <i>Constants</i>.TestUserAssignedManagedIdentityId;</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#121"><b>121</b>expectedAppId = <i>Constants</i>.TestUserAssignedManagedIdentityId;</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#127"><b>127</b>expectedAppId = <i>Constants</i>.TestAppId;</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#135"><b>135</b>var authResult = await msiAccessTokenProvider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, <i>Constants</i>.TenantId).ConfigureAwait(false);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#137"><b>137</b>Validator.ValidateToken(authResult.AccessToken, msiAccessTokenProvider.PrincipalUsed, <i>Constants</i>.AppType, <i>Constants</i>.TenantId, expectedAppId, expiresOn: authResult.ExpiresOn);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#164"><b>164</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiServiceFabricEndpointEnv, &quot;https://10.0.0.4:2377/metadata/identity/oauth2/token&quot;);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#165"><b>165</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiServiceFabricHeaderEnv, &quot;f8c33594-3eea-46de-8888-d3d258f054e0&quot;);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#166"><b>166</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiServiceFabricThumbprintEnv, &quot;e9c25f41a4d8b430201b32918fb3a86d5325b69f&quot;);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#167"><b>167</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiServiceFabricApiVersionEnv, &quot;2020-05-01&quot;);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#177"><b>177</b>managedIdentityArgument = <i>Constants</i>.TestUserAssignedManagedIdentityId;</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#179"><b>179</b>expectedAppId = <i>Constants</i>.TestUserAssignedManagedIdentityId;</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#185"><b>185</b>expectedAppId = <i>Constants</i>.TestAppId;</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#193"><b>193</b>var authResult = await msiAccessTokenProvider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, <i>Constants</i>.TenantId).ConfigureAwait(false);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#195"><b>195</b>Validator.ValidateToken(authResult.AccessToken, msiAccessTokenProvider.PrincipalUsed, <i>Constants</i>.AppType, <i>Constants</i>.TenantId, expectedAppId, expiresOn: authResult.ExpiresOn);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#207"><b>207</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiAppServiceEndpointEnv, <i>Constants</i>.MsiEndpoint);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#208"><b>208</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiAppServiceHeaderEnv, <i>Constants</i>.ClientSecret);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#214"><b>214</b>var exception = await Assert.ThrowsAsync&lt;AzureServiceTokenProviderException&gt;(() =&gt; Task.Run(() =&gt; msiAccessTokenProvider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, <i>Constants</i>.TenantId)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#216"><b>216</b>Assert.Contains(<i>Constants</i>.IncorrectSecretError, exception.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#228"><b>228</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiAppServiceEndpointEnv, <i>Constants</i>.MsiEndpoint);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#229"><b>229</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiAppServiceHeaderEnv, <i>Constants</i>.ClientSecret);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#234"><b>234</b>var exception = await Assert.ThrowsAsync&lt;AzureServiceTokenProviderException&gt;(() =&gt; Task.Run(() =&gt; msiAccessTokenProvider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, <i>Constants</i>.TenantId)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#236"><b>236</b>Assert.Contains(<i>Constants</i>.IncorrectFormatError, exception.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#248"><b>248</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiAppServiceEndpointEnv, <i>Constants</i>.MsiEndpoint);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#249"><b>249</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiAppServiceHeaderEnv, <i>Constants</i>.ClientSecret);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#257"><b>257</b>var exception = await Assert.ThrowsAsync&lt;AzureServiceTokenProviderException&gt;(() =&gt; Task.Run(() =&gt; msiAccessTokenProvider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, <i>Constants</i>.TenantId)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#265"><b>265</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiAppServiceEndpointEnv, null);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#266"><b>266</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiAppServiceHeaderEnv, null);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#271"><b>271</b>var exception = await Assert.ThrowsAsync&lt;AzureServiceTokenProviderException&gt;(() =&gt; Task.Run(() =&gt; msiAccessTokenProvider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, <i>Constants</i>.TenantId)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#284"><b>284</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiAppServiceEndpointEnv, <i>Constants</i>.MsiEndpoint);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#285"><b>285</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiAppServiceHeaderEnv, <i>Constants</i>.ClientSecret);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#292"><b>292</b>var authResult = await msiAccessTokenProvider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, <i>Constants</i>.TenantId).ConfigureAwait(false);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#294"><b>294</b>Validator.ValidateToken(authResult.AccessToken, msiAccessTokenProvider.PrincipalUsed, <i>Constants</i>.AppType, <i>Constants</i>.TenantId, <i>Constants</i>.TestAppId, expiresOn: authResult.ExpiresOn);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#297"><b>297</b>var exception = await Assert.ThrowsAsync&lt;AzureServiceTokenProviderException&gt;(() =&gt; Task.Run(() =&gt; msiAccessTokenProvider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, <i>Constants</i>.TenantId)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#320"><b>320</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiAppServiceEndpointEnv, <i>Constants</i>.MsiEndpoint);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#321"><b>321</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiAppServiceHeaderEnv, <i>Constants</i>.ClientSecret);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#334"><b>334</b>var exception = await Assert.ThrowsAsync&lt;AzureServiceTokenProviderException&gt;(() =&gt; Task.Run(() =&gt; msiAccessTokenProvider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, <i>Constants</i>.TenantId)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#354"><b>354</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiAppServiceEndpointEnv, <i>Constants</i>.MsiEndpoint);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#355"><b>355</b>Environment.SetEnvironmentVariable(<i>Constants</i>.MsiAppServiceHeaderEnv, <i>Constants</i>.ClientSecret);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#362"><b>362</b>var authResult = await msiAccessTokenProvider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, <i>Constants</i>.TenantId).ConfigureAwait(false);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/MsiAccessTokenProviderTests.cs.html#365"><b>365</b>Validator.ValidateToken(authResult.AccessToken, msiAccessTokenProvider.PrincipalUsed, <i>Constants</i>.AppType, <i>Constants</i>.TenantId, <i>Constants</i>.TestAppId, expiresOn: authResult.ExpiresOn);</a>
</div>
<div class="rF"><div class="rN">SqlAppAuthenticationProviderTests.cs (7)</div>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/SqlAppAuthenticationProviderTests.cs.html#17"><b>17</b>var parameters = new SqlAppAuthenticationParameters(&quot;http://badauthority&quot;, <i>Constants</i>.KeyVaultResourceId, default);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/SqlAppAuthenticationProviderTests.cs.html#22"><b>22</b>Assert.Contains(<i>Constants</i>.SqlAppAuthProviderInvalidAuthority, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/SqlAppAuthenticationProviderTests.cs.html#29"><b>29</b>var parameters = new SqlAppAuthenticationParameters($&quot;{<i>Constants</i>.AzureAdInstance}{<i>Constants</i>.TenantId}&quot;, string.Empty, default);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/SqlAppAuthenticationProviderTests.cs.html#34"><b>34</b>Assert.Contains(<i>Constants</i>.SqlAppAuthProviderInvalidResource, exception.ToString());</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/SqlAppAuthenticationProviderTests.cs.html#48"><b>48</b>string returnValue = SqlAppAuthenticationProvider.GetConnectionStringByUserId(<i>Constants</i>.TestUserAssignedManagedIdentityId);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/SqlAppAuthenticationProviderTests.cs.html#50"><b>50</b>Assert.Equal(<i>Constants</i>.ManagedUserAssignedIdentityConnectionString, returnValue);</a>
</div>
<div class="rF"><div class="rN">VisualStudioAccessTokenProviderTests.cs (19)</div>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/VisualStudioAccessTokenProviderTests.cs.html#16"><b>16</b>_visualStudioTokenProviderFile = VisualStudioTokenProviderFile.Load(Path.Combine(<i>Constants</i>.TestFilesPath, &quot;VisualStudioSingleTokenProvider.json&quot;));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/VisualStudioAccessTokenProviderTests.cs.html#20"><b>20</b>_visualStudioTokenProviderFile.TokenProviders[0].Path = Path.GetFullPath(Path.Combine(<i>Constants</i>.TestFilesPath, &quot;VisualStudioSingleTokenProvider.json&quot;));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/VisualStudioAccessTokenProviderTests.cs.html#33"><b>33</b>var authResult = await visualStudioAccessTokenProvider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, <i>Constants</i>.TenantId).ConfigureAwait(false);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/VisualStudioAccessTokenProviderTests.cs.html#35"><b>35</b>Validator.ValidateToken(authResult.AccessToken, visualStudioAccessTokenProvider.PrincipalUsed, <i>Constants</i>.UserType, <i>Constants</i>.TenantId, expiresOn: authResult.ExpiresOn);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/VisualStudioAccessTokenProviderTests.cs.html#49"><b>49</b>Environment.SetEnvironmentVariable(<i>Constants</i>.LocalAppDataEnv, path);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/VisualStudioAccessTokenProviderTests.cs.html#51"><b>51</b>var exception = await Assert.ThrowsAsync&lt;AzureServiceTokenProviderException&gt;(() =&gt; Task.Run(() =&gt; visualStudioAccessTokenProvider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, <i>Constants</i>.TenantId)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/VisualStudioAccessTokenProviderTests.cs.html#55"><b>55</b>Assert.Contains(<i>Constants</i>.KeyVaultResourceId, exception.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/VisualStudioAccessTokenProviderTests.cs.html#70"><b>70</b>var exception = await Assert.ThrowsAsync&lt;AzureServiceTokenProviderException&gt;(() =&gt; Task.Run(() =&gt; visualStudioAccessTokenProvider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, <i>Constants</i>.TenantId)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/VisualStudioAccessTokenProviderTests.cs.html#73"><b>73</b>Assert.Contains(<i>Constants</i>.KeyVaultResourceId, exception.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/VisualStudioAccessTokenProviderTests.cs.html#89"><b>89</b>var exception = await Assert.ThrowsAsync&lt;AzureServiceTokenProviderException&gt;(() =&gt; Task.Run(() =&gt; visualStudioAccessTokenProvider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, <i>Constants</i>.TenantId)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/VisualStudioAccessTokenProviderTests.cs.html#92"><b>92</b>Assert.Contains(<i>Constants</i>.DeveloperToolError, exception.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/VisualStudioAccessTokenProviderTests.cs.html#93"><b>93</b>Assert.Contains(<i>Constants</i>.KeyVaultResourceId, exception.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/VisualStudioAccessTokenProviderTests.cs.html#110"><b>110</b>var exception = await Assert.ThrowsAsync&lt;AzureServiceTokenProviderException&gt;(() =&gt; Task.Run(() =&gt; visualStudioAccessTokenProvider.GetAuthResultAsync(&quot;https://test^&quot;, <i>Constants</i>.TenantId)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/VisualStudioAccessTokenProviderTests.cs.html#112"><b>112</b>Assert.Contains(<i>Constants</i>.NotInExpectedFormatError, exception.Message);</a>
</div>
<div class="rF"><div class="rN">VisualStudioTokenProviderFileTests.cs (9)</div>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/VisualStudioTokenProviderFileTests.cs.html#13"><b>13</b>var visualStudioTokenProviderFile = VisualStudioTokenProviderFile.Load(Path.Combine(<i>Constants</i>.TestFilesPath, &quot;VisualStudioSingleTokenProvider.json&quot;));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/VisualStudioTokenProviderFileTests.cs.html#19"><b>19</b>Assert.Equal(<i>Constants</i>.TokenProviderPath, visualStudioTokenProviderFile.TokenProviders[0].Path);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/VisualStudioTokenProviderFileTests.cs.html#22"><b>22</b>Assert.Equal(<i>Constants</i>.ServiceConfigFileArgument, visualStudioTokenProviderFile.TokenProviders[0].Arguments[0]);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/VisualStudioTokenProviderFileTests.cs.html#28"><b>28</b>var visualStudioTokenProviderFile = VisualStudioTokenProviderFile.Load(Path.Combine(<i>Constants</i>.TestFilesPath, &quot;VisualStudioMultiTokenProvider.json&quot;));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/VisualStudioTokenProviderFileTests.cs.html#34"><b>34</b>Assert.Equal(<i>Constants</i>.TokenProviderPath, visualStudioTokenProviderFile.TokenProviders[0].Path);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/VisualStudioTokenProviderFileTests.cs.html#38"><b>38</b>Assert.Equal(<i>Constants</i>.ServiceConfigFileArgumentName, visualStudioTokenProviderFile.TokenProviders[0].Arguments[0]);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/VisualStudioTokenProviderFileTests.cs.html#39"><b>39</b>Assert.Equal(<i>Constants</i>.ServiceConfigFileArgument, visualStudioTokenProviderFile.TokenProviders[0].Arguments[1]);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/VisualStudioTokenProviderFileTests.cs.html#45"><b>45</b>Exception exception = Assert.Throws&lt;FormatException&gt;(() =&gt; VisualStudioTokenProviderFile.Load(Path.Combine(<i>Constants</i>.TestFilesPath, &quot;VisualStudioTokenProviderMissingPreference.json&quot;)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/VisualStudioTokenProviderFileTests.cs.html#48"><b>48</b>Assert.Contains(<i>Constants</i>.PreferenceNotFound, exception.Message);</a>
</div>
<div class="rF"><div class="rN">WindowsAuthenticationAccessTokenProviderTests.cs (19)</div>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/WindowsAuthenticationAccessTokenProviderTests.cs.html#24"><b>24</b>WindowsAuthenticationAzureServiceTokenProvider provider = new WindowsAuthenticationAzureServiceTokenProvider(authenticationContext, <i>Constants</i>.AzureAdInstance);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/WindowsAuthenticationAccessTokenProviderTests.cs.html#26"><b>26</b>var authResult = await provider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, string.Empty).ConfigureAwait(false);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/WindowsAuthenticationAccessTokenProviderTests.cs.html#28"><b>28</b>Validator.ValidateToken(authResult.AccessToken, provider.PrincipalUsed, <i>Constants</i>.UserType, <i>Constants</i>.TenantId, expiresOn: authResult.ExpiresOn);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/WindowsAuthenticationAccessTokenProviderTests.cs.html#40"><b>40</b>WindowsAuthenticationAzureServiceTokenProvider provider = new WindowsAuthenticationAzureServiceTokenProvider(authenticationContext, <i>Constants</i>.AzureAdInstance);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/WindowsAuthenticationAccessTokenProviderTests.cs.html#42"><b>42</b>var authResult = await provider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, string.Empty).ConfigureAwait(false);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/WindowsAuthenticationAccessTokenProviderTests.cs.html#44"><b>44</b>Validator.ValidateToken(authResult.AccessToken, provider.PrincipalUsed, <i>Constants</i>.UserType, <i>Constants</i>.TenantId, expiresOn: authResult.ExpiresOn);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/WindowsAuthenticationAccessTokenProviderTests.cs.html#56"><b>56</b>WindowsAuthenticationAzureServiceTokenProvider provider = new WindowsAuthenticationAzureServiceTokenProvider(authenticationContext, <i>Constants</i>.AzureAdInstance);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/WindowsAuthenticationAccessTokenProviderTests.cs.html#58"><b>58</b>var exception = await Assert.ThrowsAsync&lt;AzureServiceTokenProviderException&gt;(() =&gt; Task.Run(() =&gt; provider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, <i>Constants</i>.TenantId)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/WindowsAuthenticationAccessTokenProviderTests.cs.html#60"><b>60</b>Assert.Contains(<i>Constants</i>.KeyVaultResourceId, exception.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/WindowsAuthenticationAccessTokenProviderTests.cs.html#61"><b>61</b>Assert.Contains(<i>Constants</i>.TenantId, exception.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/WindowsAuthenticationAccessTokenProviderTests.cs.html#74"><b>74</b>WindowsAuthenticationAzureServiceTokenProvider provider = new WindowsAuthenticationAzureServiceTokenProvider(authenticationContext, <i>Constants</i>.AzureAdInstance);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/WindowsAuthenticationAccessTokenProviderTests.cs.html#76"><b>76</b>var exception = await Assert.ThrowsAsync&lt;AzureServiceTokenProviderException&gt;(() =&gt; Task.Run(() =&gt; provider.GetAuthResultAsync(<i>Constants</i>.KeyVaultResourceId, <i>Constants</i>.TenantId)));</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/WindowsAuthenticationAccessTokenProviderTests.cs.html#78"><b>78</b>Assert.Contains(<i>Constants</i>.KeyVaultResourceId, exception.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/WindowsAuthenticationAccessTokenProviderTests.cs.html#79"><b>79</b>Assert.Contains(<i>Constants</i>.TenantId, exception.Message);</a>
<a href="../../Microsoft.Azure.Services.AppAuthentication.Unit.Tests/WindowsAuthenticationAccessTokenProviderTests.cs.html#80"><b>80</b>Assert.Contains(<i>Constants</i>.AdalException, exception.Message);</a>
</div>
</div>
</body></html>
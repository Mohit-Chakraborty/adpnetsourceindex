<!DOCTYPE html>
<html><head><title>ExpandResourceTests.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(319);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Azure.ResourceManager.Network.Tests/Tests/ExpandResourceTests.cs" target="_top">Tests\ExpandResourceTests.cs</a><br/></td><td><a class="blueLink" href="https://github.com/Azure/azure-sdk-for-net/tree/main/sdk/network/Azure.ResourceManager.Network/tests/Tests/ExpandResourceTests.cs" target="_blank">View on GitHub</a></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Azure.ResourceManager.Network.Tests" target="_top">Azure.ResourceManager.Network.Tests.csproj</a> (Azure.ResourceManager.Network.Tests)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License.</span>
 
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>.<span class="i n">Tasks</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Core</span>.<span class="i n">TestFramework</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">ResourceManager</span>.<span class="i n">Resources</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">ResourceManager</span>.<span class="i n">Resources</span>.<span class="i n">Models</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">ResourceManager</span>.<span class="i n">Network</span>.<span class="i n">Models</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">ResourceManager</span>.<span class="i n">Network</span>.<span class="i n">Tests</span>.<span class="i n">Helpers</span>;
<b>using</b> <span class="i n">NUnit</span>.<span class="i n">Framework</span>;
<b>using</b> <span class="i n">System</span>;
 
<b>namespace</b> <span class="i n">Azure</span>.<span class="i n">ResourceManager</span>.<span class="i n">Network</span>.<span class="i n">Tests</span>
{
    <b>public class</b> <a id="4ab0494a48b1f00e" href="../R/../../0000000000.html" target="n" data-glyph="0,0" class="t t">ExpandResourceTests</a> : <a href="../Helpers/NetworkServiceClientTestBase.cs.html#fa228a33c9046747" class="t t">NetworkServiceClientTestBase</a>
    {
        <b>private</b> <a href="/Azure.ResourceManager/A.html#99db772cd1f17a83" class="t t">SubscriptionResource</a> <a id="ba93544bd2e17806" href="../R/ba93544bd2e17806.html" target="n" data-glyph="46,1" class="i field">_subscription</a>;
 
        <b>public</b> <a id="141f19590dd43786" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="t constructor">ExpandResourceTests</a>(<b>bool</b> <span id="r0 rd" class="r0 r">isAsync</span>) : <a href="../Helpers/NetworkServiceClientTestBase.cs.html#4cab59d9848dcb7a" class="k">base</a>(<span class="r0 r">isAsync</span>)
        {
        }
 
        [<span class="t constructor">SetUp</span>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="10cf3766c2be5915" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ClearChallengeCacheforRecord</a>()
        {
            <b>if</b> (<a href="/Azure.Core.TestFramework/A.html#eb077c11a09b6b1e" class="i property">Mode</a> == <a href="/Azure.Core.TestFramework/A.html#d7d5cc97dd76217f" class="t t">RecordedTestMode</a>.<a href="/Azure.Core.TestFramework/A.html#62f98a4a2b1d56c3" class="i field">Record</a> || <a href="/Azure.Core.TestFramework/A.html#eb077c11a09b6b1e" class="i property">Mode</a> == <a href="/Azure.Core.TestFramework/A.html#d7d5cc97dd76217f" class="t t">RecordedTestMode</a>.<a href="/Azure.Core.TestFramework/A.html#bde4663b03b59b85" class="i field">Playback</a>)
            {
                <a href="../Helpers/NetworkServiceClientTestBase.cs.html#3409c91ac916576d" class="i method">Initialize</a>();
            }
            <a href="#ba93544bd2e17806" class="i field">_subscription</a> = <b>await</b> <a href="../Helpers/NetworkServiceClientTestBase.cs.html#fc6ebb6a956af84b" class="i property">ArmClient</a>.<a href="/Azure.ResourceManager/A.html#533b30f328f4b2ec" class="i method">GetDefaultSubscriptionAsync</a>();
        }
 
        [<span class="t constructor">Test</span>]
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="325ff2b0ca19b04c" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ExpandResourceTest</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1 rd" class="r1 r">resourceGroupName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#ebd53467ba4df734" class="i method">GenerateAssetName</a>(<span class="s">&quot;csmrg&quot;</span>);
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r2 rd" class="r2 r">location</span> = <a href="/Azure.Core.TestFramework/A.html#9185092834304053" class="i property">TestEnvironment</a>.<a href="/Azure.Core.TestFramework/A.html#54bc5e3ade2ad6bf" class="i property">Location</a>;
            <a href="/Azure.ResourceManager/A.html#4c78bd14d86b6946" class="k">var</a> <span id="r3 rd" class="r3 r">resourceGroup</span> = <b>await</b> <a href="../Helpers/NetworkServiceClientTestBase.cs.html#6db07e083f557a94" class="i method">CreateResourceGroup</a>(<span class="r1 r">resourceGroupName</span>);
 
            <span class="c">// Create lbPublicIP</span>
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r4 rd" class="r4 r">lbPublicIpName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#ebd53467ba4df734" class="i method">GenerateAssetName</a>(<span class="s">&quot;azsmnet&quot;</span>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r5 rd" class="r5 r">lbDomaingNameLabel</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#ebd53467ba4df734" class="i method">GenerateAssetName</a>(<span class="s">&quot;azsmnet&quot;</span>);
 
            <a href="/Azure.ResourceManager.Network/A.html#9277cf260a81d379" class="t t">PublicIPAddressResource</a> <span id="r6 rd" class="r6 r">lbPublicIp</span> = <b>await</b> <a href="../Helpers/NetworkServiceClientTestBase.cs.html#0f75fe32e99ac557" class="i method">CreateDefaultPublicIpAddress</a>(
                <span class="r4 r">lbPublicIpName</span>,
                <span class="r5 r">lbDomaingNameLabel</span>,
                <span class="r2 r">location</span>,
                <span class="r3 r">resourceGroup</span>.<a href="/Azure.ResourceManager.Network/A.html#285a25c0b14590ba" class="i method">GetPublicIPAddresses</a>());
 
            <span class="c">// Create Vnet</span>
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r7 rd" class="r7 r">vnetName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#ebd53467ba4df734" class="i method">GenerateAssetName</a>(<span class="s">&quot;azsmnet&quot;</span>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r8 rd" class="r8 r">subnetName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#ebd53467ba4df734" class="i method">GenerateAssetName</a>(<span class="s">&quot;azsmnet&quot;</span>);
            <a href="/Azure.ResourceManager.Network/A.html#997f879b7ea7fa62" class="t t">VirtualNetworkResource</a> <span id="r9 rd" class="r9 r">vnet</span> = <b>await</b> <a href="../Helpers/NetworkServiceClientTestBase.cs.html#c47e6e3eae2adece" class="i method">CreateVirtualNetwork</a>(<span class="r7 r">vnetName</span>, <span class="r8 r">subnetName</span>, <span class="r2 r">location</span>, <span class="r3 r">resourceGroup</span>.<a href="/Azure.ResourceManager.Network/A.html#4e2e375c912536e0" class="i method">GetVirtualNetworks</a>());
 
            <span class="c">// Create Nics</span>
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r10 rd" class="r10 r">nic1name</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#ebd53467ba4df734" class="i method">GenerateAssetName</a>(<span class="s">&quot;azsmnet&quot;</span>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r11 rd" class="r11 r">nic2name</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#ebd53467ba4df734" class="i method">GenerateAssetName</a>(<span class="s">&quot;azsmnet&quot;</span>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r12 rd" class="r12 r">nic3name</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#ebd53467ba4df734" class="i method">GenerateAssetName</a>(<span class="s">&quot;azsmnet&quot;</span>);
 
            <a href="/Azure.ResourceManager.Network/A.html#1a1b9011243b7fec" class="t t">NetworkInterfaceResource</a> <span id="r13 rd" class="r13 r">nic1</span> = <b>await</b> <a href="../Helpers/NetworkServiceClientTestBase.cs.html#db1bb60d51473e04" class="i method">CreateNetworkInterface</a>(
                <span class="r10 r">nic1name</span>,
                <b>null</b>,
                <span class="r9 r">vnet</span>.<a href="/Azure.ResourceManager.Network/A.html#f49b38dc37574394" class="i property">Data</a>.<a href="/Azure.ResourceManager.Network/A.html#1c145dce1dc17fb2" class="i property">Subnets</a>[0].<a href="/Azure.ResourceManager.Network/A.html#b5aff9649ee9076b" class="i property">Id</a>,
                <span class="r2 r">location</span>,
                <span class="s">&quot;ipconfig&quot;</span>,
                <span class="r3 r">resourceGroup</span>.<a href="/Azure.ResourceManager.Network/A.html#4d4ea159c98094dc" class="i method">GetNetworkInterfaces</a>());
 
            <a href="/Azure.ResourceManager.Network/A.html#1a1b9011243b7fec" class="t t">NetworkInterfaceResource</a> <span id="r14 rd" class="r14 r">nic2</span> = <b>await</b> <a href="../Helpers/NetworkServiceClientTestBase.cs.html#db1bb60d51473e04" class="i method">CreateNetworkInterface</a>(
                <span class="r11 r">nic2name</span>,
                <b>null</b>,
                <span class="r9 r">vnet</span>.<a href="/Azure.ResourceManager.Network/A.html#f49b38dc37574394" class="i property">Data</a>.<a href="/Azure.ResourceManager.Network/A.html#1c145dce1dc17fb2" class="i property">Subnets</a>[0].<a href="/Azure.ResourceManager.Network/A.html#b5aff9649ee9076b" class="i property">Id</a>,
                <span class="r2 r">location</span>,
                <span class="s">&quot;ipconfig&quot;</span>,
                <span class="r3 r">resourceGroup</span>.<a href="/Azure.ResourceManager.Network/A.html#4d4ea159c98094dc" class="i method">GetNetworkInterfaces</a>());
 
            <a href="/Azure.ResourceManager.Network/A.html#1a1b9011243b7fec" class="t t">NetworkInterfaceResource</a> <span id="r15 rd" class="r15 r">nic3</span> = <b>await</b> <a href="../Helpers/NetworkServiceClientTestBase.cs.html#db1bb60d51473e04" class="i method">CreateNetworkInterface</a>(
                <span class="r12 r">nic3name</span>,
                <b>null</b>,
                <span class="r9 r">vnet</span>.<a href="/Azure.ResourceManager.Network/A.html#f49b38dc37574394" class="i property">Data</a>.<a href="/Azure.ResourceManager.Network/A.html#1c145dce1dc17fb2" class="i property">Subnets</a>[0].<a href="/Azure.ResourceManager.Network/A.html#b5aff9649ee9076b" class="i property">Id</a>,
                <span class="r2 r">location</span>,
                <span class="s">&quot;ipconfig&quot;</span>,
                <span class="r3 r">resourceGroup</span>.<a href="/Azure.ResourceManager.Network/A.html#4d4ea159c98094dc" class="i method">GetNetworkInterfaces</a>());
 
            <span class="c">// Create the LoadBalancer</span>
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r16 rd" class="r16 r">lbName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#ebd53467ba4df734" class="i method">GenerateAssetName</a>(<span class="s">&quot;azsmnet&quot;</span>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r17 rd" class="r17 r">frontendIpConfigName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#ebd53467ba4df734" class="i method">GenerateAssetName</a>(<span class="s">&quot;azsmnet&quot;</span>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r18 rd" class="r18 r">backEndAddressPoolName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#ebd53467ba4df734" class="i method">GenerateAssetName</a>(<span class="s">&quot;azsmnet&quot;</span>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r19 rd" class="r19 r">loadBalancingRuleName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#ebd53467ba4df734" class="i method">GenerateAssetName</a>(<span class="s">&quot;azsmnet&quot;</span>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r20 rd" class="r20 r">probeName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#ebd53467ba4df734" class="i method">GenerateAssetName</a>(<span class="s">&quot;azsmnet&quot;</span>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r21 rd" class="r21 r">inboundNatRule1Name</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#ebd53467ba4df734" class="i method">GenerateAssetName</a>(<span class="s">&quot;azsmnet&quot;</span>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r22 rd" class="r22 r">inboundNatRule2Name</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#ebd53467ba4df734" class="i method">GenerateAssetName</a>(<span class="s">&quot;azsmnet&quot;</span>);
 
            <span class="c">// Populate the loadBalancerCreateOrUpdateParameter</span>
            <a href="/Azure.ResourceManager.Network/A.html#97273bdd0710aad3" class="k">var</a> <span id="r23 rd" class="r23 r">loadBalancerData</span> = <b>new</b> <a href="/Azure.ResourceManager.Network/A.html#e33b67a763e24e37" class="t constructor">LoadBalancerData</a>()
            {
                <a href="/Azure.ResourceManager.Network/A.html#95c4756eebaa18fb" class="i property">Location</a> = <span class="r2 r">location</span>,
                <a href="/Azure.ResourceManager.Network/A.html#445a3416e32a703d" class="i property">FrontendIPConfigurations</a> = {
                    <b>new</b> <a href="/Azure.ResourceManager.Network/A.html#26b0a60c64ecfe88" class="t constructor">FrontendIPConfigurationData</a>()
                    {
                        <a href="/Azure.ResourceManager.Network/A.html#d501599a5a61785e" class="i property">Name</a> = <span class="r17 r">frontendIpConfigName</span>,
                        <a href="/Azure.ResourceManager.Network/A.html#77315f1ef17d45d9" class="i property">PublicIPAddress</a> = <b>new</b> <a href="/Azure.ResourceManager.Network/A.html#71ba9b41df9d907f" class="t constructor">PublicIPAddressData</a>()
                        {
                            <a href="/Azure.ResourceManager.Network/A.html#d6507e4195a80b3a" class="i property">Id</a> = <span class="r6 r">lbPublicIp</span>.<a href="/Azure.ResourceManager/A.html#4832c0d9257e4bd3" class="i property">Id</a>
                        }
                    }
                },
                <a href="/Azure.ResourceManager.Network/A.html#7065ec1989286d3a" class="i property">BackendAddressPools</a> = {
                    <b>new</b> <a href="/Azure.ResourceManager.Network/A.html#4fc8883692bb9ae2" class="t constructor">BackendAddressPoolData</a>()
                    {
                        <a href="/Azure.ResourceManager.Network/A.html#b7b8113c0a12f9bf" class="i property">Name</a> = <span class="r18 r">backEndAddressPoolName</span>,
                    }
                },
                <a href="/Azure.ResourceManager.Network/A.html#c90ea1ae3b63ce11" class="i property">LoadBalancingRules</a> = {
                    <b>new</b> <a href="/Azure.ResourceManager.Network/A.html#084a96505758b3a3" class="t constructor">LoadBalancingRuleData</a>()
                    {
                        <a href="/Azure.ResourceManager.Network/A.html#b677b79ced88709d" class="i property">Name</a> = <span class="r19 r">loadBalancingRuleName</span>,
                        <a href="/Azure.ResourceManager.Network/A.html#cbbed36db8d39131" class="i property">FrontendIPConfiguration</a> = <b>new</b> <a href="/Azure.ResourceManager/A.html#9c5d66ba82bafec7" class="t constructor">WritableSubResource</a>()
                        {
                            <a href="/Azure.ResourceManager/A.html#f18a6fd4de69147d" class="i property">Id</a> = <a href="../Helpers/NetworkServiceClientTestBase.cs.html#49d6ed4cc808a1d4" class="i method">GetChildLbResourceId</a>(<a href="/Azure.Core.TestFramework/A.html#9185092834304053" class="i property">TestEnvironment</a>.<a href="/Azure.Core.TestFramework/A.html#ebe6d0d5a300171a" class="i property">SubscriptionId</a>,
                            <span class="r1 r">resourceGroupName</span>, <span class="r16 r">lbName</span>, <span class="s">&quot;FrontendIPConfigurations&quot;</span>, <span class="r17 r">frontendIpConfigName</span>)
                        },
                        <a href="/Azure.ResourceManager.Network/A.html#5fa120cf4b9524d0" class="i property">Protocol</a> = <a href="/Azure.ResourceManager.Network/A.html#c47189478180fb43" class="t t">TransportProtocol</a>.<a href="/Azure.ResourceManager.Network/A.html#ff0c5a3581da720a" class="i property">Tcp</a>,
                        <a href="/Azure.ResourceManager.Network/A.html#8203b37164a7d002" class="i property">FrontendPort</a> = 80,
                        <a href="/Azure.ResourceManager.Network/A.html#1c383501b7b9824a" class="i property">BackendPort</a> = 80,
                        <a href="/Azure.ResourceManager.Network/A.html#f9f04092f7e07688" class="i property">EnableFloatingIP</a> = <b>false</b>,
                        <a href="/Azure.ResourceManager.Network/A.html#5f1bce10685d7c66" class="i property">IdleTimeoutInMinutes</a> = 15,
                        <a href="/Azure.ResourceManager.Network/A.html#6dd0f93736f8bb12" class="i property">BackendAddressPool</a> = <b>new</b> <a href="/Azure.ResourceManager/A.html#9c5d66ba82bafec7" class="t constructor">WritableSubResource</a>()
                        {
                            <a href="/Azure.ResourceManager/A.html#f18a6fd4de69147d" class="i property">Id</a> = <a href="../Helpers/NetworkServiceClientTestBase.cs.html#49d6ed4cc808a1d4" class="i method">GetChildLbResourceId</a>(<a href="/Azure.Core.TestFramework/A.html#9185092834304053" class="i property">TestEnvironment</a>.<a href="/Azure.Core.TestFramework/A.html#ebe6d0d5a300171a" class="i property">SubscriptionId</a>,
                                <span class="r1 r">resourceGroupName</span>, <span class="r16 r">lbName</span>, <span class="s">&quot;backendAddressPools&quot;</span>, <span class="r18 r">backEndAddressPoolName</span>)
                        },
                        <a href="/Azure.ResourceManager.Network/A.html#1377a1d391404c21" class="i property">Probe</a> = <b>new</b> <a href="/Azure.ResourceManager/A.html#9c5d66ba82bafec7" class="t constructor">WritableSubResource</a>()
                        {
                            <a href="/Azure.ResourceManager/A.html#f18a6fd4de69147d" class="i property">Id</a> = <a href="../Helpers/NetworkServiceClientTestBase.cs.html#49d6ed4cc808a1d4" class="i method">GetChildLbResourceId</a>(<a href="/Azure.Core.TestFramework/A.html#9185092834304053" class="i property">TestEnvironment</a>.<a href="/Azure.Core.TestFramework/A.html#ebe6d0d5a300171a" class="i property">SubscriptionId</a>,
                            <span class="r1 r">resourceGroupName</span>, <span class="r16 r">lbName</span>, <span class="s">&quot;probes&quot;</span>, <span class="r20 r">probeName</span>)
                        }
                    }
                },
                <a href="/Azure.ResourceManager.Network/A.html#c04af0d1a01e71d2" class="i property">Probes</a> = {
                    <b>new</b> <a href="/Azure.ResourceManager.Network/A.html#12ec898c7fd87df0" class="t constructor">ProbeData</a>()
                    {
                        <a href="/Azure.ResourceManager.Network/A.html#47bc1ac900a7871f" class="i property">Name</a> = <span class="r20 r">probeName</span>,
                        <a href="/Azure.ResourceManager.Network/A.html#971fee9187bd41f3" class="i property">Protocol</a> = <a href="/Azure.ResourceManager.Network/A.html#22a57df455902282" class="t t">ProbeProtocol</a>.<a href="/Azure.ResourceManager.Network/A.html#f3892b212c122eff" class="i property">Http</a>,
                        <a href="/Azure.ResourceManager.Network/A.html#791e472c74000f13" class="i property">Port</a> = 80,
                        <a href="/Azure.ResourceManager.Network/A.html#b2eab7ea84fbeb7d" class="i property">RequestPath</a> = <span class="s">&quot;healthcheck.aspx&quot;</span>,
                        <a href="/Azure.ResourceManager.Network/A.html#69dd0c0acc3e1163" class="i property">IntervalInSeconds</a> = 10,
                        <a href="/Azure.ResourceManager.Network/A.html#fe49feb11f3796e0" class="i property">NumberOfProbes</a> = 2
                    }
                },
                <a href="/Azure.ResourceManager.Network/A.html#fe2746451013991c" class="i property">InboundNatRules</a> = {
                    <b>new</b> <a href="/Azure.ResourceManager.Network/A.html#7687280973648f2d" class="t constructor">InboundNatRuleData</a>()
                    {
                        <a href="/Azure.ResourceManager.Network/A.html#1c8f36593b690f07" class="i property">Name</a> = <span class="r21 r">inboundNatRule1Name</span>,
                        <a href="/Azure.ResourceManager.Network/A.html#87d44e3490465a52" class="i property">FrontendIPConfiguration</a> = <b>new</b> <a href="/Azure.ResourceManager/A.html#9c5d66ba82bafec7" class="t constructor">WritableSubResource</a>()
                        {
                            <a href="/Azure.ResourceManager/A.html#f18a6fd4de69147d" class="i property">Id</a> = <a href="../Helpers/NetworkServiceClientTestBase.cs.html#49d6ed4cc808a1d4" class="i method">GetChildLbResourceId</a>(<a href="/Azure.Core.TestFramework/A.html#9185092834304053" class="i property">TestEnvironment</a>.<a href="/Azure.Core.TestFramework/A.html#ebe6d0d5a300171a" class="i property">SubscriptionId</a>,
                            <span class="r1 r">resourceGroupName</span>, <span class="r16 r">lbName</span>, <span class="s">&quot;FrontendIPConfigurations&quot;</span>, <span class="r17 r">frontendIpConfigName</span>)
                        },
                        <a href="/Azure.ResourceManager.Network/A.html#799621d797b684db" class="i property">Protocol</a> = <a href="/Azure.ResourceManager.Network/A.html#c47189478180fb43" class="t t">TransportProtocol</a>.<a href="/Azure.ResourceManager.Network/A.html#ff0c5a3581da720a" class="i property">Tcp</a>,
                        <a href="/Azure.ResourceManager.Network/A.html#e20a2aabec60f7cc" class="i property">FrontendPort</a> = 3389,
                        <a href="/Azure.ResourceManager.Network/A.html#0871bc22b2320d0a" class="i property">BackendPort</a> = 3389,
                        <a href="/Azure.ResourceManager.Network/A.html#17ca366c2be2493c" class="i property">IdleTimeoutInMinutes</a> = 15,
                        <a href="/Azure.ResourceManager.Network/A.html#36f553d47f1004de" class="i property">EnableFloatingIP</a> = <b>false</b>
                    },
                    <b>new</b> <a href="/Azure.ResourceManager.Network/A.html#7687280973648f2d" class="t constructor">InboundNatRuleData</a>()
                    {
                        <a href="/Azure.ResourceManager.Network/A.html#1c8f36593b690f07" class="i property">Name</a> = <span class="r22 r">inboundNatRule2Name</span>,
                        <a href="/Azure.ResourceManager.Network/A.html#87d44e3490465a52" class="i property">FrontendIPConfiguration</a> = <b>new</b> <a href="/Azure.ResourceManager/A.html#9c5d66ba82bafec7" class="t constructor">WritableSubResource</a>()
                        {
                            <a href="/Azure.ResourceManager/A.html#f18a6fd4de69147d" class="i property">Id</a> = <a href="../Helpers/NetworkServiceClientTestBase.cs.html#49d6ed4cc808a1d4" class="i method">GetChildLbResourceId</a>(<a href="/Azure.Core.TestFramework/A.html#9185092834304053" class="i property">TestEnvironment</a>.<a href="/Azure.Core.TestFramework/A.html#ebe6d0d5a300171a" class="i property">SubscriptionId</a>,
                            <span class="r1 r">resourceGroupName</span>, <span class="r16 r">lbName</span>, <span class="s">&quot;FrontendIPConfigurations&quot;</span>, <span class="r17 r">frontendIpConfigName</span>)
                        },
                        <a href="/Azure.ResourceManager.Network/A.html#799621d797b684db" class="i property">Protocol</a> = <a href="/Azure.ResourceManager.Network/A.html#c47189478180fb43" class="t t">TransportProtocol</a>.<a href="/Azure.ResourceManager.Network/A.html#ff0c5a3581da720a" class="i property">Tcp</a>,
                        <a href="/Azure.ResourceManager.Network/A.html#e20a2aabec60f7cc" class="i property">FrontendPort</a> = 3390,
                        <a href="/Azure.ResourceManager.Network/A.html#0871bc22b2320d0a" class="i property">BackendPort</a> = 3389,
                        <a href="/Azure.ResourceManager.Network/A.html#17ca366c2be2493c" class="i property">IdleTimeoutInMinutes</a> = 15,
                        <a href="/Azure.ResourceManager.Network/A.html#36f553d47f1004de" class="i property">EnableFloatingIP</a> = <b>false</b>,
                    }
                }
            };
 
            <span class="c">// Create the loadBalancer</span>
            <a href="/Azure.ResourceManager.Network/A.html#1704a5d8e3d9706e" class="k">var</a> <span id="r24 rd" class="r24 r">loadBalancerCollection</span> = <span class="r3 r">resourceGroup</span>.<a href="/Azure.ResourceManager.Network/A.html#3607d5178369a805" class="i method">GetLoadBalancers</a>();
            <a href="/Azure.ResourceManager.Network/A.html#38f53f33f005c6c5" class="t t">LoadBalancerResource</a> <span id="r25 rd" class="r25 r">loadBalancer</span> = (<b>await</b> <span class="r24 r">loadBalancerCollection</span>.<a href="/Azure.ResourceManager.Network/A.html#3128369e0b7ec8e3" class="i method">CreateOrUpdateAsync</a>(<a href="/Azure.Core/A.html#caa4ec3ab01f635d" class="t t">WaitUntil</a>.<a href="/Azure.Core/A.html#cf19c6b20751a6f3" class="i field">Completed</a>, <span class="r16 r">lbName</span>, <span class="r23 r">loadBalancerData</span>)).<a href="/Azure.Core/A.html#5538308a0084d4e8" class="i property">Value</a>;
 
            <span class="c">// Associate the nic with LB</span>
            <span class="c">//nic1.GetNetworkInterfaceIPConfigurations().List().First().`</span>
            <span class="c">// TODO: where do we have the following?</span>
            <span class="c">//nic1.IpConfigurations.First().LoadBalancerBackendAddressPools.Add(getLoadBalancer.Value.BackendAddressPools.First());</span>
            <span class="c">//nic1.IpConfigurations.First().LoadBalancerInboundNatRules.Add(getLoadBalancer.Value.InboundNatRules.First());</span>
            <span class="c">//nic2.IpConfigurations.First().LoadBalancerBackendAddressPools.Add(getLoadBalancer.Value.BackendAddressPools.First());</span>
            <span class="c">//nic3.IpConfigurations.First().LoadBalancerInboundNatRules.Add(getLoadBalancer.Value.InboundNatRules[1]);</span>
            <span class="r13 r">nic1</span>.<a href="/Azure.ResourceManager.Network/A.html#67971f2e66235bd2" class="i property">Data</a>.<a href="/Azure.ResourceManager.Network/A.html#3996d1405764389d" class="i property">IPConfigurations</a>.<a href="@0@System.Core/A.html#bc8ae402a61dd9d6" class="i method">First</a>().<a href="/Azure.ResourceManager.Network/A.html#445417d6f44e34db" class="i property">LoadBalancerBackendAddressPools</a>.<a href="@0@mscorlib/A.html#a9319db8c62ae453" class="i method">Add</a>(<span class="r25 r">loadBalancer</span>.<a href="/Azure.ResourceManager.Network/A.html#1df863530ab0426b" class="i property">Data</a>.<a href="/Azure.ResourceManager.Network/A.html#7065ec1989286d3a" class="i property">BackendAddressPools</a>.<a href="@0@System.Core/A.html#bc8ae402a61dd9d6" class="i method">First</a>());
            <span class="r13 r">nic1</span>.<a href="/Azure.ResourceManager.Network/A.html#67971f2e66235bd2" class="i property">Data</a>.<a href="/Azure.ResourceManager.Network/A.html#3996d1405764389d" class="i property">IPConfigurations</a>.<a href="@0@System.Core/A.html#bc8ae402a61dd9d6" class="i method">First</a>().<a href="/Azure.ResourceManager.Network/A.html#8550bfe4554b102e" class="i property">LoadBalancerInboundNatRules</a>.<a href="@0@mscorlib/A.html#a9319db8c62ae453" class="i method">Add</a>(<span class="r25 r">loadBalancer</span>.<a href="/Azure.ResourceManager.Network/A.html#1df863530ab0426b" class="i property">Data</a>.<a href="/Azure.ResourceManager.Network/A.html#fe2746451013991c" class="i property">InboundNatRules</a>[0]);
            <span class="r14 r">nic2</span>.<a href="/Azure.ResourceManager.Network/A.html#67971f2e66235bd2" class="i property">Data</a>.<a href="/Azure.ResourceManager.Network/A.html#3996d1405764389d" class="i property">IPConfigurations</a>.<a href="@0@System.Core/A.html#bc8ae402a61dd9d6" class="i method">First</a>().<a href="/Azure.ResourceManager.Network/A.html#445417d6f44e34db" class="i property">LoadBalancerBackendAddressPools</a>.<a href="@0@mscorlib/A.html#a9319db8c62ae453" class="i method">Add</a>(<span class="r25 r">loadBalancer</span>.<a href="/Azure.ResourceManager.Network/A.html#1df863530ab0426b" class="i property">Data</a>.<a href="/Azure.ResourceManager.Network/A.html#7065ec1989286d3a" class="i property">BackendAddressPools</a>.<a href="@0@System.Core/A.html#bc8ae402a61dd9d6" class="i method">First</a>());
            <span class="r14 r">nic2</span>.<a href="/Azure.ResourceManager.Network/A.html#67971f2e66235bd2" class="i property">Data</a>.<a href="/Azure.ResourceManager.Network/A.html#3996d1405764389d" class="i property">IPConfigurations</a>.<a href="@0@System.Core/A.html#bc8ae402a61dd9d6" class="i method">First</a>().<a href="/Azure.ResourceManager.Network/A.html#8550bfe4554b102e" class="i property">LoadBalancerInboundNatRules</a>.<a href="@0@mscorlib/A.html#a9319db8c62ae453" class="i method">Add</a>(<span class="r25 r">loadBalancer</span>.<a href="/Azure.ResourceManager.Network/A.html#1df863530ab0426b" class="i property">Data</a>.<a href="/Azure.ResourceManager.Network/A.html#fe2746451013991c" class="i property">InboundNatRules</a>[1]);
            <span class="r15 r">nic3</span>.<a href="/Azure.ResourceManager.Network/A.html#67971f2e66235bd2" class="i property">Data</a>.<a href="/Azure.ResourceManager.Network/A.html#3996d1405764389d" class="i property">IPConfigurations</a>.<a href="@0@System.Core/A.html#bc8ae402a61dd9d6" class="i method">First</a>().<a href="/Azure.ResourceManager.Network/A.html#445417d6f44e34db" class="i property">LoadBalancerBackendAddressPools</a>.<a href="@0@mscorlib/A.html#a9319db8c62ae453" class="i method">Add</a>(<span class="r25 r">loadBalancer</span>.<a href="/Azure.ResourceManager.Network/A.html#1df863530ab0426b" class="i property">Data</a>.<a href="/Azure.ResourceManager.Network/A.html#7065ec1989286d3a" class="i property">BackendAddressPools</a>.<a href="@0@System.Core/A.html#bc8ae402a61dd9d6" class="i method">First</a>());
 
            <span class="c">// Put Nics</span>
            <a href="/Azure.ResourceManager.Network/A.html#fe4c8bb0a577acff" class="k">var</a> <span id="r26 rd" class="r26 r">networkInterfaceCollection</span> = <span class="r3 r">resourceGroup</span>.<a href="/Azure.ResourceManager.Network/A.html#4d4ea159c98094dc" class="i method">GetNetworkInterfaces</a>();
            <a href="/Azure.ResourceManager/A.html#7fe31cdc699e096f" class="k">var</a> <span id="r27 rd" class="r27 r">createOrUpdateOperation1</span> = <b>await</b> <span class="r26 r">networkInterfaceCollection</span>.<a href="/Azure.ResourceManager.Network/A.html#94b5c44527d07eb2" class="i method">CreateOrUpdateAsync</a>(<a href="/Azure.Core/A.html#caa4ec3ab01f635d" class="t t">WaitUntil</a>.<a href="/Azure.Core/A.html#cf19c6b20751a6f3" class="i field">Completed</a>, <span class="r10 r">nic1name</span>, <span class="r13 r">nic1</span>.<a href="/Azure.ResourceManager.Network/A.html#67971f2e66235bd2" class="i property">Data</a>);
            <b>await</b> <span class="r27 r">createOrUpdateOperation1</span>.<a href="/Azure.Core/A.html#a5c876e29e7551d3" class="i method">WaitForCompletionAsync</a>();
 
            <a href="/Azure.ResourceManager/A.html#7fe31cdc699e096f" class="k">var</a> <span id="r28 rd" class="r28 r">createOrUpdateOperation2</span> = <b>await</b> <span class="r26 r">networkInterfaceCollection</span>.<a href="/Azure.ResourceManager.Network/A.html#94b5c44527d07eb2" class="i method">CreateOrUpdateAsync</a>(<a href="/Azure.Core/A.html#caa4ec3ab01f635d" class="t t">WaitUntil</a>.<a href="/Azure.Core/A.html#cf19c6b20751a6f3" class="i field">Completed</a>, <span class="r11 r">nic2name</span>, <span class="r14 r">nic2</span>.<a href="/Azure.ResourceManager.Network/A.html#67971f2e66235bd2" class="i property">Data</a>);
            <b>await</b> <span class="r28 r">createOrUpdateOperation2</span>.<a href="/Azure.Core/A.html#a5c876e29e7551d3" class="i method">WaitForCompletionAsync</a>();
 
            <a href="/Azure.ResourceManager/A.html#7fe31cdc699e096f" class="k">var</a> <span id="r29 rd" class="r29 r">createOrUpdateOperation3</span> = <b>await</b> <span class="r26 r">networkInterfaceCollection</span>.<a href="/Azure.ResourceManager.Network/A.html#94b5c44527d07eb2" class="i method">CreateOrUpdateAsync</a>(<a href="/Azure.Core/A.html#caa4ec3ab01f635d" class="t t">WaitUntil</a>.<a href="/Azure.Core/A.html#cf19c6b20751a6f3" class="i field">Completed</a>, <span class="r12 r">nic3name</span>, <span class="r15 r">nic3</span>.<a href="/Azure.ResourceManager.Network/A.html#67971f2e66235bd2" class="i property">Data</a>);
            <b>await</b> <span class="r29 r">createOrUpdateOperation3</span>.<a href="/Azure.Core/A.html#a5c876e29e7551d3" class="i method">WaitForCompletionAsync</a>();
 
            <span class="c">// Get Nics</span>
            <b>await</b> <span class="r26 r">networkInterfaceCollection</span>.<a href="/Azure.ResourceManager.Network/A.html#1d07ea2f943974c8" class="i method">GetAsync</a>(<span class="r10 r">nic1name</span>);
            <b>await</b> <span class="r26 r">networkInterfaceCollection</span>.<a href="/Azure.ResourceManager.Network/A.html#1d07ea2f943974c8" class="i method">GetAsync</a>(<span class="r11 r">nic2name</span>);
            <b>await</b> <span class="r26 r">networkInterfaceCollection</span>.<a href="/Azure.ResourceManager.Network/A.html#1d07ea2f943974c8" class="i method">GetAsync</a>(<span class="r12 r">nic3name</span>);
 
            <span class="c">// Get lb with expanded nics from nat rules</span>
            <span class="r25 r">loadBalancer</span> = <b>await</b> <span class="r24 r">loadBalancerCollection</span>.<a href="/Azure.ResourceManager.Network/A.html#b129be5577bf37aa" class="i method">GetAsync</a>(<span class="r16 r">lbName</span>, <span class="s">&quot;InboundNatRules/backendIPConfiguration&quot;</span>);
 
            <b>await</b> <b>foreach</b> (<a href="/Azure.ResourceManager.Network/A.html#5142d0b1af9bb46b" class="k">var</a> <span id="r30 rd" class="r30 r">natRule</span> <b>in</b> <span class="r25 r">loadBalancer</span>.<a href="/Azure.ResourceManager.Network/A.html#f3a24e81561cd88b" class="i method">GetInboundNatRules</a>())
            {
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r30 r">natRule</span>.<a href="/Azure.ResourceManager.Network/A.html#797c38761e073f6f" class="i property">Data</a>.<a href="/Azure.ResourceManager.Network/A.html#d709b94f8b89a180" class="i property">BackendIPConfiguration</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r30 r">natRule</span>.<a href="/Azure.ResourceManager.Network/A.html#797c38761e073f6f" class="i property">Data</a>.<a href="/Azure.ResourceManager.Network/A.html#d709b94f8b89a180" class="i property">BackendIPConfiguration</a>.<a href="/Azure.ResourceManager.Network/A.html#b5aff9649ee9076b" class="i property">Id</a>);
                <span class="c">//Assert.NotNull(natRule.Data.BackendIPConfiguration.Name);</span>
                <span class="c">//Assert.NotNull(natRule.Data.BackendIPConfiguration.Etag);</span>
                <span class="c">//Assert.AreEqual(natRule.Id, natRule.Data.BackendIPConfiguration.LoadBalancerInboundNatRules[0].Id);</span>
            }
 
            <span class="c">// Get lb with expanded nics from pools</span>
            <span class="r25 r">loadBalancer</span> = <b>await</b> <span class="r24 r">loadBalancerCollection</span>.<a href="/Azure.ResourceManager.Network/A.html#b129be5577bf37aa" class="i method">GetAsync</a>(<span class="r16 r">lbName</span>, <span class="s">&quot;BackendAddressPools/backendIPConfigurations&quot;</span>);
 
            <b>await</b> <b>foreach</b> (<a href="/Azure.ResourceManager.Network/A.html#02184e22021f3375" class="k">var</a> <span id="r31 rd" class="r31 r">pool</span> <b>in</b> <span class="r25 r">loadBalancer</span>.<a href="/Azure.ResourceManager.Network/A.html#80c6dfa734949e43" class="i method">GetBackendAddressPools</a>())
            {
                <a href="/Azure.ResourceManager.Network/A.html#02184e22021f3375" class="t t">BackendAddressPoolResource</a> <span id="r32 rd" class="r32 r">firstPool</span> = <b>await</b> <a href="#40b081e57f2e7674" class="i method">GetFirstPoolAsync</a>(<span class="r25 r">loadBalancer</span>);
                <b>foreach</b> (<a href="/Azure.ResourceManager.Network/A.html#3b17b4a01141e4ce" class="k">var</a> <span id="r33 rd" class="r33 r">ipconfig</span> <b>in</b> <span class="r32 r">firstPool</span>.<a href="/Azure.ResourceManager.Network/A.html#764a1c56a5c0e0ad" class="i property">Data</a>.<a href="/Azure.ResourceManager.Network/A.html#b006666579a206ef" class="i property">BackendIPConfigurations</a>)
                {
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r33 r">ipconfig</span>.<a href="/Azure.ResourceManager.Network/A.html#b5aff9649ee9076b" class="i property">Id</a>);
                    <span class="c">//Assert.NotNull(ipconfig.Name);</span>
                    <span class="c">//Assert.NotNull(ipconfig.Etag);</span>
                    <span class="c">//Assert.AreEqual(pool.Id, ipconfig.LoadBalancerBackendAddressPools[0].Id);</span>
                }
            }
 
            <span class="c">// Get lb with expanded publicip</span>
            <span class="r25 r">loadBalancer</span> = <b>await</b> <span class="r24 r">loadBalancerCollection</span>.<a href="/Azure.ResourceManager.Network/A.html#b129be5577bf37aa" class="i method">GetAsync</a>(<span class="r16 r">lbName</span>, <span class="s">&quot;FrontendIPConfigurations/PublicIPAddress&quot;</span>);
            <b>foreach</b> (<a href="/Azure.ResourceManager.Network/A.html#b241ff916e298e77" class="k">var</a> <span id="r34 rd" class="r34 r">ipconfig</span> <b>in</b> <span class="r25 r">loadBalancer</span>.<a href="/Azure.ResourceManager.Network/A.html#1df863530ab0426b" class="i property">Data</a>.<a href="/Azure.ResourceManager.Network/A.html#445a3416e32a703d" class="i property">FrontendIPConfigurations</a>)
            {
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r34 r">ipconfig</span>.<a href="/Azure.ResourceManager.Network/A.html#77315f1ef17d45d9" class="i property">PublicIPAddress</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r34 r">ipconfig</span>.<a href="/Azure.ResourceManager.Network/A.html#77315f1ef17d45d9" class="i property">PublicIPAddress</a>.<a href="/Azure.ResourceManager.Network/A.html#d6507e4195a80b3a" class="i property">Id</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r34 r">ipconfig</span>.<a href="/Azure.ResourceManager.Network/A.html#77315f1ef17d45d9" class="i property">PublicIPAddress</a>.<a href="/Azure.ResourceManager.Network/A.html#b254a232cd21abb5" class="i property">Name</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r34 r">ipconfig</span>.<a href="/Azure.ResourceManager.Network/A.html#77315f1ef17d45d9" class="i property">PublicIPAddress</a>.<a href="/Azure.ResourceManager.Network/A.html#470259b6eb2e46ae" class="i property">Etag</a>);
                <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r34 r">ipconfig</span>.<a href="/Azure.ResourceManager.Network/A.html#b5aff9649ee9076b" class="i property">Id</a>, <span class="r34 r">ipconfig</span>.<a href="/Azure.ResourceManager.Network/A.html#77315f1ef17d45d9" class="i property">PublicIPAddress</a>.<a href="/Azure.ResourceManager.Network/A.html#049f4d356175bbfe" class="i property">IPConfiguration</a>.<a href="/Azure.ResourceManager.Network/A.html#b5aff9649ee9076b" class="i property">Id</a>);
            }
 
            <span class="c">// Get NIC with expanded subnet</span>
            <span class="r13 r">nic1</span> = <b>await</b> <span class="r26 r">networkInterfaceCollection</span>.<a href="/Azure.ResourceManager.Network/A.html#1d07ea2f943974c8" class="i method">GetAsync</a>(<span class="r10 r">nic1name</span>, <span class="s">&quot;IPConfigurations/Subnet&quot;</span>);
            <b>await</b> <b>foreach</b> (<a href="/Azure.ResourceManager.Network/A.html#76a29b8980f7a499" class="t t">NetworkInterfaceIPConfigurationResource</a> <span id="r35 rd" class="r35 r">ipconfig</span> <b>in</b> <span class="r13 r">nic1</span>.<a href="/Azure.ResourceManager.Network/A.html#86f6bce57652a6cf" class="i method">GetNetworkInterfaceIPConfigurations</a>())
            {
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r35 r">ipconfig</span>.<a href="/Azure.ResourceManager.Network/A.html#6ee8db72feae5b51" class="i property">Data</a>.<a href="/Azure.ResourceManager.Network/A.html#acaa851b29b77e62" class="i property">Subnet</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r35 r">ipconfig</span>.<a href="/Azure.ResourceManager.Network/A.html#6ee8db72feae5b51" class="i property">Data</a>.<a href="/Azure.ResourceManager.Network/A.html#acaa851b29b77e62" class="i property">Subnet</a>.<a href="/Azure.ResourceManager.Network/A.html#b5aff9649ee9076b" class="i property">Id</a>);
                <span class="c">//Assert.NotNull(ipconfig.Subnet.Name);</span>
                <span class="c">//Assert.NotNull(ipconfig.Subnet.Etag);</span>
                <span class="c">//Assert.IsNotEmpty(ipconfig.Subnet.IpConfigurations);</span>
            }
 
            <span class="c">// Get subnet with expanded ipconfigurations</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.ResourceManager.Network/A.html#9502d45d6adbbb4f" class="t t">SubnetResource</a>&gt; <span id="r36 rd" class="r36 r">subnet</span> = <b>await</b> (<b>await</b> <span class="r3 r">resourceGroup</span>.<a href="/Azure.ResourceManager.Network/A.html#4e2e375c912536e0" class="i method">GetVirtualNetworks</a>().<a href="/Azure.ResourceManager.Network/A.html#0bb411ca95e340fa" class="i method">GetAsync</a>(<span class="r7 r">vnetName</span>)).<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.ResourceManager.Network/A.html#09a34e10b26ba51f" class="i method">GetSubnets</a>().<a href="/Azure.ResourceManager.Network/A.html#a688299318d471f8" class="i method">GetAsync</a>(
                <span class="r8 r">subnetName</span>,
                <span class="s">&quot;IPConfigurations&quot;</span>);
 
            <b>foreach</b> (<a href="/Azure.ResourceManager.Network/A.html#0cfe3f5282df7aa3" class="t t">IPConfiguration</a> <span id="r37 rd" class="r37 r">ipconfig</span> <b>in</b> <span class="r36 r">subnet</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.ResourceManager.Network/A.html#bb461d5a8ccf798e" class="i property">Data</a>.<a href="/Azure.ResourceManager.Network/A.html#febc1590d43df3fe" class="i property">IPConfigurations</a>)
            {
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r37 r">ipconfig</span>.<a href="/Azure.ResourceManager.Network/A.html#b5aff9649ee9076b" class="i property">Id</a>);
                <span class="c">//Assert.NotNull(ipconfig.Name);</span>
                <span class="c">//Assert.NotNull(ipconfig.Etag);</span>
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r37 r">ipconfig</span>.<a href="/Azure.ResourceManager.Network/A.html#c3056006dc912ff2" class="i property">PrivateIPAddress</a>);
            }
 
            <span class="c">// Get publicIPAddress with expanded ipconfigurations</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.ResourceManager.Network/A.html#9277cf260a81d379" class="t t">PublicIPAddressResource</a>&gt; <span id="r38 rd" class="r38 r">publicip</span> = <b>await</b> <span class="r3 r">resourceGroup</span>.<a href="/Azure.ResourceManager.Network/A.html#285a25c0b14590ba" class="i method">GetPublicIPAddresses</a>().<a href="/Azure.ResourceManager.Network/A.html#98689191ff29e38d" class="i method">GetAsync</a>(
                <span class="r4 r">lbPublicIpName</span>,
                <span class="s">&quot;IPConfiguration&quot;</span>);
 
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r38 r">publicip</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.ResourceManager.Network/A.html#28f5bb71a20d5f8a" class="i property">Data</a>.<a href="/Azure.ResourceManager.Network/A.html#049f4d356175bbfe" class="i property">IPConfiguration</a>);
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r38 r">publicip</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.ResourceManager.Network/A.html#28f5bb71a20d5f8a" class="i property">Data</a>.<a href="/Azure.ResourceManager.Network/A.html#049f4d356175bbfe" class="i property">IPConfiguration</a>.<a href="/Azure.ResourceManager.Network/A.html#b5aff9649ee9076b" class="i property">Id</a>);
            <span class="c">//Assert.NotNull(publicip.Value.Data.IpConfiguration.Name);</span>
            <span class="c">//Assert.NotNull(publicip.Value.Data.IpConfiguration.Etag);</span>
 
            <span class="c">// Delete LoadBalancer</span>
            <a href="/Azure.Core/A.html#f8b19eead399bc72" class="t t">Operation</a> <span id="r39 rd" class="r39 r">deleteOperation</span> = <b>await</b> (<b>await</b> <span class="r24 r">loadBalancerCollection</span>.<a href="/Azure.ResourceManager.Network/A.html#b129be5577bf37aa" class="i method">GetAsync</a>(<span class="r16 r">lbName</span>)).<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.ResourceManager.Network/A.html#fcf2d17496c177bc" class="i method">DeleteAsync</a>(<a href="/Azure.Core/A.html#caa4ec3ab01f635d" class="t t">WaitUntil</a>.<a href="/Azure.Core/A.html#cf19c6b20751a6f3" class="i field">Completed</a>);
            <b>await</b> <span class="r39 r">deleteOperation</span>.<a href="/Azure.Core/A.html#d4b4e974275b069f" class="i method">WaitForCompletionResponseAsync</a>();
 
            <span class="c">// Verify Delete</span>
            <a href="/Azure.Core/A.html#ce6e47443d11533b" class="t t">AsyncPageable</a>&lt;<a href="/Azure.ResourceManager.Network/A.html#38f53f33f005c6c5" class="t t">LoadBalancerResource</a>&gt; <span id="r40 rd" class="r40 r">listLoadBalancerAP</span> = <span class="r24 r">loadBalancerCollection</span>.<a href="/Azure.ResourceManager.Network/A.html#62d355b4e3fed95f" class="i method">GetAllAsync</a>();
            <a href="@0@mscorlib/A.html#cf7f4095e4de7646" class="t t">List</a>&lt;<a href="/Azure.ResourceManager.Network/A.html#38f53f33f005c6c5" class="t t">LoadBalancerResource</a>&gt; <span id="r41 rd" class="r41 r">listLoadBalancer</span> = <b>await</b> <span class="r40 r">listLoadBalancerAP</span>.<a href="/Azure.Core.TestFramework/A.html#8ddeb68c4e93863e" class="i method">ToEnumerableAsync</a>();
            <span class="t t">Assert</span>.<span class="i method">IsEmpty</span>(<span class="r41 r">listLoadBalancer</span>);
 
            <span class="c">// Delete all NetworkInterfaces</span>
            <b>await</b> (<b>await</b> <span class="r26 r">networkInterfaceCollection</span>.<a href="/Azure.ResourceManager.Network/A.html#1d07ea2f943974c8" class="i method">GetAsync</a>(<span class="r10 r">nic1name</span>)).<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.ResourceManager.Network/A.html#efd6320d0a4c8201" class="i method">DeleteAsync</a>(<a href="/Azure.Core/A.html#caa4ec3ab01f635d" class="t t">WaitUntil</a>.<a href="/Azure.Core/A.html#cf19c6b20751a6f3" class="i field">Completed</a>);
            <b>await</b> (<b>await</b> <span class="r26 r">networkInterfaceCollection</span>.<a href="/Azure.ResourceManager.Network/A.html#1d07ea2f943974c8" class="i method">GetAsync</a>(<span class="r11 r">nic2name</span>)).<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.ResourceManager.Network/A.html#efd6320d0a4c8201" class="i method">DeleteAsync</a>(<a href="/Azure.Core/A.html#caa4ec3ab01f635d" class="t t">WaitUntil</a>.<a href="/Azure.Core/A.html#cf19c6b20751a6f3" class="i field">Completed</a>);
            <b>await</b> (<b>await</b> <span class="r26 r">networkInterfaceCollection</span>.<a href="/Azure.ResourceManager.Network/A.html#1d07ea2f943974c8" class="i method">GetAsync</a>(<span class="r12 r">nic3name</span>)).<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.ResourceManager.Network/A.html#efd6320d0a4c8201" class="i method">DeleteAsync</a>(<a href="/Azure.Core/A.html#caa4ec3ab01f635d" class="t t">WaitUntil</a>.<a href="/Azure.Core/A.html#cf19c6b20751a6f3" class="i field">Completed</a>);
 
            <span class="c">// Delete all PublicIPAddresses</span>
            <b>await</b> (<b>await</b> <span class="r3 r">resourceGroup</span>.<a href="/Azure.ResourceManager.Network/A.html#285a25c0b14590ba" class="i method">GetPublicIPAddresses</a>().<a href="/Azure.ResourceManager.Network/A.html#98689191ff29e38d" class="i method">GetAsync</a>(<span class="r4 r">lbPublicIpName</span>)).<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.ResourceManager.Network/A.html#c30295096cff3faf" class="i method">DeleteAsync</a>(<a href="/Azure.Core/A.html#caa4ec3ab01f635d" class="t t">WaitUntil</a>.<a href="/Azure.Core/A.html#cf19c6b20751a6f3" class="i field">Completed</a>);
        }
 
        <b>private async</b> <a href="@0@mscorlib/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<a href="/Azure.ResourceManager.Network/A.html#02184e22021f3375" class="t t">BackendAddressPoolResource</a>&gt; <a id="40b081e57f2e7674" href="../R/40b081e57f2e7674.html" target="n" data-glyph="76,1" class="i method">GetFirstPoolAsync</a>(<a href="/Azure.ResourceManager.Network/A.html#38f53f33f005c6c5" class="t t">LoadBalancerResource</a> <span id="r42 rd" class="r42 r">loadBalancer</span>)
        {
            <b>await</b> <b>foreach</b> (<a href="/Azure.ResourceManager.Network/A.html#02184e22021f3375" class="k">var</a> <span id="r43 rd" class="r43 r">pool</span> <b>in</b> <span class="r42 r">loadBalancer</span>.<a href="/Azure.ResourceManager.Network/A.html#80c6dfa734949e43" class="i method">GetBackendAddressPools</a>())
            {
                <b>return</b> <span class="r43 r">pool</span>;
            }
            <b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#265d72f49e915224" class="t constructor">InvalidOperationException</a>(<span class="s">$&quot;</span><span class="s">Pool list was empty for </span>{<span class="r42 r">loadBalancer</span>.<a href="/Azure.ResourceManager/A.html#4832c0d9257e4bd3" class="i property">Id</a>}<span class="s">&quot;</span>);
        }
    }
}
</pre></td></tr></table></div></body></html>

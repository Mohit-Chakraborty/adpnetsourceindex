<!DOCTYPE html>
<html><head><title>ServiceBusManagementClientLiveTests.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(1002);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Azure.Messaging.ServiceBus.Tests/Administration/ServiceBusManagementClientLiveTests.cs" target="_top">Administration\ServiceBusManagementClientLiveTests.cs</a><br/></td><td><a class="blueLink" href="https://github.com/Azure/azure-sdk-for-net/tree/main/sdk/servicebus/Azure.Messaging.ServiceBus/tests/Administration/ServiceBusManagementClientLiveTests.cs" target="_blank">View on GitHub</a></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Azure.Messaging.ServiceBus.Tests" target="_top">Azure.Messaging.ServiceBus.Tests.csproj</a> (Azure.Messaging.ServiceBus.Tests)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License.</span>
 
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>.<span class="i n">Tasks</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Core</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Core</span>.<span class="i n">TestFramework</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Messaging</span>.<span class="i n">ServiceBus</span>.<span class="i n">Administration</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Messaging</span>.<span class="i n">ServiceBus</span>.<span class="i n">Authorization</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Messaging</span>.<span class="i n">ServiceBus</span>.<span class="i n">Tests</span>.<span class="i n">Infrastructure</span>;
<b>using</b> <span class="i n">NUnit</span>.<span class="i n">Framework</span>;
 
<b>namespace</b> <span class="i n">Azure</span>.<span class="i n">Messaging</span>.<span class="i n">ServiceBus</span>.<span class="i n">Tests</span>.<span class="i n">Management</span>
{
    [<a href="/Azure.Core.TestFramework/A.html#d5dbfb6fe4270897" class="t constructor">AsyncOnly</a>]
    [<span class="t constructor">NonParallelizable</span>]
    [<a href="/Azure.Core.TestFramework/A.html#d30718efac4079d1" class="t constructor">ClientTestFixture</a>(<a href="/Azure.Messaging.ServiceBus/A.html#a643219efb857e2b" class="t t">ServiceBusAdministrationClientOptions</a>.<a href="/Azure.Messaging.ServiceBus/A.html#31b1215f647c24fe" class="t t">ServiceVersion</a>.<a href="/Azure.Messaging.ServiceBus/A.html#5bf0efb037514aaf" class="i field">V2017_04</a>, <a href="/Azure.Messaging.ServiceBus/A.html#a643219efb857e2b" class="t t">ServiceBusAdministrationClientOptions</a>.<a href="/Azure.Messaging.ServiceBus/A.html#31b1215f647c24fe" class="t t">ServiceVersion</a>.<a href="/Azure.Messaging.ServiceBus/A.html#486a5eb1469bf6e0" class="i field">V2021_05</a>)]
    <b>public class</b> <a id="7e8aa9359036d272" href="../R/../../0000000000.html" target="n" data-glyph="0,0" class="t t">ServiceBusManagementClientLiveTests</a> : <a href="/Azure.Core.TestFramework/A.html#2d2d9cc2c3882f17" class="t t">RecordedTestBase</a>&lt;<a href="../Infrastructure/ServiceBusTestEnvironment.cs.html#c29797947d97112b" class="t t">ServiceBusTestEnvironment</a>&gt;
    {
        <b>private readonly</b> <a href="/Azure.Messaging.ServiceBus/A.html#a643219efb857e2b" class="t t">ServiceBusAdministrationClientOptions</a>.<a href="/Azure.Messaging.ServiceBus/A.html#31b1215f647c24fe" class="t t">ServiceVersion</a> <a id="deb9d3dc24bb712a" href="../R/deb9d3dc24bb712a.html" target="n" data-glyph="46,1" class="i field">_serviceVersion</a>;
 
        <b>public</b> <a id="ea00060539491564" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="t constructor">ServiceBusManagementClientLiveTests</a>(<b>bool</b> <span id="r0 rd" class="r0 r">isAsync</span>, <a href="/Azure.Messaging.ServiceBus/A.html#a643219efb857e2b" class="t t">ServiceBusAdministrationClientOptions</a>.<a href="/Azure.Messaging.ServiceBus/A.html#31b1215f647c24fe" class="t t">ServiceVersion</a> <span id="r1 rd" class="r1 r">serviceVersion</span>) :
            <a href="/Azure.Core.TestFramework/A.html#0697801b8bd5bedb" class="k">base</a>(<span class="r2 r">isAsync</span>: <b>true</b>)
        {
            <a href="/Azure.Core.TestFramework/A.html#2800a862b6d5bdce" class="i property">Sanitizer</a> = <b>new</b> <a href="../Infrastructure/ServiceBusRecordedTestSanitizer.cs.html#f5e91bf05321140e" class="t constructor">ServiceBusRecordedTestSanitizer</a>();
            <a href="#deb9d3dc24bb712a" class="i field">_serviceVersion</a> = <span class="r1 r">serviceVersion</span>;
        }
 
        <b>private string</b> <a id="8d0a7b5e705d68cb" href="../R/8d0a7b5e705d68cb.html" target="n" data-glyph="76,1" class="i method">GetConnectionString</a>(<b>bool</b> <span id="r3 rd" class="r3 r">premium</span> = <b>false</b>) =&gt; <span class="r3 r">premium</span> ? <a href="/Azure.Core.TestFramework/A.html#9185092834304053" class="i property">TestEnvironment</a>.<a href="../Infrastructure/ServiceBusTestEnvironment.cs.html#a9c04295451eaef2" class="i property">ServiceBusPremiumNamespaceConnectionString</a> : <a href="/Azure.Core.TestFramework/A.html#9185092834304053" class="i property">TestEnvironment</a>.<a href="../Infrastructure/ServiceBusTestEnvironment.cs.html#2e255d4a6d75bc9a" class="i property">ServiceBusConnectionString</a>;
 
        <b>private</b> <a href="/Azure.Messaging.ServiceBus/A.html#a643219efb857e2b" class="t t">ServiceBusAdministrationClientOptions</a> <a id="380550e3b8cc61e1" href="../R/380550e3b8cc61e1.html" target="n" data-glyph="76,1" class="i method">CreateOptions</a>() =&gt;
            <a href="/Azure.Core.TestFramework/A.html#ab5a62dcc84b8f3e" class="i method">InstrumentClientOptions</a>(<b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#2441c9853d367c6b" class="t constructor">ServiceBusAdministrationClientOptions</a>(<a href="#deb9d3dc24bb712a" class="i field">_serviceVersion</a>));
 
        <b>private</b> <a href="/Azure.Messaging.ServiceBus/A.html#827d49874cba94ba" class="t t">ServiceBusAdministrationClient</a> <a id="1deb5024707aa43b" href="../R/1deb5024707aa43b.html" target="n" data-glyph="76,1" class="i method">CreateClient</a>(<b>bool</b> <span id="r4 rd" class="r4 r">premium</span> = <b>false</b>) =&gt;
            <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(
                <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#f5990b8654014145" class="t constructor">ServiceBusAdministrationClient</a>(
                    <a href="#8d0a7b5e705d68cb" class="i method">GetConnectionString</a>(<span class="r4 r">premium</span>),
                    <a href="#380550e3b8cc61e1" class="i method">CreateOptions</a>()));
 
        <b>private</b> <a href="/Azure.Messaging.ServiceBus/A.html#827d49874cba94ba" class="t t">ServiceBusAdministrationClient</a> <a id="9a061fc70198f8a2" href="../R/9a061fc70198f8a2.html" target="n" data-glyph="76,1" class="i method">CreateAADClient</a>() =&gt;
            <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(
                <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#469e0d6445068da2" class="t constructor">ServiceBusAdministrationClient</a>(
                    <a href="/Azure.Core.TestFramework/A.html#9185092834304053" class="i property">TestEnvironment</a>.<a href="../Infrastructure/ServiceBusTestEnvironment.cs.html#4e4a327a08e9b61f" class="i property">FullyQualifiedNamespace</a>,
                    <a href="#200cdf72caf1d6a6" class="i method">GetTokenCredential</a>(),
                    <a href="#380550e3b8cc61e1" class="i method">CreateOptions</a>()));
 
        <b>private</b> <a href="/Azure.Messaging.ServiceBus/A.html#827d49874cba94ba" class="t t">ServiceBusAdministrationClient</a> <a id="b672bc6128192129" href="../R/b672bc6128192129.html" target="n" data-glyph="76,1" class="i method">CreateSharedKeyTokenClient</a>()
        {
            <a href="/Azure.Messaging.ServiceBus/A.html#b011974d70d9c929" class="k">var</a> <span id="r5 rd" class="r5 r">properties</span> = <a href="/Azure.Messaging.ServiceBus/A.html#b011974d70d9c929" class="t t">ServiceBusConnectionStringProperties</a>.<a href="/Azure.Messaging.ServiceBus/A.html#045f3a6b96bd4afd" class="i method">Parse</a>(<a href="#8d0a7b5e705d68cb" class="i method">GetConnectionString</a>());
            <a href="/Azure.Core/A.html#ff9da284cd79b59b" class="k">var</a> <span id="r6 rd" class="r6 r">credential</span> = <b>new</b> <a href="/Azure.Core/A.html#83937b246fb01fda" class="t constructor">AzureNamedKeyCredential</a>(<span class="r5 r">properties</span>.<a href="/Azure.Messaging.ServiceBus/A.html#b51acce87d7adfd2" class="i property">SharedAccessKeyName</a>, <span class="r5 r">properties</span>.<a href="/Azure.Messaging.ServiceBus/A.html#a9d7834911da1b51" class="i property">SharedAccessKey</a>);
 
            <b>return</b> <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(
                <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#e97e84ba5cea5712" class="t constructor">ServiceBusAdministrationClient</a>(
                    <a href="/Azure.Core.TestFramework/A.html#9185092834304053" class="i property">TestEnvironment</a>.<a href="../Infrastructure/ServiceBusTestEnvironment.cs.html#4e4a327a08e9b61f" class="i property">FullyQualifiedNamespace</a>,
                    <span class="r6 r">credential</span>,
                    <a href="#380550e3b8cc61e1" class="i method">CreateOptions</a>()));
        }
 
        <b>private</b> <a href="/Azure.Messaging.ServiceBus/A.html#827d49874cba94ba" class="t t">ServiceBusAdministrationClient</a> <a id="ef0a8973f8237023" href="../R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">CreateSasTokenClient</a>()
        {
            <a href="/Azure.Messaging.ServiceBus/A.html#b011974d70d9c929" class="k">var</a> <span id="r7 rd" class="r7 r">properties</span> = <a href="/Azure.Messaging.ServiceBus/A.html#b011974d70d9c929" class="t t">ServiceBusConnectionStringProperties</a>.<a href="/Azure.Messaging.ServiceBus/A.html#045f3a6b96bd4afd" class="i method">Parse</a>(<a href="#8d0a7b5e705d68cb" class="i method">GetConnectionString</a>());
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r8 rd" class="r8 r">resource</span> = <a href="/Azure.Messaging.ServiceBus/A.html#827d49874cba94ba" class="t t">ServiceBusAdministrationClient</a>.<a href="/Azure.Messaging.ServiceBus/A.html#6c464d4b0a2525b7" class="i method">BuildAudienceResource</a>(<a href="/Azure.Core.TestFramework/A.html#9185092834304053" class="i property">TestEnvironment</a>.<a href="../Infrastructure/ServiceBusTestEnvironment.cs.html#4e4a327a08e9b61f" class="i property">FullyQualifiedNamespace</a>);
            <a href="/Azure.Messaging.ServiceBus/A.html#590cb6f714812552" class="k">var</a> <span id="r9 rd" class="r9 r">signature</span> = <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#f216fbff8ee290db" class="t constructor">SharedAccessSignature</a>(<span class="r8 r">resource</span>, <span class="r7 r">properties</span>.<a href="/Azure.Messaging.ServiceBus/A.html#b51acce87d7adfd2" class="i property">SharedAccessKeyName</a>, <span class="r7 r">properties</span>.<a href="/Azure.Messaging.ServiceBus/A.html#a9d7834911da1b51" class="i property">SharedAccessKey</a>);
            <a href="/Azure.Core/A.html#77bc7924ac000276" class="k">var</a> <span id="r10 rd" class="r10 r">credential</span> = <b>new</b> <a href="/Azure.Core/A.html#7c49a23f7592174a" class="t constructor">AzureSasCredential</a>(<span class="r9 r">signature</span>.<a href="/Azure.Messaging.ServiceBus/A.html#4027e77a66945986" class="i property">Value</a>);
 
            <b>return</b> <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(
                <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#711b6a1bcbc50f7d" class="t constructor">ServiceBusAdministrationClient</a>(
                    <a href="/Azure.Core.TestFramework/A.html#9185092834304053" class="i property">TestEnvironment</a>.<a href="../Infrastructure/ServiceBusTestEnvironment.cs.html#4e4a327a08e9b61f" class="i property">FullyQualifiedNamespace</a>,
                    <span class="r10 r">credential</span>,
                    <a href="/Azure.Core.TestFramework/A.html#ab5a62dcc84b8f3e" class="i method">InstrumentClientOptions</a>(<b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#2441c9853d367c6b" class="t constructor">ServiceBusAdministrationClientOptions</a>())));
        }
 
        [<span class="t constructor">Test</span>]
        [<span class="t constructor">TestCase</span>(<b>false</b>)]
        [<span class="t constructor">TestCase</span>(<b>true</b>)]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Messaging.ServiceBus/A.html#a643219efb857e2b" class="t t">ServiceBusAdministrationClientOptions</a>.<a href="/Azure.Messaging.ServiceBus/A.html#31b1215f647c24fe" class="t t">ServiceVersion</a>.<a href="/Azure.Messaging.ServiceBus/A.html#486a5eb1469bf6e0" class="i field">V2021_05</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="d47bfbbdd5c290da" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">BasicQueueCrudOperations</a>(<b>bool</b> <span id="r11 rd" class="r11 r">premium</span>)
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r12 rd" class="r12 r">queueName</span> = <b>nameof</b>(<span class="i">BasicQueueCrudOperations</span>).<a href="@0@mscorlib/A.html#0b5a1ee33618e0b3" class="i method">ToLower</a>() + <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
            <a href="/Azure.Messaging.ServiceBus/A.html#827d49874cba94ba" class="k">var</a> <span id="r13 rd" class="r13 r">client</span> = <a href="#1deb5024707aa43b" class="i method">CreateClient</a>(<span class="r11 r">premium</span>);
 
            <a href="/Azure.Messaging.ServiceBus/A.html#2c2ef75199dd1be9" class="k">var</a> <span id="r14 rd" class="r14 r">queueOptions</span> = <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#8b61abee28dc382e" class="t constructor">CreateQueueOptions</a>(<span class="r12 r">queueName</span>)
            {
                <a href="/Azure.Messaging.ServiceBus/A.html#8a93788e5d00d055" class="i property">AutoDeleteOnIdle</a> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#060fe8cc38e0a7e3" class="i method">FromHours</a>(1),
                <a href="/Azure.Messaging.ServiceBus/A.html#fb2dfc0f886801af" class="i property">DefaultMessageTimeToLive</a> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#e7c4baa19fa38e8e" class="i method">FromDays</a>(2),
                <a href="/Azure.Messaging.ServiceBus/A.html#e30adca9d5574156" class="i property">DuplicateDetectionHistoryTimeWindow</a> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#ae74be5264df78d8" class="i method">FromMinutes</a>(1),
                <a href="/Azure.Messaging.ServiceBus/A.html#1b24da94174f60c2" class="i property">EnableBatchedOperations</a> = <b>false</b>,
                <a href="/Azure.Messaging.ServiceBus/A.html#5049a683f3698da2" class="i property">DeadLetteringOnMessageExpiration</a> = <b>true</b>,
                <a href="/Azure.Messaging.ServiceBus/A.html#d37e6516a208bd69" class="i property">EnablePartitioning</a> = <b>false</b>,
                <a href="/Azure.Messaging.ServiceBus/A.html#204e5bbbbf067660" class="i property">ForwardDeadLetteredMessagesTo</a> = <b>null</b>,
                <a href="/Azure.Messaging.ServiceBus/A.html#613f0cf9b8e20919" class="i property">ForwardTo</a> = <b>null</b>,
                <a href="/Azure.Messaging.ServiceBus/A.html#9681fa888d0621b5" class="i property">LockDuration</a> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(45),
                <a href="/Azure.Messaging.ServiceBus/A.html#ad00ca6078583f7f" class="i property">MaxDeliveryCount</a> = 8,
                <a href="/Azure.Messaging.ServiceBus/A.html#42a7caeb1d0bbf19" class="i property">MaxSizeInMegabytes</a> = 1024,
                <a href="/Azure.Messaging.ServiceBus/A.html#8b97b212de2916e9" class="i property">RequiresDuplicateDetection</a> = <b>true</b>,
                <a href="/Azure.Messaging.ServiceBus/A.html#58674e6e8216f854" class="i property">RequiresSession</a> = <b>false</b>,
                <a href="/Azure.Messaging.ServiceBus/A.html#dedd41ca3d1c6ae3" class="i property">UserMetadata</a> = <b>nameof</b>(<span class="i">BasicQueueCrudOperations</span>),
                <a href="/Azure.Messaging.ServiceBus/A.html#969210802c09c1e9" class="i property">Status</a> = <a href="/Azure.Messaging.ServiceBus/A.html#1f86b4eb551e22e2" class="t t">EntityStatus</a>.<a href="/Azure.Messaging.ServiceBus/A.html#833ef5c91440015b" class="i property">Disabled</a>
            };
 
            <b>if</b> (<span class="r11 r">premium</span>)
            {
                <span class="r14 r">queueOptions</span>.<a href="/Azure.Messaging.ServiceBus/A.html#274d861134b442e3" class="i property">MaxMessageSizeInKilobytes</a> = 100000;
            }
 
            <span class="r14 r">queueOptions</span>.<a href="/Azure.Messaging.ServiceBus/A.html#ed5389e471e79f2f" class="i property">AuthorizationRules</a>.<a href="@0@mscorlib/A.html#9cc11588bffd57c1" class="i method">Add</a>(<b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#b230abdc50c5414f" class="t constructor">SharedAccessAuthorizationRule</a>(
                <span class="s">&quot;allClaims&quot;</span>,
                <b>new</b>[] { <a href="/Azure.Messaging.ServiceBus/A.html#ccbea8c4913a9067" class="t t">AccessRights</a>.<a href="/Azure.Messaging.ServiceBus/A.html#76a6933c4f91b2ca" class="i field">Manage</a>, <a href="/Azure.Messaging.ServiceBus/A.html#ccbea8c4913a9067" class="t t">AccessRights</a>.<a href="/Azure.Messaging.ServiceBus/A.html#c90ec6186494f70e" class="i field">Send</a>, <a href="/Azure.Messaging.ServiceBus/A.html#ccbea8c4913a9067" class="t t">AccessRights</a>.<a href="/Azure.Messaging.ServiceBus/A.html#5912059b67b3d1b8" class="i field">Listen</a> }));
 
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#96f80aae2e1f18c8" class="t t">QueueProperties</a>&gt; <span id="r15 rd" class="r15 r">createdQueueResponse</span> = <b>await</b> <span class="r13 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#bc456f01412c2478" class="i method">CreateQueueAsync</a>(<span class="r14 r">queueOptions</span>);
            <a href="/Azure.Core/A.html#ad97b1910f5ca3eb" class="t t">Response</a> <span id="r16 rd" class="r16 r">rawResponse</span> = <span class="r15 r">createdQueueResponse</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>();
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r16 r">rawResponse</span>.<a href="/Azure.Core/A.html#0d9a1de2c559a434" class="i property">ClientRequestId</a>);
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r16 r">rawResponse</span>.<a href="/Azure.Core/A.html#e05b388d35abae58" class="i property">ContentStream</a>.<a href="@0@mscorlib/A.html#9d92fb3890523d38" class="i property">CanRead</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(0, <span class="r16 r">rawResponse</span>.<a href="/Azure.Core/A.html#e05b388d35abae58" class="i property">ContentStream</a>.<a href="@0@mscorlib/A.html#35112b2a53fb536a" class="i property">Position</a>);
 
            <a href="/Azure.Messaging.ServiceBus/A.html#96f80aae2e1f18c8" class="t t">QueueProperties</a> <span id="r17 rd" class="r17 r">createdQueue</span> = <span class="r15 r">createdQueueResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>;
 
            <b>if</b> (<span class="r11 r">premium</span>)
            {
                <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(100000, <span class="r17 r">createdQueue</span>.<a href="/Azure.Messaging.ServiceBus/A.html#b51461118b6afdac" class="i property">MaxMessageSizeInKilobytes</a>);
            }
            <b>else</b>
            {
                <span class="c">// standard namespaces either use 256KB or 1024KB when in Canary</span>
                <span class="t t">Assert</span>.<span class="i method">LessOrEqual</span>(<span class="r17 r">createdQueue</span>.<a href="/Azure.Messaging.ServiceBus/A.html#b51461118b6afdac" class="i property">MaxMessageSizeInKilobytes</a>, 1024);
            }
 
            <a href="#44cbb1291599989e" class="i method">AssertQueueOptions</a>(<span class="r14 r">queueOptions</span>, <span class="r17 r">createdQueue</span>);
 
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#96f80aae2e1f18c8" class="t t">QueueProperties</a>&gt; <span id="r18 rd" class="r18 r">getQueueResponse</span> = <b>await</b> <span class="r13 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7ef668a5655aa5fa" class="i method">GetQueueAsync</a>(<span class="r14 r">queueOptions</span>.<a href="/Azure.Messaging.ServiceBus/A.html#20a83ebefac8ae32" class="i property">Name</a>);
            <span class="r16 r">rawResponse</span> = <span class="r15 r">createdQueueResponse</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>();
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r16 r">rawResponse</span>.<a href="/Azure.Core/A.html#0d9a1de2c559a434" class="i property">ClientRequestId</a>);
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r16 r">rawResponse</span>.<a href="/Azure.Core/A.html#e05b388d35abae58" class="i property">ContentStream</a>.<a href="@0@mscorlib/A.html#9d92fb3890523d38" class="i property">CanRead</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(0, <span class="r16 r">rawResponse</span>.<a href="/Azure.Core/A.html#e05b388d35abae58" class="i property">ContentStream</a>.<a href="@0@mscorlib/A.html#35112b2a53fb536a" class="i property">Position</a>);
 
            <a href="/Azure.Messaging.ServiceBus/A.html#96f80aae2e1f18c8" class="t t">QueueProperties</a> <span id="r19 rd" class="r19 r">getQueue</span> = <span class="r18 r">getQueueResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>;
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r17 r">createdQueue</span>, <span class="r19 r">getQueue</span>);
 
            <span class="r19 r">getQueue</span>.<a href="/Azure.Messaging.ServiceBus/A.html#8e6bfdf46071fab6" class="i property">EnableBatchedOperations</a> = <b>false</b>;
            <span class="r19 r">getQueue</span>.<a href="/Azure.Messaging.ServiceBus/A.html#425df6e660c3c185" class="i property">MaxDeliveryCount</a> = 9;
            <span class="r19 r">getQueue</span>.<a href="/Azure.Messaging.ServiceBus/A.html#240a78db318dfaf1" class="i property">AuthorizationRules</a>.<a href="@0@mscorlib/A.html#ca7bce81a50b0aeb" class="i method">Clear</a>();
            <span class="r19 r">getQueue</span>.<a href="/Azure.Messaging.ServiceBus/A.html#240a78db318dfaf1" class="i property">AuthorizationRules</a>.<a href="@0@mscorlib/A.html#9cc11588bffd57c1" class="i method">Add</a>(<b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#b230abdc50c5414f" class="t constructor">SharedAccessAuthorizationRule</a>(
                <span class="s">&quot;noManage&quot;</span>,
                <b>new</b>[] { <a href="/Azure.Messaging.ServiceBus/A.html#ccbea8c4913a9067" class="t t">AccessRights</a>.<a href="/Azure.Messaging.ServiceBus/A.html#c90ec6186494f70e" class="i field">Send</a>, <a href="/Azure.Messaging.ServiceBus/A.html#ccbea8c4913a9067" class="t t">AccessRights</a>.<a href="/Azure.Messaging.ServiceBus/A.html#5912059b67b3d1b8" class="i field">Listen</a> }));
            <span class="r19 r">getQueue</span>.<a href="/Azure.Messaging.ServiceBus/A.html#8e6bfdf46071fab6" class="i property">EnableBatchedOperations</a> = <b>true</b>;
            <span class="r19 r">getQueue</span>.<a href="/Azure.Messaging.ServiceBus/A.html#5ec46171f1296be0" class="i property">Status</a> = <a href="/Azure.Messaging.ServiceBus/A.html#1f86b4eb551e22e2" class="t t">EntityStatus</a>.<a href="/Azure.Messaging.ServiceBus/A.html#833ef5c91440015b" class="i property">Disabled</a>;
            <span class="r19 r">getQueue</span>.<a href="/Azure.Messaging.ServiceBus/A.html#f4bd2aeb4c1733a7" class="i property">AutoDeleteOnIdle</a> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#ae74be5264df78d8" class="i method">FromMinutes</a>(6);
            <span class="r19 r">getQueue</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7f6ef582482b161d" class="i property">MaxSizeInMegabytes</a> = 1024;
            <a href="/Azure.Messaging.ServiceBus/A.html#96f80aae2e1f18c8" class="t t">QueueProperties</a> <span id="r20 rd" class="r20 r">updatedQueue</span> = <b>await</b> <span class="r13 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#a0db9a47432f6b65" class="i method">UpdateQueueAsync</a>(<span class="r19 r">getQueue</span>);
 
            <b>if</b> (<a href="/Azure.Core.TestFramework/A.html#eb077c11a09b6b1e" class="i property">Mode</a> == <a href="/Azure.Core.TestFramework/A.html#d7d5cc97dd76217f" class="t t">RecordedTestMode</a>.<a href="/Azure.Core.TestFramework/A.html#bde4663b03b59b85" class="i field">Playback</a>)
            {
                <span class="c">// Auth rules use a randomly generated key, but we don&#39;t want to store</span>
                <span class="c">// these in our test recordings, so we skip the auth rule comparison</span>
                <span class="c">// when in playback mode.</span>
                <a href="/Azure.Messaging.ServiceBus/A.html#7a507539df56cf28" class="k">var</a> <span id="r21 rd" class="r21 r">rules</span> = <span class="r20 r">updatedQueue</span>.<a href="/Azure.Messaging.ServiceBus/A.html#240a78db318dfaf1" class="i property">AuthorizationRules</a>;
                <span class="r20 r">updatedQueue</span>.<a href="/Azure.Messaging.ServiceBus/A.html#240a78db318dfaf1" class="i property">AuthorizationRules</a> = <span class="r19 r">getQueue</span>.<a href="/Azure.Messaging.ServiceBus/A.html#240a78db318dfaf1" class="i property">AuthorizationRules</a>.<a href="/Azure.Messaging.ServiceBus/A.html#a692bb147dc24632" class="i method">Clone</a>();
                <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r19 r">getQueue</span>, <span class="r20 r">updatedQueue</span>);
                <span class="r20 r">updatedQueue</span>.<a href="/Azure.Messaging.ServiceBus/A.html#240a78db318dfaf1" class="i property">AuthorizationRules</a> = <span class="r21 r">rules</span>;
            }
            <b>else</b>
            {
                <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r19 r">getQueue</span>, <span class="r20 r">updatedQueue</span>);
            }
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<b>bool</b>&gt; <span id="r22 rd" class="r22 r">isExistsResponse</span> = <b>await</b> <span class="r13 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#397f37231f475e67" class="i method">QueueExistsAsync</a>(<span class="r12 r">queueName</span>);
            <span class="r16 r">rawResponse</span> = <span class="r15 r">createdQueueResponse</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>();
 
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r16 r">rawResponse</span>.<a href="/Azure.Core/A.html#0d9a1de2c559a434" class="i property">ClientRequestId</a>);
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r16 r">rawResponse</span>.<a href="/Azure.Core/A.html#e05b388d35abae58" class="i property">ContentStream</a>.<a href="@0@mscorlib/A.html#9d92fb3890523d38" class="i property">CanRead</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(0, <span class="r16 r">rawResponse</span>.<a href="/Azure.Core/A.html#e05b388d35abae58" class="i property">ContentStream</a>.<a href="@0@mscorlib/A.html#35112b2a53fb536a" class="i property">Position</a>);
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r22 r">isExistsResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>);
 
            <a href="@0@mscorlib/A.html#cf7f4095e4de7646" class="t t">List</a>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#96f80aae2e1f18c8" class="t t">QueueProperties</a>&gt; <span id="r23 rd" class="r23 r">queueList</span> = <b>new</b> <a href="@0@mscorlib/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#96f80aae2e1f18c8" class="t t">QueueProperties</a>&gt;();
            <b>await</b> <b>foreach</b> (<a href="/Azure.Messaging.ServiceBus/A.html#96f80aae2e1f18c8" class="t t">QueueProperties</a> <span id="r24 rd" class="r24 r">queue</span> <b>in</b> <span class="r13 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#098b10731c02c728" class="i method">GetQueuesAsync</a>())
            {
                <span class="r23 r">queueList</span>.<a href="@0@mscorlib/A.html#9cc11588bffd57c1" class="i method">Add</a>(<span class="r24 r">queue</span>);
            }
 
            <span class="r23 r">queueList</span> = <span class="r23 r">queueList</span>.<a href="@0@System.Core/A.html#e73922753675387a" class="i method">Where</a>(<span id="r25 rd" class="r25 r">e</span> =&gt; <span class="r25 r">e</span>.<a href="/Azure.Messaging.ServiceBus/A.html#5392b8284682840b" class="i property">Name</a>.<a href="@0@mscorlib/A.html#23804789ea4c9c0e" class="i method">StartsWith</a>(<b>nameof</b>(<span class="i">BasicQueueCrudOperations</span>).<a href="@0@mscorlib/A.html#0b5a1ee33618e0b3" class="i method">ToLower</a>())).<a href="@0@System.Core/A.html#e276d6892241255b" class="i method">ToList</a>();
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r23 r">queueList</span>.<a href="@0@mscorlib/A.html#78a69d857716bc68" class="i property">Count</a> == 1, <span class="s">$&quot;</span><span class="s">Expected 1 queue but </span>{<span class="r23 r">queueList</span>.<a href="@0@mscorlib/A.html#78a69d857716bc68" class="i property">Count</a>}<span class="s"> queues returned</span><span class="s">&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r23 r">queueList</span>.<a href="@0@System.Core/A.html#bc8ae402a61dd9d6" class="i method">First</a>().<a href="/Azure.Messaging.ServiceBus/A.html#5392b8284682840b" class="i property">Name</a>, <span class="r12 r">queueName</span>);
 
            <b>await</b> <span class="r13 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#aa79dd9ee3fb68cc" class="i method">DeleteQueueAsync</a>(<span class="r20 r">updatedQueue</span>.<a href="/Azure.Messaging.ServiceBus/A.html#5392b8284682840b" class="i property">Name</a>);
 
            <span class="t t">Assert</span>.<span class="i method">That</span>(
                   <b>async</b> () =&gt;
                   <b>await</b> <span class="r13 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7ef668a5655aa5fa" class="i method">GetQueueAsync</a>(<span class="r14 r">queueOptions</span>.<a href="/Azure.Messaging.ServiceBus/A.html#20a83ebefac8ae32" class="i property">Name</a>),
                   <span class="t t">Throws</span>.<span class="i method">InstanceOf</span>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>&gt;().<span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>.<a href="/Azure.Messaging.ServiceBus/A.html#b39014a14c98853e" class="i property">Reason</a>)).<span class="i method">EqualTo</span>(<a href="/Azure.Messaging.ServiceBus/A.html#ac3a011acdeef28e" class="t t">ServiceBusFailureReason</a>.<a href="/Azure.Messaging.ServiceBus/A.html#90caee8029a933c8" class="i field">MessagingEntityNotFound</a>));
 
            <span class="r22 r">isExistsResponse</span> = <b>await</b> <span class="r13 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#397f37231f475e67" class="i method">QueueExistsAsync</a>(<span class="r12 r">queueName</span>);
            <span class="t t">Assert</span>.<span class="i method">False</span>(<span class="r22 r">isExistsResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>);
        }
 
        [<span class="t constructor">Test</span>]
        [<span class="t constructor">TestCase</span>(<b>false</b>)]
        [<span class="t constructor">TestCase</span>(<b>true</b>)]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Messaging.ServiceBus/A.html#a643219efb857e2b" class="t t">ServiceBusAdministrationClientOptions</a>.<a href="/Azure.Messaging.ServiceBus/A.html#31b1215f647c24fe" class="t t">ServiceVersion</a>.<a href="/Azure.Messaging.ServiceBus/A.html#486a5eb1469bf6e0" class="i field">V2021_05</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="c0ce2c9c4984b97b" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">BasicTopicCrudOperations</a>(<b>bool</b> <span id="r26 rd" class="r26 r">premium</span>)
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r27 rd" class="r27 r">topicName</span> = <b>nameof</b>(<span class="i">BasicTopicCrudOperations</span>).<a href="@0@mscorlib/A.html#0b5a1ee33618e0b3" class="i method">ToLower</a>() + <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
            <a href="/Azure.Messaging.ServiceBus/A.html#827d49874cba94ba" class="k">var</a> <span id="r28 rd" class="r28 r">client</span> = <a href="#1deb5024707aa43b" class="i method">CreateClient</a>(<span class="r26 r">premium</span>);
 
            <a href="/Azure.Messaging.ServiceBus/A.html#ecbb5f425eb88c96" class="k">var</a> <span id="r29 rd" class="r29 r">options</span> = <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#9d7b3a77ecfa63ef" class="t constructor">CreateTopicOptions</a>(<span class="r27 r">topicName</span>)
            {
                <a href="/Azure.Messaging.ServiceBus/A.html#0462655cdea1d7a9" class="i property">AutoDeleteOnIdle</a> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#060fe8cc38e0a7e3" class="i method">FromHours</a>(1),
                <a href="/Azure.Messaging.ServiceBus/A.html#9408d4efd64ab15d" class="i property">DefaultMessageTimeToLive</a> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#e7c4baa19fa38e8e" class="i method">FromDays</a>(2),
                <a href="/Azure.Messaging.ServiceBus/A.html#d83a99f7355004de" class="i property">DuplicateDetectionHistoryTimeWindow</a> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#ae74be5264df78d8" class="i method">FromMinutes</a>(1),
                <a href="/Azure.Messaging.ServiceBus/A.html#25280fd8b0aa49c7" class="i property">EnableBatchedOperations</a> = <b>true</b>,
                <a href="/Azure.Messaging.ServiceBus/A.html#b395cc08d4f067ff" class="i property">EnablePartitioning</a> = <b>false</b>,
                <a href="/Azure.Messaging.ServiceBus/A.html#eed8d7ee28ec42c4" class="i property">MaxSizeInMegabytes</a> = 1024,
                <a href="/Azure.Messaging.ServiceBus/A.html#e2bf25032ee4d922" class="i property">RequiresDuplicateDetection</a> = <b>true</b>,
                <a href="/Azure.Messaging.ServiceBus/A.html#68b62dc3de2a3a39" class="i property">UserMetadata</a> = <b>nameof</b>(<span class="i">BasicTopicCrudOperations</span>),
            };
 
            <b>if</b> (<span class="r26 r">premium</span>)
            {
                <span class="r29 r">options</span>.<a href="/Azure.Messaging.ServiceBus/A.html#ed2b9c3b404214c4" class="i property">MaxMessageSizeInKilobytes</a> = 100000;
            }
 
            <span class="r29 r">options</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7c46a1fdf0f3696b" class="i property">AuthorizationRules</a>.<a href="@0@mscorlib/A.html#9cc11588bffd57c1" class="i method">Add</a>(<b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#b230abdc50c5414f" class="t constructor">SharedAccessAuthorizationRule</a>(
               <span class="s">&quot;allClaims&quot;</span>,
               <b>new</b>[] { <a href="/Azure.Messaging.ServiceBus/A.html#ccbea8c4913a9067" class="t t">AccessRights</a>.<a href="/Azure.Messaging.ServiceBus/A.html#76a6933c4f91b2ca" class="i field">Manage</a>, <a href="/Azure.Messaging.ServiceBus/A.html#ccbea8c4913a9067" class="t t">AccessRights</a>.<a href="/Azure.Messaging.ServiceBus/A.html#c90ec6186494f70e" class="i field">Send</a>, <a href="/Azure.Messaging.ServiceBus/A.html#ccbea8c4913a9067" class="t t">AccessRights</a>.<a href="/Azure.Messaging.ServiceBus/A.html#5912059b67b3d1b8" class="i field">Listen</a> }));
 
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#5f455b5c63b17daf" class="t t">TopicProperties</a>&gt; <span id="r30 rd" class="r30 r">createdTopicResponse</span> = <b>await</b> <span class="r28 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#1a1bd1ddd84e0245" class="i method">CreateTopicAsync</a>(<span class="r29 r">options</span>);
            <a href="/Azure.Core/A.html#ad97b1910f5ca3eb" class="t t">Response</a> <span id="r31 rd" class="r31 r">rawResponse</span> = <span class="r30 r">createdTopicResponse</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>();
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r31 r">rawResponse</span>.<a href="/Azure.Core/A.html#0d9a1de2c559a434" class="i property">ClientRequestId</a>);
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r31 r">rawResponse</span>.<a href="/Azure.Core/A.html#e05b388d35abae58" class="i property">ContentStream</a>.<a href="@0@mscorlib/A.html#9d92fb3890523d38" class="i property">CanRead</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(0, <span class="r31 r">rawResponse</span>.<a href="/Azure.Core/A.html#e05b388d35abae58" class="i property">ContentStream</a>.<a href="@0@mscorlib/A.html#35112b2a53fb536a" class="i property">Position</a>);
 
            <a href="/Azure.Messaging.ServiceBus/A.html#5f455b5c63b17daf" class="t t">TopicProperties</a> <span id="r32 rd" class="r32 r">createdTopic</span> = <span class="r30 r">createdTopicResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>;
 
            <b>if</b> (<span class="r26 r">premium</span>)
            {
                <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(100000, <span class="r32 r">createdTopic</span>.<a href="/Azure.Messaging.ServiceBus/A.html#29dd74b178b49e71" class="i property">MaxMessageSizeInKilobytes</a>);
            }
            <b>else</b>
            {
                <span class="c">// standard namespaces either use 256KB or 1024KB when in Canary</span>
                <span class="t t">Assert</span>.<span class="i method">LessOrEqual</span>(<span class="r32 r">createdTopic</span>.<a href="/Azure.Messaging.ServiceBus/A.html#29dd74b178b49e71" class="i property">MaxMessageSizeInKilobytes</a>, 1024);
            }
 
            <a href="#deec0227b5dfa843" class="i method">AssertTopicOptions</a>(<span class="r29 r">options</span>, <span class="r32 r">createdTopic</span>);
 
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#5f455b5c63b17daf" class="t t">TopicProperties</a>&gt; <span id="r33 rd" class="r33 r">getTopicResponse</span> = <b>await</b> <span class="r28 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#5f2a934089e15cda" class="i method">GetTopicAsync</a>(<span class="r29 r">options</span>.<a href="/Azure.Messaging.ServiceBus/A.html#d5f59c0ede854d64" class="i property">Name</a>);
 
            <span class="r31 r">rawResponse</span> = <span class="r33 r">getTopicResponse</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>();
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r31 r">rawResponse</span>.<a href="/Azure.Core/A.html#0d9a1de2c559a434" class="i property">ClientRequestId</a>);
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r31 r">rawResponse</span>.<a href="/Azure.Core/A.html#e05b388d35abae58" class="i property">ContentStream</a>.<a href="@0@mscorlib/A.html#9d92fb3890523d38" class="i property">CanRead</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(0, <span class="r31 r">rawResponse</span>.<a href="/Azure.Core/A.html#e05b388d35abae58" class="i property">ContentStream</a>.<a href="@0@mscorlib/A.html#35112b2a53fb536a" class="i property">Position</a>);
 
            <a href="/Azure.Messaging.ServiceBus/A.html#5f455b5c63b17daf" class="t t">TopicProperties</a> <span id="r34 rd" class="r34 r">getTopic</span> = <span class="r33 r">getTopicResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>;
 
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r32 r">createdTopic</span>, <span class="r34 r">getTopic</span>);
 
            <span class="r34 r">getTopic</span>.<a href="/Azure.Messaging.ServiceBus/A.html#af2f52b86931f664" class="i property">EnableBatchedOperations</a> = <b>false</b>;
            <span class="r34 r">getTopic</span>.<a href="/Azure.Messaging.ServiceBus/A.html#6a9797856e1eab06" class="i property">DefaultMessageTimeToLive</a> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#e7c4baa19fa38e8e" class="i method">FromDays</a>(3);
            <span class="r34 r">getTopic</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7fd3246b0c389125" class="i property">DuplicateDetectionHistoryTimeWindow</a> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#ae74be5264df78d8" class="i method">FromMinutes</a>(2);
            <span class="r34 r">getTopic</span>.<a href="/Azure.Messaging.ServiceBus/A.html#af2f52b86931f664" class="i property">EnableBatchedOperations</a> = <b>false</b>;
            <span class="r34 r">getTopic</span>.<a href="/Azure.Messaging.ServiceBus/A.html#d518e319fd29e723" class="i property">MaxSizeInMegabytes</a> = 1024;
 
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#5f455b5c63b17daf" class="t t">TopicProperties</a>&gt; <span id="r35 rd" class="r35 r">updatedTopicResponse</span> = <b>await</b> <span class="r28 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#81a63608fd179315" class="i method">UpdateTopicAsync</a>(<span class="r34 r">getTopic</span>);
            <span class="r31 r">rawResponse</span> = <span class="r35 r">updatedTopicResponse</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>();
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r31 r">rawResponse</span>.<a href="/Azure.Core/A.html#0d9a1de2c559a434" class="i property">ClientRequestId</a>);
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r31 r">rawResponse</span>.<a href="/Azure.Core/A.html#e05b388d35abae58" class="i property">ContentStream</a>.<a href="@0@mscorlib/A.html#9d92fb3890523d38" class="i property">CanRead</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(0, <span class="r31 r">rawResponse</span>.<a href="/Azure.Core/A.html#e05b388d35abae58" class="i property">ContentStream</a>.<a href="@0@mscorlib/A.html#35112b2a53fb536a" class="i property">Position</a>);
 
            <a href="/Azure.Messaging.ServiceBus/A.html#5f455b5c63b17daf" class="t t">TopicProperties</a> <span id="r36 rd" class="r36 r">updatedTopic</span> = <span class="r35 r">updatedTopicResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>;
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r34 r">getTopic</span>, <span class="r36 r">updatedTopic</span>);
 
            <b>bool</b> <span id="r37 rd" class="r37 r">exists</span> = <b>await</b> <span class="r28 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#0d0805f116b4a28b" class="i method">TopicExistsAsync</a>(<span class="r27 r">topicName</span>);
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r37 r">exists</span>);
 
            <a href="@0@mscorlib/A.html#cf7f4095e4de7646" class="t t">List</a>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#5f455b5c63b17daf" class="t t">TopicProperties</a>&gt; <span id="r38 rd" class="r38 r">topicList</span> = <b>new</b> <a href="@0@mscorlib/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#5f455b5c63b17daf" class="t t">TopicProperties</a>&gt;();
            <b>await</b> <b>foreach</b> (<a href="/Azure.Messaging.ServiceBus/A.html#5f455b5c63b17daf" class="t t">TopicProperties</a> <span id="r39 rd" class="r39 r">topic</span> <b>in</b> <span class="r28 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#2febb3601c9485f5" class="i method">GetTopicsAsync</a>())
            {
                <span class="r38 r">topicList</span>.<a href="@0@mscorlib/A.html#9cc11588bffd57c1" class="i method">Add</a>(<span class="r39 r">topic</span>);
            }
            <span class="r38 r">topicList</span> = <span class="r38 r">topicList</span>.<a href="@0@System.Core/A.html#e73922753675387a" class="i method">Where</a>(<span id="r40 rd" class="r40 r">e</span> =&gt; <span class="r40 r">e</span>.<a href="/Azure.Messaging.ServiceBus/A.html#5073ddb038dc1f91" class="i property">Name</a>.<a href="@0@mscorlib/A.html#23804789ea4c9c0e" class="i method">StartsWith</a>(<b>nameof</b>(<span class="i">BasicTopicCrudOperations</span>).<a href="@0@mscorlib/A.html#0b5a1ee33618e0b3" class="i method">ToLower</a>())).<a href="@0@System.Core/A.html#e276d6892241255b" class="i method">ToList</a>();
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r38 r">topicList</span>.<a href="@0@mscorlib/A.html#78a69d857716bc68" class="i property">Count</a> == 1, <span class="s">$&quot;</span><span class="s">Expected 1 topic but </span>{<span class="r38 r">topicList</span>.<a href="@0@mscorlib/A.html#78a69d857716bc68" class="i property">Count</a>}<span class="s"> topics returned</span><span class="s">&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r38 r">topicList</span>.<a href="@0@System.Core/A.html#bc8ae402a61dd9d6" class="i method">First</a>().<a href="/Azure.Messaging.ServiceBus/A.html#5073ddb038dc1f91" class="i property">Name</a>, <span class="r27 r">topicName</span>);
 
            <a href="/Azure.Core/A.html#ad97b1910f5ca3eb" class="t t">Response</a> <span id="r41 rd" class="r41 r">response</span> = <b>await</b> <span class="r28 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#22d770ae7b158317" class="i method">DeleteTopicAsync</a>(<span class="r36 r">updatedTopic</span>.<a href="/Azure.Messaging.ServiceBus/A.html#5073ddb038dc1f91" class="i property">Name</a>);
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r41 r">response</span>.<a href="/Azure.Core/A.html#0d9a1de2c559a434" class="i property">ClientRequestId</a>);
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r41 r">response</span>.<a href="/Azure.Core/A.html#e05b388d35abae58" class="i property">ContentStream</a>.<a href="@0@mscorlib/A.html#9d92fb3890523d38" class="i property">CanRead</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(0, <span class="r41 r">response</span>.<a href="/Azure.Core/A.html#e05b388d35abae58" class="i property">ContentStream</a>.<a href="@0@mscorlib/A.html#35112b2a53fb536a" class="i property">Position</a>);
 
            <span class="t t">Assert</span>.<span class="i method">That</span>(
                  <b>async</b> () =&gt;
                  <b>await</b> <span class="r28 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#5f2a934089e15cda" class="i method">GetTopicAsync</a>(<span class="r29 r">options</span>.<a href="/Azure.Messaging.ServiceBus/A.html#d5f59c0ede854d64" class="i property">Name</a>),
                  <span class="t t">Throws</span>.<span class="i method">InstanceOf</span>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>&gt;().<span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>.<a href="/Azure.Messaging.ServiceBus/A.html#b39014a14c98853e" class="i property">Reason</a>)).<span class="i method">EqualTo</span>(<a href="/Azure.Messaging.ServiceBus/A.html#ac3a011acdeef28e" class="t t">ServiceBusFailureReason</a>.<a href="/Azure.Messaging.ServiceBus/A.html#90caee8029a933c8" class="i field">MessagingEntityNotFound</a>));
 
            <span class="r37 r">exists</span> = <b>await</b> <span class="r28 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#0d0805f116b4a28b" class="i method">TopicExistsAsync</a>(<span class="r27 r">topicName</span>);
            <span class="t t">Assert</span>.<span class="i method">False</span>(<span class="r37 r">exists</span>);
        }
 
        [<span class="t constructor">Test</span>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="fe82890ba702df4c" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">BasicSubscriptionCrudOperations</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r42 rd" class="r42 r">topicName</span> = <b>nameof</b>(<span class="i">BasicSubscriptionCrudOperations</span>).<a href="@0@mscorlib/A.html#0b5a1ee33618e0b3" class="i method">ToLower</a>() + <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r43 rd" class="r43 r">subscriptionName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
 
            <a href="/Azure.Messaging.ServiceBus/A.html#827d49874cba94ba" class="k">var</a> <span id="r44 rd" class="r44 r">client</span> = <a href="#1deb5024707aa43b" class="i method">CreateClient</a>();
 
            <b>await</b> <span class="r44 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#e566ecd8704fae45" class="i method">CreateTopicAsync</a>(<span class="r42 r">topicName</span>);
 
            <a href="/Azure.Messaging.ServiceBus/A.html#c374bdb1cfd05a1d" class="k">var</a> <span id="r45 rd" class="r45 r">options</span> = <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#deaf86a90ba7e12a" class="t constructor">CreateSubscriptionOptions</a>(<span class="r42 r">topicName</span>, <span class="r43 r">subscriptionName</span>)
            {
                <a href="/Azure.Messaging.ServiceBus/A.html#571df52c7f1dc576" class="i property">AutoDeleteOnIdle</a> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#060fe8cc38e0a7e3" class="i method">FromHours</a>(1),
                <a href="/Azure.Messaging.ServiceBus/A.html#317ca7f85dab057c" class="i property">DefaultMessageTimeToLive</a> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#e7c4baa19fa38e8e" class="i method">FromDays</a>(2),
                <a href="/Azure.Messaging.ServiceBus/A.html#7d9ad724e85b5102" class="i property">DeadLetteringOnMessageExpiration</a> = <b>true</b>,
                <a href="/Azure.Messaging.ServiceBus/A.html#a390b23015512457" class="i property">EnableBatchedOperations</a> = <b>false</b>,
                <a href="/Azure.Messaging.ServiceBus/A.html#c0f0984a6adb8a0f" class="i property">ForwardDeadLetteredMessagesTo</a> = <b>null</b>,
                <a href="/Azure.Messaging.ServiceBus/A.html#6bd96e3e3fee30a9" class="i property">ForwardTo</a> = <b>null</b>,
                <a href="/Azure.Messaging.ServiceBus/A.html#c4857acbc9b84e4f" class="i property">LockDuration</a> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(45),
                <a href="/Azure.Messaging.ServiceBus/A.html#7d3c9c6a31a60eb3" class="i property">MaxDeliveryCount</a> = 8,
                <a href="/Azure.Messaging.ServiceBus/A.html#77b3b697810683a6" class="i property">RequiresSession</a> = <b>true</b>,
                <a href="/Azure.Messaging.ServiceBus/A.html#d6698ae6af8bd37e" class="i property">UserMetadata</a> = <b>nameof</b>(<span class="i">BasicSubscriptionCrudOperations</span>)
            };
 
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#e56c1e71370bb3d4" class="t t">SubscriptionProperties</a>&gt; <span id="r46 rd" class="r46 r">createdSubscriptionResponse</span> = <b>await</b> <span class="r44 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#ca96fd0c2a6c0c3c" class="i method">CreateSubscriptionAsync</a>(<span class="r45 r">options</span>);
            <a href="/Azure.Core/A.html#ad97b1910f5ca3eb" class="t t">Response</a> <span id="r47 rd" class="r47 r">rawResponse</span> = <span class="r46 r">createdSubscriptionResponse</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>();
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r47 r">rawResponse</span>.<a href="/Azure.Core/A.html#0d9a1de2c559a434" class="i property">ClientRequestId</a>);
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r47 r">rawResponse</span>.<a href="/Azure.Core/A.html#e05b388d35abae58" class="i property">ContentStream</a>.<a href="@0@mscorlib/A.html#9d92fb3890523d38" class="i property">CanRead</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(0, <span class="r47 r">rawResponse</span>.<a href="/Azure.Core/A.html#e05b388d35abae58" class="i property">ContentStream</a>.<a href="@0@mscorlib/A.html#35112b2a53fb536a" class="i property">Position</a>);
 
            <a href="/Azure.Messaging.ServiceBus/A.html#e56c1e71370bb3d4" class="t t">SubscriptionProperties</a> <span id="r48 rd" class="r48 r">createdSubscription</span> = <span class="r46 r">createdSubscriptionResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>;
 
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r45 r">options</span>, <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#a2461f3300d13025" class="t constructor">CreateSubscriptionOptions</a>(<span class="r48 r">createdSubscription</span>));
 
            <a href="/Azure.Messaging.ServiceBus/A.html#e56c1e71370bb3d4" class="t t">SubscriptionProperties</a> <span id="r49 rd" class="r49 r">getSubscription</span> = <b>await</b> <span class="r44 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#4077a0bee6144052" class="i method">GetSubscriptionAsync</a>(<span class="r45 r">options</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7d9635b0eb1dbf9c" class="i property">TopicName</a>, <span class="r45 r">options</span>.<a href="/Azure.Messaging.ServiceBus/A.html#3570d000438d9144" class="i property">SubscriptionName</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r45 r">options</span>, <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#a2461f3300d13025" class="t constructor">CreateSubscriptionOptions</a>(<span class="r49 r">getSubscription</span>));
 
            <span class="r49 r">getSubscription</span>.<a href="/Azure.Messaging.ServiceBus/A.html#d4e07d48dc962d81" class="i property">DefaultMessageTimeToLive</a> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#e7c4baa19fa38e8e" class="i method">FromDays</a>(3);
            <span class="r49 r">getSubscription</span>.<a href="/Azure.Messaging.ServiceBus/A.html#49fe0f9f254cd7da" class="i property">MaxDeliveryCount</a> = 9;
 
            <a href="/Azure.Messaging.ServiceBus/A.html#e56c1e71370bb3d4" class="t t">SubscriptionProperties</a> <span id="r50 rd" class="r50 r">updatedSubscription</span> = <b>await</b> <span class="r44 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#af2e258377fa417c" class="i method">UpdateSubscriptionAsync</a>(<span class="r49 r">getSubscription</span>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r49 r">getSubscription</span>, <span class="r50 r">updatedSubscription</span>);
 
            <b>bool</b> <span id="r51 rd" class="r51 r">exists</span> = <b>await</b> <span class="r44 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7b4a6628b49e57f1" class="i method">SubscriptionExistsAsync</a>(<span class="r42 r">topicName</span>, <span class="r43 r">subscriptionName</span>);
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r51 r">exists</span>);
 
            <a href="@0@mscorlib/A.html#cf7f4095e4de7646" class="t t">List</a>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#e56c1e71370bb3d4" class="t t">SubscriptionProperties</a>&gt; <span id="r52 rd" class="r52 r">subscriptionList</span> = <b>new</b> <a href="@0@mscorlib/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#e56c1e71370bb3d4" class="t t">SubscriptionProperties</a>&gt;();
            <b>await</b> <b>foreach</b> (<a href="/Azure.Core/A.html#b864610eef8c9004" class="t t">Page</a>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#e56c1e71370bb3d4" class="t t">SubscriptionProperties</a>&gt; <span id="r53 rd" class="r53 r">subscriptionPage</span> <b>in</b> <span class="r44 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#c18a5cc2620cef2b" class="i method">GetSubscriptionsAsync</a>(<span class="r42 r">topicName</span>).<a href="/Azure.Core/A.html#1796337aa63dd119" class="i method">AsPages</a>())
            {
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r53 r">subscriptionPage</span>.<a href="/Azure.Core/A.html#167125d2f262d36e" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#0d9a1de2c559a434" class="i property">ClientRequestId</a>);
                <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r53 r">subscriptionPage</span>.<a href="/Azure.Core/A.html#167125d2f262d36e" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#e05b388d35abae58" class="i property">ContentStream</a>.<a href="@0@mscorlib/A.html#9d92fb3890523d38" class="i property">CanRead</a>);
                <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(0, <span class="r53 r">subscriptionPage</span>.<a href="/Azure.Core/A.html#167125d2f262d36e" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#e05b388d35abae58" class="i property">ContentStream</a>.<a href="@0@mscorlib/A.html#35112b2a53fb536a" class="i property">Position</a>);
                <span class="r52 r">subscriptionList</span>.<a href="@0@mscorlib/A.html#e569d850a66a1771" class="i method">AddRange</a>(<span class="r53 r">subscriptionPage</span>.<a href="/Azure.Core/A.html#a7bb6b76dd8b4f1b" class="i property">Values</a>);
            }
            <span class="r52 r">subscriptionList</span> = <span class="r52 r">subscriptionList</span>.<a href="@0@System.Core/A.html#e73922753675387a" class="i method">Where</a>(<span id="r54 rd" class="r54 r">e</span> =&gt; <span class="r54 r">e</span>.<a href="/Azure.Messaging.ServiceBus/A.html#1c715a7bdb988f82" class="i property">TopicName</a>.<a href="@0@mscorlib/A.html#23804789ea4c9c0e" class="i method">StartsWith</a>(<b>nameof</b>(<span class="i">BasicSubscriptionCrudOperations</span>).<a href="@0@mscorlib/A.html#0b5a1ee33618e0b3" class="i method">ToLower</a>())).<a href="@0@System.Core/A.html#e276d6892241255b" class="i method">ToList</a>();
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r52 r">subscriptionList</span>.<a href="@0@mscorlib/A.html#78a69d857716bc68" class="i property">Count</a> == 1, <span class="s">$&quot;</span><span class="s">Expected 1 subscription but </span>{<span class="r52 r">subscriptionList</span>.<a href="@0@mscorlib/A.html#78a69d857716bc68" class="i property">Count</a>}<span class="s"> subscriptions returned</span><span class="s">&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r52 r">subscriptionList</span>.<a href="@0@System.Core/A.html#bc8ae402a61dd9d6" class="i method">First</a>().<a href="/Azure.Messaging.ServiceBus/A.html#1c715a7bdb988f82" class="i property">TopicName</a>, <span class="r42 r">topicName</span>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r52 r">subscriptionList</span>.<a href="@0@System.Core/A.html#bc8ae402a61dd9d6" class="i method">First</a>().<a href="/Azure.Messaging.ServiceBus/A.html#38c2f84795b631d9" class="i property">SubscriptionName</a>, <span class="r43 r">subscriptionName</span>);
 
            <b>await</b> <span class="r44 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#c1f8a48543acf559" class="i method">DeleteSubscriptionAsync</a>(<span class="r45 r">options</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7d9635b0eb1dbf9c" class="i property">TopicName</a>, <span class="r45 r">options</span>.<a href="/Azure.Messaging.ServiceBus/A.html#3570d000438d9144" class="i property">SubscriptionName</a>);
 
            <span class="t t">Assert</span>.<span class="i method">That</span>(
                  <b>async</b> () =&gt;
                  <b>await</b> <span class="r44 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#4077a0bee6144052" class="i method">GetSubscriptionAsync</a>(<span class="r45 r">options</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7d9635b0eb1dbf9c" class="i property">TopicName</a>, <span class="r45 r">options</span>.<a href="/Azure.Messaging.ServiceBus/A.html#3570d000438d9144" class="i property">SubscriptionName</a>),
                  <span class="t t">Throws</span>.<span class="i method">InstanceOf</span>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>&gt;().<span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>.<a href="/Azure.Messaging.ServiceBus/A.html#b39014a14c98853e" class="i property">Reason</a>)).<span class="i method">EqualTo</span>(<a href="/Azure.Messaging.ServiceBus/A.html#ac3a011acdeef28e" class="t t">ServiceBusFailureReason</a>.<a href="/Azure.Messaging.ServiceBus/A.html#90caee8029a933c8" class="i field">MessagingEntityNotFound</a>));
 
            <b>await</b> <span class="r44 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#22d770ae7b158317" class="i method">DeleteTopicAsync</a>(<span class="r45 r">options</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7d9635b0eb1dbf9c" class="i property">TopicName</a>);
 
            <span class="r51 r">exists</span> = <b>await</b> <span class="r44 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7b4a6628b49e57f1" class="i method">SubscriptionExistsAsync</a>(<span class="r42 r">topicName</span>, <span class="r43 r">subscriptionName</span>);
            <span class="t t">Assert</span>.<span class="i method">False</span>(<span class="r51 r">exists</span>);
        }
 
        [<span class="t constructor">Test</span>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="7a2a0f6d41e3983d" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">BasicRuleCrudOperations</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r55 rd" class="r55 r">topicName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r56 rd" class="r56 r">subscriptionName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
            <a href="/Azure.Messaging.ServiceBus/A.html#827d49874cba94ba" class="k">var</a> <span id="r57 rd" class="r57 r">client</span> = <a href="#1deb5024707aa43b" class="i method">CreateClient</a>();
            <b>await</b> <span class="r57 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#e566ecd8704fae45" class="i method">CreateTopicAsync</a>(<span class="r55 r">topicName</span>);
 
            <a href="/Azure.Messaging.ServiceBus/A.html#1ff4249f455463d8" class="k">var</a> <span id="r58 rd" class="r58 r">rule1</span> = <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#c3fab6448a889a24" class="t constructor">CreateRuleOptions</a>
            {
                <a href="/Azure.Messaging.ServiceBus/A.html#f2bd1ea573b2d69c" class="i property">Filter</a> = <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#e827a2ee63a3ec02" class="t constructor">TrueRuleFilter</a>(),
                <a href="/Azure.Messaging.ServiceBus/A.html#783b0b500367593a" class="i property">Name</a> = <span class="s">&quot;rule1&quot;</span>
            };
            <b>await</b> <span class="r57 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#3a607a0e16348550" class="i method">CreateSubscriptionAsync</a>(
                <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#deaf86a90ba7e12a" class="t constructor">CreateSubscriptionOptions</a>(<span class="r55 r">topicName</span>, <span class="r56 r">subscriptionName</span>),
                <span class="r58 r">rule1</span>);
            <a href="/Azure.Messaging.ServiceBus/A.html#b23c8647941f6cd1" class="t t">RuleProperties</a> <span id="r59 rd" class="r59 r">getRule1</span> = <b>await</b> <span class="r57 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#fd1684a06927f08d" class="i method">GetRuleAsync</a>(<span class="r55 r">topicName</span>, <span class="r56 r">subscriptionName</span>, <span class="s">&quot;rule1&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r58 r">rule1</span>, <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#8a4405eba695391e" class="t constructor">CreateRuleOptions</a>(<span class="r59 r">getRule1</span>));
 
            <a href="/Azure.Messaging.ServiceBus/A.html#2a9b5c959bab5c99" class="k">var</a> <span id="r60 rd" class="r60 r">sqlRuleFilter</span> = <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#475f66aba60e9ed2" class="t constructor">SqlRuleFilter</a>(<span class="s">&quot;stringValue = @stringParam AND intValue = @intParam AND longValue = @longParam AND dateValue = @dateParam AND timeSpanValue = @timeSpanParam&quot;</span>);
            <span class="r60 r">sqlRuleFilter</span>.<a href="/Azure.Messaging.ServiceBus/A.html#a5493ab99080864a" class="i property">Parameters</a>.<a href="@0@mscorlib/A.html#380bc69e46a83183" class="i method">Add</a>(<span class="s">&quot;@stringParam&quot;</span>, <span class="s">&quot;string&quot;</span>);
            <span class="r60 r">sqlRuleFilter</span>.<a href="/Azure.Messaging.ServiceBus/A.html#a5493ab99080864a" class="i property">Parameters</a>.<a href="@0@mscorlib/A.html#380bc69e46a83183" class="i method">Add</a>(<span class="s">&quot;@intParam&quot;</span>, 1);
            <span class="r60 r">sqlRuleFilter</span>.<a href="/Azure.Messaging.ServiceBus/A.html#a5493ab99080864a" class="i property">Parameters</a>.<a href="@0@mscorlib/A.html#380bc69e46a83183" class="i method">Add</a>(<span class="s">&quot;@longParam&quot;</span>, (<b>long</b>)12);
            <span class="r60 r">sqlRuleFilter</span>.<a href="/Azure.Messaging.ServiceBus/A.html#a5493ab99080864a" class="i property">Parameters</a>.<a href="@0@mscorlib/A.html#380bc69e46a83183" class="i method">Add</a>(<span class="s">&quot;@dateParam&quot;</span>, <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#e6b56eb0cd3db64f" class="i property">Now</a>.<a href="@0@mscorlib/A.html#ae3e62dcd82c2422" class="i property">UtcDateTime</a>);
            <span class="r60 r">sqlRuleFilter</span>.<a href="/Azure.Messaging.ServiceBus/A.html#a5493ab99080864a" class="i property">Parameters</a>.<a href="@0@mscorlib/A.html#380bc69e46a83183" class="i method">Add</a>(<span class="s">&quot;@timeSpanParam&quot;</span>, <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#e7c4baa19fa38e8e" class="i method">FromDays</a>(1));
            <a href="/Azure.Messaging.ServiceBus/A.html#1ff4249f455463d8" class="k">var</a> <span id="r61 rd" class="r61 r">rule2</span> = <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#c3fab6448a889a24" class="t constructor">CreateRuleOptions</a>
            {
                <a href="/Azure.Messaging.ServiceBus/A.html#783b0b500367593a" class="i property">Name</a> = <span class="s">&quot;rule2&quot;</span>,
                <a href="/Azure.Messaging.ServiceBus/A.html#f2bd1ea573b2d69c" class="i property">Filter</a> = <span class="r60 r">sqlRuleFilter</span>,
                <a href="/Azure.Messaging.ServiceBus/A.html#69f48a04b5ce0650" class="i property">Action</a> = <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#9c985da5a59883c6" class="t constructor">SqlRuleAction</a>(<span class="s">&quot;SET a=&#39;b&#39;&quot;</span>)
            };
            <b>await</b> <span class="r57 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7fb08df68d75fce9" class="i method">CreateRuleAsync</a>(<span class="r55 r">topicName</span>, <span class="r56 r">subscriptionName</span>, <span class="r61 r">rule2</span>);
            <a href="/Azure.Messaging.ServiceBus/A.html#b23c8647941f6cd1" class="t t">RuleProperties</a> <span id="r62 rd" class="r62 r">getRule2</span> = <b>await</b> <span class="r57 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#fd1684a06927f08d" class="i method">GetRuleAsync</a>(<span class="r55 r">topicName</span>, <span class="r56 r">subscriptionName</span>, <span class="s">&quot;rule2&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r61 r">rule2</span>, <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#8a4405eba695391e" class="t constructor">CreateRuleOptions</a>(<span class="r62 r">getRule2</span>));
 
            <a href="/Azure.Messaging.ServiceBus/A.html#56647929fe37f475" class="k">var</a> <span id="r63 rd" class="r63 r">correlationRuleFilter</span> = <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#729038eeb2cb5076" class="t constructor">CorrelationRuleFilter</a>()
            {
                <a href="/Azure.Messaging.ServiceBus/A.html#0194f02b9864dd1c" class="i property">ContentType</a> = <span class="s">&quot;contentType&quot;</span>,
                <a href="/Azure.Messaging.ServiceBus/A.html#5a5178c9e33d7c2a" class="i property">CorrelationId</a> = <span class="s">&quot;correlationId&quot;</span>,
                <a href="/Azure.Messaging.ServiceBus/A.html#8cf9d7a595d1d1d0" class="i property">Subject</a> = <span class="s">&quot;label&quot;</span>,
                <a href="/Azure.Messaging.ServiceBus/A.html#9031c7c055111577" class="i property">MessageId</a> = <span class="s">&quot;messageId&quot;</span>,
                <a href="/Azure.Messaging.ServiceBus/A.html#d3d4fafe12f3f58e" class="i property">ReplyTo</a> = <span class="s">&quot;replyTo&quot;</span>,
                <a href="/Azure.Messaging.ServiceBus/A.html#ab60a1a10c4444fd" class="i property">ReplyToSessionId</a> = <span class="s">&quot;replyToSessionId&quot;</span>,
                <a href="/Azure.Messaging.ServiceBus/A.html#7c88fbe0ead93030" class="i property">SessionId</a> = <span class="s">&quot;sessionId&quot;</span>,
                <a href="/Azure.Messaging.ServiceBus/A.html#8e46bbc23f2659dc" class="i property">To</a> = <span class="s">&quot;to&quot;</span>
            };
            <span class="r63 r">correlationRuleFilter</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7e566f07acf94344" class="i property">ApplicationProperties</a>.<a href="@0@mscorlib/A.html#380bc69e46a83183" class="i method">Add</a>(<span class="s">&quot;customKey&quot;</span>, <span class="s">&quot;customValue&quot;</span>);
            <a href="/Azure.Messaging.ServiceBus/A.html#1ff4249f455463d8" class="k">var</a> <span id="r64 rd" class="r64 r">rule3</span> = <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#c3fab6448a889a24" class="t constructor">CreateRuleOptions</a>()
            {
                <a href="/Azure.Messaging.ServiceBus/A.html#783b0b500367593a" class="i property">Name</a> = <span class="s">&quot;rule3&quot;</span>,
                <a href="/Azure.Messaging.ServiceBus/A.html#f2bd1ea573b2d69c" class="i property">Filter</a> = <span class="r63 r">correlationRuleFilter</span>,
                <a href="/Azure.Messaging.ServiceBus/A.html#69f48a04b5ce0650" class="i property">Action</a> = <b>null</b>
            };
            <b>await</b> <span class="r57 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7fb08df68d75fce9" class="i method">CreateRuleAsync</a>(<span class="r55 r">topicName</span>, <span class="r56 r">subscriptionName</span>, <span class="r64 r">rule3</span>);
            <a href="/Azure.Messaging.ServiceBus/A.html#b23c8647941f6cd1" class="t t">RuleProperties</a> <span id="r65 rd" class="r65 r">getRule3</span> = <b>await</b> <span class="r57 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#fd1684a06927f08d" class="i method">GetRuleAsync</a>(<span class="r55 r">topicName</span>, <span class="r56 r">subscriptionName</span>, <span class="s">&quot;rule3&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r64 r">rule3</span>, <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#8a4405eba695391e" class="t constructor">CreateRuleOptions</a>(<span class="r65 r">getRule3</span>));
 
            <a href="@0@mscorlib/A.html#cf7f4095e4de7646" class="t t">List</a>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#b23c8647941f6cd1" class="t t">RuleProperties</a>&gt; <span id="r66 rd" class="r66 r">ruleList</span> = <b>new</b> <a href="@0@mscorlib/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#b23c8647941f6cd1" class="t t">RuleProperties</a>&gt;();
            <b>await</b> <b>foreach</b> (<a href="/Azure.Messaging.ServiceBus/A.html#b23c8647941f6cd1" class="t t">RuleProperties</a> <span id="r67 rd" class="r67 r">rule</span> <b>in</b> <span class="r57 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#3144105a8fe55a96" class="i method">GetRulesAsync</a>(<span class="r55 r">topicName</span>, <span class="r56 r">subscriptionName</span>))
            {
                <span class="r66 r">ruleList</span>.<a href="@0@mscorlib/A.html#9cc11588bffd57c1" class="i method">Add</a>(<span class="r67 r">rule</span>);
            }
            <a href="/Azure.Messaging.ServiceBus/A.html#b23c8647941f6cd1" class="t t">RuleProperties</a>[] <span id="r68 rd" class="r68 r">ruleArr</span> = <span class="r66 r">ruleList</span>.<a href="@0@mscorlib/A.html#d4409b7542728cec" class="i method">ToArray</a>();
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r68 r">ruleArr</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a> == 3);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r58 r">rule1</span>, <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#8a4405eba695391e" class="t constructor">CreateRuleOptions</a>(<span class="r68 r">ruleArr</span>[0]));
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r61 r">rule2</span>, <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#8a4405eba695391e" class="t constructor">CreateRuleOptions</a>(<span class="r68 r">ruleArr</span>[1]));
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r64 r">rule3</span>, <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#8a4405eba695391e" class="t constructor">CreateRuleOptions</a>(<span class="r68 r">ruleArr</span>[2]));
 
            ((<a href="/Azure.Messaging.ServiceBus/A.html#56647929fe37f475" class="t t">CorrelationRuleFilter</a>)<span class="r65 r">getRule3</span>.<a href="/Azure.Messaging.ServiceBus/A.html#efcad7bd2f2b7417" class="i property">Filter</a>).<a href="/Azure.Messaging.ServiceBus/A.html#5a5178c9e33d7c2a" class="i property">CorrelationId</a> = <span class="s">&quot;correlationIdModified&quot;</span>;
            <a href="/Azure.Messaging.ServiceBus/A.html#e56c1e71370bb3d4" class="t t">SubscriptionProperties</a> <span id="r69 rd" class="r69 r">sub</span> = <b>await</b> <span class="r57 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#4077a0bee6144052" class="i method">GetSubscriptionAsync</a>(<span class="r55 r">topicName</span>, <span class="r56 r">subscriptionName</span>);
            <a href="/Azure.Messaging.ServiceBus/A.html#b23c8647941f6cd1" class="t t">RuleProperties</a> <span id="r70 rd" class="r70 r">updatedRule3</span> = <b>await</b> <span class="r57 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#12451defe628577c" class="i method">UpdateRuleAsync</a>(<span class="r55 r">topicName</span>, <span class="r56 r">subscriptionName</span>, <span class="r65 r">getRule3</span>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r65 r">getRule3</span>, <span class="r70 r">updatedRule3</span>);
 
            <b>bool</b> <span id="r71 rd" class="r71 r">exists</span> = <b>await</b> <span class="r57 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#1fe5e2bd660101ee" class="i method">RuleExistsAsync</a>(<span class="r55 r">topicName</span>, <span class="r56 r">subscriptionName</span>, <span class="r58 r">rule1</span>.<a href="/Azure.Messaging.ServiceBus/A.html#783b0b500367593a" class="i property">Name</a>);
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r71 r">exists</span>);
 
            <b>await</b> <span class="r57 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#5bf6cb0ec5c4de46" class="i method">DeleteRuleAsync</a>(<span class="r55 r">topicName</span>, <span class="r56 r">subscriptionName</span>, <span class="s">&quot;rule1&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(
                  <b>async</b> () =&gt;
                  <b>await</b> <span class="r57 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#fd1684a06927f08d" class="i method">GetRuleAsync</a>(<span class="r55 r">topicName</span>, <span class="r56 r">subscriptionName</span>, <span class="s">&quot;rule1&quot;</span>),
                  <span class="t t">Throws</span>.<span class="i method">InstanceOf</span>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>&gt;().<span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>.<a href="/Azure.Messaging.ServiceBus/A.html#b39014a14c98853e" class="i property">Reason</a>)).<span class="i method">EqualTo</span>(<a href="/Azure.Messaging.ServiceBus/A.html#ac3a011acdeef28e" class="t t">ServiceBusFailureReason</a>.<a href="/Azure.Messaging.ServiceBus/A.html#90caee8029a933c8" class="i field">MessagingEntityNotFound</a>));
 
            <span class="r71 r">exists</span> = <b>await</b> <span class="r57 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#1fe5e2bd660101ee" class="i method">RuleExistsAsync</a>(<span class="r55 r">topicName</span>, <span class="r56 r">subscriptionName</span>, <span class="r58 r">rule1</span>.<a href="/Azure.Messaging.ServiceBus/A.html#783b0b500367593a" class="i property">Name</a>);
            <span class="t t">Assert</span>.<span class="i method">False</span>(<span class="r71 r">exists</span>);
 
            <b>await</b> <span class="r57 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#22d770ae7b158317" class="i method">DeleteTopicAsync</a>(<span class="r55 r">topicName</span>);
        }
 
        [<span class="t constructor">Test</span>]
        [<a href="/Azure.Core.TestFramework/A.html#9ce10179a72216c9" class="t constructor">LiveOnly</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="5c7a0bdeffc78e4b" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetQueueRuntimeInfo</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r72 rd" class="r72 r">queueName</span> = <b>nameof</b>(<span class="i">GetQueueRuntimeInfo</span>).<a href="@0@mscorlib/A.html#0b5a1ee33618e0b3" class="i method">ToLower</a>() + <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
            <a href="/Azure.Messaging.ServiceBus/A.html#827d49874cba94ba" class="k">var</a> <span id="r73 rd" class="r73 r">mgmtClient</span> = <a href="#1deb5024707aa43b" class="i method">CreateClient</a>();
            <b>await using</b> <a href="/Azure.Messaging.ServiceBus/A.html#ad46ff0588c85077" class="k">var</a> <span id="r74 rd" class="r74 r">sbClient</span> = <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#ac38709c04b916cf" class="t constructor">ServiceBusClient</a>(<a href="/Azure.Core.TestFramework/A.html#9185092834304053" class="i property">TestEnvironment</a>.<a href="../Infrastructure/ServiceBusTestEnvironment.cs.html#2e255d4a6d75bc9a" class="i property">ServiceBusConnectionString</a>);
 
            <a href="/Azure.Messaging.ServiceBus/A.html#96f80aae2e1f18c8" class="t t">QueueProperties</a> <span id="r75 rd" class="r75 r">queue</span> = <b>await</b> <span class="r73 r">mgmtClient</span>.<a href="/Azure.Messaging.ServiceBus/A.html#18f73de993cc5d73" class="i method">CreateQueueAsync</a>(<span class="r72 r">queueName</span>);
            <span class="r75 r">queue</span> = <b>await</b> <span class="r73 r">mgmtClient</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7ef668a5655aa5fa" class="i method">GetQueueAsync</a>(<span class="r72 r">queueName</span>);
            <span class="c">// Changing Last Updated Time</span>
            <span class="r75 r">queue</span>.<a href="/Azure.Messaging.ServiceBus/A.html#f4bd2aeb4c1733a7" class="i property">AutoDeleteOnIdle</a> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#ae74be5264df78d8" class="i method">FromMinutes</a>(100);
            <a href="/Azure.Messaging.ServiceBus/A.html#96f80aae2e1f18c8" class="t t">QueueProperties</a> <span id="r76 rd" class="r76 r">updatedQueue</span> = <b>await</b> <span class="r73 r">mgmtClient</span>.<a href="/Azure.Messaging.ServiceBus/A.html#a0db9a47432f6b65" class="i method">UpdateQueueAsync</a>(<span class="r75 r">queue</span>);
 
            <span class="c">// Populating 1 active message, 1 dead letter message and 1 scheduled message</span>
            <span class="c">// Changing Last Accessed Time</span>
 
            <a href="/Azure.Messaging.ServiceBus/A.html#565d94b474d31465" class="t t">ServiceBusSender</a> <span id="r77 rd" class="r77 r">sender</span> = <span class="r74 r">sbClient</span>.<a href="/Azure.Messaging.ServiceBus/A.html#a445ec86cde923d7" class="i method">CreateSender</a>(<span class="r72 r">queueName</span>);
            <b>await</b> <span class="r77 r">sender</span>.<a href="/Azure.Messaging.ServiceBus/A.html#0be5b6e30acbf9ea" class="i method">SendMessageAsync</a>(<b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#84b07caaacc5932b" class="t constructor">ServiceBusMessage</a>() { <a href="/Azure.Messaging.ServiceBus/A.html#62234b00feff0e3f" class="i property">MessageId</a> = <span class="s">&quot;1&quot;</span> });
            <b>await</b> <span class="r77 r">sender</span>.<a href="/Azure.Messaging.ServiceBus/A.html#0be5b6e30acbf9ea" class="i method">SendMessageAsync</a>(<b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#84b07caaacc5932b" class="t constructor">ServiceBusMessage</a>() { <a href="/Azure.Messaging.ServiceBus/A.html#62234b00feff0e3f" class="i property">MessageId</a> = <span class="s">&quot;2&quot;</span> });
            <b>await</b> <span class="r77 r">sender</span>.<a href="/Azure.Messaging.ServiceBus/A.html#0be5b6e30acbf9ea" class="i method">SendMessageAsync</a>(<b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#84b07caaacc5932b" class="t constructor">ServiceBusMessage</a>() { <a href="/Azure.Messaging.ServiceBus/A.html#62234b00feff0e3f" class="i property">MessageId</a> = <span class="s">&quot;3&quot;</span>, <a href="/Azure.Messaging.ServiceBus/A.html#d2408da419959fb8" class="i property">ScheduledEnqueueTime</a> = <a href="@0@mscorlib/A.html#df6b1eba7461813b" class="t t">DateTime</a>.<a href="@0@mscorlib/A.html#b0d5e4c9a8d4ddac" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f5cb6edd98581ca2" class="i method">AddDays</a>(1) });
 
            <a href="/Azure.Messaging.ServiceBus/A.html#2224f17dabcb26c3" class="t t">ServiceBusReceiver</a> <span id="r78 rd" class="r78 r">receiver</span> = <span class="r74 r">sbClient</span>.<a href="/Azure.Messaging.ServiceBus/A.html#201800c085187d08" class="i method">CreateReceiver</a>(<span class="r72 r">queueName</span>);
            <a href="/Azure.Messaging.ServiceBus/A.html#347e87fb652ef164" class="t t">ServiceBusReceivedMessage</a> <span id="r79 rd" class="r79 r">msg</span> = <b>await</b> <span class="r78 r">receiver</span>.<a href="/Azure.Messaging.ServiceBus/A.html#c59a6150722beca5" class="i method">ReceiveMessageAsync</a>();
            <b>await</b> <span class="r78 r">receiver</span>.<a href="/Azure.Messaging.ServiceBus/A.html#2d65a06b6ff02cfe" class="i method">DeadLetterMessageAsync</a>(<span class="r79 r">msg</span>);
 
            <a href="@0@mscorlib/A.html#cf7f4095e4de7646" class="t t">List</a>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#8089c73e74c555f1" class="t t">QueueRuntimeProperties</a>&gt; <span id="r80 rd" class="r80 r">runtimeInfoList</span> = <b>new</b> <a href="@0@mscorlib/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#8089c73e74c555f1" class="t t">QueueRuntimeProperties</a>&gt;();
            <b>await</b> <b>foreach</b> (<a href="/Azure.Messaging.ServiceBus/A.html#8089c73e74c555f1" class="t t">QueueRuntimeProperties</a> <span id="r81 rd" class="r81 r">queueRuntimeInfo</span> <b>in</b> <span class="r73 r">mgmtClient</span>.<a href="/Azure.Messaging.ServiceBus/A.html#6bb9f5d342cb0ce0" class="i method">GetQueuesRuntimePropertiesAsync</a>())
            {
                <span class="r80 r">runtimeInfoList</span>.<a href="@0@mscorlib/A.html#9cc11588bffd57c1" class="i method">Add</a>(<span class="r81 r">queueRuntimeInfo</span>);
            }
            <span class="r80 r">runtimeInfoList</span> = <span class="r80 r">runtimeInfoList</span>.<a href="@0@System.Core/A.html#e73922753675387a" class="i method">Where</a>(<span id="r82 rd" class="r82 r">e</span> =&gt; <span class="r82 r">e</span>.<a href="/Azure.Messaging.ServiceBus/A.html#33d878e33397ac12" class="i property">Name</a>.<a href="@0@mscorlib/A.html#23804789ea4c9c0e" class="i method">StartsWith</a>(<b>nameof</b>(<span class="i">GetQueueRuntimeInfo</span>).<a href="@0@mscorlib/A.html#0b5a1ee33618e0b3" class="i method">ToLower</a>())).<a href="@0@System.Core/A.html#e276d6892241255b" class="i method">ToList</a>();
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r80 r">runtimeInfoList</span>.<a href="@0@mscorlib/A.html#78a69d857716bc68" class="i property">Count</a> == 1, <span class="s">$&quot;</span><span class="s">Expected 1 queue but </span>{<span class="r80 r">runtimeInfoList</span>.<a href="@0@mscorlib/A.html#78a69d857716bc68" class="i property">Count</a>}<span class="s"> queues returned</span><span class="s">&quot;</span>);
            <a href="/Azure.Messaging.ServiceBus/A.html#8089c73e74c555f1" class="t t">QueueRuntimeProperties</a> <span id="r83 rd" class="r83 r">runtimeInfo</span> = <span class="r80 r">runtimeInfoList</span>.<a href="@0@System.Core/A.html#bc8ae402a61dd9d6" class="i method">First</a>();
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r83 r">runtimeInfo</span>);
 
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r72 r">queueName</span>, <span class="r83 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#33d878e33397ac12" class="i property">Name</a>);
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r83 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#a0b6b87249c313df" class="i property">CreatedAt</a> &lt; <span class="r83 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#899852e453932974" class="i property">UpdatedAt</a>);
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r83 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#899852e453932974" class="i property">UpdatedAt</a> &lt; <span class="r83 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#b1e8f503efa7f71e" class="i property">AccessedAt</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(1, <span class="r83 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#6a5a1b29d15beca2" class="i property">ActiveMessageCount</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(1, <span class="r83 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#fb31ed209127805c" class="i property">DeadLetterMessageCount</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(1, <span class="r83 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#c0d33e25fc955042" class="i property">ScheduledMessageCount</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(3, <span class="r83 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#c9803a314d3653bb" class="i property">TotalMessageCount</a>);
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r83 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#b4cf7471bdf9f4fb" class="i property">SizeInBytes</a> &gt; 0);
 
            <a href="/Azure.Messaging.ServiceBus/A.html#8089c73e74c555f1" class="t t">QueueRuntimeProperties</a> <span id="r84 rd" class="r84 r">singleRuntimeInfo</span> = <b>await</b> <span class="r73 r">mgmtClient</span>.<a href="/Azure.Messaging.ServiceBus/A.html#14f99d06063cfd23" class="i method">GetQueueRuntimePropertiesAsync</a>(<span class="r83 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#33d878e33397ac12" class="i property">Name</a>);
 
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r83 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#b1e8f503efa7f71e" class="i property">AccessedAt</a>, <span class="r84 r">singleRuntimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#b1e8f503efa7f71e" class="i property">AccessedAt</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r83 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#a0b6b87249c313df" class="i property">CreatedAt</a>, <span class="r84 r">singleRuntimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#a0b6b87249c313df" class="i property">CreatedAt</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r83 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#899852e453932974" class="i property">UpdatedAt</a>, <span class="r84 r">singleRuntimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#899852e453932974" class="i property">UpdatedAt</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r83 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#c9803a314d3653bb" class="i property">TotalMessageCount</a>, <span class="r84 r">singleRuntimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#c9803a314d3653bb" class="i property">TotalMessageCount</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r83 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#6a5a1b29d15beca2" class="i property">ActiveMessageCount</a>, <span class="r84 r">singleRuntimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#6a5a1b29d15beca2" class="i property">ActiveMessageCount</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r83 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#fb31ed209127805c" class="i property">DeadLetterMessageCount</a>, <span class="r84 r">singleRuntimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#fb31ed209127805c" class="i property">DeadLetterMessageCount</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r83 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#c0d33e25fc955042" class="i property">ScheduledMessageCount</a>, <span class="r84 r">singleRuntimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#c0d33e25fc955042" class="i property">ScheduledMessageCount</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r83 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#b4cf7471bdf9f4fb" class="i property">SizeInBytes</a>, <span class="r84 r">singleRuntimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#b4cf7471bdf9f4fb" class="i property">SizeInBytes</a>);
 
            <b>await</b> <span class="r73 r">mgmtClient</span>.<a href="/Azure.Messaging.ServiceBus/A.html#aa79dd9ee3fb68cc" class="i method">DeleteQueueAsync</a>(<span class="r72 r">queueName</span>);
        }
 
        [<span class="t constructor">Test</span>]
        [<a href="/Azure.Core.TestFramework/A.html#9ce10179a72216c9" class="t constructor">LiveOnly</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="9edbf12752b11848" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetSubscriptionRuntimeInfoTest</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r85 rd" class="r85 r">topicName</span> = <b>nameof</b>(<span class="i">GetSubscriptionRuntimeInfoTest</span>).<a href="@0@mscorlib/A.html#0b5a1ee33618e0b3" class="i method">ToLower</a>() + <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r86 rd" class="r86 r">subscriptionName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
            <a href="/Azure.Messaging.ServiceBus/A.html#827d49874cba94ba" class="k">var</a> <span id="r87 rd" class="r87 r">client</span> = <a href="#1deb5024707aa43b" class="i method">CreateClient</a>();
            <b>await using</b> <a href="/Azure.Messaging.ServiceBus/A.html#ad46ff0588c85077" class="k">var</a> <span id="r88 rd" class="r88 r">sbClient</span> = <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#ac38709c04b916cf" class="t constructor">ServiceBusClient</a>(<a href="/Azure.Core.TestFramework/A.html#9185092834304053" class="i property">TestEnvironment</a>.<a href="../Infrastructure/ServiceBusTestEnvironment.cs.html#2e255d4a6d75bc9a" class="i property">ServiceBusConnectionString</a>);
 
            <b>await</b> <span class="r87 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#e566ecd8704fae45" class="i method">CreateTopicAsync</a>(<span class="r85 r">topicName</span>);
 
            <a href="/Azure.Messaging.ServiceBus/A.html#5f455b5c63b17daf" class="t t">TopicProperties</a> <span id="r89 rd" class="r89 r">getTopic</span> = <b>await</b> <span class="r87 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#5f2a934089e15cda" class="i method">GetTopicAsync</a>(<span class="r85 r">topicName</span>);
 
            <span class="c">// Changing Last Updated Time</span>
            <span class="r89 r">getTopic</span>.<a href="/Azure.Messaging.ServiceBus/A.html#d33b8ec710b4ead7" class="i property">AutoDeleteOnIdle</a> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#ae74be5264df78d8" class="i method">FromMinutes</a>(100);
            <b>await</b> <span class="r87 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#81a63608fd179315" class="i method">UpdateTopicAsync</a>(<span class="r89 r">getTopic</span>);
 
            <a href="/Azure.Messaging.ServiceBus/A.html#e56c1e71370bb3d4" class="t t">SubscriptionProperties</a> <span id="r90 rd" class="r90 r">subscriptionDescription</span> = <b>await</b> <span class="r87 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#2dc02e2989d011e4" class="i method">CreateSubscriptionAsync</a>(<span class="r85 r">topicName</span>, <span class="r86 r">subscriptionName</span>);
 
            <span class="c">// Changing Last Updated Time for subscription</span>
            <span class="r90 r">subscriptionDescription</span>.<a href="/Azure.Messaging.ServiceBus/A.html#629880ea6c01462a" class="i property">AutoDeleteOnIdle</a> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#ae74be5264df78d8" class="i method">FromMinutes</a>(100);
            <b>await</b> <span class="r87 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#af2e258377fa417c" class="i method">UpdateSubscriptionAsync</a>(<span class="r90 r">subscriptionDescription</span>);
 
            <span class="c">// Populating 1 active message, 1 dead letter message and 1 scheduled message</span>
            <span class="c">// Changing Last Accessed Time</span>
 
            <a href="/Azure.Messaging.ServiceBus/A.html#565d94b474d31465" class="t t">ServiceBusSender</a> <span id="r91 rd" class="r91 r">sender</span> = <span class="r88 r">sbClient</span>.<a href="/Azure.Messaging.ServiceBus/A.html#a445ec86cde923d7" class="i method">CreateSender</a>(<span class="r85 r">topicName</span>);
            <b>await</b> <span class="r91 r">sender</span>.<a href="/Azure.Messaging.ServiceBus/A.html#0be5b6e30acbf9ea" class="i method">SendMessageAsync</a>(<b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#84b07caaacc5932b" class="t constructor">ServiceBusMessage</a>() { <a href="/Azure.Messaging.ServiceBus/A.html#62234b00feff0e3f" class="i property">MessageId</a> = <span class="s">&quot;1&quot;</span> });
            <b>await</b> <span class="r91 r">sender</span>.<a href="/Azure.Messaging.ServiceBus/A.html#0be5b6e30acbf9ea" class="i method">SendMessageAsync</a>(<b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#84b07caaacc5932b" class="t constructor">ServiceBusMessage</a>() { <a href="/Azure.Messaging.ServiceBus/A.html#62234b00feff0e3f" class="i property">MessageId</a> = <span class="s">&quot;2&quot;</span> });
            <b>await</b> <span class="r91 r">sender</span>.<a href="/Azure.Messaging.ServiceBus/A.html#0be5b6e30acbf9ea" class="i method">SendMessageAsync</a>(<b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#84b07caaacc5932b" class="t constructor">ServiceBusMessage</a>() { <a href="/Azure.Messaging.ServiceBus/A.html#62234b00feff0e3f" class="i property">MessageId</a> = <span class="s">&quot;3&quot;</span>, <a href="/Azure.Messaging.ServiceBus/A.html#d2408da419959fb8" class="i property">ScheduledEnqueueTime</a> = <a href="@0@mscorlib/A.html#df6b1eba7461813b" class="t t">DateTime</a>.<a href="@0@mscorlib/A.html#b0d5e4c9a8d4ddac" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f5cb6edd98581ca2" class="i method">AddDays</a>(1) });
 
            <a href="/Azure.Messaging.ServiceBus/A.html#2224f17dabcb26c3" class="t t">ServiceBusReceiver</a> <span id="r92 rd" class="r92 r">receiver</span> = <span class="r88 r">sbClient</span>.<a href="/Azure.Messaging.ServiceBus/A.html#1cdff868d773efb4" class="i method">CreateReceiver</a>(<span class="r85 r">topicName</span>, <span class="r86 r">subscriptionName</span>);
            <a href="/Azure.Messaging.ServiceBus/A.html#347e87fb652ef164" class="t t">ServiceBusReceivedMessage</a> <span id="r93 rd" class="r93 r">msg</span> = <b>await</b> <span class="r92 r">receiver</span>.<a href="/Azure.Messaging.ServiceBus/A.html#c59a6150722beca5" class="i method">ReceiveMessageAsync</a>();
            <b>await</b> <span class="r92 r">receiver</span>.<a href="/Azure.Messaging.ServiceBus/A.html#2d65a06b6ff02cfe" class="i method">DeadLetterMessageAsync</a>(<span class="r93 r">msg</span>);
 
            <a href="@0@mscorlib/A.html#cf7f4095e4de7646" class="t t">List</a>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#7a22e9e9316df79d" class="t t">SubscriptionRuntimeProperties</a>&gt; <span id="r94 rd" class="r94 r">runtimeInfoList</span> = <b>new</b> <a href="@0@mscorlib/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#7a22e9e9316df79d" class="t t">SubscriptionRuntimeProperties</a>&gt;();
            <b>await</b> <b>foreach</b> (<a href="/Azure.Messaging.ServiceBus/A.html#7a22e9e9316df79d" class="t t">SubscriptionRuntimeProperties</a> <span id="r95 rd" class="r95 r">subscriptionRuntimeInfo</span> <b>in</b> <span class="r87 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#e559d9ef7a711b40" class="i method">GetSubscriptionsRuntimePropertiesAsync</a>(<span class="r85 r">topicName</span>))
            {
                <span class="r94 r">runtimeInfoList</span>.<a href="@0@mscorlib/A.html#9cc11588bffd57c1" class="i method">Add</a>(<span class="r95 r">subscriptionRuntimeInfo</span>);
            }
            <span class="r94 r">runtimeInfoList</span> = <span class="r94 r">runtimeInfoList</span>.<a href="@0@System.Core/A.html#e73922753675387a" class="i method">Where</a>(<span id="r96 rd" class="r96 r">e</span> =&gt; <span class="r96 r">e</span>.<a href="/Azure.Messaging.ServiceBus/A.html#b71de2f5f30b9074" class="i property">TopicName</a>.<a href="@0@mscorlib/A.html#23804789ea4c9c0e" class="i method">StartsWith</a>(<b>nameof</b>(<span class="i">GetSubscriptionRuntimeInfoTest</span>).<a href="@0@mscorlib/A.html#0b5a1ee33618e0b3" class="i method">ToLower</a>())).<a href="@0@System.Core/A.html#e276d6892241255b" class="i method">ToList</a>();
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r94 r">runtimeInfoList</span>.<a href="@0@mscorlib/A.html#78a69d857716bc68" class="i property">Count</a> == 1, <span class="s">$&quot;</span><span class="s">Expected 1 subscription but </span>{<span class="r94 r">runtimeInfoList</span>.<a href="@0@mscorlib/A.html#78a69d857716bc68" class="i property">Count</a>}<span class="s"> subscriptions returned</span><span class="s">&quot;</span>);
            <a href="/Azure.Messaging.ServiceBus/A.html#7a22e9e9316df79d" class="t t">SubscriptionRuntimeProperties</a> <span id="r97 rd" class="r97 r">runtimeInfo</span> = <span class="r94 r">runtimeInfoList</span>.<a href="@0@System.Core/A.html#bc8ae402a61dd9d6" class="i method">First</a>();
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r97 r">runtimeInfo</span>);
 
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r85 r">topicName</span>, <span class="r97 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#b71de2f5f30b9074" class="i property">TopicName</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r86 r">subscriptionName</span>, <span class="r97 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#61db23a6e361759e" class="i property">SubscriptionName</a>);
 
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r97 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#88871c6b586937ed" class="i property">CreatedAt</a> &lt; <span class="r97 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7bf17d748b5cd695" class="i property">UpdatedAt</a>);
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r97 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7bf17d748b5cd695" class="i property">UpdatedAt</a> &lt; <span class="r97 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#e5b8f815e075902c" class="i property">AccessedAt</a>);
 
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(1, <span class="r97 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#d14595f3f8f3e606" class="i property">ActiveMessageCount</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(1, <span class="r97 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#a184d22500b4b3a8" class="i property">DeadLetterMessageCount</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(2, <span class="r97 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#d2dc42d8832ae5c6" class="i property">TotalMessageCount</a>);
 
            <a href="/Azure.Messaging.ServiceBus/A.html#7a22e9e9316df79d" class="t t">SubscriptionRuntimeProperties</a> <span id="r98 rd" class="r98 r">singleRuntimeInfo</span> = <b>await</b> <span class="r87 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#ad3d146f18772039" class="i method">GetSubscriptionRuntimePropertiesAsync</a>(<span class="r85 r">topicName</span>, <span class="r86 r">subscriptionName</span>);
 
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r97 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#88871c6b586937ed" class="i property">CreatedAt</a>, <span class="r98 r">singleRuntimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#88871c6b586937ed" class="i property">CreatedAt</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r97 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#e5b8f815e075902c" class="i property">AccessedAt</a>, <span class="r98 r">singleRuntimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#e5b8f815e075902c" class="i property">AccessedAt</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r97 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7bf17d748b5cd695" class="i property">UpdatedAt</a>, <span class="r98 r">singleRuntimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7bf17d748b5cd695" class="i property">UpdatedAt</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r97 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#61db23a6e361759e" class="i property">SubscriptionName</a>, <span class="r98 r">singleRuntimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#61db23a6e361759e" class="i property">SubscriptionName</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r97 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#d2dc42d8832ae5c6" class="i property">TotalMessageCount</a>, <span class="r98 r">singleRuntimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#d2dc42d8832ae5c6" class="i property">TotalMessageCount</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r97 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#d14595f3f8f3e606" class="i property">ActiveMessageCount</a>, <span class="r98 r">singleRuntimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#d14595f3f8f3e606" class="i property">ActiveMessageCount</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r97 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#a184d22500b4b3a8" class="i property">DeadLetterMessageCount</a>, <span class="r98 r">singleRuntimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#a184d22500b4b3a8" class="i property">DeadLetterMessageCount</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r97 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#b71de2f5f30b9074" class="i property">TopicName</a>, <span class="r98 r">singleRuntimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#b71de2f5f30b9074" class="i property">TopicName</a>);
 
            <a href="@0@mscorlib/A.html#cf7f4095e4de7646" class="t t">List</a>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#a879aa5f5978680d" class="t t">TopicRuntimeProperties</a>&gt; <span id="r99 rd" class="r99 r">topicRuntimePropertiesList</span> = <b>new</b> <a href="@0@mscorlib/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#a879aa5f5978680d" class="t t">TopicRuntimeProperties</a>&gt;();
            <b>await</b> <b>foreach</b> (<a href="/Azure.Messaging.ServiceBus/A.html#a879aa5f5978680d" class="t t">TopicRuntimeProperties</a> <span id="r100 rd" class="r100 r">topicRuntime</span> <b>in</b> <span class="r87 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#5a11272207496618" class="i method">GetTopicsRuntimePropertiesAsync</a>())
            {
                <span class="r99 r">topicRuntimePropertiesList</span>.<a href="@0@mscorlib/A.html#9cc11588bffd57c1" class="i method">Add</a>(<span class="r100 r">topicRuntime</span>);
            }
            <span class="r99 r">topicRuntimePropertiesList</span> = <span class="r99 r">topicRuntimePropertiesList</span>.<a href="@0@System.Core/A.html#e73922753675387a" class="i method">Where</a>(<span id="r101 rd" class="r101 r">e</span> =&gt; <span class="r101 r">e</span>.<a href="/Azure.Messaging.ServiceBus/A.html#819c7f98c6154ae0" class="i property">Name</a>.<a href="@0@mscorlib/A.html#23804789ea4c9c0e" class="i method">StartsWith</a>(<b>nameof</b>(<span class="i">GetSubscriptionRuntimeInfoTest</span>).<a href="@0@mscorlib/A.html#0b5a1ee33618e0b3" class="i method">ToLower</a>())).<a href="@0@System.Core/A.html#e276d6892241255b" class="i method">ToList</a>();
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r99 r">topicRuntimePropertiesList</span>.<a href="@0@mscorlib/A.html#78a69d857716bc68" class="i property">Count</a> == 1, <span class="s">$&quot;</span><span class="s">Expected 1 subscription but </span>{<span class="r99 r">topicRuntimePropertiesList</span>.<a href="@0@mscorlib/A.html#78a69d857716bc68" class="i property">Count</a>}<span class="s"> subscriptions returned</span><span class="s">&quot;</span>);
            <a href="/Azure.Messaging.ServiceBus/A.html#a879aa5f5978680d" class="t t">TopicRuntimeProperties</a> <span id="r102 rd" class="r102 r">topicRuntimeProperties</span> = <span class="r99 r">topicRuntimePropertiesList</span>.<a href="@0@System.Core/A.html#bc8ae402a61dd9d6" class="i method">First</a>();
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r102 r">topicRuntimeProperties</span>);
 
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r85 r">topicName</span>, <span class="r102 r">topicRuntimeProperties</span>.<a href="/Azure.Messaging.ServiceBus/A.html#819c7f98c6154ae0" class="i property">Name</a>);
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r102 r">topicRuntimeProperties</span>.<a href="/Azure.Messaging.ServiceBus/A.html#6c92d41b8580d413" class="i property">CreatedAt</a> &lt; <span class="r102 r">topicRuntimeProperties</span>.<a href="/Azure.Messaging.ServiceBus/A.html#59f6ce605b477f23" class="i property">UpdatedAt</a>);
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r102 r">topicRuntimeProperties</span>.<a href="/Azure.Messaging.ServiceBus/A.html#59f6ce605b477f23" class="i property">UpdatedAt</a> &lt; <span class="r102 r">topicRuntimeProperties</span>.<a href="/Azure.Messaging.ServiceBus/A.html#06a1ff29913e6e4c" class="i property">AccessedAt</a>);
 
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(1, <span class="r102 r">topicRuntimeProperties</span>.<a href="/Azure.Messaging.ServiceBus/A.html#b1b0f8dc5dae746f" class="i property">ScheduledMessageCount</a>);
 
            <a href="/Azure.Messaging.ServiceBus/A.html#a879aa5f5978680d" class="t t">TopicRuntimeProperties</a> <span id="r103 rd" class="r103 r">singleTopicRuntimeProperties</span> = <b>await</b> <span class="r87 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#2306675fd964dfac" class="i method">GetTopicRuntimePropertiesAsync</a>(<span class="r85 r">topicName</span>);
 
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r102 r">topicRuntimeProperties</span>.<a href="/Azure.Messaging.ServiceBus/A.html#6c92d41b8580d413" class="i property">CreatedAt</a>, <span class="r103 r">singleTopicRuntimeProperties</span>.<a href="/Azure.Messaging.ServiceBus/A.html#6c92d41b8580d413" class="i property">CreatedAt</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r102 r">topicRuntimeProperties</span>.<a href="/Azure.Messaging.ServiceBus/A.html#06a1ff29913e6e4c" class="i property">AccessedAt</a>, <span class="r103 r">singleTopicRuntimeProperties</span>.<a href="/Azure.Messaging.ServiceBus/A.html#06a1ff29913e6e4c" class="i property">AccessedAt</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r102 r">topicRuntimeProperties</span>.<a href="/Azure.Messaging.ServiceBus/A.html#59f6ce605b477f23" class="i property">UpdatedAt</a>, <span class="r103 r">singleTopicRuntimeProperties</span>.<a href="/Azure.Messaging.ServiceBus/A.html#59f6ce605b477f23" class="i property">UpdatedAt</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r102 r">topicRuntimeProperties</span>.<a href="/Azure.Messaging.ServiceBus/A.html#b1b0f8dc5dae746f" class="i property">ScheduledMessageCount</a>, <span class="r103 r">singleTopicRuntimeProperties</span>.<a href="/Azure.Messaging.ServiceBus/A.html#b1b0f8dc5dae746f" class="i property">ScheduledMessageCount</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r102 r">topicRuntimeProperties</span>.<a href="/Azure.Messaging.ServiceBus/A.html#819c7f98c6154ae0" class="i property">Name</a>, <span class="r103 r">singleTopicRuntimeProperties</span>.<a href="/Azure.Messaging.ServiceBus/A.html#819c7f98c6154ae0" class="i property">Name</a>);
 
            <b>await</b> <span class="r87 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#22d770ae7b158317" class="i method">DeleteTopicAsync</a>(<span class="r85 r">topicName</span>);
        }
 
        [<span class="t constructor">Test</span>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="6ffcc28cd4c48ba1" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetTopicRuntimeInfo</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r104 rd" class="r104 r">topicName</span> = <b>nameof</b>(<span class="i">GetTopicRuntimeInfo</span>).<a href="@0@mscorlib/A.html#0b5a1ee33618e0b3" class="i method">ToLower</a>() + <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r105 rd" class="r105 r">subscriptionName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
            <a href="/Azure.Messaging.ServiceBus/A.html#827d49874cba94ba" class="k">var</a> <span id="r106 rd" class="r106 r">client</span> = <a href="#1deb5024707aa43b" class="i method">CreateClient</a>();
 
            <b>await</b> <span class="r106 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#e566ecd8704fae45" class="i method">CreateTopicAsync</a>(<span class="r104 r">topicName</span>);
 
            <a href="/Azure.Messaging.ServiceBus/A.html#5f455b5c63b17daf" class="t t">TopicProperties</a> <span id="r107 rd" class="r107 r">getTopic</span> = <b>await</b> <span class="r106 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#5f2a934089e15cda" class="i method">GetTopicAsync</a>(<span class="r104 r">topicName</span>);
 
            <span class="c">// Changing Last Updated Time</span>
            <span class="r107 r">getTopic</span>.<a href="/Azure.Messaging.ServiceBus/A.html#d33b8ec710b4ead7" class="i property">AutoDeleteOnIdle</a> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#ae74be5264df78d8" class="i method">FromMinutes</a>(100);
            <b>await</b> <span class="r106 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#81a63608fd179315" class="i method">UpdateTopicAsync</a>(<span class="r107 r">getTopic</span>);
 
            <b>await</b> <span class="r106 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#2dc02e2989d011e4" class="i method">CreateSubscriptionAsync</a>(<span class="r104 r">topicName</span>, <span class="r105 r">subscriptionName</span>);
 
            <a href="@0@mscorlib/A.html#cf7f4095e4de7646" class="t t">List</a>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#a879aa5f5978680d" class="t t">TopicRuntimeProperties</a>&gt; <span id="r108 rd" class="r108 r">runtimeInfoList</span> = <b>new</b> <a href="@0@mscorlib/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#a879aa5f5978680d" class="t t">TopicRuntimeProperties</a>&gt;();
            <b>await</b> <b>foreach</b> (<a href="/Azure.Messaging.ServiceBus/A.html#a879aa5f5978680d" class="t t">TopicRuntimeProperties</a> <span id="r109 rd" class="r109 r">topicRuntimeInfo</span> <b>in</b> <span class="r106 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#5a11272207496618" class="i method">GetTopicsRuntimePropertiesAsync</a>())
            {
                <span class="r108 r">runtimeInfoList</span>.<a href="@0@mscorlib/A.html#9cc11588bffd57c1" class="i method">Add</a>(<span class="r109 r">topicRuntimeInfo</span>);
            }
            <span class="r108 r">runtimeInfoList</span> = <span class="r108 r">runtimeInfoList</span>.<a href="@0@System.Core/A.html#e73922753675387a" class="i method">Where</a>(<span id="r110 rd" class="r110 r">e</span> =&gt; <span class="r110 r">e</span>.<a href="/Azure.Messaging.ServiceBus/A.html#819c7f98c6154ae0" class="i property">Name</a>.<a href="@0@mscorlib/A.html#23804789ea4c9c0e" class="i method">StartsWith</a>(<b>nameof</b>(<span class="i">GetTopicRuntimeInfo</span>).<a href="@0@mscorlib/A.html#0b5a1ee33618e0b3" class="i method">ToLower</a>())).<a href="@0@System.Core/A.html#e276d6892241255b" class="i method">ToList</a>();
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r108 r">runtimeInfoList</span>.<a href="@0@mscorlib/A.html#78a69d857716bc68" class="i property">Count</a> == 1, <span class="s">$&quot;</span><span class="s">Expected 1 topic but </span>{<span class="r108 r">runtimeInfoList</span>.<a href="@0@mscorlib/A.html#78a69d857716bc68" class="i property">Count</a>}<span class="s"> topics returned</span><span class="s">&quot;</span>);
            <a href="/Azure.Messaging.ServiceBus/A.html#a879aa5f5978680d" class="t t">TopicRuntimeProperties</a> <span id="r111 rd" class="r111 r">runtimeInfo</span> = <span class="r108 r">runtimeInfoList</span>.<a href="@0@System.Core/A.html#bc8ae402a61dd9d6" class="i method">First</a>();
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r111 r">runtimeInfo</span>);
 
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r104 r">topicName</span>, <span class="r111 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#819c7f98c6154ae0" class="i property">Name</a>);
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r111 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#6c92d41b8580d413" class="i property">CreatedAt</a> &lt; <span class="r111 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#59f6ce605b477f23" class="i property">UpdatedAt</a>);
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r111 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#59f6ce605b477f23" class="i property">UpdatedAt</a> &lt; <span class="r111 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#06a1ff29913e6e4c" class="i property">AccessedAt</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(1, <span class="r111 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#a2a62f318d3004e0" class="i property">SubscriptionCount</a>);
 
            <a href="/Azure.Messaging.ServiceBus/A.html#a879aa5f5978680d" class="t t">TopicRuntimeProperties</a> <span id="r112 rd" class="r112 r">singleTopicRI</span> = <b>await</b> <span class="r106 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#2306675fd964dfac" class="i method">GetTopicRuntimePropertiesAsync</a>(<span class="r111 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#819c7f98c6154ae0" class="i property">Name</a>);
 
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r111 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#06a1ff29913e6e4c" class="i property">AccessedAt</a>, <span class="r112 r">singleTopicRI</span>.<a href="/Azure.Messaging.ServiceBus/A.html#06a1ff29913e6e4c" class="i property">AccessedAt</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r111 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#6c92d41b8580d413" class="i property">CreatedAt</a>, <span class="r112 r">singleTopicRI</span>.<a href="/Azure.Messaging.ServiceBus/A.html#6c92d41b8580d413" class="i property">CreatedAt</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r111 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#59f6ce605b477f23" class="i property">UpdatedAt</a>, <span class="r112 r">singleTopicRI</span>.<a href="/Azure.Messaging.ServiceBus/A.html#59f6ce605b477f23" class="i property">UpdatedAt</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r111 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#5908eb57ee5790e1" class="i property">SizeInBytes</a>, <span class="r112 r">singleTopicRI</span>.<a href="/Azure.Messaging.ServiceBus/A.html#5908eb57ee5790e1" class="i property">SizeInBytes</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r111 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#a2a62f318d3004e0" class="i property">SubscriptionCount</a>, <span class="r112 r">singleTopicRI</span>.<a href="/Azure.Messaging.ServiceBus/A.html#a2a62f318d3004e0" class="i property">SubscriptionCount</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r111 r">runtimeInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#b1b0f8dc5dae746f" class="i property">ScheduledMessageCount</a>, <span class="r112 r">singleTopicRI</span>.<a href="/Azure.Messaging.ServiceBus/A.html#b1b0f8dc5dae746f" class="i property">ScheduledMessageCount</a>);
 
            <b>await</b> <span class="r106 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#22d770ae7b158317" class="i method">DeleteTopicAsync</a>(<span class="r104 r">topicName</span>);
        }
 
        [<span class="t constructor">Test</span>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="9d714e293efdcbad" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ThrowsIfEntityDoesNotExist</a>()
        {
            <a href="/Azure.Messaging.ServiceBus/A.html#827d49874cba94ba" class="k">var</a> <span id="r113 rd" class="r113 r">client</span> = <a href="#1deb5024707aa43b" class="i method">CreateClient</a>();
 
            <span class="t t">Assert</span>.<span class="i method">That</span>(
                <b>async</b> () =&gt;
                <b>await</b> <span class="r113 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7ef668a5655aa5fa" class="i method">GetQueueAsync</a>(<span class="s">&quot;NonExistingPath&quot;</span>),
                <span class="t t">Throws</span>.<span class="i method">InstanceOf</span>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>&gt;().<span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>.<a href="/Azure.Messaging.ServiceBus/A.html#b39014a14c98853e" class="i property">Reason</a>)).<span class="i method">EqualTo</span>(<a href="/Azure.Messaging.ServiceBus/A.html#ac3a011acdeef28e" class="t t">ServiceBusFailureReason</a>.<a href="/Azure.Messaging.ServiceBus/A.html#90caee8029a933c8" class="i field">MessagingEntityNotFound</a>).
                    <span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a>.<a href="@0@mscorlib/A.html#89c20b39fb04108b" class="i property">InnerException</a>)).<span class="i method">InstanceOf</span>(<b>typeof</b>(<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>)));
 
            <span class="t t">Assert</span>.<span class="i method">That</span>(
                <b>async</b> () =&gt;
                <b>await</b> <span class="r113 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7ef668a5655aa5fa" class="i method">GetQueueAsync</a>(<span class="s">&quot;NonExistingTopic&quot;</span>),
                <span class="t t">Throws</span>.<span class="i method">InstanceOf</span>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>&gt;().<span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>.<a href="/Azure.Messaging.ServiceBus/A.html#b39014a14c98853e" class="i property">Reason</a>)).<span class="i method">EqualTo</span>(<a href="/Azure.Messaging.ServiceBus/A.html#ac3a011acdeef28e" class="t t">ServiceBusFailureReason</a>.<a href="/Azure.Messaging.ServiceBus/A.html#90caee8029a933c8" class="i field">MessagingEntityNotFound</a>).
                    <span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a>.<a href="@0@mscorlib/A.html#89c20b39fb04108b" class="i property">InnerException</a>)).<span class="i method">InstanceOf</span>(<b>typeof</b>(<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>)));
 
            <span class="t t">Assert</span>.<span class="i method">That</span>(
                <b>async</b> () =&gt;
                <b>await</b> <span class="r113 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#4077a0bee6144052" class="i method">GetSubscriptionAsync</a>(<span class="s">&quot;NonExistingTopic&quot;</span>, <span class="s">&quot;NonExistingPath&quot;</span>),
                <span class="t t">Throws</span>.<span class="i method">InstanceOf</span>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>&gt;().<span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>.<a href="/Azure.Messaging.ServiceBus/A.html#b39014a14c98853e" class="i property">Reason</a>)).<span class="i method">EqualTo</span>(<a href="/Azure.Messaging.ServiceBus/A.html#ac3a011acdeef28e" class="t t">ServiceBusFailureReason</a>.<a href="/Azure.Messaging.ServiceBus/A.html#90caee8029a933c8" class="i field">MessagingEntityNotFound</a>).
                    <span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a>.<a href="@0@mscorlib/A.html#89c20b39fb04108b" class="i property">InnerException</a>)).<span class="i method">InstanceOf</span>(<b>typeof</b>(<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>)));
 
            <span class="t t">Assert</span>.<span class="i method">That</span>(
                  <b>async</b> () =&gt;
                  <b>await</b> <span class="r113 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#a0db9a47432f6b65" class="i method">UpdateQueueAsync</a>(<b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#4716563216184b67" class="t constructor">QueueProperties</a>(<span class="s">&quot;NonExistingPath&quot;</span>)),
                  <span class="t t">Throws</span>.<span class="i method">InstanceOf</span>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>&gt;().<span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>.<a href="/Azure.Messaging.ServiceBus/A.html#b39014a14c98853e" class="i property">Reason</a>)).<span class="i method">EqualTo</span>(<a href="/Azure.Messaging.ServiceBus/A.html#ac3a011acdeef28e" class="t t">ServiceBusFailureReason</a>.<a href="/Azure.Messaging.ServiceBus/A.html#90caee8029a933c8" class="i field">MessagingEntityNotFound</a>).
                    <span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a>.<a href="@0@mscorlib/A.html#89c20b39fb04108b" class="i property">InnerException</a>)).<span class="i method">InstanceOf</span>(<b>typeof</b>(<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>)));
 
            <span class="t t">Assert</span>.<span class="i method">That</span>(
                <b>async</b> () =&gt;
                <b>await</b> <span class="r113 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#81a63608fd179315" class="i method">UpdateTopicAsync</a>(<b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#8bd3913457db4829" class="t constructor">TopicProperties</a>(<span class="s">&quot;NonExistingPath&quot;</span>)),
                <span class="t t">Throws</span>.<span class="i method">InstanceOf</span>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>&gt;().<span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>.<a href="/Azure.Messaging.ServiceBus/A.html#b39014a14c98853e" class="i property">Reason</a>)).<span class="i method">EqualTo</span>(<a href="/Azure.Messaging.ServiceBus/A.html#ac3a011acdeef28e" class="t t">ServiceBusFailureReason</a>.<a href="/Azure.Messaging.ServiceBus/A.html#90caee8029a933c8" class="i field">MessagingEntityNotFound</a>).
                    <span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a>.<a href="@0@mscorlib/A.html#89c20b39fb04108b" class="i property">InnerException</a>)).<span class="i method">InstanceOf</span>(<b>typeof</b>(<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>)));
 
            <span class="t t">Assert</span>.<span class="i method">That</span>(
                <b>async</b> () =&gt;
                <b>await</b> <span class="r113 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#af2e258377fa417c" class="i method">UpdateSubscriptionAsync</a>(<b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#f63e7f0ce4cd3cab" class="t constructor">SubscriptionProperties</a>(<span class="s">&quot;NonExistingTopic&quot;</span>, <span class="s">&quot;NonExistingPath&quot;</span>)),
                <span class="t t">Throws</span>.<span class="i method">InstanceOf</span>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>&gt;().<span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>.<a href="/Azure.Messaging.ServiceBus/A.html#b39014a14c98853e" class="i property">Reason</a>)).<span class="i method">EqualTo</span>(<a href="/Azure.Messaging.ServiceBus/A.html#ac3a011acdeef28e" class="t t">ServiceBusFailureReason</a>.<a href="/Azure.Messaging.ServiceBus/A.html#90caee8029a933c8" class="i field">MessagingEntityNotFound</a>).
                    <span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a>.<a href="@0@mscorlib/A.html#89c20b39fb04108b" class="i property">InnerException</a>)).<span class="i method">InstanceOf</span>(<b>typeof</b>(<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>)));
 
            <span class="t t">Assert</span>.<span class="i method">That</span>(
                <b>async</b> () =&gt;
                <b>await</b> <span class="r113 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#aa79dd9ee3fb68cc" class="i method">DeleteQueueAsync</a>(<span class="s">&quot;NonExistingPath&quot;</span>),
                <span class="t t">Throws</span>.<span class="i method">InstanceOf</span>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>&gt;().<span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>.<a href="/Azure.Messaging.ServiceBus/A.html#b39014a14c98853e" class="i property">Reason</a>)).<span class="i method">EqualTo</span>(<a href="/Azure.Messaging.ServiceBus/A.html#ac3a011acdeef28e" class="t t">ServiceBusFailureReason</a>.<a href="/Azure.Messaging.ServiceBus/A.html#90caee8029a933c8" class="i field">MessagingEntityNotFound</a>).
                    <span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a>.<a href="@0@mscorlib/A.html#89c20b39fb04108b" class="i property">InnerException</a>)).<span class="i method">InstanceOf</span>(<b>typeof</b>(<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>)));
 
            <span class="t t">Assert</span>.<span class="i method">That</span>(
                  <b>async</b> () =&gt;
                  <b>await</b> <span class="r113 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#22d770ae7b158317" class="i method">DeleteTopicAsync</a>(<span class="s">&quot;NonExistingPath&quot;</span>),
                  <span class="t t">Throws</span>.<span class="i method">InstanceOf</span>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>&gt;().<span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>.<a href="/Azure.Messaging.ServiceBus/A.html#b39014a14c98853e" class="i property">Reason</a>)).<span class="i method">EqualTo</span>(<a href="/Azure.Messaging.ServiceBus/A.html#ac3a011acdeef28e" class="t t">ServiceBusFailureReason</a>.<a href="/Azure.Messaging.ServiceBus/A.html#90caee8029a933c8" class="i field">MessagingEntityNotFound</a>).
                    <span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a>.<a href="@0@mscorlib/A.html#89c20b39fb04108b" class="i property">InnerException</a>)).<span class="i method">InstanceOf</span>(<b>typeof</b>(<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>)));
 
            <span class="t t">Assert</span>.<span class="i method">That</span>(
                <b>async</b> () =&gt;
                <b>await</b> <span class="r113 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#c1f8a48543acf559" class="i method">DeleteSubscriptionAsync</a>(<span class="s">&quot;NonExistingTopic&quot;</span>, <span class="s">&quot;NonExistingPath&quot;</span>),
                <span class="t t">Throws</span>.<span class="i method">InstanceOf</span>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>&gt;().<span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>.<a href="/Azure.Messaging.ServiceBus/A.html#b39014a14c98853e" class="i property">Reason</a>)).<span class="i method">EqualTo</span>(<a href="/Azure.Messaging.ServiceBus/A.html#ac3a011acdeef28e" class="t t">ServiceBusFailureReason</a>.<a href="/Azure.Messaging.ServiceBus/A.html#90caee8029a933c8" class="i field">MessagingEntityNotFound</a>).
                    <span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a>.<a href="@0@mscorlib/A.html#89c20b39fb04108b" class="i property">InnerException</a>)).<span class="i method">InstanceOf</span>(<b>typeof</b>(<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>)));
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r114 rd" class="r114 r">queueName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r115 rd" class="r115 r">topicName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
 
            <b>await</b> <span class="r113 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#18f73de993cc5d73" class="i method">CreateQueueAsync</a>(<span class="r114 r">queueName</span>);
            <b>await</b> <span class="r113 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#e566ecd8704fae45" class="i method">CreateTopicAsync</a>(<span class="r115 r">topicName</span>);
 
            <span class="t t">Assert</span>.<span class="i method">That</span>(
                <b>async</b> () =&gt;
                <b>await</b> <span class="r113 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7ef668a5655aa5fa" class="i method">GetQueueAsync</a>(<span class="r115 r">topicName</span>),
                <span class="t t">Throws</span>.<span class="i method">InstanceOf</span>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>&gt;().<span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>.<a href="/Azure.Messaging.ServiceBus/A.html#b39014a14c98853e" class="i property">Reason</a>)).<span class="i method">EqualTo</span>(<a href="/Azure.Messaging.ServiceBus/A.html#ac3a011acdeef28e" class="t t">ServiceBusFailureReason</a>.<a href="/Azure.Messaging.ServiceBus/A.html#90caee8029a933c8" class="i field">MessagingEntityNotFound</a>).
                    <span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a>.<a href="@0@mscorlib/A.html#89c20b39fb04108b" class="i property">InnerException</a>)).<span class="i method">InstanceOf</span>(<b>typeof</b>(<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>)));
 
            <span class="t t">Assert</span>.<span class="i method">That</span>(
                <b>async</b> () =&gt;
                <b>await</b> <span class="r113 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#5f2a934089e15cda" class="i method">GetTopicAsync</a>(<span class="r114 r">queueName</span>),
                <span class="t t">Throws</span>.<span class="i method">InstanceOf</span>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>&gt;().<span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>.<a href="/Azure.Messaging.ServiceBus/A.html#b39014a14c98853e" class="i property">Reason</a>)).<span class="i method">EqualTo</span>(<a href="/Azure.Messaging.ServiceBus/A.html#ac3a011acdeef28e" class="t t">ServiceBusFailureReason</a>.<a href="/Azure.Messaging.ServiceBus/A.html#90caee8029a933c8" class="i field">MessagingEntityNotFound</a>).
                    <span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a>.<a href="@0@mscorlib/A.html#89c20b39fb04108b" class="i property">InnerException</a>)).<span class="i method">InstanceOf</span>(<b>typeof</b>(<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>)));
 
            <b>await</b> <span class="r113 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#aa79dd9ee3fb68cc" class="i method">DeleteQueueAsync</a>(<span class="r114 r">queueName</span>);
            <b>await</b> <span class="r113 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#22d770ae7b158317" class="i method">DeleteTopicAsync</a>(<span class="r115 r">topicName</span>);
        }
 
        [<span class="t constructor">Test</span>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="be5f26ad8b8f3e72" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ThrowsIfEntityAlreadyExists</a>()
        {
            <a href="/Azure.Messaging.ServiceBus/A.html#827d49874cba94ba" class="k">var</a> <span id="r116 rd" class="r116 r">client</span> = <a href="#1deb5024707aa43b" class="i method">CreateClient</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r117 rd" class="r117 r">queueName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r118 rd" class="r118 r">topicName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r119 rd" class="r119 r">subscriptionName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
 
            <b>await</b> <span class="r116 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#18f73de993cc5d73" class="i method">CreateQueueAsync</a>(<span class="r117 r">queueName</span>);
            <b>await</b> <span class="r116 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#e566ecd8704fae45" class="i method">CreateTopicAsync</a>(<span class="r118 r">topicName</span>);
            <b>await</b> <span class="r116 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#2dc02e2989d011e4" class="i method">CreateSubscriptionAsync</a>(<span class="r118 r">topicName</span>, <span class="r119 r">subscriptionName</span>);
 
            <span class="t t">Assert</span>.<span class="i method">That</span>(
                <b>async</b> () =&gt;
                <b>await</b> <span class="r116 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#18f73de993cc5d73" class="i method">CreateQueueAsync</a>(<span class="r117 r">queueName</span>),
                <span class="t t">Throws</span>.<span class="i method">InstanceOf</span>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>&gt;().<span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>.<a href="/Azure.Messaging.ServiceBus/A.html#b39014a14c98853e" class="i property">Reason</a>)).<span class="i method">EqualTo</span>(<a href="/Azure.Messaging.ServiceBus/A.html#ac3a011acdeef28e" class="t t">ServiceBusFailureReason</a>.<a href="/Azure.Messaging.ServiceBus/A.html#39a97919e59c3d9b" class="i field">MessagingEntityAlreadyExists</a>));
 
            <span class="t t">Assert</span>.<span class="i method">That</span>(
                <b>async</b> () =&gt;
                <b>await</b> <span class="r116 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#e566ecd8704fae45" class="i method">CreateTopicAsync</a>(<span class="r118 r">topicName</span>),
                <span class="t t">Throws</span>.<span class="i method">InstanceOf</span>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>&gt;().<span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>.<a href="/Azure.Messaging.ServiceBus/A.html#b39014a14c98853e" class="i property">Reason</a>)).<span class="i method">EqualTo</span>(<a href="/Azure.Messaging.ServiceBus/A.html#ac3a011acdeef28e" class="t t">ServiceBusFailureReason</a>.<a href="/Azure.Messaging.ServiceBus/A.html#39a97919e59c3d9b" class="i field">MessagingEntityAlreadyExists</a>));
 
            <span class="t t">Assert</span>.<span class="i method">That</span>(
                <b>async</b> () =&gt;
                <b>await</b> <span class="r116 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#2dc02e2989d011e4" class="i method">CreateSubscriptionAsync</a>(<span class="r118 r">topicName</span>, <span class="r119 r">subscriptionName</span>),
                <span class="t t">Throws</span>.<span class="i method">InstanceOf</span>&lt;<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>&gt;().<span class="i property">And</span>.<span class="i method">Property</span>(<b>nameof</b>(<a href="/Azure.Messaging.ServiceBus/A.html#a5716ddcbc4510f2" class="t t">ServiceBusException</a>.<a href="/Azure.Messaging.ServiceBus/A.html#b39014a14c98853e" class="i property">Reason</a>)).<span class="i method">EqualTo</span>(<a href="/Azure.Messaging.ServiceBus/A.html#ac3a011acdeef28e" class="t t">ServiceBusFailureReason</a>.<a href="/Azure.Messaging.ServiceBus/A.html#39a97919e59c3d9b" class="i field">MessagingEntityAlreadyExists</a>));
 
            <b>await</b> <span class="r116 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#aa79dd9ee3fb68cc" class="i method">DeleteQueueAsync</a>(<span class="r117 r">queueName</span>);
            <b>await</b> <span class="r116 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#22d770ae7b158317" class="i method">DeleteTopicAsync</a>(<span class="r118 r">topicName</span>);
        }
 
        [<span class="t constructor">Test</span>]
        [<a href="/Azure.Core.TestFramework/A.html#9ce10179a72216c9" class="t constructor">LiveOnly</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="00d1922f2f9afa6a" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ForwardingEntity</a>()
        {
            <span class="c">// queueName--Fwd to--&gt; destinationName--fwd dlq to-- &gt; dqlDestinationName</span>
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r120 rd" class="r120 r">queueName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r121 rd" class="r121 r">destinationName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r122 rd" class="r122 r">dlqDestinationName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
            <a href="/Azure.Messaging.ServiceBus/A.html#827d49874cba94ba" class="k">var</a> <span id="r123 rd" class="r123 r">mgmtClient</span> = <a href="#1deb5024707aa43b" class="i method">CreateClient</a>();
 
            <b>await</b> <span class="r123 r">mgmtClient</span>.<a href="/Azure.Messaging.ServiceBus/A.html#18f73de993cc5d73" class="i method">CreateQueueAsync</a>(<span class="r122 r">dlqDestinationName</span>);
            <b>await</b> <span class="r123 r">mgmtClient</span>.<a href="/Azure.Messaging.ServiceBus/A.html#bc456f01412c2478" class="i method">CreateQueueAsync</a>(
                <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#8b61abee28dc382e" class="t constructor">CreateQueueOptions</a>(<span class="r121 r">destinationName</span>)
                {
                    <a href="/Azure.Messaging.ServiceBus/A.html#204e5bbbbf067660" class="i property">ForwardDeadLetteredMessagesTo</a> = <span class="r122 r">dlqDestinationName</span>
                });
 
            <b>await</b> <span class="r123 r">mgmtClient</span>.<a href="/Azure.Messaging.ServiceBus/A.html#bc456f01412c2478" class="i method">CreateQueueAsync</a>(
                <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#8b61abee28dc382e" class="t constructor">CreateQueueOptions</a>(<span class="r120 r">queueName</span>)
                {
                    <a href="/Azure.Messaging.ServiceBus/A.html#613f0cf9b8e20919" class="i property">ForwardTo</a> = <span class="r121 r">destinationName</span>
                });
 
            <b>await using</b> <a href="/Azure.Messaging.ServiceBus/A.html#ad46ff0588c85077" class="k">var</a> <span id="r124 rd" class="r124 r">sbClient</span> = <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#ac38709c04b916cf" class="t constructor">ServiceBusClient</a>(<a href="/Azure.Core.TestFramework/A.html#9185092834304053" class="i property">TestEnvironment</a>.<a href="../Infrastructure/ServiceBusTestEnvironment.cs.html#2e255d4a6d75bc9a" class="i property">ServiceBusConnectionString</a>);
            <a href="/Azure.Messaging.ServiceBus/A.html#565d94b474d31465" class="t t">ServiceBusSender</a> <span id="r125 rd" class="r125 r">sender</span> = <span class="r124 r">sbClient</span>.<a href="/Azure.Messaging.ServiceBus/A.html#a445ec86cde923d7" class="i method">CreateSender</a>(<span class="r120 r">queueName</span>);
            <b>await</b> <span class="r125 r">sender</span>.<a href="/Azure.Messaging.ServiceBus/A.html#0be5b6e30acbf9ea" class="i method">SendMessageAsync</a>(<b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#84b07caaacc5932b" class="t constructor">ServiceBusMessage</a>() { <a href="/Azure.Messaging.ServiceBus/A.html#62234b00feff0e3f" class="i property">MessageId</a> = <span class="s">&quot;mid&quot;</span> });
 
            <a href="/Azure.Messaging.ServiceBus/A.html#2224f17dabcb26c3" class="t t">ServiceBusReceiver</a> <span id="r126 rd" class="r126 r">receiver</span> = <span class="r124 r">sbClient</span>.<a href="/Azure.Messaging.ServiceBus/A.html#201800c085187d08" class="i method">CreateReceiver</a>(<span class="r121 r">destinationName</span>);
            <a href="/Azure.Messaging.ServiceBus/A.html#347e87fb652ef164" class="t t">ServiceBusReceivedMessage</a> <span id="r127 rd" class="r127 r">msg</span> = <b>await</b> <span class="r126 r">receiver</span>.<a href="/Azure.Messaging.ServiceBus/A.html#c59a6150722beca5" class="i method">ReceiveMessageAsync</a>();
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r127 r">msg</span>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;mid&quot;</span>, <span class="r127 r">msg</span>.<a href="/Azure.Messaging.ServiceBus/A.html#604c37d7b9ac7f23" class="i property">MessageId</a>);
            <b>await</b> <span class="r126 r">receiver</span>.<a href="/Azure.Messaging.ServiceBus/A.html#2d65a06b6ff02cfe" class="i method">DeadLetterMessageAsync</a>(<span class="r127 r">msg</span>);
 
            <span class="r126 r">receiver</span> = <span class="r124 r">sbClient</span>.<a href="/Azure.Messaging.ServiceBus/A.html#201800c085187d08" class="i method">CreateReceiver</a>(<span class="r122 r">dlqDestinationName</span>);
            <span class="r127 r">msg</span> = <b>await</b> <span class="r126 r">receiver</span>.<a href="/Azure.Messaging.ServiceBus/A.html#c59a6150722beca5" class="i method">ReceiveMessageAsync</a>();
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r127 r">msg</span>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;mid&quot;</span>, <span class="r127 r">msg</span>.<a href="/Azure.Messaging.ServiceBus/A.html#604c37d7b9ac7f23" class="i property">MessageId</a>);
            <b>await</b> <span class="r126 r">receiver</span>.<a href="/Azure.Messaging.ServiceBus/A.html#207f693c96ca8ab2" class="i method">CompleteMessageAsync</a>(<span class="r127 r">msg</span>);
 
            <b>await</b> <span class="r123 r">mgmtClient</span>.<a href="/Azure.Messaging.ServiceBus/A.html#aa79dd9ee3fb68cc" class="i method">DeleteQueueAsync</a>(<span class="r120 r">queueName</span>);
            <b>await</b> <span class="r123 r">mgmtClient</span>.<a href="/Azure.Messaging.ServiceBus/A.html#aa79dd9ee3fb68cc" class="i method">DeleteQueueAsync</a>(<span class="r121 r">destinationName</span>);
            <b>await</b> <span class="r123 r">mgmtClient</span>.<a href="/Azure.Messaging.ServiceBus/A.html#aa79dd9ee3fb68cc" class="i method">DeleteQueueAsync</a>(<span class="r122 r">dlqDestinationName</span>);
        }
 
        [<span class="t constructor">Test</span>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="a7cec5626924658f" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SqlFilterParams</a>()
        {
            <a href="/Azure.Messaging.ServiceBus/A.html#827d49874cba94ba" class="k">var</a> <span id="r128 rd" class="r128 r">client</span> = <a href="#1deb5024707aa43b" class="i method">CreateClient</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r129 rd" class="r129 r">topicName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r130 rd" class="r130 r">subscriptionName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
 
            <b>await</b> <span class="r128 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#e566ecd8704fae45" class="i method">CreateTopicAsync</a>(<span class="r129 r">topicName</span>);
            <b>await</b> <span class="r128 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#2dc02e2989d011e4" class="i method">CreateSubscriptionAsync</a>(<span class="r129 r">topicName</span>, <span class="r130 r">subscriptionName</span>);
 
            <a href="/Azure.Messaging.ServiceBus/A.html#2a9b5c959bab5c99" class="t t">SqlRuleFilter</a> <span id="r131 rd" class="r131 r">sqlFilter</span> = <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#475f66aba60e9ed2" class="t constructor">SqlRuleFilter</a>(
                <span class="s">&quot;PROPERTY(@propertyName) = @stringPropertyValue &quot;</span> +
                <span class="s">&quot;AND PROPERTY(intProperty) = @intPropertyValue &quot;</span> +
                <span class="s">&quot;AND PROPERTY(longProperty) = @longPropertyValue &quot;</span> +
                <span class="s">&quot;AND PROPERTY(boolProperty) = @boolPropertyValue &quot;</span> +
                <span class="s">&quot;AND PROPERTY(doubleProperty) = @doublePropertyValue &quot;</span>)
            {
                <a href="/Azure.Messaging.ServiceBus/A.html#a5493ab99080864a" class="i property">Parameters</a> =
                       {
                            { <span class="s">&quot;@propertyName&quot;</span>, <span class="s">&quot;MyProperty&quot;</span> },
                            { <span class="s">&quot;@stringPropertyValue&quot;</span>, <span class="s">&quot;string&quot;</span> },
                            { <span class="s">&quot;@intPropertyValue&quot;</span>, 3 },
                            { <span class="s">&quot;@longPropertyValue&quot;</span>, 3L },
                            { <span class="s">&quot;@boolPropertyValue&quot;</span>, <b>true</b> },
                            { <span class="s">&quot;@doublePropertyValue&quot;</span>, 3.0 },
                       }
            };
 
            <a href="/Azure.Messaging.ServiceBus/A.html#b23c8647941f6cd1" class="t t">RuleProperties</a> <span id="r132 rd" class="r132 r">rule</span> = <b>await</b> <span class="r128 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7fb08df68d75fce9" class="i method">CreateRuleAsync</a>(
                <span class="r129 r">topicName</span>,
                <span class="r130 r">subscriptionName</span>,
                <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#29b819cdd380e739" class="t constructor">CreateRuleOptions</a>(<span class="s">&quot;rule1&quot;</span>, <span class="r131 r">sqlFilter</span>));
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r131 r">sqlFilter</span>, <span class="r132 r">rule</span>.<a href="/Azure.Messaging.ServiceBus/A.html#efcad7bd2f2b7417" class="i property">Filter</a>);
 
            <b>await</b> <span class="r128 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#22d770ae7b158317" class="i method">DeleteTopicAsync</a>(<span class="r129 r">topicName</span>);
        }
 
        [<span class="t constructor">Test</span>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="d250bbaa993144bf" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CorrelationFilterProperties</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r133 rd" class="r133 r">topicName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r134 rd" class="r134 r">subscriptionName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
            <a href="/Azure.Messaging.ServiceBus/A.html#827d49874cba94ba" class="k">var</a> <span id="r135 rd" class="r135 r">client</span> = <a href="#1deb5024707aa43b" class="i method">CreateClient</a>();
 
            <b>await</b> <span class="r135 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#e566ecd8704fae45" class="i method">CreateTopicAsync</a>(<span class="r133 r">topicName</span>);
            <b>await</b> <span class="r135 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#2dc02e2989d011e4" class="i method">CreateSubscriptionAsync</a>(<span class="r133 r">topicName</span>, <span class="r134 r">subscriptionName</span>);
 
            <a href="/Azure.Messaging.ServiceBus/A.html#56647929fe37f475" class="k">var</a> <span id="r136 rd" class="r136 r">filter</span> = <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#729038eeb2cb5076" class="t constructor">CorrelationRuleFilter</a>();
            <span class="r136 r">filter</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7e566f07acf94344" class="i property">ApplicationProperties</a>.<a href="@0@mscorlib/A.html#380bc69e46a83183" class="i method">Add</a>(<span class="s">&quot;stringKey&quot;</span>, <span class="s">&quot;stringVal&quot;</span>);
            <span class="r136 r">filter</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7e566f07acf94344" class="i property">ApplicationProperties</a>.<a href="@0@mscorlib/A.html#380bc69e46a83183" class="i method">Add</a>(<span class="s">&quot;intKey&quot;</span>, 5);
            <span class="r136 r">filter</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7e566f07acf94344" class="i property">ApplicationProperties</a>.<a href="@0@mscorlib/A.html#380bc69e46a83183" class="i method">Add</a>(<span class="s">&quot;dateTimeKey&quot;</span>, <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#e6b56eb0cd3db64f" class="i property">Now</a>.<a href="@0@mscorlib/A.html#ae3e62dcd82c2422" class="i property">UtcDateTime</a>);
 
            <a href="/Azure.Messaging.ServiceBus/A.html#b23c8647941f6cd1" class="t t">RuleProperties</a> <span id="r137 rd" class="r137 r">rule</span> = <b>await</b> <span class="r135 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7fb08df68d75fce9" class="i method">CreateRuleAsync</a>(
                <span class="r133 r">topicName</span>,
                <span class="r134 r">subscriptionName</span>,
                <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#29b819cdd380e739" class="t constructor">CreateRuleOptions</a>(<span class="s">&quot;rule1&quot;</span>, <span class="r136 r">filter</span>));
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r136 r">filter</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7e566f07acf94344" class="i property">ApplicationProperties</a>.<a href="@0@mscorlib/A.html#3d6c21c4e9bd5f63" class="i property">Count</a> == 3);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r136 r">filter</span>, <span class="r137 r">rule</span>.<a href="/Azure.Messaging.ServiceBus/A.html#efcad7bd2f2b7417" class="i property">Filter</a>);
 
            <b>await</b> <span class="r135 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#22d770ae7b158317" class="i method">DeleteTopicAsync</a>(<span class="r133 r">topicName</span>);
        }
 
        [<span class="t constructor">Test</span>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="33c6ca39a939ec60" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetNamespaceProperties</a>()
        {
            <a href="/Azure.Messaging.ServiceBus/A.html#827d49874cba94ba" class="k">var</a> <span id="r138 rd" class="r138 r">client</span> = <a href="#1deb5024707aa43b" class="i method">CreateClient</a>();
 
            <a href="/Azure.Messaging.ServiceBus/A.html#880ba04c9df83ecc" class="t t">NamespaceProperties</a> <span id="r139 rd" class="r139 r">nsInfo</span> = <b>await</b> <span class="r138 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#6f479a8124cead42" class="i method">GetNamespacePropertiesAsync</a>();
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r139 r">nsInfo</span>);
            <span class="c">// Assert.AreEqual(MessagingSku.Standard, nsInfo.MessagingSku);    // Most CI systems generally use standard, hence this check just to ensure the API is working.</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Messaging.ServiceBus/A.html#52768541d9b31ad7" class="t t">NamespaceType</a>.<a href="/Azure.Messaging.ServiceBus/A.html#97758abd3799ff28" class="i property">Messaging</a>, <span class="r139 r">nsInfo</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7d16eac705fe6f87" class="i property">NamespaceType</a>); <span class="c">// Common namespace type used for testing is messaging.</span>
        }
 
        [<span class="t constructor">Test</span>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="7d7c52bbe00d4b63" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">AuthenticateWithAAD</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r140 rd" class="r140 r">queueName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r141 rd" class="r141 r">topicName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
            <a href="/Azure.Messaging.ServiceBus/A.html#827d49874cba94ba" class="k">var</a> <span id="r142 rd" class="r142 r">client</span> = <a href="#9a061fc70198f8a2" class="i method">CreateAADClient</a>();
 
            <a href="/Azure.Messaging.ServiceBus/A.html#2c2ef75199dd1be9" class="k">var</a> <span id="r143 rd" class="r143 r">queueOptions</span> = <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#8b61abee28dc382e" class="t constructor">CreateQueueOptions</a>(<span class="r140 r">queueName</span>);
            <a href="/Azure.Messaging.ServiceBus/A.html#96f80aae2e1f18c8" class="t t">QueueProperties</a> <span id="r144 rd" class="r144 r">createdQueue</span> = <b>await</b> <span class="r142 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#bc456f01412c2478" class="i method">CreateQueueAsync</a>(<span class="r143 r">queueOptions</span>);
 
            <a href="#44cbb1291599989e" class="i method">AssertQueueOptions</a>(<span class="r143 r">queueOptions</span>, <span class="r144 r">createdQueue</span>);
 
            <a href="/Azure.Messaging.ServiceBus/A.html#ecbb5f425eb88c96" class="k">var</a> <span id="r145 rd" class="r145 r">topicOptions</span> = <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#9d7b3a77ecfa63ef" class="t constructor">CreateTopicOptions</a>(<span class="r141 r">topicName</span>);
            <a href="/Azure.Messaging.ServiceBus/A.html#5f455b5c63b17daf" class="t t">TopicProperties</a> <span id="r146 rd" class="r146 r">createdTopic</span> = <b>await</b> <span class="r142 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#1a1bd1ddd84e0245" class="i method">CreateTopicAsync</a>(<span class="r145 r">topicOptions</span>);
 
            <a href="#deec0227b5dfa843" class="i method">AssertTopicOptions</a>(<span class="r145 r">topicOptions</span>, <span class="r146 r">createdTopic</span>);
 
            <b>await</b> <span class="r142 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#aa79dd9ee3fb68cc" class="i method">DeleteQueueAsync</a>(<span class="r140 r">queueName</span>);
            <b>await</b> <span class="r142 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#22d770ae7b158317" class="i method">DeleteTopicAsync</a>(<span class="r141 r">topicName</span>);
        }
 
        [<span class="t constructor">Test</span>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="e3422d3a1a561a62" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">AuthenticateWithSharedKeyCredential</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r147 rd" class="r147 r">queueName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r148 rd" class="r148 r">topicName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
            <a href="/Azure.Messaging.ServiceBus/A.html#827d49874cba94ba" class="k">var</a> <span id="r149 rd" class="r149 r">client</span> = <a href="#b672bc6128192129" class="i method">CreateSharedKeyTokenClient</a>();
 
            <a href="/Azure.Messaging.ServiceBus/A.html#2c2ef75199dd1be9" class="k">var</a> <span id="r150 rd" class="r150 r">queueOptions</span> = <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#8b61abee28dc382e" class="t constructor">CreateQueueOptions</a>(<span class="r147 r">queueName</span>);
            <a href="/Azure.Messaging.ServiceBus/A.html#96f80aae2e1f18c8" class="t t">QueueProperties</a> <span id="r151 rd" class="r151 r">createdQueue</span> = <b>await</b> <span class="r149 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#bc456f01412c2478" class="i method">CreateQueueAsync</a>(<span class="r150 r">queueOptions</span>);
 
            <a href="#44cbb1291599989e" class="i method">AssertQueueOptions</a>(<span class="r150 r">queueOptions</span>, <span class="r151 r">createdQueue</span>);
 
            <a href="/Azure.Messaging.ServiceBus/A.html#ecbb5f425eb88c96" class="k">var</a> <span id="r152 rd" class="r152 r">topicOptions</span> = <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#9d7b3a77ecfa63ef" class="t constructor">CreateTopicOptions</a>(<span class="r148 r">topicName</span>);
            <a href="/Azure.Messaging.ServiceBus/A.html#5f455b5c63b17daf" class="t t">TopicProperties</a> <span id="r153 rd" class="r153 r">createdTopic</span> = <b>await</b> <span class="r149 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#1a1bd1ddd84e0245" class="i method">CreateTopicAsync</a>(<span class="r152 r">topicOptions</span>);
 
            <a href="#deec0227b5dfa843" class="i method">AssertTopicOptions</a>(<span class="r152 r">topicOptions</span>, <span class="r153 r">createdTopic</span>);
 
            <b>await</b> <span class="r149 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#aa79dd9ee3fb68cc" class="i method">DeleteQueueAsync</a>(<span class="r147 r">queueName</span>);
            <b>await</b> <span class="r149 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#22d770ae7b158317" class="i method">DeleteTopicAsync</a>(<span class="r148 r">topicName</span>);
        }
 
        [<span class="t constructor">Test</span>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="fe73b4b47866fa36" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">AuthenticateWithSasCredential</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r154 rd" class="r154 r">queueName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r155 rd" class="r155 r">topicName</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#8015cb30da6ca742" class="i method">ToString</a>(<span class="s">&quot;D&quot;</span>).<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, 8);
            <a href="/Azure.Messaging.ServiceBus/A.html#827d49874cba94ba" class="k">var</a> <span id="r156 rd" class="r156 r">client</span> = <a href="#b672bc6128192129" class="i method">CreateSharedKeyTokenClient</a>();
 
            <a href="/Azure.Messaging.ServiceBus/A.html#2c2ef75199dd1be9" class="k">var</a> <span id="r157 rd" class="r157 r">queueOptions</span> = <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#8b61abee28dc382e" class="t constructor">CreateQueueOptions</a>(<span class="r154 r">queueName</span>);
            <a href="/Azure.Messaging.ServiceBus/A.html#96f80aae2e1f18c8" class="t t">QueueProperties</a> <span id="r158 rd" class="r158 r">createdQueue</span> = <b>await</b> <span class="r156 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#bc456f01412c2478" class="i method">CreateQueueAsync</a>(<span class="r157 r">queueOptions</span>);
 
            <a href="#44cbb1291599989e" class="i method">AssertQueueOptions</a>(<span class="r157 r">queueOptions</span>, <span class="r158 r">createdQueue</span>);
 
            <a href="/Azure.Messaging.ServiceBus/A.html#ecbb5f425eb88c96" class="k">var</a> <span id="r159 rd" class="r159 r">topicOptions</span> = <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#9d7b3a77ecfa63ef" class="t constructor">CreateTopicOptions</a>(<span class="r155 r">topicName</span>);
            <a href="/Azure.Messaging.ServiceBus/A.html#5f455b5c63b17daf" class="t t">TopicProperties</a> <span id="r160 rd" class="r160 r">createdTopic</span> = <b>await</b> <span class="r156 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#1a1bd1ddd84e0245" class="i method">CreateTopicAsync</a>(<span class="r159 r">topicOptions</span>);
 
            <a href="#deec0227b5dfa843" class="i method">AssertTopicOptions</a>(<span class="r159 r">topicOptions</span>, <span class="r160 r">createdTopic</span>);
 
            <b>await</b> <span class="r156 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#aa79dd9ee3fb68cc" class="i method">DeleteQueueAsync</a>(<span class="r154 r">queueName</span>);
            <b>await</b> <span class="r156 r">client</span>.<a href="/Azure.Messaging.ServiceBus/A.html#22d770ae7b158317" class="i method">DeleteTopicAsync</a>(<span class="r155 r">topicName</span>);
        }
 
        <b>private void</b> <a id="44cbb1291599989e" href="../R/44cbb1291599989e.html" target="n" data-glyph="76,1" class="i method">AssertQueueOptions</a>(<a href="/Azure.Messaging.ServiceBus/A.html#2c2ef75199dd1be9" class="t t">CreateQueueOptions</a> <span id="r161 rd" class="r161 r">queueOptions</span>, <a href="/Azure.Messaging.ServiceBus/A.html#96f80aae2e1f18c8" class="t t">QueueProperties</a> <span id="r162 rd" class="r162 r">createdQueue</span>)
        {
            <b>if</b> (<a href="/Azure.Core.TestFramework/A.html#eb077c11a09b6b1e" class="i property">Mode</a> == <a href="/Azure.Core.TestFramework/A.html#d7d5cc97dd76217f" class="t t">RecordedTestMode</a>.<a href="/Azure.Core.TestFramework/A.html#bde4663b03b59b85" class="i field">Playback</a>)
            {
                <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r161 r">queueOptions</span>,
                    <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#c67dbe6c1b69264b" class="t constructor">CreateQueueOptions</a>(<span class="r162 r">createdQueue</span>) { <a href="/Azure.Messaging.ServiceBus/A.html#ed5389e471e79f2f" class="i property">AuthorizationRules</a> = <span class="r161 r">queueOptions</span>.<a href="/Azure.Messaging.ServiceBus/A.html#ed5389e471e79f2f" class="i property">AuthorizationRules</a>.<a href="/Azure.Messaging.ServiceBus/A.html#a692bb147dc24632" class="i method">Clone</a>(), <a href="/Azure.Messaging.ServiceBus/A.html#274d861134b442e3" class="i property">MaxMessageSizeInKilobytes</a> = <span class="r161 r">queueOptions</span>.<a href="/Azure.Messaging.ServiceBus/A.html#274d861134b442e3" class="i property">MaxMessageSizeInKilobytes</a> });
                <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r162 r">createdQueue</span>, <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#6e002816e9ed8df7" class="t constructor">QueueProperties</a>(<span class="r161 r">queueOptions</span>) { <a href="/Azure.Messaging.ServiceBus/A.html#240a78db318dfaf1" class="i property">AuthorizationRules</a> = <span class="r162 r">createdQueue</span>.<a href="/Azure.Messaging.ServiceBus/A.html#240a78db318dfaf1" class="i property">AuthorizationRules</a>, <a href="/Azure.Messaging.ServiceBus/A.html#b51461118b6afdac" class="i property">MaxMessageSizeInKilobytes</a> = <span class="r162 r">createdQueue</span>.<a href="/Azure.Messaging.ServiceBus/A.html#b51461118b6afdac" class="i property">MaxMessageSizeInKilobytes</a> });
            }
            <b>else</b>
            {
                <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r161 r">queueOptions</span>,
                    <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#c67dbe6c1b69264b" class="t constructor">CreateQueueOptions</a>(<span class="r162 r">createdQueue</span>) { <a href="/Azure.Messaging.ServiceBus/A.html#274d861134b442e3" class="i property">MaxMessageSizeInKilobytes</a> = <span class="r161 r">queueOptions</span>.<a href="/Azure.Messaging.ServiceBus/A.html#274d861134b442e3" class="i property">MaxMessageSizeInKilobytes</a> });
                <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r162 r">createdQueue</span>,
                    <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#6e002816e9ed8df7" class="t constructor">QueueProperties</a>(<span class="r161 r">queueOptions</span>) { <a href="/Azure.Messaging.ServiceBus/A.html#b51461118b6afdac" class="i property">MaxMessageSizeInKilobytes</a> = <span class="r162 r">createdQueue</span>.<a href="/Azure.Messaging.ServiceBus/A.html#b51461118b6afdac" class="i property">MaxMessageSizeInKilobytes</a> });
            }
        }
 
        <b>private void</b> <a id="deec0227b5dfa843" href="../R/deec0227b5dfa843.html" target="n" data-glyph="76,1" class="i method">AssertTopicOptions</a>(<a href="/Azure.Messaging.ServiceBus/A.html#ecbb5f425eb88c96" class="t t">CreateTopicOptions</a> <span id="r163 rd" class="r163 r">options</span>, <a href="/Azure.Messaging.ServiceBus/A.html#5f455b5c63b17daf" class="t t">TopicProperties</a> <span id="r164 rd" class="r164 r">createdTopic</span>)
        {
            <b>if</b> (<a href="/Azure.Core.TestFramework/A.html#eb077c11a09b6b1e" class="i property">Mode</a> == <a href="/Azure.Core.TestFramework/A.html#d7d5cc97dd76217f" class="t t">RecordedTestMode</a>.<a href="/Azure.Core.TestFramework/A.html#bde4663b03b59b85" class="i field">Playback</a>)
            {
                <span class="c">// Auth rules use a randomly generated key, but we don&#39;t want to store</span>
                <span class="c">// these in our test recordings, so we skip the auth rule comparison</span>
                <span class="c">// when in playback mode.</span>
                <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r163 r">options</span>, <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#3dc324d79e3b4172" class="t constructor">CreateTopicOptions</a>(<span class="r164 r">createdTopic</span>) { <a href="/Azure.Messaging.ServiceBus/A.html#7c46a1fdf0f3696b" class="i property">AuthorizationRules</a> = <span class="r163 r">options</span>.<a href="/Azure.Messaging.ServiceBus/A.html#7c46a1fdf0f3696b" class="i property">AuthorizationRules</a>.<a href="/Azure.Messaging.ServiceBus/A.html#a692bb147dc24632" class="i method">Clone</a>(), <a href="/Azure.Messaging.ServiceBus/A.html#ed2b9c3b404214c4" class="i property">MaxMessageSizeInKilobytes</a> = <span class="r163 r">options</span>.<a href="/Azure.Messaging.ServiceBus/A.html#ed2b9c3b404214c4" class="i property">MaxMessageSizeInKilobytes</a> });
                <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r164 r">createdTopic</span>, <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#35324bcb7a10094f" class="t constructor">TopicProperties</a>(<span class="r163 r">options</span>)
                {
                    <a href="/Azure.Messaging.ServiceBus/A.html#19be1a7ad9e7f70f" class="i property">AuthorizationRules</a> = <span class="r164 r">createdTopic</span>.<a href="/Azure.Messaging.ServiceBus/A.html#19be1a7ad9e7f70f" class="i property">AuthorizationRules</a>.<a href="/Azure.Messaging.ServiceBus/A.html#a692bb147dc24632" class="i method">Clone</a>(),
                    <a href="/Azure.Messaging.ServiceBus/A.html#29dd74b178b49e71" class="i property">MaxMessageSizeInKilobytes</a> = <span class="r164 r">createdTopic</span>.<a href="/Azure.Messaging.ServiceBus/A.html#29dd74b178b49e71" class="i property">MaxMessageSizeInKilobytes</a>
                });
            }
            <b>else</b>
            {
                <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r163 r">options</span>, <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#3dc324d79e3b4172" class="t constructor">CreateTopicOptions</a>(<span class="r164 r">createdTopic</span>) { <a href="/Azure.Messaging.ServiceBus/A.html#ed2b9c3b404214c4" class="i property">MaxMessageSizeInKilobytes</a> = <span class="r163 r">options</span>.<a href="/Azure.Messaging.ServiceBus/A.html#ed2b9c3b404214c4" class="i property">MaxMessageSizeInKilobytes</a> });
                <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r164 r">createdTopic</span>, <b>new</b> <a href="/Azure.Messaging.ServiceBus/A.html#35324bcb7a10094f" class="t constructor">TopicProperties</a>(<span class="r163 r">options</span>) { <a href="/Azure.Messaging.ServiceBus/A.html#29dd74b178b49e71" class="i property">MaxMessageSizeInKilobytes</a> = <span class="r164 r">createdTopic</span>.<a href="/Azure.Messaging.ServiceBus/A.html#29dd74b178b49e71" class="i property">MaxMessageSizeInKilobytes</a> });
            }
        }
 
        <b>private</b> <a href="/Azure.Core/A.html#d93a9ffee404e938" class="t t">TokenCredential</a> <a id="200cdf72caf1d6a6" href="../R/200cdf72caf1d6a6.html" target="n" data-glyph="76,1" class="i method">GetTokenCredential</a>() =&gt;
            <a href="/Azure.Core.TestFramework/A.html#eb077c11a09b6b1e" class="i property">Mode</a> == <a href="/Azure.Core.TestFramework/A.html#d7d5cc97dd76217f" class="t t">RecordedTestMode</a>.<a href="/Azure.Core.TestFramework/A.html#bde4663b03b59b85" class="i field">Playback</a> ? <b>new</b> <a href="#75f6447b143aba98" class="t constructor">ServiceBusTestTokenCredential</a>() : <a href="/Azure.Core.TestFramework/A.html#9185092834304053" class="i property">TestEnvironment</a>.<a href="/Azure.Core.TestFramework/A.html#7a52cec375a4970c" class="i property">Credential</a>;
 
        <b>private class</b> <a id="75f6447b143aba98" href="../R/75f6447b143aba98.html" target="n" data-glyph="4,1" class="t t"><span id="92a04e257d5119ae">ServiceBusTestTokenCredential</span></a> : <a href="/Azure.Core/A.html#d93a9ffee404e938" class="t t">TokenCredential</a>
        {
            <b>public override</b> <span class="t t">ValueTask</span>&lt;<a href="/Azure.Core/A.html#b9cb398886850745" class="t t">AccessToken</a>&gt; <a id="5ac810d96d6e8051" href="../R/5ac810d96d6e8051.html" target="n" data-glyph="72,2" class="i method">GetTokenAsync</a>(<a href="/Azure.Core/A.html#9d9eb2813d5fd899" class="t t">TokenRequestContext</a> <span id="r165 rd" class="r165 r">requestContext</span>, <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r166 rd" class="r166 r">cancellationToken</span>)
            {
                <b>return</b> <b>new</b> <span class="t constructor">ValueTask</span>&lt;<a href="/Azure.Core/A.html#b9cb398886850745" class="t t">AccessToken</a>&gt;(<a href="#b49ee896562cdf26" class="i method">GetToken</a>(<span class="r165 r">requestContext</span>, <span class="r166 r">cancellationToken</span>));
            }
 
            <b>public override</b> <a href="/Azure.Core/A.html#b9cb398886850745" class="t t">AccessToken</a> <a id="b49ee896562cdf26" href="../R/b49ee896562cdf26.html" target="n" data-glyph="72,2" class="i method">GetToken</a>(<a href="/Azure.Core/A.html#9d9eb2813d5fd899" class="t t">TokenRequestContext</a> <span id="r167 rd" class="r167 r">requestContext</span>, <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r168 rd" class="r168 r">cancellationToken</span>)
            {
                <b>return</b> <b>new</b> <a href="/Azure.Core/A.html#68b2c442cd1f3537" class="t constructor">AccessToken</a>(<span class="s">&quot;TEST TOKEN &quot;</span> + <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#881354baa56fc358" class="i method">Join</a>(<span class="s">&quot; &quot;</span>, <span class="r167 r">requestContext</span>.<a href="/Azure.Core/A.html#c2d39696789a7847" class="i property">Scopes</a>), <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a>.<a href="@0@mscorlib/A.html#371fa431c6a3a817" class="i field">MaxValue</a>);
            }
        }
    }
}
</pre></td></tr></table></div></body></html>

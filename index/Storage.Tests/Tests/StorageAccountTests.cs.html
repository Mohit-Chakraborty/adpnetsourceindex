<!DOCTYPE html>
<html><head><title>StorageAccountTests.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(2498);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Storage.Tests/Tests/StorageAccountTests.cs" target="_top">Tests\StorageAccountTests.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Storage.Tests" target="_top">tests\Microsoft.Azure.Management.Storage.Tests.csproj</a> (Storage.Tests)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License. See License.txt in the project root for license information.</span>
 
<b>using</b> <span class="i">System</span>;
<b>using</b> <span class="i">System</span>.<span class="i">Collections</span>.<span class="i">Generic</span>;
<b>using</b> <span class="i">System</span>.<span class="i">Linq</span>;
<b>using</b> <span class="i">System</span>.<span class="i">Net</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i">Resources</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i n">Storage</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i n">Storage</span>.<span class="i n">Models</span>;
<b>using</b> <span class="i n">ResourceGroups</span>.<span class="i n">Tests</span>;
<b>using</b> <span class="i n">Storage</span>.<span class="i n">Tests</span>.<span class="i n">Helpers</span>;
<b>using</b> <span class="i">Xunit</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i">Rest</span>.<span class="i">ClientRuntime</span>.<span class="i">Azure</span>.<span class="i">TestFramework</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i">Rest</span>.<span class="i">Azure</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i">KeyVault</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i">KeyVault</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i">Rest</span>.<span class="i">Azure</span>.<span class="i">Authentication</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i">IdentityModel</span>.<span class="i">Clients</span>.<span class="i">ActiveDirectory</span>;
<b>using</b> <span class="i">System</span>.<span class="i">Threading</span>.<span class="i">Tasks</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i">Test</span>.<span class="i">HttpRecorder</span>;
<b>using</b> <span class="i">System</span>.<span class="i">Net</span>.<span class="i">Http</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i">KeyVault</span>.<span class="i">WebKey</span>;
<b>using</b> <span class="i">System</span>.<span class="i">Text</span>.<span class="i">RegularExpressions</span>;
 
<b>namespace</b> <span class="i n">Storage</span>.<span class="i n">Tests</span>
{
    <b>public class</b> <a id="fb5c8deb84e86875" href="../R/../../0000000000.html" target="n" data-glyph="0,0" class="t t"><span id="8edceb9488fd69ca">StorageAccountTests</span></a>
    {
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="72e95e0533b1d881" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountCreateTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r0 rd" class="r0 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r1 rd" class="r1 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r2 rd" class="r2 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r1 r">context</span>, <span class="r0 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r3 rd" class="r3 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r1 r">context</span>, <span class="r0 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r4 rd" class="r4 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r2 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r5 rd" class="r5 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r6 rd" class="r6 r">parameters</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#17336b838eeba66c" class="i method">GetDefaultStorageAccountParameters</a>();
                <b>var</b> <span id="r7 rd" class="r7 r">account</span> = <span class="r3 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r4 r">rgname</span>, <span class="r5 r">accountName</span>, <span class="r6 r">parameters</span>);
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<span class="i">VerifyAccountProperties</span>(<span class="r7 r">account</span>, <b>true</b>);
 
                <span class="c">// Make sure a second create returns immediately</span>
                <b>var</b> <span id="r8 rd" class="r8 r">createRequest</span> = <span class="r3 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r4 r">rgname</span>, <span class="r5 r">accountName</span>, <span class="r6 r">parameters</span>);
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<span class="i">VerifyAccountProperties</span>(<span class="r7 r">account</span>, <b>true</b>);
 
                <span class="c">// Create storage account with only required params</span>
                <span class="r5 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <span class="r6 r">parameters</span> = <b>new</b> <span class="t">StorageAccountCreateParameters</span>
                {
                    <span class="i">Sku</span> = <b>new</b> <span class="t">Sku</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#1652dcc14f069d5f" class="i field">DefaultSkuName</a> },
                    <a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#fd3939f069de73f7" class="i field">Storage</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#0a5812a9fdf2fdfe" class="i field">DefaultLocation</a>,
                };
                <span class="r3 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r4 r">rgname</span>, <span class="r5 r">accountName</span>, <span class="r6 r">parameters</span>);
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<span class="i">VerifyAccountProperties</span>(<span class="r7 r">account</span>, <b>false</b>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="e4ca4c55c75b9829" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountCreateWithEncryptionTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r9 rd" class="r9 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r10 rd" class="r10 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r11 rd" class="r11 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r10 r">context</span>, <span class="r9 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r12 rd" class="r12 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r10 r">context</span>, <span class="r9 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r13 rd" class="r13 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r11 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r14 rd" class="r14 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r15 rd" class="r15 r">parameters</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#17336b838eeba66c" class="i method">GetDefaultStorageAccountParameters</a>();
                <span class="r15 r">parameters</span>.<span class="i">Encryption</span> = <b>new</b> <span class="t">Encryption</span>
                {
                    <span class="i">Services</span> = <b>new</b> <span class="t">EncryptionServices</span> { <span class="i">Blob</span> = <b>new</b> <span class="t">EncryptionService</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#254c25ee74a8283b" class="i property">Enabled</a> = <b>true</b> }, <span class="i">File</span> = <b>new</b> <span class="t">EncryptionService</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#254c25ee74a8283b" class="i property">Enabled</a> = <b>true</b> } },
                    <a href="/Microsoft.Azure.Management.Storage/A.html#c72a62c75c0ef114" class="i property">KeySource</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#d14c96c947819d48" class="t t">KeySource</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#b509b0ff8449a11b" class="i field">MicrosoftStorage</a>
                };
                <b>var</b> <span id="r16 rd" class="r16 r">account</span> = <span class="r12 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r13 r">rgname</span>, <span class="r14 r">accountName</span>, <span class="r15 r">parameters</span>);
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<span class="i">VerifyAccountProperties</span>(<span class="r16 r">account</span>, <b>true</b>);
 
                <span class="c">// Verify encryption settings</span>
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r16 r">account</span>.<span class="i">Encryption</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r16 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Blob</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r16 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Blob</span>.<span class="i">Enabled</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r16 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Blob</span>.<span class="i">LastEnabledTime</span>);
 
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r16 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">File</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r16 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">File</span>.<span class="i">Enabled</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r16 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">File</span>.<span class="i">LastEnabledTime</span>);
 
                <b>if</b> (<b>null</b> != <span class="r16 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Table</span>)
                {
                    <b>if</b> (<span class="r16 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Table</span>.<span class="i">Enabled</span>.<span class="i">HasValue</span>)
                    {
                        <span class="i">Assert</span>.<span class="i">False</span>(<span class="r16 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Table</span>.<span class="i">LastEnabledTime</span>.<span class="i">HasValue</span>);
                    }
                }
 
                <b>if</b> (<b>null</b> != <span class="r16 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Queue</span>)
                {
                    <b>if</b> (<span class="r16 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Queue</span>.<span class="i">Enabled</span>.<span class="i">HasValue</span>)
                    {
                        <span class="i">Assert</span>.<span class="i">False</span>(<span class="r16 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Queue</span>.<span class="i">LastEnabledTime</span>.<span class="i">HasValue</span>);
                    }
                }
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="d25b6e4a20d32e7a" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountCreateWithAccessTierTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r17 rd" class="r17 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r18 rd" class="r18 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r19 rd" class="r19 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r18 r">context</span>, <span class="r17 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r20 rd" class="r20 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r18 r">context</span>, <span class="r17 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r21 rd" class="r21 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r19 r">resourcesClient</span>);
 
                <span class="c">// Create storage account with hot</span>
                <b>string</b> <span id="r22 rd" class="r22 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r23 rd" class="r23 r">parameters</span> = <b>new</b> <span class="t">StorageAccountCreateParameters</span>
                {
                    <span class="i">Sku</span> = <b>new</b> <span class="t">Sku</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#5404beb07ae30d98" class="i field">StandardGRS</a> },
                    <a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#92d10e00bf3af788" class="i field">BlobStorage</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#0a5812a9fdf2fdfe" class="i field">DefaultLocation</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#8b9eeb6e58c0af3f" class="i property">AccessTier</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#850c01d5ceba8a3d" class="t t">AccessTier</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#f405869fc4c20f14" class="i field">Hot</a>
                };
                <b>var</b> <span id="r24 rd" class="r24 r">account</span> = <span class="r20 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r21 r">rgname</span>, <span class="r22 r">accountName</span>, <span class="r23 r">parameters</span>);
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<span class="i">VerifyAccountProperties</span>(<span class="r24 r">account</span>, <b>false</b>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#850c01d5ceba8a3d" class="t t">AccessTier</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#f405869fc4c20f14" class="i field">Hot</a>, <span class="r24 r">account</span>.<span class="i">AccessTier</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#92d10e00bf3af788" class="i field">BlobStorage</a>, <span class="r24 r">account</span>.<span class="i">Kind</span>);
 
                <span class="c">// Create storage account with cool</span>
                <span class="r22 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <span class="r23 r">parameters</span> = <b>new</b> <span class="t">StorageAccountCreateParameters</span>
                {
                    <span class="i">Sku</span> = <b>new</b> <span class="t">Sku</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#5404beb07ae30d98" class="i field">StandardGRS</a> },
                    <a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#92d10e00bf3af788" class="i field">BlobStorage</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#0a5812a9fdf2fdfe" class="i field">DefaultLocation</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#8b9eeb6e58c0af3f" class="i property">AccessTier</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#850c01d5ceba8a3d" class="t t">AccessTier</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#fe4a5b3e7f79ab62" class="i field">Cool</a>
                };
                <span class="r24 r">account</span> = <span class="r20 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r21 r">rgname</span>, <span class="r22 r">accountName</span>, <span class="r23 r">parameters</span>);
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<span class="i">VerifyAccountProperties</span>(<span class="r24 r">account</span>, <b>false</b>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#850c01d5ceba8a3d" class="t t">AccessTier</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#fe4a5b3e7f79ab62" class="i field">Cool</a>, <span class="r24 r">account</span>.<span class="i">AccessTier</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#92d10e00bf3af788" class="i field">BlobStorage</a>, <span class="r24 r">account</span>.<span class="i">Kind</span>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="710ce557546626ec" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountBeginCreateTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r25 rd" class="r25 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r26 rd" class="r26 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r27 rd" class="r27 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r26 r">context</span>, <span class="r25 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r28 rd" class="r28 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r26 r">context</span>, <span class="r25 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r29 rd" class="r29 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r27 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r30 rd" class="r30 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r31 rd" class="r31 r">parameters</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#17336b838eeba66c" class="i method">GetDefaultStorageAccountParameters</a>();
                <a href="/Microsoft.Azure.Management.Storage/A.html#65392932a86ca1ed" class="k">var</a> <span id="r32 rd" class="r32 r">response</span> = <span class="r28 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">BeginCreate</span>(<span class="r29 r">rgname</span>, <span class="r30 r">accountName</span>, <span class="r31 r">parameters</span>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="fe3e5219598e2641" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountDeleteTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r33 rd" class="r33 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r34 rd" class="r34 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r35 rd" class="r35 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r34 r">context</span>, <span class="r33 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r36 rd" class="r36 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r34 r">context</span>, <span class="r33 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r37 rd" class="r37 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r35 r">resourcesClient</span>);
 
                <span class="c">// Delete an account which does not exist</span>
                <span class="r36 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Delete</span>(<span class="r37 r">rgname</span>, <span class="s">&quot;missingaccount&quot;</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r38 rd" class="r38 r">accountName</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#e4a1b8b7f0893760" class="i method">CreateStorageAccount</a>(<span class="r36 r">storageMgmtClient</span>, <span class="r37 r">rgname</span>);
 
                <span class="c">// Delete an account</span>
                <span class="r36 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Delete</span>(<span class="r37 r">rgname</span>, <span class="r38 r">accountName</span>);
 
                <span class="c">// Delete an account which was just deleted</span>
                <span class="r36 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Delete</span>(<span class="r37 r">rgname</span>, <span class="r38 r">accountName</span>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="430a1a208116d510" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountGetStandardTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r39 rd" class="r39 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r40 rd" class="r40 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r41 rd" class="r41 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r40 r">context</span>, <span class="r39 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r42 rd" class="r42 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r40 r">context</span>, <span class="r39 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r43 rd" class="r43 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r41 r">resourcesClient</span>);
 
                <span class="c">// Default parameters</span>
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r44 rd" class="r44 r">parameters</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#17336b838eeba66c" class="i method">GetDefaultStorageAccountParameters</a>();
 
                <span class="c">// Create and get a LRS storage account</span>
                <b>string</b> <span id="r45 rd" class="r45 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <span class="r44 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#ed97b5f7b88512e4" class="i property">Sku</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e9da3fc1a9ac45de" class="i field">StandardLRS</a>;
                <span class="r42 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r43 r">rgname</span>, <span class="r45 r">accountName</span>, <span class="r44 r">parameters</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#65392932a86ca1ed" class="k">var</a> <span id="r46 rd" class="r46 r">account</span> = <span class="r42 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r43 r">rgname</span>, <span class="r45 r">accountName</span>);
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#e17407daaf06bdaa" class="i method">VerifyAccountProperties</a>(<span class="r46 r">account</span>, <b>false</b>);
 
                <span class="c">// Create and get a GRS storage account</span>
                <span class="r45 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <span class="r44 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#ed97b5f7b88512e4" class="i property">Sku</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#5404beb07ae30d98" class="i field">StandardGRS</a>;
                <span class="r42 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r43 r">rgname</span>, <span class="r45 r">accountName</span>, <span class="r44 r">parameters</span>);
                <span class="r46 r">account</span> = <span class="r42 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r43 r">rgname</span>, <span class="r45 r">accountName</span>);
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#e17407daaf06bdaa" class="i method">VerifyAccountProperties</a>(<span class="r46 r">account</span>, <b>true</b>);
 
                <span class="c">// Create and get a RAGRS storage account</span>
                <span class="r45 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <span class="r44 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#ed97b5f7b88512e4" class="i property">Sku</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#f999609d3611d016" class="i field">StandardRAGRS</a>;
                <span class="r42 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r43 r">rgname</span>, <span class="r45 r">accountName</span>, <span class="r44 r">parameters</span>);
                <span class="r46 r">account</span> = <span class="r42 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r43 r">rgname</span>, <span class="r45 r">accountName</span>);
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#e17407daaf06bdaa" class="i method">VerifyAccountProperties</a>(<span class="r46 r">account</span>, <b>false</b>);
 
                <span class="c">// Create and get a ZRS storage account</span>
                <span class="r45 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <span class="r44 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#ed97b5f7b88512e4" class="i property">Sku</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#b720b038c7ab4516" class="i field">StandardZRS</a>;
                <span class="r42 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r43 r">rgname</span>, <span class="r45 r">accountName</span>, <span class="r44 r">parameters</span>);
                <span class="r46 r">account</span> = <span class="r42 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r43 r">rgname</span>, <span class="r45 r">accountName</span>);
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#e17407daaf06bdaa" class="i method">VerifyAccountProperties</a>(<span class="r46 r">account</span>, <b>false</b>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="5972a9a59305b2ba" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountGetBlobTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r47 rd" class="r47 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r48 rd" class="r48 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r49 rd" class="r49 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r48 r">context</span>, <span class="r47 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r50 rd" class="r50 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r48 r">context</span>, <span class="r47 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r51 rd" class="r51 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r49 r">resourcesClient</span>);
 
                <span class="c">// Default parameters</span>
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r52 rd" class="r52 r">parameters</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#17336b838eeba66c" class="i method">GetDefaultStorageAccountParameters</a>();
 
                <span class="c">// Create and get a blob LRS storage account</span>
                <b>string</b> <span id="r53 rd" class="r53 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <span class="r52 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#ed97b5f7b88512e4" class="i property">Sku</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e9da3fc1a9ac45de" class="i field">StandardLRS</a>;
                <span class="r52 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#92d10e00bf3af788" class="i field">BlobStorage</a>;
                <span class="r52 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#8b9eeb6e58c0af3f" class="i property">AccessTier</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#850c01d5ceba8a3d" class="t t">AccessTier</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#f405869fc4c20f14" class="i field">Hot</a>;
                <span class="r50 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r51 r">rgname</span>, <span class="r53 r">accountName</span>, <span class="r52 r">parameters</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#65392932a86ca1ed" class="k">var</a> <span id="r54 rd" class="r54 r">account</span> = <span class="r50 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r51 r">rgname</span>, <span class="r53 r">accountName</span>);
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#e17407daaf06bdaa" class="i method">VerifyAccountProperties</a>(<span class="r54 r">account</span>, <b>false</b>);
 
                <span class="c">// Create and get a blob GRS storage account</span>
                <span class="r53 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <span class="r52 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#ed97b5f7b88512e4" class="i property">Sku</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#5404beb07ae30d98" class="i field">StandardGRS</a>;
                <span class="r52 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#92d10e00bf3af788" class="i field">BlobStorage</a>;
                <span class="r52 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#8b9eeb6e58c0af3f" class="i property">AccessTier</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#850c01d5ceba8a3d" class="t t">AccessTier</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#f405869fc4c20f14" class="i field">Hot</a>;
                <span class="r50 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r51 r">rgname</span>, <span class="r53 r">accountName</span>, <span class="r52 r">parameters</span>);
                <span class="r54 r">account</span> = <span class="r50 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r51 r">rgname</span>, <span class="r53 r">accountName</span>);
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#e17407daaf06bdaa" class="i method">VerifyAccountProperties</a>(<span class="r54 r">account</span>, <b>false</b>);
 
                <span class="c">// Create and get a blob RAGRS storage account</span>
                <span class="r53 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <span class="r52 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#ed97b5f7b88512e4" class="i property">Sku</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#f999609d3611d016" class="i field">StandardRAGRS</a>;
                <span class="r52 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#92d10e00bf3af788" class="i field">BlobStorage</a>;
                <span class="r52 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#8b9eeb6e58c0af3f" class="i property">AccessTier</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#850c01d5ceba8a3d" class="t t">AccessTier</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#f405869fc4c20f14" class="i field">Hot</a>;
                <span class="r50 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r51 r">rgname</span>, <span class="r53 r">accountName</span>, <span class="r52 r">parameters</span>);
                <span class="r54 r">account</span> = <span class="r50 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r51 r">rgname</span>, <span class="r53 r">accountName</span>);
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#e17407daaf06bdaa" class="i method">VerifyAccountProperties</a>(<span class="r54 r">account</span>, <b>false</b>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="a011c6f425a25ccb" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountGetPremiumTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r55 rd" class="r55 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r56 rd" class="r56 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r57 rd" class="r57 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r56 r">context</span>, <span class="r55 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r58 rd" class="r58 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r56 r">context</span>, <span class="r55 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r59 rd" class="r59 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r57 r">resourcesClient</span>);
 
                <span class="c">// Default parameters</span>
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r60 rd" class="r60 r">parameters</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#17336b838eeba66c" class="i method">GetDefaultStorageAccountParameters</a>();
 
                <span class="c">// Create and get a Premium LRS storage account</span>
                <b>string</b> <span id="r61 rd" class="r61 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <span class="r60 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#ed97b5f7b88512e4" class="i property">Sku</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e9da3fc1a9ac45de" class="i field">StandardLRS</a>;
                <span class="r58 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r59 r">rgname</span>, <span class="r61 r">accountName</span>, <span class="r60 r">parameters</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#65392932a86ca1ed" class="k">var</a> <span id="r62 rd" class="r62 r">account</span> = <span class="r58 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r59 r">rgname</span>, <span class="r61 r">accountName</span>);
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#e17407daaf06bdaa" class="i method">VerifyAccountProperties</a>(<span class="r62 r">account</span>, <b>false</b>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="d8325b127a581b49" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountListByResourceGroupTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r63 rd" class="r63 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r64 rd" class="r64 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r65 rd" class="r65 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r64 r">context</span>, <span class="r63 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r66 rd" class="r66 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r64 r">context</span>, <span class="r63 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r67 rd" class="r67 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r65 r">resourcesClient</span>);
 
                <b>var</b> <span id="r68 rd" class="r68 r">accounts</span> = <span class="r66 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">ListByResourceGroup</span>(<span class="r67 r">rgname</span>);
                <span class="i">Assert</span>.<span class="i">Empty</span>(<span class="r68 r">accounts</span>);
 
                <span class="c">// Create storage accounts</span>
                <b>string</b> <span id="r69 rd" class="r69 r">accountName1</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#e4a1b8b7f0893760" class="i method">CreateStorageAccount</a>(<span class="r66 r">storageMgmtClient</span>, <span class="r67 r">rgname</span>);
                <b>string</b> <span id="r70 rd" class="r70 r">accountName2</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#e4a1b8b7f0893760" class="i method">CreateStorageAccount</a>(<span class="r66 r">storageMgmtClient</span>, <span class="r67 r">rgname</span>);
 
                <span class="r68 r">accounts</span> = <span class="r66 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">ListByResourceGroup</span>(<span class="r67 r">rgname</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(2, <span class="r68 r">accounts</span>.<span class="i">Count</span>());
 
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<span class="i">VerifyAccountProperties</span>(<span class="r68 r">accounts</span>.<span class="i">First</span>(), <b>true</b>);
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<span class="i">VerifyAccountProperties</span>(<span class="r68 r">accounts</span>.<span class="i">ToArray</span>()[1], <b>true</b>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="058c92496fa632f5" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountListWithEncryptionTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r71 rd" class="r71 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r72 rd" class="r72 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r73 rd" class="r73 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r72 r">context</span>, <span class="r71 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r74 rd" class="r74 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r72 r">context</span>, <span class="r71 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r75 rd" class="r75 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r73 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r76 rd" class="r76 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r77 rd" class="r77 r">parameters</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#17336b838eeba66c" class="i method">GetDefaultStorageAccountParameters</a>();
                <span class="r77 r">parameters</span>.<span class="i">Encryption</span> = <b>new</b> <span class="t">Encryption</span>()
                {
                    <span class="i">Services</span> = <b>new</b> <span class="t">EncryptionServices</span> { <span class="i">Blob</span> = <b>new</b> <span class="t">EncryptionService</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#254c25ee74a8283b" class="i property">Enabled</a> = <b>true</b> }, <span class="i">File</span> = <b>new</b> <span class="t">EncryptionService</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#254c25ee74a8283b" class="i property">Enabled</a> = <b>true</b> } },
                    <a href="/Microsoft.Azure.Management.Storage/A.html#c72a62c75c0ef114" class="i property">KeySource</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#d14c96c947819d48" class="t t">KeySource</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#b509b0ff8449a11b" class="i field">MicrosoftStorage</a>
                };
                <span class="r74 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r75 r">rgname</span>, <span class="r76 r">accountName</span>, <span class="r77 r">parameters</span>);
 
                <span class="c">// List account and verify</span>
                <b>var</b> <span id="r78 rd" class="r78 r">accounts</span> = <span class="r74 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">ListByResourceGroup</span>(<span class="r75 r">rgname</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(1, <span class="r78 r">accounts</span>.<span class="i">Count</span>());
 
                <b>var</b> <span id="r79 rd" class="r79 r">account</span> = <span class="r78 r">accounts</span>.<span class="i">ToArray</span>()[0];
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<span class="i">VerifyAccountProperties</span>(<span class="r79 r">account</span>, <b>true</b>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r79 r">account</span>.<span class="i">Encryption</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r79 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Blob</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r79 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Blob</span>.<span class="i">Enabled</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r79 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Blob</span>.<span class="i">LastEnabledTime</span>);
 
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r79 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">File</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r79 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">File</span>.<span class="i">Enabled</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r79 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">File</span>.<span class="i">LastEnabledTime</span>);
 
                <b>if</b> (<b>null</b> != <span class="r79 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Table</span>)
                {
                    <b>if</b> (<span class="r79 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Table</span>.<span class="i">Enabled</span>.<span class="i">HasValue</span>)
                    {
                        <span class="i">Assert</span>.<span class="i">False</span>(<span class="r79 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Table</span>.<span class="i">LastEnabledTime</span>.<span class="i">HasValue</span>);
                    }
                }
 
                <b>if</b> (<b>null</b> != <span class="r79 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Queue</span>)
                {
                    <b>if</b> (<span class="r79 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Queue</span>.<span class="i">Enabled</span>.<span class="i">HasValue</span>)
                    {
                        <span class="i">Assert</span>.<span class="i">False</span>(<span class="r79 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Queue</span>.<span class="i">LastEnabledTime</span>.<span class="i">HasValue</span>);
                    }
                }
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="e72cfa474110bc72" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountListBySubscriptionTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r80 rd" class="r80 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r81 rd" class="r81 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r82 rd" class="r82 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r81 r">context</span>, <span class="r80 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r83 rd" class="r83 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r81 r">context</span>, <span class="r80 r">handler</span>);
 
 
                <span class="c">// Create resource group and storage account</span>
                <b>var</b> <span id="r84 rd" class="r84 r">rgname1</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r82 r">resourcesClient</span>);
                <b>string</b> <span id="r85 rd" class="r85 r">accountName1</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#e4a1b8b7f0893760" class="i method">CreateStorageAccount</a>(<span class="r83 r">storageMgmtClient</span>, <span class="r84 r">rgname1</span>);
 
                <span class="c">// Create different resource group and storage account</span>
                <b>var</b> <span id="r86 rd" class="r86 r">rgname2</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r82 r">resourcesClient</span>);
                <b>string</b> <span id="r87 rd" class="r87 r">accountName2</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#e4a1b8b7f0893760" class="i method">CreateStorageAccount</a>(<span class="r83 r">storageMgmtClient</span>, <span class="r86 r">rgname2</span>);
 
                <b>var</b> <span id="r88 rd" class="r88 r">accounts</span> = <span class="r83 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">List</span>();
 
                <a href="/Microsoft.Azure.Management.Storage/A.html#65392932a86ca1ed" class="t t">StorageAccount</a> <span id="r89 rd" class="r89 r">account1</span> = <span class="r88 r">accounts</span>.<span class="i">First</span>(
                    <span id="r90 rd" class="r90 r">t</span> =&gt; <span class="i">StringComparer</span>.<span class="i">OrdinalIgnoreCase</span>.<span class="i">Equals</span>(<span class="r90 r">t</span>.<span class="i">Name</span>, <span class="r85 r">accountName1</span>));
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#e17407daaf06bdaa" class="i method">VerifyAccountProperties</a>(<span class="r89 r">account1</span>, <b>true</b>);
 
                <a href="/Microsoft.Azure.Management.Storage/A.html#65392932a86ca1ed" class="t t">StorageAccount</a> <span id="r91 rd" class="r91 r">account2</span> = <span class="r88 r">accounts</span>.<span class="i">First</span>(
                    <span id="r92 rd" class="r92 r">t</span> =&gt; <span class="i">StringComparer</span>.<span class="i">OrdinalIgnoreCase</span>.<span class="i">Equals</span>(<span class="r92 r">t</span>.<span class="i">Name</span>, <span class="r87 r">accountName2</span>));
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#e17407daaf06bdaa" class="i method">VerifyAccountProperties</a>(<span class="r91 r">account2</span>, <b>true</b>);
 
                <b>while</b>(<span class="r88 r">accounts</span>.<span class="i">NextPageLink</span> != <b>null</b>)
                {
                    <span class="r88 r">accounts</span> = <span class="r83 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">ListNext</span>(<span class="r88 r">accounts</span>.<span class="i">NextPageLink</span>);
                }
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="874448efcd65618f" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountListKeysTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r93 rd" class="r93 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r94 rd" class="r94 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r95 rd" class="r95 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r94 r">context</span>, <span class="r93 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r96 rd" class="r96 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r94 r">context</span>, <span class="r93 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>string</b> <span id="r97 rd" class="r97 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r95 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r98 rd" class="r98 r">accountName</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#e4a1b8b7f0893760" class="i method">CreateStorageAccount</a>(<span class="r96 r">storageMgmtClient</span>, <span class="r97 r">rgname</span>);
 
                <span class="c">// List keys</span>
                <a href="/Microsoft.Azure.Management.Storage/A.html#ea663bb9e107f286" class="k">var</a> <span id="r99 rd" class="r99 r">keys</span> = <span class="r96 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">ListKeys</span>(<span class="r97 r">rgname</span>, <span class="r98 r">accountName</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r99 r">keys</span>);
 
                <span class="c">// Validate Key1</span>
                <a href="/Microsoft.Azure.Management.Storage/A.html#7156745e6d986721" class="t t">StorageAccountKey</a> <span id="r100 rd" class="r100 r">key1</span> = <span class="r99 r">keys</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#d19ed7e41e9d6ee1" class="i property">Keys</a>.<span class="i">First</span>(
                    <span id="r101 rd" class="r101 r">t</span> =&gt; <span class="i">StringComparer</span>.<span class="i">OrdinalIgnoreCase</span>.<span class="i">Equals</span>(<span class="r101 r">t</span>.<span class="i">KeyName</span>, <span class="s">&quot;key1&quot;</span>));
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r100 r">key1</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#a9076ec2b4830316" class="t t">KeyPermission</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#45785e4647e2d94b" class="i field">Full</a>, <span class="r100 r">key1</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#38558d3d5efc640b" class="i property">Permissions</a>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r100 r">key1</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#74855bd2152768f0" class="i property">Value</a>);
 
                <span class="c">// Validate Key2</span>
                <a href="/Microsoft.Azure.Management.Storage/A.html#7156745e6d986721" class="t t">StorageAccountKey</a> <span id="r102 rd" class="r102 r">key2</span> = <span class="r99 r">keys</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#d19ed7e41e9d6ee1" class="i property">Keys</a>.<span class="i">First</span>(
                    <span id="r103 rd" class="r103 r">t</span> =&gt; <span class="i">StringComparer</span>.<span class="i">OrdinalIgnoreCase</span>.<span class="i">Equals</span>(<span class="r103 r">t</span>.<span class="i">KeyName</span>, <span class="s">&quot;key2&quot;</span>));
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r102 r">key2</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#a9076ec2b4830316" class="t t">KeyPermission</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#45785e4647e2d94b" class="i field">Full</a>, <span class="r102 r">key2</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#38558d3d5efc640b" class="i property">Permissions</a>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r102 r">key2</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#74855bd2152768f0" class="i property">Value</a>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="4d9017fcf255315c" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountRegenerateKeyTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r104 rd" class="r104 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r105 rd" class="r105 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r106 rd" class="r106 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r105 r">context</span>, <span class="r104 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r107 rd" class="r107 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r105 r">context</span>, <span class="r104 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>string</b> <span id="r108 rd" class="r108 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r106 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r109 rd" class="r109 r">accountName</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#e4a1b8b7f0893760" class="i method">CreateStorageAccount</a>(<span class="r107 r">storageMgmtClient</span>, <span class="r108 r">rgname</span>);
 
                <span class="c">// List keys</span>
                <a href="/Microsoft.Azure.Management.Storage/A.html#ea663bb9e107f286" class="k">var</a> <span id="r110 rd" class="r110 r">keys</span> = <span class="r107 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">ListKeys</span>(<span class="r108 r">rgname</span>, <span class="r109 r">accountName</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r110 r">keys</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#7156745e6d986721" class="t t">StorageAccountKey</a> <span id="r111 rd" class="r111 r">key2</span> = <span class="r110 r">keys</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#d19ed7e41e9d6ee1" class="i property">Keys</a>.<span class="i">First</span>(
                    <span id="r112 rd" class="r112 r">t</span> =&gt; <span class="i">StringComparer</span>.<span class="i">OrdinalIgnoreCase</span>.<span class="i">Equals</span>(<span class="r112 r">t</span>.<span class="i">KeyName</span>, <span class="s">&quot;key2&quot;</span>));
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r111 r">key2</span>);
 
                <span class="c">// Regenerate keys and verify that keys change</span>
                <a href="/Microsoft.Azure.Management.Storage/A.html#ea663bb9e107f286" class="k">var</a> <span id="r113 rd" class="r113 r">regenKeys</span> = <span class="r107 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">RegenerateKey</span>(<span class="r108 r">rgname</span>, <span class="r109 r">accountName</span>, <span class="s">&quot;key2&quot;</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#7156745e6d986721" class="t t">StorageAccountKey</a> <span id="r114 rd" class="r114 r">key2Regen</span> = <span class="r113 r">regenKeys</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#d19ed7e41e9d6ee1" class="i property">Keys</a>.<span class="i">First</span>(
                    <span id="r115 rd" class="r115 r">t</span> =&gt; <span class="i">StringComparer</span>.<span class="i">OrdinalIgnoreCase</span>.<span class="i">Equals</span>(<span class="r115 r">t</span>.<span class="i">KeyName</span>, <span class="s">&quot;key2&quot;</span>));
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r114 r">key2Regen</span>);
 
                <span class="c">// Validate key was regenerated</span>
                <span class="i">Assert</span>.<span class="i">NotEqual</span>(<span class="r111 r">key2</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#74855bd2152768f0" class="i property">Value</a>, <span class="r114 r">key2Regen</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#74855bd2152768f0" class="i property">Value</a>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="edd18f90675d73ac" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountRevokeUserDelegationKeysTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r116 rd" class="r116 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r117 rd" class="r117 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r118 rd" class="r118 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r117 r">context</span>, <span class="r116 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r119 rd" class="r119 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r117 r">context</span>, <span class="r116 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>string</b> <span id="r120 rd" class="r120 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r118 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r121 rd" class="r121 r">accountName</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#e4a1b8b7f0893760" class="i method">CreateStorageAccount</a>(<span class="r119 r">storageMgmtClient</span>, <span class="r120 r">rgname</span>);
 
                <span class="c">// Revoke User DelegationKeys</span>
                <span class="r119 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">RevokeUserDelegationKeys</span>(<span class="r120 r">rgname</span>, <span class="r121 r">accountName</span>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="0f08507bcb5dddc3" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountCheckNameTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r122 rd" class="r122 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r123 rd" class="r123 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r124 rd" class="r124 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r123 r">context</span>, <span class="r122 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r125 rd" class="r125 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r123 r">context</span>, <span class="r122 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>string</b> <span id="r126 rd" class="r126 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r124 r">resourcesClient</span>);
 
                <span class="c">// Check valid name</span>
                <b>string</b> <span id="r127 rd" class="r127 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#fd414c60c3becaa8" class="k">var</a> <span id="r128 rd" class="r128 r">checkNameRequest</span> = <span class="r125 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">CheckNameAvailability</span>(<span class="r127 r">accountName</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r128 r">checkNameRequest</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#8eb833e765a247a9" class="i property">NameAvailable</a>);
                <span class="i">Assert</span>.<span class="i">Null</span>(<span class="r128 r">checkNameRequest</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#3a60394d45993a08" class="i property">Reason</a>);
                <span class="i">Assert</span>.<span class="i">Null</span>(<span class="r128 r">checkNameRequest</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#614a54ff989165a5" class="i property">Message</a>);
 
                <span class="c">// Check invalid name</span>
                <span class="r127 r">accountName</span> = <span class="s">&quot;CAPS&quot;</span>;
                <span class="r128 r">checkNameRequest</span> = <span class="r125 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">CheckNameAvailability</span>(<span class="r127 r">accountName</span>);
                <span class="i">Assert</span>.<span class="i">False</span>(<span class="r128 r">checkNameRequest</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#8eb833e765a247a9" class="i property">NameAvailable</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#7ba9e4fd0b0a37ef" class="t t">Reason</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#5bf78b79288b93c5" class="i field">AccountNameInvalid</a>, <span class="r128 r">checkNameRequest</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#3a60394d45993a08" class="i property">Reason</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;CAPS is not a valid storage account name. Storage account name must be between 3 and 24 &quot;</span>
                    + <span class="s">&quot;characters in length and use numbers and lower-case letters only.&quot;</span>, <span class="r128 r">checkNameRequest</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#614a54ff989165a5" class="i property">Message</a>);
 
                <span class="c">// Check name of account that already exists</span>
                <span class="r127 r">accountName</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#e4a1b8b7f0893760" class="i method">CreateStorageAccount</a>(<span class="r125 r">storageMgmtClient</span>, <span class="r126 r">rgname</span>);
                <span class="r128 r">checkNameRequest</span> = <span class="r125 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">CheckNameAvailability</span>(<span class="r127 r">accountName</span>);
                <span class="i">Assert</span>.<span class="i">False</span>(<span class="r128 r">checkNameRequest</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#8eb833e765a247a9" class="i property">NameAvailable</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#7ba9e4fd0b0a37ef" class="t t">Reason</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#f4703d9c9dd442c1" class="i field">AlreadyExists</a>, <span class="r128 r">checkNameRequest</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#3a60394d45993a08" class="i property">Reason</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;The storage account named &quot;</span> + <span class="r127 r">accountName</span> + <span class="s">&quot; is already taken.&quot;</span>, <span class="r128 r">checkNameRequest</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#614a54ff989165a5" class="i property">Message</a>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="8602bb94f58e57c2" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountUpdateWithCreateTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r129 rd" class="r129 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r130 rd" class="r130 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r131 rd" class="r131 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r130 r">context</span>, <span class="r129 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r132 rd" class="r132 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r130 r">context</span>, <span class="r129 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r133 rd" class="r133 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r131 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r134 rd" class="r134 r">accountName</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#e4a1b8b7f0893760" class="i method">CreateStorageAccount</a>(<span class="r132 r">storageMgmtClient</span>, <span class="r133 r">rgname</span>);
 
                <span class="c">// Update storage account type</span>
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r135 rd" class="r135 r">parameters</span> = <b>new</b> <span class="t">StorageAccountCreateParameters</span>
                {
                    <a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#0a5812a9fdf2fdfe" class="i field">DefaultLocation</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#fd3939f069de73f7" class="i field">Storage</a>,
                    <span class="i">Sku</span> = <b>new</b> <span class="t">Sku</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e9da3fc1a9ac45de" class="i field">StandardLRS</a> }
                };
                <b>var</b> <span id="r136 rd" class="r136 r">account</span> = <span class="r132 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r133 r">rgname</span>, <span class="r134 r">accountName</span>, <span class="r135 r">parameters</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e9da3fc1a9ac45de" class="i field">StandardLRS</a>, <span class="r136 r">account</span>.<span class="i">Sku</span>.<span class="i">Name</span>);
 
                <span class="c">// Validate</span>
                <span class="r136 r">account</span> = <span class="r132 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r133 r">rgname</span>, <span class="r134 r">accountName</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e9da3fc1a9ac45de" class="i field">StandardLRS</a>, <span class="r136 r">account</span>.<span class="i">Sku</span>.<span class="i">Name</span>);
 
                <span class="c">// Update storage tags</span>
                <span class="r135 r">parameters</span> = <b>new</b> <span class="t">StorageAccountCreateParameters</span>
                {
                    <a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#0a5812a9fdf2fdfe" class="i field">DefaultLocation</a>,
                    <span class="i">Sku</span> = <b>new</b> <span class="t">Sku</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#1652dcc14f069d5f" class="i field">DefaultSkuName</a> },
                    <a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#fd3939f069de73f7" class="i field">Storage</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#19ddda86a6885557" class="i property">Tags</a> = <b>new</b> <span class="i">Dictionary</span>&lt;<b>string</b>, <b>string</b>&gt;
                    {
                        {<span class="s">&quot;key3&quot;</span>,<span class="s">&quot;value3&quot;</span>},
                        {<span class="s">&quot;key4&quot;</span>,<span class="s">&quot;value4&quot;</span>},
                        {<span class="s">&quot;key5&quot;</span>,<span class="s">&quot;value6&quot;</span>}
                    }
                };
                <span class="r136 r">account</span> = <span class="r132 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r133 r">rgname</span>, <span class="r134 r">accountName</span>, <span class="r135 r">parameters</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r136 r">account</span>.<span class="i">Tags</span>.<span class="i">Count</span>, <span class="r135 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#19ddda86a6885557" class="i property">Tags</a>.<span class="i">Count</span>);
 
                <span class="c">// Validate</span>
                <span class="r136 r">account</span> = <span class="r132 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r133 r">rgname</span>, <span class="r134 r">accountName</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r136 r">account</span>.<span class="i">Tags</span>.<span class="i">Count</span>, <span class="r135 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#19ddda86a6885557" class="i property">Tags</a>.<span class="i">Count</span>);
 
                <span class="c">// Update storage encryption</span>
                <span class="r135 r">parameters</span> = <b>new</b> <span class="t">StorageAccountCreateParameters</span>
                {
                    <a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#0a5812a9fdf2fdfe" class="i field">DefaultLocation</a>,
                    <span class="i">Sku</span> = <b>new</b> <span class="t">Sku</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#1652dcc14f069d5f" class="i field">DefaultSkuName</a> },
                    <a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#fd3939f069de73f7" class="i field">Storage</a>,
                    <span class="i">Encryption</span> = <b>new</b> <span class="t">Encryption</span>()
                    {
                        <span class="i">Services</span> = <b>new</b> <span class="t">EncryptionServices</span> { <span class="i">Blob</span> = <b>new</b> <span class="t">EncryptionService</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#254c25ee74a8283b" class="i property">Enabled</a> = <b>true</b> }, <span class="i">File</span> = <b>new</b> <span class="t">EncryptionService</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#254c25ee74a8283b" class="i property">Enabled</a> = <b>true</b> } },
                        <a href="/Microsoft.Azure.Management.Storage/A.html#c72a62c75c0ef114" class="i property">KeySource</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#d14c96c947819d48" class="t t">KeySource</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#b509b0ff8449a11b" class="i field">MicrosoftStorage</a>
                    }
                };
                <span class="r136 r">account</span> = <span class="r132 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r133 r">rgname</span>, <span class="r134 r">accountName</span>, <span class="r135 r">parameters</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r136 r">account</span>.<span class="i">Encryption</span>);
 
                <span class="c">// Validate</span>
                <span class="r136 r">account</span> = <span class="r132 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r133 r">rgname</span>, <span class="r134 r">accountName</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r136 r">account</span>.<span class="i">Encryption</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r136 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Blob</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r136 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Blob</span>.<span class="i">Enabled</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r136 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Blob</span>.<span class="i">LastEnabledTime</span>);
 
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r136 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">File</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r136 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">File</span>.<span class="i">Enabled</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r136 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">File</span>.<span class="i">LastEnabledTime</span>);
 
                <b>if</b> (<b>null</b> != <span class="r136 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Table</span>)
                {
                    <b>if</b> (<span class="r136 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Table</span>.<span class="i">Enabled</span>.<span class="i">HasValue</span>)
                    {
                        <span class="i">Assert</span>.<span class="i">False</span>(<span class="r136 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Table</span>.<span class="i">LastEnabledTime</span>.<span class="i">HasValue</span>);
                    }
                }
 
                <b>if</b> (<b>null</b> != <span class="r136 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Queue</span>)
                {
                    <b>if</b> (<span class="r136 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Queue</span>.<span class="i">Enabled</span>.<span class="i">HasValue</span>)
                    {
                        <span class="i">Assert</span>.<span class="i">False</span>(<span class="r136 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Queue</span>.<span class="i">LastEnabledTime</span>.<span class="i">HasValue</span>);
                    }
                }
 
                <span class="c">// Update storage custom domains</span>
                <span class="r135 r">parameters</span> = <b>new</b> <span class="t">StorageAccountCreateParameters</span>
                {
                    <a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#0a5812a9fdf2fdfe" class="i field">DefaultLocation</a>,
                    <span class="i">Sku</span> = <b>new</b> <span class="t">Sku</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#1652dcc14f069d5f" class="i field">DefaultSkuName</a> },
                    <a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#fd3939f069de73f7" class="i field">Storage</a>,
                    <span class="i">CustomDomain</span> = <b>new</b> <span class="t">CustomDomain</span>
                    {
                        <a href="/Microsoft.Azure.Management.Storage/A.html#68962c7ca83bf77f" class="i property">Name</a> = <span class="s">&quot;foo.example.com&quot;</span>,
                        <a href="/Microsoft.Azure.Management.Storage/A.html#c89b7d6c071667dc" class="i property">UseSubDomainName</a> = <b>true</b>
                    }
                };
 
                <b>try</b>
                {
                    <span class="r132 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r133 r">rgname</span>, <span class="r134 r">accountName</span>, <span class="r135 r">parameters</span>);
                    <span class="i">Assert</span>.<span class="i">True</span>(<b>false</b>, <span class="s">&quot;This request should fail with the below code.&quot;</span>);
                }
                <b>catch</b> (<span class="i">CloudException</span> <span id="r137 rd" class="r137 r">ex</span>)
                {
                    <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="i">HttpStatusCode</span>.<span class="i">Conflict</span>, <span class="r137 r">ex</span>.<span class="i">Response</span>.<span class="i">StatusCode</span>);
                    <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;StorageDomainNameCouldNotVerify&quot;</span>, <span class="r137 r">ex</span>.<span class="i">Body</span>.<span class="i">Code</span>);
                    <span class="i">Assert</span>.<span class="i">True</span>(<span class="r137 r">ex</span>.<span class="i">Message</span> != <b>null</b> &amp;&amp; <span class="r137 r">ex</span>.<span class="i">Message</span>.<span class="i">StartsWith</span>(<span class="s">&quot;The custom domain &quot;</span> +
                        <span class="s">&quot;name could not be verified. CNAME mapping from foo.example.com to &quot;</span>));
                }
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="bdc100ab0222716f" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountUpdateTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r138 rd" class="r138 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r139 rd" class="r139 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r140 rd" class="r140 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r139 r">context</span>, <span class="r138 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r141 rd" class="r141 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r139 r">context</span>, <span class="r138 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r142 rd" class="r142 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r140 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r143 rd" class="r143 r">accountName</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#e4a1b8b7f0893760" class="i method">CreateStorageAccount</a>(<span class="r141 r">storageMgmtClient</span>, <span class="r142 r">rgname</span>);
 
                <span class="c">// Update storage account type</span>
                <a href="/Microsoft.Azure.Management.Storage/A.html#c031ad46f74edc74" class="k">var</a> <span id="r144 rd" class="r144 r">parameters</span> = <b>new</b> <span class="t">StorageAccountUpdateParameters</span>
                {
                    <span class="i">Sku</span> = <b>new</b> <span class="t">Sku</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e9da3fc1a9ac45de" class="i field">StandardLRS</a> }
                };
                <b>var</b> <span id="r145 rd" class="r145 r">account</span> = <span class="r141 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Update</span>(<span class="r142 r">rgname</span>, <span class="r143 r">accountName</span>, <span class="r144 r">parameters</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e9da3fc1a9ac45de" class="i field">StandardLRS</a>, <span class="r145 r">account</span>.<span class="i">Sku</span>.<span class="i">Name</span>);
 
                <span class="c">// Validate</span>
                <span class="r145 r">account</span> = <span class="r141 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r142 r">rgname</span>, <span class="r143 r">accountName</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e9da3fc1a9ac45de" class="i field">StandardLRS</a>, <span class="r145 r">account</span>.<span class="i">Sku</span>.<span class="i">Name</span>);
 
                <span class="c">// Update storage tags</span>
                <span class="r144 r">parameters</span> = <b>new</b> <span class="t">StorageAccountUpdateParameters</span>
                {
                    <a href="/Microsoft.Azure.Management.Storage/A.html#3c7191328eef1124" class="i property">Tags</a> = <b>new</b> <span class="i">Dictionary</span>&lt;<b>string</b>, <b>string</b>&gt;
                    {
                        {<span class="s">&quot;key3&quot;</span>,<span class="s">&quot;value3&quot;</span>},
                        {<span class="s">&quot;key4&quot;</span>,<span class="s">&quot;value4&quot;</span>},
                        {<span class="s">&quot;key5&quot;</span>,<span class="s">&quot;value6&quot;</span>}
                    }
                };
                <span class="r145 r">account</span> = <span class="r141 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Update</span>(<span class="r142 r">rgname</span>, <span class="r143 r">accountName</span>, <span class="r144 r">parameters</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r145 r">account</span>.<span class="i">Tags</span>.<span class="i">Count</span>, <span class="r144 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#3c7191328eef1124" class="i property">Tags</a>.<span class="i">Count</span>);
 
                <span class="c">// Validate</span>
                <span class="r145 r">account</span> = <span class="r141 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r142 r">rgname</span>, <span class="r143 r">accountName</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r145 r">account</span>.<span class="i">Tags</span>.<span class="i">Count</span>, <span class="r144 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#3c7191328eef1124" class="i property">Tags</a>.<span class="i">Count</span>);
 
                <span class="c">// Update storage encryption</span>
                <span class="r144 r">parameters</span> = <b>new</b> <span class="t">StorageAccountUpdateParameters</span>
                {
                    <span class="i">Encryption</span> = <b>new</b> <span class="t">Encryption</span>()
                    {
                        <span class="i">Services</span> = <b>new</b> <span class="t">EncryptionServices</span> { <span class="i">Blob</span> = <b>new</b> <span class="t">EncryptionService</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#254c25ee74a8283b" class="i property">Enabled</a> = <b>true</b> }, <span class="i">File</span> = <b>new</b> <span class="t">EncryptionService</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#254c25ee74a8283b" class="i property">Enabled</a> = <b>true</b> } },
                        <a href="/Microsoft.Azure.Management.Storage/A.html#c72a62c75c0ef114" class="i property">KeySource</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#d14c96c947819d48" class="t t">KeySource</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#b509b0ff8449a11b" class="i field">MicrosoftStorage</a>
                    }
                };
                <span class="r145 r">account</span> = <span class="r141 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Update</span>(<span class="r142 r">rgname</span>, <span class="r143 r">accountName</span>, <span class="r144 r">parameters</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r145 r">account</span>.<span class="i">Encryption</span>);
 
                <span class="c">// Validate</span>
                <span class="r145 r">account</span> = <span class="r141 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r142 r">rgname</span>, <span class="r143 r">accountName</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r145 r">account</span>.<span class="i">Encryption</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r145 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Blob</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r145 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Blob</span>.<span class="i">Enabled</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r145 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Blob</span>.<span class="i">LastEnabledTime</span>);
 
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r145 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">File</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r145 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">File</span>.<span class="i">Enabled</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r145 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">File</span>.<span class="i">LastEnabledTime</span>);
 
                <b>if</b> (<b>null</b> != <span class="r145 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Table</span>)
                {
                    <b>if</b> (<span class="r145 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Table</span>.<span class="i">Enabled</span>.<span class="i">HasValue</span>)
                    {
                        <span class="i">Assert</span>.<span class="i">False</span>(<span class="r145 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Table</span>.<span class="i">LastEnabledTime</span>.<span class="i">HasValue</span>);
                    }
                }
 
                <b>if</b> (<b>null</b> != <span class="r145 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Queue</span>)
                {
                    <b>if</b> (<span class="r145 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Queue</span>.<span class="i">Enabled</span>.<span class="i">HasValue</span>)
                    {
                        <span class="i">Assert</span>.<span class="i">False</span>(<span class="r145 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Queue</span>.<span class="i">LastEnabledTime</span>.<span class="i">HasValue</span>);
                    }
                }
 
                <span class="c">// Update storage custom domains</span>
                <span class="r144 r">parameters</span> = <b>new</b> <span class="t">StorageAccountUpdateParameters</span>
                {
                    <span class="i">CustomDomain</span> = <b>new</b> <span class="t">CustomDomain</span>
                    {
                        <a href="/Microsoft.Azure.Management.Storage/A.html#68962c7ca83bf77f" class="i property">Name</a> = <span class="s">&quot;foo.example.com&quot;</span>,
                        <a href="/Microsoft.Azure.Management.Storage/A.html#c89b7d6c071667dc" class="i property">UseSubDomainName</a> = <b>true</b>
                    }
                };
 
                <b>try</b>
                {
                    <span class="r141 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Update</span>(<span class="r142 r">rgname</span>, <span class="r143 r">accountName</span>, <span class="r144 r">parameters</span>);
                    <span class="i">Assert</span>.<span class="i">True</span>(<b>false</b>, <span class="s">&quot;This request should fail with the below code.&quot;</span>);
                }
                <b>catch</b> (<span class="i">CloudException</span> <span id="r146 rd" class="r146 r">ex</span>)
                {
                    <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="i">HttpStatusCode</span>.<span class="i">Conflict</span>, <span class="r146 r">ex</span>.<span class="i">Response</span>.<span class="i">StatusCode</span>);
                    <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;StorageDomainNameCouldNotVerify&quot;</span>, <span class="r146 r">ex</span>.<span class="i">Body</span>.<span class="i">Code</span>);
                    <span class="i">Assert</span>.<span class="i">True</span>(<span class="r146 r">ex</span>.<span class="i">Message</span> != <b>null</b> &amp;&amp; <span class="r146 r">ex</span>.<span class="i">Message</span>.<span class="i">StartsWith</span>(<span class="s">&quot;The custom domain &quot;</span> +
                        <span class="s">&quot;name could not be verified. CNAME mapping from foo.example.com to &quot;</span>));
                }
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="8b7799ffb0ae994a" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountUpdateMultipleTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r147 rd" class="r147 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r148 rd" class="r148 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r149 rd" class="r149 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r148 r">context</span>, <span class="r147 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r150 rd" class="r150 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r148 r">context</span>, <span class="r147 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r151 rd" class="r151 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r149 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r152 rd" class="r152 r">accountName</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#e4a1b8b7f0893760" class="i method">CreateStorageAccount</a>(<span class="r150 r">storageMgmtClient</span>, <span class="r151 r">rgname</span>);
 
                <span class="c">// Update storage account type</span>
                <a href="/Microsoft.Azure.Management.Storage/A.html#c031ad46f74edc74" class="k">var</a> <span id="r153 rd" class="r153 r">parameters</span> = <b>new</b> <span class="t">StorageAccountUpdateParameters</span>
                {
                    <span class="i">Sku</span> = <b>new</b> <span class="t">Sku</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e9da3fc1a9ac45de" class="i field">StandardLRS</a> },
                    <a href="/Microsoft.Azure.Management.Storage/A.html#3c7191328eef1124" class="i property">Tags</a> = <b>new</b> <span class="i">Dictionary</span>&lt;<b>string</b>, <b>string</b>&gt;
                    {
                        {<span class="s">&quot;key3&quot;</span>,<span class="s">&quot;value3&quot;</span>},
                        {<span class="s">&quot;key4&quot;</span>,<span class="s">&quot;value4&quot;</span>},
                        {<span class="s">&quot;key5&quot;</span>,<span class="s">&quot;value6&quot;</span>}
                    }
                };
                <b>var</b> <span id="r154 rd" class="r154 r">account</span> = <span class="r150 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Update</span>(<span class="r151 r">rgname</span>, <span class="r152 r">accountName</span>, <span class="r153 r">parameters</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e9da3fc1a9ac45de" class="i field">StandardLRS</a>, <span class="r154 r">account</span>.<span class="i">Sku</span>.<span class="i">Name</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r154 r">account</span>.<span class="i">Tags</span>.<span class="i">Count</span>, <span class="r153 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#3c7191328eef1124" class="i property">Tags</a>.<span class="i">Count</span>);
 
                <span class="c">// Validate</span>
                <span class="r154 r">account</span> = <span class="r150 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r151 r">rgname</span>, <span class="r152 r">accountName</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e9da3fc1a9ac45de" class="i field">StandardLRS</a>, <span class="r154 r">account</span>.<span class="i">Sku</span>.<span class="i">Name</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r154 r">account</span>.<span class="i">Tags</span>.<span class="i">Count</span>, <span class="r153 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#3c7191328eef1124" class="i property">Tags</a>.<span class="i">Count</span>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="3ccda5620f20ec6a" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountLocationUsageTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r155 rd" class="r155 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r156 rd" class="r156 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r157 rd" class="r157 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r156 r">context</span>, <span class="r155 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r158 rd" class="r158 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r156 r">context</span>, <span class="r155 r">handler</span>);
 
                <span class="c">// Query usage</span>
                <b>string</b> <span id="r159 rd" class="r159 r">Location</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#0a5812a9fdf2fdfe" class="i field">DefaultLocation</a>;
                <b>var</b> <span id="r160 rd" class="r160 r">usages</span> = <span class="r158 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#58620ec782757567" class="i property">Usages</a>.<span class="i">ListByLocation</span>(<span class="r159 r">Location</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(1, <span class="r160 r">usages</span>.<span class="i">Count</span>());
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#8b4c94a322980af7" class="t t">UsageUnit</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#33a682bdf134a1fb" class="i field">Count</a>, <span class="r160 r">usages</span>.<span class="i">First</span>().<span class="i">Unit</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r160 r">usages</span>.<span class="i">First</span>().<span class="i">CurrentValue</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(250, <span class="r160 r">usages</span>.<span class="i">First</span>().<span class="i">Limit</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r160 r">usages</span>.<span class="i">First</span>().<span class="i">Name</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;StorageAccounts&quot;</span>, <span class="r160 r">usages</span>.<span class="i">First</span>().<span class="i">Name</span>.<span class="i">Value</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;Storage Accounts&quot;</span>, <span class="r160 r">usages</span>.<span class="i">First</span>().<span class="i">Name</span>.<span class="i">LocalizedValue</span>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="415bd064ecd6558a" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountGetOperationsTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r161 rd" class="r161 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r162 rd" class="r162 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r163 rd" class="r163 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r162 r">context</span>, <span class="r161 r">handler</span>);
                <b>var</b> <span id="r164 rd" class="r164 r">ops</span> = <span class="r163 r">resourcesClient</span>.<span class="i">ResourceProviderOperationDetails</span>.<span class="i">List</span>(<span class="s">&quot;Microsoft.Storage&quot;</span>, <span class="s">&quot;2015-06-15&quot;</span>);
 
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r164 r">ops</span>.<span class="i">Count</span>() &gt; 1);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="4397c277731a50ee" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountListAccountSASTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r165 rd" class="r165 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r166 rd" class="r166 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r167 rd" class="r167 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r166 r">context</span>, <span class="r165 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r168 rd" class="r168 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r166 r">context</span>, <span class="r165 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r169 rd" class="r169 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r167 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r170 rd" class="r170 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <span class="r168 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r169 r">rgname</span>, <span class="r170 r">accountName</span>, <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#17336b838eeba66c" class="i method">GetDefaultStorageAccountParameters</a>());
 
                <a href="/Microsoft.Azure.Management.Storage/A.html#7e79d5bbf8c08385" class="k">var</a> <span id="r171 rd" class="r171 r">accountSasParameters</span> = <b>new</b> <span class="t">AccountSasParameters</span>()
                {
                    <a href="/Microsoft.Azure.Management.Storage/A.html#4540f66ee65d3e4b" class="i property">Services</a> = <span class="s">&quot;bftq&quot;</span>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#33c623497a7937a6" class="i property">ResourceTypes</a> = <span class="s">&quot;sco&quot;</span>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#340000d9ca09dd6f" class="i property">Permissions</a> = <span class="s">&quot;rdwlacup&quot;</span>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#efed5334e2389100" class="i property">Protocols</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#6bf692f114463891" class="t t">HttpProtocol</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#8b5687da67af40ac" class="i field">Httpshttp</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#725d2f7b6e1339cd" class="i property">SharedAccessStartTime</a> = <span class="i">DateTime</span>.<span class="i">UtcNow</span>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#0e2d6cb570159b03" class="i property">SharedAccessExpiryTime</a> = <span class="i">DateTime</span>.<span class="i">UtcNow</span>.<span class="i">AddHours</span>(1),
                    <a href="/Microsoft.Azure.Management.Storage/A.html#55e7ba1ae87484ad" class="i property">KeyToSign</a> = <span class="s">&quot;key1&quot;</span>
                };
                <a href="/Microsoft.Azure.Management.Storage/A.html#018a9d5c5ebffbbd" class="k">var</a> <span id="r172 rd" class="r172 r">result</span> = <span class="r168 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">ListAccountSAS</span>(<span class="r169 r">rgname</span>, <span class="r170 r">accountName</span>, <span class="r171 r">accountSasParameters</span>);
 
                <a href="/Microsoft.Azure.Management.Storage/A.html#7e79d5bbf8c08385" class="k">var</a> <span id="r173 rd" class="r173 r">resultCredentials</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d2a4d96814c61437" class="i method">ParseAccountSASToken</a>(<span class="r172 r">result</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#ce8691f2ab4dba9d" class="i property">AccountSasToken</a>);
 
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r171 r">accountSasParameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#4540f66ee65d3e4b" class="i property">Services</a>, <span class="r173 r">resultCredentials</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#4540f66ee65d3e4b" class="i property">Services</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r171 r">accountSasParameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#33c623497a7937a6" class="i property">ResourceTypes</a>, <span class="r173 r">resultCredentials</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#33c623497a7937a6" class="i property">ResourceTypes</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r171 r">accountSasParameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#340000d9ca09dd6f" class="i property">Permissions</a>, <span class="r173 r">resultCredentials</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#340000d9ca09dd6f" class="i property">Permissions</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r171 r">accountSasParameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#efed5334e2389100" class="i property">Protocols</a>, <span class="r173 r">resultCredentials</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#efed5334e2389100" class="i property">Protocols</a>);
 
                <span class="c">//Assert.Equal(accountSasParameters.SharedAccessStartTime, resultCredentials.SharedAccessStartTime);</span>
 
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r171 r">accountSasParameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#725d2f7b6e1339cd" class="i property">SharedAccessStartTime</a>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r171 r">accountSasParameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#0e2d6cb570159b03" class="i property">SharedAccessExpiryTime</a>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="f9201abc5b651552" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountListAccountSASWithDefaultProperties</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r174 rd" class="r174 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r175 rd" class="r175 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r176 rd" class="r176 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r175 r">context</span>, <span class="r174 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r177 rd" class="r177 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r175 r">context</span>, <span class="r174 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r178 rd" class="r178 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r176 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r179 rd" class="r179 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <span class="r177 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r178 r">rgname</span>, <span class="r179 r">accountName</span>, <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#17336b838eeba66c" class="i method">GetDefaultStorageAccountParameters</a>());
 
                <span class="c">// Test for default values of sas credentials.</span>
                <a href="/Microsoft.Azure.Management.Storage/A.html#7e79d5bbf8c08385" class="k">var</a> <span id="r180 rd" class="r180 r">accountSasParameters</span> = <b>new</b> <span class="t">AccountSasParameters</span>()
                {
                    <a href="/Microsoft.Azure.Management.Storage/A.html#4540f66ee65d3e4b" class="i property">Services</a> = <span class="s">&quot;b&quot;</span>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#33c623497a7937a6" class="i property">ResourceTypes</a> = <span class="s">&quot;sco&quot;</span>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#340000d9ca09dd6f" class="i property">Permissions</a> = <span class="s">&quot;rl&quot;</span>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#0e2d6cb570159b03" class="i property">SharedAccessExpiryTime</a> = <span class="i">DateTime</span>.<span class="i">UtcNow</span>.<span class="i">AddHours</span>(1),
                };
 
                <a href="/Microsoft.Azure.Management.Storage/A.html#018a9d5c5ebffbbd" class="k">var</a> <span id="r181 rd" class="r181 r">result</span> = <span class="r177 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">ListAccountSAS</span>(<span class="r178 r">rgname</span>, <span class="r179 r">accountName</span>, <span class="r180 r">accountSasParameters</span>);
 
                <a href="/Microsoft.Azure.Management.Storage/A.html#7e79d5bbf8c08385" class="k">var</a> <span id="r182 rd" class="r182 r">resultCredentials</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d2a4d96814c61437" class="i method">ParseAccountSASToken</a>(<span class="r181 r">result</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#ce8691f2ab4dba9d" class="i property">AccountSasToken</a>);
 
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r180 r">accountSasParameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#4540f66ee65d3e4b" class="i property">Services</a>, <span class="r182 r">resultCredentials</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#4540f66ee65d3e4b" class="i property">Services</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r180 r">accountSasParameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#33c623497a7937a6" class="i property">ResourceTypes</a>, <span class="r182 r">resultCredentials</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#33c623497a7937a6" class="i property">ResourceTypes</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r180 r">accountSasParameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#340000d9ca09dd6f" class="i property">Permissions</a>, <span class="r182 r">resultCredentials</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#340000d9ca09dd6f" class="i property">Permissions</a>);
 
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r180 r">accountSasParameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#0e2d6cb570159b03" class="i property">SharedAccessExpiryTime</a>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="326274d598a1f37d" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountListAccountSASWithMissingProperties</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r183 rd" class="r183 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r184 rd" class="r184 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r185 rd" class="r185 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r184 r">context</span>, <span class="r183 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r186 rd" class="r186 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r184 r">context</span>, <span class="r183 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r187 rd" class="r187 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r185 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r188 rd" class="r188 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <span class="r186 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r187 r">rgname</span>, <span class="r188 r">accountName</span>, <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#17336b838eeba66c" class="i method">GetDefaultStorageAccountParameters</a>());
 
                <span class="c">// Test for default values of sas credentials.</span>
                <a href="/Microsoft.Azure.Management.Storage/A.html#7e79d5bbf8c08385" class="k">var</a> <span id="r189 rd" class="r189 r">accountSasParameters</span> = <b>new</b> <span class="t">AccountSasParameters</span>()
                {
                    <a href="/Microsoft.Azure.Management.Storage/A.html#4540f66ee65d3e4b" class="i property">Services</a> = <span class="s">&quot;b&quot;</span>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#33c623497a7937a6" class="i property">ResourceTypes</a> = <span class="s">&quot;sco&quot;</span>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#340000d9ca09dd6f" class="i property">Permissions</a> = <span class="s">&quot;rl&quot;</span>,
                };
                <b>try</b>
                {
                    <a href="/Microsoft.Azure.Management.Storage/A.html#018a9d5c5ebffbbd" class="k">var</a> <span id="r190 rd" class="r190 r">result</span> = <span class="r186 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">ListAccountSAS</span>(<span class="r187 r">rgname</span>, <span class="r188 r">accountName</span>, <span class="r189 r">accountSasParameters</span>);
                    <a href="/Microsoft.Azure.Management.Storage/A.html#7e79d5bbf8c08385" class="k">var</a> <span id="r191 rd" class="r191 r">resultCredentials</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d2a4d96814c61437" class="i method">ParseAccountSASToken</a>(<span class="r190 r">result</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#ce8691f2ab4dba9d" class="i property">AccountSasToken</a>);
                }
                <b>catch</b> (<span class="i">Exception</span> <span id="r192 rd" class="r192 r">ex</span>)
                {
                    <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;Values for request parameters are invalid: signedExpiry.&quot;</span>, <span class="r192 r">ex</span>.<span class="i">Message</span>);
                    <b>return</b>;
                }
                <b>throw</b> <b>new</b> <span class="i">Exception</span>(<span class="s">&quot;AccountSasToken shouldn&#39;t be returned without SharedAccessExpiryTime&quot;</span>);
            }
        }
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="4067303a0649654b" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountListServiceSASTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r193 rd" class="r193 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r194 rd" class="r194 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r195 rd" class="r195 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r194 r">context</span>, <span class="r193 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r196 rd" class="r196 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r194 r">context</span>, <span class="r193 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r197 rd" class="r197 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r195 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r198 rd" class="r198 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <span class="r196 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r197 r">rgname</span>, <span class="r198 r">accountName</span>, <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#17336b838eeba66c" class="i method">GetDefaultStorageAccountParameters</a>());
 
                <a href="/Microsoft.Azure.Management.Storage/A.html#034fd44a523210f0" class="k">var</a> <span id="r199 rd" class="r199 r">serviceSasParameters</span> = <b>new</b> <span class="t">ServiceSasParameters</span>()
                {
                    <a href="/Microsoft.Azure.Management.Storage/A.html#240fba87d2f8b089" class="i property">CanonicalizedResource</a> = <span class="s">&quot;/blob/&quot;</span> + <span class="r198 r">accountName</span> + <span class="s">&quot;/music&quot;</span>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#77aeffc4b2389b31" class="i property">Resource</a> = <span class="s">&quot;c&quot;</span>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#484f8418b19955ba" class="i property">Permissions</a> = <span class="s">&quot;rdwlacup&quot;</span>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#eff5ea663d0e5b8c" class="i property">Protocols</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#6bf692f114463891" class="t t">HttpProtocol</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#8b5687da67af40ac" class="i field">Httpshttp</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#918c65c0f4e1b8c8" class="i property">SharedAccessStartTime</a> = <span class="i">DateTime</span>.<span class="i">UtcNow</span>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#f3199b64a1789065" class="i property">SharedAccessExpiryTime</a> = <span class="i">DateTime</span>.<span class="i">UtcNow</span>.<span class="i">AddHours</span>(1),
                    <a href="/Microsoft.Azure.Management.Storage/A.html#164af6724d3bc2be" class="i property">KeyToSign</a> = <span class="s">&quot;key1&quot;</span>
                };
                <a href="/Microsoft.Azure.Management.Storage/A.html#de82452ed4277ce5" class="k">var</a> <span id="r200 rd" class="r200 r">result</span> = <span class="r196 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">ListServiceSAS</span>(<span class="r197 r">rgname</span>, <span class="r198 r">accountName</span>, <span class="r199 r">serviceSasParameters</span>);
 
                <a href="/Microsoft.Azure.Management.Storage/A.html#034fd44a523210f0" class="k">var</a> <span id="r201 rd" class="r201 r">resultCredentials</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#89683a3c17dfd53c" class="i method">ParseServiceSASToken</a>(<span class="r200 r">result</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#932c93495b823849" class="i property">ServiceSasToken</a>);
 
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r199 r">serviceSasParameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#77aeffc4b2389b31" class="i property">Resource</a>, <span class="r201 r">resultCredentials</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#77aeffc4b2389b31" class="i property">Resource</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r199 r">serviceSasParameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#484f8418b19955ba" class="i property">Permissions</a>, <span class="r201 r">resultCredentials</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#484f8418b19955ba" class="i property">Permissions</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r199 r">serviceSasParameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#eff5ea663d0e5b8c" class="i property">Protocols</a>, <span class="r201 r">resultCredentials</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#eff5ea663d0e5b8c" class="i property">Protocols</a>);
 
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r199 r">serviceSasParameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#918c65c0f4e1b8c8" class="i property">SharedAccessStartTime</a>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r199 r">serviceSasParameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#f3199b64a1789065" class="i property">SharedAccessExpiryTime</a>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="ca3f1d6a8312fc3c" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountListServiceSASWithDefaultProperties</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r202 rd" class="r202 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r203 rd" class="r203 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r204 rd" class="r204 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r203 r">context</span>, <span class="r202 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r205 rd" class="r205 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r203 r">context</span>, <span class="r202 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r206 rd" class="r206 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r204 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r207 rd" class="r207 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <span class="r205 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r206 r">rgname</span>, <span class="r207 r">accountName</span>, <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#17336b838eeba66c" class="i method">GetDefaultStorageAccountParameters</a>());
 
                <span class="c">// Test for default values of sas credentials.</span>
                <a href="/Microsoft.Azure.Management.Storage/A.html#034fd44a523210f0" class="k">var</a> <span id="r208 rd" class="r208 r">serviceSasParameters</span> = <b>new</b> <span class="t">ServiceSasParameters</span>()
                {
                    <a href="/Microsoft.Azure.Management.Storage/A.html#240fba87d2f8b089" class="i property">CanonicalizedResource</a> = <span class="s">&quot;/blob/&quot;</span> + <span class="r207 r">accountName</span> + <span class="s">&quot;/music&quot;</span>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#77aeffc4b2389b31" class="i property">Resource</a> = <span class="s">&quot;c&quot;</span>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#484f8418b19955ba" class="i property">Permissions</a> = <span class="s">&quot;rl&quot;</span>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#f3199b64a1789065" class="i property">SharedAccessExpiryTime</a> = <span class="i">DateTime</span>.<span class="i">UtcNow</span>.<span class="i">AddHours</span>(1),
                };
 
                <a href="/Microsoft.Azure.Management.Storage/A.html#de82452ed4277ce5" class="k">var</a> <span id="r209 rd" class="r209 r">result</span> = <span class="r205 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">ListServiceSAS</span>(<span class="r206 r">rgname</span>, <span class="r207 r">accountName</span>, <span class="r208 r">serviceSasParameters</span>);
 
                <a href="/Microsoft.Azure.Management.Storage/A.html#034fd44a523210f0" class="k">var</a> <span id="r210 rd" class="r210 r">resultCredentials</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#89683a3c17dfd53c" class="i method">ParseServiceSASToken</a>(<span class="r209 r">result</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#932c93495b823849" class="i property">ServiceSasToken</a>);
 
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r208 r">serviceSasParameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#77aeffc4b2389b31" class="i property">Resource</a>, <span class="r210 r">resultCredentials</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#77aeffc4b2389b31" class="i property">Resource</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r208 r">serviceSasParameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#484f8418b19955ba" class="i property">Permissions</a>, <span class="r210 r">resultCredentials</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#484f8418b19955ba" class="i property">Permissions</a>);
 
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r208 r">serviceSasParameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#f3199b64a1789065" class="i property">SharedAccessExpiryTime</a>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="2c6cf78d6e5e5f81" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountListServiceSASWithMissingProperties</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r211 rd" class="r211 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r212 rd" class="r212 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r213 rd" class="r213 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r212 r">context</span>, <span class="r211 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r214 rd" class="r214 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r212 r">context</span>, <span class="r211 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r215 rd" class="r215 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r213 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r216 rd" class="r216 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <span class="r214 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r215 r">rgname</span>, <span class="r216 r">accountName</span>, <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#17336b838eeba66c" class="i method">GetDefaultStorageAccountParameters</a>());
 
                <span class="c">// Test for default values of sas credentials.</span>
                <a href="/Microsoft.Azure.Management.Storage/A.html#034fd44a523210f0" class="k">var</a> <span id="r217 rd" class="r217 r">serviceSasParameters</span> = <b>new</b> <span class="t">ServiceSasParameters</span>()
                {
                    <a href="/Microsoft.Azure.Management.Storage/A.html#240fba87d2f8b089" class="i property">CanonicalizedResource</a> = <span class="s">&quot;/blob/&quot;</span> + <span class="r216 r">accountName</span> + <span class="s">&quot;/music&quot;</span>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#77aeffc4b2389b31" class="i property">Resource</a> = <span class="s">&quot;b&quot;</span>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#484f8418b19955ba" class="i property">Permissions</a> = <span class="s">&quot;rl&quot;</span>,
                };
                <b>try</b>
                {
                    <a href="/Microsoft.Azure.Management.Storage/A.html#de82452ed4277ce5" class="k">var</a> <span id="r218 rd" class="r218 r">result</span> = <span class="r214 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">ListServiceSAS</span>(<span class="r215 r">rgname</span>, <span class="r216 r">accountName</span>, <span class="r217 r">serviceSasParameters</span>);
                    <a href="/Microsoft.Azure.Management.Storage/A.html#034fd44a523210f0" class="k">var</a> <span id="r219 rd" class="r219 r">resultCredentials</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#89683a3c17dfd53c" class="i method">ParseServiceSASToken</a>(<span class="r218 r">result</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#932c93495b823849" class="i property">ServiceSasToken</a>);
                }
                <b>catch</b> (<span class="i">Exception</span> <span id="r220 rd" class="r220 r">ex</span>)
                {
                    <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;Values for request parameters are invalid: signedExpiry.&quot;</span>, <span class="r220 r">ex</span>.<span class="i">Message</span>);
                    <b>return</b>;
                }
                <b>throw</b> <b>new</b> <span class="i">Exception</span>(<span class="s">&quot;AccountSasToken shouldn&#39;t be returned without SharedAccessExpiryTime&quot;</span>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="1514cc6f8d2d9de8" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountUpdateEncryptionTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r221 rd" class="r221 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r222 rd" class="r222 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r223 rd" class="r223 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r222 r">context</span>, <span class="r221 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r224 rd" class="r224 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r222 r">context</span>, <span class="r221 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r225 rd" class="r225 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r223 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r226 rd" class="r226 r">accountName</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#e4a1b8b7f0893760" class="i method">CreateStorageAccount</a>(<span class="r224 r">storageMgmtClient</span>, <span class="r225 r">rgname</span>);
 
                <span class="c">// Update storage account type</span>
                <a href="/Microsoft.Azure.Management.Storage/A.html#c031ad46f74edc74" class="k">var</a> <span id="r227 rd" class="r227 r">parameters</span> = <b>new</b> <span class="t">StorageAccountUpdateParameters</span>
                {
                    <span class="i">Sku</span> = <b>new</b> <span class="t">Sku</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e9da3fc1a9ac45de" class="i field">StandardLRS</a> }
                };
                <b>var</b> <span id="r228 rd" class="r228 r">account</span> = <span class="r224 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Update</span>(<span class="r225 r">rgname</span>, <span class="r226 r">accountName</span>, <span class="r227 r">parameters</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e9da3fc1a9ac45de" class="i field">StandardLRS</a>, <span class="r228 r">account</span>.<span class="i">Sku</span>.<span class="i">Name</span>);
 
                <span class="c">// Validate</span>
                <span class="r228 r">account</span> = <span class="r224 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r225 r">rgname</span>, <span class="r226 r">accountName</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e9da3fc1a9ac45de" class="i field">StandardLRS</a>, <span class="r228 r">account</span>.<span class="i">Sku</span>.<span class="i">Name</span>);
 
                <span class="c">// Update storage tags</span>
                <span class="r227 r">parameters</span> = <b>new</b> <span class="t">StorageAccountUpdateParameters</span>
                {
                    <a href="/Microsoft.Azure.Management.Storage/A.html#3c7191328eef1124" class="i property">Tags</a> = <b>new</b> <span class="i">Dictionary</span>&lt;<b>string</b>, <b>string</b>&gt;
                    {
                        {<span class="s">&quot;key3&quot;</span>,<span class="s">&quot;value3&quot;</span>},
                        {<span class="s">&quot;key4&quot;</span>,<span class="s">&quot;value4&quot;</span>},
                        {<span class="s">&quot;key5&quot;</span>,<span class="s">&quot;value6&quot;</span>}
                    }
                };
                <span class="r228 r">account</span> = <span class="r224 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Update</span>(<span class="r225 r">rgname</span>, <span class="r226 r">accountName</span>, <span class="r227 r">parameters</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r228 r">account</span>.<span class="i">Tags</span>.<span class="i">Count</span>, <span class="r227 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#3c7191328eef1124" class="i property">Tags</a>.<span class="i">Count</span>);
 
                <span class="c">// Validate</span>
                <span class="r228 r">account</span> = <span class="r224 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r225 r">rgname</span>, <span class="r226 r">accountName</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r228 r">account</span>.<span class="i">Tags</span>.<span class="i">Count</span>, <span class="r227 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#3c7191328eef1124" class="i property">Tags</a>.<span class="i">Count</span>);
 
                <span class="c">// 1. Update storage encryption</span>
                <span class="r227 r">parameters</span> = <b>new</b> <span class="t">StorageAccountUpdateParameters</span>
                {
                    <span class="i">Encryption</span> = <b>new</b> <span class="t">Encryption</span>()
                    {
                        <span class="i">Services</span> = <b>new</b> <span class="t">EncryptionServices</span> { <span class="i">Blob</span> = <b>new</b> <span class="t">EncryptionService</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#254c25ee74a8283b" class="i property">Enabled</a> = <b>true</b> }, <span class="i">File</span> = <b>new</b> <span class="t">EncryptionService</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#254c25ee74a8283b" class="i property">Enabled</a> = <b>true</b> } },
                        <a href="/Microsoft.Azure.Management.Storage/A.html#c72a62c75c0ef114" class="i property">KeySource</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#d14c96c947819d48" class="t t">KeySource</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#b509b0ff8449a11b" class="i field">MicrosoftStorage</a>
                    }
                };
                <span class="r228 r">account</span> = <span class="r224 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Update</span>(<span class="r225 r">rgname</span>, <span class="r226 r">accountName</span>, <span class="r227 r">parameters</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r228 r">account</span>.<span class="i">Encryption</span>);
 
                <span class="c">// Validate</span>
                <span class="r228 r">account</span> = <span class="r224 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r225 r">rgname</span>, <span class="r226 r">accountName</span>);
 
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r228 r">account</span>.<span class="i">Encryption</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r228 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Blob</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r228 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Blob</span>.<span class="i">Enabled</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r228 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Blob</span>.<span class="i">LastEnabledTime</span>);
 
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r228 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">File</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r228 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">File</span>.<span class="i">Enabled</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r228 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">File</span>.<span class="i">LastEnabledTime</span>);
 
                <span class="c">// 2. Restore storage encryption</span>
                <span class="r227 r">parameters</span> = <b>new</b> <span class="t">StorageAccountUpdateParameters</span>
                {
                    <span class="i">Encryption</span> = <b>new</b> <span class="t">Encryption</span>()
                    {
                        <span class="i">Services</span> = <b>new</b> <span class="t">EncryptionServices</span> { <span class="i">Blob</span> = <b>new</b> <span class="t">EncryptionService</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#254c25ee74a8283b" class="i property">Enabled</a> = <b>true</b> }, <span class="i">File</span> = <b>new</b> <span class="t">EncryptionService</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#254c25ee74a8283b" class="i property">Enabled</a> = <b>true</b> } },
                        <a href="/Microsoft.Azure.Management.Storage/A.html#c72a62c75c0ef114" class="i property">KeySource</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#d14c96c947819d48" class="t t">KeySource</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#b509b0ff8449a11b" class="i field">MicrosoftStorage</a>
                    }
                };
                <span class="r228 r">account</span> = <span class="r224 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Update</span>(<span class="r225 r">rgname</span>, <span class="r226 r">accountName</span>, <span class="r227 r">parameters</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r228 r">account</span>.<span class="i">Encryption</span>);
 
                <span class="c">// Validate</span>
                <span class="r228 r">account</span> = <span class="r224 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r225 r">rgname</span>, <span class="r226 r">accountName</span>);
 
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r228 r">account</span>.<span class="i">Encryption</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r228 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Blob</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r228 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Blob</span>.<span class="i">Enabled</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r228 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Blob</span>.<span class="i">LastEnabledTime</span>);
 
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r228 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">File</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r228 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">File</span>.<span class="i">Enabled</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r228 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">File</span>.<span class="i">LastEnabledTime</span>);
 
                <span class="c">// 3. Remove file encryption service field.</span>
                <span class="r227 r">parameters</span> = <b>new</b> <span class="t">StorageAccountUpdateParameters</span>
                {
                    <span class="i">Encryption</span> = <b>new</b> <span class="t">Encryption</span>()
                    {
                        <span class="i">Services</span> = <b>new</b> <span class="t">EncryptionServices</span> { <span class="i">Blob</span> = <b>new</b> <span class="t">EncryptionService</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#254c25ee74a8283b" class="i property">Enabled</a> = <b>true</b> } },
                        <a href="/Microsoft.Azure.Management.Storage/A.html#c72a62c75c0ef114" class="i property">KeySource</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#d14c96c947819d48" class="t t">KeySource</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#b509b0ff8449a11b" class="i field">MicrosoftStorage</a>
                    }
                };
                <span class="r228 r">account</span> = <span class="r224 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Update</span>(<span class="r225 r">rgname</span>, <span class="r226 r">accountName</span>, <span class="r227 r">parameters</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r228 r">account</span>.<span class="i">Encryption</span>);
 
                <span class="c">// Validate</span>
                <span class="r228 r">account</span> = <span class="r224 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r225 r">rgname</span>, <span class="r226 r">accountName</span>);
 
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r228 r">account</span>.<span class="i">Encryption</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r228 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Blob</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r228 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Blob</span>.<span class="i">Enabled</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r228 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Blob</span>.<span class="i">LastEnabledTime</span>);
 
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r228 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">File</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r228 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">File</span>.<span class="i">Enabled</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r228 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">File</span>.<span class="i">LastEnabledTime</span>);
 
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="5c6c8f320153f14f" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountUpdateWithHttpsOnlyTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r229 rd" class="r229 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r230 rd" class="r230 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r231 rd" class="r231 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r230 r">context</span>, <span class="r229 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r232 rd" class="r232 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r230 r">context</span>, <span class="r229 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r233 rd" class="r233 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r231 r">resourcesClient</span>);
 
                <span class="c">// Create storage account with hot</span>
                <b>string</b> <span id="r234 rd" class="r234 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r235 rd" class="r235 r">parameters</span> = <b>new</b> <span class="t">StorageAccountCreateParameters</span>
                {
                    <span class="i">Sku</span> = <b>new</b> <span class="t">Sku</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#5404beb07ae30d98" class="i field">StandardGRS</a> },
                    <a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#fd3939f069de73f7" class="i field">Storage</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#0a5812a9fdf2fdfe" class="i field">DefaultLocation</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#79dcba030ba232f6" class="i property">EnableHttpsTrafficOnly</a> = <b>false</b>
                };
                <b>var</b> <span id="r236 rd" class="r236 r">account</span> = <span class="r232 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r233 r">rgname</span>, <span class="r234 r">accountName</span>, <span class="r235 r">parameters</span>);
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<span class="i">VerifyAccountProperties</span>(<span class="r236 r">account</span>, <b>false</b>);
                <span class="i">Assert</span>.<span class="i">False</span>(<span class="r236 r">account</span>.<span class="i">EnableHttpsTrafficOnly</span>);
 
                <a href="/Microsoft.Azure.Management.Storage/A.html#c031ad46f74edc74" class="k">var</a> <span id="r237 rd" class="r237 r">parameter</span> = <b>new</b> <span class="t">StorageAccountUpdateParameters</span>
                {
                    <a href="/Microsoft.Azure.Management.Storage/A.html#9160cbab25d1fb38" class="i property">EnableHttpsTrafficOnly</a> = <b>true</b>
                };
                <span class="r232 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Update</span>(<span class="r233 r">rgname</span>, <span class="r234 r">accountName</span>, <span class="r237 r">parameter</span>);
                <span class="r236 r">account</span> = <span class="r232 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r233 r">rgname</span>, <span class="r234 r">accountName</span>);
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<span class="i">VerifyAccountProperties</span>(<span class="r236 r">account</span>, <b>false</b>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r236 r">account</span>.<span class="i">EnableHttpsTrafficOnly</span>);
 
                <span class="r237 r">parameter</span> = <b>new</b> <span class="t">StorageAccountUpdateParameters</span>
                {
                    <a href="/Microsoft.Azure.Management.Storage/A.html#9160cbab25d1fb38" class="i property">EnableHttpsTrafficOnly</a> = <b>false</b>
                };
                <span class="r232 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Update</span>(<span class="r233 r">rgname</span>, <span class="r234 r">accountName</span>, <span class="r237 r">parameter</span>);
                <span class="r236 r">account</span> = <span class="r232 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r233 r">rgname</span>, <span class="r234 r">accountName</span>);
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<span class="i">VerifyAccountProperties</span>(<span class="r236 r">account</span>, <b>false</b>);
                <span class="i">Assert</span>.<span class="i">False</span>(<span class="r236 r">account</span>.<span class="i">EnableHttpsTrafficOnly</span>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="fd842267f17b8961" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountCreateWithHttpsOnlyTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r238 rd" class="r238 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r239 rd" class="r239 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r240 rd" class="r240 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r239 r">context</span>, <span class="r238 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r241 rd" class="r241 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r239 r">context</span>, <span class="r238 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r242 rd" class="r242 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r240 r">resourcesClient</span>);
 
                <span class="c">// Create storage account with hot</span>
                <b>string</b> <span id="r243 rd" class="r243 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r244 rd" class="r244 r">parameters</span> = <b>new</b> <span class="t">StorageAccountCreateParameters</span>
                {
                    <span class="i">Sku</span> = <b>new</b> <span class="t">Sku</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#5404beb07ae30d98" class="i field">StandardGRS</a> },
                    <a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#fd3939f069de73f7" class="i field">Storage</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#0a5812a9fdf2fdfe" class="i field">DefaultLocation</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#79dcba030ba232f6" class="i property">EnableHttpsTrafficOnly</a> = <b>true</b>
                };
                <b>var</b> <span id="r245 rd" class="r245 r">account</span> = <span class="r241 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r242 r">rgname</span>, <span class="r243 r">accountName</span>, <span class="r244 r">parameters</span>);
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<span class="i">VerifyAccountProperties</span>(<span class="r245 r">account</span>, <b>false</b>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r245 r">account</span>.<span class="i">EnableHttpsTrafficOnly</span>);
 
                <span class="c">// Create storage account with cool</span>
                <span class="r243 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <span class="r244 r">parameters</span> = <b>new</b> <span class="t">StorageAccountCreateParameters</span>
                {
                    <span class="i">Sku</span> = <b>new</b> <span class="t">Sku</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#5404beb07ae30d98" class="i field">StandardGRS</a> },
                    <a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#fd3939f069de73f7" class="i field">Storage</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#0a5812a9fdf2fdfe" class="i field">DefaultLocation</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#79dcba030ba232f6" class="i property">EnableHttpsTrafficOnly</a> = <b>false</b>
                };
                <span class="r245 r">account</span> = <span class="r241 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r242 r">rgname</span>, <span class="r243 r">accountName</span>, <span class="r244 r">parameters</span>);
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<span class="i">VerifyAccountProperties</span>(<span class="r245 r">account</span>, <b>false</b>);
                <span class="i">Assert</span>.<span class="i">False</span>(<span class="r245 r">account</span>.<span class="i">EnableHttpsTrafficOnly</span>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="9067f910f00eb98a" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountCMKTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r246 rd" class="r246 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r247 rd" class="r247 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r248 rd" class="r248 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r247 r">context</span>, <span class="r246 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r249 rd" class="r249 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r247 r">context</span>, <span class="r246 r">handler</span>);
                <b>var</b> <span id="r250 rd" class="r250 r">keyVaultMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#115594a6797c66ca" class="i method">GetKeyVaultManagementClient</a>(<span class="r247 r">context</span>, <span class="r246 r">handler</span>);
                <b>var</b> <span id="r251 rd" class="r251 r">keyVaultClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#1187a9d7ae7ee3a5" class="i method">CreateKeyVaultClient</a>();
 
                <b>string</b> <span id="r252 rd" class="r252 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <b>var</b> <span id="r253 rd" class="r253 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r248 r">resourcesClient</span>);
                <b>string</b> <span id="r254 rd" class="r254 r">vaultName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;keyvault&quot;</span>);
                <b>string</b> <span id="r255 rd" class="r255 r">keyName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;keyvaultkey&quot;</span>);
 
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r256 rd" class="r256 r">parameters</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#17336b838eeba66c" class="i method">GetDefaultStorageAccountParameters</a>();
                <span class="r256 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a> = <span class="s">&quot;centraluseuap&quot;</span>;
                <span class="r256 r">parameters</span>.<span class="i">Identity</span> = <b>new</b> <span class="t">Identity</span> { };
                <b>var</b> <span id="r257 rd" class="r257 r">account</span> = <span class="r249 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r253 r">rgname</span>, <span class="r252 r">accountName</span>, <span class="r256 r">parameters</span>);
 
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<span class="i">VerifyAccountProperties</span>(<span class="r257 r">account</span>, <b>false</b>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r257 r">account</span>.<span class="i">Identity</span>);
 
                <b>var</b> <span id="r258 rd" class="r258 r">accessPolicies</span> = <b>new</b> <span class="i">List</span>&lt;<span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i">KeyVault</span>.<span class="i">Models</span>.<span class="i">AccessPolicyEntry</span>&gt;();
                <span class="r258 r">accessPolicies</span>.<span class="i">Add</span>(<b>new</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i">KeyVault</span>.<span class="i">Models</span>.<span class="i">AccessPolicyEntry</span>
                {
                    <span class="i">TenantId</span> = <span class="i">System</span>.<span class="i">Guid</span>.<span class="i">Parse</span>(<span class="r257 r">account</span>.<span class="i">Identity</span>.<span class="i">TenantId</span>),
                    <span class="i">ObjectId</span> = <span class="r257 r">account</span>.<span class="i">Identity</span>.<span class="i">PrincipalId</span>,
                    <span class="i">Permissions</span> = <b>new</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i">KeyVault</span>.<span class="i">Models</span>.<span class="i">Permissions</span>(<b>new</b> <span class="i">List</span>&lt;<b>string</b>&gt; { <span class="s">&quot;wrapkey&quot;</span>, <span class="s">&quot;unwrapkey&quot;</span> })
                });
 
                <b>string</b> <span id="r259 rd" class="r259 r">servicePrincipalObjectId</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#da10c018e50ba596" class="i method">GetServicePrincipalObjectId</a>();
                <span class="r258 r">accessPolicies</span>.<span class="i">Add</span>(<b>new</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i">KeyVault</span>.<span class="i">Models</span>.<span class="i">AccessPolicyEntry</span>
                {
                    <span class="i">TenantId</span> = <span class="i">System</span>.<span class="i">Guid</span>.<span class="i">Parse</span>(<span class="r257 r">account</span>.<span class="i">Identity</span>.<span class="i">TenantId</span>),
                    <span class="i">ObjectId</span> = <span class="r259 r">servicePrincipalObjectId</span>,
                    <span class="i">Permissions</span> = <b>new</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i">KeyVault</span>.<span class="i">Models</span>.<span class="i">Permissions</span>(<b>new</b> <span class="i">List</span>&lt;<b>string</b>&gt; { <span class="s">&quot;all&quot;</span> })
                });
 
                <b>var</b> <span id="r260 rd" class="r260 r">keyVault</span> = <span class="r250 r">keyVaultMgmtClient</span>.<span class="i">Vaults</span>.<span class="i">CreateOrUpdate</span>(<span class="r253 r">rgname</span>, <span class="r254 r">vaultName</span>, <b>new</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i">KeyVault</span>.<span class="i">Models</span>.<span class="i">VaultCreateOrUpdateParameters</span>
                {
                    <span class="i">Location</span> = <span class="r257 r">account</span>.<span class="i">Location</span>,
                    <span class="i">Properties</span> = <b>new</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i">KeyVault</span>.<span class="i">Models</span>.<span class="i">VaultProperties</span>
                    {
                        <span class="i">TenantId</span> = <span class="i">System</span>.<span class="i">Guid</span>.<span class="i">Parse</span>(<span class="r257 r">account</span>.<span class="i">Identity</span>.<span class="i">TenantId</span>),
                        <span class="i">AccessPolicies</span> = <span class="r258 r">accessPolicies</span>,
                        <span class="i">Sku</span> = <b>new</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i">KeyVault</span>.<span class="i">Models</span>.<span class="i">Sku</span>(<span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i">KeyVault</span>.<span class="i">Models</span>.<span class="i">SkuName</span>.<span class="i">Standard</span>),
                        <span class="i">EnabledForDiskEncryption</span> = <b>false</b>,
                        <span class="i">EnabledForDeployment</span> = <b>false</b>,
                        <span class="i">EnabledForTemplateDeployment</span> = <b>false</b>
                    }
                });
 
                <b>var</b> <span id="r261 rd" class="r261 r">keyVaultKey</span> = <span class="r251 r">keyVaultClient</span>.<span class="i">CreateKeyAsync</span>(<span class="r260 r">keyVault</span>.<span class="i">Properties</span>.<span class="i">VaultUri</span>, <span class="r255 r">keyName</span>, <span class="i">JsonWebKeyType</span>.<span class="i">Rsa</span>, 2048,
                    <span class="i">JsonWebKeyOperation</span>.<span class="i">AllOperations</span>, <b>new</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i">KeyVault</span>.<span class="i">Models</span>.<span class="i">KeyAttributes</span>()).<span class="i">GetAwaiter</span>().<span class="i">GetResult</span>();
 
                <span class="c">// Enable encryption.</span>
                <a href="/Microsoft.Azure.Management.Storage/A.html#c031ad46f74edc74" class="k">var</a> <span id="r262 rd" class="r262 r">updateParameters</span> = <b>new</b> <span class="t">StorageAccountUpdateParameters</span>
                {
                    <span class="i">Encryption</span> = <b>new</b> <span class="t">Encryption</span>
                    {
                        <span class="i">Services</span> = <b>new</b> <span class="t">EncryptionServices</span> { <span class="i">Blob</span> = <b>new</b> <span class="t">EncryptionService</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#254c25ee74a8283b" class="i property">Enabled</a> = <b>true</b> }, <span class="i">File</span> = <b>new</b> <span class="t">EncryptionService</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#254c25ee74a8283b" class="i property">Enabled</a> = <b>true</b> } },
                        <a href="/Microsoft.Azure.Management.Storage/A.html#c72a62c75c0ef114" class="i property">KeySource</a> = <span class="s">&quot;Microsoft.Keyvault&quot;</span>,
                        <span class="i">KeyVaultProperties</span> =
                            <b>new</b> <span class="t">KeyVaultProperties</span>
                            {
                                <a href="/Microsoft.Azure.Management.Storage/A.html#50747b2733b3d9b9" class="i property">KeyName</a> = <span class="r261 r">keyVaultKey</span>.<span class="i">KeyIdentifier</span>.<span class="i">Name</span>,
                                <a href="/Microsoft.Azure.Management.Storage/A.html#95325d14628c9f5e" class="i property">KeyVaultUri</a> = <span class="r260 r">keyVault</span>.<span class="i">Properties</span>.<span class="i">VaultUri</span>,
                                <a href="/Microsoft.Azure.Management.Storage/A.html#29300de91d7059e3" class="i property">KeyVersion</a> = <span class="r261 r">keyVaultKey</span>.<span class="i">KeyIdentifier</span>.<span class="i">Version</span>
                            }
                    }
                };
 
                <span class="r257 r">account</span> = <span class="r249 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Update</span>(<span class="r253 r">rgname</span>, <span class="r252 r">accountName</span>, <span class="r262 r">updateParameters</span>);
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<span class="i">VerifyAccountProperties</span>(<span class="r257 r">account</span>, <b>false</b>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r257 r">account</span>.<span class="i">Encryption</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r257 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Blob</span>.<span class="i">Enabled</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r257 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">File</span>.<span class="i">Enabled</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;Microsoft.Keyvault&quot;</span>, <span class="r257 r">account</span>.<span class="i">Encryption</span>.<span class="i">KeySource</span>);
 
                <span class="c">// Disable Encryption.</span>
                <span class="r262 r">updateParameters</span> = <b>new</b> <span class="t">StorageAccountUpdateParameters</span>
                {
                    <span class="i">Encryption</span> = <b>new</b> <span class="t">Encryption</span>
                    {
                        <span class="i">Services</span> = <b>new</b> <span class="t">EncryptionServices</span> { <span class="i">Blob</span> = <b>new</b> <span class="t">EncryptionService</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#254c25ee74a8283b" class="i property">Enabled</a> = <b>true</b> }, <span class="i">File</span> = <b>new</b> <span class="t">EncryptionService</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#254c25ee74a8283b" class="i property">Enabled</a> = <b>true</b> } },
                        <a href="/Microsoft.Azure.Management.Storage/A.html#c72a62c75c0ef114" class="i property">KeySource</a> = <span class="s">&quot;Microsoft.Storage&quot;</span>
                    }
                };
                <span class="r257 r">account</span> = <span class="r249 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Update</span>(<span class="r253 r">rgname</span>, <span class="r252 r">accountName</span>, <span class="r262 r">updateParameters</span>);
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<span class="i">VerifyAccountProperties</span>(<span class="r257 r">account</span>, <b>false</b>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r257 r">account</span>.<span class="i">Encryption</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r257 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Blob</span>.<span class="i">Enabled</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r257 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">File</span>.<span class="i">Enabled</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;Microsoft.Storage&quot;</span>, <span class="r257 r">account</span>.<span class="i">Encryption</span>.<span class="i">KeySource</span>);
 
                <span class="r262 r">updateParameters</span> = <b>new</b> <span class="t">StorageAccountUpdateParameters</span>
                {
                    <span class="i">Encryption</span> = <b>new</b> <span class="t">Encryption</span>
                    {
                        <span class="i">Services</span> = <b>new</b> <span class="t">EncryptionServices</span> { <span class="i">Blob</span> = <b>new</b> <span class="t">EncryptionService</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#254c25ee74a8283b" class="i property">Enabled</a> = <b>false</b> }, <span class="i">File</span> = <b>new</b> <span class="t">EncryptionService</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#254c25ee74a8283b" class="i property">Enabled</a> = <b>false</b> } },
                        <a href="/Microsoft.Azure.Management.Storage/A.html#c72a62c75c0ef114" class="i property">KeySource</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#d14c96c947819d48" class="t t">KeySource</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#b509b0ff8449a11b" class="i field">MicrosoftStorage</a>
                    }
                };
                <span class="r257 r">account</span> = <span class="r249 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Update</span>(<span class="r253 r">rgname</span>, <span class="r252 r">accountName</span>, <span class="r262 r">updateParameters</span>);
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<span class="i">VerifyAccountProperties</span>(<span class="r257 r">account</span>, <b>false</b>);
                <span class="i">Assert</span>.<span class="i">Null</span>(<span class="r257 r">account</span>.<span class="i">Encryption</span>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="75502ada02e41770" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountOperationsTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r263 rd" class="r263 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r264 rd" class="r264 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r265 rd" class="r265 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r264 r">context</span>, <span class="r263 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r266 rd" class="r266 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r264 r">context</span>, <span class="r263 r">handler</span>);
                <b>var</b> <span id="r267 rd" class="r267 r">keyVaultMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#115594a6797c66ca" class="i method">GetKeyVaultManagementClient</a>(<span class="r264 r">context</span>, <span class="r263 r">handler</span>);
 
                <span class="c">// Create storage account with hot</span>
                <b>string</b> <span id="r268 rd" class="r268 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <b>var</b> <span id="r269 rd" class="r269 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r265 r">resourcesClient</span>);
 
                <b>var</b> <span id="r270 rd" class="r270 r">ops</span> = <span class="r266 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#2bd8879935d560f0" class="i property">Operations</a>.<span class="i">List</span>();
                <a href="/Microsoft.Azure.Management.Storage/A.html#f850cf629257bbb5" class="k">var</a> <span id="r271 rd" class="r271 r">op1</span> = <b>new</b> <span class="t">Operation</span>
                {
                    <a href="/Microsoft.Azure.Management.Storage/A.html#1a5b6b3897f4c9b0" class="i property">Name</a> = <span class="s">&quot;Microsoft.Storage/storageAccounts/write&quot;</span>,
                    <span class="i">Display</span> = <b>new</b> <span class="t">OperationDisplay</span>
                    {
                        <a href="/Microsoft.Azure.Management.Storage/A.html#ad45a814894704e6" class="i property">Provider</a> = <span class="s">&quot;Microsoft Storage&quot;</span>,
                        <a href="/Microsoft.Azure.Management.Storage/A.html#c64dbc4d07500c80" class="i property">Resource</a> = <span class="s">&quot;Storage Accounts&quot;</span>,
                        <a href="/Microsoft.Azure.Management.Storage/A.html#11bb86bafcda2984" class="i property">Operation</a> = <span class="s">&quot;Create/Update Storage Account&quot;</span>
                    }
                };
                <a href="/Microsoft.Azure.Management.Storage/A.html#f850cf629257bbb5" class="k">var</a> <span id="r272 rd" class="r272 r">op2</span> = <b>new</b> <span class="t">Operation</span>
                {
                    <a href="/Microsoft.Azure.Management.Storage/A.html#1a5b6b3897f4c9b0" class="i property">Name</a> = <span class="s">&quot;Microsoft.Storage/storageAccounts/delete&quot;</span>,
                    <span class="i">Display</span> = <b>new</b> <span class="t">OperationDisplay</span>
                    {
                        <a href="/Microsoft.Azure.Management.Storage/A.html#ad45a814894704e6" class="i property">Provider</a> = <span class="s">&quot;Microsoft Storage&quot;</span>,
                        <a href="/Microsoft.Azure.Management.Storage/A.html#c64dbc4d07500c80" class="i property">Resource</a> = <span class="s">&quot;Storage Accounts&quot;</span>,
                        <a href="/Microsoft.Azure.Management.Storage/A.html#11bb86bafcda2984" class="i property">Operation</a> = <span class="s">&quot;Delete Storage Account&quot;</span>
                    }
                };
                <b>bool</b> <span id="r273 rd" class="r273 r">exists1</span> = <b>false</b>;
                <b>bool</b> <span id="r274 rd" class="r274 r">exists2</span> = <b>false</b>;
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r270 r">ops</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r270 r">ops</span>.<span class="i">GetEnumerator</span>());
                <b>var</b> <span id="r275 rd" class="r275 r">operation</span> = <span class="r270 r">ops</span>.<span class="i">GetEnumerator</span>();
 
                <b>while</b> (<span class="r275 r">operation</span>.<span class="i">MoveNext</span>())
                {
                    <b>if</b> (<span class="r275 r">operation</span>.<span class="i">Current</span>.<span class="i">ToString</span>().<span class="i">Equals</span>(<span class="r271 r">op1</span>.<span class="i">ToString</span>()))
                    {
                        <span class="r273 r">exists1</span> = <b>true</b>;
                    }
                    <b>if</b> (<span class="r275 r">operation</span>.<span class="i">Current</span>.<span class="i">ToString</span>().<span class="i">Equals</span>(<span class="r272 r">op2</span>.<span class="i">ToString</span>()))
                    {
                        <span class="r274 r">exists2</span> = <b>true</b>;
                    }
                }
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r273 r">exists1</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r274 r">exists2</span>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="77017420dfb5ee33" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountVnetACLTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r276 rd" class="r276 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r277 rd" class="r277 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r278 rd" class="r278 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r277 r">context</span>, <span class="r276 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r279 rd" class="r279 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r277 r">context</span>, <span class="r276 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r280 rd" class="r280 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r278 r">resourcesClient</span>);
 
                <span class="c">// Create storage account with Vnet</span>
                <b>string</b> <span id="r281 rd" class="r281 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r282 rd" class="r282 r">parameters</span> = <b>new</b> <span class="t">StorageAccountCreateParameters</span>
                {
                    <a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#0a5812a9fdf2fdfe" class="i field">DefaultLocation</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#d6ee97275f551bb3" class="i field">StorageV2</a>,
                    <span class="i">Sku</span> = <b>new</b> <span class="t">Sku</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e9da3fc1a9ac45de" class="i field">StandardLRS</a> }
                };
                <span class="r282 r">parameters</span>.<span class="i">NetworkRuleSet</span> = <b>new</b> <span class="t">NetworkRuleSet</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#86c5efb6ed779c65" class="i property">Bypass</a> = <span class="s">@&quot;Logging,AzureServices&quot;</span>, <span class="i">DefaultAction</span> = <a href="/Microsoft.Azure.Management.Storage/A.html#4b2981f9a8dcc6b7" class="t t">DefaultAction</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e65fae6221496518" class="i field">Deny</a>, <a href="/Microsoft.Azure.Management.Storage/A.html#eb7a7edda91c7537" class="i property">IpRules</a> = <b>new</b> <span class="i">List</span>&lt;<a href="/Microsoft.Azure.Management.Storage/A.html#2e147d6e70ba2044" class="t t">IPRule</a>&gt; { <b>new</b> <span class="t">IPRule</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#661f13b6139a6687" class="i property">IPAddressOrRange</a> = <span class="s">&quot;23.45.67.90&quot;</span> } } };
                <span class="r279 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r280 r">rgname</span>, <span class="r281 r">accountName</span>, <span class="r282 r">parameters</span>);
 
                <a href="/Microsoft.Azure.Management.Storage/A.html#65392932a86ca1ed" class="k">var</a> <span id="r283 rd" class="r283 r">account</span> = <span class="r279 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r280 r">rgname</span>, <span class="r281 r">accountName</span>);
 
                <span class="c">// Verify the vnet rule properties.</span>
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r283 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#c80851f0f85eff17" class="i property">NetworkRuleSet</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">@&quot;Logging, AzureServices&quot;</span>, <span class="r283 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#c80851f0f85eff17" class="i property">NetworkRuleSet</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#86c5efb6ed779c65" class="i property">Bypass</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#4b2981f9a8dcc6b7" class="t t">DefaultAction</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e65fae6221496518" class="i field">Deny</a>, <span class="r283 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#c80851f0f85eff17" class="i property">NetworkRuleSet</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#c973cb779168e32e" class="i property">DefaultAction</a>);
                <span class="i">Assert</span>.<span class="i">Empty</span>(<span class="r283 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#c80851f0f85eff17" class="i property">NetworkRuleSet</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#7735b06551b926d8" class="i property">VirtualNetworkRules</a>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r283 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#c80851f0f85eff17" class="i property">NetworkRuleSet</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#eb7a7edda91c7537" class="i property">IpRules</a>);
                <span class="i">Assert</span>.<span class="i">NotEmpty</span>(<span class="r283 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#c80851f0f85eff17" class="i property">NetworkRuleSet</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#eb7a7edda91c7537" class="i property">IpRules</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;23.45.67.90&quot;</span>, <span class="r283 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#c80851f0f85eff17" class="i property">NetworkRuleSet</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#eb7a7edda91c7537" class="i property">IpRules</a>[0].<span class="i">IPAddressOrRange</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i n">Storage</span>.<span class="i n">Models</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#8c51395a3513431c" class="t t">Action</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e92b359f10db0ff1" class="i field">Allow</a>, <span class="r283 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#c80851f0f85eff17" class="i property">NetworkRuleSet</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#eb7a7edda91c7537" class="i property">IpRules</a>[0].<span class="i">Action</span>);
 
                <span class="c">// Update Vnet</span>
                <a href="/Microsoft.Azure.Management.Storage/A.html#c031ad46f74edc74" class="k">var</a> <span id="r284 rd" class="r284 r">updateParameters</span> = <b>new</b> <span class="t">StorageAccountUpdateParameters</span>
                {
                    <span class="i">NetworkRuleSet</span> = <b>new</b> <span class="t">NetworkRuleSet</span>
                    {
                        <a href="/Microsoft.Azure.Management.Storage/A.html#86c5efb6ed779c65" class="i property">Bypass</a> = <span class="s">@&quot;Logging, Metrics&quot;</span>,
                        <a href="/Microsoft.Azure.Management.Storage/A.html#eb7a7edda91c7537" class="i property">IpRules</a> = <b>new</b> <span class="i">List</span>&lt;<a href="/Microsoft.Azure.Management.Storage/A.html#2e147d6e70ba2044" class="t t">IPRule</a>&gt; {
                            <b>new</b> <span class="t">IPRule</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#661f13b6139a6687" class="i property">IPAddressOrRange</a> = <span class="s">&quot;23.45.67.91&quot;</span>, <a href="/Microsoft.Azure.Management.Storage/A.html#ec240629ea643db6" class="i property">Action</a> = <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i n">Storage</span>.<span class="i n">Models</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#8c51395a3513431c" class="t t">Action</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e92b359f10db0ff1" class="i field">Allow</a> },
                            <b>new</b> <span class="t">IPRule</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#661f13b6139a6687" class="i property">IPAddressOrRange</a> = <span class="s">&quot;23.45.67.92&quot;</span> }
                        },
                        <a href="/Microsoft.Azure.Management.Storage/A.html#aa914c3b2f65212a" class="i property">ResourceAccessRules</a> = <b>new</b> <span class="i">List</span>&lt;<a href="/Microsoft.Azure.Management.Storage/A.html#da221ddc64c36bdf" class="t t">ResourceAccessRule</a>&gt;
                        {
                            <b>new</b> <span class="t">ResourceAccessRule</span>(<a href="../../GuidAssembly/R/72f988bf-86f1-41af-91ab-2d7cd011db47.html" target="n" class="s">&quot;72f988bf-86f1-41af-91ab-2d7cd011db47&quot;</a>,<span class="s">&quot;/subscriptions/subID/resourceGroups/RGName/providers/Microsoft.Storage/storageAccounts/testaccount1&quot;</span>),
                            <b>new</b> <span class="t">ResourceAccessRule</span>(<a href="../../GuidAssembly/R/72f988bf-86f1-41af-91ab-2d7cd011db47.html" target="n" class="s">&quot;72f988bf-86f1-41af-91ab-2d7cd011db47&quot;</a>,<span class="s">&quot;/subscriptions/subID/resourceGroups/RGName/providers/Microsoft.Storage/storageAccounts/testaccount2&quot;</span>),
                        },
                        <span class="i">DefaultAction</span> = <a href="/Microsoft.Azure.Management.Storage/A.html#4b2981f9a8dcc6b7" class="t t">DefaultAction</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e65fae6221496518" class="i field">Deny</a>
                    }
                };
                <span class="r279 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Update</span>(<span class="r280 r">rgname</span>, <span class="r281 r">accountName</span>, <span class="r284 r">updateParameters</span>);
                <span class="r283 r">account</span> = <span class="r279 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r280 r">rgname</span>, <span class="r281 r">accountName</span>);
 
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r283 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#c80851f0f85eff17" class="i property">NetworkRuleSet</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">@&quot;Logging, Metrics&quot;</span>, <span class="r283 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#c80851f0f85eff17" class="i property">NetworkRuleSet</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#86c5efb6ed779c65" class="i property">Bypass</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#4b2981f9a8dcc6b7" class="t t">DefaultAction</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e65fae6221496518" class="i field">Deny</a>, <span class="r283 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#c80851f0f85eff17" class="i property">NetworkRuleSet</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#c973cb779168e32e" class="i property">DefaultAction</a>);
                <span class="i">Assert</span>.<span class="i">Empty</span>(<span class="r283 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#c80851f0f85eff17" class="i property">NetworkRuleSet</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#7735b06551b926d8" class="i property">VirtualNetworkRules</a>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r283 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#c80851f0f85eff17" class="i property">NetworkRuleSet</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#eb7a7edda91c7537" class="i property">IpRules</a>);
                <span class="i">Assert</span>.<span class="i">NotEmpty</span>(<span class="r283 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#c80851f0f85eff17" class="i property">NetworkRuleSet</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#eb7a7edda91c7537" class="i property">IpRules</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;23.45.67.91&quot;</span>, <span class="r283 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#c80851f0f85eff17" class="i property">NetworkRuleSet</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#eb7a7edda91c7537" class="i property">IpRules</a>[0].<span class="i">IPAddressOrRange</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i n">Storage</span>.<span class="i n">Models</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#8c51395a3513431c" class="t t">Action</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e92b359f10db0ff1" class="i field">Allow</a>, <span class="r283 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#c80851f0f85eff17" class="i property">NetworkRuleSet</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#eb7a7edda91c7537" class="i property">IpRules</a>[0].<span class="i">Action</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;23.45.67.92&quot;</span>, <span class="r283 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#c80851f0f85eff17" class="i property">NetworkRuleSet</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#eb7a7edda91c7537" class="i property">IpRules</a>[1].<span class="i">IPAddressOrRange</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i n">Storage</span>.<span class="i n">Models</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#8c51395a3513431c" class="t t">Action</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e92b359f10db0ff1" class="i field">Allow</a>, <span class="r283 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#c80851f0f85eff17" class="i property">NetworkRuleSet</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#eb7a7edda91c7537" class="i property">IpRules</a>[1].<span class="i">Action</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r283 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#c80851f0f85eff17" class="i property">NetworkRuleSet</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#aa914c3b2f65212a" class="i property">ResourceAccessRules</a>);
                <span class="i">Assert</span>.<span class="i">NotEmpty</span>(<span class="r283 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#c80851f0f85eff17" class="i property">NetworkRuleSet</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#aa914c3b2f65212a" class="i property">ResourceAccessRules</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="../../GuidAssembly/R/72f988bf-86f1-41af-91ab-2d7cd011db47.html" target="n" class="s">&quot;72f988bf-86f1-41af-91ab-2d7cd011db47&quot;</a>, <span class="r283 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#c80851f0f85eff17" class="i property">NetworkRuleSet</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#aa914c3b2f65212a" class="i property">ResourceAccessRules</a>[0].<span class="i">TenantId</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;/subscriptions/subID/resourceGroups/RGName/providers/Microsoft.Storage/storageAccounts/testaccount1&quot;</span>, <span class="r283 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#c80851f0f85eff17" class="i property">NetworkRuleSet</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#aa914c3b2f65212a" class="i property">ResourceAccessRules</a>[0].<span class="i">ResourceId</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="../../GuidAssembly/R/72f988bf-86f1-41af-91ab-2d7cd011db47.html" target="n" class="s">&quot;72f988bf-86f1-41af-91ab-2d7cd011db47&quot;</a>, <span class="r283 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#c80851f0f85eff17" class="i property">NetworkRuleSet</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#aa914c3b2f65212a" class="i property">ResourceAccessRules</a>[1].<span class="i">TenantId</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;/subscriptions/subID/resourceGroups/RGName/providers/Microsoft.Storage/storageAccounts/testaccount2&quot;</span>, <span class="r283 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#c80851f0f85eff17" class="i property">NetworkRuleSet</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#aa914c3b2f65212a" class="i property">ResourceAccessRules</a>[1].<span class="i">ResourceId</span>);
 
                <span class="c">// Delete vnet.</span>
                <span class="r284 r">updateParameters</span> = <b>new</b> <span class="t">StorageAccountUpdateParameters</span>
                {
                    <span class="i">NetworkRuleSet</span> = <b>new</b> <span class="t">NetworkRuleSet</span> { }
                };
                <span class="r279 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Update</span>(<span class="r280 r">rgname</span>, <span class="r281 r">accountName</span>, <span class="r284 r">updateParameters</span>);
 
                <span class="r283 r">account</span> = <span class="r279 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r280 r">rgname</span>, <span class="r281 r">accountName</span>);
 
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r283 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#c80851f0f85eff17" class="i property">NetworkRuleSet</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">@&quot;Logging, Metrics&quot;</span>, <span class="r283 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#c80851f0f85eff17" class="i property">NetworkRuleSet</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#86c5efb6ed779c65" class="i property">Bypass</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#4b2981f9a8dcc6b7" class="t t">DefaultAction</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#1fede16a7d59c39b" class="i field">Allow</a>, <span class="r283 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#c80851f0f85eff17" class="i property">NetworkRuleSet</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#c973cb779168e32e" class="i property">DefaultAction</a>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="4ac4d513d96e8a4b" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageSKUListTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r285 rd" class="r285 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r286 rd" class="r286 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r287 rd" class="r287 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r286 r">context</span>, <span class="r285 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r288 rd" class="r288 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r286 r">context</span>, <span class="r285 r">handler</span>);
 
                <b>var</b> <span id="r289 rd" class="r289 r">skulist</span> = <span class="r288 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#ecedbbaf1aa3abe9" class="i property">Skus</a>.<span class="i">List</span>();
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r289 r">skulist</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">@&quot;storageAccounts&quot;</span>, <span class="r289 r">skulist</span>.<span class="i">ElementAt</span>(0).<span class="i">ResourceType</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r289 r">skulist</span>.<span class="i">ElementAt</span>(0).<span class="i">Name</span>);
                <span class="i">Assert</span>.<span class="i">IsType</span>&lt;<b>string</b>&gt;(<span class="r289 r">skulist</span>.<span class="i">ElementAt</span>(0).<span class="i">Name</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r289 r">skulist</span>.<span class="i">ElementAt</span>(0).<span class="i">Name</span>.<span class="i">Equals</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#49fd6fdd5d2ba1d5" class="i field">PremiumLRS</a>)
                    || <span class="r289 r">skulist</span>.<span class="i">ElementAt</span>(0).<span class="i">Name</span>.<span class="i">Equals</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#5404beb07ae30d98" class="i field">StandardGRS</a>)
                    || <span class="r289 r">skulist</span>.<span class="i">ElementAt</span>(0).<span class="i">Name</span>.<span class="i">Equals</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e9da3fc1a9ac45de" class="i field">StandardLRS</a>)
                    || <span class="r289 r">skulist</span>.<span class="i">ElementAt</span>(0).<span class="i">Name</span>.<span class="i">Equals</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#f999609d3611d016" class="i field">StandardRAGRS</a>)
                    || <span class="r289 r">skulist</span>.<span class="i">ElementAt</span>(0).<span class="i">Name</span>.<span class="i">Equals</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#b720b038c7ab4516" class="i field">StandardZRS</a>));
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r289 r">skulist</span>.<span class="i">ElementAt</span>(0).<span class="i">Kind</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r289 r">skulist</span>.<span class="i">ElementAt</span>(0).<span class="i">Kind</span>.<span class="i">Equals</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#92d10e00bf3af788" class="i field">BlobStorage</a>) || <span class="r289 r">skulist</span>.<span class="i">ElementAt</span>(0).<span class="i">Kind</span>.<span class="i">Equals</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#fd3939f069de73f7" class="i field">Storage</a>) || <span class="r289 r">skulist</span>.<span class="i">ElementAt</span>(0).<span class="i">Kind</span>.<span class="i">Equals</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#d6ee97275f551bb3" class="i field">StorageV2</a>));
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="7c9943add707fb7f" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountCreateWithStorageV2</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r290 rd" class="r290 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r291 rd" class="r291 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r292 rd" class="r292 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r291 r">context</span>, <span class="r290 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r293 rd" class="r293 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r291 r">context</span>, <span class="r290 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r294 rd" class="r294 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r292 r">resourcesClient</span>);
 
                <span class="c">// Create storage account with StorageV2</span>
                <b>string</b> <span id="r295 rd" class="r295 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r296 rd" class="r296 r">parameters</span> = <b>new</b> <span class="t">StorageAccountCreateParameters</span>
                {
                    <span class="i">Sku</span> = <b>new</b> <span class="t">Sku</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#5404beb07ae30d98" class="i field">StandardGRS</a> },
                    <a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#d6ee97275f551bb3" class="i field">StorageV2</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#0a5812a9fdf2fdfe" class="i field">DefaultLocation</a>
                };
                <b>var</b> <span id="r297 rd" class="r297 r">account</span> = <span class="r293 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r294 r">rgname</span>, <span class="r295 r">accountName</span>, <span class="r296 r">parameters</span>);
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<span class="i">VerifyAccountProperties</span>(<span class="r297 r">account</span>, <b>false</b>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r297 r">account</span>.<span class="i">PrimaryEndpoints</span>.<span class="i">Web</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#d6ee97275f551bb3" class="i field">StorageV2</a>, <span class="r297 r">account</span>.<span class="i">Kind</span>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="e49041567ffc14f3" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountUpdateKindStorageV2</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r298 rd" class="r298 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r299 rd" class="r299 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r300 rd" class="r300 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r299 r">context</span>, <span class="r298 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r301 rd" class="r301 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r299 r">context</span>, <span class="r298 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r302 rd" class="r302 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r300 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r303 rd" class="r303 r">accountName</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#e4a1b8b7f0893760" class="i method">CreateStorageAccount</a>(<span class="r301 r">storageMgmtClient</span>, <span class="r302 r">rgname</span>);
 
                <span class="c">// Update storage account type</span>
                <a href="/Microsoft.Azure.Management.Storage/A.html#c031ad46f74edc74" class="k">var</a> <span id="r304 rd" class="r304 r">parameters</span> = <b>new</b> <span class="t">StorageAccountUpdateParameters</span>
                {
                    <a href="/Microsoft.Azure.Management.Storage/A.html#a81231b92c971d3a" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#d6ee97275f551bb3" class="i field">StorageV2</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#9160cbab25d1fb38" class="i property">EnableHttpsTrafficOnly</a> = <b>true</b>
                };
                <b>var</b> <span id="r305 rd" class="r305 r">account</span> = <span class="r301 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Update</span>(<span class="r302 r">rgname</span>, <span class="r303 r">accountName</span>, <span class="r304 r">parameters</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#d6ee97275f551bb3" class="i field">StorageV2</a>, <span class="r305 r">account</span>.<span class="i">Kind</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r305 r">account</span>.<span class="i">EnableHttpsTrafficOnly</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r305 r">account</span>.<span class="i">PrimaryEndpoints</span>.<span class="i">Web</span>);
 
                <span class="c">// Validate</span>
                <span class="r305 r">account</span> = <span class="r301 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r302 r">rgname</span>, <span class="r303 r">accountName</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#d6ee97275f551bb3" class="i field">StorageV2</a>, <span class="r305 r">account</span>.<span class="i">Kind</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r305 r">account</span>.<span class="i">EnableHttpsTrafficOnly</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r305 r">account</span>.<span class="i">PrimaryEndpoints</span>.<span class="i">Web</span>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="fe29df0236f20be0" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountSetGetDeleteManagementPolicy</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r306 rd" class="r306 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r307 rd" class="r307 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r308 rd" class="r308 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r307 r">context</span>, <span class="r306 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r309 rd" class="r309 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r307 r">context</span>, <span class="r306 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r310 rd" class="r310 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r308 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r311 rd" class="r311 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r312 rd" class="r312 r">parameters</span> = <b>new</b> <span class="t">StorageAccountCreateParameters</span>
                {
                    <span class="i">Sku</span> = <b>new</b> <span class="t">Sku</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#5404beb07ae30d98" class="i field">StandardGRS</a> },
                    <a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#d6ee97275f551bb3" class="i field">StorageV2</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a> = <span class="s">&quot;eastus2euap&quot;</span>
                };
                <span class="r309 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r310 r">rgname</span>, <span class="r311 r">accountName</span>, <span class="r312 r">parameters</span>);
                <span class="i">List</span>&lt;<a href="/Microsoft.Azure.Management.Storage/A.html#c1dd4470c32073f4" class="t t">ManagementPolicyRule</a>&gt; <span id="r313 rd" class="r313 r">rules</span> = <b>new</b> <span class="i">List</span>&lt;<a href="/Microsoft.Azure.Management.Storage/A.html#c1dd4470c32073f4" class="t t">ManagementPolicyRule</a>&gt;();
 
                <span class="c">//Enable LAT</span>
                <a href="/Microsoft.Azure.Management.Storage/A.html#0d8c913078830fb7" class="t t">BlobServiceProperties</a> <span id="r314 rd" class="r314 r">properties</span> = <span class="r309 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#94bd1bbe712e5c53" class="i property">BlobServices</a>.<span class="i">GetServiceProperties</span>(<span class="r310 r">rgname</span>, <span class="r311 r">accountName</span>);
                <span class="r314 r">properties</span>.<span class="i">LastAccessTimeTrackingPolicy</span> = <b>new</b> <span class="t">LastAccessTimeTrackingPolicy</span>(<b>true</b>);
                <span class="r314 r">properties</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#833dd8464850f0e2" class="i property">LastAccessTimeTrackingPolicy</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#80b49ee4c9e559ed" class="i property">Enable</a> = <b>true</b>;
                <span class="r309 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#94bd1bbe712e5c53" class="i property">BlobServices</a>.<span class="i">SetServiceProperties</span>(<span class="r310 r">rgname</span>, <span class="r311 r">accountName</span>, <span class="r314 r">properties</span>);
 
                <span class="c">// create ManagementPolicy to set</span>
                <span class="i">List</span>&lt;<a href="/Microsoft.Azure.Management.Storage/A.html#eb34c0f6d27a82cb" class="t t">TagFilter</a>&gt; <span id="r315 rd" class="r315 r">tagFileter</span> = <b>new</b> <span class="i">List</span>&lt;<a href="/Microsoft.Azure.Management.Storage/A.html#eb34c0f6d27a82cb" class="t t">TagFilter</a>&gt;();
                <span class="r315 r">tagFileter</span>.<span class="i">Add</span>(<b>new</b> <span class="t">TagFilter</span>(<span class="s">&quot;tag1&quot;</span>, <span class="s">&quot;==&quot;</span>, <span class="s">&quot;value1&quot;</span>));
                <span class="r315 r">tagFileter</span>.<span class="i">Add</span>(<b>new</b> <span class="t">TagFilter</span>(<span class="s">&quot;tag2&quot;</span>, <span class="s">&quot;==&quot;</span>, <span class="s">&quot;value2&quot;</span>));
                <a href="/Microsoft.Azure.Management.Storage/A.html#c1dd4470c32073f4" class="t t">ManagementPolicyRule</a> <span id="r316 rd" class="r316 r">rule1</span> = <b>new</b> <span class="t">ManagementPolicyRule</span>()
                {
                    <a href="/Microsoft.Azure.Management.Storage/A.html#317a000848ee7d5a" class="i property">Enabled</a> = <b>true</b>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#dfba8474ec9fdcbd" class="i property">Name</a> = <span class="s">&quot;olcmtest&quot;</span>,
                    <span class="i">Definition</span> = <b>new</b> <span class="t">ManagementPolicyDefinition</span>()
                    {
                        <span class="i">Actions</span> = <b>new</b> <span class="t">ManagementPolicyAction</span>()
                        {
                            <span class="i">BaseBlob</span> = <b>new</b> <span class="t">ManagementPolicyBaseBlob</span>(<b>new</b> <span class="t">DateAfterModification</span>(<b>null</b>, 1000), <b>new</b> <span class="t">DateAfterModification</span>(90), <b>new</b> <span class="t">DateAfterModification</span>(300), <b>true</b>)
                        },
                        <span class="i">Filters</span> = <b>new</b> <span class="t">ManagementPolicyFilter</span>(<b>new</b> <span class="i">List</span>&lt;<b>string</b>&gt;() { <span class="s">&quot;blockBlob&quot;</span> },
                            <b>new</b> <span class="i">List</span>&lt;<b>string</b>&gt;() { <span class="s">&quot;olcmtestcontainer&quot;</span>, <span class="s">&quot;testblob&quot;</span> },
                            <span class="r315 r">tagFileter</span>)
                    }
                };
                <span class="r313 r">rules</span>.<span class="i">Add</span>(<span class="r316 r">rule1</span>);
 
                <a href="/Microsoft.Azure.Management.Storage/A.html#c1dd4470c32073f4" class="t t">ManagementPolicyRule</a> <span id="r317 rd" class="r317 r">rule2</span> = <b>new</b> <span class="t">ManagementPolicyRule</span>()
                {
                    <a href="/Microsoft.Azure.Management.Storage/A.html#317a000848ee7d5a" class="i property">Enabled</a> = <b>false</b>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#dfba8474ec9fdcbd" class="i property">Name</a> = <span class="s">&quot;olcmtest2&quot;</span>,
                    <span class="i">Definition</span> = <b>new</b> <span class="t">ManagementPolicyDefinition</span>()
                    {
                        <span class="i">Actions</span> = <b>new</b> <span class="t">ManagementPolicyAction</span>()
                        {
                            <span class="i">BaseBlob</span> = <b>new</b> <span class="t">ManagementPolicyBaseBlob</span>(<span class="i">delete</span>: <b>new</b> <span class="t">DateAfterModification</span>(1000)),
                            <span class="i">Snapshot</span> = <b>new</b> <span class="t">ManagementPolicySnapShot</span>(<b>new</b> <span class="t">DateAfterCreation</span>(100))
                        },
                        <span class="i">Filters</span> = <b>new</b> <span class="t">ManagementPolicyFilter</span>(<span class="i">blobTypes</span>: <b>new</b> <span class="i">List</span>&lt;<b>string</b>&gt;() { <span class="s">&quot;blockBlob&quot;</span> }),
                    }
                };
                <span class="r313 r">rules</span>.<span class="i">Add</span>(<span class="r317 r">rule2</span>);
 
                <a href="/Microsoft.Azure.Management.Storage/A.html#c1dd4470c32073f4" class="t t">ManagementPolicyRule</a> <span id="r318 rd" class="r318 r">rule3</span> = <b>new</b> <span class="t">ManagementPolicyRule</span>()
                {
                    <a href="/Microsoft.Azure.Management.Storage/A.html#dfba8474ec9fdcbd" class="i property">Name</a> = <span class="s">&quot;olcmtest3&quot;</span>,
                    <span class="i">Definition</span> = <b>new</b> <span class="t">ManagementPolicyDefinition</span>()
                    {
                        <span class="i">Actions</span> = <b>new</b> <span class="t">ManagementPolicyAction</span>()
                        {
                            <span class="i">Snapshot</span> = <b>new</b> <span class="t">ManagementPolicySnapShot</span>(<b>new</b> <span class="t">DateAfterCreation</span>(200))
                        },
                        <span class="i">Filters</span> = <b>new</b> <span class="t">ManagementPolicyFilter</span>(<span class="i">blobTypes</span>: <b>new</b> <span class="i">List</span>&lt;<b>string</b>&gt;() { <span class="s">&quot;blockBlob&quot;</span> }),
                    }
                };
                <span class="r313 r">rules</span>.<span class="i">Add</span>(<span class="r318 r">rule3</span>);
 
                <span class="c">//Set Management Policies</span>
                <a href="/Microsoft.Azure.Management.Storage/A.html#acffa0a9f66337c3" class="t t">ManagementPolicySchema</a> <span id="r319 rd" class="r319 r">policyToSet</span> = <b>new</b> <span class="t">ManagementPolicySchema</span>(<span class="r313 r">rules</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#a17951d7b6a0075e" class="t t">ManagementPolicy</a> <span id="r320 rd" class="r320 r">policy</span> = <span class="r309 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#6061de9a4f7b7f68" class="i property">ManagementPolicies</a>.<span class="i">CreateOrUpdate</span>(<span class="r310 r">rgname</span>, <span class="r311 r">accountName</span>, <span class="r319 r">policyToSet</span>);
                <a href="#6afedb07dc04297c" class="i method">CompareStorageAccountManagementPolicyProperty</a>(<span class="r319 r">policyToSet</span>, <span class="r320 r">policy</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#9f0406d0c37d1304" class="i property">Policy</a>);
 
                <span class="c">//Get Management Policies</span>
                <span class="r320 r">policy</span> = <span class="r309 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#6061de9a4f7b7f68" class="i property">ManagementPolicies</a>.<span class="i">Get</span>(<span class="r310 r">rgname</span>, <span class="r311 r">accountName</span>);
                <a href="#6afedb07dc04297c" class="i method">CompareStorageAccountManagementPolicyProperty</a>(<span class="r319 r">policyToSet</span>, <span class="r320 r">policy</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#9f0406d0c37d1304" class="i property">Policy</a>);
 
                <span class="c">//Delete Management Policies, and check policy not exist </span>
                <span class="r309 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#6061de9a4f7b7f68" class="i property">ManagementPolicies</a>.<span class="i">Delete</span>(<span class="r310 r">rgname</span>, <span class="r311 r">accountName</span>);
                <b>bool</b> <span id="r321 rd" class="r321 r">dataPolicyExist</span> = <b>true</b>;
                <b>try</b>
                {
                    <span class="r320 r">policy</span> = <span class="r309 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#6061de9a4f7b7f68" class="i property">ManagementPolicies</a>.<span class="i">Get</span>(<span class="r310 r">rgname</span>, <span class="r311 r">accountName</span>);
                }
                <b>catch</b> (<span class="i n">Microsoft</span>.<span class="i">Rest</span>.<span class="i">Azure</span>.<span class="i">CloudException</span> <span id="r322 rd" class="r322 r">cloudException</span>)
                {
                    <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="i">System</span>.<span class="i">Net</span>.<span class="i">HttpStatusCode</span>.<span class="i">NotFound</span>, <span class="r322 r">cloudException</span>.<span class="i">Response</span>.<span class="i">StatusCode</span>);
                    <span class="r321 r">dataPolicyExist</span> = <b>false</b>;
                }
                <span class="i">Assert</span>.<span class="i">False</span>(<span class="r321 r">dataPolicyExist</span>);
 
                <span class="c">//Delete not exist Management Policies will not fail</span>
                <span class="r309 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#6061de9a4f7b7f68" class="i property">ManagementPolicies</a>.<span class="i">Delete</span>(<span class="r310 r">rgname</span>, <span class="r311 r">accountName</span>);
            }
        }
 
        <b>private static void</b> <a id="6afedb07dc04297c" href="../R/6afedb07dc04297c.html" target="n" data-glyph="76,1" class="i method">CompareStorageAccountManagementPolicyProperty</a>(<a href="/Microsoft.Azure.Management.Storage/A.html#acffa0a9f66337c3" class="t t">ManagementPolicySchema</a> <span id="r323 rd" class="r323 r">policy1</span>, <a href="/Microsoft.Azure.Management.Storage/A.html#acffa0a9f66337c3" class="t t">ManagementPolicySchema</a> <span id="r324 rd" class="r324 r">policy2</span>)
        {
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r323 r">policy1</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#36cf6c442c7d23e4" class="i property">Rules</a>.<span class="i">Count</span>, <span class="r324 r">policy2</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#36cf6c442c7d23e4" class="i property">Rules</a>.<span class="i">Count</span>);
            <b>foreach</b> (<a href="/Microsoft.Azure.Management.Storage/A.html#c1dd4470c32073f4" class="t t">ManagementPolicyRule</a> <span id="r325 rd" class="r325 r">rule1</span> <b>in</b> <span class="r323 r">policy1</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#36cf6c442c7d23e4" class="i property">Rules</a>)
            {
                <b>bool</b> <span id="r326 rd" class="r326 r">ruleFound</span> = <b>false</b>;
                <b>foreach</b> (<a href="/Microsoft.Azure.Management.Storage/A.html#c1dd4470c32073f4" class="t t">ManagementPolicyRule</a> <span id="r327 rd" class="r327 r">rule2</span> <b>in</b> <span class="r324 r">policy2</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#36cf6c442c7d23e4" class="i property">Rules</a>)
                {
                    <b>if</b> (<span class="r325 r">rule1</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#dfba8474ec9fdcbd" class="i property">Name</a> == <span class="r327 r">rule2</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#dfba8474ec9fdcbd" class="i property">Name</a>)
                    {
                        <span class="r326 r">ruleFound</span> = <b>true</b>;
                        <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r325 r">rule1</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#317a000848ee7d5a" class="i property">Enabled</a> <b>is null</b> ? <b>true</b> : <span class="r325 r">rule1</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#317a000848ee7d5a" class="i property">Enabled</a>, <span class="r327 r">rule2</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#317a000848ee7d5a" class="i property">Enabled</a>);
                        <b>if</b> (<span class="r325 r">rule1</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#01ff61b1a36d5e7d" class="i property">Definition</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#bc32d9c286098fdc" class="i property">Filters</a> != <b>null</b> || <span class="r327 r">rule2</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#01ff61b1a36d5e7d" class="i property">Definition</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#bc32d9c286098fdc" class="i property">Filters</a> != <b>null</b>)
                        {
                            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r325 r">rule1</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#01ff61b1a36d5e7d" class="i property">Definition</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#bc32d9c286098fdc" class="i property">Filters</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#6954dee1ad50e123" class="i property">BlobTypes</a>, <span class="r327 r">rule2</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#01ff61b1a36d5e7d" class="i property">Definition</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#bc32d9c286098fdc" class="i property">Filters</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#6954dee1ad50e123" class="i property">BlobTypes</a>);
                            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r325 r">rule1</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#01ff61b1a36d5e7d" class="i property">Definition</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#bc32d9c286098fdc" class="i property">Filters</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#1fe4eb304a8033b6" class="i property">PrefixMatch</a>, <span class="r327 r">rule2</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#01ff61b1a36d5e7d" class="i property">Definition</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#bc32d9c286098fdc" class="i property">Filters</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#1fe4eb304a8033b6" class="i property">PrefixMatch</a>);
                        }
                        <b>if</b> (<span class="r325 r">rule1</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#01ff61b1a36d5e7d" class="i property">Definition</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#c87f3681207e2b3d" class="i property">Actions</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#0fccbc007a70d0c2" class="i property">BaseBlob</a> != <b>null</b> || <span class="r327 r">rule2</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#01ff61b1a36d5e7d" class="i property">Definition</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#c87f3681207e2b3d" class="i property">Actions</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#0fccbc007a70d0c2" class="i property">BaseBlob</a> != <b>null</b>)
                        {
                            <a href="#3bef94616c3a32e6" class="i method">CompareDateAfterModification</a>(<span class="r325 r">rule1</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#01ff61b1a36d5e7d" class="i property">Definition</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#c87f3681207e2b3d" class="i property">Actions</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#0fccbc007a70d0c2" class="i property">BaseBlob</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#24a9f4439f18471e" class="i property">TierToCool</a>, <span class="r327 r">rule2</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#01ff61b1a36d5e7d" class="i property">Definition</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#c87f3681207e2b3d" class="i property">Actions</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#0fccbc007a70d0c2" class="i property">BaseBlob</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#24a9f4439f18471e" class="i property">TierToCool</a>);
                            <a href="#3bef94616c3a32e6" class="i method">CompareDateAfterModification</a>(<span class="r325 r">rule1</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#01ff61b1a36d5e7d" class="i property">Definition</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#c87f3681207e2b3d" class="i property">Actions</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#0fccbc007a70d0c2" class="i property">BaseBlob</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#81067fa1ceec2673" class="i property">TierToArchive</a>, <span class="r327 r">rule2</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#01ff61b1a36d5e7d" class="i property">Definition</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#c87f3681207e2b3d" class="i property">Actions</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#0fccbc007a70d0c2" class="i property">BaseBlob</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#81067fa1ceec2673" class="i property">TierToArchive</a>);
                            <a href="#3bef94616c3a32e6" class="i method">CompareDateAfterModification</a>(<span class="r325 r">rule1</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#01ff61b1a36d5e7d" class="i property">Definition</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#c87f3681207e2b3d" class="i property">Actions</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#0fccbc007a70d0c2" class="i property">BaseBlob</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#405f41b1fc30b351" class="i property">Delete</a>, <span class="r327 r">rule2</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#01ff61b1a36d5e7d" class="i property">Definition</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#c87f3681207e2b3d" class="i property">Actions</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#0fccbc007a70d0c2" class="i property">BaseBlob</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#405f41b1fc30b351" class="i property">Delete</a>);
                            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r325 r">rule1</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#01ff61b1a36d5e7d" class="i property">Definition</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#c87f3681207e2b3d" class="i property">Actions</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#0fccbc007a70d0c2" class="i property">BaseBlob</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#17cfd795da8ba0d8" class="i property">EnableAutoTierToHotFromCool</a>, <span class="r327 r">rule2</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#01ff61b1a36d5e7d" class="i property">Definition</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#c87f3681207e2b3d" class="i property">Actions</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#0fccbc007a70d0c2" class="i property">BaseBlob</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#17cfd795da8ba0d8" class="i property">EnableAutoTierToHotFromCool</a>);
                        }
 
                        <b>if</b> (<span class="r325 r">rule1</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#01ff61b1a36d5e7d" class="i property">Definition</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#c87f3681207e2b3d" class="i property">Actions</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#b9bb8df86b1be835" class="i property">Snapshot</a> != <b>null</b> || <span class="r327 r">rule2</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#01ff61b1a36d5e7d" class="i property">Definition</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#c87f3681207e2b3d" class="i property">Actions</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#b9bb8df86b1be835" class="i property">Snapshot</a> != <b>null</b>)
                        {
                            <a href="#39b9dfaeb0424605" class="i method">CompareDateAfterCreation</a>(<span class="r325 r">rule1</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#01ff61b1a36d5e7d" class="i property">Definition</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#c87f3681207e2b3d" class="i property">Actions</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#b9bb8df86b1be835" class="i property">Snapshot</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#c5aaa79f0cb2c042" class="i property">Delete</a>, <span class="r325 r">rule1</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#01ff61b1a36d5e7d" class="i property">Definition</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#c87f3681207e2b3d" class="i property">Actions</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#b9bb8df86b1be835" class="i property">Snapshot</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#c5aaa79f0cb2c042" class="i property">Delete</a>);
                        }
                        <b>break</b>;
                    }
                }
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r326 r">ruleFound</span>, <span class="i">String</span>.<span class="i">Format</span>(<span class="s">&quot;The set rule {0} should be found in the output.&quot;</span>, <span class="r325 r">rule1</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#dfba8474ec9fdcbd" class="i property">Name</a>));
            }
        }
 
        <b>private static void</b> <a id="3bef94616c3a32e6" href="../R/3bef94616c3a32e6.html" target="n" data-glyph="76,1" class="i method">CompareDateAfterModification</a>(<a href="/Microsoft.Azure.Management.Storage/A.html#4abb91135de7d24d" class="t t">DateAfterModification</a> <span id="r328 rd" class="r328 r">date1</span>, <a href="/Microsoft.Azure.Management.Storage/A.html#4abb91135de7d24d" class="t t">DateAfterModification</a> <span id="r329 rd" class="r329 r">date2</span>)
        {
            <b>if</b> ((<span class="r328 r">date1</span> <b>is null</b>) &amp;&amp; (<span class="r329 r">date2</span> <b>is null</b>))
            {
                <b>return</b>;
            }
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r328 r">date1</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#e2e08f8cee5232a1" class="i property">DaysAfterModificationGreaterThan</a>, <span class="r329 r">date2</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#e2e08f8cee5232a1" class="i property">DaysAfterModificationGreaterThan</a>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r328 r">date1</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#83310b16198f953d" class="i property">DaysAfterLastAccessTimeGreaterThan</a>, <span class="r329 r">date2</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#83310b16198f953d" class="i property">DaysAfterLastAccessTimeGreaterThan</a>);
        }
 
        <b>private static void</b> <a id="39b9dfaeb0424605" href="../R/39b9dfaeb0424605.html" target="n" data-glyph="76,1" class="i method">CompareDateAfterCreation</a>(<a href="/Microsoft.Azure.Management.Storage/A.html#d10fcf6989d6d1a9" class="t t">DateAfterCreation</a> <span id="r330 rd" class="r330 r">date1</span>, <a href="/Microsoft.Azure.Management.Storage/A.html#d10fcf6989d6d1a9" class="t t">DateAfterCreation</a> <span id="r331 rd" class="r331 r">date2</span>)
        {
            <b>if</b> ((<span class="r330 r">date1</span> <b>is null</b>) &amp;&amp; (<span class="r331 r">date2</span> <b>is null</b>))
            {
                <b>return</b>;
            }
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r330 r">date1</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#7cf8fc1851fb52f4" class="i property">DaysAfterCreationGreaterThan</a>, <span class="r331 r">date2</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#7cf8fc1851fb52f4" class="i property">DaysAfterCreationGreaterThan</a>);
        }
 
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="57cb54de1ae3355a" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountCreateGetdfs</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r332 rd" class="r332 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r333 rd" class="r333 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r334 rd" class="r334 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r333 r">context</span>, <span class="r332 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r335 rd" class="r335 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r333 r">context</span>, <span class="r332 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r336 rd" class="r336 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r334 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r337 rd" class="r337 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r338 rd" class="r338 r">parameters</span> = <b>new</b> <span class="t">StorageAccountCreateParameters</span>
                {
                    <span class="i">Sku</span> = <b>new</b> <span class="t">Sku</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#5404beb07ae30d98" class="i field">StandardGRS</a> },
                    <a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#d6ee97275f551bb3" class="i field">StorageV2</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#2554007befe850c8" class="i property">IsHnsEnabled</a> = <b>true</b>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#0a5812a9fdf2fdfe" class="i field">DefaultLocation</a>
                };
                <b>var</b> <span id="r339 rd" class="r339 r">account</span> = <span class="r335 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r336 r">rgname</span>, <span class="r337 r">accountName</span>, <span class="r338 r">parameters</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r339 r">account</span>.<span class="i">IsHnsEnabled</span> = <b>true</b>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r339 r">account</span>.<span class="i">PrimaryEndpoints</span>.<span class="i">Dfs</span>);
 
                <span class="c">// Validate</span>
                <span class="r339 r">account</span> = <span class="r335 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r336 r">rgname</span>, <span class="r337 r">accountName</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r339 r">account</span>.<span class="i">IsHnsEnabled</span> = <b>true</b>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r339 r">account</span>.<span class="i">PrimaryEndpoints</span>.<span class="i">Dfs</span>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="ba6bb908649ec38b" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountCreateWithFileStorage</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r340 rd" class="r340 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r341 rd" class="r341 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r342 rd" class="r342 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r341 r">context</span>, <span class="r340 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r343 rd" class="r343 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r341 r">context</span>, <span class="r340 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r344 rd" class="r344 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r342 r">resourcesClient</span>);
 
                <span class="c">// Create storage account with StorageV2</span>
                <b>string</b> <span id="r345 rd" class="r345 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r346 rd" class="r346 r">parameters</span> = <b>new</b> <span class="t">StorageAccountCreateParameters</span>
                {
                    <span class="i">Sku</span> = <b>new</b> <span class="t">Sku</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#49fd6fdd5d2ba1d5" class="i field">PremiumLRS</a> },
                    <a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#037e82e2ecbc02e5" class="i field">FileStorage</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a> = <span class="s">&quot;centraluseuap&quot;</span>
                };
                <b>var</b> <span id="r347 rd" class="r347 r">account</span> = <span class="r343 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r344 r">rgname</span>, <span class="r345 r">accountName</span>, <span class="r346 r">parameters</span>);
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<span class="i">VerifyAccountProperties</span>(<span class="r347 r">account</span>, <b>false</b>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#037e82e2ecbc02e5" class="i field">FileStorage</a>, <span class="r347 r">account</span>.<span class="i">Kind</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#49fd6fdd5d2ba1d5" class="i field">PremiumLRS</a>, <span class="r347 r">account</span>.<span class="i">Sku</span>.<span class="i">Name</span>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="c908a80fcaf8a075" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountCreateWithBlockBlobStorage</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r348 rd" class="r348 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r349 rd" class="r349 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r350 rd" class="r350 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r349 r">context</span>, <span class="r348 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r351 rd" class="r351 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r349 r">context</span>, <span class="r348 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r352 rd" class="r352 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r350 r">resourcesClient</span>);
 
                <span class="c">// Create storage account with StorageV2</span>
                <b>string</b> <span id="r353 rd" class="r353 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r354 rd" class="r354 r">parameters</span> = <b>new</b> <span class="t">StorageAccountCreateParameters</span>
                {
                    <span class="i">Sku</span> = <b>new</b> <span class="t">Sku</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#49fd6fdd5d2ba1d5" class="i field">PremiumLRS</a> },
                    <a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#a12fa2ec2007997f" class="i field">BlockBlobStorage</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a> = <span class="s">&quot;centraluseuap&quot;</span>
                };
                <b>var</b> <span id="r355 rd" class="r355 r">account</span> = <span class="r351 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r352 r">rgname</span>, <span class="r353 r">accountName</span>, <span class="r354 r">parameters</span>);
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<span class="i">VerifyAccountProperties</span>(<span class="r355 r">account</span>, <b>false</b>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#a12fa2ec2007997f" class="i field">BlockBlobStorage</a>, <span class="r355 r">account</span>.<span class="i">Kind</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#49fd6fdd5d2ba1d5" class="i field">PremiumLRS</a>, <span class="r355 r">account</span>.<span class="i">Sku</span>.<span class="i">Name</span>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="1fcfae4f3ca4fe14" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountCreateSetGetFileAadIntegration</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r356 rd" class="r356 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r357 rd" class="r357 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r358 rd" class="r358 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r357 r">context</span>, <span class="r356 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r359 rd" class="r359 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r357 r">context</span>, <span class="r356 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r360 rd" class="r360 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r358 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r361 rd" class="r361 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r362 rd" class="r362 r">parameters</span> = <b>new</b> <span class="t">StorageAccountCreateParameters</span>
                {
                    <span class="i">Sku</span> = <b>new</b> <span class="t">Sku</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#5404beb07ae30d98" class="i field">StandardGRS</a> },
                    <a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#d6ee97275f551bb3" class="i field">StorageV2</a>,
                    <span class="i">AzureFilesIdentityBasedAuthentication</span> = <b>new</b> <span class="t">AzureFilesIdentityBasedAuthentication</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#c87d60b0cd9b1fe6" class="t t">DirectoryServiceOptions</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#45b13415cdda546c" class="i field">AADDS</a>),
                    <a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#0a5812a9fdf2fdfe" class="i field">DefaultLocation</a>
                };
                <b>var</b> <span id="r363 rd" class="r363 r">account</span> = <span class="r359 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r360 r">rgname</span>, <span class="r361 r">accountName</span>, <span class="r362 r">parameters</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#c87d60b0cd9b1fe6" class="t t">DirectoryServiceOptions</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#45b13415cdda546c" class="i field">AADDS</a>, <span class="r363 r">account</span>.<span class="i">AzureFilesIdentityBasedAuthentication</span>.<span class="i">DirectoryServiceOptions</span>);
 
                <span class="c">// Validate</span>
                <span class="r363 r">account</span> = <span class="r359 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r360 r">rgname</span>, <span class="r361 r">accountName</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#c87d60b0cd9b1fe6" class="t t">DirectoryServiceOptions</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#45b13415cdda546c" class="i field">AADDS</a>, <span class="r363 r">account</span>.<span class="i">AzureFilesIdentityBasedAuthentication</span>.<span class="i">DirectoryServiceOptions</span>);
 
                <span class="c">// Update storage account </span>
                <a href="/Microsoft.Azure.Management.Storage/A.html#c031ad46f74edc74" class="k">var</a> <span id="r364 rd" class="r364 r">updateParameters</span> = <b>new</b> <span class="t">StorageAccountUpdateParameters</span>
                {
                    <span class="i">AzureFilesIdentityBasedAuthentication</span> = <b>new</b> <span class="t">AzureFilesIdentityBasedAuthentication</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#c87d60b0cd9b1fe6" class="t t">DirectoryServiceOptions</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#6427b1c9a2371661" class="i field">None</a>),
                    <a href="/Microsoft.Azure.Management.Storage/A.html#9160cbab25d1fb38" class="i property">EnableHttpsTrafficOnly</a> = <b>true</b>
                };
                <span class="r363 r">account</span> = <span class="r359 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Update</span>(<span class="r360 r">rgname</span>, <span class="r361 r">accountName</span>, <span class="r364 r">updateParameters</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#c87d60b0cd9b1fe6" class="t t">DirectoryServiceOptions</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#6427b1c9a2371661" class="i field">None</a>, <span class="r363 r">account</span>.<span class="i">AzureFilesIdentityBasedAuthentication</span>.<span class="i">DirectoryServiceOptions</span>);
 
                <span class="c">// Validate</span>
                <span class="r363 r">account</span> = <span class="r359 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r360 r">rgname</span>, <span class="r361 r">accountName</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#c87d60b0cd9b1fe6" class="t t">DirectoryServiceOptions</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#6427b1c9a2371661" class="i field">None</a>, <span class="r363 r">account</span>.<span class="i">AzureFilesIdentityBasedAuthentication</span>.<span class="i">DirectoryServiceOptions</span>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="e36d922e9b6fd679" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountFailOver</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r365 rd" class="r365 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r366 rd" class="r366 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r367 rd" class="r367 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r366 r">context</span>, <span class="r365 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r368 rd" class="r368 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r366 r">context</span>, <span class="r365 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r369 rd" class="r369 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r367 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r370 rd" class="r370 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r371 rd" class="r371 r">parameters</span> = <b>new</b> <span class="t">StorageAccountCreateParameters</span>
                {
                    <span class="i">Sku</span> = <b>new</b> <span class="t">Sku</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#f999609d3611d016" class="i field">StandardRAGRS</a> },
                    <a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#d6ee97275f551bb3" class="i field">StorageV2</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#0a5812a9fdf2fdfe" class="i field">DefaultLocation</a>
                };
                <b>var</b> <span id="r372 rd" class="r372 r">account</span> = <span class="r368 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r369 r">rgname</span>, <span class="r370 r">accountName</span>, <span class="r371 r">parameters</span>);
 
                <span class="c">// Wait for account ready to failover and Validate</span>
                <b>string</b> <span id="r373 rd" class="r373 r">location</span> = <span class="r371 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a>;
                <b>int</b> <span id="r374 rd" class="r374 r">i</span> = 100;
                <b>do</b>
                {
                    <span class="r372 r">account</span> = <span class="r368 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r369 r">rgname</span>, <span class="r370 r">accountName</span>, <span class="i">expand</span>: <a href="/Microsoft.Azure.Management.Storage/A.html#aa8ec3e77ccd4ed1" class="t t">StorageAccountExpand</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#34e540104017653d" class="i field">GeoReplicationStats</a>);
                    <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#f999609d3611d016" class="i field">StandardRAGRS</a>, <span class="r372 r">account</span>.<span class="i">Sku</span>.<span class="i">Name</span>);
                    <span class="i">Assert</span>.<span class="i">Null</span>(<span class="r372 r">account</span>.<span class="i">FailoverInProgress</span>);
                    <span class="r373 r">location</span> = <span class="r372 r">account</span>.<span class="i">SecondaryLocation</span>;
 
                    <span class="c">//Don&#39;t need sleep when playback, or Unit test will be very slow. Need sleep when record.</span>
                    <b>if</b> (<span class="i">HttpMockServer</span>.<span class="i">Mode</span> == <span class="i">HttpRecorderMode</span>.<span class="i">Record</span>)
                    {
                        <span class="i">System</span>.<span class="i">Threading</span>.<span class="i">Thread</span>.<span class="i">Sleep</span>(10000);
                    }
                } <b>while</b> ((<span class="r372 r">account</span>.<span class="i">GeoReplicationStats</span>.<span class="i">CanFailover</span> != <b>true</b>) &amp;&amp; (<span class="r374 r">i</span>-- &gt; 0));
 
                <span class="c">// Failover storage account </span>
                <span class="r368 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Failover</span>(<span class="r369 r">rgname</span>, <span class="r370 r">accountName</span>);
 
                <span class="c">// Validate</span>
                <span class="r372 r">account</span> = <span class="r368 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r369 r">rgname</span>, <span class="r370 r">accountName</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e9da3fc1a9ac45de" class="i field">StandardLRS</a>, <span class="r372 r">account</span>.<span class="i">Sku</span>.<span class="i">Name</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r373 r">location</span>, <span class="r372 r">account</span>.<span class="i">PrimaryLocation</span>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="276100e2bb8b9fcb" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountGetLastSyncTime</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r375 rd" class="r375 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r376 rd" class="r376 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r377 rd" class="r377 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r376 r">context</span>, <span class="r375 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r378 rd" class="r378 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r376 r">context</span>, <span class="r375 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r379 rd" class="r379 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r377 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r380 rd" class="r380 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r381 rd" class="r381 r">parameters</span> = <b>new</b> <span class="t">StorageAccountCreateParameters</span>
                {
                    <span class="i">Sku</span> = <b>new</b> <span class="t">Sku</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#f999609d3611d016" class="i field">StandardRAGRS</a> },
                    <a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#d6ee97275f551bb3" class="i field">StorageV2</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#0a5812a9fdf2fdfe" class="i field">DefaultLocation</a>
                };
                <a href="/Microsoft.Azure.Management.Storage/A.html#65392932a86ca1ed" class="t t">StorageAccount</a> <span id="r382 rd" class="r382 r">account</span> = <span class="r378 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r379 r">rgname</span>, <span class="r380 r">accountName</span>, <span class="r381 r">parameters</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#f999609d3611d016" class="i field">StandardRAGRS</a>, <span class="r382 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#3e6264f80db197a7" class="i property">Sku</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a>);
                <span class="i">Assert</span>.<span class="i">Null</span>(<span class="r382 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#d05c57a98fdf3346" class="i property">GeoReplicationStats</a>);
                <span class="r382 r">account</span> = <span class="r378 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r379 r">rgname</span>, <span class="r380 r">accountName</span>);
                <span class="i">Assert</span>.<span class="i">Null</span>(<span class="r382 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#d05c57a98fdf3346" class="i property">GeoReplicationStats</a>);
                <span class="r382 r">account</span> = <span class="r378 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r379 r">rgname</span>, <span class="r380 r">accountName</span>, <a href="/Microsoft.Azure.Management.Storage/A.html#aa8ec3e77ccd4ed1" class="t t">StorageAccountExpand</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#34e540104017653d" class="i field">GeoReplicationStats</a>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r382 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#d05c57a98fdf3346" class="i property">GeoReplicationStats</a>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r382 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#d05c57a98fdf3346" class="i property">GeoReplicationStats</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#fad24ab5e2a3dad2" class="i property">Status</a>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r382 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#d05c57a98fdf3346" class="i property">GeoReplicationStats</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#13d6e5832372fae3" class="i property">LastSyncTime</a>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r382 r">account</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#d05c57a98fdf3346" class="i property">GeoReplicationStats</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#9b0756faa1db402a" class="i property">CanFailover</a>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="ab5e508fcb595993" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountLargeFileSharesStateTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r383 rd" class="r383 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r384 rd" class="r384 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r385 rd" class="r385 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r384 r">context</span>, <span class="r383 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r386 rd" class="r386 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r384 r">context</span>, <span class="r383 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r387 rd" class="r387 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r385 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r388 rd" class="r388 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r389 rd" class="r389 r">parameters</span> = <b>new</b> <span class="t">StorageAccountCreateParameters</span>
                {
                    <a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#0a5812a9fdf2fdfe" class="i field">DefaultLocation</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#d6ee97275f551bb3" class="i field">StorageV2</a>,
                    <span class="i">Sku</span> = <b>new</b> <span class="t">Sku</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e9da3fc1a9ac45de" class="i field">StandardLRS</a> },
                    <a href="/Microsoft.Azure.Management.Storage/A.html#4d35851e5e63e785" class="i property">LargeFileSharesState</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#68646d243afdd66c" class="t t">LargeFileSharesState</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#361d8c06c9b08d91" class="i field">Enabled</a>
                };
                <b>var</b> <span id="r390 rd" class="r390 r">account</span> = <span class="r386 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r387 r">rgname</span>, <span class="r388 r">accountName</span>, <span class="r389 r">parameters</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e9da3fc1a9ac45de" class="i field">StandardLRS</a>, <span class="r390 r">account</span>.<span class="i">Sku</span>.<span class="i">Name</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#68646d243afdd66c" class="t t">LargeFileSharesState</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#361d8c06c9b08d91" class="i field">Enabled</a>, <span class="r390 r">account</span>.<span class="i">LargeFileSharesState</span>);
 
                <span class="c">// Validate</span>
                <span class="r390 r">account</span> = <span class="r386 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r387 r">rgname</span>, <span class="r388 r">accountName</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e9da3fc1a9ac45de" class="i field">StandardLRS</a>, <span class="r390 r">account</span>.<span class="i">Sku</span>.<span class="i">Name</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#68646d243afdd66c" class="t t">LargeFileSharesState</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#361d8c06c9b08d91" class="i field">Enabled</a>, <span class="r390 r">account</span>.<span class="i">LargeFileSharesState</span>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="b7a4bc07ffcbbc38" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountPrivateEndpointTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r391 rd" class="r391 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r392 rd" class="r392 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r393 rd" class="r393 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r392 r">context</span>, <span class="r391 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r394 rd" class="r394 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r392 r">context</span>, <span class="r391 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r395 rd" class="r395 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r393 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r396 rd" class="r396 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r397 rd" class="r397 r">parameters</span> = <b>new</b> <span class="t">StorageAccountCreateParameters</span>
                {
                    <a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#0a5812a9fdf2fdfe" class="i field">DefaultLocation</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#d6ee97275f551bb3" class="i field">StorageV2</a>,
                    <span class="i">Sku</span> = <b>new</b> <span class="t">Sku</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e9da3fc1a9ac45de" class="i field">StandardLRS</a> }
                };
                <b>var</b> <span id="r398 rd" class="r398 r">account</span> = <span class="r394 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r395 r">rgname</span>, <span class="r396 r">accountName</span>, <span class="r397 r">parameters</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e9da3fc1a9ac45de" class="i field">StandardLRS</a>, <span class="r398 r">account</span>.<span class="i">Sku</span>.<span class="i">Name</span>);
 
                <span class="r398 r">account</span> = <span class="r394 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r395 r">rgname</span>, <span class="r396 r">accountName</span>);
                <span class="i">IList</span>&lt;<a href="/Microsoft.Azure.Management.Storage/A.html#808ed6c22b4a992b" class="t t">PrivateEndpointConnection</a>&gt; <span id="r399 rd" class="r399 r">pes</span> = <span class="r398 r">account</span>.<span class="i">PrivateEndpointConnections</span>;
                <b>foreach</b> (<a href="/Microsoft.Azure.Management.Storage/A.html#808ed6c22b4a992b" class="t t">PrivateEndpointConnection</a> <span id="r400 rd" class="r400 r">pe</span> <b>in</b> <span class="r399 r">pes</span>)
                {
                    <span class="c">//Get from account</span>
                    <a href="/Microsoft.Azure.Management.Storage/A.html#808ed6c22b4a992b" class="t t">PrivateEndpointConnection</a> <span id="r401 rd" class="r401 r">pe2</span> = <span class="r394 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#9f3ea30abde9bef8" class="i property">PrivateEndpointConnections</a>.<span class="i">Get</span>(<span class="r395 r">rgname</span>, <span class="r396 r">accountName</span>, <span class="r400 r">pe</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#eab45d6dd52a626b" class="i property">Name</a>);
 
                    <span class="c">// Prepare data for set</span>
                    <a href="/Microsoft.Azure.Management.Storage/A.html#da48d2a22c8387ae" class="t t">PrivateEndpoint</a> <span id="r402 rd" class="r402 r">endpoint</span> = <b>new</b> <span class="t">PrivateEndpoint</span>(<span class="r400 r">pe</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#08fc071f7bd6240a" class="i property">PrivateEndpoint</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#c8424701d86fe7bb" class="i property">Id</a>);
                    <a href="/Microsoft.Azure.Management.Storage/A.html#808ed6c22b4a992b" class="t t">PrivateEndpointConnection</a> <span id="r403 rd" class="r403 r">connection</span> = <b>new</b> <span class="t">PrivateEndpointConnection</span>()
                    {
                        <span class="i">PrivateEndpoint</span> = <span class="r402 r">endpoint</span>,
                        <span class="c">//ProvisioningState = PrivateEndpointConnectionProvisioningState.Succeeded,</span>
                        <span class="i">PrivateLinkServiceConnectionState</span> = <b>new</b> <span class="t">PrivateLinkServiceConnectionState</span>()
                        {
                            <a href="/Microsoft.Azure.Management.Storage/A.html#179a2d23dfa0b300" class="i property">ActionRequired</a> = <span class="s">&quot;None&quot;</span>,
                            <a href="/Microsoft.Azure.Management.Storage/A.html#4fe67f478b4c5a1b" class="i property">Description</a> = <span class="s">&quot;123&quot;</span>,
                            <a href="/Microsoft.Azure.Management.Storage/A.html#01b1e46e6d4fd1e1" class="i property">Status</a> = <span class="s">&quot;Approved&quot;</span>
                        }
                    };
 
                    <b>if</b> (<span class="r400 r">pe</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#8010ce6c658a02ce" class="i property">PrivateLinkServiceConnectionState</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#01b1e46e6d4fd1e1" class="i property">Status</a> != <span class="s">&quot;Rejected&quot;</span>)
                    {
                        <span class="c">//Set approve</span>
                        <span class="r403 r">connection</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#8010ce6c658a02ce" class="i property">PrivateLinkServiceConnectionState</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#01b1e46e6d4fd1e1" class="i property">Status</a> = <span class="s">&quot;Approved&quot;</span>;
                        <a href="/Microsoft.Azure.Management.Storage/A.html#808ed6c22b4a992b" class="t t">PrivateEndpointConnection</a> <span id="r404 rd" class="r404 r">pe3</span> = <span class="r394 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#9f3ea30abde9bef8" class="i property">PrivateEndpointConnections</a>.<span class="i">Put</span>(<span class="r395 r">rgname</span>, <span class="r396 r">accountName</span>, <span class="r400 r">pe</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#eab45d6dd52a626b" class="i property">Name</a>, <span class="r403 r">connection</span>);
                        <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;Approved&quot;</span>, <span class="r404 r">pe3</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#8010ce6c658a02ce" class="i property">PrivateLinkServiceConnectionState</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#01b1e46e6d4fd1e1" class="i property">Status</a>);
 
                        <span class="c">//Validate approve by get</span>
                        <span class="r404 r">pe3</span> = <span class="r394 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#9f3ea30abde9bef8" class="i property">PrivateEndpointConnections</a>.<span class="i">Get</span>(<span class="r395 r">rgname</span>, <span class="r396 r">accountName</span>, <span class="r400 r">pe</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#eab45d6dd52a626b" class="i property">Name</a>);
                        <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;Approved&quot;</span>, <span class="r404 r">pe3</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#8010ce6c658a02ce" class="i property">PrivateLinkServiceConnectionState</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#01b1e46e6d4fd1e1" class="i property">Status</a>);
                    }
 
                    <b>if</b> (<span class="r400 r">pe</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#8010ce6c658a02ce" class="i property">PrivateLinkServiceConnectionState</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#01b1e46e6d4fd1e1" class="i property">Status</a> == <span class="s">&quot;Rejected&quot;</span>)
                    {
                        <span class="c">//Set reject</span>
                        <span class="r403 r">connection</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#8010ce6c658a02ce" class="i property">PrivateLinkServiceConnectionState</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#01b1e46e6d4fd1e1" class="i property">Status</a> = <span class="s">&quot;Rejected&quot;</span>;
                        <a href="/Microsoft.Azure.Management.Storage/A.html#808ed6c22b4a992b" class="t t">PrivateEndpointConnection</a> <span id="r405 rd" class="r405 r">pe4</span> = <span class="r394 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#9f3ea30abde9bef8" class="i property">PrivateEndpointConnections</a>.<span class="i">Put</span>(<span class="r395 r">rgname</span>, <span class="r396 r">accountName</span>, <span class="r400 r">pe</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#eab45d6dd52a626b" class="i property">Name</a>, <span class="r403 r">connection</span>);
                        <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;Rejected&quot;</span>, <span class="r405 r">pe4</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#8010ce6c658a02ce" class="i property">PrivateLinkServiceConnectionState</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#01b1e46e6d4fd1e1" class="i property">Status</a>);
 
                        <span class="c">//Validate reject by get</span>
                        <span class="r405 r">pe4</span> = <span class="r394 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#9f3ea30abde9bef8" class="i property">PrivateEndpointConnections</a>.<span class="i">Get</span>(<span class="r395 r">rgname</span>, <span class="r396 r">accountName</span>, <span class="r400 r">pe</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#eab45d6dd52a626b" class="i property">Name</a>);
                        <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;Rejected&quot;</span>, <span class="r405 r">pe4</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#8010ce6c658a02ce" class="i property">PrivateLinkServiceConnectionState</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#01b1e46e6d4fd1e1" class="i property">Status</a>);
                    }
                }
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="04519e63d9cb6a58" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountPrivateLinkTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r406 rd" class="r406 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r407 rd" class="r407 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r408 rd" class="r408 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r407 r">context</span>, <span class="r406 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r409 rd" class="r409 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r407 r">context</span>, <span class="r406 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r410 rd" class="r410 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r408 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r411 rd" class="r411 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r412 rd" class="r412 r">parameters</span> = <b>new</b> <span class="t">StorageAccountCreateParameters</span>
                {
                    <a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#0a5812a9fdf2fdfe" class="i field">DefaultLocation</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#d6ee97275f551bb3" class="i field">StorageV2</a>,
                    <span class="i">Sku</span> = <b>new</b> <span class="t">Sku</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e9da3fc1a9ac45de" class="i field">StandardLRS</a> }
                };
                <b>var</b> <span id="r413 rd" class="r413 r">account</span> = <span class="r409 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r410 r">rgname</span>, <span class="r411 r">accountName</span>, <span class="r412 r">parameters</span>);
 
                <span class="c">// Get private link resource</span>
                <a href="/Microsoft.Azure.Management.Storage/A.html#499fadef4ca08bd5" class="k">var</a> <span id="r414 rd" class="r414 r">result</span> = <span class="r409 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#3e41bd986de34526" class="i property">PrivateLinkResources</a>.<span class="i">ListByStorageAccount</span>(<span class="r410 r">rgname</span>, <span class="r411 r">accountName</span>);
 
                <span class="c">// Validate</span>
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r414 r">result</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#34f59b9889a5b48e" class="i property">Value</a>.<span class="i">Count</span> &gt; 0);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="8e36e35c7fdf36d4" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountCreateWithTableQueueEcryptionKeyTypeTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r415 rd" class="r415 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r416 rd" class="r416 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r417 rd" class="r417 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r416 r">context</span>, <span class="r415 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r418 rd" class="r418 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r416 r">context</span>, <span class="r415 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r419 rd" class="r419 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r417 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r420 rd" class="r420 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r421 rd" class="r421 r">parameters</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#17336b838eeba66c" class="i method">GetDefaultStorageAccountParameters</a>();
                <span class="r421 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a> = <span class="s">&quot;East US 2 EUAP&quot;</span>;
                <span class="r421 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#d6ee97275f551bb3" class="i field">StorageV2</a>;
                <span class="r421 r">parameters</span>.<span class="i">Encryption</span> = <b>new</b> <span class="t">Encryption</span>
                {
                    <span class="i">Services</span> = <b>new</b> <span class="t">EncryptionServices</span>
                    {
                        <span class="i">Queue</span> = <b>new</b> <span class="t">EncryptionService</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#391ae67d65cf5c58" class="i property">KeyType</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#8c8bf32e795acf32" class="t t">KeyType</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#5988036846af902e" class="i field">Account</a> },
                        <span class="i">Table</span> = <b>new</b> <span class="t">EncryptionService</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#391ae67d65cf5c58" class="i property">KeyType</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#8c8bf32e795acf32" class="t t">KeyType</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#5988036846af902e" class="i field">Account</a> },
                    },
                    <a href="/Microsoft.Azure.Management.Storage/A.html#c72a62c75c0ef114" class="i property">KeySource</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#d14c96c947819d48" class="t t">KeySource</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#b509b0ff8449a11b" class="i field">MicrosoftStorage</a>
                };
                <b>var</b> <span id="r422 rd" class="r422 r">account</span> = <span class="r418 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r419 r">rgname</span>, <span class="r420 r">accountName</span>, <span class="r421 r">parameters</span>);
 
                <span class="c">// Verify encryption settings</span>
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r422 r">account</span>.<span class="i">Encryption</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r422 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Blob</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r422 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Blob</span>.<span class="i">Enabled</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#8c8bf32e795acf32" class="t t">KeyType</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#5988036846af902e" class="i field">Account</a>, <span class="r422 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Blob</span>.<span class="i">KeyType</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r422 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Blob</span>.<span class="i">LastEnabledTime</span>);
 
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r422 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">File</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r422 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">File</span>.<span class="i">Enabled</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#8c8bf32e795acf32" class="t t">KeyType</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#5988036846af902e" class="i field">Account</a>, <span class="r422 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Blob</span>.<span class="i">KeyType</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r422 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">File</span>.<span class="i">LastEnabledTime</span>);
 
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r422 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Queue</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#8c8bf32e795acf32" class="t t">KeyType</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#5988036846af902e" class="i field">Account</a>, <span class="r422 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Queue</span>.<span class="i">KeyType</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r422 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Queue</span>.<span class="i">Enabled</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r422 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Queue</span>.<span class="i">LastEnabledTime</span>);
 
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r422 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Table</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#8c8bf32e795acf32" class="t t">KeyType</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#5988036846af902e" class="i field">Account</a>, <span class="r422 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Table</span>.<span class="i">KeyType</span>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r422 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Table</span>.<span class="i">Enabled</span>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r422 r">account</span>.<span class="i">Encryption</span>.<span class="i">Services</span>.<span class="i">Table</span>.<span class="i">LastEnabledTime</span>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="1cd3515b13d3cf5e" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">EcryptionScopeTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r423 rd" class="r423 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r424 rd" class="r424 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r425 rd" class="r425 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r424 r">context</span>, <span class="r423 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r426 rd" class="r426 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r424 r">context</span>, <span class="r423 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r427 rd" class="r427 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r425 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r428 rd" class="r428 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r429 rd" class="r429 r">parameters</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#17336b838eeba66c" class="i method">GetDefaultStorageAccountParameters</a>();
                <span class="r429 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a> = <span class="s">&quot;East US 2 EUAP&quot;</span>;
                <span class="r429 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#d6ee97275f551bb3" class="i field">StorageV2</a>;
                <b>var</b> <span id="r430 rd" class="r430 r">account</span> = <span class="r426 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r427 r">rgname</span>, <span class="r428 r">accountName</span>, <span class="r429 r">parameters</span>);
 
                <span class="c">//Create EcryptionScope</span>
                <a href="/Microsoft.Azure.Management.Storage/A.html#29bd1b75ed647024" class="t t">EncryptionScope</a> <span id="r431 rd" class="r431 r">es</span> = <span class="r426 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#f1bb26c3b3931088" class="i property">EncryptionScopes</a>.<span class="i">Put</span>(<span class="r427 r">rgname</span>, <span class="r428 r">accountName</span>, <span class="s">&quot;testscope&quot;</span>, <b>new</b> <span class="t">EncryptionScope</span>(<span class="i">name</span>: <span class="s">&quot;testscope&quot;</span>, <span class="i">source</span>: <a href="/Microsoft.Azure.Management.Storage/A.html#b64f6c31434802d7" class="t t">EncryptionScopeSource</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#231d95fe1dddc000" class="i field">MicrosoftStorage</a>, <span class="i">state</span>: <a href="/Microsoft.Azure.Management.Storage/A.html#fde9cded726ba5d5" class="t t">EncryptionScopeState</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#1110a5859148f3d6" class="i field">Disabled</a>));
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;testscope&quot;</span>, <span class="r431 r">es</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#eab45d6dd52a626b" class="i property">Name</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#fde9cded726ba5d5" class="t t">EncryptionScopeState</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#1110a5859148f3d6" class="i field">Disabled</a>, <span class="r431 r">es</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#0c2cb9c964a75c9b" class="i property">State</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#b64f6c31434802d7" class="t t">EncryptionScopeSource</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#231d95fe1dddc000" class="i field">MicrosoftStorage</a>, <span class="r431 r">es</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#b85a6ce063078136" class="i property">Source</a>);
 
                <span class="c">// Get EcryptionScope</span>
                <span class="r431 r">es</span> = <span class="r426 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#f1bb26c3b3931088" class="i property">EncryptionScopes</a>.<span class="i">Get</span>(<span class="r427 r">rgname</span>, <span class="r428 r">accountName</span>, <span class="s">&quot;testscope&quot;</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;testscope&quot;</span>, <span class="r431 r">es</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#eab45d6dd52a626b" class="i property">Name</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#fde9cded726ba5d5" class="t t">EncryptionScopeState</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#1110a5859148f3d6" class="i field">Disabled</a>, <span class="r431 r">es</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#0c2cb9c964a75c9b" class="i property">State</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#b64f6c31434802d7" class="t t">EncryptionScopeSource</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#231d95fe1dddc000" class="i field">MicrosoftStorage</a>, <span class="r431 r">es</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#b85a6ce063078136" class="i property">Source</a>);
 
                <span class="c">// Patch EcryptionScope</span>
                <span class="r431 r">es</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#0c2cb9c964a75c9b" class="i property">State</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#fde9cded726ba5d5" class="t t">EncryptionScopeState</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#11da547308c0f2c1" class="i field">Enabled</a>;
                <span class="r431 r">es</span> = <span class="r426 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#f1bb26c3b3931088" class="i property">EncryptionScopes</a>.<span class="i">Patch</span>(<span class="r427 r">rgname</span>, <span class="r428 r">accountName</span>, <span class="s">&quot;testscope&quot;</span>, <span class="r431 r">es</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;testscope&quot;</span>, <span class="r431 r">es</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#eab45d6dd52a626b" class="i property">Name</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#fde9cded726ba5d5" class="t t">EncryptionScopeState</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#11da547308c0f2c1" class="i field">Enabled</a>, <span class="r431 r">es</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#0c2cb9c964a75c9b" class="i property">State</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#b64f6c31434802d7" class="t t">EncryptionScopeSource</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#231d95fe1dddc000" class="i field">MicrosoftStorage</a>, <span class="r431 r">es</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#b85a6ce063078136" class="i property">Source</a>);
 
                <span class="c">//List EcryptionScope</span>
                <span class="i">IPage</span>&lt;<a href="/Microsoft.Azure.Management.Storage/A.html#29bd1b75ed647024" class="t t">EncryptionScope</a>&gt; <span id="r432 rd" class="r432 r">ess</span> = <span class="r426 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#f1bb26c3b3931088" class="i property">EncryptionScopes</a>.<span class="i">List</span>(<span class="r427 r">rgname</span>, <span class="r428 r">accountName</span>);
                <span class="r431 r">es</span> = <span class="r432 r">ess</span>.<span class="i">First</span>();
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;testscope&quot;</span>, <span class="r431 r">es</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#eab45d6dd52a626b" class="i property">Name</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#fde9cded726ba5d5" class="t t">EncryptionScopeState</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#11da547308c0f2c1" class="i field">Enabled</a>, <span class="r431 r">es</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#0c2cb9c964a75c9b" class="i property">State</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#b64f6c31434802d7" class="t t">EncryptionScopeSource</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#231d95fe1dddc000" class="i field">MicrosoftStorage</a>, <span class="r431 r">es</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#b85a6ce063078136" class="i property">Source</a>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="63213e055c35270e" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountCreateUpdateWithMinTlsVersionBlobPublicAccess</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r433 rd" class="r433 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r434 rd" class="r434 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r435 rd" class="r435 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r434 r">context</span>, <span class="r433 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r436 rd" class="r436 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r434 r">context</span>, <span class="r433 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r437 rd" class="r437 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r435 r">resourcesClient</span>);
 
                <span class="c">// Create storage account</span>
                <b>string</b> <span id="r438 rd" class="r438 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r439 rd" class="r439 r">parameters</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#17336b838eeba66c" class="i method">GetDefaultStorageAccountParameters</a>();
                <span class="r439 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a> = <span class="s">&quot;East US 2 EUAP&quot;</span>;
                <span class="r439 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#d6ee97275f551bb3" class="i field">StorageV2</a>;
                <span class="r439 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#07048595959d832b" class="i property">AllowBlobPublicAccess</a> = <b>false</b>;
                <span class="r439 r">parameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a42742adf2ea831b" class="i property">MinimumTlsVersion</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#952f6bfceb1aadd0" class="t t">MinimumTlsVersion</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#fbb1bee95a545040" class="i field">TLS11</a>;
                <b>var</b> <span id="r440 rd" class="r440 r">account</span> = <span class="r436 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r437 r">rgname</span>, <span class="r438 r">accountName</span>, <span class="r439 r">parameters</span>);
 
                <span class="c">// Verify account settings</span>
                <span class="i">Assert</span>.<span class="i">False</span>(<span class="r440 r">account</span>.<span class="i">AllowBlobPublicAccess</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#952f6bfceb1aadd0" class="t t">MinimumTlsVersion</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#fbb1bee95a545040" class="i field">TLS11</a>, <span class="r440 r">account</span>.<span class="i">MinimumTlsVersion</span>);
 
                <span class="c">//Update account</span>
                <a href="/Microsoft.Azure.Management.Storage/A.html#c031ad46f74edc74" class="k">var</a> <span id="r441 rd" class="r441 r">udpateParameters</span> = <b>new</b> <span class="t">StorageAccountUpdateParameters</span>();
                <span class="r441 r">udpateParameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#f573b99798136204" class="i property">MinimumTlsVersion</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#952f6bfceb1aadd0" class="t t">MinimumTlsVersion</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#79eaa19ec6c7c24d" class="i field">TLS12</a>;
                <span class="r441 r">udpateParameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#37d7ef342db46646" class="i property">AllowBlobPublicAccess</a> = <b>true</b>;
                <span class="r441 r">udpateParameters</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#9160cbab25d1fb38" class="i property">EnableHttpsTrafficOnly</a> = <b>true</b>;
                <span class="r440 r">account</span> = <span class="r436 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Update</span>(<span class="r437 r">rgname</span>, <span class="r438 r">accountName</span>, <span class="r441 r">udpateParameters</span>);
 
                <span class="c">// Verify account settings</span>
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r440 r">account</span>.<span class="i">AllowBlobPublicAccess</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#952f6bfceb1aadd0" class="t t">MinimumTlsVersion</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#79eaa19ec6c7c24d" class="i field">TLS12</a>, <span class="r440 r">account</span>.<span class="i">MinimumTlsVersion</span>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="5d1282645ab4fff0" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageDeletedAccountsTest</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r442 rd" class="r442 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r443 rd" class="r443 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r444 rd" class="r444 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r443 r">context</span>, <span class="r442 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r445 rd" class="r445 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r443 r">context</span>, <span class="r442 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r446 rd" class="r446 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r444 r">resourcesClient</span>);
 
                <span class="c">// List deleted account</span>
                <span class="i">IPage</span>&lt;<a href="/Microsoft.Azure.Management.Storage/A.html#5e5aed321cdbebd4" class="t t">DeletedAccount</a>&gt; <span id="r447 rd" class="r447 r">deletedAccounts</span> = <span class="r445 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#daee665b9fb3893e" class="i property">DeletedAccounts</a>.<span class="i">List</span>();
                <span class="i">Assert</span>.<span class="i">True</span>((<span class="r447 r">deletedAccounts</span>.<span class="i">Count</span>() &gt; 0));
            }
        }
 
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="03b49a9ff1081b2d" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountCreateWithExtendedLocation</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r448 rd" class="r448 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r449 rd" class="r449 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r450 rd" class="r450 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r449 r">context</span>, <span class="r448 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r451 rd" class="r451 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r449 r">context</span>, <span class="r448 r">handler</span>);
                <span class="r451 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#d9dcf8ed702e4fe1" class="i property">BaseUri</a> = <b>new</b> <span class="i">Uri</span>(<span class="s">&quot;https://eastus2euap.management.azure.com/&quot;</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r452 rd" class="r452 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r450 r">resourcesClient</span>);
 
                <span class="c">// Create storage account with StorageV2</span>
                <b>string</b> <span id="r453 rd" class="r453 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r454 rd" class="r454 r">parameters</span> = <b>new</b> <span class="t">StorageAccountCreateParameters</span>
                {
                    <span class="i">Sku</span> = <b>new</b> <span class="t">Sku</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#49fd6fdd5d2ba1d5" class="i field">PremiumLRS</a> },
                    <a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#d6ee97275f551bb3" class="i field">StorageV2</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#0a5812a9fdf2fdfe" class="i field">DefaultLocation</a>,
                    <span class="i">ExtendedLocation</span> = <b>new</b> <span class="t">ExtendedLocation</span>
                    {
                        <a href="/Microsoft.Azure.Management.Storage/A.html#08718019f2eb92ee" class="i property">Type</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#cefb587f2fa58679" class="t t">ExtendedLocationTypes</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#07c5738f82ce6881" class="i field">EdgeZone</a>,
                        <a href="/Microsoft.Azure.Management.Storage/A.html#e782aaa4712434b0" class="i property">Name</a> = <span class="s">&quot;microsoftrrdclab1&quot;</span>
                    }
                };
                <b>var</b> <span id="r455 rd" class="r455 r">account</span> = <span class="r451 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r452 r">rgname</span>, <span class="r453 r">accountName</span>, <span class="r454 r">parameters</span>);
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<span class="i">VerifyAccountProperties</span>(<span class="r455 r">account</span>, <b>false</b>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r455 r">account</span>.<span class="i">PrimaryEndpoints</span>.<span class="i">Web</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#d6ee97275f551bb3" class="i field">StorageV2</a>, <span class="r455 r">account</span>.<span class="i">Kind</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#cefb587f2fa58679" class="t t">ExtendedLocationTypes</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#07c5738f82ce6881" class="i field">EdgeZone</a>, <span class="r455 r">account</span>.<span class="i">ExtendedLocation</span>.<span class="i">Type</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;microsoftrrdclab1&quot;</span>, <span class="r455 r">account</span>.<span class="i">ExtendedLocation</span>.<span class="i">Name</span>);
                <span class="r455 r">account</span> = <span class="r451 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">GetProperties</span>(<span class="r452 r">rgname</span>, <span class="r453 r">accountName</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#cefb587f2fa58679" class="t t">ExtendedLocationTypes</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#07c5738f82ce6881" class="i field">EdgeZone</a>, <span class="r455 r">account</span>.<span class="i">ExtendedLocation</span>.<span class="i">Type</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;microsoftrrdclab1&quot;</span>, <span class="r455 r">account</span>.<span class="i">ExtendedLocation</span>.<span class="i">Name</span>);
            }
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="9f31d35b77b46370" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageAccountBlobInventory</a>()
        {
            <a href="../Helpers/RecordedDelegatingHandler.cs.html#d20edd2100a9d835" class="k">var</a> <span id="r456 rd" class="r456 r">handler</span> = <b>new</b> <a href="../Helpers/RecordedDelegatingHandler.cs.html#0d72efaa95240bdb" class="t constructor">RecordedDelegatingHandler</a> { <a href="../Helpers/RecordedDelegatingHandler.cs.html#8f6d95c7414acc80" class="i property">StatusCodeToReturn</a> = <span class="i">HttpStatusCode</span>.<span class="i">OK</span> };
 
            <b>using</b> (<span class="i">MockContext</span> <span id="r457 rd" class="r457 r">context</span> = <span class="i">MockContext</span>.<span class="i">Start</span>(<a href="#fb5c8deb84e86875" class="k">this</a>.<span class="i">GetType</span>()))
            {
                <b>var</b> <span id="r458 rd" class="r458 r">resourcesClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#a56b66b6f42b2673" class="i method">GetResourceManagementClient</a>(<span class="r457 r">context</span>, <span class="r456 r">handler</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#be8ed3aa512cffb7" class="k">var</a> <span id="r459 rd" class="r459 r">storageMgmtClient</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#bf1a4aea931fbff0" class="i method">GetStorageManagementClient</a>(<span class="r457 r">context</span>, <span class="r456 r">handler</span>);
 
                <span class="c">// Create resource group</span>
                <b>var</b> <span id="r460 rd" class="r460 r">rgname</span> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#d76f1678f8e9f268" class="i method">CreateResourceGroup</a>(<span class="r458 r">resourcesClient</span>);
 
                <span class="c">// Create storage account with StorageV2</span>
                <b>string</b> <span id="r461 rd" class="r461 r">accountName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;sto&quot;</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#dc1e52ba8609b440" class="k">var</a> <span id="r462 rd" class="r462 r">parameters</span> = <b>new</b> <span class="t">StorageAccountCreateParameters</span>
                {
                    <span class="i">Sku</span> = <b>new</b> <span class="t">Sku</span> { <a href="/Microsoft.Azure.Management.Storage/A.html#0feb480124b643a5" class="i property">Name</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#3c2da347541b7cd3" class="t t">SkuName</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#e9da3fc1a9ac45de" class="i field">StandardLRS</a> },
                    <a href="/Microsoft.Azure.Management.Storage/A.html#18105af365292302" class="i property">Kind</a> = <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#d6ee97275f551bb3" class="i field">StorageV2</a>,
                    <a href="/Microsoft.Azure.Management.Storage/A.html#82d0536be4919b14" class="i property">Location</a> = <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<a href="../Helpers/StorageManagementTestUtilities.cs.html#0a5812a9fdf2fdfe" class="i field">DefaultLocation</a>
                };
                <b>var</b> <span id="r463 rd" class="r463 r">account</span> = <span class="r459 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a756f6f5508a209c" class="i property">StorageAccounts</a>.<span class="i">Create</span>(<span class="r460 r">rgname</span>, <span class="r461 r">accountName</span>, <span class="r462 r">parameters</span>);
                <a href="../Helpers/StorageManagementTestUtilities.cs.html#f814a8fd4b42ad05" class="t t">StorageManagementTestUtilities</a>.<span class="i">VerifyAccountProperties</span>(<span class="r463 r">account</span>, <b>false</b>);
                <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r463 r">account</span>.<span class="i">PrimaryEndpoints</span>.<span class="i">Web</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#d6ee97275f551bb3" class="i field">StorageV2</a>, <span class="r463 r">account</span>.<span class="i">Kind</span>);
 
                <b>string</b> <span id="r464 rd" class="r464 r">containerName</span> = <span class="s">&quot;container1&quot;</span>;
                <span class="r459 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#9340a1957f17c194" class="i property">BlobContainers</a>.<span class="i">Create</span>(<span class="r460 r">rgname</span>, <span class="r461 r">accountName</span>, <span class="r464 r">containerName</span>, <b>new</b> <span class="t">BlobContainer</span>());
 
                <span class="c">//Prepare policy objects</span>
                <span class="i">List</span>&lt;<a href="/Microsoft.Azure.Management.Storage/A.html#57f66e03874689ba" class="t t">BlobInventoryPolicyRule</a>&gt; <span id="r465 rd" class="r465 r">ruleList</span> = <b>new</b> <span class="i">List</span>&lt;<a href="/Microsoft.Azure.Management.Storage/A.html#57f66e03874689ba" class="t t">BlobInventoryPolicyRule</a>&gt;();
                <a href="/Microsoft.Azure.Management.Storage/A.html#57f66e03874689ba" class="t t">BlobInventoryPolicyRule</a> <span id="r466 rd" class="r466 r">rule1</span> = <b>new</b> <span class="t">BlobInventoryPolicyRule</span>(<b>true</b>, <span class="s">&quot;rule1&quot;</span>,
                    <b>new</b> <span class="t">BlobInventoryPolicyDefinition</span>(
                        <b>new</b> <span class="t">BlobInventoryPolicyFilter</span>(
                            <span class="i">blobTypes</span>: <b>new</b> <span class="i">List</span>&lt;<b>string</b>&gt;(<b>new</b> <b>string</b>[] { <span class="s">&quot;blockBlob&quot;</span>, <span class="s">&quot;appendBlob&quot;</span>, <span class="s">&quot;pageBlob&quot;</span> }),
                            <span class="i">prefixMatch</span>: <b>new</b> <span class="i">List</span>&lt;<b>string</b>&gt;(<b>new</b> <b>string</b>[] { <span class="s">&quot;prefix1&quot;</span>, <span class="s">&quot;prefix2&quot;</span> }),
                            <span class="i">includeBlobVersions</span>: <b>false</b>,
                            <span class="i">includeSnapshots</span>: <b>true</b>)));
 
                <a href="/Microsoft.Azure.Management.Storage/A.html#57f66e03874689ba" class="t t">BlobInventoryPolicyRule</a> <span id="r467 rd" class="r467 r">rule2</span> = <b>new</b> <span class="t">BlobInventoryPolicyRule</span>(<b>true</b>, <span class="s">&quot;rule2&quot;</span>,
                    <b>new</b> <span class="t">BlobInventoryPolicyDefinition</span>(
                        <b>new</b> <span class="t">BlobInventoryPolicyFilter</span>(
                            <span class="i">blobTypes</span>: <b>new</b> <span class="i">List</span>&lt;<b>string</b>&gt;(<b>new</b> <b>string</b>[] { <span class="s">&quot;blockBlob&quot;</span> }),
                            <span class="c">//includeBlobVersions: true,</span>
                            <span class="i">includeSnapshots</span>: <b>false</b>)));
 
                <span class="r465 r">ruleList</span>.<span class="i">Add</span>(<span class="r466 r">rule1</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#3f52ee6e1ef5cf04" class="t t">BlobInventoryPolicySchema</a> <span id="r468 rd" class="r468 r">policy</span> = <b>new</b> <span class="t">BlobInventoryPolicySchema</span>(<b>true</b>, <span class="r464 r">containerName</span>, <span class="r465 r">ruleList</span>);
 
                <span class="c">//Create/Get policy</span>
                <a href="/Microsoft.Azure.Management.Storage/A.html#5e1678a3b6db8728" class="t t">BlobInventoryPolicy</a> <span id="r469 rd" class="r469 r">outputPolicy</span> = <span class="r459 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#0c09079b894564b7" class="i property">BlobInventoryPolicies</a>.<span class="i">CreateOrUpdate</span>(<span class="r460 r">rgname</span>, <span class="r461 r">accountName</span>, <span class="r468 r">policy</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r464 r">containerName</span>, <span class="r469 r">outputPolicy</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#ec7e12d23d72214c" class="i property">Policy</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#d7147073bcbc5a6e" class="i property">Destination</a>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r469 r">outputPolicy</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#ec7e12d23d72214c" class="i property">Policy</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#a679b8689a293731" class="i property">Enabled</a>);
                <a href="#cbea14239fffcbf5" class="i method">CompareBlobInventoryPolicySchema</a>(<span class="r468 r">policy</span>, <span class="r469 r">outputPolicy</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#ec7e12d23d72214c" class="i property">Policy</a>);
 
                <span class="r469 r">outputPolicy</span> = <span class="r459 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#0c09079b894564b7" class="i property">BlobInventoryPolicies</a>.<span class="i">Get</span>(<span class="r460 r">rgname</span>, <span class="r461 r">accountName</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r464 r">containerName</span>, <span class="r469 r">outputPolicy</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#ec7e12d23d72214c" class="i property">Policy</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#d7147073bcbc5a6e" class="i property">Destination</a>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r469 r">outputPolicy</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#ec7e12d23d72214c" class="i property">Policy</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#a679b8689a293731" class="i property">Enabled</a>);
                <a href="#cbea14239fffcbf5" class="i method">CompareBlobInventoryPolicySchema</a>(<span class="r468 r">policy</span>, <span class="r469 r">outputPolicy</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#ec7e12d23d72214c" class="i property">Policy</a>);
 
                <span class="c">//Update/List policy</span>
                <span class="r465 r">ruleList</span>.<span class="i">Add</span>(<span class="r467 r">rule2</span>);
                <a href="/Microsoft.Azure.Management.Storage/A.html#3f52ee6e1ef5cf04" class="t t">BlobInventoryPolicySchema</a> <span id="r470 rd" class="r470 r">policy2</span> = <b>new</b> <span class="t">BlobInventoryPolicySchema</span>(<b>true</b>, <span class="r464 r">containerName</span>, <span class="r465 r">ruleList</span>);
 
                <span class="r469 r">outputPolicy</span> = <span class="r459 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#0c09079b894564b7" class="i property">BlobInventoryPolicies</a>.<span class="i">CreateOrUpdate</span>(<span class="r460 r">rgname</span>, <span class="r461 r">accountName</span>, <span class="r470 r">policy2</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r464 r">containerName</span>, <span class="r469 r">outputPolicy</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#ec7e12d23d72214c" class="i property">Policy</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#d7147073bcbc5a6e" class="i property">Destination</a>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r469 r">outputPolicy</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#ec7e12d23d72214c" class="i property">Policy</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#a679b8689a293731" class="i property">Enabled</a>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(2, <span class="r469 r">outputPolicy</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#ec7e12d23d72214c" class="i property">Policy</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#d7a3da3cbb734d7e" class="i property">Rules</a>.<span class="i">Count</span>);
                <a href="#cbea14239fffcbf5" class="i method">CompareBlobInventoryPolicySchema</a>(<span class="r470 r">policy2</span>, <span class="r469 r">outputPolicy</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#ec7e12d23d72214c" class="i property">Policy</a>);
 
                <b>var</b> <span id="r471 rd" class="r471 r">outputPolicies</span> = <span class="r459 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#0c09079b894564b7" class="i property">BlobInventoryPolicies</a>.<span class="i">List</span>(<span class="r460 r">rgname</span>, <span class="r461 r">accountName</span>);
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r464 r">containerName</span>, <span class="r469 r">outputPolicy</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#ec7e12d23d72214c" class="i property">Policy</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#d7147073bcbc5a6e" class="i property">Destination</a>);
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r469 r">outputPolicy</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#ec7e12d23d72214c" class="i property">Policy</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#a679b8689a293731" class="i property">Enabled</a>);
                <a href="#cbea14239fffcbf5" class="i method">CompareBlobInventoryPolicySchema</a>(<span class="r470 r">policy2</span>, <span class="r469 r">outputPolicy</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#ec7e12d23d72214c" class="i property">Policy</a>);
 
                <span class="c">// Delete policy</span>
                <span class="r459 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#0c09079b894564b7" class="i property">BlobInventoryPolicies</a>.<span class="i">Delete</span>(<span class="r460 r">rgname</span>, <span class="r461 r">accountName</span>);
                <b>try</b>
                {
                    <span class="r469 r">outputPolicy</span> = <span class="r459 r">storageMgmtClient</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#0c09079b894564b7" class="i property">BlobInventoryPolicies</a>.<span class="i">Get</span>(<span class="r460 r">rgname</span>, <span class="r461 r">accountName</span>);
                    <b>throw</b> <b>new</b> <span class="i">Exception</span>(<span class="s">&quot;BlobInventoryPolicy should already beene deleted, so get BlobInventoryPolicy should fail with 404. But not fail.&quot;</span>);
                }
                <b>catch</b> (<a href="/Microsoft.Azure.Management.Storage/A.html#6ebaf65d77c9b0da" class="t t">ErrorResponseException</a> <span id="r472 rd" class="r472 r">e</span>) <b>when</b> (<span class="r472 r">e</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#14c9650a11d22619" class="i property">Response</a>.<span class="i">StatusCode</span> == <span class="i">HttpStatusCode</span>.<span class="i">NotFound</span>)
                {
                    <span class="c">// get not exist blob inventory policy should report 404(NotFound)</span>
                }
            }
        }
 
        <span class="c">// Comppare blob inventory policy schema.</span>
        <b>internal static void</b> <a id="cbea14239fffcbf5" href="../R/cbea14239fffcbf5.html" target="n" data-glyph="74,1" class="i method">CompareBlobInventoryPolicySchema</a>(<a href="/Microsoft.Azure.Management.Storage/A.html#3f52ee6e1ef5cf04" class="t t">BlobInventoryPolicySchema</a> <span id="r473 rd" class="r473 r">inputPolicy</span>, <a href="/Microsoft.Azure.Management.Storage/A.html#3f52ee6e1ef5cf04" class="t t">BlobInventoryPolicySchema</a> <span id="r474 rd" class="r474 r">outputPolicy</span>)
        {
 
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r473 r">inputPolicy</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#d7147073bcbc5a6e" class="i property">Destination</a>, <span class="r474 r">outputPolicy</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#d7147073bcbc5a6e" class="i property">Destination</a>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r473 r">inputPolicy</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a679b8689a293731" class="i property">Enabled</a>, <span class="r474 r">outputPolicy</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#a679b8689a293731" class="i property">Enabled</a>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r473 r">inputPolicy</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#d7a3da3cbb734d7e" class="i property">Rules</a>.<span class="i">Count</span>, <span class="r474 r">outputPolicy</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#d7a3da3cbb734d7e" class="i property">Rules</a>.<span class="i">Count</span>);
 
            <b>foreach</b> (<a href="/Microsoft.Azure.Management.Storage/A.html#57f66e03874689ba" class="t t">BlobInventoryPolicyRule</a> <span id="r475 rd" class="r475 r">inputRule</span> <b>in</b> <span class="r473 r">inputPolicy</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#d7a3da3cbb734d7e" class="i property">Rules</a>)
            {
                <b>bool</b> <span id="r476 rd" class="r476 r">ruleFound</span> = <b>false</b>;
                <b>foreach</b>(<a href="/Microsoft.Azure.Management.Storage/A.html#57f66e03874689ba" class="t t">BlobInventoryPolicyRule</a> <span id="r477 rd" class="r477 r">outputRule</span> <b>in</b> <span class="r474 r">outputPolicy</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#d7a3da3cbb734d7e" class="i property">Rules</a>)
                {
                    <b>if</b> (<span class="r475 r">inputRule</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#daeea6646ddae1bc" class="i property">Name</a> == <span class="r477 r">outputRule</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#daeea6646ddae1bc" class="i property">Name</a>)
                    {
                        <span class="r476 r">ruleFound</span> = <b>true</b>;
                        <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r475 r">inputRule</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#53c4a0dc12cdeefd" class="i property">Enabled</a>, <span class="r477 r">outputRule</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#53c4a0dc12cdeefd" class="i property">Enabled</a>);
                        <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r475 r">inputRule</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#36272676da0ed1cf" class="i property">Definition</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#a590f540700ea680" class="i property">Filters</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#59630cc8bcaa76a8" class="i property">BlobTypes</a>, <span class="r475 r">inputRule</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#36272676da0ed1cf" class="i property">Definition</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#a590f540700ea680" class="i property">Filters</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#59630cc8bcaa76a8" class="i property">BlobTypes</a>);
                        <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r475 r">inputRule</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#36272676da0ed1cf" class="i property">Definition</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#a590f540700ea680" class="i property">Filters</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#81ea6d276f9b45be" class="i property">IncludeBlobVersions</a>, <span class="r475 r">inputRule</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#36272676da0ed1cf" class="i property">Definition</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#a590f540700ea680" class="i property">Filters</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#81ea6d276f9b45be" class="i property">IncludeBlobVersions</a>);
                        <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r475 r">inputRule</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#36272676da0ed1cf" class="i property">Definition</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#a590f540700ea680" class="i property">Filters</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#1ed47db4b6b21975" class="i property">IncludeSnapshots</a>, <span class="r475 r">inputRule</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#36272676da0ed1cf" class="i property">Definition</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#a590f540700ea680" class="i property">Filters</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#1ed47db4b6b21975" class="i property">IncludeSnapshots</a>);
                        <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r475 r">inputRule</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#36272676da0ed1cf" class="i property">Definition</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#a590f540700ea680" class="i property">Filters</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#1cdc0b3a95a16823" class="i property">PrefixMatch</a>, <span class="r475 r">inputRule</span>.<a href="/Microsoft.Azure.Management.Storage/A.html#36272676da0ed1cf" class="i property">Definition</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#a590f540700ea680" class="i property">Filters</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#1cdc0b3a95a16823" class="i property">PrefixMatch</a>);
                    }
                }
                <span class="i">Assert</span>.<span class="i">True</span>(<span class="r476 r">ruleFound</span>);
            }
        }
    }
}
</pre></td></tr></table></div></body></html>

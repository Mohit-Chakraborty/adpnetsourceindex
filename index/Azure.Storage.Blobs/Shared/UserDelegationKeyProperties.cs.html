<!DOCTYPE html>
<html><head><title>UserDelegationKeyProperties.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(72);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Azure.Storage.Blobs/Shared/UserDelegationKeyProperties.cs" target="_top">Shared\UserDelegationKeyProperties.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Azure.Storage.Blobs" target="_top">Azure.Storage.Blobs.csproj</a> (Azure.Storage.Blobs)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License.</span>
 
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Globalization</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Net</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Text</span>;
 
<b>namespace</b> <span class="i n">Azure</span>.<span class="i n">Storage</span>.<span class="i n">Sas</span>
{
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
    <span class="c">///</span><span class="c"> Encapsulates the shared properties used by both</span>
    <span class="c">///</span><span class="c"> BlobSasQueryParameters and DataLakeSasQueryParameters.</span>
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
    <b>internal class</b> <a id="7791f3d1ab60dfa1" href="../R/7791f3d1ab60dfa1.html" target="n" data-glyph="2,0" class="t t"><span id="e45a9c276d9e7ec0">UserDelegationKeyProperties</span></a>
    {
        <span class="c">// skoid</span>
        <b>internal string</b> <a id="b66352d54999347f" href="../R/b66352d54999347f.html" target="n" data-glyph="104,1" class="i property">ObjectId</a> { <b>get</b>; <b>set</b>; }
 
        <span class="c">// sktid</span>
        <b>internal string</b> <a id="0d8af9b4d39b3ccc" href="../R/0d8af9b4d39b3ccc.html" target="n" data-glyph="104,1" class="i property">TenantId</a> { <b>get</b>; <b>set</b>; }
 
        <span class="c">// skt</span>
        <b>internal</b> <a href="@1@netstandard/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a> <a id="936efb13885f3eca" href="../R/936efb13885f3eca.html" target="n" data-glyph="104,1" class="i property">StartsOn</a> { <b>get</b>; <b>set</b>; }
 
        <span class="c">// ske</span>
        <b>internal</b> <a href="@1@netstandard/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a> <a id="e6983c75fbb8c2e6" href="../R/e6983c75fbb8c2e6.html" target="n" data-glyph="104,1" class="i property">ExpiresOn</a> { <b>get</b>; <b>set</b>; }
 
        <span class="c">// sks</span>
        <b>internal string</b> <a id="e12e48dbb28d2ddb" href="../R/e12e48dbb28d2ddb.html" target="n" data-glyph="104,1" class="i property">Service</a> { <b>get</b>; <b>set</b>; }
 
        <span class="c">// skv</span>
        <b>internal string</b> <a id="995e9250d21818b9" href="../R/995e9250d21818b9.html" target="n" data-glyph="104,1" class="i property">Version</a> { <b>get</b>; <b>set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Builds up the UserDelegationKey portion of the SAS query parameter string.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public void</b> <a id="22284c3c4a838bae" href="../R/22284c3c4a838bae.html" target="n" data-glyph="72,1" class="i method">AppendProperties</a>(<a href="@1@netstandard/A.html#adf60ee46ebd299f" class="t t">StringBuilder</a> <span id="r0 rd" class="r0 r">stringBuilder</span>)
        {
            <b>if</b> (!<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@netstandard/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>(<a href="#b66352d54999347f" class="i property">ObjectId</a>))
            {
                <span class="r0 r">stringBuilder</span>.<a href="UriExtensions.cs.html#b85e2c44b6a5ac32" class="i method">AppendQueryParameter</a>(<a href="Constants.cs.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="Constants.cs.html#3a326aeeff2329fb" class="t t">Sas</a>.<a href="Constants.cs.html#22326ae9cf906e56" class="t t">Parameters</a>.<a href="Constants.cs.html#115203b3ff24eb67" class="i field">KeyObjectId</a>, <a href="#b66352d54999347f" class="i property">ObjectId</a>);
            }
 
            <b>if</b> (!<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@netstandard/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>(<a href="#0d8af9b4d39b3ccc" class="i property">TenantId</a>))
            {
                <span class="r0 r">stringBuilder</span>.<a href="UriExtensions.cs.html#b85e2c44b6a5ac32" class="i method">AppendQueryParameter</a>(<a href="Constants.cs.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="Constants.cs.html#3a326aeeff2329fb" class="t t">Sas</a>.<a href="Constants.cs.html#22326ae9cf906e56" class="t t">Parameters</a>.<a href="Constants.cs.html#022fe8b42ce31d3c" class="i field">KeyTenantId</a>, <a href="#0d8af9b4d39b3ccc" class="i property">TenantId</a>);
            }
 
            <b>if</b> (<a href="#936efb13885f3eca" class="i property">StartsOn</a> != <a href="@1@netstandard/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a>.<a href="@1@netstandard/A.html#027622e417a4d206" class="i field">MinValue</a>)
            {
                <span class="r0 r">stringBuilder</span>.<a href="UriExtensions.cs.html#b85e2c44b6a5ac32" class="i method">AppendQueryParameter</a>(<a href="Constants.cs.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="Constants.cs.html#3a326aeeff2329fb" class="t t">Sas</a>.<a href="Constants.cs.html#22326ae9cf906e56" class="t t">Parameters</a>.<a href="Constants.cs.html#127d9766b6a1a50d" class="i field">KeyStart</a>, <a href="@1@netstandard/A.html#be62bd8978189a87" class="t t">WebUtility</a>.<a href="@1@netstandard/A.html#c74b8742f6516acd" class="i method">UrlEncode</a>(<a href="#936efb13885f3eca" class="i property">StartsOn</a>.<a href="@1@netstandard/A.html#fba683365f88b71c" class="i method">ToString</a>(<a href="Constants.cs.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="Constants.cs.html#5bbafe1b16a10131" class="i field">SasTimeFormatSeconds</a>, <a href="@1@netstandard/A.html#e319c6636909012f" class="t t">CultureInfo</a>.<a href="@1@netstandard/A.html#26ef1c020f0dbb7a" class="i property">InvariantCulture</a>)));
            }
 
            <b>if</b> (<a href="#e6983c75fbb8c2e6" class="i property">ExpiresOn</a> != <a href="@1@netstandard/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a>.<a href="@1@netstandard/A.html#027622e417a4d206" class="i field">MinValue</a>)
            {
                <span class="r0 r">stringBuilder</span>.<a href="UriExtensions.cs.html#b85e2c44b6a5ac32" class="i method">AppendQueryParameter</a>(<a href="Constants.cs.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="Constants.cs.html#3a326aeeff2329fb" class="t t">Sas</a>.<a href="Constants.cs.html#22326ae9cf906e56" class="t t">Parameters</a>.<a href="Constants.cs.html#e349b18eca947553" class="i field">KeyExpiry</a>, <a href="@1@netstandard/A.html#be62bd8978189a87" class="t t">WebUtility</a>.<a href="@1@netstandard/A.html#c74b8742f6516acd" class="i method">UrlEncode</a>(<a href="#e6983c75fbb8c2e6" class="i property">ExpiresOn</a>.<a href="@1@netstandard/A.html#fba683365f88b71c" class="i method">ToString</a>(<a href="Constants.cs.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="Constants.cs.html#5bbafe1b16a10131" class="i field">SasTimeFormatSeconds</a>, <a href="@1@netstandard/A.html#e319c6636909012f" class="t t">CultureInfo</a>.<a href="@1@netstandard/A.html#26ef1c020f0dbb7a" class="i property">InvariantCulture</a>)));
            }
 
            <b>if</b> (!<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@netstandard/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>(<a href="#e12e48dbb28d2ddb" class="i property">Service</a>))
            {
                <span class="r0 r">stringBuilder</span>.<a href="UriExtensions.cs.html#b85e2c44b6a5ac32" class="i method">AppendQueryParameter</a>(<a href="Constants.cs.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="Constants.cs.html#3a326aeeff2329fb" class="t t">Sas</a>.<a href="Constants.cs.html#22326ae9cf906e56" class="t t">Parameters</a>.<a href="Constants.cs.html#e07bf948a44d1dc3" class="i field">KeyService</a>, <a href="#e12e48dbb28d2ddb" class="i property">Service</a>);
            }
 
            <b>if</b> (!<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@netstandard/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>(<a href="#995e9250d21818b9" class="i property">Version</a>))
            {
                <span class="r0 r">stringBuilder</span>.<a href="UriExtensions.cs.html#b85e2c44b6a5ac32" class="i method">AppendQueryParameter</a>(<a href="Constants.cs.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="Constants.cs.html#3a326aeeff2329fb" class="t t">Sas</a>.<a href="Constants.cs.html#22326ae9cf906e56" class="t t">Parameters</a>.<a href="Constants.cs.html#eb68363068758e49" class="i field">KeyVersion</a>, <a href="#995e9250d21818b9" class="i property">Version</a>);
            }
        }
    }
}
</pre></td></tr></table></div></body></html>

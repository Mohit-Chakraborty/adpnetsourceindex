<!DOCTYPE html>
<html><head><title>ServiceBusRetryOptions.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(116);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Azure.Messaging.ServiceBus/Primitives/ServiceBusRetryOptions.cs" target="_top">Primitives\ServiceBusRetryOptions.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Azure.Messaging.ServiceBus" target="_top">Azure.Messaging.ServiceBus.csproj</a> (Azure.Messaging.ServiceBus)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License.</span>
 
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Core</span>;
 
<b>namespace</b> <span class="i n">Azure</span>.<span class="i n">Messaging</span>.<span class="i n">ServiceBus</span>
{
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
    <span class="c">///</span><span class="c">    The set of options that can be specified to influence how</span>
    <span class="c">///</span><span class="c">    retry attempts are made, and a failure is eligible to be retried.</span>
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
    <span class="c">///</span>
    <b>public class</b> <a id="f405da36db2d38b0" href="../R/f405da36db2d38b0.html" target="n" data-glyph="0,0" class="t t"><span id="2036514fdf1128f5">ServiceBusRetryOptions</span></a>
    {
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">The maximum number of retry attempts before considering the associated operation to have failed.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private int</b> <a id="012ef3675fdb527d" href="../R/012ef3675fdb527d.html" target="n" data-glyph="46,1" class="i field">_maxRetries</a> = 3;
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">The delay or backoff factor to apply between retry attempts.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private</b> <a href="@1@netstandard/A.html#865ef7b89f41b632" class="t t">TimeSpan</a> <a id="f4113500e0a610d1" href="../R/f4113500e0a610d1.html" target="n" data-glyph="46,1" class="i field">_delay</a> = <a href="@1@netstandard/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@1@netstandard/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(0.8);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">The maximum delay to allow between retry attempts.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private</b> <a href="@1@netstandard/A.html#865ef7b89f41b632" class="t t">TimeSpan</a> <a id="d3642007317411dd" href="../R/d3642007317411dd.html" target="n" data-glyph="46,1" class="i field">_maxDelay</a> = <a href="@1@netstandard/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@1@netstandard/A.html#ae74be5264df78d8" class="i method">FromMinutes</a>(1);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">The maximum duration to wait for an operation, per attempt.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private</b> <a href="@1@netstandard/A.html#865ef7b89f41b632" class="t t">TimeSpan</a> <a id="2a5e98c4de0cb0e3" href="../R/2a5e98c4de0cb0e3.html" target="n" data-glyph="46,1" class="i field">_tryTimeout</a> = <a href="@1@netstandard/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@1@netstandard/A.html#ae74be5264df78d8" class="i method">FromMinutes</a>(1);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   The approach to use for calculating retry delays.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>public</b> <a href="ServiceBusRetryMode.cs.html#27a44d4e573916f9" class="t t">ServiceBusRetryMode</a> <a id="00f7139f0d242e8b" href="../R/00f7139f0d242e8b.html" target="n" data-glyph="102,1" class="i property">Mode</a> { <b>get</b>; <b>set</b>; } = <a href="ServiceBusRetryMode.cs.html#27a44d4e573916f9" class="t t">ServiceBusRetryMode</a>.<a href="ServiceBusRetryMode.cs.html#6b092805dbeeb5da" class="i field">Exponential</a>;
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   The maximum number of retry attempts before considering the associated operation</span>
        <span class="c">///</span><span class="c">   to have failed.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>public int</b> <a id="903729caa62a94c3" href="../R/903729caa62a94c3.html" target="n" data-glyph="102,1" class="i property">MaxRetries</a>
        {
            <b>get</b> =&gt; <a href="#012ef3675fdb527d" class="i field">_maxRetries</a>;
 
            <b>set</b>
            {
                <a href="../P/0198b1312554d2ed.html#0198b1312554d2ed" class="t t">Argument</a>.<a href="../SharedSource/Azure.Core/Argument.cs.html#84af1169dda2bec9" class="i method">AssertInRange</a>(<b>value</b>, 0, 100, <b>nameof</b>(<a href="#903729caa62a94c3" class="i property">MaxRetries</a>));
                <a href="#012ef3675fdb527d" class="i field">_maxRetries</a> = <b>value</b>;
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   The delay between retry attempts for a fixed approach or the delay</span>
        <span class="c">///</span><span class="c">   on which to base calculations for a backoff-based approach.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>public</b> <a href="@1@netstandard/A.html#865ef7b89f41b632" class="t t">TimeSpan</a> <a id="a807a2c339100a71" href="../R/a807a2c339100a71.html" target="n" data-glyph="102,1" class="i property">Delay</a>
        {
            <b>get</b> =&gt; <a href="#f4113500e0a610d1" class="i field">_delay</a>;
 
            <b>set</b>
            {
                <a href="../P/0198b1312554d2ed.html#0198b1312554d2ed" class="t t">Argument</a>.<a href="../SharedSource/Azure.Core/Argument.cs.html#84af1169dda2bec9" class="i method">AssertInRange</a>(<b>value</b>, <a href="@1@netstandard/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@1@netstandard/A.html#668d91d771bce54b" class="i method">FromMilliseconds</a>(1), <a href="@1@netstandard/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@1@netstandard/A.html#ae74be5264df78d8" class="i method">FromMinutes</a>(5), <b>nameof</b>(<a href="#a807a2c339100a71" class="i property">Delay</a>));
                <a href="#f4113500e0a610d1" class="i field">_delay</a> = <b>value</b>;
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   The maximum permissible delay between retry attempts.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>public</b> <a href="@1@netstandard/A.html#865ef7b89f41b632" class="t t">TimeSpan</a> <a id="5d74adab07b6f215" href="../R/5d74adab07b6f215.html" target="n" data-glyph="102,1" class="i property">MaxDelay</a>
        {
            <b>get</b> =&gt; <a href="#d3642007317411dd" class="i field">_maxDelay</a>;
 
            <b>set</b>
            {
                <a href="../P/0198b1312554d2ed.html#0198b1312554d2ed" class="t t">Argument</a>.<a href="../Core/Argument.cs.html#9a26810a183caba7" class="i method">AssertNotNegative</a>(<b>value</b>, <b>nameof</b>(<a href="#5d74adab07b6f215" class="i property">MaxDelay</a>));
                <a href="#d3642007317411dd" class="i field">_maxDelay</a> = <b>value</b>;
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   The maximum duration to wait for completion of a single attempt, whether the initial</span>
        <span class="c">///</span><span class="c">   attempt or a retry.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>public</b> <a href="@1@netstandard/A.html#865ef7b89f41b632" class="t t">TimeSpan</a> <a id="cdf1b0ed863b1af5" href="../R/cdf1b0ed863b1af5.html" target="n" data-glyph="102,1" class="i property">TryTimeout</a>
        {
            <b>get</b> =&gt; <a href="#2a5e98c4de0cb0e3" class="i field">_tryTimeout</a>;
 
            <b>set</b>
            {
                <b>if</b> (<b>value</b> &lt; <a href="@1@netstandard/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@1@netstandard/A.html#225346b4cd3a8300" class="i field">Zero</a>)
                {
<span class="k preprocess">#</span><span class="k preprocess">pragma</span> <span class="k preprocess">warning</span> <span class="k preprocess">disable</span> <span class="i">CA2208</span> <span class="c">// Instantiate argument exceptions. Using property name is more intuitive than Value.</span>
                    <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#4b20cd3790b6426a" class="t constructor">ArgumentException</a>(<a href="../Resources.Designer.cs.html#7e6b2ac45384f6a8" class="t t">Resources</a>.<a href="../Resources.Designer.cs.html#52fac4959413c7b6" class="i property">TimeoutMustBePositive</a>, <b>nameof</b>(<a href="#cdf1b0ed863b1af5" class="i property">TryTimeout</a>));
<span class="k preprocess">#</span><span class="k preprocess">pragma</span> <span class="k preprocess">warning</span> <span class="k preprocess">restore</span> <span class="i">CA2208</span> <span class="c">// Instantiate argument exceptions correctly</span>
                }
 
                <a href="../P/0198b1312554d2ed.html#0198b1312554d2ed" class="t t">Argument</a>.<a href="../SharedSource/Azure.Core/Argument.cs.html#84af1169dda2bec9" class="i method">AssertInRange</a>(<b>value</b>, <a href="@1@netstandard/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@1@netstandard/A.html#225346b4cd3a8300" class="i field">Zero</a>, <a href="@1@netstandard/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@1@netstandard/A.html#060fe8cc38e0a7e3" class="i method">FromHours</a>(1), <b>nameof</b>(<a href="#cdf1b0ed863b1af5" class="i property">TryTimeout</a>));
                <a href="#2a5e98c4de0cb0e3" class="i field">_tryTimeout</a> = <b>value</b>;
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   A custom retry policy to be used in place of the individual option values.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   When populated, this custom policy will take precedence over the individual retry</span>
        <span class="c">///</span><span class="c">   options provided.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>public</b> <a href="ServiceBusRetryPolicy.cs.html#d0d6be7ac57eb9c9" class="t t">ServiceBusRetryPolicy</a> <a id="649270b9a7515cf5" href="../R/649270b9a7515cf5.html" target="n" data-glyph="102,1" class="i property">CustomRetryPolicy</a> { <b>get</b>; <b>set</b>; }
    }
}
</pre></td></tr></table></div></body></html>

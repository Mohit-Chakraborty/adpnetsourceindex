<!DOCTYPE html>
<html><head><title>RemoteRenderingCreateSessionSample.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(229);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Azure.MixedReality.RemoteRendering.Tests/Samples/RemoteRenderingCreateSessionSample.cs" target="_top">Samples\RemoteRenderingCreateSessionSample.cs</a><br/></td><td><a class="blueLink" href="https://github.com/Azure/azure-sdk-for-net/tree/master/sdk/remoterendering/Azure.MixedReality.RemoteRendering/tests/Samples/RemoteRenderingCreateSessionSample.cs" target="_blank">View on GitHub</a></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Azure.MixedReality.RemoteRendering.Tests" target="_top">Azure.MixedReality.RemoteRendering.Tests.csproj</a> (Azure.MixedReality.RemoteRendering.Tests)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License.</span>
 
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Core</span>.<span class="i n">TestFramework</span>;
<b>using</b> <span class="i n">NUnit</span>.<span class="i n">Framework</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Core</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Identity</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Reflection</span>.<span class="i n">Emit</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>.<span class="i n">Tasks</span>;
 
<b>namespace</b> <span class="i n">Azure</span>.<span class="i n">MixedReality</span>.<span class="i n">RemoteRendering</span>.<span class="i n">Tests</span>.<span class="i n">Samples</span>
{
    <b>public class</b> <a id="02a44d80c0d36b50" href="../R/../../0000000000.html" target="n" data-glyph="0,0" class="t t"><span id="a6ee2bfe211f5309">RemoteRenderingCreateSessionSample</span></a> : <a href="/Azure.Core.TestFramework/A.html#9be648b978998634" class="t t">SamplesBase</a>&lt;<a href="../RemoteRenderingTestEnvironment.cs.html#08321d42eb75e197" class="t t">RemoteRenderingTestEnvironment</a>&gt;
    {
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Demonstrates how to obtain a client with an AzureKeyCredential.</span>
        <span class="c">///</span><span class="c"> Methods which demonstrate other authentication schemes are at the bottom of the file.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>private</b> <a href="/Azure.MixedReality.RemoteRendering/A.html#53a2922372d51fac" class="t t">RemoteRenderingClient</a> <a id="eed9dcd554687d39" href="../R/eed9dcd554687d39.html" target="n" data-glyph="76,1" class="i method">GetClientWithAccountKey</a>()
        {
            <a href="@0@mscorlib/A.html#b622ef5f6b76c10a" class="t t">Guid</a> <span id="r0 rd" class="r0 r">accountId</span> = <b>new</b> <a href="@0@mscorlib/A.html#4329442fa037af5c" class="t constructor">Guid</a>(<a href="/Azure.Core.TestFramework/A.html#26a1e2ab3c3c535e" class="i property">TestEnvironment</a>.<a href="../RemoteRenderingTestEnvironment.cs.html#b0c229667ef2249b" class="i property">AccountId</a>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1 rd" class="r1 r">accountDomain</span> = <a href="/Azure.Core.TestFramework/A.html#26a1e2ab3c3c535e" class="i property">TestEnvironment</a>.<a href="../RemoteRenderingTestEnvironment.cs.html#a11335708d0e44b2" class="i property">AccountDomain</a>;
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r2 rd" class="r2 r">accountKey</span> = <a href="/Azure.Core.TestFramework/A.html#26a1e2ab3c3c535e" class="i property">TestEnvironment</a>.<a href="../RemoteRenderingTestEnvironment.cs.html#2b163699aeb56172" class="i property">AccountKey</a>;
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r3 rd" class="r3 r">remoteRenderingEndpoint</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<a href="/Azure.Core.TestFramework/A.html#26a1e2ab3c3c535e" class="i property">TestEnvironment</a>.<a href="../RemoteRenderingTestEnvironment.cs.html#b051174256c1893d" class="i property">ServiceEndpoint</a>);
 
            <span class="k preprocess">#</span><span class="k preprocess">region</span> Snippet:CreateAClient
            <a href="/Azure.Core/A.html#9f81356c54b28bf8" class="t t">AzureKeyCredential</a> <span id="r4 rd" class="r4 r">accountKeyCredential</span> = <b>new</b> <a href="/Azure.Core/A.html#015df0c4993644fe" class="t constructor">AzureKeyCredential</a>(<span class="r2 r">accountKey</span>);
 
            <a href="/Azure.MixedReality.RemoteRendering/A.html#53a2922372d51fac" class="t t">RemoteRenderingClient</a> <span id="r5 rd" class="r5 r">client</span> = <b>new</b> <a href="/Azure.MixedReality.RemoteRendering/A.html#d3a56adf0a535c11" class="t constructor">RemoteRenderingClient</a>(<span class="r3 r">remoteRenderingEndpoint</span>, <span class="r0 r">accountId</span>, <span class="r1 r">accountDomain</span>, <span class="r4 r">accountKeyCredential</span>);
            <span class="k preprocess">#</span><span class="k preprocess">endregion</span> Snippet:CreateAClient
            <b>return</b> <span class="r5 r">client</span>;
        }
 
        [<span class="t constructor">Test</span>]
        [<span class="t constructor">Explicit</span>(<span class="s">&quot;To avoid launching too many sessions during testing, we rely on the live tests.&quot;</span>)]
        <b>public void</b> <a id="1ad0782714606800" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CreateSession</a>()
        {
            <a href="/Azure.MixedReality.RemoteRendering/A.html#53a2922372d51fac" class="t t">RemoteRenderingClient</a> <span id="r6 rd" class="r6 r">client</span> = <a href="#eed9dcd554687d39" class="i method">GetClientWithAccountKey</a>();
 
            <span class="k preprocess">#</span><span class="k preprocess">region</span> Snippet:CreateASession
 
            <a href="/Azure.MixedReality.RemoteRendering/A.html#73587504fe8a2ab7" class="t t">RenderingSessionOptions</a> <span id="r7 rd" class="r7 r">options</span> = <b>new</b> <a href="/Azure.MixedReality.RemoteRendering/A.html#695a31dc127a0334" class="t constructor">RenderingSessionOptions</a>(<a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#ae74be5264df78d8" class="i method">FromMinutes</a>(30), <a href="/Azure.MixedReality.RemoteRendering/A.html#7921a1aded4e4318" class="t t">RenderingServerSize</a>.<a href="/Azure.MixedReality.RemoteRendering/A.html#ddff7aa0567ca100" class="i property">Standard</a>);
 
            <span class="c">// A randomly generated GUID is a good choice for a sessionId.</span>
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r8 rd" class="r8 r">sessionId</span> = <a href="@0@mscorlib/A.html#b622ef5f6b76c10a" class="t t">Guid</a>.<a href="@0@mscorlib/A.html#b7fae6994c22c22e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
 
            <a href="/Azure.MixedReality.RemoteRendering/A.html#df6ba729e1d34bba" class="t t">StartRenderingSessionOperation</a> <span id="r9 rd" class="r9 r">startSessionOperation</span> = <span class="r6 r">client</span>.<a href="/Azure.MixedReality.RemoteRendering/A.html#5396284e8f78cfdd" class="i method">StartSession</a>(<span class="r8 r">sessionId</span>, <span class="r7 r">options</span>);
 
            <a href="/Azure.MixedReality.RemoteRendering/A.html#0bdd6de089c0e832" class="t t">RenderingSession</a> <span id="r10 rd" class="r10 r">newSession</span> = <span class="r9 r">startSessionOperation</span>.<a href="/Azure.MixedReality.RemoteRendering/A.html#7263b32e5fff0b8f" class="i method">WaitForCompletionAsync</a>().<span class="i property">Result</span>;
            <b>if</b> (<span class="r10 r">newSession</span>.<a href="/Azure.MixedReality.RemoteRendering/A.html#46e15bc28835cb6f" class="i property">Status</a> == <a href="/Azure.MixedReality.RemoteRendering/A.html#b39080ea203790c4" class="t t">RenderingSessionStatus</a>.<a href="/Azure.MixedReality.RemoteRendering/A.html#ecd5614aa374de29" class="i property">Ready</a>)
            {
                <a href="@0@mscorlib/A.html#f907d79481da6ba4" class="t t">Console</a>.<a href="@0@mscorlib/A.html#5ac7c4fda643413b" class="i method">WriteLine</a>(<span class="s">$&quot;</span><span class="s">Session </span>{<span class="r8 r">sessionId</span>}<span class="s"> is ready.</span><span class="s">&quot;</span>);
            }
            <b>else</b> <b>if</b> (<span class="r10 r">newSession</span>.<a href="/Azure.MixedReality.RemoteRendering/A.html#46e15bc28835cb6f" class="i property">Status</a> == <a href="/Azure.MixedReality.RemoteRendering/A.html#b39080ea203790c4" class="t t">RenderingSessionStatus</a>.<a href="/Azure.MixedReality.RemoteRendering/A.html#6ac30e7865227258" class="i property">Error</a>)
            {
                <a href="@0@mscorlib/A.html#f907d79481da6ba4" class="t t">Console</a>.<a href="@0@mscorlib/A.html#5ac7c4fda643413b" class="i method">WriteLine</a>(<span class="s">$&quot;</span><span class="s">Session </span>{<span class="r8 r">sessionId</span>}<span class="s"> encountered an error: </span>{<span class="r10 r">newSession</span>.<a href="/Azure.MixedReality.RemoteRendering/A.html#4c53a44a87481a96" class="i property">Error</a>.<a href="/Azure.MixedReality.RemoteRendering/A.html#cc600db3940a285c" class="i property">Code</a>}<span class="s"> </span>{<span class="r10 r">newSession</span>.<a href="/Azure.MixedReality.RemoteRendering/A.html#4c53a44a87481a96" class="i property">Error</a>.<a href="/Azure.MixedReality.RemoteRendering/A.html#85d7c723df17fc5c" class="i property">Message</a>}<span class="s">&quot;</span>);
            }
 
            <span class="k preprocess">#</span><span class="k preprocess">endregion</span> Snippet:CreateASession
 
            <span class="c">// Use the session here.</span>
            <span class="c">// ...</span>
 
            <span class="c">// The session will automatically timeout, but in this sample we also demonstrate how to shut it down explicitly.</span>
            <span class="k preprocess">#</span><span class="k preprocess">region</span> Snippet:StopSession
 
            <span class="r6 r">client</span>.<a href="/Azure.MixedReality.RemoteRendering/A.html#ccc12d3f3760acd9" class="i method">StopSession</a>(<span class="r8 r">sessionId</span>);
 
            <span class="k preprocess">#</span><span class="k preprocess">endregion</span> Snippet:StopSession
        }
 
        [<span class="t constructor">Test</span>]
        [<span class="t constructor">Explicit</span>(<span class="s">&quot;To avoid launching too many sessions during testing, we rely on the live tests.&quot;</span>)]
        <b>public void</b> <a id="4836030aeb485bd3" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">QueryAndUpdateASession</a>()
        {
            <a href="/Azure.MixedReality.RemoteRendering/A.html#53a2922372d51fac" class="t t">RemoteRenderingClient</a> <span id="r11 rd" class="r11 r">client</span> = <a href="#eed9dcd554687d39" class="i method">GetClientWithAccountKey</a>();
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r12 rd" class="r12 r">sessionId</span> = <a href="@0@mscorlib/A.html#b622ef5f6b76c10a" class="t t">Guid</a>.<a href="@0@mscorlib/A.html#b7fae6994c22c22e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
 
            <a href="/Azure.MixedReality.RemoteRendering/A.html#73587504fe8a2ab7" class="t t">RenderingSessionOptions</a> <span id="r13 rd" class="r13 r">settings</span> = <b>new</b> <a href="/Azure.MixedReality.RemoteRendering/A.html#695a31dc127a0334" class="t constructor">RenderingSessionOptions</a>(<a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#ae74be5264df78d8" class="i method">FromMinutes</a>(30), <a href="/Azure.MixedReality.RemoteRendering/A.html#7921a1aded4e4318" class="t t">RenderingServerSize</a>.<a href="/Azure.MixedReality.RemoteRendering/A.html#ddff7aa0567ca100" class="i property">Standard</a>);
 
            <a href="/Azure.MixedReality.RemoteRendering/A.html#0bdd6de089c0e832" class="t t">RenderingSession</a> <span id="r14 rd" class="r14 r">newSession</span> = <span class="r11 r">client</span>.<a href="/Azure.MixedReality.RemoteRendering/A.html#5396284e8f78cfdd" class="i method">StartSession</a>(<span class="r12 r">sessionId</span>, <span class="r13 r">settings</span>).<a href="/Azure.MixedReality.RemoteRendering/A.html#7263b32e5fff0b8f" class="i method">WaitForCompletionAsync</a>().<span class="i property">Result</span>;
 
            <span class="k preprocess">#</span><span class="k preprocess">region</span> Snippet:UpdateSession
 
            <a href="/Azure.MixedReality.RemoteRendering/A.html#0bdd6de089c0e832" class="t t">RenderingSession</a> <span id="r15 rd" class="r15 r">currentSession</span> = <span class="r11 r">client</span>.<a href="/Azure.MixedReality.RemoteRendering/A.html#009a33e3749ccc0e" class="i method">GetSession</a>(<span class="r12 r">sessionId</span>);
 
            <b>if</b> (<span class="r15 r">currentSession</span>.<a href="/Azure.MixedReality.RemoteRendering/A.html#42c2b266fe448422" class="i property">MaxLeaseTime</a> - <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a>.<a href="@0@mscorlib/A.html#c6573f48ac6bd630" class="i property">Now</a>.<a href="@0@mscorlib/A.html#3b08106b9465af26" class="i method">Subtract</a>(<span class="r15 r">currentSession</span>.<a href="/Azure.MixedReality.RemoteRendering/A.html#255df11d391b8368" class="i property">CreatedOn</a>.<a href="@0@mscorlib/A.html#7b38d1fa76071c95" class="i property">Value</a>) &lt; <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#ae74be5264df78d8" class="i method">FromMinutes</a>(2))
            {
                <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a> <span id="r16 rd" class="r16 r">newLeaseTime</span> = <span class="r15 r">currentSession</span>.<a href="/Azure.MixedReality.RemoteRendering/A.html#42c2b266fe448422" class="i property">MaxLeaseTime</a>.<a href="@0@mscorlib/A.html#7b38d1fa76071c95" class="i property">Value</a>.<a href="@0@mscorlib/A.html#574ccdd4f806977f" class="i method">Add</a>(<a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#ae74be5264df78d8" class="i method">FromMinutes</a>(30));
 
                <a href="/Azure.MixedReality.RemoteRendering/A.html#5ac519f251937d06" class="t t">UpdateSessionOptions</a> <span id="r17 rd" class="r17 r">longerLeaseSettings</span> = <b>new</b> <a href="/Azure.MixedReality.RemoteRendering/A.html#f4ae0cb44a4d5a1b" class="t constructor">UpdateSessionOptions</a>(<span class="r16 r">newLeaseTime</span>);
 
                <span class="r11 r">client</span>.<a href="/Azure.MixedReality.RemoteRendering/A.html#7882e055419a2f50" class="i method">UpdateSession</a>(<span class="r12 r">sessionId</span>, <span class="r17 r">longerLeaseSettings</span>);
            }
 
            <span class="k preprocess">#</span><span class="k preprocess">endregion</span> Snippet:UpdateSession
 
            <span class="r11 r">client</span>.<a href="/Azure.MixedReality.RemoteRendering/A.html#ccc12d3f3760acd9" class="i method">StopSession</a>(<span class="r12 r">sessionId</span>);
        }
 
        [<span class="t constructor">Test</span>]
        [<span class="t constructor">Explicit</span>(<span class="s">&quot;To avoid launching too many sessions during testing, we rely on the live tests.&quot;</span>)]
        <b>public void</b> <a id="23bbc14855bba008" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetInformationAboutSessions</a>()
        {
            <a href="/Azure.MixedReality.RemoteRendering/A.html#53a2922372d51fac" class="t t">RemoteRenderingClient</a> <span id="r18 rd" class="r18 r">client</span> = <a href="#eed9dcd554687d39" class="i method">GetClientWithAccountKey</a>();
 
            <span class="c">// Ensure there&#39;s at least one session to query.</span>
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r19 rd" class="r19 r">sessionId</span> = <a href="@0@mscorlib/A.html#b622ef5f6b76c10a" class="t t">Guid</a>.<a href="@0@mscorlib/A.html#b7fae6994c22c22e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="/Azure.MixedReality.RemoteRendering/A.html#73587504fe8a2ab7" class="t t">RenderingSessionOptions</a> <span id="r20 rd" class="r20 r">settings</span> = <b>new</b> <a href="/Azure.MixedReality.RemoteRendering/A.html#695a31dc127a0334" class="t constructor">RenderingSessionOptions</a>(<a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#ae74be5264df78d8" class="i method">FromMinutes</a>(30), <a href="/Azure.MixedReality.RemoteRendering/A.html#7921a1aded4e4318" class="t t">RenderingServerSize</a>.<a href="/Azure.MixedReality.RemoteRendering/A.html#ddff7aa0567ca100" class="i property">Standard</a>);
            <span class="r18 r">client</span>.<a href="/Azure.MixedReality.RemoteRendering/A.html#5396284e8f78cfdd" class="i method">StartSession</a>(<span class="r19 r">sessionId</span>, <span class="r20 r">settings</span>);
            <a href="@0@mscorlib/A.html#3980e012bae82e96" class="t t">Thread</a>.<a href="@0@mscorlib/A.html#82aedb56cecde82c" class="i method">Sleep</a>(<a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(10));
 
            <span class="k preprocess">#</span><span class="k preprocess">region</span> Snippet:ListSessions
 
            <b>foreach</b> (<a href="/Azure.MixedReality.RemoteRendering/A.html#0bdd6de089c0e832" class="k">var</a> <span id="r21 rd" class="r21 r">properties</span> <b>in</b> <span class="r18 r">client</span>.<a href="/Azure.MixedReality.RemoteRendering/A.html#ebba0b371e8f6b21" class="i method">GetSessions</a>())
            {
                <b>if</b> (<span class="r21 r">properties</span>.<a href="/Azure.MixedReality.RemoteRendering/A.html#46e15bc28835cb6f" class="i property">Status</a> == <a href="/Azure.MixedReality.RemoteRendering/A.html#b39080ea203790c4" class="t t">RenderingSessionStatus</a>.<a href="/Azure.MixedReality.RemoteRendering/A.html#5455420bc22ccab6" class="i property">Starting</a>)
                {
                    <a href="@0@mscorlib/A.html#f907d79481da6ba4" class="t t">Console</a>.<a href="@0@mscorlib/A.html#5ac7c4fda643413b" class="i method">WriteLine</a>(<span class="s">$&quot;</span><span class="s">Session \&quot;</span>{<span class="r21 r">properties</span>.<a href="/Azure.MixedReality.RemoteRendering/A.html#28026ad48637af7e" class="i property">SessionId</a>}<span class="s">\&quot; is starting.</span><span class="s">&quot;</span>);
                }
                <b>else</b> <b>if</b> (<span class="r21 r">properties</span>.<a href="/Azure.MixedReality.RemoteRendering/A.html#46e15bc28835cb6f" class="i property">Status</a> == <a href="/Azure.MixedReality.RemoteRendering/A.html#b39080ea203790c4" class="t t">RenderingSessionStatus</a>.<a href="/Azure.MixedReality.RemoteRendering/A.html#ecd5614aa374de29" class="i property">Ready</a>)
                {
                    <a href="@0@mscorlib/A.html#f907d79481da6ba4" class="t t">Console</a>.<a href="@0@mscorlib/A.html#5ac7c4fda643413b" class="i method">WriteLine</a>(<span class="s">$&quot;</span><span class="s">Session \&quot;</span>{<span class="r21 r">properties</span>.<a href="/Azure.MixedReality.RemoteRendering/A.html#28026ad48637af7e" class="i property">SessionId</a>}<span class="s">\&quot; is ready at host </span>{<span class="r21 r">properties</span>.<a href="/Azure.MixedReality.RemoteRendering/A.html#c00a04aa9d4daa9e" class="i property">Host</a>}<span class="s">&quot;</span>);
                }
            }
 
            <span class="k preprocess">#</span><span class="k preprocess">endregion</span> Snippet:ListSessions
 
            <span class="r18 r">client</span>.<a href="/Azure.MixedReality.RemoteRendering/A.html#ccc12d3f3760acd9" class="i method">StopSession</a>(<span class="r19 r">sessionId</span>);
        }
 
        <span class="k preprocess">#</span><span class="k preprocess">region</span> Other ways of authenticating the RemoteRenderingClient.
 
        <b>private</b> <a href="/Azure.MixedReality.RemoteRendering/A.html#53a2922372d51fac" class="t t">RemoteRenderingClient</a> <a id="504ee8ac6e4befb0" href="../R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">GetClientWithAAD</a>()
        {
            <a href="@0@mscorlib/A.html#b622ef5f6b76c10a" class="t t">Guid</a> <span id="r22 rd" class="r22 r">accountId</span> = <b>new</b> <a href="@0@mscorlib/A.html#4329442fa037af5c" class="t constructor">Guid</a>(<a href="/Azure.Core.TestFramework/A.html#26a1e2ab3c3c535e" class="i property">TestEnvironment</a>.<a href="../RemoteRenderingTestEnvironment.cs.html#b0c229667ef2249b" class="i property">AccountId</a>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r23 rd" class="r23 r">accountDomain</span> = <a href="/Azure.Core.TestFramework/A.html#26a1e2ab3c3c535e" class="i property">TestEnvironment</a>.<a href="../RemoteRenderingTestEnvironment.cs.html#a11335708d0e44b2" class="i property">AccountDomain</a>;
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r24 rd" class="r24 r">tenantId</span> = <a href="/Azure.Core.TestFramework/A.html#26a1e2ab3c3c535e" class="i property">TestEnvironment</a>.<a href="/Azure.Core.TestFramework/A.html#ab050f0e55126952" class="i property">TenantId</a>;
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r25 rd" class="r25 r">clientId</span> = <a href="/Azure.Core.TestFramework/A.html#26a1e2ab3c3c535e" class="i property">TestEnvironment</a>.<a href="/Azure.Core.TestFramework/A.html#50081c441f6f88a4" class="i property">ClientId</a>;
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r26 rd" class="r26 r">clientSecret</span> = <a href="/Azure.Core.TestFramework/A.html#26a1e2ab3c3c535e" class="i property">TestEnvironment</a>.<a href="/Azure.Core.TestFramework/A.html#e314809ba7ea5ea8" class="i property">ClientSecret</a>;
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r27 rd" class="r27 r">remoteRenderingEndpoint</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<a href="/Azure.Core.TestFramework/A.html#26a1e2ab3c3c535e" class="i property">TestEnvironment</a>.<a href="../RemoteRenderingTestEnvironment.cs.html#b051174256c1893d" class="i property">ServiceEndpoint</a>);
 
            <span class="k preprocess">#</span><span class="k preprocess">region</span> Snippet:CreateAClientWithAAD
 
            <a href="/Azure.Core/A.html#d93a9ffee404e938" class="t t">TokenCredential</a> <span id="r28 rd" class="r28 r">credential</span> = <b>new</b> <a href="/Azure.Identity/A.html#7466e0943cd6ed0f" class="t constructor">ClientSecretCredential</a>(<span class="r24 r">tenantId</span>, <span class="r25 r">clientId</span>, <span class="r26 r">clientSecret</span>, <b>new</b> <a href="/Azure.Identity/A.html#b897d34e43e8b601" class="t constructor">TokenCredentialOptions</a>
            {
                <a href="/Azure.Identity/A.html#de3193120ff3a2f6" class="i property">AuthorityHost</a> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span><span class="s">https://login.microsoftonline.com/</span>{<span class="r24 r">tenantId</span>}<span class="s">&quot;</span>)
            });
 
            <a href="/Azure.MixedReality.RemoteRendering/A.html#53a2922372d51fac" class="t t">RemoteRenderingClient</a> <span id="r29 rd" class="r29 r">client</span> = <b>new</b> <a href="/Azure.MixedReality.RemoteRendering/A.html#5db93a363e6fbbe9" class="t constructor">RemoteRenderingClient</a>(<span class="r27 r">remoteRenderingEndpoint</span>, <span class="r22 r">accountId</span>, <span class="r23 r">accountDomain</span>, <span class="r28 r">credential</span>);
            <span class="k preprocess">#</span><span class="k preprocess">endregion</span> Snippet:CreateAClientWithAAD
            <b>return</b> <span class="r29 r">client</span>;
        }
 
        <b>private</b> <a href="/Azure.MixedReality.RemoteRendering/A.html#53a2922372d51fac" class="t t">RemoteRenderingClient</a> <a id="14904f0943d07768" href="../R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">GetClientWithDeviceCode</a>()
        {
            <a href="@0@mscorlib/A.html#b622ef5f6b76c10a" class="t t">Guid</a> <span id="r30 rd" class="r30 r">accountId</span> = <b>new</b> <a href="@0@mscorlib/A.html#4329442fa037af5c" class="t constructor">Guid</a>(<a href="/Azure.Core.TestFramework/A.html#26a1e2ab3c3c535e" class="i property">TestEnvironment</a>.<a href="../RemoteRenderingTestEnvironment.cs.html#b0c229667ef2249b" class="i property">AccountId</a>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r31 rd" class="r31 r">accountDomain</span> = <a href="/Azure.Core.TestFramework/A.html#26a1e2ab3c3c535e" class="i property">TestEnvironment</a>.<a href="../RemoteRenderingTestEnvironment.cs.html#a11335708d0e44b2" class="i property">AccountDomain</a>;
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r32 rd" class="r32 r">tenantId</span> = <a href="/Azure.Core.TestFramework/A.html#26a1e2ab3c3c535e" class="i property">TestEnvironment</a>.<a href="/Azure.Core.TestFramework/A.html#ab050f0e55126952" class="i property">TenantId</a>;
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r33 rd" class="r33 r">clientId</span> = <a href="/Azure.Core.TestFramework/A.html#26a1e2ab3c3c535e" class="i property">TestEnvironment</a>.<a href="/Azure.Core.TestFramework/A.html#50081c441f6f88a4" class="i property">ClientId</a>;
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r34 rd" class="r34 r">remoteRenderingEndpoint</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<a href="/Azure.Core.TestFramework/A.html#26a1e2ab3c3c535e" class="i property">TestEnvironment</a>.<a href="../RemoteRenderingTestEnvironment.cs.html#b051174256c1893d" class="i property">ServiceEndpoint</a>);
 
            <span class="k preprocess">#</span><span class="k preprocess">region</span> Snippet:CreateAClientWithDeviceCode
 
            <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="cd6a9f2cd0eee23a" href="../R/cd6a9f2cd0eee23a.html" target="n" data-glyph="76,2" class="i method">deviceCodeCallback</a>(<a href="/Azure.Identity/A.html#9831730727ee5893" class="t t">DeviceCodeInfo</a> <span id="r35 rd" class="r35 r">deviceCodeInfo</span>, <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r36 rd" class="r36 r">cancellationToken</span>)
            {
                <a href="@0@mscorlib/A.html#f907d79481da6ba4" class="t t">Console</a>.<a href="@0@mscorlib/A.html#5ac7c4fda643413b" class="i method">WriteLine</a>(<span class="r35 r">deviceCodeInfo</span>.<a href="/Azure.Identity/A.html#6821dcd43bdceb49" class="i property">Message</a>);
                <b>return</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a>.<a href="@0@mscorlib/A.html#11a386e7d7cae64a" class="i method">FromResult</a>(0);
            }
 
            <a href="/Azure.Core/A.html#d93a9ffee404e938" class="t t">TokenCredential</a> <span id="r37 rd" class="r37 r">credential</span> = <b>new</b> <a href="/Azure.Identity/A.html#9510b895698a7d15" class="t constructor">DeviceCodeCredential</a>(<a href="#cd6a9f2cd0eee23a" class="i method">deviceCodeCallback</a>, <span class="r32 r">tenantId</span>, <span class="r33 r">clientId</span>, <b>new</b> <a href="/Azure.Identity/A.html#b897d34e43e8b601" class="t constructor">TokenCredentialOptions</a>
            {
                <a href="/Azure.Identity/A.html#de3193120ff3a2f6" class="i property">AuthorityHost</a> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span><span class="s">https://login.microsoftonline.com/</span>{<span class="r32 r">tenantId</span>}<span class="s">&quot;</span>),
            });
 
            <a href="/Azure.MixedReality.RemoteRendering/A.html#53a2922372d51fac" class="t t">RemoteRenderingClient</a> <span id="r38 rd" class="r38 r">client</span> = <b>new</b> <a href="/Azure.MixedReality.RemoteRendering/A.html#5db93a363e6fbbe9" class="t constructor">RemoteRenderingClient</a>(<span class="r34 r">remoteRenderingEndpoint</span>, <span class="r30 r">accountId</span>, <span class="r31 r">accountDomain</span>, <span class="r37 r">credential</span>);
            <span class="k preprocess">#</span><span class="k preprocess">endregion</span> Snippet:CreateAClientWithDeviceCode
            <b>return</b> <span class="r38 r">client</span>;
        }
 
        <b>private</b> <a href="/Azure.MixedReality.RemoteRendering/A.html#53a2922372d51fac" class="t t">RemoteRenderingClient</a> <a id="9c6e1821f1fa6a74" href="../R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">GetClientWithDefaultAzureCredential</a>()
        {
            <a href="@0@mscorlib/A.html#b622ef5f6b76c10a" class="t t">Guid</a> <span id="r39 rd" class="r39 r">accountId</span> = <b>new</b> <a href="@0@mscorlib/A.html#4329442fa037af5c" class="t constructor">Guid</a>(<a href="/Azure.Core.TestFramework/A.html#26a1e2ab3c3c535e" class="i property">TestEnvironment</a>.<a href="../RemoteRenderingTestEnvironment.cs.html#b0c229667ef2249b" class="i property">AccountId</a>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r40 rd" class="r40 r">accountDomain</span> = <a href="/Azure.Core.TestFramework/A.html#26a1e2ab3c3c535e" class="i property">TestEnvironment</a>.<a href="../RemoteRenderingTestEnvironment.cs.html#a11335708d0e44b2" class="i property">AccountDomain</a>;
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r41 rd" class="r41 r">remoteRenderingEndpoint</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<a href="/Azure.Core.TestFramework/A.html#26a1e2ab3c3c535e" class="i property">TestEnvironment</a>.<a href="../RemoteRenderingTestEnvironment.cs.html#b051174256c1893d" class="i property">ServiceEndpoint</a>);
 
            <span class="k preprocess">#</span><span class="k preprocess">region</span> Snippet:CreateAClientWithAzureCredential
 
            <a href="/Azure.Core/A.html#d93a9ffee404e938" class="t t">TokenCredential</a> <span id="r42 rd" class="r42 r">credential</span> = <b>new</b> <a href="/Azure.Core.TestFramework/A.html#2402c3613b463416" class="t constructor">DefaultAzureCredential</a>(<span class="r43 r">includeInteractiveCredentials</span>: <b>true</b>);
 
            <a href="/Azure.MixedReality.RemoteRendering/A.html#53a2922372d51fac" class="t t">RemoteRenderingClient</a> <span id="r44 rd" class="r44 r">client</span> = <b>new</b> <a href="/Azure.MixedReality.RemoteRendering/A.html#5db93a363e6fbbe9" class="t constructor">RemoteRenderingClient</a>(<span class="r41 r">remoteRenderingEndpoint</span>, <span class="r39 r">accountId</span>, <span class="r40 r">accountDomain</span>, <span class="r42 r">credential</span>);
            <span class="k preprocess">#</span><span class="k preprocess">endregion</span> Snippet:CreateAClientWithAzureCredential
 
            <b>return</b> <span class="r44 r">client</span>;
        }
 
        <b>private</b> <a href="/Azure.Core/A.html#b9cb398886850745" class="t t">AccessToken</a> <a id="ceb74ea8db91d4eb" href="../R/ceb74ea8db91d4eb.html" target="n" data-glyph="76,1" class="i method">GetMixedRealityAccessTokenFromWebService</a>()
        {
            <b>return</b> <b>new</b> <a href="/Azure.Core/A.html#68b2c442cd1f3537" class="t constructor">AccessToken</a>(<span class="s">&quot;TokenObtainedFromStsClientRunningInWebservice&quot;</span>, <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a>.<a href="@0@mscorlib/A.html#371fa431c6a3a817" class="i field">MaxValue</a>);
        }
 
        <b>private</b> <a href="/Azure.MixedReality.RemoteRendering/A.html#53a2922372d51fac" class="t t">RemoteRenderingClient</a> <a id="73cb6f232f87500f" href="../R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">GetClientWithStaticAccessToken</a>()
        {
            <a href="@0@mscorlib/A.html#b622ef5f6b76c10a" class="t t">Guid</a> <span id="r45 rd" class="r45 r">accountId</span> = <b>new</b> <a href="@0@mscorlib/A.html#4329442fa037af5c" class="t constructor">Guid</a>(<a href="/Azure.Core.TestFramework/A.html#26a1e2ab3c3c535e" class="i property">TestEnvironment</a>.<a href="../RemoteRenderingTestEnvironment.cs.html#b0c229667ef2249b" class="i property">AccountId</a>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r46 rd" class="r46 r">accountDomain</span> = <a href="/Azure.Core.TestFramework/A.html#26a1e2ab3c3c535e" class="i property">TestEnvironment</a>.<a href="../RemoteRenderingTestEnvironment.cs.html#a11335708d0e44b2" class="i property">AccountDomain</a>;
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r47 rd" class="r47 r">remoteRenderingEndpoint</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<a href="/Azure.Core.TestFramework/A.html#26a1e2ab3c3c535e" class="i property">TestEnvironment</a>.<a href="../RemoteRenderingTestEnvironment.cs.html#b051174256c1893d" class="i property">ServiceEndpoint</a>);
 
            <span class="k preprocess">#</span><span class="k preprocess">region</span> Snippet:CreateAClientWithStaticAccessToken
 
            <span class="c">// GetMixedRealityAccessTokenFromWebService is a hypothetical method that retrieves</span>
            <span class="c">// a Mixed Reality access token from a web service. The web service would use the</span>
            <span class="c">// MixedRealityStsClient and credentials to obtain an access token to be returned</span>
            <span class="c">// to the client.</span>
            <a href="/Azure.Core/A.html#b9cb398886850745" class="t t">AccessToken</a> <span id="r48 rd" class="r48 r">accessToken</span> = <a href="#ceb74ea8db91d4eb" class="i method">GetMixedRealityAccessTokenFromWebService</a>();
 
            <a href="/Azure.MixedReality.RemoteRendering/A.html#53a2922372d51fac" class="t t">RemoteRenderingClient</a> <span id="r49 rd" class="r49 r">client</span> = <b>new</b> <a href="/Azure.MixedReality.RemoteRendering/A.html#16370e53d98dd3ff" class="t constructor">RemoteRenderingClient</a>(<span class="r47 r">remoteRenderingEndpoint</span>, <span class="r45 r">accountId</span>, <span class="r46 r">accountDomain</span>, <span class="r48 r">accessToken</span>);
            <span class="k preprocess">#</span><span class="k preprocess">endregion</span> Snippet:CreateAClientWithStaticAccessToken
 
            <b>return</b> <span class="r49 r">client</span>;
        }
 
        <span class="k preprocess">#</span><span class="k preprocess">endregion</span>
    }
}
</pre></td></tr></table></div></body></html>

<!DOCTYPE html>
<html><head><title>BinaryDataSamples.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(90);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#System.Memory.Data.Tests/samples/BinaryDataSamples.cs" target="_top">samples\BinaryDataSamples.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#System.Memory.Data.Tests" target="_top">System.Memory.Data.Tests.csproj</a> (System.Memory.Data.Tests)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License.</span>
 
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">IO</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Text</span>;
<b>using</b> <span class="i">Xunit</span>;
 
<b>namespace</b> <span class="i n">Azure</span>.<span class="i n">Core</span>.<span class="i n">Experimental</span>.<span class="i n">Tests</span>.<span class="i n">samples</span>
{
    <b>public class</b> <a id="468ca494723d977f" href="../R/../../0000000000.html" target="n" data-glyph="0,0" class="t t"><span id="32cea7f866ce7d9a">BinaryDataSamples</span></a>
    {
        [<span class="i">Fact</span>(<span class="i">Skip</span> = <span class="s">&quot;Only verifying that the sample builds&quot;</span>)]
        <b>public void</b> <a id="0e9a965a1bb4aff9" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ToFromString</a>()
        {
            <span class="k preprocess">#</span><span class="k preprocess">region</span> Snippet:BinaryDataToFromString
            <a href="/System.Memory.Data/A.html#b41210c71e293f88" class="k">var</a> <span id="r0 rd" class="r0 r">data</span> = <b>new</b> <a href="/System.Memory.Data/A.html#c9736bff8edcba3b" class="t constructor">BinaryData</a>(<span class="s">&quot;some data&quot;</span>);
 
            <span class="c">// ToString will decode the bytes using UTF-8</span>
            <a href="@0@mscorlib/A.html#f907d79481da6ba4" class="t t">Console</a>.<a href="@0@mscorlib/A.html#5ac7c4fda643413b" class="i method">WriteLine</a>(<span class="r0 r">data</span>.<a href="/System.Memory.Data/A.html#cab71e7b2240cb5c" class="i method">ToString</a>()); <span class="c">// prints &quot;some data&quot;</span>
            <span class="k preprocess">#</span><span class="k preprocess">endregion</span>
        }
 
        [<span class="i">Fact</span>(<span class="i">Skip</span> = <span class="s">&quot;Only verifying that the sample builds&quot;</span>)]
 
        <b>public void</b> <a id="64e1394af8884f45" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ToFromBytes</a>()
        {
            <span class="k preprocess">#</span><span class="k preprocess">region</span> Snippet:BinaryDataToFromBytes
            <b>byte</b>[] <span id="r1 rd" class="r1 r">bytes</span> = <a href="@0@mscorlib/A.html#3b6090c501893c25" class="t t">Encoding</a>.<a href="@0@mscorlib/A.html#a10eb90a3d884500" class="i property">UTF8</a>.<a href="@0@mscorlib/A.html#83f2d2c6f22db1a9" class="i method">GetBytes</a>(<span class="s">&quot;some data&quot;</span>);
 
            <span class="c">// Create BinaryData using a constructor ...</span>
            <a href="/System.Memory.Data/A.html#b41210c71e293f88" class="t t">BinaryData</a> <span id="r2 rd" class="r2 r">data</span> = <b>new</b> <a href="/System.Memory.Data/A.html#ae3aa0e047538c12" class="t constructor">BinaryData</a>(<span class="r1 r">bytes</span>);
 
            <span class="c">// Or using a static factory method.</span>
            <span class="r2 r">data</span> = <a href="/System.Memory.Data/A.html#b41210c71e293f88" class="t t">BinaryData</a>.<a href="/System.Memory.Data/A.html#b8726154d793cf41" class="i method">FromBytes</a>(<span class="r1 r">bytes</span>);
 
            <span class="c">// There is an implicit cast defined for ReadOnlyMemory&lt;byte&gt;</span>
            <span class="i">ReadOnlyMemory</span>&lt;<b>byte</b>&gt; <span id="r3 rd" class="r3 r">rom</span> = <span class="r2 r">data</span>;
 
            <span class="c">// There is also an implicit cast defined for ReadOnlySpan&lt;byte&gt;</span>
            <span class="i">ReadOnlySpan</span>&lt;<b>byte</b>&gt; <span id="r4 rd" class="r4 r">ros</span> = <span class="r2 r">data</span>;
 
            <span class="c">// there is also a ToMemory method that gives access to the ReadOnlyMemory.</span>
            <span class="r3 r">rom</span> = <span class="r2 r">data</span>.<a href="/System.Memory.Data/A.html#70215acd3ec597c9" class="i method">ToMemory</a>();
 
            <span class="c">// and a ToArray method that converts into a byte array.</span>
            <b>byte</b>[] <span id="r5 rd" class="r5 r">array</span> = <span class="r2 r">data</span>.<a href="/System.Memory.Data/A.html#288a77b70eac3839" class="i method">ToArray</a>();
            <span class="k preprocess">#</span><span class="k preprocess">endregion</span>
        }
 
        [<span class="i">Fact</span>(<span class="i">Skip</span> = <span class="s">&quot;Only verifying that the sample builds&quot;</span>)]
        <b>public void</b> <a id="4cddc44c02b1e601" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ToFromStream</a>()
        {
            <span class="k preprocess">#</span><span class="k preprocess">region</span> Snippet:BinaryDataToFromStream
            <b>var</b> <span id="r6 rd" class="r6 r">bytes</span> = <a href="@0@mscorlib/A.html#3b6090c501893c25" class="t t">Encoding</a>.<a href="@0@mscorlib/A.html#a10eb90a3d884500" class="i property">UTF8</a>.<a href="@0@mscorlib/A.html#83f2d2c6f22db1a9" class="i method">GetBytes</a>(<span class="s">&quot;some data&quot;</span>);
            <a href="@0@mscorlib/A.html#f956b0c07e86df64" class="t t">Stream</a> <span id="r7 rd" class="r7 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r6 r">bytes</span>);
            <a href="/System.Memory.Data/A.html#b41210c71e293f88" class="k">var</a> <span id="r8 rd" class="r8 r">data</span> = <a href="/System.Memory.Data/A.html#b41210c71e293f88" class="t t">BinaryData</a>.<a href="/System.Memory.Data/A.html#b0c3d68ede9ad3fe" class="i method">FromStream</a>(<span class="r7 r">stream</span>);
 
            <span class="c">// Calling ToStream will give back a stream that is backed by ReadOnlyMemory, so it is not writable.</span>
            <span class="r7 r">stream</span> = <span class="r8 r">data</span>.<a href="/System.Memory.Data/A.html#6a6f596118baef41" class="i method">ToStream</a>();
            <a href="@0@mscorlib/A.html#f907d79481da6ba4" class="t t">Console</a>.<a href="@0@mscorlib/A.html#4245e9724fe41cdc" class="i method">WriteLine</a>(<span class="r7 r">stream</span>.<a href="@0@mscorlib/A.html#ebab682837a70146" class="i property">CanWrite</a>); <span class="c">// prints false</span>
            <span class="k preprocess">#</span><span class="k preprocess">endregion</span>
        }
 
        [<span class="i">Fact</span>(<span class="i">Skip</span> = <span class="s">&quot;Only verifying that the sample builds&quot;</span>)]
 
        <b>public void</b> <a id="645b090b84ee6a68" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ToFromCustomType</a>()
        {
            <span class="k preprocess">#</span><span class="k preprocess">region</span> Snippet:BinaryDataToFromCustomModel
            <a href="#20baab724d400ab5" class="k">var</a> <span id="r9 rd" class="r9 r">model</span> = <b>new</b> <a href="#20baab724d400ab5" class="t constructor">CustomModel</a>
            {
                <a href="#765445cf5b30806b" class="i property">A</a> = <span class="s">&quot;some text&quot;</span>,
                <a href="#55ab133a53aeba28" class="i property">B</a> = 5,
                <a href="#778a1040c614a798" class="i property">C</a> = <b>true</b>
            };
 
            <a href="/System.Memory.Data/A.html#b41210c71e293f88" class="k">var</a> <span id="r10 rd" class="r10 r">data</span> = <a href="/System.Memory.Data/A.html#b41210c71e293f88" class="t t">BinaryData</a>.<a href="/System.Memory.Data/A.html#fda26dde4ea901ad" class="i method">FromObjectAsJson</a>(<span class="r9 r">model</span>);
            <span class="r9 r">model</span> = <span class="r10 r">data</span>.<a href="/System.Memory.Data/A.html#5a2281d8870dbfa7" class="i method">ToObjectFromJson</a>&lt;<a href="#20baab724d400ab5" class="t t">CustomModel</a>&gt;();
            <span class="k preprocess">#</span><span class="k preprocess">endregion</span>
        }
 
        <b>private class</b> <a id="20baab724d400ab5" href="../R/20baab724d400ab5.html" target="n" data-glyph="4,1" class="t t"><span id="d0faf99f667cc8c2">CustomModel</span></a>
        {
            <b>public string</b> <a id="765445cf5b30806b" href="../R/765445cf5b30806b.html" target="n" data-glyph="102,2" class="i property">A</a> { <b>get</b>; <b>set</b>; }
            <b>public int</b> <a id="55ab133a53aeba28" href="../R/55ab133a53aeba28.html" target="n" data-glyph="102,2" class="i property">B</a> { <b>get</b>; <b>set</b>; }
            <b>public bool</b> <a id="778a1040c614a798" href="../R/778a1040c614a798.html" target="n" data-glyph="102,2" class="i property">C</a> { <b>get</b>; <b>set</b>; }
        }
    }
}
</pre></td></tr></table></div></body></html>

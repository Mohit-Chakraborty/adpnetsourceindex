<!DOCTYPE html>
<html><head><title>TableSasExtensions.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(191);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Azure.Data.Tables/Sas/TableSasExtensions.cs" target="_top">Sas\TableSasExtensions.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Azure.Data.Tables" target="_top">Azure.Data.Tables.csproj</a> (Azure.Data.Tables)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License.</span>
 
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Globalization</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Net</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Text</span>;
 
<b>namespace</b> <span class="i n">Azure</span>.<span class="i n">Data</span>.<span class="i n">Tables</span>.<span class="i n">Sas</span>
{
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
    <span class="c">///</span><span class="c"> Extension methods for Sas.</span>
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
    <b>internal static</b> <b>partial</b> <b>class</b> <a id="8900d04976bf6e60" href="../R/8900d04976bf6e60.html" target="n" data-glyph="2,0" class="t t">TableSasExtensions</a>
    {
        <b>private const string</b> <a id="53f303a5074e659a" href="../R/53f303a5074e659a.html" target="n" data-glyph="10,1" class="i field">NoneName</a> = <b>null</b>;
        <b>private const string</b> <a id="29b1a9e8ba3f6798" href="../R/29b1a9e8ba3f6798.html" target="n" data-glyph="10,1" class="i field">HttpsName</a> = <span class="s">&quot;https&quot;</span>;
        <b>private const string</b> <a id="23d6d4a194a63a81" href="../R/23d6d4a194a63a81.html" target="n" data-glyph="10,1" class="i field">HttpsAndHttpName</a> = <span class="s">&quot;https,http&quot;</span>;
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets a string representation of the protocol.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">A string representation of the protocol.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>internal static string</b> <a id="7308ce0131479f54" href="../R/7308ce0131479f54.html" target="n" data-glyph="221,1" class="i method">ToProtocolString</a>(<b>this</b> <a href="TableSasProtocol.cs.html#f120747ad1c44770" class="t t">TableSasProtocol</a> <span id="r0 rd" class="r0 r">protocol</span>)
        {
            <b>switch</b> (<span class="r0 r">protocol</span>)
            {
                <b>case</b> <a href="TableSasProtocol.cs.html#f120747ad1c44770" class="t t">TableSasProtocol</a>.<a href="TableSasProtocol.cs.html#45ae6ab266147fac" class="i field">Https</a>:
                    <b>return</b> <a href="#29b1a9e8ba3f6798" class="i field">HttpsName</a>;
                <b>case</b> <a href="TableSasProtocol.cs.html#f120747ad1c44770" class="t t">TableSasProtocol</a>.<a href="TableSasProtocol.cs.html#8d5f3979b6e677f1" class="i field">HttpsAndHttp</a>:
                    <b>return</b> <a href="#23d6d4a194a63a81" class="i field">HttpsAndHttpName</a>;
                <b>case</b> <a href="TableSasProtocol.cs.html#f120747ad1c44770" class="t t">TableSasProtocol</a>.<a href="TableSasProtocol.cs.html#3fc2720709ec5cea" class="i field">None</a>:
                <b>default</b>:
                    <b>return</b> <b>null</b>;
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Parse a string representation of a protocol.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r1 r">s</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">A string representation of a protocol.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">A </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="TableSasProtocol.cs.html#f120747ad1c44770" class="t t">TableSasProtocol</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>public static</b> <a href="TableSasProtocol.cs.html#f120747ad1c44770" class="t t">TableSasProtocol</a> <a id="35e6175486cde724" href="../R/35e6175486cde724.html" target="n" data-glyph="72,1" class="i method">ParseProtocol</a>(<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1 rd" class="r1 r">s</span>)
        {
            <b>switch</b> (<span class="r1 r">s</span>)
            {
                <b>case</b> <a href="#53f303a5074e659a" class="i field">NoneName</a>:
                <b>case</b> <span class="s">&quot;&quot;</span>:
                    <b>return</b> <a href="TableSasProtocol.cs.html#f120747ad1c44770" class="t t">TableSasProtocol</a>.<a href="TableSasProtocol.cs.html#3fc2720709ec5cea" class="i field">None</a>;
                <b>case</b> <a href="#29b1a9e8ba3f6798" class="i field">HttpsName</a>:
                    <b>return</b> <a href="TableSasProtocol.cs.html#f120747ad1c44770" class="t t">TableSasProtocol</a>.<a href="TableSasProtocol.cs.html#45ae6ab266147fac" class="i field">Https</a>;
                <b>case</b> <a href="#23d6d4a194a63a81" class="i field">HttpsAndHttpName</a>:
                    <b>return</b> <a href="TableSasProtocol.cs.html#f120747ad1c44770" class="t t">TableSasProtocol</a>.<a href="TableSasProtocol.cs.html#8d5f3979b6e677f1" class="i field">HttpsAndHttp</a>;
                <b>default</b>:
                    <b>throw</b> <a href="Errors.cs.html#35917719df1f5371" class="t t">Errors</a>.<a href="Errors.cs.html#816b2062e8bc8cbf" class="i method">InvalidSasProtocol</a>(<b>nameof</b>(<span class="r1 r">s</span>), <b>nameof</b>(<a href="TableSasProtocol.cs.html#f120747ad1c44770" class="t t">TableSasProtocol</a>));
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Parse a string representing which resource types are accessible</span>
        <span class="c">///</span><span class="c"> from a shared access signature.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r2 r">s</span><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> A string representing which resource types are accessible.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> An </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="TableAccountSasResourceTypes.cs.html#ad36919a6753b594" class="t t">TableAccountSasResourceTypes</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> instance.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The order here matches the order used by the portal when generating SAS signatures.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <b>internal static</b> <a href="TableAccountSasResourceTypes.cs.html#ad36919a6753b594" class="t t">TableAccountSasResourceTypes</a> <a id="2c61462a3367a49f" href="../R/2c61462a3367a49f.html" target="n" data-glyph="74,1" class="i method">ParseResourceTypes</a>(<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r2 rd" class="r2 r">s</span>)
        {
            <a href="TableAccountSasResourceTypes.cs.html#ad36919a6753b594" class="t t">TableAccountSasResourceTypes</a> <span id="r3 rd" class="r3 r">types</span> = <b>default</b>;
            <b>foreach</b> (<a href="@1@netstandard/A.html#02f2b1a33b09362d" class="k">var</a> <span id="r4 rd" class="r4 r">ch</span> <b>in</b> <span class="r2 r">s</span>)
            {
                <span class="r3 r">types</span> |= <span class="r4 r">ch</span> <b>switch</b>
                {
                    <a href="../TableConstants.cs.html#665de419db95984f" class="t t">TableConstants</a>.<a href="../TableConstants.cs.html#b6dae59194e47ef5" class="t t">Sas</a>.<a href="../TableConstants.cs.html#3f5feb8b0adfc4e4" class="t t">TableAccountResources</a>.<a href="../TableConstants.cs.html#083c37357dcfa32e" class="i field">Service</a> =&gt; <a href="TableAccountSasResourceTypes.cs.html#ad36919a6753b594" class="t t">TableAccountSasResourceTypes</a>.<a href="TableAccountSasResourceTypes.cs.html#5afb214638e4eeff" class="i field">Service</a>,
                    <a href="../TableConstants.cs.html#665de419db95984f" class="t t">TableConstants</a>.<a href="../TableConstants.cs.html#b6dae59194e47ef5" class="t t">Sas</a>.<a href="../TableConstants.cs.html#3f5feb8b0adfc4e4" class="t t">TableAccountResources</a>.<a href="../TableConstants.cs.html#5d0a7ee810684cc8" class="i field">Container</a> =&gt; <a href="TableAccountSasResourceTypes.cs.html#ad36919a6753b594" class="t t">TableAccountSasResourceTypes</a>.<a href="TableAccountSasResourceTypes.cs.html#ef25eaa952fe226e" class="i field">Container</a>,
                    <a href="../TableConstants.cs.html#665de419db95984f" class="t t">TableConstants</a>.<a href="../TableConstants.cs.html#b6dae59194e47ef5" class="t t">Sas</a>.<a href="../TableConstants.cs.html#3f5feb8b0adfc4e4" class="t t">TableAccountResources</a>.<a href="../TableConstants.cs.html#1181135c6d751a69" class="i field">Object</a> =&gt; <a href="TableAccountSasResourceTypes.cs.html#ad36919a6753b594" class="t t">TableAccountSasResourceTypes</a>.<a href="TableAccountSasResourceTypes.cs.html#efbd101cd7bfa1e8" class="i field">Object</a>,
                    <b>_</b> =&gt; <b>throw</b> <a href="Errors.cs.html#35917719df1f5371" class="t t">Errors</a>.<a href="Errors.cs.html#99b54644f734e380" class="i method">InvalidResourceType</a>(<span class="r4 r">ch</span>),
                };
            }
            <b>return</b> <span class="r3 r">types</span>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> FormatTimesForSASSigning converts a time.Time to a snapshotTimeFormat string suitable for a</span>
        <span class="c">///</span><span class="c"> SASField&#39;s StartTime or ExpiryTime fields. Returns &quot;&quot; if value.IsZero().</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r5 r">time</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>internal static string</b> <a id="ac54a3d17a621a73" href="../R/ac54a3d17a621a73.html" target="n" data-glyph="74,1" class="i method">FormatTimesForSasSigning</a>(<a href="@1@netstandard/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a> <span id="r5 rd" class="r5 r">time</span>) =&gt;
            <span class="c">// &quot;yyyy-MM-ddTHH:mm:ssZ&quot;</span>
            (<span class="r5 r">time</span> == <b>new</b> <a href="@1@netstandard/A.html#68b4bb83ce8d1c31" class="t constructor">DateTimeOffset</a>()) ? <span class="s">&quot;&quot;</span> : <span class="r5 r">time</span>.<a href="@1@netstandard/A.html#fba683365f88b71c" class="i method">ToString</a>(<a href="../TableConstants.cs.html#665de419db95984f" class="t t">TableConstants</a>.<a href="../TableConstants.cs.html#b6dae59194e47ef5" class="t t">Sas</a>.<a href="../TableConstants.cs.html#e3c59c86205ec910" class="i field">SasTimeFormat</a>, <a href="@1@netstandard/A.html#e319c6636909012f" class="t t">CultureInfo</a>.<a href="@1@netstandard/A.html#26ef1c020f0dbb7a" class="i property">InvariantCulture</a>);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Helper method to add query param key value pairs to StringBuilder</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r6 r">sb</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">StringBuilder instance</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r7 r">key</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">query key</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r8 r">value</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">query value</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <b>internal static void</b> <a id="05b389499cd14a8b" href="../R/../../0000000000.html" target="n" data-glyph="74,1" class="i method">AddToBuilder</a>(<a href="@1@netstandard/A.html#adf60ee46ebd299f" class="t t">StringBuilder</a> <span id="r6 rd" class="r6 r">sb</span>, <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r7 rd" class="r7 r">key</span>, <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r8 rd" class="r8 r">value</span>) =&gt;
            <span class="r6 r">sb</span>
            .<a href="@1@netstandard/A.html#e8eaef3c361184bc" class="i method">Append</a>(<span class="r6 r">sb</span>.<a href="@1@netstandard/A.html#7d7729bd88adac53" class="i property">Length</a> &gt; 0 ? <span class="s">&quot;&amp;&quot;</span> : <span class="s">&quot;&quot;</span>)
            .<a href="@1@netstandard/A.html#e8eaef3c361184bc" class="i method">Append</a>(<span class="r7 r">key</span>)
            .<a href="@1@netstandard/A.html#a2e7c78d85807da5" class="i method">Append</a>(<span class="s">&#39;=&#39;</span>)
            .<a href="@1@netstandard/A.html#e8eaef3c361184bc" class="i method">Append</a>(<span class="r8 r">value</span>);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Builds the query parameter string for the SasQueryParameters instance.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r9 r">parameters</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r10 r">stringBuilder</span><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> StringBuilder instance to add the query params to</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <b>internal static void</b> <a id="1b044e7e61bf4a91" href="../R/1b044e7e61bf4a91.html" target="n" data-glyph="221,1" class="i method">AppendProperties</a>(<b>this</b> <a href="TableAccountSasQueryParameters.cs.html#509988ed2dde382e" class="t t">TableAccountSasQueryParameters</a> <span id="r9 rd" class="r9 r">parameters</span>, <a href="@1@netstandard/A.html#adf60ee46ebd299f" class="t t">StringBuilder</a> <span id="r10 rd" class="r10 r">stringBuilder</span>)
        {
            <b>if</b> (!<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@netstandard/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>(<span class="r9 r">parameters</span>.<a href="TableAccountSasQueryParameters.cs.html#badc513c6a407d1f" class="i property">Version</a>))
            {
                <span class="r10 r">stringBuilder</span>.<a href="#6c2aa39d08361fa6" class="i method">AppendQueryParameter</a>(<a href="../TableConstants.cs.html#665de419db95984f" class="t t">TableConstants</a>.<a href="../TableConstants.cs.html#b6dae59194e47ef5" class="t t">Sas</a>.<a href="../TableConstants.cs.html#aaf2fc997e60d2c4" class="t t">Parameters</a>.<a href="../TableConstants.cs.html#f9ef0b25e9fe1ccd" class="i field">Version</a>, <span class="r9 r">parameters</span>.<a href="TableAccountSasQueryParameters.cs.html#badc513c6a407d1f" class="i property">Version</a>);
            }
 
            <b>if</b> (!(<span class="r9 r">parameters</span> <b>is</b> <a href="TableSasQueryParameters.cs.html#44469aede84faf55" class="t t">TableSasQueryParameters</a>))
            {
                <span class="r10 r">stringBuilder</span>.<a href="#6c2aa39d08361fa6" class="i method">AppendQueryParameter</a>(<a href="../TableConstants.cs.html#665de419db95984f" class="t t">TableConstants</a>.<a href="../TableConstants.cs.html#b6dae59194e47ef5" class="t t">Sas</a>.<a href="../TableConstants.cs.html#aaf2fc997e60d2c4" class="t t">Parameters</a>.<a href="../TableConstants.cs.html#bd217c1483af8698" class="i field">Services</a>, <a href="../TableConstants.cs.html#665de419db95984f" class="t t">TableConstants</a>.<a href="../TableConstants.cs.html#b6dae59194e47ef5" class="t t">Sas</a>.<a href="../TableConstants.cs.html#bade58ef238dc43f" class="t t">TableAccountServices</a>.<a href="../TableConstants.cs.html#cf51ba7730657340" class="i field">Table</a>);
            }
 
            <b>if</b> (<span class="r9 r">parameters</span>.<a href="TableAccountSasQueryParameters.cs.html#f7dfacfe01c8dd70" class="i property">ResourceTypes</a> != <b>null</b>)
            {
                <span class="r10 r">stringBuilder</span>.<a href="#6c2aa39d08361fa6" class="i method">AppendQueryParameter</a>(<a href="../TableConstants.cs.html#665de419db95984f" class="t t">TableConstants</a>.<a href="../TableConstants.cs.html#b6dae59194e47ef5" class="t t">Sas</a>.<a href="../TableConstants.cs.html#aaf2fc997e60d2c4" class="t t">Parameters</a>.<a href="../TableConstants.cs.html#bea0a59e8ddf4047" class="i field">ResourceTypes</a>, <span class="r9 r">parameters</span>.<a href="TableAccountSasQueryParameters.cs.html#f7dfacfe01c8dd70" class="i property">ResourceTypes</a>.<a href="@1@netstandard/A.html#7b38d1fa76071c95" class="i property">Value</a>.<a href="TableAccountSasResourceTypes.cs.html#e63636205fa03322" class="i method">ToPermissionsString</a>());
            }
 
            <b>if</b> (<span class="r9 r">parameters</span>.<a href="TableAccountSasQueryParameters.cs.html#a6f8be2441a5eb57" class="i property">Protocol</a> != <b>default</b>)
            {
                <span class="r10 r">stringBuilder</span>.<a href="#6c2aa39d08361fa6" class="i method">AppendQueryParameter</a>(<a href="../TableConstants.cs.html#665de419db95984f" class="t t">TableConstants</a>.<a href="../TableConstants.cs.html#b6dae59194e47ef5" class="t t">Sas</a>.<a href="../TableConstants.cs.html#aaf2fc997e60d2c4" class="t t">Parameters</a>.<a href="../TableConstants.cs.html#0dcf82d09f009b3e" class="i field">Protocol</a>, <span class="r9 r">parameters</span>.<a href="TableAccountSasQueryParameters.cs.html#a6f8be2441a5eb57" class="i property">Protocol</a>.<a href="#7308ce0131479f54" class="i method">ToProtocolString</a>());
            }
 
            <b>if</b> (<span class="r9 r">parameters</span>.<a href="TableAccountSasQueryParameters.cs.html#b4b02cd23d609667" class="i property">StartsOn</a> != <a href="@1@netstandard/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a>.<a href="@1@netstandard/A.html#027622e417a4d206" class="i field">MinValue</a>)
            {
                <span class="r10 r">stringBuilder</span>.<a href="#6c2aa39d08361fa6" class="i method">AppendQueryParameter</a>(<a href="../TableConstants.cs.html#665de419db95984f" class="t t">TableConstants</a>.<a href="../TableConstants.cs.html#b6dae59194e47ef5" class="t t">Sas</a>.<a href="../TableConstants.cs.html#aaf2fc997e60d2c4" class="t t">Parameters</a>.<a href="../TableConstants.cs.html#33986279811d3152" class="i field">StartTime</a>, <a href="@1@netstandard/A.html#be62bd8978189a87" class="t t">WebUtility</a>.<a href="@1@netstandard/A.html#c74b8742f6516acd" class="i method">UrlEncode</a>(<span class="r9 r">parameters</span>.<a href="TableAccountSasQueryParameters.cs.html#3b32d1d97d3da992" class="i property">StartsOnString</a>));
            }
 
            <b>if</b> (<span class="r9 r">parameters</span>.<a href="TableAccountSasQueryParameters.cs.html#4bae7c59849c2683" class="i property">ExpiresOn</a> != <a href="@1@netstandard/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a>.<a href="@1@netstandard/A.html#027622e417a4d206" class="i field">MinValue</a>)
            {
                <span class="r10 r">stringBuilder</span>.<a href="#6c2aa39d08361fa6" class="i method">AppendQueryParameter</a>(<a href="../TableConstants.cs.html#665de419db95984f" class="t t">TableConstants</a>.<a href="../TableConstants.cs.html#b6dae59194e47ef5" class="t t">Sas</a>.<a href="../TableConstants.cs.html#aaf2fc997e60d2c4" class="t t">Parameters</a>.<a href="../TableConstants.cs.html#5eb2161aef9e13a5" class="i field">ExpiryTime</a>, <a href="@1@netstandard/A.html#be62bd8978189a87" class="t t">WebUtility</a>.<a href="@1@netstandard/A.html#c74b8742f6516acd" class="i method">UrlEncode</a>(<span class="r9 r">parameters</span>.<a href="TableAccountSasQueryParameters.cs.html#7ee1e8f3a69133dd" class="i property">ExpiresOnString</a>));
            }
 
            <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r11 rd" class="r11 r">ipr</span> = <span class="r9 r">parameters</span>.<a href="TableAccountSasQueryParameters.cs.html#06e68546413db579" class="i property">IPRange</a>.<a href="TableSasIPRange.cs.html#89c46722eb4c8eb5" class="i method">ToString</a>();
            <b>if</b> (<span class="r11 r">ipr</span>.<a href="@1@netstandard/A.html#e13f5829ef28aa07" class="i property">Length</a> &gt; 0)
            {
                <span class="r10 r">stringBuilder</span>.<a href="#6c2aa39d08361fa6" class="i method">AppendQueryParameter</a>(<a href="../TableConstants.cs.html#665de419db95984f" class="t t">TableConstants</a>.<a href="../TableConstants.cs.html#b6dae59194e47ef5" class="t t">Sas</a>.<a href="../TableConstants.cs.html#aaf2fc997e60d2c4" class="t t">Parameters</a>.<a href="../TableConstants.cs.html#d1e6e076facd1f6c" class="i field">IPRange</a>, <span class="r11 r">ipr</span>);
            }
 
            <b>if</b> (!<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@netstandard/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>(<span class="r9 r">parameters</span>.<a href="TableAccountSasQueryParameters.cs.html#a12c5af2cce4a74c" class="i property">Identifier</a>))
            {
                <span class="r10 r">stringBuilder</span>.<a href="#6c2aa39d08361fa6" class="i method">AppendQueryParameter</a>(<a href="../TableConstants.cs.html#665de419db95984f" class="t t">TableConstants</a>.<a href="../TableConstants.cs.html#b6dae59194e47ef5" class="t t">Sas</a>.<a href="../TableConstants.cs.html#aaf2fc997e60d2c4" class="t t">Parameters</a>.<a href="../TableConstants.cs.html#08e0b0d428e5353f" class="i field">Identifier</a>, <span class="r9 r">parameters</span>.<a href="TableAccountSasQueryParameters.cs.html#a12c5af2cce4a74c" class="i property">Identifier</a>);
            }
 
            <b>if</b> (!<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@netstandard/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>(<span class="r9 r">parameters</span>.<a href="TableAccountSasQueryParameters.cs.html#72f0499f0d1e9eaa" class="i property">Resource</a>))
            {
                <span class="r10 r">stringBuilder</span>.<a href="#6c2aa39d08361fa6" class="i method">AppendQueryParameter</a>(<a href="../TableConstants.cs.html#665de419db95984f" class="t t">TableConstants</a>.<a href="../TableConstants.cs.html#b6dae59194e47ef5" class="t t">Sas</a>.<a href="../TableConstants.cs.html#aaf2fc997e60d2c4" class="t t">Parameters</a>.<a href="../TableConstants.cs.html#97b2b025360facaa" class="i field">Resource</a>, <span class="r9 r">parameters</span>.<a href="TableAccountSasQueryParameters.cs.html#72f0499f0d1e9eaa" class="i property">Resource</a>);
            }
 
            <b>if</b> (!<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@netstandard/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>(<span class="r9 r">parameters</span>.<a href="TableAccountSasQueryParameters.cs.html#a5333c80c443fb86" class="i property">Permissions</a>))
            {
                <span class="r10 r">stringBuilder</span>.<a href="#6c2aa39d08361fa6" class="i method">AppendQueryParameter</a>(<a href="../TableConstants.cs.html#665de419db95984f" class="t t">TableConstants</a>.<a href="../TableConstants.cs.html#b6dae59194e47ef5" class="t t">Sas</a>.<a href="../TableConstants.cs.html#aaf2fc997e60d2c4" class="t t">Parameters</a>.<a href="../TableConstants.cs.html#3be689cb184418f8" class="i field">Permissions</a>, <span class="r9 r">parameters</span>.<a href="TableAccountSasQueryParameters.cs.html#a5333c80c443fb86" class="i property">Permissions</a>);
            }
 
            <b>if</b> (!<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@netstandard/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>(<span class="r9 r">parameters</span>.<a href="TableAccountSasQueryParameters.cs.html#8da9b4d26f3d34f3" class="i property">Signature</a>))
            {
                <span class="r10 r">stringBuilder</span>.<a href="#6c2aa39d08361fa6" class="i method">AppendQueryParameter</a>(<a href="../TableConstants.cs.html#665de419db95984f" class="t t">TableConstants</a>.<a href="../TableConstants.cs.html#b6dae59194e47ef5" class="t t">Sas</a>.<a href="../TableConstants.cs.html#aaf2fc997e60d2c4" class="t t">Parameters</a>.<a href="../TableConstants.cs.html#5bc353862ddf09a4" class="i field">Signature</a>, <a href="@1@netstandard/A.html#be62bd8978189a87" class="t t">WebUtility</a>.<a href="@1@netstandard/A.html#c74b8742f6516acd" class="i method">UrlEncode</a>(<span class="r9 r">parameters</span>.<a href="TableAccountSasQueryParameters.cs.html#8da9b4d26f3d34f3" class="i property">Signature</a>));
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Appends a query parameter to the string builder.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r12 r">sb</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">string builder instance.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r13 r">key</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">query parameter key.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r14 r">value</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">query parameter value.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <b>internal static void</b> <a id="6c2aa39d08361fa6" href="../R/6c2aa39d08361fa6.html" target="n" data-glyph="221,1" class="i method">AppendQueryParameter</a>(<b>this</b> <a href="@1@netstandard/A.html#adf60ee46ebd299f" class="t t">StringBuilder</a> <span id="r12 rd" class="r12 r">sb</span>, <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r13 rd" class="r13 r">key</span>, <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r14 rd" class="r14 r">value</span>) =&gt;
            <span class="r12 r">sb</span>
            .<a href="@1@netstandard/A.html#e8eaef3c361184bc" class="i method">Append</a>(<span class="r12 r">sb</span>.<a href="@1@netstandard/A.html#7d7729bd88adac53" class="i property">Length</a> &gt; 0 ? <span class="s">&quot;&amp;&quot;</span> : <span class="s">&quot;&quot;</span>)
            .<a href="@1@netstandard/A.html#e8eaef3c361184bc" class="i method">Append</a>(<span class="r13 r">key</span>)
            .<a href="@1@netstandard/A.html#a2e7c78d85807da5" class="i method">Append</a>(<span class="s">&#39;=&#39;</span>)
            .<a href="@1@netstandard/A.html#e8eaef3c361184bc" class="i method">Append</a>(<span class="r14 r">value</span>);
    }
}
</pre></td></tr></table></div></body></html>

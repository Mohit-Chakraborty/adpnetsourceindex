<!DOCTYPE html>
<html><head><title>ClientConvert.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(130);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Azure.Data.Tables/Queryable/ClientConvert.cs" target="_top">Queryable\ClientConvert.cs</a><br/></td><td><a class="blueLink" href="https://github.com/Azure/azure-sdk-for-net/tree/main/sdk/tables/Azure.Data.Tables/src/Queryable/ClientConvert.cs" target="_blank">View on GitHub</a></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Azure.Data.Tables" target="_top">Azure.Data.Tables.csproj</a> (Azure.Data.Tables)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License.</span>
 
<b>using</b> <span class="i n">System</span>;
 
<b>namespace</b> <span class="i n">Azure</span>.<span class="i n">Data</span>.<span class="i n">Tables</span>.<span class="i n">Queryable</span>
{
    <b>internal static class</b> <a id="4fe68e5998ab9af3" href="../R/4fe68e5998ab9af3.html" target="n" data-glyph="2,0" class="t t">ClientConvert</a>
    {
        <b>private static readonly</b> <a href="@1@netstandard/A.html#3d00eeab9feb80f3" class="t t">Type</a>[] <a id="6ed435b3f34bcc70" href="../R/6ed435b3f34bcc70.html" target="n" data-glyph="46,1" class="i field">s_knownTypes</a> = <a href="#3081e1d2df5cd6ae" class="i method">CreateKnownPrimitives</a>();
 
        <b>internal enum</b> <a id="7621110b471f0f43" href="../R/7621110b471f0f43.html" target="n" data-glyph="20,1" class="t t"><span id="ec0e3308960c2f90">StorageType</span></a>
        {
            <a id="e1f3da0f1107dacd" href="../R/e1f3da0f1107dacd.html" target="n" data-glyph="24,2" class="i field">Boolean</a>,
            <a id="e6e890cff98e31c3" href="../R/e6e890cff98e31c3.html" target="n" data-glyph="24,2" class="i field">Byte</a>,
            <a id="ee6b7a76b7362918" href="../R/ee6b7a76b7362918.html" target="n" data-glyph="24,2" class="i field">ByteArray</a>,
            <a id="f51b6e5ef1fdf123" href="../R/f51b6e5ef1fdf123.html" target="n" data-glyph="24,2" class="i field">Char</a>,
            <a id="4532d11185ed1540" href="../R/4532d11185ed1540.html" target="n" data-glyph="24,2" class="i field">CharArray</a>,
            <a id="5ff7eeac026f8e67" href="../R/5ff7eeac026f8e67.html" target="n" data-glyph="24,2" class="i field">DateTime</a>,
            <a id="d6d511ad98f57b5f" href="../R/d6d511ad98f57b5f.html" target="n" data-glyph="24,2" class="i field">DateTimeOffset</a>,
            <a id="a505184c4e3bf585" href="../R/a505184c4e3bf585.html" target="n" data-glyph="24,2" class="i field">Decimal</a>,
            <a id="f0d67706f70b8f79" href="../R/f0d67706f70b8f79.html" target="n" data-glyph="24,2" class="i field">Double</a>,
            <a id="cc8278fcc0dfd973" href="../R/cc8278fcc0dfd973.html" target="n" data-glyph="24,2" class="i field">Guid</a>,
            <a id="b4a56a3c090485bf" href="../R/b4a56a3c090485bf.html" target="n" data-glyph="24,2" class="i field">Int16</a>,
            <a id="0da6e8bec0acb260" href="../R/0da6e8bec0acb260.html" target="n" data-glyph="24,2" class="i field">Int32</a>,
            <a id="3133b3157842e32b" href="../R/3133b3157842e32b.html" target="n" data-glyph="24,2" class="i field">Int64</a>,
            <a id="856c5b91b3387673" href="../R/856c5b91b3387673.html" target="n" data-glyph="24,2" class="i field">Single</a>,
            <a id="06887a4d6c33e9d5" href="../R/06887a4d6c33e9d5.html" target="n" data-glyph="24,2" class="i field">String</a>,
            <a id="28be68d30a6980be" href="../R/28be68d30a6980be.html" target="n" data-glyph="24,2" class="i field">SByte</a>,
            <a id="5b4bc3b1c17fbc04" href="../R/5b4bc3b1c17fbc04.html" target="n" data-glyph="24,2" class="i field">TimeSpan</a>,
            <a id="106bf3a0817c48f6" href="../R/106bf3a0817c48f6.html" target="n" data-glyph="24,2" class="i field">Type</a>,
            <a id="4cdfe5782d2beef9" href="../R/4cdfe5782d2beef9.html" target="n" data-glyph="24,2" class="i field">UInt16</a>,
            <a id="5572fcae7b5f390c" href="../R/5572fcae7b5f390c.html" target="n" data-glyph="24,2" class="i field">UInt32</a>,
            <a id="a61b8077751ccfed" href="../R/a61b8077751ccfed.html" target="n" data-glyph="24,2" class="i field">UInt64</a>,
            <a id="cc2b10a66cfdf000" href="../R/cc2b10a66cfdf000.html" target="n" data-glyph="24,2" class="i field">Uri</a>,
            <a id="ec68ebde7b1fc140" href="../R/ec68ebde7b1fc140.html" target="n" data-glyph="24,2" class="i field">XDocument</a>,
            <a id="fa291cde3338ef89" href="../R/fa291cde3338ef89.html" target="n" data-glyph="24,2" class="i field">XElement</a>,
            <a id="393699967e069a75" href="../R/393699967e069a75.html" target="n" data-glyph="24,2" class="i field">BinaryData</a>,
            <a id="558b5e3644dc282c" href="../R/558b5e3644dc282c.html" target="n" data-glyph="24,2" class="i field">Binary</a>,
        }
 
        <b>internal static bool</b> <a id="be9b0aea52388c34" href="../R/be9b0aea52388c34.html" target="n" data-glyph="74,1" class="i method">IsBinaryValue</a>(<b>object</b> <span id="r0 rd" class="r0 r">value</span>)
        {
            <b>return</b> (<a href="#7621110b471f0f43" class="t t">StorageType</a>)<a href="#d96d258d4556c979" class="i method">IndexOfStorage</a>(<span class="r0 r">value</span>.<a href="@1@netstandard/A.html#4d73eb225aef8a61" class="i method">GetType</a>()) <b>switch</b>
            {
                <a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#558b5e3644dc282c" class="i field">Binary</a> =&gt; <b>true</b>,
                <a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#393699967e069a75" class="i field">BinaryData</a> =&gt; <b>true</b>,
                <b>_</b> =&gt; <b>false</b>
            };
        }
 
        <b>internal static bool</b> <a id="8963d94122000a9d" href="../R/8963d94122000a9d.html" target="n" data-glyph="74,1" class="i method">TryKeyBinaryToString</a>(<b>object</b> <span id="r1 rd" class="r1 r">binaryValue</span>, <b>out string</b> <span id="r2 rd" class="r2 r">result</span>)
        {
            <b>const</b> <span class="i n">System</span>.<span class="i n">Reflection</span>.<a href="@1@netstandard/A.html#4795caf3b483702d" class="t t">BindingFlags</a> <span id="r3 rd" class="r3 r">Flags</span> = <span class="i n">System</span>.<span class="i n">Reflection</span>.<a href="@1@netstandard/A.html#4795caf3b483702d" class="t t">BindingFlags</a>.<a href="@1@netstandard/A.html#ef2ef39bdfa059df" class="i field">Public</a> | <span class="i n">System</span>.<span class="i n">Reflection</span>.<a href="@1@netstandard/A.html#4795caf3b483702d" class="t t">BindingFlags</a>.<a href="@1@netstandard/A.html#54a14f747b06c614" class="i field">Instance</a> | <span class="i n">System</span>.<span class="i n">Reflection</span>.<a href="@1@netstandard/A.html#4795caf3b483702d" class="t t">BindingFlags</a>.<a href="@1@netstandard/A.html#f9c44802799330f2" class="i field">InvokeMethod</a>;
            <b>byte</b>[] <span id="r4 rd" class="r4 r">bytes</span> = (<b>byte</b>[])<span class="r1 r">binaryValue</span>.<a href="@1@netstandard/A.html#4d73eb225aef8a61" class="i method">GetType</a>().<a href="@1@netstandard/A.html#53cebb3ccbd49b46" class="i method">InvokeMember</a>(<span class="s">&quot;ToArray&quot;</span>, <span class="r3 r">Flags</span>, <b>null</b>, <span class="r1 r">binaryValue</span>, <b>null</b>, <b>null</b> <span class="c">/* ParamModifiers */</span>, <span class="i n">System</span>.<span class="i n">Globalization</span>.<a href="@1@netstandard/A.html#e319c6636909012f" class="t t">CultureInfo</a>.<a href="@1@netstandard/A.html#26ef1c020f0dbb7a" class="i property">InvariantCulture</a>, <b>null</b> <span class="c">/* NamedParams */</span>);
            <b>return</b> <a href="WebConvert.cs.html#c58e1d99741626f5" class="t t">WebConvert</a>.<a href="WebConvert.cs.html#a2138e0e35a40fd6" class="i method">TryKeyPrimitiveToString</a>(<span class="r4 r">bytes</span>, <b>out</b> <span class="r2 r">result</span>);
        }
 
        <b>internal static bool</b> <a id="ea904e4553ae20fe" href="../R/ea904e4553ae20fe.html" target="n" data-glyph="74,1" class="i method">TryKeyPrimitiveToString</a>(<b>object</b> <span id="r5 rd" class="r5 r">value</span>, <b>out string</b> <span id="r6 rd" class="r6 r">result</span>)
        {
            <b>if</b> (<a href="#be9b0aea52388c34" class="i method">IsBinaryValue</a>(<span class="r5 r">value</span>))
            {
                <b>return</b> <a href="#8963d94122000a9d" class="i method">TryKeyBinaryToString</a>(<span class="r5 r">value</span>, <b>out</b> <span class="r6 r">result</span>);
            }
            <span class="c">// Support DateTimeOffset</span>
            <b>if</b> (<span class="r5 r">value</span> <b>is</b> <a href="@1@netstandard/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a>)
            {
                <span class="r5 r">value</span> = ((<a href="@1@netstandard/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a>)<span class="r5 r">value</span>).<a href="@1@netstandard/A.html#ae3e62dcd82c2422" class="i property">UtcDateTime</a>;
            }
            <b>else</b> <b>if</b> (<span class="r5 r">value</span> <b>is</b> <a href="@1@netstandard/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a>?)
            {
                <span class="r5 r">value</span> = ((<a href="@1@netstandard/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a>?)<span class="r5 r">value</span>).<a href="@1@netstandard/A.html#7b38d1fa76071c95" class="i property">Value</a>.<a href="@1@netstandard/A.html#ae3e62dcd82c2422" class="i property">UtcDateTime</a>;
            }
 
            <b>return</b> <a href="WebConvert.cs.html#c58e1d99741626f5" class="t t">WebConvert</a>.<a href="WebConvert.cs.html#a2138e0e35a40fd6" class="i method">TryKeyPrimitiveToString</a>(<span class="r5 r">value</span>, <b>out</b> <span class="r6 r">result</span>);
        }
 
        <b>private static</b> <a href="@1@netstandard/A.html#3d00eeab9feb80f3" class="t t">Type</a>[] <a id="3081e1d2df5cd6ae" href="../R/3081e1d2df5cd6ae.html" target="n" data-glyph="76,1" class="i method">CreateKnownPrimitives</a>()
        {
            <a href="@1@netstandard/A.html#3d00eeab9feb80f3" class="t t">Type</a>[] <span id="r7 rd" class="r7 r">types</span> = <b>new</b> <a href="@1@netstandard/A.html#3d00eeab9feb80f3" class="t t">Type</a>[1 + (<b>int</b>)<a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#558b5e3644dc282c" class="i field">Binary</a>];
            <span class="r7 r">types</span>[(<b>int</b>)<a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#e1f3da0f1107dacd" class="i field">Boolean</a>] = <b>typeof</b>(<b>bool</b>);
            <span class="r7 r">types</span>[(<b>int</b>)<a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#e6e890cff98e31c3" class="i field">Byte</a>] = <b>typeof</b>(<b>byte</b>);
            <span class="r7 r">types</span>[(<b>int</b>)<a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#ee6b7a76b7362918" class="i field">ByteArray</a>] = <b>typeof</b>(<b>byte</b>[]);
            <span class="r7 r">types</span>[(<b>int</b>)<a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#393699967e069a75" class="i field">BinaryData</a>] = <b>typeof</b>(<a href="/System.Memory.Data/A.html#b41210c71e293f88" class="t t">BinaryData</a>);
            <span class="r7 r">types</span>[(<b>int</b>)<a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#f51b6e5ef1fdf123" class="i field">Char</a>] = <b>typeof</b>(<b>char</b>);
            <span class="r7 r">types</span>[(<b>int</b>)<a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#4532d11185ed1540" class="i field">CharArray</a>] = <b>typeof</b>(<b>char</b>[]);
            <span class="r7 r">types</span>[(<b>int</b>)<a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#5ff7eeac026f8e67" class="i field">DateTime</a>] = <b>typeof</b>(<a href="@1@netstandard/A.html#df6b1eba7461813b" class="t t">DateTime</a>);
            <span class="r7 r">types</span>[(<b>int</b>)<a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#d6d511ad98f57b5f" class="i field">DateTimeOffset</a>] = <b>typeof</b>(<a href="@1@netstandard/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a>);
            <span class="r7 r">types</span>[(<b>int</b>)<a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#a505184c4e3bf585" class="i field">Decimal</a>] = <b>typeof</b>(<b>decimal</b>);
            <span class="r7 r">types</span>[(<b>int</b>)<a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#f0d67706f70b8f79" class="i field">Double</a>] = <b>typeof</b>(<b>double</b>);
            <span class="r7 r">types</span>[(<b>int</b>)<a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#cc8278fcc0dfd973" class="i field">Guid</a>] = <b>typeof</b>(<a href="@1@netstandard/A.html#b622ef5f6b76c10a" class="t t">Guid</a>);
            <span class="r7 r">types</span>[(<b>int</b>)<a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#b4a56a3c090485bf" class="i field">Int16</a>] = <b>typeof</b>(<b>short</b>);
            <span class="r7 r">types</span>[(<b>int</b>)<a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#0da6e8bec0acb260" class="i field">Int32</a>] = <b>typeof</b>(<b>int</b>);
            <span class="r7 r">types</span>[(<b>int</b>)<a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#3133b3157842e32b" class="i field">Int64</a>] = <b>typeof</b>(<b>long</b>);
            <span class="r7 r">types</span>[(<b>int</b>)<a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#856c5b91b3387673" class="i field">Single</a>] = <b>typeof</b>(<b>float</b>);
            <span class="r7 r">types</span>[(<b>int</b>)<a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#06887a4d6c33e9d5" class="i field">String</a>] = <b>typeof</b>(<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>);
            <span class="r7 r">types</span>[(<b>int</b>)<a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#28be68d30a6980be" class="i field">SByte</a>] = <b>typeof</b>(<b>sbyte</b>);
            <span class="r7 r">types</span>[(<b>int</b>)<a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#5b4bc3b1c17fbc04" class="i field">TimeSpan</a>] = <b>typeof</b>(<a href="@1@netstandard/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>);
            <span class="r7 r">types</span>[(<b>int</b>)<a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#106bf3a0817c48f6" class="i field">Type</a>] = <b>typeof</b>(<a href="@1@netstandard/A.html#3d00eeab9feb80f3" class="t t">Type</a>);
            <span class="r7 r">types</span>[(<b>int</b>)<a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#4cdfe5782d2beef9" class="i field">UInt16</a>] = <b>typeof</b>(<b>ushort</b>);
            <span class="r7 r">types</span>[(<b>int</b>)<a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#5572fcae7b5f390c" class="i field">UInt32</a>] = <b>typeof</b>(<b>uint</b>);
            <span class="r7 r">types</span>[(<b>int</b>)<a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#a61b8077751ccfed" class="i field">UInt64</a>] = <b>typeof</b>(<b>ulong</b>);
            <span class="r7 r">types</span>[(<b>int</b>)<a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#cc2b10a66cfdf000" class="i field">Uri</a>] = <b>typeof</b>(<a href="@1@netstandard/A.html#991565dd25f47c90" class="t t">Uri</a>);
            <span class="r7 r">types</span>[(<b>int</b>)<a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#ec68ebde7b1fc140" class="i field">XDocument</a>] = <b>typeof</b>(<span class="i n">System</span>.<span class="i n">Xml</span>.<span class="i n">Linq</span>.<a href="@1@netstandard/A.html#3354dac0913e417b" class="t t">XDocument</a>);
            <span class="r7 r">types</span>[(<b>int</b>)<a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#fa291cde3338ef89" class="i field">XElement</a>] = <b>typeof</b>(<span class="i n">System</span>.<span class="i n">Xml</span>.<span class="i n">Linq</span>.<a href="@1@netstandard/A.html#3367036406d1344a" class="t t">XElement</a>);
            <span class="r7 r">types</span>[(<b>int</b>)<a href="#7621110b471f0f43" class="t t">StorageType</a>.<a href="#558b5e3644dc282c" class="i field">Binary</a>] = <b>null</b>;
            <b>return</b> <span class="r7 r">types</span>;
        }
 
        <b>private static int</b> <a id="d96d258d4556c979" href="../R/d96d258d4556c979.html" target="n" data-glyph="76,1" class="i method">IndexOfStorage</a>(<a href="@1@netstandard/A.html#3d00eeab9feb80f3" class="t t">Type</a> <span id="r8 rd" class="r8 r">type</span>)
        {
            <b>int</b> <span id="r9 rd" class="r9 r">index</span> = <a href="#4fe68e5998ab9af3" class="t t">ClientConvert</a>.<a href="#7b4b4b002b5c30b7" class="i method">IndexOfReference</a>(<a href="#4fe68e5998ab9af3" class="t t">ClientConvert</a>.<a href="#6ed435b3f34bcc70" class="i field">s_knownTypes</a>, <span class="r8 r">type</span>);
            <b>return</b> <span class="r9 r">index</span>;
        }
 
        <b>internal static int</b> <a id="7b4b4b002b5c30b7" href="../R/7b4b4b002b5c30b7.html" target="n" data-glyph="74,1" class="i method">IndexOfReference</a>&lt;<span id="r10 rd t" class="r10 r t">T</span>&gt;(<span class="r10 r t">T</span>[] <span id="r11 rd" class="r11 r">array</span>, <span class="r10 r t">T</span> <span id="r12 rd" class="r12 r">value</span>) <b>where</b> <span class="r10 r t">T</span> : <b>class</b>
        {
            <b>for</b> (<b>int</b> <span id="r13 rd" class="r13 r">i</span> = 0; <span class="r13 r">i</span> &lt; <span class="r11 r">array</span>.<a href="@1@netstandard/A.html#42e9b7616956cf94" class="i property">Length</a>; ++<span class="r13 r">i</span>)
            {
                <b>if</b> (<b>object</b>.<a href="@1@netstandard/A.html#4d607d6d56a93c7e" class="i method">ReferenceEquals</a>(<span class="r11 r">array</span>[<span class="r13 r">i</span>], <span class="r12 r">value</span>))
                {
                    <b>return</b> <span class="r13 r">i</span>;
                }
            }
 
            <b>return</b> -1;
        }
    }
}
</pre></td></tr></table></div></body></html>

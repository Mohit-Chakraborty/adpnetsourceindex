<!DOCTYPE html>
<html><head><title>TestConfigurations.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(302);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Azure.Storage.Blobs.ChangeFeed.Samples.Tests/Shared/TestConfigurations.cs" target="_top">Shared\TestConfigurations.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Azure.Storage.Blobs.ChangeFeed.Samples.Tests" target="_top">Azure.Storage.Blobs.ChangeFeed.Samples.Tests.csproj</a> (Azure.Storage.Blobs.ChangeFeed.Samples.Tests)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License.</span>
 
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">IO</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Xml</span>.<span class="i n">Linq</span>;
<b>using</b> <span class="i n">NUnit</span>.<span class="i n">Framework</span>;
 
<b>namespace</b> <span class="i n">Azure</span>.<span class="i n">Storage</span>.<span class="i n">Test</span>
{
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
    <span class="c">///</span><span class="c"> The TestConfigurations lazily loads the XML config file full of Azure</span>
    <span class="c">///</span><span class="c"> Storage tenants to use when executing our tests.</span>
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
    <span class="c">///</span><span class="c"> The TestConfigurations file contains a fixed set of names and a</span>
    <span class="c">///</span><span class="c"> variable list of TenantConfiguration definitions.  Each name refers to</span>
    <span class="c">///</span><span class="c"> a tenant that supports certain functionality (i.e., the OAuth tenant</span>
    <span class="c">///</span><span class="c"> needs to be setup for requests that use AD to authenticate).  It&#39;s</span>
    <span class="c">///</span><span class="c"> possible that each name refers to a unique tenant, but it&#39;s also</span>
    <span class="c">///</span><span class="c"> possible that multiple names will refer to the same tenant (i.e., if</span>
    <span class="c">///</span><span class="c"> you want to use a Premium blob with OAuth enabled as your</span>
    <span class="c">///</span><span class="c"> &quot;TargetTestTenant&quot;, &quot;TargetPremiumBlobTenant&quot;, and &quot;TargetOAuthTenant&quot;</span>
    <span class="c">///</span><span class="c"> simultaneously).</span>
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
    <b>public class</b> <a id="09c438cc2df2e17f" href="../R/09c438cc2df2e17f.html" target="n" data-glyph="0,0" class="t t"><span id="f1125c4a70b4c47c">TestConfigurations</span></a>
    {
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets or sets a mapping of tenant names to definitions.  The</span>
        <span class="c">///</span><span class="c"> Target*TenantName properties define the keys to use with this</span>
        <span class="c">///</span><span class="c"> dictionary.  You should only access the tenants via the GetTenant</span>
        <span class="c">///</span><span class="c"> method that will Assert.Inconclusive if the desired tenant wasn&#39;t</span>
        <span class="c">///</span><span class="c"> defined in this configuration.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private</b> <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="TenantConfiguration.cs.html#62e7bd508929cb2a" class="t t">TenantConfiguration</a>&gt; <a id="212f5c4b65f13e92" href="../R/212f5c4b65f13e92.html" target="n" data-glyph="106,1" class="i property">Tenants</a> { <b>get</b>; <b>set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets or sets a mapping of keyvault names to definitions.  The</span>
        <span class="c">///</span><span class="c"> Target*TenantName properties define the keys to use with this</span>
        <span class="c">///</span><span class="c"> dictionary.  You should only access the tenants via the GetTenant</span>
        <span class="c">///</span><span class="c"> method that will Assert.Inconclusive if the desired tenant wasn&#39;t</span>
        <span class="c">///</span><span class="c"> defined in this configuration.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private</b> <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="KeyVaultConfiguration.cs.html#a2f0fa83941b0b5b" class="t t">KeyVaultConfiguration</a>&gt; <a id="d469bd0cf970a57c" href="../R/d469bd0cf970a57c.html" target="n" data-glyph="106,1" class="i property">KeyVaults</a> { <b>get</b>; <b>set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets the name of the tenant in the Tenants dictionary to use by</span>
        <span class="c">///</span><span class="c"> default for our tests.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private string</b> <a id="3b83f361d554e550" href="../R/3b83f361d554e550.html" target="n" data-glyph="106,1" class="i property">TargetTenantName</a> { <b>get</b>; <b>set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets the name of the tenant in the Tenants dictionary to use for</span>
        <span class="c">///</span><span class="c"> any tests that require Read Access Geo-Redundant Storage to be setup.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private string</b> <a id="a82c0d4eead4b840" href="../R/a82c0d4eead4b840.html" target="n" data-glyph="106,1" class="i property">TargetSecondaryTenantName</a> { <b>get</b>; <b>set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets the name of the tenant in the Tenants dictionary to use for</span>
        <span class="c">///</span><span class="c"> any tests that require Premium SSDs.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private string</b> <a id="18548c81dd08e8b3" href="../R/18548c81dd08e8b3.html" target="n" data-glyph="106,1" class="i property">TargetPremiumBlobTenantName</a> { <b>get</b>; <b>set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets the name of the tenant in the Tenants dictionary to use for</span>
        <span class="c">///</span><span class="c"> any tests that require preview features.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private string</b> <a id="16e189eeefe69386" href="../R/16e189eeefe69386.html" target="n" data-glyph="106,1" class="i property">TargetPreviewBlobTenantName</a> { <b>get</b>; <b>set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets the name of the tenant in the Tenants dictionary to use for</span>
        <span class="c">///</span><span class="c"> any tests that require authentication with Azure AD.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private string</b> <a id="b699b6a715be4652" href="../R/b699b6a715be4652.html" target="n" data-glyph="106,1" class="i property">TargetOAuthTenantName</a> { <b>get</b>; <b>set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets the name of the tenant in the keyvaults dictionary to use for</span>
        <span class="c">///</span><span class="c"> any tests that require integration with key vault.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private string</b> <a id="4a8aa7fc16e7657c" href="../R/4a8aa7fc16e7657c.html" target="n" data-glyph="106,1" class="i property">TargetKeyVaultName</a> { <b>get</b>; <b>set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets the name of the tenant in the Tenants dictionary to use for</span>
        <span class="c">///</span><span class="c"> any tests that require hierarchical namespace.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private string</b> <a id="c2edf055d755346c" href="../R/c2edf055d755346c.html" target="n" data-glyph="106,1" class="i property">TargetHierarchicalNamespaceTenantName</a> { <b>get</b>; <b>set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets the name of the tenant in the Tenants dictionary to use for</span>
        <span class="c">///</span><span class="c"> any tests that require managed disk</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private string</b> <a id="70ec911d6317d6df" href="../R/70ec911d6317d6df.html" target="n" data-glyph="106,1" class="i property">TargetManagedDiskTenantName</a> { <b>get</b>; <b>set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets the name of the tenant in the Tenants dictionary to use for</span>
        <span class="c">///</span><span class="c"> any tests related to blob and container soft delete.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private string</b> <a id="5a60613ba0e792f7" href="../R/5a60613ba0e792f7.html" target="n" data-glyph="106,1" class="i property">TargetSoftDeleteTenantName</a> { <b>get</b>; <b>set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets the name of the tenant in the Tenants dictionary to use for</span>
        <span class="c">///</span><span class="c"> any tests related to premium files.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private string</b> <a id="06b1e0a7e82e2d35" href="../R/06b1e0a7e82e2d35.html" target="n" data-glyph="106,1" class="i property">TargetPremiumFileTenantName</a> { <b>get</b>; <b>set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets the tenant to use by default for our tests.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public static</b> <a href="TenantConfiguration.cs.html#62e7bd508929cb2a" class="t t">TenantConfiguration</a> <a id="de1cfb0ab2714ebc" href="../R/de1cfb0ab2714ebc.html" target="n" data-glyph="102,1" class="i property">DefaultTargetTenant</a> =&gt;
            <a href="#4979899ccbc24f9a" class="i method">GetTenant</a>(<span class="s">&quot;TargetTestTenant&quot;</span>, <a href="#2dff52f35d974050" class="i field">s_configurations</a>.<a href="@0@mscorlib/A.html#606a17645b0dc0ff" class="i property">Value</a>.<a href="#3b83f361d554e550" class="i property">TargetTenantName</a>);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets a tenant to use for any tests that require Read Access</span>
        <span class="c">///</span><span class="c"> Geo-Redundant Storage to be setup.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public static</b> <a href="TenantConfiguration.cs.html#62e7bd508929cb2a" class="t t">TenantConfiguration</a> <a id="feffc9bc1860e759" href="../R/feffc9bc1860e759.html" target="n" data-glyph="102,1" class="i property">DefaultSecondaryTargetTenant</a> =&gt;
            <a href="#4979899ccbc24f9a" class="i method">GetTenant</a>(<span class="s">&quot;TargetSecondaryTestTenant&quot;</span>, <a href="#2dff52f35d974050" class="i field">s_configurations</a>.<a href="@0@mscorlib/A.html#606a17645b0dc0ff" class="i property">Value</a>.<a href="#a82c0d4eead4b840" class="i property">TargetSecondaryTenantName</a>);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets a tenant to use for any tests that require Premium SSDs.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public static</b> <a href="TenantConfiguration.cs.html#62e7bd508929cb2a" class="t t">TenantConfiguration</a> <a id="8b5972f8c7f9f810" href="../R/8b5972f8c7f9f810.html" target="n" data-glyph="102,1" class="i property">DefaultTargetPremiumBlobTenant</a> =&gt;
            <a href="#4979899ccbc24f9a" class="i method">GetTenant</a>(<span class="s">&quot;TargetPremiumBlobTenant&quot;</span>, <a href="#2dff52f35d974050" class="i field">s_configurations</a>.<a href="@0@mscorlib/A.html#606a17645b0dc0ff" class="i property">Value</a>.<a href="#18548c81dd08e8b3" class="i property">TargetPremiumBlobTenantName</a>);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets a tenant that uses preview features for tests that require it.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public static</b> <a href="TenantConfiguration.cs.html#62e7bd508929cb2a" class="t t">TenantConfiguration</a> <a id="26ca17c08deb6203" href="../R/26ca17c08deb6203.html" target="n" data-glyph="102,1" class="i property">DefaultTargetPreviewBlobTenant</a> =&gt;
            <a href="#4979899ccbc24f9a" class="i method">GetTenant</a>(<span class="s">&quot;TargetPreviewBlobTenant&quot;</span>, <a href="#2dff52f35d974050" class="i field">s_configurations</a>.<a href="@0@mscorlib/A.html#606a17645b0dc0ff" class="i property">Value</a>.<a href="#16e189eeefe69386" class="i property">TargetPreviewBlobTenantName</a>);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets a tenant to use for any tests that require authentication with</span>
        <span class="c">///</span><span class="c"> Azure AD.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public static</b> <a href="TenantConfiguration.cs.html#62e7bd508929cb2a" class="t t">TenantConfiguration</a> <a id="99e6fd959b52df5b" href="../R/99e6fd959b52df5b.html" target="n" data-glyph="102,1" class="i property">DefaultTargetOAuthTenant</a> =&gt;
            <a href="#4979899ccbc24f9a" class="i method">GetTenant</a>(<span class="s">&quot;TargetOAuthTenant&quot;</span>, <a href="#2dff52f35d974050" class="i field">s_configurations</a>.<a href="@0@mscorlib/A.html#606a17645b0dc0ff" class="i property">Value</a>.<a href="#b699b6a715be4652" class="i property">TargetOAuthTenantName</a>);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets a keyvault to use for any tests that require keyvault access.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public static</b> <a href="KeyVaultConfiguration.cs.html#a2f0fa83941b0b5b" class="t t">KeyVaultConfiguration</a> <a id="70f148b08e76b6ae" href="../R/../../0000000000.html" target="n" data-glyph="102,1" class="i property">DefaultTargetKeyVault</a> =&gt;
            <a href="#d49462adc1a35662" class="i method">GetKeyVault</a>(<span class="s">&quot;TargetKeyVault&quot;</span>, <a href="#2dff52f35d974050" class="i field">s_configurations</a>.<a href="@0@mscorlib/A.html#606a17645b0dc0ff" class="i property">Value</a>.<a href="#4a8aa7fc16e7657c" class="i property">TargetKeyVaultName</a>);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets a tenant to use for any tests that require hierarchical namespace.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public static</b> <a href="TenantConfiguration.cs.html#62e7bd508929cb2a" class="t t">TenantConfiguration</a> <a id="c214e3ec17dfa9fe" href="../R/c214e3ec17dfa9fe.html" target="n" data-glyph="102,1" class="i property">DefaultTargetHierarchicalNamespaceTenant</a> =&gt;
            <a href="#4979899ccbc24f9a" class="i method">GetTenant</a>(<span class="s">&quot;TargetHierarchicalNamespaceTenant&quot;</span>, <a href="#2dff52f35d974050" class="i field">s_configurations</a>.<a href="@0@mscorlib/A.html#606a17645b0dc0ff" class="i property">Value</a>.<a href="#c2edf055d755346c" class="i property">TargetHierarchicalNamespaceTenantName</a>);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets a tenant to use for any tests that a managed disk account.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public static</b> <a href="TenantConfiguration.cs.html#62e7bd508929cb2a" class="t t">TenantConfiguration</a> <a id="5923b6fe9ee27d19" href="../R/5923b6fe9ee27d19.html" target="n" data-glyph="102,1" class="i property">DefaultTargetManagedDiskTenant</a> =&gt;
            <a href="#4979899ccbc24f9a" class="i method">GetTenant</a>(<span class="s">&quot;TargetManagedDiskTenant&quot;</span>, <a href="#2dff52f35d974050" class="i field">s_configurations</a>.<a href="@0@mscorlib/A.html#606a17645b0dc0ff" class="i property">Value</a>.<a href="#70ec911d6317d6df" class="i property">TargetManagedDiskTenantName</a>);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets a tenant to use for any tests related to blob or container soft delete.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public static</b> <a href="TenantConfiguration.cs.html#62e7bd508929cb2a" class="t t">TenantConfiguration</a> <a id="62edb02a7432aa44" href="../R/62edb02a7432aa44.html" target="n" data-glyph="102,1" class="i property">DefaultTargetSoftDeleteTenant</a> =&gt;
            <a href="#4979899ccbc24f9a" class="i method">GetTenant</a>(<span class="s">&quot;TargetBlobAndContainerSoftDeleteTenant&quot;</span>, <a href="#2dff52f35d974050" class="i field">s_configurations</a>.<a href="@0@mscorlib/A.html#606a17645b0dc0ff" class="i property">Value</a>.<a href="#5a60613ba0e792f7" class="i property">TargetSoftDeleteTenantName</a>);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets a tenant to use for any tests related to premium files.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public static</b> <a href="TenantConfiguration.cs.html#62e7bd508929cb2a" class="t t">TenantConfiguration</a> <a id="723d27e52ecc6e05" href="../R/723d27e52ecc6e05.html" target="n" data-glyph="102,1" class="i property">DefaultPremiumFileTenant</a> =&gt;
            <a href="#4979899ccbc24f9a" class="i method">GetTenant</a>(<span class="s">&quot;TargetPremiumFileTenant&quot;</span>, <a href="#2dff52f35d974050" class="i field">s_configurations</a>.<a href="@0@mscorlib/A.html#606a17645b0dc0ff" class="i property">Value</a>.<a href="#06b1e0a7e82e2d35" class="i property">TargetPremiumFileTenantName</a>);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> When loading our test configuration, we&#39;ll check the</span>
        <span class="c">///</span><span class="c"> AZ_STORAGE_CONFIG_PATH first.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private const string</b> <a id="1f3cb2ff50b11e4d" href="../R/1f3cb2ff50b11e4d.html" target="n" data-glyph="10,1" class="i field">DefaultTestConfigPathEnvironmentVariable</a> = <span class="s">@&quot;AZ_STORAGE_CONFIG_PATH&quot;</span>;
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> When loading our test configuration, we&#39;ll check for a local file</span>
        <span class="c">///</span><span class="c"> named TestConfigurations.xml second.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private const string</b> <a id="a5c436907989e254" href="../R/a5c436907989e254.html" target="n" data-glyph="10,1" class="i field">DefaultTestConfigFilePath</a> = <span class="s">@&quot;TestConfigurations.xml&quot;</span>;
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets or sets the path of the file containing the live test</span>
        <span class="c">///</span><span class="c"> configurations.  This is only used for throwing informative error</span>
        <span class="c">///</span><span class="c"> messages to aid debugging configuration mishaps.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private static string</b> <a id="905f70d3b2f56782" href="../R/905f70d3b2f56782.html" target="n" data-glyph="106,1" class="i property">TestConfigurationsPath</a> { <b>get</b>; <b>set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Lazily load the live test configuraions the first time they&#39;re</span>
        <span class="c">///</span><span class="c"> required.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private static readonly</b> <a href="@0@mscorlib/A.html#8b99c1f377873554" class="t t">Lazy</a>&lt;<a href="#09c438cc2df2e17f" class="t t">TestConfigurations</a>&gt; <a id="2dff52f35d974050" href="../R/2dff52f35d974050.html" target="n" data-glyph="46,1" class="i field">s_configurations</a> =
            <b>new</b> <a href="@0@mscorlib/A.html#c0f7b98bacad370a" class="t constructor">Lazy</a>&lt;<a href="#09c438cc2df2e17f" class="t t">TestConfigurations</a>&gt;(<a href="#baf067cc2fd91d3b" class="i method">LoadTestConfigurations</a>);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Get the live test configuration for a specific tenant type, or</span>
        <span class="c">///</span><span class="c"> stop running the test via Assert.Inconclusive if not found.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r0 r">type</span><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The name of the tenant type (XML element) to get.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r1 r">name</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The name of the tenant.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The live test configuration for a specific tenant type.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>private static</b> <a href="TenantConfiguration.cs.html#62e7bd508929cb2a" class="t t">TenantConfiguration</a> <a id="4979899ccbc24f9a" href="../R/4979899ccbc24f9a.html" target="n" data-glyph="76,1" class="i method">GetTenant</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r0 rd" class="r0 r">type</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1 rd" class="r1 r">name</span>)
        {
            <b>if</b> (!<a href="#2dff52f35d974050" class="i field">s_configurations</a>.<a href="@0@mscorlib/A.html#606a17645b0dc0ff" class="i property">Value</a>.<a href="#212f5c4b65f13e92" class="i property">Tenants</a>.<a href="@0@mscorlib/A.html#6b9f9049901aacea" class="i method">TryGetValue</a>(<span class="r1 r">name</span>, <b>out</b> <a href="TenantConfiguration.cs.html#62e7bd508929cb2a" class="t t">TenantConfiguration</a> <span id="r2 rd" class="r2 r">config</span>))
            {
                <span class="t t">Assert</span>.<span class="i method">Inconclusive</span>(<span class="s">$&quot;</span><span class="s">Live test configuration tenant type &#39;</span>{<span class="r0 r">type</span>}<span class="s">&#39; named &#39;</span>{<span class="r1 r">name</span>}<span class="s">&#39; was not found in file </span>{<a href="#905f70d3b2f56782" class="i property">TestConfigurationsPath</a>}<span class="s">!</span><span class="s">&quot;</span>);
            }
            <b>return</b> <span class="r2 r">config</span>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Get the live test configuration for a specific key vault type, or</span>
        <span class="c">///</span><span class="c"> stop running the test via Assert.Inconclusive if not found.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r3 r">type</span><span class="c">&quot;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The name of the key vault type (XML element) to get.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r4 r">name</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The name of the keyvault.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The live test configuration for a specific tenant type.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>private static</b> <a href="KeyVaultConfiguration.cs.html#a2f0fa83941b0b5b" class="t t">KeyVaultConfiguration</a> <a id="d49462adc1a35662" href="../R/d49462adc1a35662.html" target="n" data-glyph="76,1" class="i method">GetKeyVault</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r3 rd" class="r3 r">type</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r4 rd" class="r4 r">name</span>)
        {
            <b>if</b> (!<a href="#2dff52f35d974050" class="i field">s_configurations</a>.<a href="@0@mscorlib/A.html#606a17645b0dc0ff" class="i property">Value</a>.<a href="#d469bd0cf970a57c" class="i property">KeyVaults</a>.<a href="@0@mscorlib/A.html#6b9f9049901aacea" class="i method">TryGetValue</a>(<span class="r4 r">name</span>, <b>out</b> <a href="KeyVaultConfiguration.cs.html#a2f0fa83941b0b5b" class="t t">KeyVaultConfiguration</a> <span id="r5 rd" class="r5 r">config</span>))
            {
                <span class="t t">Assert</span>.<span class="i method">Inconclusive</span>(<span class="s">$&quot;</span><span class="s">Live test configuration key vault type &#39;</span>{<span class="r3 r">type</span>}<span class="s">&#39; named &#39;</span>{<span class="r4 r">name</span>}<span class="s">&#39; was not found in file </span>{<a href="#905f70d3b2f56782" class="i property">TestConfigurationsPath</a>}<span class="s">!</span><span class="s">&quot;</span>);
            }
            <b>return</b> <span class="r5 r">config</span>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Load the test configurations file from the path pointed to by the</span>
        <span class="c">///</span><span class="c"> AZ_STORAGE_CONFIG_PATH environment variable or the local copy of</span>
        <span class="c">///</span><span class="c"> the TestConfigurations.xml if present.  If we fail to find or load</span>
        <span class="c">///</span><span class="c"> the test configurations, we&#39;ll stop running the test</span>
        <span class="c">///</span><span class="c"> via Assert.Inconclusive.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">The test configurations.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>private static</b> <a href="#09c438cc2df2e17f" class="t t">TestConfigurations</a> <a id="baf067cc2fd91d3b" href="../R/baf067cc2fd91d3b.html" target="n" data-glyph="76,1" class="i method">LoadTestConfigurations</a>()
        {
            <span class="c">// Get the live test configurations path</span>
            <a href="#905f70d3b2f56782" class="i property">TestConfigurationsPath</a> = <a href="@0@mscorlib/A.html#7d2f1469d916fc63" class="t t">Environment</a>.<a href="@0@mscorlib/A.html#3956c71d4fc09576" class="i method">GetEnvironmentVariable</a>(<a href="#1f3cb2ff50b11e4d" class="i field">DefaultTestConfigPathEnvironmentVariable</a>);
            <b>if</b> (<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#23a8597f842071f4" class="i method">IsNullOrEmpty</a>(<a href="#905f70d3b2f56782" class="i property">TestConfigurationsPath</a>) || !<a href="@0@mscorlib/A.html#1c7421e464f67b7e" class="t t">File</a>.<a href="@0@mscorlib/A.html#3360368484a9f131" class="i method">Exists</a>(<a href="#905f70d3b2f56782" class="i property">TestConfigurationsPath</a>))
            {
                <a href="#905f70d3b2f56782" class="i property">TestConfigurationsPath</a> = <a href="@0@mscorlib/A.html#090eca8621a248ee" class="t t">Path</a>.<a href="@0@mscorlib/A.html#2d7263f86a526264" class="i method">Combine</a>(<span class="t t">TestContext</span>.<span class="i property">CurrentContext</span>.<span class="i property">TestDirectory</span>, <a href="#a5c436907989e254" class="i field">DefaultTestConfigFilePath</a>);
                <b>if</b> (<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#23a8597f842071f4" class="i method">IsNullOrEmpty</a>(<a href="#905f70d3b2f56782" class="i property">TestConfigurationsPath</a>) || !<a href="@0@mscorlib/A.html#1c7421e464f67b7e" class="t t">File</a>.<a href="@0@mscorlib/A.html#3360368484a9f131" class="i method">Exists</a>(<a href="#905f70d3b2f56782" class="i property">TestConfigurationsPath</a>))
                {
                    <span class="t t">Assert</span>.<span class="i method">Inconclusive</span>(<span class="s">$&quot;</span><span class="s">Live test configuration not found at file </span>{<a href="#905f70d3b2f56782" class="i property">TestConfigurationsPath</a>}<span class="s">!</span><span class="s">&quot;</span>);
                }
            }
 
            <span class="c">// Load the live test configurations</span>
            <b>try</b>
            {
                <b>return</b> <a href="#14f2e26c78a3e9d9" class="i method">ReadFromXml</a>(<a href="@0@System.Xml.Linq/A.html#3354dac0913e417b" class="t t">XDocument</a>.<a href="@0@System.Xml.Linq/A.html#8a0ff89671e31a9d" class="i method">Load</a>(<a href="#905f70d3b2f56782" class="i property">TestConfigurationsPath</a>));
            }
            <b>catch</b> (<a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a> <span id="r6 rd" class="r6 r">ex</span>)
            {
                <span class="t t">Assert</span>.<span class="i method">Inconclusive</span>(<span class="s">$&quot;</span><span class="s">Live test configuration failed to load from file </span>{<a href="#905f70d3b2f56782" class="i property">TestConfigurationsPath</a>}<span class="s">!\n</span>{<span class="r6 r">ex</span>.<a href="@0@mscorlib/A.html#e2e19f4ed8da81aa" class="i method">ToString</a>()}<span class="s">&quot;</span>);
                <b>return</b> <b>null</b>;
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Parse the test configurations XML.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r7 r">doc</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The root of the XML document.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">The test configurations.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>private static</b> <a href="#09c438cc2df2e17f" class="t t">TestConfigurations</a> <a id="14f2e26c78a3e9d9" href="../R/14f2e26c78a3e9d9.html" target="n" data-glyph="76,1" class="i method">ReadFromXml</a>(<a href="@0@System.Xml.Linq/A.html#3354dac0913e417b" class="t t">XDocument</a> <span id="r7 rd" class="r7 r">doc</span>)
        {
            <a href="@0@System.Xml.Linq/A.html#3367036406d1344a" class="t t">XElement</a> <span id="r8 rd" class="r8 r">config</span> = <span class="r7 r">doc</span>.<a href="@0@System.Xml.Linq/A.html#9c55392aa48852a0" class="i method">Element</a>(<span class="s">&quot;TestConfigurations&quot;</span>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <a id="5fdc4dd5b5c84363" href="../R/5fdc4dd5b5c84363.html" target="n" data-glyph="76,2" class="i method">Get</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r9 rd" class="r9 r">name</span>) =&gt; (<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>)<span class="r8 r">config</span>.<a href="@0@System.Xml.Linq/A.html#9c55392aa48852a0" class="i method">Element</a>(<span class="r9 r">name</span>);
            <b>return</b> <b>new</b> <a href="#09c438cc2df2e17f" class="t constructor">TestConfigurations</a>
            {
                <a href="#3b83f361d554e550" class="i property">TargetTenantName</a> = <a href="#5fdc4dd5b5c84363" class="i method">Get</a>(<span class="s">&quot;TargetTestTenant&quot;</span>),
                <a href="#a82c0d4eead4b840" class="i property">TargetSecondaryTenantName</a> = <a href="#5fdc4dd5b5c84363" class="i method">Get</a>(<span class="s">&quot;TargetSecondaryTestTenant&quot;</span>),
                <a href="#18548c81dd08e8b3" class="i property">TargetPremiumBlobTenantName</a> = <a href="#5fdc4dd5b5c84363" class="i method">Get</a>(<span class="s">&quot;TargetPremiumBlobTenant&quot;</span>),
                <a href="#16e189eeefe69386" class="i property">TargetPreviewBlobTenantName</a> = <a href="#5fdc4dd5b5c84363" class="i method">Get</a>(<span class="s">&quot;TargetPreviewBlobTenant&quot;</span>),
                <a href="#b699b6a715be4652" class="i property">TargetOAuthTenantName</a> = <a href="#5fdc4dd5b5c84363" class="i method">Get</a>(<span class="s">&quot;TargetOAuthTenant&quot;</span>),
                <a href="#4a8aa7fc16e7657c" class="i property">TargetKeyVaultName</a> = <a href="#5fdc4dd5b5c84363" class="i method">Get</a>(<span class="s">&quot;TargetKeyVault&quot;</span>),
                <a href="#c2edf055d755346c" class="i property">TargetHierarchicalNamespaceTenantName</a> = <a href="#5fdc4dd5b5c84363" class="i method">Get</a>(<span class="s">&quot;TargetHierarchicalNamespaceTenant&quot;</span>),
                <a href="#70ec911d6317d6df" class="i property">TargetManagedDiskTenantName</a> = <a href="#5fdc4dd5b5c84363" class="i method">Get</a>(<span class="s">&quot;TargetManagedDiskTenant&quot;</span>),
                <a href="#5a60613ba0e792f7" class="i property">TargetSoftDeleteTenantName</a> = <a href="#5fdc4dd5b5c84363" class="i method">Get</a>(<span class="s">&quot;TargetBlobAndContainerSoftDeleteTenant&quot;</span>),
                <a href="#06b1e0a7e82e2d35" class="i property">TargetPremiumFileTenantName</a> = <a href="#5fdc4dd5b5c84363" class="i method">Get</a>(<span class="s">&quot;TargetPremiumFileTenant&quot;</span>),
                <a href="#212f5c4b65f13e92" class="i property">Tenants</a> =
                    <span class="r8 r">config</span>.<a href="@0@System.Xml.Linq/A.html#9c55392aa48852a0" class="i method">Element</a>(<span class="s">&quot;TenantConfigurations&quot;</span>).<a href="@0@System.Xml.Linq/A.html#7117b3fee01458b8" class="i method">Elements</a>(<span class="s">&quot;TenantConfiguration&quot;</span>)
                    .<a href="@0@System.Core/A.html#5c652c53e80df013" class="i method">Select</a>(<a href="TenantConfiguration.cs.html#62e7bd508929cb2a" class="t t">TenantConfiguration</a>.<a href="TenantConfiguration.cs.html#2e0818bd86cb9234" class="i method">Parse</a>)
                    .<a href="@0@System.Core/A.html#6a6ba9b34e599783" class="i method">ToDictionary</a>(<span id="r10 rd" class="r10 r">tenant</span> =&gt; <span class="r10 r">tenant</span>.<a href="TenantConfiguration.cs.html#79e629582af207e9" class="i property">TenantName</a>),
                <a href="#d469bd0cf970a57c" class="i property">KeyVaults</a> =
                    <span class="r8 r">config</span>.<a href="@0@System.Xml.Linq/A.html#9c55392aa48852a0" class="i method">Element</a>(<span class="s">&quot;KeyVaultConfigurations&quot;</span>).<a href="@0@System.Xml.Linq/A.html#7117b3fee01458b8" class="i method">Elements</a>(<span class="s">&quot;KeyVaultConfiguration&quot;</span>)
                    .<a href="@0@System.Core/A.html#5c652c53e80df013" class="i method">Select</a>(<a href="KeyVaultConfiguration.cs.html#a2f0fa83941b0b5b" class="t t">KeyVaultConfiguration</a>.<a href="KeyVaultConfiguration.cs.html#976f4b059d850d42" class="i method">Parse</a>)
                    .<a href="@0@System.Core/A.html#6a6ba9b34e599783" class="i method">ToDictionary</a>(<span id="r11 rd" class="r11 r">keyvault</span> =&gt; <span class="r11 r">keyvault</span>.<a href="KeyVaultConfiguration.cs.html#9ca99e9c37e17c34" class="i property">VaultName</a>)
            };
        }
    }
}
</pre></td></tr></table></div></body></html>

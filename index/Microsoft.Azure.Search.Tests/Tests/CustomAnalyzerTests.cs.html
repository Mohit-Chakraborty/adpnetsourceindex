<!DOCTYPE html>
<html><head><title>CustomAnalyzerTests.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(835);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Microsoft.Azure.Search.Tests/Tests/CustomAnalyzerTests.cs" target="_top">Tests\CustomAnalyzerTests.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Microsoft.Azure.Search.Tests" target="_top">Microsoft.Azure.Search\tests\Microsoft.Azure.Search.Tests.csproj</a> (Microsoft.Azure.Search.Tests)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License. See License.txt in the project root for</span>
<span class="c">// license information.</span>
 
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Globalization</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Net</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Reflection</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Search</span>.<span class="i">Models</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Search</span>.<span class="i n">Tests</span>.<span class="i n">Utilities</span>;
<b>using</b> <span class="i n">Xunit</span>;
<b>using</b> <span class="i">Index</span> = <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Search</span>.<span class="i">Models</span>.<span class="i">Index</span>;
 
<b>namespace</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Search</span>.<span class="i n">Tests</span>
{
    <b>public sealed class</b> <a id="38617ed178f4eb41" href="../R/../../0000000000.html" target="n" data-glyph="0,0" class="t t"><span id="05ba9b476246dc60">CustomAnalyzerTests</span></a> : <a href="/Search.Management.Tests/A.html#47a970d62ba7b427" class="t t">SearchTestBase</a>&lt;<a href="../Utilities/IndexFixture.cs.html#f6cdb0672aa60284" class="t t">IndexFixture</a>&gt;
    {
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="a58ae5cb5d261ad9" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanSearchWithCustomAnalyzer</a>()
        {
            <span class="i">Run</span>(() =&gt;
            {
                <b>const string</b> <span id="r0 rd" class="r0 r">CustomAnalyzerName</span> = <span class="s">&quot;my_email_analyzer&quot;</span>;
                <b>const string</b> <span id="r1 rd" class="r1 r">CustomCharFilterName</span> = <span class="s">&quot;my_email_filter&quot;</span>;
 
                <span class="i">Index</span> <span id="r2 rd" class="r2 r">index</span> = <b>new</b> <span class="i">Index</span>()
                {
                    <span class="i">Name</span> = <a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(),
                    <span class="i">Fields</span> = <b>new</b>[]
                    {
                        <b>new</b> <span class="i">Field</span>(<span class="s">&quot;id&quot;</span>, <span class="i">DataType</span>.<span class="i">String</span>) { <span class="i">IsKey</span> = <b>true</b> },
                        <b>new</b> <span class="i">Field</span>(<span class="s">&quot;message&quot;</span>, (<span class="i">AnalyzerName</span>)<span class="r0 r">CustomAnalyzerName</span>) { <span class="i">IsSearchable</span> = <b>true</b> }
                    },
                    <span class="i">Analyzers</span> = <b>new</b>[]
                    {
                        <b>new</b> <span class="i">CustomAnalyzer</span>()
                        {
                            <span class="i">Name</span> = <span class="r0 r">CustomAnalyzerName</span>,
                            <span class="i">Tokenizer</span> = <span class="i">TokenizerName</span>.<span class="i">Standard</span>,
                            <span class="i">CharFilters</span> = <b>new</b>[] { (<span class="i">CharFilterName</span>)<span class="r1 r">CustomCharFilterName</span> }
                        }
                    },
                    <span class="i">CharFilters</span> = <b>new</b>[] { <b>new</b> <span class="i">PatternReplaceCharFilter</span>(<span class="r1 r">CustomCharFilterName</span>, <span class="s">&quot;@&quot;</span>, <span class="s">&quot;_&quot;</span>) }
                };
 
                <a href="/Search.Management.Tests/A.html#879894590f9e382d" class="i property">Data</a>.<a href="../Utilities/SearchServiceFixtureExtensions.cs.html#f4e5d5c8349136d3" class="i method">GetSearchServiceClient</a>().<span class="i">Indexes</span>.<span class="i">Create</span>(<span class="r2 r">index</span>);
 
                <span class="i">SearchIndexClient</span> <span id="r3 rd" class="r3 r">indexClient</span> = <a href="/Search.Management.Tests/A.html#879894590f9e382d" class="i property">Data</a>.<span class="i">GetSearchIndexClient</span>(<span class="r2 r">index</span>.<span class="i">Name</span>);
 
                <b>var</b> <span id="r4 rd" class="r4 r">documents</span> = <b>new</b>[]
                {
                    <b>new</b> <span class="i">Document</span>() { { <span class="s">&quot;id&quot;</span>, <span class="s">&quot;1&quot;</span> }, { <span class="s">&quot;message&quot;</span>, <span class="s">&quot;My email is someone@somewhere.something.&quot;</span> } },
                    <b>new</b> <span class="i">Document</span>() { { <span class="s">&quot;id&quot;</span>, <span class="s">&quot;2&quot;</span> }, { <span class="s">&quot;message&quot;</span>, <span class="s">&quot;His email is someone@nowhere.nothing.&quot;</span> } },
                };
 
                <span class="r3 r">indexClient</span>.<span class="i">Documents</span>.<span class="i">Index</span>(<span class="i">IndexBatch</span>.<span class="i">Upload</span>(<span class="r4 r">documents</span>));
                <a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">WaitForIndexing</span>();
 
                <span class="i">DocumentSearchResult</span>&lt;<span class="i">Document</span>&gt; <span id="r5 rd" class="r5 r">result</span> = <span class="r3 r">indexClient</span>.<span class="i">Documents</span>.<span class="i">Search</span>(<span class="s">&quot;someone@somewhere.something&quot;</span>);
 
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;1&quot;</span>, <span class="r5 r">result</span>.<span class="i">Results</span>.<span class="i">Single</span>().<span class="i">Document</span>[<span class="s">&quot;id&quot;</span>]);
            });
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="a3906e0a9ebd47f4" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanUseAllAnalyzerNamesInIndexDefinition</a>()
        {
            <span class="i">Run</span>(() =&gt;
            {
                <span class="i">SearchServiceClient</span> <span id="r6 rd" class="r6 r">client</span> = <a href="/Search.Management.Tests/A.html#879894590f9e382d" class="i property">Data</a>.<a href="../Utilities/SearchServiceFixtureExtensions.cs.html#f4e5d5c8349136d3" class="i method">GetSearchServiceClient</a>();
 
                <span class="i">Index</span> <span id="r7 rd" class="r7 r">index</span> =
                    <b>new</b> <span class="i">Index</span>()
                    {
                        <span class="i">Name</span> = <a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(),
                        <span class="i">Fields</span> = <b>new</b>[] { <b>new</b> <span class="i">Field</span>(<span class="s">&quot;id&quot;</span>, <span class="i">DataType</span>.<span class="i">String</span>) { <span class="i">IsKey</span> = <b>true</b> } }.<a href="@0@System.Core/A.html#e276d6892241255b" class="i method">ToList</a>()
                    };
 
                <span class="i">AnalyzerName</span>[] <span id="r8 rd" class="r8 r">allAnalyzers</span> = <a href="#5f13991710b971ae" class="i method">GetAllExtensibleEnumValues</a>&lt;<span class="i">AnalyzerName</span>&gt;();
 
                <b>int</b> <span id="r9 rd" class="r9 r">fieldNumber</span> = 0;
 
                <span class="c">// All analyzer names can be set on the analyzer property.</span>
                <b>for</b> (<b>int</b> <span id="r10 rd" class="r10 r">i</span> = 0; <span class="r10 r">i</span> &lt; <span class="r8 r">allAnalyzers</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>; <span class="r10 r">i</span>++)
                {
                    <span class="i">DataType</span> <span id="r11 rd" class="r11 r">fieldType</span> = (<span class="r10 r">i</span> % 2 == 0) ? <span class="i">DataType</span>.<span class="i">String</span> : <span class="i">DataType</span>.<span class="i">Collection</span>(<span class="i">DataType</span>.<span class="i">String</span>);
                    <span class="r7 r">index</span>.<span class="i">Fields</span>.<span class="i">Add</span>(<b>new</b> <span class="i">Field</span>(<span class="s">$&quot;</span><span class="s">field</span>{<span class="r9 r">fieldNumber</span>++}<span class="s">&quot;</span>, <span class="r11 r">fieldType</span>, <span class="r8 r">allAnalyzers</span>[<span class="r10 r">i</span>]));
                }
 
                <span class="c">// Only non-language analyzer names can be set on the searchAnalyzer and indexAnalyzer properties.</span>
                <span class="c">// ASSUMPTION: Only language analyzers end in .lucene or .microsoft.</span>
                <b>var</b> <span id="r12 rd" class="r12 r">allNonLanguageAnalyzers</span> =
                    <span class="r8 r">allAnalyzers</span>.<a href="@0@System.Core/A.html#e73922753675387a" class="i method">Where</a>(<span id="r13 rd" class="r13 r">a</span> =&gt; !<span class="r13 r">a</span>.<span class="i">ToString</span>().<span class="i">EndsWith</span>(<span class="s">&quot;.lucene&quot;</span>) &amp;&amp; !<span class="r13 r">a</span>.<span class="i">ToString</span>().<span class="i">EndsWith</span>(<span class="s">&quot;.microsoft&quot;</span>)).<a href="@0@System.Core/A.html#783a052330e7d48d" class="i method">ToArray</a>();
 
                <b>for</b> (<b>int</b> <span id="r14 rd" class="r14 r">i</span> = 0; <span class="r14 r">i</span> &lt; <span class="r12 r">allNonLanguageAnalyzers</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>; <span class="r14 r">i</span>++)
                {
                    <span class="i">DataType</span> <span id="r15 rd" class="r15 r">fieldType</span> = (<span class="r14 r">i</span> % 2 == 0) ? <span class="i">DataType</span>.<span class="i">String</span> : <span class="i">DataType</span>.<span class="i">Collection</span>(<span class="i">DataType</span>.<span class="i">String</span>);
 
                    <b>var</b> <span id="r16 rd" class="r16 r">field</span> =
                        <b>new</b> <span class="i">Field</span>(<span class="s">$&quot;</span><span class="s">field</span>{<span class="r9 r">fieldNumber</span>++}<span class="s">&quot;</span>, <span class="r15 r">fieldType</span>)
                        {
                            <span class="i">IsSearchable</span> = <b>true</b>,
                            <span class="i">SearchAnalyzer</span> = <span class="r12 r">allNonLanguageAnalyzers</span>[<span class="r14 r">i</span>],
                            <span class="i">IndexAnalyzer</span> = <span class="r12 r">allNonLanguageAnalyzers</span>[<span class="r14 r">i</span>]
                        };
 
                    <span class="r7 r">index</span>.<span class="i">Fields</span>.<span class="i">Add</span>(<span class="r16 r">field</span>);
                }
 
                <span class="r6 r">client</span>.<span class="i">Indexes</span>.<span class="i">Create</span>(<span class="r7 r">index</span>);
            });
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="086d294293bbc88b" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanAnalyze</a>()
        {
            <span class="i">Run</span>(() =&gt;
            {
                <span class="i">SearchServiceClient</span> <span id="r17 rd" class="r17 r">client</span> = <a href="/Search.Management.Tests/A.html#879894590f9e382d" class="i property">Data</a>.<a href="../Utilities/SearchServiceFixtureExtensions.cs.html#f4e5d5c8349136d3" class="i method">GetSearchServiceClient</a>();
 
                <span class="i">Index</span> <span id="r18 rd" class="r18 r">index</span> = <a href="#501b93f2a24943cd" class="i method">CreateTestIndex</a>();
                <span class="r17 r">client</span>.<span class="i">Indexes</span>.<span class="i">Create</span>(<span class="r18 r">index</span>);
 
                <b>var</b> <span id="r19 rd" class="r19 r">request</span> = <b>new</b> <span class="i">AnalyzeRequest</span>()
                {
                    <span class="i">Text</span> = <span class="s">&quot;One two&quot;</span>,
                    <span class="i">Analyzer</span> = <span class="i">AnalyzerName</span>.<span class="i">Whitespace</span>
                };
 
                <span class="i">AnalyzeResult</span> <span id="r20 rd" class="r20 r">result</span> = <span class="r17 r">client</span>.<span class="i">Indexes</span>.<span class="i">Analyze</span>(<span class="r18 r">index</span>.<span class="i">Name</span>, <span class="r19 r">request</span>);
 
                <span class="i">Assert</span>.<span class="i">Equal</span>(2, <span class="r20 r">result</span>.<span class="i">Tokens</span>.<span class="i">Count</span>);
                <span class="i">AssertTokenInfoEqual</span>(<span class="s">&quot;One&quot;</span>, <span class="i">expectedStartOffset</span>: 0, <span class="i">expectedEndOffset</span>: 3, <span class="i">expectedPosition</span>: 0, <span class="i">actual</span>: <span class="r20 r">result</span>.<span class="i">Tokens</span>[0]);
                <span class="i">AssertTokenInfoEqual</span>(<span class="s">&quot;two&quot;</span>, <span class="i">expectedStartOffset</span>: 4, <span class="i">expectedEndOffset</span>: 7, <span class="i">expectedPosition</span>: 1, <span class="i">actual</span>: <span class="r20 r">result</span>.<span class="i">Tokens</span>[1]);
 
                <span class="r19 r">request</span> = <b>new</b> <span class="i">AnalyzeRequest</span>()
                {
                    <span class="i">Text</span> = <span class="s">&quot;One&#39;s &lt;two/&gt;&quot;</span>,
                    <span class="i">Tokenizer</span> = <span class="i">TokenizerName</span>.<span class="i">Whitespace</span>,
                    <span class="i">TokenFilters</span> = <b>new</b>[] { <span class="i">TokenFilterName</span>.<span class="i">Apostrophe</span> },
                    <span class="i">CharFilters</span> = <b>new</b>[] { <span class="i">CharFilterName</span>.<span class="i">HtmlStrip</span> }
                };
 
                <span class="r20 r">result</span> = <span class="r17 r">client</span>.<span class="i">Indexes</span>.<span class="i">Analyze</span>(<span class="r18 r">index</span>.<span class="i">Name</span>, <span class="r19 r">request</span>);
 
                <span class="i">Assert</span>.<span class="i">Equal</span>(1, <span class="r20 r">result</span>.<span class="i">Tokens</span>.<span class="i">Count</span>);
 
                <span class="c">// End offset is based on the original token, not the one emitted by the filters.</span>
                <span class="i">AssertTokenInfoEqual</span>(<span class="s">&quot;One&quot;</span>, <span class="i">expectedStartOffset</span>: 0, <span class="i">expectedEndOffset</span>: 5, <span class="i">expectedPosition</span>: 0, <span class="i">actual</span>: <span class="r20 r">result</span>.<span class="i">Tokens</span>[0]);
            });
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="e17c8b06e1b748f2" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanAnalyzeWithAllPossibleNames</a>()
        {
            <span class="i">Run</span>(() =&gt;
            {
                <span class="i">SearchServiceClient</span> <span id="r21 rd" class="r21 r">client</span> = <a href="/Search.Management.Tests/A.html#879894590f9e382d" class="i property">Data</a>.<a href="../Utilities/SearchServiceFixtureExtensions.cs.html#f4e5d5c8349136d3" class="i method">GetSearchServiceClient</a>();
 
                <span class="i">Index</span> <span id="r22 rd" class="r22 r">index</span> = <a href="#501b93f2a24943cd" class="i method">CreateTestIndex</a>();
                <span class="r21 r">client</span>.<span class="i">Indexes</span>.<span class="i">Create</span>(<span class="r22 r">index</span>);
 
                <span class="i">AnalyzerName</span>[] <span id="r23 rd" class="r23 r">allAnalyzerNames</span> = <a href="#5f13991710b971ae" class="i method">GetAllExtensibleEnumValues</a>&lt;<span class="i">AnalyzerName</span>&gt;();
 
                <b>var</b> <span id="r24 rd" class="r24 r">requests</span> = <span class="r23 r">allAnalyzerNames</span>.<span class="i">Select</span>(<span id="r25 rd" class="r25 r">an</span> =&gt; <b>new</b> <span class="i">AnalyzeRequest</span>() { <span class="i">Text</span> = <span class="s">&quot;One two&quot;</span>, <span class="i">Analyzer</span> = <span class="r25 r">an</span> });
 
                <b>foreach</b> (<b>var</b> <span id="r26 rd" class="r26 r">req</span> <b>in</b> <span class="r24 r">requests</span>)
                {
                    <span class="r21 r">client</span>.<span class="i">Indexes</span>.<span class="i">Analyze</span>(<span class="r22 r">index</span>.<span class="i">Name</span>, <span class="r26 r">req</span>);
                }
 
                <span class="i">TokenizerName</span>[] <span id="r27 rd" class="r27 r">allTokenizerNames</span> = <a href="#5f13991710b971ae" class="i method">GetAllExtensibleEnumValues</a>&lt;<span class="i">TokenizerName</span>&gt;();
                <span class="r24 r">requests</span> = <span class="r27 r">allTokenizerNames</span>.<span class="i">Select</span>(<span id="r28 rd" class="r28 r">tn</span> =&gt; <b>new</b> <span class="i">AnalyzeRequest</span>() { <span class="i">Text</span> = <span class="s">&quot;One two&quot;</span>, <span class="i">Tokenizer</span> = <span class="r28 r">tn</span> });
 
                <b>foreach</b> (<b>var</b> <span id="r29 rd" class="r29 r">req</span> <b>in</b> <span class="r24 r">requests</span>)
                {
                    <span class="r21 r">client</span>.<span class="i">Indexes</span>.<span class="i">Analyze</span>(<span class="r22 r">index</span>.<span class="i">Name</span>, <span class="r29 r">req</span>);
                }
 
                <span class="i">TokenFilterName</span>[] <span id="r30 rd" class="r30 r">allTokenFilterNames</span> = <a href="#5f13991710b971ae" class="i method">GetAllExtensibleEnumValues</a>&lt;<span class="i">TokenFilterName</span>&gt;();
                <span class="i">CharFilterName</span>[] <span id="r31 rd" class="r31 r">allCharFilterNames</span> = <a href="#5f13991710b971ae" class="i method">GetAllExtensibleEnumValues</a>&lt;<span class="i">CharFilterName</span>&gt;();
 
                <b>var</b> <span id="r32 rd" class="r32 r">request</span> =
                    <b>new</b> <span class="i">AnalyzeRequest</span>(
                        <span class="s">&quot;One two&quot;</span>,
                        <span class="i">tokenizer</span>: <span class="i">TokenizerName</span>.<span class="i">Whitespace</span>,
                        <span class="i">tokenFilters</span>: <span class="r30 r">allTokenFilterNames</span>,
                        <span class="i">charFilters</span>: <span class="r31 r">allCharFilterNames</span>);
 
                <span class="r21 r">client</span>.<span class="i">Indexes</span>.<span class="i">Analyze</span>(<span class="r22 r">index</span>.<span class="i">Name</span>, <span class="r32 r">request</span>);
            });
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="f39b00adfb86c5fe" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">AddingCustomAnalyzerThrowsCloudExceptionByDefault</a>()
        {
            <span class="i">Run</span>(() =&gt;
            {
                <span class="i">SearchServiceClient</span> <span id="r33 rd" class="r33 r">client</span> = <a href="/Search.Management.Tests/A.html#879894590f9e382d" class="i property">Data</a>.<a href="../Utilities/SearchServiceFixtureExtensions.cs.html#f4e5d5c8349136d3" class="i method">GetSearchServiceClient</a>();
 
                <span class="i">Index</span> <span id="r34 rd" class="r34 r">index</span> = <a href="#501b93f2a24943cd" class="i method">CreateTestIndex</a>();
                <span class="r34 r">index</span>.<span class="i">Analyzers</span> = <b>new</b> <a href="@0@mscorlib/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<span class="i">Analyzer</span>&gt;() { <b>new</b> <span class="i">StopAnalyzer</span>(<span class="s">&quot;a1&quot;</span>) };
 
                <span class="r33 r">client</span>.<span class="i">Indexes</span>.<span class="i">Create</span>(<span class="r34 r">index</span>);
 
                <span class="r34 r">index</span>.<span class="i">Analyzers</span>.<span class="i">Add</span>(<b>new</b> <span class="i">StopAnalyzer</span>(<span class="s">&quot;a2&quot;</span>));
 
                <a href="../Utilities/SearchAssert.cs.html#166eadd17fbab75c" class="t t">SearchAssert</a>.<a href="../Utilities/SearchAssert.cs.html#82d140c2bb9fa155" class="i method">ThrowsCloudException</a>(() =&gt; <span class="r33 r">client</span>.<span class="i">Indexes</span>.<span class="i">CreateOrUpdate</span>(<span class="r34 r">index</span>), <a href="@0@System/A.html#9b95c882b40ef96e" class="t t">HttpStatusCode</a>.<a href="@0@System/A.html#813537f308d3a0ef" class="i field">BadRequest</a>);
            });
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="503cd10193312377" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanAddCustomAnalyzerWithIndexDowntime</a>()
        {
            <span class="i">Run</span>(() =&gt;
            {
                <span class="i">SearchServiceClient</span> <span id="r35 rd" class="r35 r">client</span> = <a href="/Search.Management.Tests/A.html#879894590f9e382d" class="i property">Data</a>.<a href="../Utilities/SearchServiceFixtureExtensions.cs.html#f4e5d5c8349136d3" class="i method">GetSearchServiceClient</a>();
 
                <span class="i">Index</span> <span id="r36 rd" class="r36 r">index</span> = <a href="#501b93f2a24943cd" class="i method">CreateTestIndex</a>();
                <span class="r36 r">index</span>.<span class="i">Analyzers</span> = <b>new</b> <a href="@0@mscorlib/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<span class="i">Analyzer</span>&gt;() { <b>new</b> <span class="i">StopAnalyzer</span>(<span class="s">&quot;a1&quot;</span>) };
 
                <span class="r35 r">client</span>.<span class="i">Indexes</span>.<span class="i">Create</span>(<span class="r36 r">index</span>);
 
                <span class="r36 r">index</span>.<span class="i">Analyzers</span>.<span class="i">Add</span>(<b>new</b> <span class="i">StopAnalyzer</span>(<span class="s">&quot;a2&quot;</span>));
 
                <span class="i">Index</span> <span id="r37 rd" class="r37 r">updatedIndex</span> = <span class="r35 r">client</span>.<span class="i">Indexes</span>.<span class="i">CreateOrUpdate</span>(<span class="r36 r">index</span>, <span class="i">allowIndexDowntime</span>: <b>true</b>);
 
                <a href="#e222e659e2a65227" class="i method">AssertAnalysisComponentsEqual</a>(<span class="r36 r">index</span>, <span class="r37 r">updatedIndex</span>);
            });
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="38ab9e281e5ebaf9" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanCreateAllAnalysisComponents</a>()
        {
            <span class="i">Run</span>(() =&gt;
            {
                <span class="c">// Declare some custom component names to use with CustomAnalyzer. All other names will be randomly generated.</span>
                <b>const string</b> <span id="r38 rd" class="r38 r">CustomTokenizerName</span> = <span class="s">&quot;my_tokenizer&quot;</span>;
                <b>const string</b> <span id="r39 rd" class="r39 r">CustomTokenFilterName</span> = <span class="s">&quot;my_tokenfilter&quot;</span>;
                <b>const string</b> <span id="r40 rd" class="r40 r">CustomCharFilterName</span> = <span class="s">&quot;my_charfilter&quot;</span>;
 
                <span class="i">Index</span> <span id="r41 rd" class="r41 r">index</span> = <a href="#501b93f2a24943cd" class="i method">CreateTestIndex</a>();
                <span class="r41 r">index</span>.<span class="i">Analyzers</span> = <b>new</b> <span class="i">Analyzer</span>[]
                {
                    <b>new</b> <span class="i">CustomAnalyzer</span>(
                        <a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(),
                        <span class="r38 r">CustomTokenizerName</span>,
                        <b>new</b> <span class="i">TokenFilterName</span>[] { <span class="r39 r">CustomTokenFilterName</span> },
                        <b>new</b> <span class="i">CharFilterName</span>[] { <span class="r40 r">CustomCharFilterName</span> }),
                    <b>new</b> <span class="i">CustomAnalyzer</span>(
                        <a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(),
                        <span class="i">TokenizerName</span>.<span class="i">EdgeNGram</span>),
                    <b>new</b> <span class="i">PatternAnalyzer</span>(
                        <a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(),
                        <span class="i">lowerCaseTerms</span>: <b>false</b>,
                        <span class="i">pattern</span>: <span class="s">&quot;abc&quot;</span>,
                        <span class="i">flags</span>: <span class="i">RegexFlags</span>.<span class="i">DotAll</span>,
                        <span class="i">stopwords</span>: <b>new</b>[] { <span class="s">&quot;the&quot;</span> }),
                    <b>new</b> <span class="i">StandardAnalyzer</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">maxTokenLength</span>: 100, <span class="i">stopwords</span>: <b>new</b>[] { <span class="s">&quot;the&quot;</span> }),
                    <b>new</b> <span class="i">StopAnalyzer</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">stopwords</span>: <b>new</b>[] { <span class="s">&quot;the&quot;</span> }),
                    <b>new</b> <span class="i">StopAnalyzer</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>())
                };
 
                <span class="r41 r">index</span>.<span class="i">Tokenizers</span> = <b>new</b> <span class="i">Tokenizer</span>[]
                {
                    <b>new</b> <span class="i">EdgeNGramTokenizer</span>(<span class="r38 r">CustomTokenizerName</span>, <span class="i">minGram</span>: 1, <span class="i">maxGram</span>: 2),    <span class="c">// One custom tokenizer for CustomAnalyzer above.</span>
                    <b>new</b> <span class="i">EdgeNGramTokenizer</span>(
                        <a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(),
                        <span class="i">minGram</span>: 2,
                        <span class="i">maxGram</span>: 4,
                        <span class="i">tokenChars</span>: <b>new</b>[] { <span class="i">TokenCharacterKind</span>.<span class="i">Letter</span> }),
                    <b>new</b> <span class="i">NGramTokenizer</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">minGram</span>: 2, <span class="i">maxGram</span>: 4, <span class="i">tokenChars</span>: <b>new</b>[] { <span class="i">TokenCharacterKind</span>.<span class="i">Letter</span> }),
                    <b>new</b> <span class="i">ClassicTokenizer</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">maxTokenLength</span>: 100),
                    <b>new</b> <span class="i">KeywordTokenizerV2</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">maxTokenLength</span>: 100),
                    <b>new</b> <span class="i">MicrosoftLanguageStemmingTokenizer</span>(
                        <a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(),
                        <span class="i">maxTokenLength</span>: 100,
                        <span class="i">isSearchTokenizer</span>: <b>true</b>,
                        <span class="i">language</span>: <span class="i">MicrosoftStemmingTokenizerLanguage</span>.<span class="i">Croatian</span>),
                    <b>new</b> <span class="i">MicrosoftLanguageTokenizer</span>(
                        <a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(),
                        <span class="i">maxTokenLength</span>: 100,
                        <span class="i">isSearchTokenizer</span>: <b>true</b>,
                        <span class="i">language</span>: <span class="i">MicrosoftTokenizerLanguage</span>.<span class="i">Thai</span>),
                    <b>new</b> <span class="i">PathHierarchyTokenizerV2</span>(
                        <a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(),
                        <span class="i">delimiter</span>: <span class="s">&#39;:&#39;</span>,
                        <span class="i">replacement</span>: <span class="s">&#39;_&#39;</span>,
                        <span class="i">maxTokenLength</span>: 300,
                        <span class="i">reverseTokenOrder</span>: <b>true</b>,
                        <span class="i">numberOfTokensToSkip</span>: 2),
                    <b>new</b> <span class="i">PatternTokenizer</span>(
                        <a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(),
                        <span class="i">pattern</span>: <span class="s">&quot;.*&quot;</span>,
                        <span class="i">flags</span>: <span class="i">RegexFlags</span>.<span class="i">Multiline</span> | <span class="i">RegexFlags</span>.<span class="i">Literal</span>,
                        <span class="i">group</span>: 0),
                    <b>new</b> <span class="i">StandardTokenizerV2</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">maxTokenLength</span>: 100),
                    <b>new</b> <span class="i">UaxUrlEmailTokenizer</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">maxTokenLength</span>: 100)
                };
 
                <span class="r41 r">index</span>.<span class="i">TokenFilters</span> = <b>new</b> <span class="i">TokenFilter</span>[]
                {
                    <b>new</b> <span class="i">CjkBigramTokenFilter</span>(<span class="r39 r">CustomTokenFilterName</span>),    <span class="c">// One custom token filter for CustomAnalyzer above.</span>
                    <b>new</b> <span class="i">CjkBigramTokenFilter</span>(
                        <a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(),
                        <span class="i">ignoreScripts</span>: <b>new</b>[] { <span class="i">CjkBigramTokenFilterScripts</span>.<span class="i">Han</span> },
                        <span class="i">outputUnigrams</span>: <b>true</b>),
                    <b>new</b> <span class="i">CjkBigramTokenFilter</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>()),
                    <b>new</b> <span class="i">AsciiFoldingTokenFilter</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">preserveOriginal</span>: <b>true</b>),
                    <b>new</b> <span class="i">AsciiFoldingTokenFilter</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>()),
                    <b>new</b> <span class="i">CommonGramTokenFilter</span>(
                        <a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(),
                        <span class="i">commonWords</span>: <b>new</b>[] { <span class="s">&quot;hello&quot;</span>, <span class="s">&quot;goodbye&quot;</span> },
                        <span class="i">ignoreCase</span>: <b>true</b>,
                        <span class="i">useQueryMode</span>: <b>true</b>),
                    <b>new</b> <span class="i">CommonGramTokenFilter</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">commonWords</span>: <b>new</b>[] { <span class="s">&quot;at&quot;</span> }),
                    <b>new</b> <span class="i">DictionaryDecompounderTokenFilter</span>(
                        <a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(),
                        <span class="i">wordList</span>: <b>new</b>[] { <span class="s">&quot;Schadenfreude&quot;</span> },
                        <span class="i">minWordSize</span>: 10,
                        <span class="i">minSubwordSize</span>: 5,
                        <span class="i">maxSubwordSize</span>: 13,
                        <span class="i">onlyLongestMatch</span>: <b>true</b>),
                    <b>new</b> <span class="i">EdgeNGramTokenFilterV2</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">minGram</span>: 2, <span class="i">maxGram</span>: 10, <span class="i">side</span>: <span class="i">EdgeNGramTokenFilterSide</span>.<span class="i">Back</span>),
                    <b>new</b> <span class="i">ElisionTokenFilter</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">articles</span>: <b>new</b>[] { <span class="s">&quot;a&quot;</span> }),
                    <b>new</b> <span class="i">ElisionTokenFilter</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>()),
                    <b>new</b> <span class="i">KeepTokenFilter</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">keepWords</span>: <b>new</b>[] { <span class="s">&quot;aloha&quot;</span> }, <span class="i">lowerCaseKeepWords</span>: <b>true</b>),
                    <b>new</b> <span class="i">KeepTokenFilter</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">keepWords</span>: <b>new</b>[] { <span class="s">&quot;e&quot;</span>, <span class="s">&quot;komo&quot;</span>, <span class="s">&quot;mai&quot;</span> }),
                    <b>new</b> <span class="i">KeywordMarkerTokenFilter</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">keywords</span>: <b>new</b>[] { <span class="s">&quot;key&quot;</span>, <span class="s">&quot;words&quot;</span> }, <span class="i">ignoreCase</span>: <b>true</b>),
                    <b>new</b> <span class="i">KeywordMarkerTokenFilter</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">keywords</span>: <b>new</b>[] { <span class="s">&quot;essential&quot;</span> }),
                    <b>new</b> <span class="i">LengthTokenFilter</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">min</span>: 5, <span class="i">max</span>: 10),
                    <b>new</b> <span class="i">LimitTokenFilter</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">maxTokenCount</span>: 10, <span class="i">consumeAllTokens</span>: <b>true</b>),
                    <b>new</b> <span class="i">NGramTokenFilterV2</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">minGram</span>: 2, <span class="i">maxGram</span>: 3),
                    <b>new</b> <span class="i">PatternCaptureTokenFilter</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">patterns</span>: <b>new</b>[] { <span class="s">&quot;.*&quot;</span> }, <span class="i">preserveOriginal</span>: <b>false</b>),
                    <b>new</b> <span class="i">PatternReplaceTokenFilter</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">pattern</span>: <span class="s">&quot;abc&quot;</span>, <span class="i">replacement</span>: <span class="s">&quot;123&quot;</span>),
                    <b>new</b> <span class="i">PhoneticTokenFilter</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">encoder</span>: <span class="i">PhoneticEncoder</span>.<span class="i">Soundex</span>, <span class="i">replaceOriginalTokens</span>: <b>false</b>),
                    <b>new</b> <span class="i">ShingleTokenFilter</span>(
                        <a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(),
                        <span class="i">maxShingleSize</span>: 10,
                        <span class="i">minShingleSize</span>: 5,
                        <span class="i">outputUnigrams</span>: <b>false</b>,
                        <span class="i">outputUnigramsIfNoShingles</span>: <b>true</b>,
                        <span class="i">tokenSeparator</span>: <span class="s">&quot; &quot;</span>,
                        <span class="i">filterToken</span>: <span class="s">&quot;|&quot;</span>),
                    <b>new</b> <span class="i">SnowballTokenFilter</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">SnowballTokenFilterLanguage</span>.<span class="i">English</span>),
                    <b>new</b> <span class="i">StemmerOverrideTokenFilter</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">rules</span>: <b>new</b>[] { <span class="s">&quot;ran =&gt; run&quot;</span> }),
                    <b>new</b> <span class="i">StemmerTokenFilter</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">StemmerTokenFilterLanguage</span>.<span class="i">French</span>),
                    <b>new</b> <span class="i">StopwordsTokenFilter</span>(
                        <a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(),
                        <span class="i">stopwords</span>: <b>new</b>[] { <span class="s">&quot;a&quot;</span>, <span class="s">&quot;the&quot;</span> },
                        <span class="i">ignoreCase</span>: <b>true</b>,
                        <span class="i">removeTrailingStopWords</span>: <b>false</b>),
                    <b>new</b> <span class="i">StopwordsTokenFilter</span>(
                        <a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(),
                        <span class="i">stopwordsList</span>: <span class="i">StopwordsList</span>.<span class="i">Italian</span>,
                        <span class="i">ignoreCase</span>: <b>true</b>,
                        <span class="i">removeTrailingStopWords</span>: <b>false</b>),
                    <b>new</b> <span class="i">SynonymTokenFilter</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">synonyms</span>: <b>new</b>[] { <span class="s">&quot;great, good&quot;</span> }, <span class="i">ignoreCase</span>: <b>true</b>, <span class="i">expand</span>: <b>false</b>),
                    <b>new</b> <span class="i">TruncateTokenFilter</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">length</span>: 10),
                    <b>new</b> <span class="i">UniqueTokenFilter</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">onlyOnSamePosition</span>: <b>true</b>),
                    <b>new</b> <span class="i">UniqueTokenFilter</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>()),
                    <b>new</b> <span class="i">WordDelimiterTokenFilter</span>(
                        <a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(),
                        <span class="i">generateWordParts</span>: <b>false</b>,
                        <span class="i">generateNumberParts</span>: <b>false</b>,
                        <span class="i">catenateWords</span>: <b>true</b>,
                        <span class="i">catenateNumbers</span>: <b>true</b>,
                        <span class="i">catenateAll</span>: <b>true</b>,
                        <span class="i">splitOnCaseChange</span>: <b>false</b>,
                        <span class="i">preserveOriginal</span>: <b>true</b>,
                        <span class="i">splitOnNumerics</span>: <b>false</b>,
                        <span class="i">stemEnglishPossessive</span>: <b>false</b>,
                        <span class="i">protectedWords</span>: <b>new</b>[] { <span class="s">&quot;protected&quot;</span> })
                };
 
                <span class="r41 r">index</span>.<span class="i">CharFilters</span> = <b>new</b> <span class="i">CharFilter</span>[]
                {
                    <b>new</b> <span class="i">MappingCharFilter</span>(<span class="r40 r">CustomCharFilterName</span>, <span class="i">mappings</span>: <b>new</b>[] { <span class="s">&quot;a =&gt; b&quot;</span> }),    <span class="c">// One custom char filter for CustomAnalyzer above.</span>
                    <b>new</b> <span class="i">MappingCharFilter</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">mappings</span>: <b>new</b>[] { <span class="s">&quot;s =&gt; $&quot;</span>, <span class="s">&quot;S =&gt; $&quot;</span> }),
                    <b>new</b> <span class="i">PatternReplaceCharFilter</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">pattern</span>: <span class="s">&quot;abc&quot;</span>, <span class="i">replacement</span>: <span class="s">&quot;123&quot;</span>)
                };
 
                <span class="c">// We have to split up analysis components into two indexes, one where any components with optional properties have defaults that</span>
                <span class="c">// are zero or null (default(T)), and another where we need to specify the default values we expect to get back from the REST API.</span>
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <a id="6d1554a2e35668be" href="../R/6d1554a2e35668be.html" target="n" data-glyph="76,3" class="i method">GenerateSimpleName</a>(<b>int</b> <span id="r42 rd" class="r42 r">n</span>) =&gt; <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#c07c3772222caaff" class="i method">Format</a>(<a href="@0@mscorlib/A.html#e319c6636909012f" class="t t">CultureInfo</a>.<a href="@0@mscorlib/A.html#26ef1c020f0dbb7a" class="i property">InvariantCulture</a>, <span class="s">&quot;a{0}&quot;</span>, <span class="r42 r">n</span>);
 
                <b>int</b> <span id="r43 rd" class="r43 r">i</span> = 0;
 
                <span class="i">Index</span> <span id="r44 rd" class="r44 r">indexWithSpecialDefaults</span> = <a href="#501b93f2a24943cd" class="i method">CreateTestIndex</a>();
                <span class="r44 r">indexWithSpecialDefaults</span>.<span class="i">Analyzers</span> = <b>new</b> <span class="i">Analyzer</span>[]
                {
                    <b>new</b> <span class="i">PatternAnalyzer</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++)),
                    <b>new</b> <span class="i">StandardAnalyzer</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++))
                };
 
                <span class="r44 r">indexWithSpecialDefaults</span>.<span class="i">Tokenizers</span> = <b>new</b> <span class="i">Tokenizer</span>[]
                {
                    <b>new</b> <span class="i">EdgeNGramTokenizer</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++)),
                    <b>new</b> <span class="i">NGramTokenizer</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++)),
                    <b>new</b> <span class="i">ClassicTokenizer</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++)),
                    <b>new</b> <span class="i">KeywordTokenizerV2</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++)),
                    <b>new</b> <span class="i">MicrosoftLanguageStemmingTokenizer</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++)),
                    <b>new</b> <span class="i">MicrosoftLanguageTokenizer</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++)),
                    <b>new</b> <span class="i">PathHierarchyTokenizerV2</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++)),
                    <b>new</b> <span class="i">PatternTokenizer</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++)),
                    <b>new</b> <span class="i">StandardTokenizerV2</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++)),
                    <b>new</b> <span class="i">UaxUrlEmailTokenizer</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++))
                };
 
                <span class="r44 r">indexWithSpecialDefaults</span>.<span class="i">TokenFilters</span> = <b>new</b> <span class="i">TokenFilter</span>[]
                {
                    <b>new</b> <span class="i">DictionaryDecompounderTokenFilter</span>(
                        <a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++),
                        <span class="i">wordList</span>: <b>new</b>[] { <span class="s">&quot;Bahnhof&quot;</span> }),
                    <b>new</b> <span class="i">EdgeNGramTokenFilterV2</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++)),
                    <b>new</b> <span class="i">LengthTokenFilter</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++)),
                    <b>new</b> <span class="i">LimitTokenFilter</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++)),
                    <b>new</b> <span class="i">NGramTokenFilterV2</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++)),
                    <b>new</b> <span class="i">PatternCaptureTokenFilter</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++), <span class="i">patterns</span>: <b>new</b>[] { <span class="s">&quot;[a-z]*&quot;</span> }),
                    <b>new</b> <span class="i">PhoneticTokenFilter</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++)),
                    <b>new</b> <span class="i">ShingleTokenFilter</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++)),
                    <b>new</b> <span class="i">StopwordsTokenFilter</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++)),
                    <b>new</b> <span class="i">SynonymTokenFilter</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++), <span class="i">synonyms</span>: <b>new</b>[] { <span class="s">&quot;mutt, canine =&gt; dog&quot;</span> }),
                    <b>new</b> <span class="i">TruncateTokenFilter</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++)),
                    <b>new</b> <span class="i">WordDelimiterTokenFilter</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++))
                };
 
                <span class="r43 r">i</span> = 0;
 
                <span class="i">Index</span> <span id="r45 rd" class="r45 r">expectedIndexWithSpecialDefaults</span> = <a href="#501b93f2a24943cd" class="i method">CreateTestIndex</a>();
                <span class="r45 r">expectedIndexWithSpecialDefaults</span>.<span class="i">Name</span> = <span class="r44 r">indexWithSpecialDefaults</span>.<span class="i">Name</span>;
                <span class="r45 r">expectedIndexWithSpecialDefaults</span>.<span class="i">Analyzers</span> = <b>new</b> <span class="i">Analyzer</span>[]
                {
                    <b>new</b> <span class="i">PatternAnalyzer</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++), <span class="i">lowerCaseTerms</span>: <b>true</b>, <span class="i">pattern</span>: <span class="s">@&quot;\W+&quot;</span>),
                    <b>new</b> <span class="i">StandardAnalyzer</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++), <span class="i">maxTokenLength</span>: 255)
                };
 
                <span class="r45 r">expectedIndexWithSpecialDefaults</span>.<span class="i">Tokenizers</span> = <b>new</b> <span class="i">Tokenizer</span>[]
                {
                    <b>new</b> <span class="i">EdgeNGramTokenizer</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++), <span class="i">minGram</span>: 1, <span class="i">maxGram</span>: 2),
                    <b>new</b> <span class="i">NGramTokenizer</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++), <span class="i">minGram</span>: 1, <span class="i">maxGram</span>: 2),
                    <b>new</b> <span class="i">ClassicTokenizer</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++), <span class="i">maxTokenLength</span>: 255),
                    <b>new</b> <span class="i">KeywordTokenizerV2</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++), <span class="i">maxTokenLength</span>: 256),
                    <b>new</b> <span class="i">MicrosoftLanguageStemmingTokenizer</span>(
                        <a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++),
                        <span class="i">maxTokenLength</span>: 255,
                        <span class="i">isSearchTokenizer</span>: <b>false</b>,
                        <span class="i">language</span>: <span class="i">MicrosoftStemmingTokenizerLanguage</span>.<span class="i">English</span>),
                    <b>new</b> <span class="i">MicrosoftLanguageTokenizer</span>(
                        <a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++),
                        <span class="i">maxTokenLength</span>: 255,
                        <span class="i">isSearchTokenizer</span>: <b>false</b>,
                        <span class="i">language</span>: <span class="i">MicrosoftTokenizerLanguage</span>.<span class="i">English</span>),
                    <b>new</b> <span class="i">PathHierarchyTokenizerV2</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++), <span class="i">delimiter</span>: <span class="s">&#39;/&#39;</span>, <span class="i">replacement</span>: <span class="s">&#39;/&#39;</span>, <span class="i">maxTokenLength</span>: 300),
                    <b>new</b> <span class="i">PatternTokenizer</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++), <span class="i">pattern</span>: <span class="s">@&quot;\W+&quot;</span>, <span class="i">group</span>: -1),
                    <b>new</b> <span class="i">StandardTokenizerV2</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++), <span class="i">maxTokenLength</span>: 255),
                    <b>new</b> <span class="i">UaxUrlEmailTokenizer</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++), <span class="i">maxTokenLength</span>: 255)
                };
 
                <span class="r45 r">expectedIndexWithSpecialDefaults</span>.<span class="i">TokenFilters</span> = <b>new</b> <span class="i">TokenFilter</span>[]
                {
                    <b>new</b> <span class="i">DictionaryDecompounderTokenFilter</span>(
                        <a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++),
                        <span class="i">wordList</span>: <b>new</b>[] { <span class="s">&quot;Bahnhof&quot;</span> },
                        <span class="i">minWordSize</span>: 5,
                        <span class="i">minSubwordSize</span>: 2,
                        <span class="i">maxSubwordSize</span>: 15),
                    <b>new</b> <span class="i">EdgeNGramTokenFilterV2</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++), <span class="i">minGram</span>: 1, <span class="i">maxGram</span>: 2, <span class="i">side</span>: <span class="i">EdgeNGramTokenFilterSide</span>.<span class="i">Front</span>),
                    <b>new</b> <span class="i">LengthTokenFilter</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++), <span class="i">max</span>: 300),
                    <b>new</b> <span class="i">LimitTokenFilter</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++), <span class="i">maxTokenCount</span>: 1),
                    <b>new</b> <span class="i">NGramTokenFilterV2</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++), <span class="i">minGram</span>: 1, <span class="i">maxGram</span>: 2),
                    <b>new</b> <span class="i">PatternCaptureTokenFilter</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++), <span class="i">patterns</span>: <b>new</b>[] { <span class="s">&quot;[a-z]*&quot;</span> }, <span class="i">preserveOriginal</span>: <b>true</b>),
                    <b>new</b> <span class="i">PhoneticTokenFilter</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++), <span class="i">encoder</span>: <span class="i">PhoneticEncoder</span>.<span class="i">Metaphone</span>, <span class="i">replaceOriginalTokens</span>: <b>true</b>),
                    <b>new</b> <span class="i">ShingleTokenFilter</span>(
                        <a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++),
                        <span class="i">maxShingleSize</span>: 2,
                        <span class="i">minShingleSize</span>: 2,
                        <span class="i">outputUnigrams</span>: <b>true</b>,
                        <span class="i">tokenSeparator</span>: <span class="s">&quot; &quot;</span>,
                        <span class="i">filterToken</span>: <span class="s">&quot;_&quot;</span>),
                    <b>new</b> <span class="i">StopwordsTokenFilter</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++), <span class="i">stopwordsList</span>: <span class="i">StopwordsList</span>.<span class="i">English</span>, <span class="i">removeTrailingStopWords</span>: <b>true</b>),
                    <b>new</b> <span class="i">SynonymTokenFilter</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++), <span class="i">synonyms</span>: <b>new</b>[] { <span class="s">&quot;mutt, canine =&gt; dog&quot;</span> }, <span class="i">expand</span>: <b>true</b>),
                    <b>new</b> <span class="i">TruncateTokenFilter</span>(<a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++), <span class="i">length</span>: 300),
                    <b>new</b> <span class="i">WordDelimiterTokenFilter</span>(
                        <a href="#6d1554a2e35668be" class="i method">GenerateSimpleName</a>(<span class="r43 r">i</span>++),
                        <span class="i">generateWordParts</span>: <b>true</b>,
                        <span class="i">generateNumberParts</span>: <b>true</b>,
                        <span class="i">splitOnCaseChange</span>: <b>true</b>,
                        <span class="i">splitOnNumerics</span>: <b>true</b>,
                        <span class="i">stemEnglishPossessive</span>: <b>true</b>)
                };
 
                <span class="c">// This is to make sure we didn&#39;t forget any components in this test.</span>
                <a href="#344f3898739fde16" class="i method">AssertIndexContainsAllAnalysisComponents</a>(<span class="r41 r">index</span>, <span class="r44 r">indexWithSpecialDefaults</span>);
 
                <a href="#91141d7857218276" class="i method">TestAnalysisComponents</a>(<span class="r41 r">index</span>);
                <a href="#91141d7857218276" class="i method">TestAnalysisComponents</a>(<span class="r44 r">indexWithSpecialDefaults</span>, <span class="r45 r">expectedIndexWithSpecialDefaults</span>);
            });
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="97b3c9e27b122e71" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanUseAllAnalysisComponentNames</a>()
        {
            <span class="i">Run</span>(() =&gt;
            {
                <span class="i">TokenizerName</span>[] <span id="r46 rd" class="r46 r">allTokenizerNames</span> = <a href="#5f13991710b971ae" class="i method">GetAllExtensibleEnumValues</a>&lt;<span class="i">TokenizerName</span>&gt;();
                <span class="i">TokenFilterName</span>[] <span id="r47 rd" class="r47 r">allTokenFilterNames</span> = <a href="#5f13991710b971ae" class="i method">GetAllExtensibleEnumValues</a>&lt;<span class="i">TokenFilterName</span>&gt;();
                <span class="i">CharFilterName</span>[] <span id="r48 rd" class="r48 r">allCharFilterNames</span> = <a href="#5f13991710b971ae" class="i method">GetAllExtensibleEnumValues</a>&lt;<span class="i">CharFilterName</span>&gt;();
 
                <b>var</b> <span id="r49 rd" class="r49 r">analyzerWithAllTokenFiltersAndCharFilters</span> =
                    <b>new</b> <span class="i">CustomAnalyzer</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">TokenizerName</span>.<span class="i">Lowercase</span>, <span class="r47 r">allTokenFilterNames</span>, <span class="r48 r">allCharFilterNames</span>);
 
                <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="i">Analyzer</span>&gt; <span id="r50 rd" class="r50 r">analyzersWithAllTokenizers</span> =
                    <span class="r46 r">allTokenizerNames</span>.<span class="i">Select</span>(<span id="r51 rd" class="r51 r">tn</span> =&gt; <b>new</b> <span class="i">CustomAnalyzer</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="r51 r">tn</span>));
 
                <span class="i">Index</span> <span id="r52 rd" class="r52 r">index</span> = <a href="#501b93f2a24943cd" class="i method">CreateTestIndex</a>();
                <span class="r52 r">index</span>.<span class="i">Analyzers</span> = <b>new</b>[] { <span class="r49 r">analyzerWithAllTokenFiltersAndCharFilters</span> }.<span class="i">Concat</span>(<span class="r50 r">analyzersWithAllTokenizers</span>).<span class="i">ToArray</span>();
 
                <a href="#91141d7857218276" class="i method">TestAnalysisComponents</a>(<span class="r52 r">index</span>);
            });
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="c9271eae7fc90db0" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanUseAllRegexFlags</a>()
        {
            <span class="i">Run</span>(() =&gt;
            {
                <span class="i">RegexFlags</span>[] <span id="r53 rd" class="r53 r">allRegexFlags</span> = <a href="#5f13991710b971ae" class="i method">GetAllExtensibleEnumValues</a>&lt;<span class="i">RegexFlags</span>&gt;();
 
                <span class="i">Analyzer</span> <a id="56a9bca67fa7c32b" href="../R/56a9bca67fa7c32b.html" target="n" data-glyph="76,3" class="i method">CreatePatternAnalyzer</a>(<span class="i">RegexFlags</span> <span id="r54 rd" class="r54 r">rf</span>) =&gt;
                    <b>new</b> <span class="i">PatternAnalyzer</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">lowerCaseTerms</span>: <b>true</b>, <span class="i">pattern</span>: <span class="s">&quot;.*&quot;</span>, <span class="i">flags</span>: <span class="r54 r">rf</span>);
 
                <span class="i">Index</span> <span id="r55 rd" class="r55 r">index</span> = <a href="#501b93f2a24943cd" class="i method">CreateTestIndex</a>();
                <span class="r55 r">index</span>.<span class="i">Analyzers</span> = <span class="r53 r">allRegexFlags</span>.<a href="@0@System.Core/A.html#5c652c53e80df013" class="i method">Select</a>(<a href="#56a9bca67fa7c32b" class="i method">CreatePatternAnalyzer</a>).<a href="@0@System.Core/A.html#783a052330e7d48d" class="i method">ToArray</a>();
 
                <a href="#91141d7857218276" class="i method">TestAnalysisComponents</a>(<span class="r55 r">index</span>);
            });
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="f4fdd08ce60ebecc" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanUseAllAnalysisComponentOptions</a>()
        {
            <span class="i">Run</span>(() =&gt;
            {
                <b>var</b> <span id="r56 rd" class="r56 r">tokenizerWithAllTokenCharacterKinds</span> =
                    <b>new</b> <span class="i">EdgeNGramTokenizer</span>(
                        <a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(),
                        <span class="i">minGram</span>: 1,
                        <span class="i">maxGram</span>: 2,
                        <span class="i">tokenChars</span>: <a href="#7d6e3009476883db" class="i method">GetAllEnumValues</a>&lt;<span class="i">TokenCharacterKind</span>&gt;());
 
                <span class="i">Tokenizer</span> <a id="9508334240edec0a" href="../R/9508334240edec0a.html" target="n" data-glyph="76,3" class="i method">CreateMicrosoftLanguageTokenizer</a>(<span class="i">MicrosoftTokenizerLanguage</span> <span id="r57 rd" class="r57 r">mtl</span>) =&gt;
                    <b>new</b> <span class="i">MicrosoftLanguageTokenizer</span>(
                        <a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(),
                        <span class="i">maxTokenLength</span>: 200,
                        <span class="i">isSearchTokenizer</span>: <b>false</b>,
                        <span class="i">language</span>: <span class="r57 r">mtl</span>);
 
                <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="i">Tokenizer</span>&gt; <span id="r58 rd" class="r58 r">tokenizersWithAllMicrosoftLanguages</span> =
                    <a href="#7d6e3009476883db" class="i method">GetAllEnumValues</a>&lt;<span class="i">MicrosoftTokenizerLanguage</span>&gt;().<a href="@0@System.Core/A.html#5c652c53e80df013" class="i method">Select</a>(<a href="#9508334240edec0a" class="i method">CreateMicrosoftLanguageTokenizer</a>);
 
                <span class="i">Tokenizer</span> <a id="c7bca7dc6b9c5b98" href="../R/c7bca7dc6b9c5b98.html" target="n" data-glyph="76,3" class="i method">CreateMicrosoftStemmingLanguageTokenizer</a>(<span class="i">MicrosoftStemmingTokenizerLanguage</span> <span id="r59 rd" class="r59 r">mtl</span>) =&gt;
                    <b>new</b> <span class="i">MicrosoftLanguageStemmingTokenizer</span>(
                        <a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(),
                        <span class="i">maxTokenLength</span>: 200,
                        <span class="i">isSearchTokenizer</span>: <b>false</b>,
                        <span class="i">language</span>: <span class="r59 r">mtl</span>);
 
                <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="i">Tokenizer</span>&gt; <span id="r60 rd" class="r60 r">tokenizersWithAllMicrosoftStemmingLanguages</span> =
                    <a href="#7d6e3009476883db" class="i method">GetAllEnumValues</a>&lt;<span class="i">MicrosoftStemmingTokenizerLanguage</span>&gt;().<a href="@0@System.Core/A.html#5c652c53e80df013" class="i method">Select</a>(<a href="#c7bca7dc6b9c5b98" class="i method">CreateMicrosoftStemmingLanguageTokenizer</a>);
 
                <b>var</b> <span id="r61 rd" class="r61 r">tokenFilterWithAllCjkScripts</span> =
                    <b>new</b> <span class="i">CjkBigramTokenFilter</span>(
                        <a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(),
                        <span class="i">ignoreScripts</span>: <a href="#7d6e3009476883db" class="i method">GetAllEnumValues</a>&lt;<span class="i">CjkBigramTokenFilterScripts</span>&gt;(),
                        <span class="i">outputUnigrams</span>: <b>true</b>);
 
                <span class="i">TokenFilter</span> <a id="b26ac81d9535279e" href="../R/b26ac81d9535279e.html" target="n" data-glyph="76,3" class="i method">CreateEdgeNGramTokenFilter</a>(<span class="i">EdgeNGramTokenFilterSide</span> <span id="r62 rd" class="r62 r">s</span>) =&gt;
                    <b>new</b> <span class="i">EdgeNGramTokenFilterV2</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">minGram</span>: 1, <span class="i">maxGram</span>: 2, <span class="i">side</span>: <span class="r62 r">s</span>);
 
                <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="i">TokenFilter</span>&gt; <span id="r63 rd" class="r63 r">tokenFiltersWithAllEdgeNGramSides</span> =
                    <a href="#7d6e3009476883db" class="i method">GetAllEnumValues</a>&lt;<span class="i">EdgeNGramTokenFilterSide</span>&gt;().<a href="@0@System.Core/A.html#5c652c53e80df013" class="i method">Select</a>(<a href="#b26ac81d9535279e" class="i method">CreateEdgeNGramTokenFilter</a>);
 
                <span class="i">TokenFilter</span> <a id="9772162c4b3decf2" href="../R/9772162c4b3decf2.html" target="n" data-glyph="76,3" class="i method">CreatePhoneticTokenFilter</a>(<span class="i">PhoneticEncoder</span> <span id="r64 rd" class="r64 r">pe</span>) =&gt;
                    <b>new</b> <span class="i">PhoneticTokenFilter</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="i">encoder</span>: <span class="r64 r">pe</span>, <span class="i">replaceOriginalTokens</span>: <b>false</b>);
 
                <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="i">TokenFilter</span>&gt; <span id="r65 rd" class="r65 r">tokenFiltersWithAllPhoneticEncoders</span> =
                    <a href="#7d6e3009476883db" class="i method">GetAllEnumValues</a>&lt;<span class="i">PhoneticEncoder</span>&gt;().<a href="@0@System.Core/A.html#5c652c53e80df013" class="i method">Select</a>(<a href="#9772162c4b3decf2" class="i method">CreatePhoneticTokenFilter</a>);
 
                <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="i">TokenFilter</span>&gt; <span id="r66 rd" class="r66 r">tokenFiltersWithAllSnowballLanguages</span> =
                    <a href="#7d6e3009476883db" class="i method">GetAllEnumValues</a>&lt;<span class="i">SnowballTokenFilterLanguage</span>&gt;().<span class="i">Select</span>(<span id="r67 rd" class="r67 r">l</span> =&gt; <b>new</b> <span class="i">SnowballTokenFilter</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="r67 r">l</span>));
 
                <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="i">TokenFilter</span>&gt; <span id="r68 rd" class="r68 r">tokenFiltersWithAllStemmerLanguages</span> =
                    <a href="#7d6e3009476883db" class="i method">GetAllEnumValues</a>&lt;<span class="i">StemmerTokenFilterLanguage</span>&gt;().<span class="i">Select</span>(<span id="r69 rd" class="r69 r">l</span> =&gt; <b>new</b> <span class="i">StemmerTokenFilter</span>(<a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(), <span class="r69 r">l</span>));
 
                <span class="i">TokenFilter</span> <a id="1165909163b09d7d" href="../R/1165909163b09d7d.html" target="n" data-glyph="76,3" class="i method">CreateStopTokenFilter</a>(<span class="i">StopwordsList</span> <span id="r70 rd" class="r70 r">l</span>) =&gt;
                    <b>new</b> <span class="i">StopwordsTokenFilter</span>(
                        <a href="/Search.Management.Tests/A.html#43c89287078aeb50" class="t t">SearchTestUtilities</a>.<span class="i">GenerateName</span>(),
                        <span class="i">stopwordsList</span>: <span class="r70 r">l</span>,
                        <span class="i">ignoreCase</span>: <b>false</b>,
                        <span class="i">removeTrailingStopWords</span>: <b>true</b>);
 
                <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="i">TokenFilter</span>&gt; <span id="r71 rd" class="r71 r">tokenFiltersWithAllStopwordLists</span> = <a href="#7d6e3009476883db" class="i method">GetAllEnumValues</a>&lt;<span class="i">StopwordsList</span>&gt;().<a href="@0@System.Core/A.html#5c652c53e80df013" class="i method">Select</a>(<a href="#1165909163b09d7d" class="i method">CreateStopTokenFilter</a>);
 
                <span class="c">// Split the tokenizers and token filters into different indexes to get around the 50-item limit.</span>
                <span class="i">Index</span> <span id="r72 rd" class="r72 r">index</span> = <a href="#501b93f2a24943cd" class="i method">CreateTestIndex</a>();
 
                <span class="r72 r">index</span>.<span class="i">Tokenizers</span> =
                    <b>new</b>[] { <span class="r56 r">tokenizerWithAllTokenCharacterKinds</span> }
                    .<span class="i">Concat</span>(<span class="r58 r">tokenizersWithAllMicrosoftLanguages</span>)
                    .<span class="i">Concat</span>(<span class="r60 r">tokenizersWithAllMicrosoftStemmingLanguages</span>).<span class="i">ToArray</span>();
 
                <span class="r72 r">index</span>.<span class="i">TokenFilters</span> =
                    <b>new</b>[] { <span class="r61 r">tokenFilterWithAllCjkScripts</span> }
                    .<span class="i">Concat</span>(<span class="r63 r">tokenFiltersWithAllEdgeNGramSides</span>)
                    .<span class="i">Concat</span>(<span class="r65 r">tokenFiltersWithAllPhoneticEncoders</span>)
                    .<span class="i">Concat</span>(<span class="r66 r">tokenFiltersWithAllSnowballLanguages</span>)
                    .<span class="i">Concat</span>(<span class="r68 r">tokenFiltersWithAllStemmerLanguages</span>)
                    .<span class="i">Concat</span>(<span class="r71 r">tokenFiltersWithAllStopwordLists</span>).<span class="i">ToArray</span>();
 
                <a href="#91141d7857218276" class="i method">TestAnalysisComponents</a>(<span class="r72 r">index</span>);
            });
        }
 
        <b>private static void</b> <a id="344f3898739fde16" href="../R/344f3898739fde16.html" target="n" data-glyph="76,1" class="i method">AssertIndexContainsAllAnalysisComponents</a>(<b>params</b> <span class="i">Index</span>[] <span id="r73 rd" class="r73 r">indexes</span>)
        {
            <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="i">Analyzer</span>&gt; <a id="c4b0f194c82290c9" href="../R/c4b0f194c82290c9.html" target="n" data-glyph="76,2" class="i method">GetAnalyzers</a>(<span class="i">Index</span> <span id="r74 rd" class="r74 r">index</span>) =&gt; <span class="r74 r">index</span>.<span class="i">Analyzers</span> ?? <a href="@0@System.Core/A.html#577032c8811e20d3" class="t t">Enumerable</a>.<a href="@0@System.Core/A.html#4d026772cf3399f5" class="i method">Empty</a>&lt;<span class="i">Analyzer</span>&gt;();
            <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="i">Tokenizer</span>&gt; <a id="38c7b8a357aa7882" href="../R/38c7b8a357aa7882.html" target="n" data-glyph="76,2" class="i method">GetTokenizers</a>(<span class="i">Index</span> <span id="r75 rd" class="r75 r">index</span>) =&gt; <span class="r75 r">index</span>.<span class="i">Tokenizers</span> ?? <a href="@0@System.Core/A.html#577032c8811e20d3" class="t t">Enumerable</a>.<a href="@0@System.Core/A.html#4d026772cf3399f5" class="i method">Empty</a>&lt;<span class="i">Tokenizer</span>&gt;();
            <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="i">TokenFilter</span>&gt; <a id="ac0ee7795be2ca10" href="../R/ac0ee7795be2ca10.html" target="n" data-glyph="76,2" class="i method">GetTokenFilters</a>(<span class="i">Index</span> <span id="r76 rd" class="r76 r">index</span>) =&gt; <span class="r76 r">index</span>.<span class="i">TokenFilters</span> ?? <a href="@0@System.Core/A.html#577032c8811e20d3" class="t t">Enumerable</a>.<a href="@0@System.Core/A.html#4d026772cf3399f5" class="i method">Empty</a>&lt;<span class="i">TokenFilter</span>&gt;();
            <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="i">CharFilter</span>&gt; <a id="386fe63a93c3eddc" href="../R/386fe63a93c3eddc.html" target="n" data-glyph="76,2" class="i method">GetCharFilters</a>(<span class="i">Index</span> <span id="r77 rd" class="r77 r">index</span>) =&gt; <span class="r77 r">index</span>.<span class="i">CharFilters</span> ?? <a href="@0@System.Core/A.html#577032c8811e20d3" class="t t">Enumerable</a>.<a href="@0@System.Core/A.html#4d026772cf3399f5" class="i method">Empty</a>&lt;<span class="i">CharFilter</span>&gt;();
 
            <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a>&gt; <a id="e4dc8fee7f264aaa" href="../R/e4dc8fee7f264aaa.html" target="n" data-glyph="76,2" class="i method">GetAnalysisTypesPresentInIndex</a>(<span class="i">Index</span> <span id="r78 rd" class="r78 r">index</span>) =&gt;
                <a href="#c4b0f194c82290c9" class="i method">GetAnalyzers</a>(<span class="r78 r">index</span>).<a href="@0@System.Core/A.html#5c652c53e80df013" class="i method">Select</a>(<span id="r79 rd" class="r79 r">a</span> =&gt; <span class="r79 r">a</span>.<span class="i">GetType</span>())
                .<a href="@0@System.Core/A.html#9c0a66e386e37265" class="i method">Concat</a>(<a href="#38c7b8a357aa7882" class="i method">GetTokenizers</a>(<span class="r78 r">index</span>).<a href="@0@System.Core/A.html#5c652c53e80df013" class="i method">Select</a>(<span id="r80 rd" class="r80 r">t</span> =&gt; <span class="r80 r">t</span>.<span class="i">GetType</span>()))
                .<a href="@0@System.Core/A.html#9c0a66e386e37265" class="i method">Concat</a>(<a href="#ac0ee7795be2ca10" class="i method">GetTokenFilters</a>(<span class="r78 r">index</span>).<a href="@0@System.Core/A.html#5c652c53e80df013" class="i method">Select</a>(<span id="r81 rd" class="r81 r">tf</span> =&gt; <span class="r81 r">tf</span>.<span class="i">GetType</span>()))
                .<a href="@0@System.Core/A.html#9c0a66e386e37265" class="i method">Concat</a>(<a href="#386fe63a93c3eddc" class="i method">GetCharFilters</a>(<span class="r78 r">index</span>).<a href="@0@System.Core/A.html#5c652c53e80df013" class="i method">Select</a>(<span id="r82 rd" class="r82 r">c</span> =&gt; <span class="r82 r">c</span>.<span class="i">GetType</span>()));
 
            <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="k">var</a> <span id="r83 rd" class="r83 r">analysisTypesPresentInAllIndexes</span> =
                <b>from</b> <span class="i">index</span> <b>in</b> <span class="r73 r">indexes</span>
                <b>from</b> <span class="i">t</span> <b>in</b> <a href="#e4dc8fee7f264aaa" class="i method">GetAnalysisTypesPresentInIndex</a>(<span class="i">index</span>)
                <b>select</b> <span class="i">t</span>;
 
            <span class="c">// Count how many instances of each type appear in the given index definitions.</span>
            <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="k">var</a> <span id="r84 rd" class="r84 r">analysisTypeCounts</span> =
                <b>from</b> <span class="i">t</span> <b>in</b> <span class="r83 r">analysisTypesPresentInAllIndexes</span>
                <b>group</b> <span class="i">t</span> <b>by</b> <span class="i">t</span> <b>into</b> <span class="i">typeGroup</span>
                <b>select</b> <b>new</b> { <a href="#32b3e9d53a6e4af0" class="i property">Type</a> = <span class="i">typeGroup</span>.<a href="@0@System.Core/A.html#249797970861cc23" class="i property">Key</a>, <a href="#ee3ca973aead8a00" class="i property">Count</a> = <span class="i">typeGroup</span>.<a href="@0@System.Core/A.html#41ef9e39e54d0d0b" class="i method">Count</a>() };
 
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a>, <b>int</b>&gt; <span id="r85 rd" class="r85 r">instanceCountMap</span> = <span class="r84 r">analysisTypeCounts</span>.<a href="@0@System.Core/A.html#c7f3fa13329a79cd" class="i method">ToDictionary</a>(<span id="r86 rd" class="r86 r">tc</span> =&gt; <span class="r86 r">tc</span>.<a href="#32b3e9d53a6e4af0" class="i property">Type</a>, <span id="r87 rd" class="r87 r">tc</span> =&gt; <span class="r87 r">tc</span>.<a href="#ee3ca973aead8a00" class="i property">Count</a>);
            <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a>&gt; <span id="r88 rd" class="r88 r">allAnalysisComponentTypes</span> = <b>typeof</b>(<span class="i">Index</span>).<a href="@0@mscorlib/A.html#e4a35c1ec2b91f27" class="i method">GetTypeInfo</a>().<a href="@0@mscorlib/A.html#e87d536bd07fab01" class="i property">Assembly</a>.<a href="@0@mscorlib/A.html#78a08cc14a7d626a" class="i property">ExportedTypes</a>.<span class="i">Where</span>((<a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a> <span id="r89 rd" class="r89 r">type</span>) =&gt; <a href="#505fc8a3f22fb4f8" class="i method">IsAnalysisComponentType</a>(<span class="r89 r">type</span>) &amp;&amp; !<a href="#cb9291fecc4e6095" class="i method">IsDeprecatedType</a>(<span class="r89 r">type</span>));
            <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a>&gt; <span id="r90 rd" class="r90 r">missingTypes</span> = <span class="r88 r">allAnalysisComponentTypes</span>.<span class="i">Where</span>(<span id="r91 rd" class="r91 r">t</span> =&gt; !<a href="#aecb3680e0b10b35" class="i method">IsTypePresentAtLeastOnce</a>(<span class="r85 r">instanceCountMap</span>, <span class="r91 r">t</span>));
 
            <b>if</b> (<span class="r90 r">missingTypes</span>.<a href="@0@System.Core/A.html#8788153112b7ffd0" class="i method">Any</a>())
            {
                <b>const string</b> <span id="r92 rd" class="r92 r">MessageFormat</span> =
                    <span class="s">&quot;Logic error in test. Test must include at least one case for each analysis component type. Missing types:{0}{0}{1}&quot;</span>;
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r93 rd" class="r93 r">message</span> =
                    <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#9726f19207b91186" class="i method">Format</a>(
                        <a href="@0@mscorlib/A.html#e319c6636909012f" class="t t">CultureInfo</a>.<a href="@0@mscorlib/A.html#26ef1c020f0dbb7a" class="i property">InvariantCulture</a>,
                        <span class="r92 r">MessageFormat</span>,
                        <a href="@0@mscorlib/A.html#7d2f1469d916fc63" class="t t">Environment</a>.<a href="@0@mscorlib/A.html#63a04833d43dd9d3" class="i property">NewLine</a>,
                        <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#fa961ce440526a4d" class="i method">Join</a>(<a href="@0@mscorlib/A.html#7d2f1469d916fc63" class="t t">Environment</a>.<a href="@0@mscorlib/A.html#63a04833d43dd9d3" class="i property">NewLine</a>, <span class="r90 r">missingTypes</span>.<a href="@0@System.Core/A.html#5c652c53e80df013" class="i method">Select</a>(<span id="r94 rd" class="r94 r">t</span> =&gt; <span class="r94 r">t</span>.<a href="@0@mscorlib/A.html#aa4f112f79364b6e" class="i property">Name</a>)));
 
                <span class="i">Assert</span>.<span class="i">True</span>(<b>false</b>, <span class="r93 r">message</span>);
            }
        }
 
        <b>private static bool</b> <a id="505fc8a3f22fb4f8" href="../R/505fc8a3f22fb4f8.html" target="n" data-glyph="76,1" class="i method">IsAnalysisComponentType</a>(<a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a> <span id="r95 rd" class="r95 r">candidateType</span>)
        {
            <a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a> <span id="r96 rd" class="r96 r">baseType</span> = <span class="r95 r">candidateType</span>.<a href="@0@mscorlib/A.html#e4a35c1ec2b91f27" class="i method">GetTypeInfo</a>().<a href="@0@mscorlib/A.html#5670a765e2ccd508" class="i property">BaseType</a>;
            <b>return</b>
                <span class="r96 r">baseType</span> == <b>typeof</b>(<span class="i">Analyzer</span>) || <span class="r96 r">baseType</span> == <b>typeof</b>(<span class="i">Tokenizer</span>) ||
                <span class="r96 r">baseType</span> == <b>typeof</b>(<span class="i">TokenFilter</span>) || <span class="r96 r">baseType</span> == <b>typeof</b>(<span class="i">CharFilter</span>);
        }
 
        <b>private static bool</b> <a id="cb9291fecc4e6095" href="../R/cb9291fecc4e6095.html" target="n" data-glyph="76,1" class="i method">IsDeprecatedType</a>(<a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a> <span id="r97 rd" class="r97 r">candidateType</span>)
        {
            <b>return</b> <span class="r97 r">candidateType</span>.<a href="@0@mscorlib/A.html#e4a35c1ec2b91f27" class="i method">GetTypeInfo</a>().<a href="@0@mscorlib/A.html#0497c27b6539bfd9" class="i method">GetCustomAttribute</a>&lt;<a href="@0@mscorlib/A.html#d386ddc6e8f1405e" class="t t">ObsoleteAttribute</a>&gt;() != <b>null</b>;
        }
 
        <b>private static bool</b> <a id="aecb3680e0b10b35" href="../R/aecb3680e0b10b35.html" target="n" data-glyph="76,1" class="i method">IsTypePresentAtLeastOnce</a>(<a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a>, <b>int</b>&gt; <span id="r98 rd" class="r98 r">instanceCountMap</span>, <a href="@0@mscorlib/A.html#3d00eeab9feb80f3" class="t t">Type</a> <span id="r99 rd" class="r99 r">analysisType</span>)
        {
            <b>if</b> (<span class="r98 r">instanceCountMap</span>.<a href="@0@mscorlib/A.html#2e5bc6d8c0f21e67" class="i method">TryGetValue</a>(<span class="r99 r">analysisType</span>, <b>out int</b> <span id="r100 rd" class="r100 r">count</span>))
            {
                <b>return</b> <span class="r100 r">count</span> &gt;= 1;
            }
 
            <b>return</b> <b>false</b>;
        }
 
        <b>private static</b> <span class="i">Index</span> <a id="501b93f2a24943cd" href="../R/501b93f2a24943cd.html" target="n" data-glyph="76,1" class="i method">CreateTestIndex</a>() =&gt; <a href="IndexManagementTests.cs.html#595b9ae9bf7067b7" class="t t">IndexManagementTests</a>.<a href="IndexManagementTests.cs.html#dc265e538cd15eeb" class="i method">CreateTestIndex</a>();
 
        <b>private static void</b> <a id="850abfce944c63cd" href="../R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">AssertTokenInfoEqual</a>(
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r101 rd" class="r101 r">expectedToken</span>,
            <b>int</b> <span id="r102 rd" class="r102 r">expectedStartOffset</span>,
            <b>int</b> <span id="r103 rd" class="r103 r">expectedEndOffset</span>,
            <b>int</b> <span id="r104 rd" class="r104 r">expectedPosition</span>,
            <span class="i">TokenInfo</span> <span id="r105 rd" class="r105 r">actual</span>)
        {
            <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r105 r">actual</span>);
 
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r101 r">expectedToken</span>, <span class="r105 r">actual</span>.<span class="i">Token</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r102 r">expectedStartOffset</span>, <span class="r105 r">actual</span>.<span class="i">StartOffset</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r103 r">expectedEndOffset</span>, <span class="r105 r">actual</span>.<span class="i">EndOffset</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r104 r">expectedPosition</span>, <span class="r105 r">actual</span>.<span class="i">Position</span>);
        }
 
        <b>private static void</b> <a id="e222e659e2a65227" href="../R/e222e659e2a65227.html" target="n" data-glyph="76,1" class="i method">AssertAnalysisComponentsEqual</a>(<span class="i">Index</span> <span id="r106 rd" class="r106 r">expected</span>, <span class="i">Index</span> <span id="r107 rd" class="r107 r">actual</span>)
        {
            <span class="c">// Compare analysis components directly so that test failures show better comparisons.</span>
 
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r106 r">expected</span>.<span class="i">Analyzers</span>?.<span class="i">Count</span> ?? 0, <span class="r107 r">actual</span>.<span class="i">Analyzers</span>?.<span class="i">Count</span> ?? 0);
            <b>for</b> (<b>int</b> <span id="r108 rd" class="r108 r">i</span> = 0; <span class="r108 r">i</span> &lt; <span class="r106 r">expected</span>.<span class="i">Analyzers</span>?.<span class="i">Count</span>; <span class="r108 r">i</span>++)
            {
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r106 r">expected</span>.<span class="i">Analyzers</span>[<span class="r108 r">i</span>], <span class="r107 r">actual</span>.<span class="i">Analyzers</span>[<span class="r108 r">i</span>], <b>new</b> <a href="../ModelComparer/DataPlaneModelComparer.cs.html#e0d08ff069e1909f" class="t constructor">DataPlaneModelComparer</a>&lt;<span class="i">Analyzer</span>&gt;());
            }
 
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r106 r">expected</span>.<span class="i">Tokenizers</span>?.<span class="i">Count</span> ?? 0, <span class="r107 r">actual</span>.<span class="i">Tokenizers</span>?.<span class="i">Count</span> ?? 0);
            <b>for</b> (<b>int</b> <span id="r109 rd" class="r109 r">i</span> = 0; <span class="r109 r">i</span> &lt; <span class="r106 r">expected</span>.<span class="i">Tokenizers</span>?.<span class="i">Count</span>; <span class="r109 r">i</span>++)
            {
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r106 r">expected</span>.<span class="i">Tokenizers</span>[<span class="r109 r">i</span>], <span class="r107 r">actual</span>.<span class="i">Tokenizers</span>[<span class="r109 r">i</span>], <b>new</b> <a href="../ModelComparer/DataPlaneModelComparer.cs.html#e0d08ff069e1909f" class="t constructor">DataPlaneModelComparer</a>&lt;<span class="i">Tokenizer</span>&gt;());
            }
 
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r106 r">expected</span>.<span class="i">TokenFilters</span>?.<span class="i">Count</span> ?? 0, <span class="r107 r">actual</span>.<span class="i">TokenFilters</span>?.<span class="i">Count</span> ?? 0);
            <b>for</b> (<b>int</b> <span id="r110 rd" class="r110 r">i</span> = 0; <span class="r110 r">i</span> &lt; <span class="r106 r">expected</span>.<span class="i">TokenFilters</span>?.<span class="i">Count</span>; <span class="r110 r">i</span>++)
            {
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r106 r">expected</span>.<span class="i">TokenFilters</span>[<span class="r110 r">i</span>], <span class="r107 r">actual</span>.<span class="i">TokenFilters</span>[<span class="r110 r">i</span>], <b>new</b> <a href="../ModelComparer/DataPlaneModelComparer.cs.html#e0d08ff069e1909f" class="t constructor">DataPlaneModelComparer</a>&lt;<span class="i">TokenFilter</span>&gt;());
            }
 
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r106 r">expected</span>.<span class="i">CharFilters</span>?.<span class="i">Count</span> ?? 0, <span class="r107 r">actual</span>.<span class="i">CharFilters</span>?.<span class="i">Count</span> ?? 0);
            <b>for</b> (<b>int</b> <span id="r111 rd" class="r111 r">i</span> = 0; <span class="r111 r">i</span> &lt; <span class="r106 r">expected</span>.<span class="i">CharFilters</span>?.<span class="i">Count</span>; <span class="r111 r">i</span>++)
            {
                <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r106 r">expected</span>.<span class="i">CharFilters</span>[<span class="r111 r">i</span>], <span class="r107 r">actual</span>.<span class="i">CharFilters</span>[<span class="r111 r">i</span>], <b>new</b> <a href="../ModelComparer/DataPlaneModelComparer.cs.html#e0d08ff069e1909f" class="t constructor">DataPlaneModelComparer</a>&lt;<span class="i">CharFilter</span>&gt;());
            }
        }
 
        <b>private static</b> <span class="r112 r t">T</span>[] <a id="5f13991710b971ae" href="../R/5f13991710b971ae.html" target="n" data-glyph="76,1" class="i method">GetAllExtensibleEnumValues</a>&lt;<span id="r112 rd t" class="r112 r t">T</span>&gt;() =&gt;
            (<b>from</b> <span class="i">field</span> <b>in typeof</b>(<span class="r112 r t">T</span>).<a href="@0@mscorlib/A.html#eff1fcb9d5fe87a8" class="i method">GetFields</a>()
             <b>where</b> <span class="i">field</span>.<a href="@0@mscorlib/A.html#d630ef4efefb487f" class="i property">FieldType</a> == <b>typeof</b>(<span class="r112 r t">T</span>) &amp;&amp; <span class="i">field</span>.<a href="@0@mscorlib/A.html#4a719eb0e5e9e33e" class="i property">IsStatic</a>
             <b>select</b> <span class="i">field</span>.<a href="@0@mscorlib/A.html#f8ddbb1dc1c6b29e" class="i method">GetValue</a>(<b>null</b>)).<a href="@0@System.Core/A.html#27bb217a6d5457ec" class="i method">Cast</a>&lt;<span class="r112 r t">T</span>&gt;().<a href="@0@System.Core/A.html#783a052330e7d48d" class="i method">ToArray</a>();   <span class="c">// Force eager evaluation.</span>
 
        <b>private static</b> <span class="r113 r t">T</span>[] <a id="7d6e3009476883db" href="../R/7d6e3009476883db.html" target="n" data-glyph="76,1" class="i method">GetAllEnumValues</a>&lt;<span id="r113 rd t" class="r113 r t">T</span>&gt;() <b>where</b> <span class="r113 r t">T</span> : <b>struct</b> =&gt; <a href="@0@mscorlib/A.html#36729210e317a805" class="t t">Enum</a>.<a href="@0@mscorlib/A.html#20fa909ef3233d20" class="i method">GetValues</a>(<b>typeof</b>(<span class="r113 r t">T</span>)).<a href="@0@System.Core/A.html#27bb217a6d5457ec" class="i method">Cast</a>&lt;<span class="r113 r t">T</span>&gt;().<a href="@0@System.Core/A.html#783a052330e7d48d" class="i method">ToArray</a>();
 
        <span class="c">// If the Index has too many analysis components, split it up.</span>
        <b>private static</b> <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="i">Index</span>&gt; <a id="eb1250aa1b93c4a5" href="../R/eb1250aa1b93c4a5.html" target="n" data-glyph="76,1" class="i method">SplitIndex</a>(<span class="i">Index</span> <span id="r114 rd" class="r114 r">index</span>)
        {
            <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="i">Analyzer</span>&gt;&gt; <span id="r115 rd" class="r115 r">analyzerGroups</span> = <span class="i">SplitAnalysisComponents</span>(<span class="r114 r">index</span>.<span class="i">Analyzers</span>);
            <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="i">Tokenizer</span>&gt;&gt; <span id="r116 rd" class="r116 r">tokenizerGroups</span> = <span class="i">SplitAnalysisComponents</span>(<span class="r114 r">index</span>.<span class="i">Tokenizers</span>);
            <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="i">TokenFilter</span>&gt;&gt; <span id="r117 rd" class="r117 r">tokenFilterGroups</span> = <span class="i">SplitAnalysisComponents</span>(<span class="r114 r">index</span>.<span class="i">TokenFilters</span>);
            <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="i">CharFilter</span>&gt;&gt; <span id="r118 rd" class="r118 r">charFilterGroups</span> = <span class="i">SplitAnalysisComponents</span>(<span class="r114 r">index</span>.<span class="i">CharFilters</span>);
 
            <b>int</b> <span id="r119 rd" class="r119 r">biggestGroupSize</span> =
                <b>new</b>[] { <span class="r115 r">analyzerGroups</span>.<a href="@0@System.Core/A.html#41ef9e39e54d0d0b" class="i method">Count</a>(), <span class="r116 r">tokenizerGroups</span>.<a href="@0@System.Core/A.html#41ef9e39e54d0d0b" class="i method">Count</a>(), <span class="r117 r">tokenFilterGroups</span>.<a href="@0@System.Core/A.html#41ef9e39e54d0d0b" class="i method">Count</a>(), <span class="r118 r">charFilterGroups</span>.<a href="@0@System.Core/A.html#41ef9e39e54d0d0b" class="i method">Count</a>() }.<a href="@0@System.Core/A.html#6ca1a80e1f22e519" class="i method">Max</a>();
 
            <b>if</b> (<span class="r119 r">biggestGroupSize</span> == 1)
            {
                <span class="c">// No splitting necessary; Return the original index.</span>
                <b>yield</b> <b>return</b> <span class="r114 r">index</span>;
                <b>yield</b> <b>break</b>;
            }
 
            <b>foreach</b> (<a href="@0@mscorlib/A.html#3acf01620172c7f0" class="k">var</a> <span id="r120 rd" class="r120 r">analyzers</span> <b>in</b> <span class="r115 r">analyzerGroups</span>)
            {
                <span class="i">Index</span> <span id="r121 rd" class="r121 r">smallerIndex</span> = <a href="#501b93f2a24943cd" class="i method">CreateTestIndex</a>();
                <span class="r121 r">smallerIndex</span>.<span class="i">Analyzers</span> = <span class="r120 r">analyzers</span>.<a href="@0@System.Core/A.html#783a052330e7d48d" class="i method">ToArray</a>();
                <b>yield</b> <b>return</b> <span class="r121 r">smallerIndex</span>;
            }
 
            <b>foreach</b> (<a href="@0@mscorlib/A.html#3acf01620172c7f0" class="k">var</a> <span id="r122 rd" class="r122 r">tokenizers</span> <b>in</b> <span class="r116 r">tokenizerGroups</span>)
            {
                <span class="i">Index</span> <span id="r123 rd" class="r123 r">smallerIndex</span> = <a href="#501b93f2a24943cd" class="i method">CreateTestIndex</a>();
                <span class="r123 r">smallerIndex</span>.<span class="i">Tokenizers</span> = <span class="r122 r">tokenizers</span>.<a href="@0@System.Core/A.html#783a052330e7d48d" class="i method">ToArray</a>();
                <b>yield</b> <b>return</b> <span class="r123 r">smallerIndex</span>;
            }
 
            <b>foreach</b> (<a href="@0@mscorlib/A.html#3acf01620172c7f0" class="k">var</a> <span id="r124 rd" class="r124 r">tokenFilters</span> <b>in</b> <span class="r117 r">tokenFilterGroups</span>)
            {
                <span class="i">Index</span> <span id="r125 rd" class="r125 r">smallerIndex</span> = <a href="#501b93f2a24943cd" class="i method">CreateTestIndex</a>();
                <span class="r125 r">smallerIndex</span>.<span class="i">TokenFilters</span> = <span class="r124 r">tokenFilters</span>.<a href="@0@System.Core/A.html#783a052330e7d48d" class="i method">ToArray</a>();
                <b>yield</b> <b>return</b> <span class="r125 r">smallerIndex</span>;
            }
 
            <b>foreach</b> (<a href="@0@mscorlib/A.html#3acf01620172c7f0" class="k">var</a> <span id="r126 rd" class="r126 r">charFilters</span> <b>in</b> <span class="r118 r">charFilterGroups</span>)
            {
                <span class="i">Index</span> <span id="r127 rd" class="r127 r">smallerIndex</span> = <a href="#501b93f2a24943cd" class="i method">CreateTestIndex</a>();
                <span class="r127 r">smallerIndex</span>.<span class="i">CharFilters</span> = <span class="r126 r">charFilters</span>.<a href="@0@System.Core/A.html#783a052330e7d48d" class="i method">ToArray</a>();
                <b>yield</b> <b>return</b> <span class="r127 r">smallerIndex</span>;
            }
        }
 
        <b>private static</b> <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="r128 r t">T</span>&gt;&gt; <a id="90c3785abf59cfbd" href="../R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">SplitAnalysisComponents</a>&lt;<span id="r128 rd t" class="r128 r t">T</span>&gt;(<a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="r128 r t">T</span>&gt; <span id="r129 rd" class="r129 r">components</span>)
        {
            <b>const int</b> <span id="r130 rd" class="r130 r">AnalysisComponentLimit</span> = 50;
 
            <span class="r129 r">components</span> = <span class="r129 r">components</span> ?? <a href="@0@System.Core/A.html#577032c8811e20d3" class="t t">Enumerable</a>.<a href="@0@System.Core/A.html#4d026772cf3399f5" class="i method">Empty</a>&lt;<span class="r128 r t">T</span>&gt;();
            <b>if</b> (<span class="r129 r">components</span>.<a href="@0@System.Core/A.html#41ef9e39e54d0d0b" class="i method">Count</a>() &lt;= <span class="r130 r">AnalysisComponentLimit</span>)
            {
                <b>yield</b> <b>return</b> <span class="r129 r">components</span>;
                <b>yield</b> <b>break</b>;
            }
 
            <b>while</b> (<span class="r129 r">components</span>.<a href="@0@System.Core/A.html#8788153112b7ffd0" class="i method">Any</a>())
            {
                <b>yield</b> <b>return</b> <span class="r129 r">components</span>.<a href="@0@System.Core/A.html#aae92b018fa12b39" class="i method">Take</a>(<span class="r130 r">AnalysisComponentLimit</span>);
                <span class="r129 r">components</span> = <span class="r129 r">components</span>.<a href="@0@System.Core/A.html#90ccdbd47b57182e" class="i method">Skip</a>(<span class="r130 r">AnalysisComponentLimit</span>);
            }
        }
 
        <b>private void</b> <a id="91141d7857218276" href="../R/91141d7857218276.html" target="n" data-glyph="76,1" class="i method">TestAnalysisComponents</a>(<span class="i">Index</span> <span id="r131 rd" class="r131 r">index</span>, <span class="i">Index</span> <span id="r132 rd" class="r132 r">expectedIndex</span> = <b>null</b>)
        {
            <span class="r132 r">expectedIndex</span> = <span class="r132 r">expectedIndex</span> ?? <span class="r131 r">index</span>;
 
            <span class="i">SearchServiceClient</span> <span id="r133 rd" class="r133 r">client</span> = <a href="/Search.Management.Tests/A.html#879894590f9e382d" class="i property">Data</a>.<a href="../Utilities/SearchServiceFixtureExtensions.cs.html#f4e5d5c8349136d3" class="i method">GetSearchServiceClient</a>();
 
            <b>foreach</b> (<a href="#dfe3b8f435c41279" class="k">var</a> <span id="r134 rd" class="r134 r">testCase</span> <b>in</b> <a href="#eb1250aa1b93c4a5" class="i method">SplitIndex</a>(<span class="r131 r">index</span>).<a href="@0@System.Core/A.html#2b8d0f02389aab71" class="i method">Zip</a>(<a href="#eb1250aa1b93c4a5" class="i method">SplitIndex</a>(<span class="r132 r">expectedIndex</span>), (<span id="r135 rd" class="r135 r">i</span>, <span id="r136 rd" class="r136 r">e</span>) =&gt; <b>new</b> { <a href="#3dfa3812ca56849a" class="i property">Index</a> = <span class="r135 r">i</span>, <a href="#e76ab7ae552f8ed3" class="i property">ExpectedIndex</a> = <span class="r136 r">e</span> }))
            {
                <span class="i">Index</span> <span id="r137 rd" class="r137 r">createdIndex</span> = <span class="r133 r">client</span>.<span class="i">Indexes</span>.<span class="i">Create</span>(<span class="r134 r">testCase</span>.<a href="#3dfa3812ca56849a" class="i property">Index</a>);
 
                <b>try</b>
                {
                    <a href="#e222e659e2a65227" class="i method">AssertAnalysisComponentsEqual</a>(<span class="r134 r">testCase</span>.<a href="#e76ab7ae552f8ed3" class="i property">ExpectedIndex</a>, <span class="r137 r">createdIndex</span>);
                }
                <b>finally</b>
                {
                    <span class="r133 r">client</span>.<span class="i">Indexes</span>.<span class="i">Delete</span>(<span class="r137 r">createdIndex</span>.<span class="i">Name</span>);
                }
            }
        }
    }
}
</pre></td></tr></table></div></body></html>

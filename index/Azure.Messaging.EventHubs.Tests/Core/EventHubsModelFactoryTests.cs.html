<!DOCTYPE html>
<html><head><title>EventHubsModelFactoryTests.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(231);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Azure.Messaging.EventHubs.Tests/Core/EventHubsModelFactoryTests.cs" target="_top">Core\EventHubsModelFactoryTests.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Azure.Messaging.EventHubs.Tests" target="_top">Azure.Messaging.EventHubs.Tests.csproj</a> (Azure.Messaging.EventHubs.Tests)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License.</span>
 
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Messaging</span>.<span class="i n">EventHubs</span>.<span class="i n">Consumer</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Messaging</span>.<span class="i n">EventHubs</span>.<span class="i n">Producer</span>;
<b>using</b> <span class="i n">NUnit</span>.<span class="i n">Framework</span>;
 
<b>namespace</b> <span class="i n">Azure</span>.<span class="i n">Messaging</span>.<span class="i n">EventHubs</span>.<span class="i n">Tests</span>
{
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
    <span class="c">///</span><span class="c">   The suite of tests for the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="/Azure.Messaging.EventHubs/A.html#17797dbf90671a42" class="t t">EventHubsModelFactory</a><span class="c">&quot;</span> <span class="c">/&gt;</span>
    <span class="c">///</span><span class="c">   class.</span>
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
    <span class="c">///</span>
    [<span class="t constructor">TestFixture</span>]
    <b>public class</b> <a id="940d1f8db922beaf" href="../R/../../0000000000.html" target="n" data-glyph="0,0" class="t t"><span id="7437d372d87de606">EventHubsModelFactoryTests</span></a>
    {
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Verifies functionality of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="/Azure.Messaging.EventHubs/A.html#17797dbf90671a42" class="t t">EventHubsModelFactory</a>.<a href="/Azure.Messaging.EventHubs/A.html#7dde7885cdfe9191" class="i method">EventHubProperties</a><span class="c">&quot;</span> <span class="c">/&gt;</span>
        <span class="c">///</span><span class="c">   method.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        [<span class="t constructor">Test</span>]
        <b>public void</b> <a id="8fdee5ebdf731723" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">EventHubPropertiesInitializesProperties</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r0 rd" class="r0 r">name</span> = <span class="s">&quot;fakename&quot;</span>;
            <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="k">var</a> <span id="r1 rd" class="r1 r">createdOn</span> = <b>new</b> <a href="@0@mscorlib/A.html#c5a5d2a27921e551" class="t constructor">DateTimeOffset</a>(2015, 10, 27, 12, 0, 0, <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#225346b4cd3a8300" class="i field">Zero</a>);
            <b>var</b> <span id="r2 rd" class="r2 r">partitions</span> = <b>new</b>[] { <span class="s">&quot;0&quot;</span>, <span class="s">&quot;2&quot;</span>, <span class="s">&quot;4&quot;</span>, <span class="s">&quot;8&quot;</span> };
            <a href="/Azure.Messaging.EventHubs/A.html#6ee60bd5de616192" class="k">var</a> <span id="r3 rd" class="r3 r">properties</span> = <a href="/Azure.Messaging.EventHubs/A.html#17797dbf90671a42" class="t t">EventHubsModelFactory</a>.<a href="/Azure.Messaging.EventHubs/A.html#7dde7885cdfe9191" class="i method">EventHubProperties</a>(<span class="r0 r">name</span>, <span class="r1 r">createdOn</span>, <span class="r2 r">partitions</span>);
 
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r3 r">properties</span>, <span class="t t">Is</span>.<span class="i property">Not</span>.<span class="i property">Null</span>, <span class="s">&quot;The properties should have been created.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r3 r">properties</span>.<a href="/Azure.Messaging.EventHubs/A.html#990a4e41cc13e820" class="i property">Name</a>, <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r0 r">name</span>), <span class="s">&quot;The name should have been set.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r3 r">properties</span>.<a href="/Azure.Messaging.EventHubs/A.html#4deb35e0bd411f7d" class="i property">CreatedOn</a>, <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r1 r">createdOn</span>), <span class="s">&quot;The creation date/time should have been set.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r3 r">properties</span>.<a href="/Azure.Messaging.EventHubs/A.html#8f4d5f8630f084c0" class="i property">PartitionIds</a>, <span class="t t">Is</span>.<span class="i method">EquivalentTo</span>(<span class="r2 r">partitions</span>), <span class="s">&quot;The partition identifiers should have been set.&quot;</span>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Verifies functionality of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="/Azure.Messaging.EventHubs/A.html#17797dbf90671a42" class="t t">EventHubsModelFactory</a>.<a href="/Azure.Messaging.EventHubs/A.html#84be8aca7ac34310" class="i method">PartitionProperties</a><span class="c">&quot;</span> <span class="c">/&gt;</span>
        <span class="c">///</span><span class="c">   method.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        [<span class="t constructor">Test</span>]
        <b>public void</b> <a id="c24bcb5c011ba8f2" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">PartitionPropertiesInitializesProperties</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r4 rd" class="r4 r">eventHubName</span> = <span class="s">&quot;eventHubName&quot;</span>;
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r5 rd" class="r5 r">partitionId</span> = <span class="s">&quot;0&quot;</span>;
            <a href="@0@mscorlib/A.html#f1b135ff6c380b37" class="k">var</a> <span id="r6 rd" class="r6 r">isEmpty</span> = <b>false</b>;
            <a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r7 rd" class="r7 r">beginningSequenceNumber</span> = 123;
            <a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r8 rd" class="r8 r">lastSequenceNumber</span> = 9999;
            <a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r9 rd" class="r9 r">lastOffset</span> = 767;
            <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="k">var</a> <span id="r10 rd" class="r10 r">lastEnqueuedTime</span> = <b>new</b> <a href="@0@mscorlib/A.html#c5a5d2a27921e551" class="t constructor">DateTimeOffset</a>(2015, 10, 27, 12, 0, 0, <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#225346b4cd3a8300" class="i field">Zero</a>);
            <a href="/Azure.Messaging.EventHubs/A.html#9311a292681a1af8" class="k">var</a> <span id="r11 rd" class="r11 r">properties</span> = <a href="/Azure.Messaging.EventHubs/A.html#17797dbf90671a42" class="t t">EventHubsModelFactory</a>.<a href="/Azure.Messaging.EventHubs/A.html#84be8aca7ac34310" class="i method">PartitionProperties</a>(<span class="r4 r">eventHubName</span>, <span class="r5 r">partitionId</span>, <span class="r6 r">isEmpty</span>, <span class="r7 r">beginningSequenceNumber</span>, <span class="r8 r">lastSequenceNumber</span>, <span class="r9 r">lastOffset</span>, <span class="r10 r">lastEnqueuedTime</span>);
 
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r11 r">properties</span>, <span class="t t">Is</span>.<span class="i property">Not</span>.<span class="i property">Null</span>, <span class="s">&quot;The properties should have been created.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r11 r">properties</span>.<a href="/Azure.Messaging.EventHubs/A.html#39e643022d04a91f" class="i property">EventHubName</a>, <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r4 r">eventHubName</span>), <span class="s">&quot;The event hub name should have been set.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r11 r">properties</span>.<a href="/Azure.Messaging.EventHubs/A.html#9498a61fa7d45392" class="i property">Id</a>, <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r5 r">partitionId</span>), <span class="s">&quot;The partition identifier should have been set.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r11 r">properties</span>.<a href="/Azure.Messaging.EventHubs/A.html#d478a5e2b20f7cf6" class="i property">IsEmpty</a>, <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r6 r">isEmpty</span>), <span class="s">&quot;The `is empty` flag should have been set.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r11 r">properties</span>.<a href="/Azure.Messaging.EventHubs/A.html#bc1ef974a18adbf8" class="i property">BeginningSequenceNumber</a>, <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r7 r">beginningSequenceNumber</span>), <span class="s">&quot;The beginning sequence number should have been set.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r11 r">properties</span>.<a href="/Azure.Messaging.EventHubs/A.html#ba1db09430c53626" class="i property">LastEnqueuedSequenceNumber</a>, <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r8 r">lastSequenceNumber</span>), <span class="s">&quot;The last sequence number should have been set.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r11 r">properties</span>.<a href="/Azure.Messaging.EventHubs/A.html#e7791f01a02650e6" class="i property">LastEnqueuedOffset</a>, <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r9 r">lastOffset</span>), <span class="s">&quot;The last offset should have been set.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r11 r">properties</span>.<a href="/Azure.Messaging.EventHubs/A.html#dad24737a8bf7ddb" class="i property">LastEnqueuedTime</a>, <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r10 r">lastEnqueuedTime</span>), <span class="s">&quot;The last enqueue date/time should have been set.&quot;</span>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Verifies functionality of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="/Azure.Messaging.EventHubs/A.html#17797dbf90671a42" class="t t">EventHubsModelFactory</a>.<a href="/Azure.Messaging.EventHubs/A.html#84be8aca7ac34310" class="i method">PartitionProperties</a><span class="c">&quot;</span> <span class="c">/&gt;</span>
        <span class="c">///</span><span class="c">   method.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        [<span class="t constructor">Test</span>]
        <b>public void</b> <a id="05987e239a7d4ed6" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">PartitionPublishingPropertiesInitializesProperties</a>()
        {
            <a href="@0@mscorlib/A.html#f1b135ff6c380b37" class="k">var</a> <span id="r12 rd" class="r12 r">isIdempotentPublishingEnabled</span> = <b>true</b>;
            <a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r13 rd" class="r13 r">producerGroupId</span> = 675;
            <a href="@0@mscorlib/A.html#4f2f28ae4cd2bc79" class="k">var</a> <span id="r14 rd" class="r14 r">ownerLevel</span> = (<b>short</b>)12;
            <a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r15 rd" class="r15 r">lastPublishedSequenceNumber</span> = 4;
            <a href="/Azure.Messaging.EventHubs/A.html#6fbaf58e86a0ae15" class="k">var</a> <span id="r16 rd" class="r16 r">properties</span> = <a href="/Azure.Messaging.EventHubs/A.html#17797dbf90671a42" class="t t">EventHubsModelFactory</a>.<a href="/Azure.Messaging.EventHubs/A.html#1db7cc62e0776e31" class="i method">PartitionPublishingProperties</a>(<span class="r12 r">isIdempotentPublishingEnabled</span>, <span class="r13 r">producerGroupId</span>, <span class="r14 r">ownerLevel</span>, <span class="r15 r">lastPublishedSequenceNumber</span>);
 
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r16 r">properties</span>, <span class="t t">Is</span>.<span class="i property">Not</span>.<span class="i property">Null</span>, <span class="s">&quot;The properties should have been created.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r16 r">properties</span>.<a href="/Azure.Messaging.EventHubs/A.html#eae401a3b5577550" class="i property">IsIdempotentPublishingEnabled</a>, <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r12 r">isIdempotentPublishingEnabled</span>), <span class="s">&quot;The idempotent publishing flag should have been set.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r16 r">properties</span>.<a href="/Azure.Messaging.EventHubs/A.html#07e585fe2345ce85" class="i property">ProducerGroupId</a>, <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r13 r">producerGroupId</span>), <span class="s">&quot;The producer group should have been set.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r16 r">properties</span>.<a href="/Azure.Messaging.EventHubs/A.html#d5551406373e4742" class="i property">OwnerLevel</a>, <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r14 r">ownerLevel</span>), <span class="s">&quot;The owner level should have been set.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r16 r">properties</span>.<a href="/Azure.Messaging.EventHubs/A.html#0e8716acd3c0a7db" class="i property">LastPublishedSequenceNumber</a>, <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r15 r">lastPublishedSequenceNumber</span>), <span class="s">&quot;The last sequence number should have been set.&quot;</span>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Verifies functionality of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="/Azure.Messaging.EventHubs/A.html#17797dbf90671a42" class="t t">EventHubsModelFactory</a>.<a href="/Azure.Messaging.EventHubs/A.html#84c01ac932d6ea83" class="i method">LastEnqueuedEventProperties</a><span class="c">&quot;</span> <span class="c">/&gt;</span>
        <span class="c">///</span><span class="c">   method.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        [<span class="t constructor">Test</span>]
        <b>public void</b> <a id="5edcbc911236ebc2" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">LastEnqueuedEventPropertiesInitializesProperties</a>()
        {
            <a href="@0@mscorlib/A.html#e566178cce890c36" class="k">var</a> <span id="r17 rd" class="r17 r">lastSequence</span> = <b>long</b>.<a href="@0@mscorlib/A.html#52a2718fdacedb8b" class="i field">MaxValue</a> - 100;
            <a href="@0@mscorlib/A.html#e566178cce890c36" class="k">var</a> <span id="r18 rd" class="r18 r">lastOffset</span> = <b>long</b>.<a href="@0@mscorlib/A.html#52a2718fdacedb8b" class="i field">MaxValue</a> - 10;
            <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="k">var</a> <span id="r19 rd" class="r19 r">lastEnqueued</span> = <b>new</b> <a href="@0@mscorlib/A.html#c5a5d2a27921e551" class="t constructor">DateTimeOffset</a>(2015, 10, 27, 12, 0, 0, <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#225346b4cd3a8300" class="i field">Zero</a>);
            <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="k">var</a> <span id="r20 rd" class="r20 r">lastReceived</span> = <b>new</b> <a href="@0@mscorlib/A.html#c5a5d2a27921e551" class="t constructor">DateTimeOffset</a>(2012, 03, 04, 08, 0, 0, <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#225346b4cd3a8300" class="i field">Zero</a>);
            <a href="/Azure.Messaging.EventHubs/A.html#e54b900e1c5c3c73" class="k">var</a> <span id="r21 rd" class="r21 r">properties</span> = <a href="/Azure.Messaging.EventHubs/A.html#17797dbf90671a42" class="t t">EventHubsModelFactory</a>.<a href="/Azure.Messaging.EventHubs/A.html#84c01ac932d6ea83" class="i method">LastEnqueuedEventProperties</a>(<span class="r17 r">lastSequence</span>, <span class="r18 r">lastOffset</span>, <span class="r19 r">lastEnqueued</span>, <span class="r20 r">lastReceived</span>);
 
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r21 r">properties</span>, <span class="t t">Is</span>.<span class="i property">Not</span>.<span class="i property">Null</span>, <span class="s">&quot;The properties should have been created.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r21 r">properties</span>.<a href="/Azure.Messaging.EventHubs/A.html#4181e95a06ff48c5" class="i property">SequenceNumber</a>, <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r17 r">lastSequence</span>), <span class="s">&quot;The sequence number should have been set.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r21 r">properties</span>.<a href="/Azure.Messaging.EventHubs/A.html#73f953638b4d101f" class="i property">Offset</a>, <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r18 r">lastOffset</span>), <span class="s">&quot;The offset should have been set.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r21 r">properties</span>.<a href="/Azure.Messaging.EventHubs/A.html#987806cf5307fa83" class="i property">EnqueuedTime</a>, <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r19 r">lastEnqueued</span>), <span class="s">&quot;The enqueued date/time should have been set.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r21 r">properties</span>.<a href="/Azure.Messaging.EventHubs/A.html#c1bad4d9526680af" class="i property">LastReceivedTime</a>, <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r20 r">lastReceived</span>), <span class="s">&quot;The last received date/time should have been set.&quot;</span>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Verifies functionality of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="/Azure.Messaging.EventHubs/A.html#17797dbf90671a42" class="t t">EventHubsModelFactory</a>.<a href="/Azure.Messaging.EventHubs/A.html#8551375178f66662" class="i method">PartitionContext</a><span class="c">&quot;</span> <span class="c">/&gt;</span>
        <span class="c">///</span><span class="c">   method.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        [<span class="t constructor">Test</span>]
        <b>public void</b> <a id="98d45c96a3734a2b" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">PartitionContextInitializesProperties</a>()
        {
            <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="k">var</a> <span id="r22 rd" class="r22 r">fakeDate</span> = <b>new</b> <a href="@0@mscorlib/A.html#c5a5d2a27921e551" class="t constructor">DateTimeOffset</a>(2015, 10, 27, 12, 0, 0, <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#225346b4cd3a8300" class="i field">Zero</a>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r23 rd" class="r23 r">partition</span> = <span class="s">&quot;0&quot;</span>;
            <a href="/Azure.Messaging.EventHubs/A.html#e54b900e1c5c3c73" class="k">var</a> <span id="r24 rd" class="r24 r">properties</span> = <a href="/Azure.Messaging.EventHubs/A.html#17797dbf90671a42" class="t t">EventHubsModelFactory</a>.<a href="/Azure.Messaging.EventHubs/A.html#84c01ac932d6ea83" class="i method">LastEnqueuedEventProperties</a>(465, 988, <span class="r22 r">fakeDate</span>, <span class="r22 r">fakeDate</span>);
            <a href="/Azure.Messaging.EventHubs/A.html#224668d23057d29b" class="k">var</a> <span id="r25 rd" class="r25 r">context</span> = <a href="/Azure.Messaging.EventHubs/A.html#17797dbf90671a42" class="t t">EventHubsModelFactory</a>.<a href="/Azure.Messaging.EventHubs/A.html#8551375178f66662" class="i method">PartitionContext</a>(<span class="r23 r">partition</span>, <span class="r24 r">properties</span>);
 
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r25 r">context</span>, <span class="t t">Is</span>.<span class="i property">Not</span>.<span class="i property">Null</span>, <span class="s">&quot;The context should have been created.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r25 r">context</span>.<a href="/Azure.Messaging.EventHubs/A.html#cd3de8a2df1fbc04" class="i property">PartitionId</a>, <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r23 r">partition</span>), <span class="s">&quot;The context should have been set.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r25 r">context</span>.<a href="/Azure.Messaging.EventHubs/A.html#a9065742cbb15e0b" class="i method">ReadLastEnqueuedEventProperties</a>(), <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r24 r">properties</span>), <span class="s">&quot;The last enqueued event properties should have been set.&quot;</span>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Verifies functionality of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="/Azure.Messaging.EventHubs/A.html#17797dbf90671a42" class="t t">EventHubsModelFactory</a>.<a href="/Azure.Messaging.EventHubs/A.html#8551375178f66662" class="i method">PartitionContext</a><span class="c">&quot;</span> <span class="c">/&gt;</span>
        <span class="c">///</span><span class="c">   method.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        [<span class="t constructor">Test</span>]
        <b>public void</b> <a id="fd093ccf16405f0c" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">PartitionContextDefaultsLastEnqueuedEventProperties</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r26 rd" class="r26 r">partition</span> = <span class="s">&quot;0&quot;</span>;
            <a href="/Azure.Messaging.EventHubs/A.html#224668d23057d29b" class="k">var</a> <span id="r27 rd" class="r27 r">context</span> = <a href="/Azure.Messaging.EventHubs/A.html#17797dbf90671a42" class="t t">EventHubsModelFactory</a>.<a href="/Azure.Messaging.EventHubs/A.html#8551375178f66662" class="i method">PartitionContext</a>(<span class="r26 r">partition</span>);
 
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r27 r">context</span>, <span class="t t">Is</span>.<span class="i property">Not</span>.<span class="i property">Null</span>, <span class="s">&quot;The context should have been created.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r27 r">context</span>.<a href="/Azure.Messaging.EventHubs/A.html#cd3de8a2df1fbc04" class="i property">PartitionId</a>, <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r26 r">partition</span>), <span class="s">&quot;The context should have been set.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r27 r">context</span>.<a href="/Azure.Messaging.EventHubs/A.html#a9065742cbb15e0b" class="i method">ReadLastEnqueuedEventProperties</a>(), <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<b>new</b> <a href="/Azure.Messaging.EventHubs/A.html#e54b900e1c5c3c73" class="t constructor">LastEnqueuedEventProperties</a>()), <span class="s">&quot;Reading last enqueued event properties should return a default instance.&quot;</span>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Verifies functionality of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="/Azure.Messaging.EventHubs/A.html#17797dbf90671a42" class="t t">EventHubsModelFactory</a>.<a href="/Azure.Messaging.EventHubs/A.html#bd107cfd0cbe5593" class="i method">EventData</a><span class="c">&quot;</span> <span class="c">/&gt;</span>
        <span class="c">///</span><span class="c">   method.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        [<span class="t constructor">Test</span>]
        <b>public void</b> <a id="5258865beb3a2df7" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">EventDataInitializesProperties</a>()
        {
            <a href="/System.Memory.Data/A.html#b41210c71e293f88" class="k">var</a> <span id="r28 rd" class="r28 r">body</span> = <b>new</b> <a href="/System.Memory.Data/A.html#c9736bff8edcba3b" class="t constructor">BinaryData</a>(<span class="s">&quot;Hello&quot;</span>);
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="k">var</a> <span id="r29 rd" class="r29 r">properties</span> = <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <b>object</b>&gt; {{ <span class="s">&quot;id&quot;</span>, 12 }};
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="k">var</a> <span id="r30 rd" class="r30 r">systemProperties</span> = <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <b>object</b>&gt; {{ <span class="s">&quot;custom&quot;</span>, <span class="s">&quot;sys-value&quot;</span> }};
            <a href="@0@mscorlib/A.html#e566178cce890c36" class="k">var</a> <span id="r31 rd" class="r31 r">sequenceNumber</span> = <b>long</b>.<a href="@0@mscorlib/A.html#52a2718fdacedb8b" class="i field">MaxValue</a> - 512;
            <a href="@0@mscorlib/A.html#e566178cce890c36" class="k">var</a> <span id="r32 rd" class="r32 r">offset</span> = <b>long</b>.<a href="@0@mscorlib/A.html#52a2718fdacedb8b" class="i field">MaxValue</a> - 1024;
            <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="k">var</a> <span id="r33 rd" class="r33 r">enqueueTime</span> = <b>new</b> <a href="@0@mscorlib/A.html#c5a5d2a27921e551" class="t constructor">DateTimeOffset</a>(2015, 10, 27, 12, 0, 0, <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#225346b4cd3a8300" class="i field">Zero</a>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r34 rd" class="r34 r">partitionKey</span> = <span class="s">&quot;omghai!&quot;</span>;
            <a href="/Azure.Messaging.EventHubs/A.html#557aa370d1369b89" class="k">var</a> <span id="r35 rd" class="r35 r">eventData</span> = <a href="/Azure.Messaging.EventHubs/A.html#17797dbf90671a42" class="t t">EventHubsModelFactory</a>.<a href="/Azure.Messaging.EventHubs/A.html#bd107cfd0cbe5593" class="i method">EventData</a>(<span class="r28 r">body</span>, <span class="r29 r">properties</span>, <span class="r30 r">systemProperties</span>, <span class="r34 r">partitionKey</span>, <span class="r31 r">sequenceNumber</span>, <span class="r32 r">offset</span>, <span class="r33 r">enqueueTime</span>);
 
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r35 r">eventData</span>, <span class="t t">Is</span>.<span class="i property">Not</span>.<span class="i property">Null</span>, <span class="s">&quot;The event should have been created.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r35 r">eventData</span>.<a href="/Azure.Messaging.EventHubs/A.html#34de2ebe2c37ef2d" class="i property">EventBody</a>.<a href="/System.Memory.Data/A.html#cab71e7b2240cb5c" class="i method">ToString</a>(), <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r28 r">body</span>.<a href="/System.Memory.Data/A.html#cab71e7b2240cb5c" class="i method">ToString</a>()), <span class="s">&quot;The event body should have been set.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r35 r">eventData</span>.<a href="/Azure.Messaging.EventHubs/A.html#bf63988eb57c4324" class="i property">Properties</a>, <span class="t t">Is</span>.<span class="i method">EquivalentTo</span>(<span class="r29 r">properties</span>), <span class="s">&quot;The properties should have been set.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r35 r">eventData</span>.<a href="/Azure.Messaging.EventHubs/A.html#201adc8216e4eb51" class="i property">SystemProperties</a>, <span class="t t">Is</span>.<span class="i method">EquivalentTo</span>(<span class="r30 r">systemProperties</span>), <span class="s">&quot;The system properties should have been set.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r35 r">eventData</span>.<a href="/Azure.Messaging.EventHubs/A.html#ea38956a292fbc2a" class="i property">PartitionKey</a>, <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r34 r">partitionKey</span>), <span class="s">&quot;The partition key should have been set.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r35 r">eventData</span>.<a href="/Azure.Messaging.EventHubs/A.html#a458a2d181ec7bb3" class="i property">SequenceNumber</a>, <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r31 r">sequenceNumber</span>), <span class="s">&quot;The sequence number should have been set.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r35 r">eventData</span>.<a href="/Azure.Messaging.EventHubs/A.html#64e1427ef56874d4" class="i property">Offset</a>, <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r32 r">offset</span>), <span class="s">&quot;The offset should have been set.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r35 r">eventData</span>.<a href="/Azure.Messaging.EventHubs/A.html#1329a88ca5242716" class="i property">EnqueuedTime</a>, <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r33 r">enqueueTime</span>), <span class="s">&quot;The sequence number should have been set.&quot;</span>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Verifies functionality of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="/Azure.Messaging.EventHubs/A.html#17797dbf90671a42" class="t t">EventHubsModelFactory</a>.<a href="/Azure.Messaging.EventHubs/A.html#9ef68a638b95200d" class="i method">EventDataBatch</a><span class="c">&quot;</span> <span class="c">/&gt;</span>
        <span class="c">///</span><span class="c">   method.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        [<span class="t constructor">Test</span>]
        <b>public void</b> <a id="3341256ddc7168bf" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">EventDataBatchInitializesProperties</a>()
        {
            <a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r36 rd" class="r36 r">size</span> = 1024;
            <a href="@0@mscorlib/A.html#cf7f4095e4de7646" class="k">var</a> <span id="r37 rd" class="r37 r">store</span> = <b>new</b> <a href="@0@mscorlib/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<a href="/Azure.Messaging.EventHubs/A.html#557aa370d1369b89" class="t t">EventData</a>&gt; { <b>new</b> <a href="/Azure.Messaging.EventHubs/A.html#d75ad638cb32e3d2" class="t constructor">EventData</a>(<a href="@0@mscorlib/A.html#156e066ecc4ccedf" class="t t">Array</a>.<a href="@0@mscorlib/A.html#bc9fd1be0e4f4e70" class="i method">Empty</a>&lt;<b>byte</b>&gt;()), <b>new</b> <a href="/Azure.Messaging.EventHubs/A.html#d75ad638cb32e3d2" class="t constructor">EventData</a>(<a href="@0@mscorlib/A.html#156e066ecc4ccedf" class="t t">Array</a>.<a href="@0@mscorlib/A.html#bc9fd1be0e4f4e70" class="i method">Empty</a>&lt;<b>byte</b>&gt;()) };
            <a href="/Azure.Messaging.EventHubs/A.html#efa8982626004b5d" class="k">var</a> <span id="r38 rd" class="r38 r">options</span> = <b>new</b> <a href="/Azure.Messaging.EventHubs/A.html#b19386ed0bc149ee" class="t constructor">CreateBatchOptions</a> { <a href="/Azure.Messaging.EventHubs/A.html#eccd10c79558085a" class="i property">MaximumSizeInBytes</a> = 2048 };
            <a href="/Azure.Messaging.EventHubs/A.html#c992a211bbcf6874" class="k">var</a> <span id="r39 rd" class="r39 r">batch</span> = <a href="/Azure.Messaging.EventHubs/A.html#17797dbf90671a42" class="t t">EventHubsModelFactory</a>.<a href="/Azure.Messaging.EventHubs/A.html#9ef68a638b95200d" class="i method">EventDataBatch</a>(<span class="r36 r">size</span>, <span class="r37 r">store</span>, <span class="r38 r">options</span>);
 
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r39 r">batch</span>, <span class="t t">Is</span>.<span class="i property">Not</span>.<span class="i property">Null</span>, <span class="s">&quot;The batch should have been created.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r39 r">batch</span>.<a href="/Azure.Messaging.EventHubs/A.html#ec6b4cb93458ab83" class="i property">SizeInBytes</a>, <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r36 r">size</span>), <span class="s">&quot;The batch size should have been set.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r39 r">batch</span>.<a href="/Azure.Messaging.EventHubs/A.html#4ed983dbd227a3f6" class="i property">MaximumSizeInBytes</a>, <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r38 r">options</span>.<a href="/Azure.Messaging.EventHubs/A.html#eccd10c79558085a" class="i property">MaximumSizeInBytes</a>), <span class="s">&quot;The maximum batch size should have been set.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r39 r">batch</span>.<a href="/Azure.Messaging.EventHubs/A.html#529a3bc3bdf5f8c5" class="i property">Count</a>, <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r37 r">store</span>.<a href="@0@mscorlib/A.html#78a69d857716bc68" class="i property">Count</a>), <span class="s">&quot;The batch count should reflect the count of the backing store.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r39 r">batch</span>.<a href="/Azure.Messaging.EventHubs/A.html#ce1a601fff7086d5" class="i method">AsEnumerable</a>&lt;<a href="/Azure.Messaging.EventHubs/A.html#557aa370d1369b89" class="t t">EventData</a>&gt;(), <span class="t t">Is</span>.<span class="i method">EquivalentTo</span>(<span class="r37 r">store</span>), <span class="s">&quot;The batch enumerable should reflect the events in the backing store.&quot;</span>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Verifies functionality of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="/Azure.Messaging.EventHubs/A.html#17797dbf90671a42" class="t t">EventHubsModelFactory</a>.<a href="/Azure.Messaging.EventHubs/A.html#9ef68a638b95200d" class="i method">EventDataBatch</a><span class="c">&quot;</span> <span class="c">/&gt;</span>
        <span class="c">///</span><span class="c">   method.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        [<span class="t constructor">Test</span>]
        <b>public void</b> <a id="86bbe4a749c38727" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">EventDataBatchRespectsTheTryAddCallback</a>()
        {
            <a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r40 rd" class="r40 r">eventLimit</span> = 3;
            <a href="@0@mscorlib/A.html#cf7f4095e4de7646" class="k">var</a> <span id="r41 rd" class="r41 r">store</span> = <b>new</b> <a href="@0@mscorlib/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<a href="/Azure.Messaging.EventHubs/A.html#557aa370d1369b89" class="t t">EventData</a>&gt;();
            <a href="/Azure.Messaging.EventHubs/A.html#c992a211bbcf6874" class="k">var</a> <span id="r42 rd" class="r42 r">batch</span> = <a href="/Azure.Messaging.EventHubs/A.html#17797dbf90671a42" class="t t">EventHubsModelFactory</a>.<a href="/Azure.Messaging.EventHubs/A.html#9ef68a638b95200d" class="i method">EventDataBatch</a>(5, <span class="r41 r">store</span>, <span class="r43 r">tryAddCallback</span>: <span id="r44 rd" class="r44 r">_</span> =&gt; <span class="r41 r">store</span>.<a href="@0@mscorlib/A.html#78a69d857716bc68" class="i property">Count</a> &lt; <span class="r40 r">eventLimit</span>);
 
            <b>while</b> (<span class="r41 r">store</span>.<a href="@0@mscorlib/A.html#78a69d857716bc68" class="i property">Count</a> &lt; <span class="r40 r">eventLimit</span>)
            {
                <span class="t t">Assert</span>.<span class="i method">That</span>(() =&gt; <span class="r42 r">batch</span>.<a href="/Azure.Messaging.EventHubs/A.html#41b4133addd3135b" class="i method">TryAdd</a>(<b>new</b> <a href="/Azure.Messaging.EventHubs/A.html#cc26eeb188074cbc" class="t constructor">EventData</a>(<b>new</b> <a href="/System.Memory.Data/A.html#c9736bff8edcba3b" class="t constructor">BinaryData</a>(<span class="s">&quot;Test&quot;</span>))), <span class="t t">Is</span>.<span class="i property">True</span>, <span class="s">$&quot;</span><span class="s">The batch contains </span>{ <span class="r41 r">store</span>.<a href="@0@mscorlib/A.html#78a69d857716bc68" class="i property">Count</a> }<span class="s"> events; adding another should be permitted.</span><span class="s">&quot;</span>);
            }
 
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r41 r">store</span>.<a href="@0@mscorlib/A.html#78a69d857716bc68" class="i property">Count</a>, <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r40 r">eventLimit</span>), <span class="s">&quot;The batch should be at its limit.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(() =&gt; <span class="r42 r">batch</span>.<a href="/Azure.Messaging.EventHubs/A.html#41b4133addd3135b" class="i method">TryAdd</a>(<b>new</b> <a href="/Azure.Messaging.EventHubs/A.html#cc26eeb188074cbc" class="t constructor">EventData</a>(<b>new</b> <a href="/System.Memory.Data/A.html#c9736bff8edcba3b" class="t constructor">BinaryData</a>(<span class="s">&quot;Too many&quot;</span>))), <span class="t t">Is</span>.<span class="i property">False</span>, <span class="s">&quot;The batch is full; it should not be possible to add a new event.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(() =&gt; <span class="r42 r">batch</span>.<a href="/Azure.Messaging.EventHubs/A.html#41b4133addd3135b" class="i method">TryAdd</a>(<b>new</b> <a href="/Azure.Messaging.EventHubs/A.html#cc26eeb188074cbc" class="t constructor">EventData</a>(<b>new</b> <a href="/System.Memory.Data/A.html#c9736bff8edcba3b" class="t constructor">BinaryData</a>(<span class="s">&quot;Too many&quot;</span>))), <span class="t t">Is</span>.<span class="i property">False</span>, <span class="s">&quot;The batch is full; a second attempt to add a new event should not succeed.&quot;</span>);
 
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r41 r">store</span>.<a href="@0@mscorlib/A.html#78a69d857716bc68" class="i property">Count</a>, <span class="t t">Is</span>.<span class="i method">EqualTo</span>(<span class="r40 r">eventLimit</span>), <span class="s">&quot;The batch should be at its limit after the failed TryAdd attempts.&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">That</span>(<span class="r42 r">batch</span>.<a href="/Azure.Messaging.EventHubs/A.html#ce1a601fff7086d5" class="i method">AsEnumerable</a>&lt;<a href="/Azure.Messaging.EventHubs/A.html#557aa370d1369b89" class="t t">EventData</a>&gt;(), <span class="t t">Is</span>.<span class="i method">EquivalentTo</span>(<span class="r41 r">store</span>), <span class="s">&quot;The batch enumerable should reflect the events in the backing store.&quot;</span>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Verifies functionality of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="/Azure.Messaging.EventHubs/A.html#17797dbf90671a42" class="t t">EventHubsModelFactory</a>.<a href="/Azure.Messaging.EventHubs/A.html#9ef68a638b95200d" class="i method">EventDataBatch</a><span class="c">&quot;</span> <span class="c">/&gt;</span>
        <span class="c">///</span><span class="c">   method.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        [<span class="t constructor">Test</span>]
        <b>public void</b> <a id="1c3a790a5906ebb8" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">EventDataBatchIsSafeToDispose</a>()
        {
            <a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r45 rd" class="r45 r">size</span> = 1024;
            <a href="@0@mscorlib/A.html#cf7f4095e4de7646" class="k">var</a> <span id="r46 rd" class="r46 r">store</span> = <b>new</b> <a href="@0@mscorlib/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<a href="/Azure.Messaging.EventHubs/A.html#557aa370d1369b89" class="t t">EventData</a>&gt; { <b>new</b> <a href="/Azure.Messaging.EventHubs/A.html#d75ad638cb32e3d2" class="t constructor">EventData</a>(<a href="@0@mscorlib/A.html#156e066ecc4ccedf" class="t t">Array</a>.<a href="@0@mscorlib/A.html#bc9fd1be0e4f4e70" class="i method">Empty</a>&lt;<b>byte</b>&gt;()), <b>new</b> <a href="/Azure.Messaging.EventHubs/A.html#d75ad638cb32e3d2" class="t constructor">EventData</a>(<a href="@0@mscorlib/A.html#156e066ecc4ccedf" class="t t">Array</a>.<a href="@0@mscorlib/A.html#bc9fd1be0e4f4e70" class="i method">Empty</a>&lt;<b>byte</b>&gt;()) };
            <a href="/Azure.Messaging.EventHubs/A.html#efa8982626004b5d" class="k">var</a> <span id="r47 rd" class="r47 r">options</span> = <b>new</b> <a href="/Azure.Messaging.EventHubs/A.html#b19386ed0bc149ee" class="t constructor">CreateBatchOptions</a> { <a href="/Azure.Messaging.EventHubs/A.html#eccd10c79558085a" class="i property">MaximumSizeInBytes</a> = 2048 };
            <a href="/Azure.Messaging.EventHubs/A.html#c992a211bbcf6874" class="k">var</a> <span id="r48 rd" class="r48 r">batch</span> = <a href="/Azure.Messaging.EventHubs/A.html#17797dbf90671a42" class="t t">EventHubsModelFactory</a>.<a href="/Azure.Messaging.EventHubs/A.html#9ef68a638b95200d" class="i method">EventDataBatch</a>(<span class="r45 r">size</span>, <span class="r46 r">store</span>, <span class="r47 r">options</span>, <span id="r49 rd" class="r49 r">_</span> =&gt; <b>false</b>);
 
            <span class="t t">Assert</span>.<span class="i method">That</span>(() =&gt; <span class="r48 r">batch</span>.<a href="/Azure.Messaging.EventHubs/A.html#b3f08559c491baec" class="i method">Dispose</a>(), <span class="t t">Throws</span>.<span class="i property">Nothing</span>);
        }
    }
}
</pre></td></tr></table></div></body></html>

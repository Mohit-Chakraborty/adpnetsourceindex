<!DOCTYPE html>
<html><head><title>SingleSegmentUploaderTests.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(358);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#DataLakeStore.Tests/DataTransferTests/SingleSegmentUploaderTests.cs" target="_top">DataTransferTests\SingleSegmentUploaderTests.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#DataLakeStore.Tests" target="_top">Microsoft.Azure.Management.DataLakeStore.Tests.csproj</a> (DataLakeStore.Tests)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License. See License.txt in the project root for license information.</span>
 
<b>namespace</b> <span class="i n">DataLakeStore</span>.<span class="i n">Tests</span>
{
    <b>using</b> <span class="i">System</span>;
    <b>using</b> <span class="i">System</span>.<span class="i">Collections</span>.<span class="i">Generic</span>;
    <b>using</b> <span class="i">System</span>.<span class="i">Diagnostics</span>.<span class="i">CodeAnalysis</span>;
    <b>using</b> <span class="i">System</span>.<span class="i">IO</span>;
    <b>using</b> <span class="i">System</span>.<span class="i">Text</span>;
    <b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i n">DataLake</span>.<span class="i n">Store</span>;
    <b>using</b> <span class="i">Xunit</span>;
 
    [<span class="i">SuppressMessage</span>(<span class="s">&quot;StyleCop.CSharp.NamingRules&quot;</span>, <span class="s">&quot;*&quot;</span>)]
    [<span class="i">SuppressMessage</span>(<span class="s">&quot;StyleCop.CSharp.LayoutRules&quot;</span>, <span class="s">&quot;*&quot;</span>)]
    [<span class="i">SuppressMessage</span>(<span class="s">&quot;StyleCop.CSharp.MaintainabilityRules&quot;</span>, <span class="s">&quot;*&quot;</span>)]
    [<span class="i">SuppressMessage</span>(<span class="s">&quot;StyleCop.CSharp.OrderingRules&quot;</span>, <span class="s">&quot;*&quot;</span>)]
    [<span class="i">SuppressMessage</span>(<span class="s">&quot;StyleCop.CSharp.ReadabilityRules&quot;</span>, <span class="s">&quot;*&quot;</span>)]
    [<span class="i">SuppressMessage</span>(<span class="s">&quot;StyleCop.CSharp.SpacingRules&quot;</span>, <span class="s">&quot;*&quot;</span>)]
    [<span class="i">SuppressMessage</span>(<span class="s">&quot;StyleCop.CSharp.DocumentationRules&quot;</span>, <span class="s">&quot;*&quot;</span>)]
    <b>public class</b> <a id="8b8d465e502c11c9" href="../R/../../0000000000.html" target="n" data-glyph="0,0" class="t t">SingleSegmentUploaderTests</a> : <span class="i">IDisposable</span>
    {
 
        <span class="k preprocess">#</span><span class="k preprocess">region</span> Private
 
        <b>private readonly byte</b>[] <a id="57e56765bd43c289" href="../R/57e56765bd43c289.html" target="n" data-glyph="46,1" class="i field">_smallFileContents</a> = <b>new</b> <b>byte</b>[10 * 1024]; <span class="c">//10KB file</span>
        <b>private string</b> <a id="d234caba1b206b94" href="../R/d234caba1b206b94.html" target="n" data-glyph="46,1" class="i field">_smallFilePath</a>;
 
        <b>private readonly byte</b>[] <a id="644f1bec0791250e" href="../R/644f1bec0791250e.html" target="n" data-glyph="46,1" class="i field">_largeFileContents</a> = <b>new</b> <b>byte</b>[10 * 1024 * 1024]; <span class="c">//10MB file</span>
        <b>private string</b> <a id="2253890526418c88" href="../R/2253890526418c88.html" target="n" data-glyph="46,1" class="i field">_largeFilePath</a>;
        
        <b>private readonly byte</b>[] <a id="66d54d6e9e9dd074" href="../R/66d54d6e9e9dd074.html" target="n" data-glyph="46,1" class="i field">_textFileContents</a> = <b>new</b> <b>byte</b>[20 * 1024 * 1024]; <span class="c">//20MB file</span>
        <b>private string</b> <a id="ad04ae8c3626f2ad" href="../R/ad04ae8c3626f2ad.html" target="n" data-glyph="46,1" class="i field">_textFilePath</a>;
 
        <b>private readonly byte</b>[] <a id="9db38cb38005cbf7" href="../R/9db38cb38005cbf7.html" target="n" data-glyph="46,1" class="i field">_badTextFileContents</a> = <b>new</b> <b>byte</b>[10 * 1024 * 1024]; <span class="c">//10MB file</span>
        <b>private string</b> <a id="d32cd2292b9bcb3d" href="../R/d32cd2292b9bcb3d.html" target="n" data-glyph="46,1" class="i field">_badTextFilePath</a>;
 
        <b>private const string</b> <a id="6f8433a95cfaa13a" href="../R/6f8433a95cfaa13a.html" target="n" data-glyph="10,1" class="i field">StreamPath</a> = <span class="s">&quot;abc&quot;</span>;
 
        <span class="k preprocess">#</span><span class="k preprocess">endregion</span>
 
        <span class="k preprocess">#</span><span class="k preprocess">region</span> Test Setup &amp; Teardown
 
        <b>public</b> <a id="801eb4295e75021c" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="t constructor">SingleSegmentUploaderTests</a>()
        {
            <b>var</b> <span id="r0 rd" class="r0 r">runFolder</span> = <span class="i">Guid</span>.<span class="i">NewGuid</span>();
            <a href="TestHelpers.cs.html#421fb193cb683e40" class="t t">TestHelpers</a>.<span class="i">GenerateFileData</span>(<a href="#57e56765bd43c289" class="i field">_smallFileContents</a>, <span class="r0 r">runFolder</span>.<span class="i">ToString</span>(), <b>out</b> <a href="#d234caba1b206b94" class="i field">_smallFilePath</a>);
            <a href="TestHelpers.cs.html#421fb193cb683e40" class="t t">TestHelpers</a>.<span class="i">GenerateFileData</span>(<a href="#644f1bec0791250e" class="i field">_largeFileContents</a>, <span class="r0 r">runFolder</span>.<span class="i">ToString</span>(), <b>out</b> <a href="#2253890526418c88" class="i field">_largeFilePath</a>);
            <a href="TestHelpers.cs.html#421fb193cb683e40" class="t t">TestHelpers</a>.<a href="TestHelpers.cs.html#64fc90cf62673539" class="i method">GenerateTextFileData</a>(<a href="#66d54d6e9e9dd074" class="i field">_textFileContents</a>, 1, <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#62b7b26e3b4d119f" class="t t">SingleSegmentUploader</a>.<a href="/Microsoft.Azure.Management.DataLake.Store/A.html#6f8c82413ca1bb6e" class="i field">BufferLength</a>, <b>out</b> <a href="#ad04ae8c3626f2ad" class="i field">_textFilePath</a>);
            <a href="TestHelpers.cs.html#421fb193cb683e40" class="t t">TestHelpers</a>.<span class="i">GenerateTextFileData</span>(<a href="#9db38cb38005cbf7" class="i field">_badTextFileContents</a>, <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#62b7b26e3b4d119f" class="t t">SingleSegmentUploader</a>.<a href="/Microsoft.Azure.Management.DataLake.Store/A.html#6f8c82413ca1bb6e" class="i field">BufferLength</a> + 1, <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#62b7b26e3b4d119f" class="t t">SingleSegmentUploader</a>.<a href="/Microsoft.Azure.Management.DataLake.Store/A.html#6f8c82413ca1bb6e" class="i field">BufferLength</a> + 2, <b>out</b> <a href="#d32cd2292b9bcb3d" class="i field">_badTextFilePath</a>);
        }
 
        <b>public void</b> <a id="4a836fac582d7539" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">Dispose</a>()
        {
            <b>var</b> <span id="r1 rd" class="r1 r">tempDir</span> = <span class="i">Path</span>.<span class="i">GetDirectoryName</span>(<a href="#2253890526418c88" class="i field">_largeFilePath</a>);
            <b>if</b> (<span class="i">Directory</span>.<span class="i">Exists</span>(<span class="r1 r">tempDir</span>))
            {
                <span class="i">Directory</span>.<span class="i">Delete</span>(<span class="r1 r">tempDir</span>, <b>true</b>);
            }
 
            <b>if</b> (<span class="i">File</span>.<span class="i">Exists</span>(<a href="#ad04ae8c3626f2ad" class="i field">_textFilePath</a>))
            {
                <span class="i">File</span>.<span class="i">Delete</span>(<a href="#ad04ae8c3626f2ad" class="i field">_textFilePath</a>);
            }
 
            <b>if</b> (<span class="i">File</span>.<span class="i">Exists</span>(<a href="#d32cd2292b9bcb3d" class="i field">_badTextFilePath</a>))
            {
                <span class="i">File</span>.<span class="i">Delete</span>(<a href="#d32cd2292b9bcb3d" class="i field">_badTextFilePath</a>);
            }
        }
 
        <span class="k preprocess">#</span><span class="k preprocess">endregion</span>
 
        <span class="k preprocess">#</span><span class="k preprocess">region</span> Tests
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Tests a simple upload consisting of a single block (the file is small enough to be uploaded without splitting into smaller buffers)</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="5e1791665dc864ef" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SingleSegmentUploader_UploadSingleBlockStream</a>()
        {
            <a href="InMemoryFrontEnd.cs.html#1eeb459c94164e15" class="k">var</a> <span id="r2 rd" class="r2 r">fe</span> = <b>new</b> <span class="t">InMemoryFrontEnd</span>();
 
            <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#3c08d873a58fc637" class="k">var</a> <span id="r3 rd" class="r3 r">metadata</span> = <span class="i">CreateMetadata</span>(<a href="#d234caba1b206b94" class="i field">_smallFilePath</a>, <a href="#57e56765bd43c289" class="i field">_smallFileContents</a>.<span class="i">Length</span>);
            <a href="#248e659313a2aca4" class="k">var</a> <span id="r4 rd" class="r4 r">progressTracker</span> = <b>new</b> <a href="#37fbee03ddfb1ac5" class="t constructor">TestProgressTracker</a>();
            <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#62b7b26e3b4d119f" class="k">var</a> <span id="r5 rd" class="r5 r">ssu</span> = <b>new</b> <span class="t">SingleSegmentUploader</span>(0, <span class="r3 r">metadata</span>, <span class="r2 r">fe</span>, <span class="r4 r">progressTracker</span>);
            <span class="r5 r">ssu</span>.<a href="/Microsoft.Azure.Management.DataLake.Store/A.html#1f3cfffd2c17dddb" class="i property">UseBackOffRetryStrategy</a> = <b>false</b>;
            <span class="r5 r">ssu</span>.<span class="i">Upload</span>();
 
            <b>var</b> <span id="r6 rd" class="r6 r">actualContents</span> = <span class="r2 r">fe</span>.<a href="InMemoryFrontEnd.cs.html#bfd99bf90d317df4" class="i method">GetStreamContents</a>(<a href="#6f8433a95cfaa13a" class="i field">StreamPath</a>);
            <a href="AssertExtensions.cs.html#42cbe9977daafdb5" class="t t">AssertExtensions</a>.<a href="AssertExtensions.cs.html#7ae016da0ed0f9e1" class="i method">AreEqual</a>(<a href="#57e56765bd43c289" class="i field">_smallFileContents</a>, <span class="r6 r">actualContents</span>, <span class="s">&quot;Unexpected uploaded stream contents.&quot;</span>);
            <a href="#ace3c2f600cc553e" class="i method">VerifyTracker</a>(<span class="r4 r">progressTracker</span>, <b>true</b>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Tests an uploading consisting of a larger file, which will need to be uploaded in sequential buffers.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="9ce4aee8d4c1e82f" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SingleSegmentUploader_UploadMultiBlockStream</a>()
        {
            <a href="InMemoryFrontEnd.cs.html#1eeb459c94164e15" class="k">var</a> <span id="r7 rd" class="r7 r">fe</span> = <b>new</b> <span class="t">InMemoryFrontEnd</span>();
 
            <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#3c08d873a58fc637" class="k">var</a> <span id="r8 rd" class="r8 r">metadata</span> = <span class="i">CreateMetadata</span>(<a href="#2253890526418c88" class="i field">_largeFilePath</a>, <a href="#644f1bec0791250e" class="i field">_largeFileContents</a>.<span class="i">Length</span>);
            <a href="#248e659313a2aca4" class="k">var</a> <span id="r9 rd" class="r9 r">progressTracker</span> = <b>new</b> <a href="#37fbee03ddfb1ac5" class="t constructor">TestProgressTracker</a>();
            <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#62b7b26e3b4d119f" class="k">var</a> <span id="r10 rd" class="r10 r">ssu</span> = <b>new</b> <span class="t">SingleSegmentUploader</span>(0, <span class="r8 r">metadata</span>, <span class="r7 r">fe</span>, <span class="r9 r">progressTracker</span>);
            <span class="r10 r">ssu</span>.<a href="/Microsoft.Azure.Management.DataLake.Store/A.html#1f3cfffd2c17dddb" class="i property">UseBackOffRetryStrategy</a> = <b>false</b>;
            <span class="r10 r">ssu</span>.<span class="i">Upload</span>();
 
            <b>var</b> <span id="r11 rd" class="r11 r">actualContents</span> = <span class="r7 r">fe</span>.<a href="InMemoryFrontEnd.cs.html#bfd99bf90d317df4" class="i method">GetStreamContents</a>(<a href="#6f8433a95cfaa13a" class="i field">StreamPath</a>);
            <a href="AssertExtensions.cs.html#42cbe9977daafdb5" class="t t">AssertExtensions</a>.<a href="AssertExtensions.cs.html#7ae016da0ed0f9e1" class="i method">AreEqual</a>(<a href="#644f1bec0791250e" class="i field">_largeFileContents</a>, <span class="r11 r">actualContents</span>, <span class="s">&quot;Unexpected uploaded stream contents.&quot;</span>);
            <a href="#ace3c2f600cc553e" class="i method">VerifyTracker</a>(<span class="r9 r">progressTracker</span>, <b>true</b>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Tests the case when only a part of the file is to be uploaded (i.e., all other cases feed in the entire file)</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="e20ee00f111b3d92" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SingleSegmentUploader_UploadFileRange</a>()
        {
            <b>int</b> <span id="r12 rd" class="r12 r">length</span> = <a href="#57e56765bd43c289" class="i field">_smallFileContents</a>.<span class="i">Length</span> / 3;
 
            <a href="InMemoryFrontEnd.cs.html#1eeb459c94164e15" class="k">var</a> <span id="r13 rd" class="r13 r">fe</span> = <b>new</b> <span class="t">InMemoryFrontEnd</span>();
 
            <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#3c08d873a58fc637" class="k">var</a> <span id="r14 rd" class="r14 r">metadata</span> = <a href="#ffce6147d3aecbea" class="i method">CreateMetadata</a>(<a href="#d234caba1b206b94" class="i field">_smallFilePath</a>, <span class="r12 r">length</span>);
            <a href="#248e659313a2aca4" class="k">var</a> <span id="r15 rd" class="r15 r">progressTracker</span> = <b>new</b> <a href="#37fbee03ddfb1ac5" class="t constructor">TestProgressTracker</a>();
            <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#62b7b26e3b4d119f" class="k">var</a> <span id="r16 rd" class="r16 r">ssu</span> = <b>new</b> <span class="t">SingleSegmentUploader</span>(0, <span class="r14 r">metadata</span>, <span class="r13 r">fe</span>, <span class="r15 r">progressTracker</span>);
            <span class="r16 r">ssu</span>.<a href="/Microsoft.Azure.Management.DataLake.Store/A.html#1f3cfffd2c17dddb" class="i property">UseBackOffRetryStrategy</a> = <b>false</b>;
            <span class="r16 r">ssu</span>.<span class="i">Upload</span>();
 
            <b>var</b> <span id="r17 rd" class="r17 r">actualContents</span> = <span class="r13 r">fe</span>.<a href="InMemoryFrontEnd.cs.html#bfd99bf90d317df4" class="i method">GetStreamContents</a>(<a href="#6f8433a95cfaa13a" class="i field">StreamPath</a>);
            <b>var</b> <span id="r18 rd" class="r18 r">expectedContents</span> = <b>new</b> <b>byte</b>[<span class="r12 r">length</span>];
            <span class="i">Array</span>.<span class="i">Copy</span>(<a href="#57e56765bd43c289" class="i field">_smallFileContents</a>, 0, <span class="r18 r">expectedContents</span>, 0, <span class="r12 r">length</span>);
            <a href="AssertExtensions.cs.html#42cbe9977daafdb5" class="t t">AssertExtensions</a>.<a href="AssertExtensions.cs.html#7ae016da0ed0f9e1" class="i method">AreEqual</a>(<span class="r18 r">expectedContents</span>, <span class="r17 r">actualContents</span>, <span class="s">&quot;Unexpected uploaded stream contents.&quot;</span>);
            <a href="#ace3c2f600cc553e" class="i method">VerifyTracker</a>(<span class="r15 r">progressTracker</span>, <b>true</b>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Tests the case when an existing stream with the same name already exists on the server. That stream needs to be fully replaced with the new data.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="b5b378688de8229e" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SingleSegmentUploader_TargetStreamExists</a>()
        {
            <a href="InMemoryFrontEnd.cs.html#1eeb459c94164e15" class="k">var</a> <span id="r19 rd" class="r19 r">fe</span> = <b>new</b> <span class="t">InMemoryFrontEnd</span>();
 
            <span class="c">//load up an existing stream</span>
            <span class="r19 r">fe</span>.<a href="InMemoryFrontEnd.cs.html#7b07d2e607321d00" class="i method">CreateStream</a>(<a href="#6f8433a95cfaa13a" class="i field">StreamPath</a>, <b>true</b>, <b>null</b>, 0);
            <b>var</b> <span id="r20 rd" class="r20 r">data</span> = <span class="i">Encoding</span>.<span class="i">UTF8</span>.<span class="i">GetBytes</span>(<span class="s">&quot;random&quot;</span>);
            <span class="r19 r">fe</span>.<span class="i">AppendToStream</span>(<a href="#6f8433a95cfaa13a" class="i field">StreamPath</a>, <span class="r20 r">data</span>, 0, (<b>int</b>)<span class="r20 r">data</span>.<span class="i">Length</span>);
 
            <span class="c">//force a re-upload of the stream</span>
            <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#3c08d873a58fc637" class="k">var</a> <span id="r21 rd" class="r21 r">metadata</span> = <span class="i">CreateMetadata</span>(<a href="#d234caba1b206b94" class="i field">_smallFilePath</a>, <a href="#57e56765bd43c289" class="i field">_smallFileContents</a>.<span class="i">Length</span>);
            <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#62b7b26e3b4d119f" class="k">var</a> <span id="r22 rd" class="r22 r">ssu</span> = <b>new</b> <span class="t">SingleSegmentUploader</span>(0, <span class="r21 r">metadata</span>, <span class="r19 r">fe</span>);
            <span class="r22 r">ssu</span>.<a href="/Microsoft.Azure.Management.DataLake.Store/A.html#1f3cfffd2c17dddb" class="i property">UseBackOffRetryStrategy</a> = <b>false</b>;
            <span class="r22 r">ssu</span>.<span class="i">Upload</span>();
 
            <b>var</b> <span id="r23 rd" class="r23 r">actualContents</span> = <span class="r19 r">fe</span>.<a href="InMemoryFrontEnd.cs.html#bfd99bf90d317df4" class="i method">GetStreamContents</a>(<a href="#6f8433a95cfaa13a" class="i field">StreamPath</a>);
            <a href="AssertExtensions.cs.html#42cbe9977daafdb5" class="t t">AssertExtensions</a>.<a href="AssertExtensions.cs.html#7ae016da0ed0f9e1" class="i method">AreEqual</a>(<a href="#57e56765bd43c289" class="i field">_smallFileContents</a>, <span class="r23 r">actualContents</span>, <span class="s">&quot;Unexpected uploaded stream contents.&quot;</span>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Tests the case when the upload did &quot;succeed&quot;, but the server reports back a different stream length than expected.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="23458525a4b3950a" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SingleSegmentUploader_VerifyUploadStreamFails</a>()
        {
            <span class="c">//create a mock front end which doesn&#39;t do anything</span>
            <a href="InMemoryFrontEnd.cs.html#1eeb459c94164e15" class="k">var</a> <span id="r24 rd" class="r24 r">workingFrontEnd</span> = <b>new</b> <span class="t">InMemoryFrontEnd</span>();
            <a href="MockableFrontEnd.cs.html#5510e7d5e66873a2" class="k">var</a> <span id="r25 rd" class="r25 r">fe</span> = <b>new</b> <a href="MockableFrontEnd.cs.html#c733f659d5547a6c" class="t constructor">MockableFrontEnd</a>(<span class="r24 r">workingFrontEnd</span>);
            
            <span class="r25 r">fe</span>.<a href="MockableFrontEnd.cs.html#efe609198f7928bf" class="i property">CreateStreamImplementation</a> = (<span id="r26 rd" class="r26 r">streamPath</span>, <span id="r27 rd" class="r27 r">overwrite</span>, <span id="r28 rd" class="r28 r">data</span>, <span id="r29 rd" class="r29 r">byteCount</span>) =&gt; { };
            <span class="r25 r">fe</span>.<a href="MockableFrontEnd.cs.html#b09ba48e7600f0ad" class="i property">DeleteStreamImplementation</a> = (<span id="r30 rd" class="r30 r">streamPath</span>, <span id="r31 rd" class="r31 r">recurse</span>, <span id="r32 rd" class="r32 r">isDownload</span>) =&gt; { };
            <span class="r25 r">fe</span>.<a href="MockableFrontEnd.cs.html#1cb6c810304e88d7" class="i property">StreamExistsImplementation</a> = (<span id="r33 rd" class="r33 r">streamPath</span>, <span id="r34 rd" class="r34 r">isDownload</span>) =&gt; { <b>return</b> <b>true</b>; };
            <span class="r25 r">fe</span>.<a href="MockableFrontEnd.cs.html#0f9b92841842010a" class="i property">AppendToStreamImplementation</a> = (<span id="r35 rd" class="r35 r">streamPath</span>, <span id="r36 rd" class="r36 r">data</span>, <span id="r37 rd" class="r37 r">offset</span>, <span id="r38 rd" class="r38 r">byteCount</span>) =&gt; { };
            <span class="r25 r">fe</span>.<a href="MockableFrontEnd.cs.html#037859b9f743bbef" class="i property">GetStreamLengthImplementation</a> = (<span id="r39 rd" class="r39 r">streamPath</span>, <span id="r40 rd" class="r40 r">isDownload</span>) =&gt; { <b>return</b> 0; };
 
            <span class="c">//upload some data</span>
            <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#3c08d873a58fc637" class="k">var</a> <span id="r41 rd" class="r41 r">metadata</span> = <span class="i">CreateMetadata</span>(<a href="#d234caba1b206b94" class="i field">_smallFilePath</a>, <a href="#57e56765bd43c289" class="i field">_smallFileContents</a>.<span class="i">Length</span>);
            <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#62b7b26e3b4d119f" class="k">var</a> <span id="r42 rd" class="r42 r">ssu</span> = <b>new</b> <span class="t">SingleSegmentUploader</span>(0, <span class="r41 r">metadata</span>, <span class="r25 r">fe</span>);
            <span class="r42 r">ssu</span>.<a href="/Microsoft.Azure.Management.DataLake.Store/A.html#1f3cfffd2c17dddb" class="i property">UseBackOffRetryStrategy</a> = <b>false</b>;
 
            <span class="c">//the Upload method should fail if it cannot verify that the stream was uploaded after the upload (i.e., it will get a length of 0 at the end)</span>
            <span class="i">Assert</span>.<span class="i">Throws</span>&lt;<a href="/Microsoft.Azure.Management.DataLake.Store/A.html#020a0db52cedc36b" class="t t">TransferFailedException</a>&gt;(() =&gt; { <span class="r42 r">ssu</span>.<span class="i">Upload</span>(); });
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Tests the case when the SingleSegmentUploader should upload a non-binary file (i.e., split on record boundaries).</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="10b8527cb609f2e5" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SingleSegmentUploader_UploadNonBinaryFile</a>()
        {
            <a href="InMemoryFrontEnd.cs.html#1eeb459c94164e15" class="k">var</a> <span id="r43 rd" class="r43 r">fe</span> = <b>new</b> <span class="t">InMemoryFrontEnd</span>();
 
            <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#3c08d873a58fc637" class="k">var</a> <span id="r44 rd" class="r44 r">metadata</span> = <span class="i">CreateMetadata</span>(<a href="#ad04ae8c3626f2ad" class="i field">_textFilePath</a>, <a href="#66d54d6e9e9dd074" class="i field">_textFileContents</a>.<span class="i">Length</span>);
            <span class="r44 r">metadata</span>.<a href="/Microsoft.Azure.Management.DataLake.Store/A.html#ffdbb867506e256b" class="i property">IsBinary</a> = <b>false</b>;
            <a href="#248e659313a2aca4" class="k">var</a> <span id="r45 rd" class="r45 r">progressTracker</span> = <b>new</b> <a href="#37fbee03ddfb1ac5" class="t constructor">TestProgressTracker</a>();
            <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#62b7b26e3b4d119f" class="k">var</a> <span id="r46 rd" class="r46 r">ssu</span> = <b>new</b> <span class="t">SingleSegmentUploader</span>(0, <span class="r44 r">metadata</span>, <span class="r43 r">fe</span>, <span class="r45 r">progressTracker</span>);
            <span class="r46 r">ssu</span>.<a href="/Microsoft.Azure.Management.DataLake.Store/A.html#1f3cfffd2c17dddb" class="i property">UseBackOffRetryStrategy</a> = <b>false</b>;
            <span class="r46 r">ssu</span>.<span class="i">Upload</span>();
 
            <span class="c">//verify the entire file is identical to the source file</span>
            <b>var</b> <span id="r47 rd" class="r47 r">actualContents</span> = <span class="r43 r">fe</span>.<a href="InMemoryFrontEnd.cs.html#bfd99bf90d317df4" class="i method">GetStreamContents</a>(<a href="#6f8433a95cfaa13a" class="i field">StreamPath</a>);
            <a href="AssertExtensions.cs.html#42cbe9977daafdb5" class="t t">AssertExtensions</a>.<a href="AssertExtensions.cs.html#7ae016da0ed0f9e1" class="i method">AreEqual</a>(<a href="#66d54d6e9e9dd074" class="i field">_textFileContents</a>, <span class="r47 r">actualContents</span>, <span class="s">&quot;Unexpected uploaded stream contents.&quot;</span>);
 
            <span class="c">//verify the append blocks start/end on record boundaries</span>
            <b>var</b> <span id="r48 rd" class="r48 r">appendBlocks</span> = <span class="r43 r">fe</span>.<a href="InMemoryFrontEnd.cs.html#67c2feb0dbf92e9b" class="i method">GetAppendBlocks</a>(<a href="#6f8433a95cfaa13a" class="i field">StreamPath</a>);
            <b>int</b> <span id="r49 rd" class="r49 r">lengthSoFar</span> = 0;
            <b>foreach</b> (<b>var</b> <span id="r50 rd" class="r50 r">append</span> <b>in</b> <span class="r48 r">appendBlocks</span>)
            {
                <span class="r49 r">lengthSoFar</span> += <span class="r50 r">append</span>.<span class="i">Length</span>;
                <b>if</b> (<span class="r49 r">lengthSoFar</span> &lt; <span class="r47 r">actualContents</span>.<span class="i">Length</span>)
                {
                    <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&#39;\n&#39;</span>, (<b>char</b>)<span class="r50 r">append</span>[<span class="r50 r">append</span>.<span class="i">Length</span> - 1]);
                }
            }
 
            <a href="#ace3c2f600cc553e" class="i method">VerifyTracker</a>(<span class="r45 r">progressTracker</span>, <b>true</b>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Tests the case when the SingleSegmentUploader tries upload a non-binary file (i.e., split on record boundaries), but at least one record is larger than the max allowed size.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="bc1920eb29895d1b" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SingleSegmentUploader_UploadNonBinaryFileTooLargeRecord</a>()
        {
            <a href="InMemoryFrontEnd.cs.html#1eeb459c94164e15" class="k">var</a> <span id="r51 rd" class="r51 r">fe</span> = <b>new</b> <span class="t">InMemoryFrontEnd</span>();
 
            <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#3c08d873a58fc637" class="k">var</a> <span id="r52 rd" class="r52 r">metadata</span> = <span class="i">CreateMetadata</span>(<a href="#d32cd2292b9bcb3d" class="i field">_badTextFilePath</a>, <a href="#9db38cb38005cbf7" class="i field">_badTextFileContents</a>.<span class="i">Length</span>);
            <span class="r52 r">metadata</span>.<a href="/Microsoft.Azure.Management.DataLake.Store/A.html#ffdbb867506e256b" class="i property">IsBinary</a> = <b>false</b>;
            <a href="#248e659313a2aca4" class="k">var</a> <span id="r53 rd" class="r53 r">progressTracker</span> = <b>new</b> <a href="#37fbee03ddfb1ac5" class="t constructor">TestProgressTracker</a>();
            <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#62b7b26e3b4d119f" class="k">var</a> <span id="r54 rd" class="r54 r">ssu</span> = <b>new</b> <span class="t">SingleSegmentUploader</span>(0, <span class="r52 r">metadata</span>, <span class="r51 r">fe</span>, <span class="r53 r">progressTracker</span>);
            <span class="r54 r">ssu</span>.<a href="/Microsoft.Azure.Management.DataLake.Store/A.html#1f3cfffd2c17dddb" class="i property">UseBackOffRetryStrategy</a> = <b>false</b>;
            <span class="i">Assert</span>.<span class="i">Throws</span>&lt;<a href="/Microsoft.Azure.Management.DataLake.Store/A.html#020a0db52cedc36b" class="t t">TransferFailedException</a>&gt;(() =&gt; <span class="r54 r">ssu</span>.<span class="i">Upload</span>());
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Tests various scenarios where the upload will fail repeatedly; verifies that the uploader will retry a certain number of times before finally giving up</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="1d59f21911df2bc9" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SingleSegmentUploader_RetryBlock</a>()
        {
            <a href="#ece70364fee32699" class="i method">TestRetryBlock</a>(0);
            <a href="#ece70364fee32699" class="i method">TestRetryBlock</a>(1);
            <a href="#ece70364fee32699" class="i method">TestRetryBlock</a>(2);
            <a href="#ece70364fee32699" class="i method">TestRetryBlock</a>(3);
            <a href="#ece70364fee32699" class="i method">TestRetryBlock</a>(4);
            <a href="#ece70364fee32699" class="i method">TestRetryBlock</a>(5);
        }
 
        <b>internal void</b> <a id="ece70364fee32699" href="../R/ece70364fee32699.html" target="n" data-glyph="74,1" class="i method">TestRetryBlock</a>(<b>int</b> <span id="r55 rd" class="r55 r">failCount</span>)
        {
            <b>bool</b> <span id="r56 rd" class="r56 r">expectSuccess</span> = <span class="r55 r">failCount</span> &lt; <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#62b7b26e3b4d119f" class="t t">SingleSegmentUploader</a>.<a href="/Microsoft.Azure.Management.DataLake.Store/A.html#7aa3318da19b9344" class="i field">MaxBufferUploadAttemptCount</a>;
 
            <b>int</b> <span id="r57 rd" class="r57 r">callCount</span> = 0;
 
            <a href="InMemoryFrontEnd.cs.html#1eeb459c94164e15" class="k">var</a> <span id="r58 rd" class="r58 r">workingFrontEnd</span> = <b>new</b> <span class="t">InMemoryFrontEnd</span>();
            <a href="MockableFrontEnd.cs.html#5510e7d5e66873a2" class="k">var</a> <span id="r59 rd" class="r59 r">fe</span> = <b>new</b> <a href="MockableFrontEnd.cs.html#c733f659d5547a6c" class="t constructor">MockableFrontEnd</a>(<span class="r58 r">workingFrontEnd</span>);
            <span class="r59 r">fe</span>.<a href="MockableFrontEnd.cs.html#efe609198f7928bf" class="i property">CreateStreamImplementation</a> =
                (<span id="r60 rd" class="r60 r">streamPath</span>, <span id="r61 rd" class="r61 r">overwrite</span>, <span id="r62 rd" class="r62 r">data</span>, <span id="r63 rd" class="r63 r">byteCount</span>) =&gt;
                {
                    <span class="r57 r">callCount</span>++;
                    <b>if</b> (<span class="r57 r">callCount</span> &lt;= <span class="r55 r">failCount</span>)
                    {
                        <b>throw</b> <b>new</b> <span class="t">IntentionalException</span>();
                    }
                    <span class="r58 r">workingFrontEnd</span>.<span class="i">CreateStream</span>(<span class="r60 r">streamPath</span>, <span class="r61 r">overwrite</span>, <span class="r62 r">data</span>, <span class="r63 r">byteCount</span>);
                };
 
            <span class="r59 r">fe</span>.<a href="MockableFrontEnd.cs.html#0f9b92841842010a" class="i property">AppendToStreamImplementation</a> =
                (<span id="r64 rd" class="r64 r">streamPath</span>, <span id="r65 rd" class="r65 r">data</span>, <span id="r66 rd" class="r66 r">offset</span>, <span id="r67 rd" class="r67 r">byteCount</span>) =&gt;
                {
                    <span class="r57 r">callCount</span>++;
                    <b>if</b> (<span class="r57 r">callCount</span> &lt;= <span class="r55 r">failCount</span>)
                    {
                        <b>throw</b> <b>new</b> <span class="t">IntentionalException</span>();
                    }
                    <span class="r58 r">workingFrontEnd</span>.<span class="i">AppendToStream</span>(<span class="r64 r">streamPath</span>, <span class="r65 r">data</span>, <span class="r66 r">offset</span>, <span class="r67 r">byteCount</span>);
                };
 
            <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#3c08d873a58fc637" class="k">var</a> <span id="r68 rd" class="r68 r">metadata</span> = <span class="i">CreateMetadata</span>(<a href="#d234caba1b206b94" class="i field">_smallFilePath</a>, <a href="#57e56765bd43c289" class="i field">_smallFileContents</a>.<span class="i">Length</span>);
            <a href="#248e659313a2aca4" class="k">var</a> <span id="r69 rd" class="r69 r">progressTracker</span> = <b>new</b> <a href="#37fbee03ddfb1ac5" class="t constructor">TestProgressTracker</a>();
            <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#62b7b26e3b4d119f" class="k">var</a> <span id="r70 rd" class="r70 r">ssu</span> = <b>new</b> <span class="t">SingleSegmentUploader</span>(0, <span class="r68 r">metadata</span>, <span class="r59 r">fe</span>, <span class="r69 r">progressTracker</span>);
            <span class="r70 r">ssu</span>.<a href="/Microsoft.Azure.Management.DataLake.Store/A.html#1f3cfffd2c17dddb" class="i property">UseBackOffRetryStrategy</a> = <b>false</b>;
 
            <b>if</b> (<span class="r56 r">expectSuccess</span>)
            {
                <span class="r70 r">ssu</span>.<span class="i">Upload</span>();
                <b>var</b> <span id="r71 rd" class="r71 r">actualContents</span> = <span class="r58 r">workingFrontEnd</span>.<a href="InMemoryFrontEnd.cs.html#bfd99bf90d317df4" class="i method">GetStreamContents</a>(<a href="#6f8433a95cfaa13a" class="i field">StreamPath</a>);
                <a href="AssertExtensions.cs.html#42cbe9977daafdb5" class="t t">AssertExtensions</a>.<a href="AssertExtensions.cs.html#7ae016da0ed0f9e1" class="i method">AreEqual</a>(<a href="#57e56765bd43c289" class="i field">_smallFileContents</a>, <span class="r71 r">actualContents</span>, <span class="s">&quot;Unexpected uploaded stream contents.&quot;</span>);
            }
            <b>else</b>
            {
                <span class="i">Assert</span>.<span class="i">Throws</span>&lt;<a href="#ad04262218544294" class="t t">IntentionalException</a>&gt;(() =&gt; { <span class="r70 r">ssu</span>.<span class="i">Upload</span>(); });
            }
            <a href="#ace3c2f600cc553e" class="i method">VerifyTracker</a>(<span class="r69 r">progressTracker</span>, <span class="r56 r">expectSuccess</span>);
        }
 
        <b>private</b> <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#3c08d873a58fc637" class="t t">TransferMetadata</a> <a id="ffce6147d3aecbea" href="../R/ffce6147d3aecbea.html" target="n" data-glyph="76,1" class="i method">CreateMetadata</a>(<b>string</b> <span id="r72 rd" class="r72 r">filePath</span>, <b>long</b> <span id="r73 rd" class="r73 r">fileLength</span>)
        {
            <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#3c08d873a58fc637" class="k">var</a> <span id="r74 rd" class="r74 r">metadata</span> = <b>new</b> <span class="t">TransferMetadata</span>()
            {
                <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#190138f2a84df06b" class="i property">InputFilePath</a> = <span class="r72 r">filePath</span>,
                <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#c2f4b2ebd90b6cb3" class="i property">FileLength</a> = <span class="r73 r">fileLength</span>,
                <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#fdcb0ca156a2a7cb" class="i property">TargetStreamPath</a> = <a href="#6f8433a95cfaa13a" class="i field">StreamPath</a>,
                <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#9131b8fdd074a557" class="i property">SegmentCount</a> = 1,
                <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#3409e7af196dbe90" class="i property">SegmentLength</a> = <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#4a50ebae0a9351d2" class="t t">TransferSegmentMetadata</a>.<span class="i">CalculateSegmentLength</span>(<span class="r73 r">fileLength</span>, 1),
                <span class="i">Segments</span> = <b>new</b> <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#4a50ebae0a9351d2" class="t t">TransferSegmentMetadata</a>[1],
                <a href="/Microsoft.Azure.Management.DataLake.Store/A.html#ffdbb867506e256b" class="i property">IsBinary</a> = <b>true</b>
            };
 
            <span class="r74 r">metadata</span>.<a href="/Microsoft.Azure.Management.DataLake.Store/A.html#982540b694e3af39" class="i property">Segments</a>[0] = <b>new</b> <span class="t">TransferSegmentMetadata</span>(0, <span class="r74 r">metadata</span>);
            <span class="r74 r">metadata</span>.<a href="/Microsoft.Azure.Management.DataLake.Store/A.html#982540b694e3af39" class="i property">Segments</a>[0].<a href="/Microsoft.Azure.Management.DataLake.Store/A.html#3e61c0eaf4a2746f" class="i property">Path</a> = <span class="r74 r">metadata</span>.<a href="/Microsoft.Azure.Management.DataLake.Store/A.html#fdcb0ca156a2a7cb" class="i property">TargetStreamPath</a>;
            <b>return</b> <span class="r74 r">metadata</span>;
        }
 
        <b>private void</b> <a id="ace3c2f600cc553e" href="../R/ace3c2f600cc553e.html" target="n" data-glyph="76,1" class="i method">VerifyTracker</a>(<a href="#248e659313a2aca4" class="t t">TestProgressTracker</a> <span id="r75 rd" class="r75 r">tracker</span>, <b>bool</b> <span id="r76 rd" class="r76 r">isSuccessfulUpload</span>)
        {
            <span class="i">Assert</span>.<span class="i">True</span>(0 &lt; <span class="r75 r">tracker</span>.<a href="#0a9d5461a837f3a6" class="i property">Reports</a>.<span class="i">Count</span>, <span class="s">&quot;No progress reports tracked&quot;</span>);
 
            <b>long</b> <span id="r77 rd" class="r77 r">lastIndication</span> = 0;
            <b>for</b> (<b>int</b> <span id="r78 rd" class="r78 r">i</span> = 0; <span class="r78 r">i</span> &lt; <span class="r75 r">tracker</span>.<a href="#0a9d5461a837f3a6" class="i property">Reports</a>.<span class="i">Count</span>; <span class="r78 r">i</span>++)
            {
                <b>var</b> <span id="r79 rd" class="r79 r">currentReport</span> = <span class="r75 r">tracker</span>.<a href="#0a9d5461a837f3a6" class="i property">Reports</a>[<span class="r78 r">i</span>];
                <b>if</b> (!<span class="r76 r">isSuccessfulUpload</span> &amp;&amp; <span class="r78 r">i</span> == <span class="r75 r">tracker</span>.<a href="#0a9d5461a837f3a6" class="i property">Reports</a>.<span class="i">Count</span> - 1)
                {
                    <span class="i">Assert</span>.<span class="i">True</span>(<span class="r79 r">currentReport</span>.<span class="i">IsFailed</span>, <span class="s">&quot;Last report did not indicate failure for a failed upload&quot;</span>);
                    <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r77 r">lastIndication</span>, <span class="r79 r">currentReport</span>.<span class="i">TransferredByteCount</span>);
                }
                <b>else</b>
                {
                    <span class="i">Assert</span>.<span class="i">False</span>(<span class="r79 r">currentReport</span>.<span class="i">IsFailed</span>, <span class="s">&quot;Progress report indicated failure but failure was not expected&quot;</span>);
                    <span class="i">Assert</span>.<span class="i">True</span>(<span class="r77 r">lastIndication</span> &lt; <span class="r79 r">currentReport</span>.<span class="i">TransferredByteCount</span>, <span class="s">&quot;Progress reports are not in increasing order&quot;</span>);
                }
                <span class="r77 r">lastIndication</span> = <span class="r79 r">currentReport</span>.<span class="i">TransferredByteCount</span>;
            }
        }
 
        <span class="k preprocess">#</span><span class="k preprocess">endregion</span>
 
        <b>private class</b> <a id="ad04262218544294" href="../R/ad04262218544294.html" target="n" data-glyph="4,1" class="t t"><span id="7bc0f4ec6d5d18f3">IntentionalException</span></a> : <span class="i">Exception</span> { }
 
        <b>private class</b> <a id="248e659313a2aca4" href="../R/248e659313a2aca4.html" target="n" data-glyph="4,1" class="t t">TestProgressTracker</a> : <span class="i">IProgress</span>&lt;<a href="/Microsoft.Azure.Management.DataLake.Store/A.html#47a2d1611194ef16" class="t t">SegmentTransferProgress</a>&gt;
        {
            <b>public</b> <a id="37fbee03ddfb1ac5" href="../R/37fbee03ddfb1ac5.html" target="n" data-glyph="72,2" class="t constructor">TestProgressTracker</a>()
            {
                <a href="#248e659313a2aca4" class="k">this</a>.<a href="#0a9d5461a837f3a6" class="i property">Reports</a> = <b>new</b> <span class="i">List</span>&lt;<a href="/Microsoft.Azure.Management.DataLake.Store/A.html#47a2d1611194ef16" class="t t">SegmentTransferProgress</a>&gt;();
            }
 
            <b>public void</b> <a id="3eaa9f20790e5b8d" href="../R/../../0000000000.html" target="n" data-glyph="72,2" class="i method">Report</a>(<a href="/Microsoft.Azure.Management.DataLake.Store/A.html#47a2d1611194ef16" class="t t">SegmentTransferProgress</a> <span id="r80 rd" class="r80 r">value</span>)
            {
                <a href="#248e659313a2aca4" class="k">this</a>.<a href="#0a9d5461a837f3a6" class="i property">Reports</a>.<span class="i">Add</span>(<span class="r80 r">value</span>);
            }
 
            <b>public</b> <span class="i">IList</span>&lt;<a href="/Microsoft.Azure.Management.DataLake.Store/A.html#47a2d1611194ef16" class="t t">SegmentTransferProgress</a>&gt; <a id="0a9d5461a837f3a6" href="../R/0a9d5461a837f3a6.html" target="n" data-glyph="102,2" class="i property">Reports</a>{ <b>get</b>; <b>private set</b>; }
        }
 
    }
}
</pre></td></tr></table></div></body></html>

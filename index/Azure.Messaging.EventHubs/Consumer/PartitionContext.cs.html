<!DOCTYPE html>
<html><head><title>PartitionContext.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(94);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Azure.Messaging.EventHubs/Consumer/PartitionContext.cs" target="_top">Consumer\PartitionContext.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Azure.Messaging.EventHubs" target="_top">Azure.Messaging.EventHubs.csproj</a> (Azure.Messaging.EventHubs)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License.</span>
 
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Core</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Messaging</span>.<span class="i n">EventHubs</span>.<span class="i n">Core</span>;
 
<b>namespace</b> <span class="i n">Azure</span>.<span class="i n">Messaging</span>.<span class="i n">EventHubs</span>.<span class="i n">Consumer</span>
{
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
    <span class="c">///</span><span class="c">   Represents an Event Hub partition and its relative state, as scoped to an associated</span>
    <span class="c">///</span><span class="c">   operation performed against it.</span>
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
    <span class="c">///</span>
    <b>public class</b> <a id="224668d23057d29b" href="../R/224668d23057d29b.html" target="n" data-glyph="0,0" class="t t">PartitionContext</a>
    {
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   The identifier of the Event Hub partition this context is associated with.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>public string</b> <a id="cd3de8a2df1fbc04" href="../R/cd3de8a2df1fbc04.html" target="n" data-glyph="102,1" class="i property">PartitionId</a> { <b>get</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   The </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="../Core/TransportConsumer.cs.html#265a21c281157aa2" class="t t">TransportConsumer</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> for this context to use as the source for information.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>private</b> <a href="@1@netstandard/A.html#809df5135c2bec67" class="t t">WeakReference</a>&lt;<a href="../Core/TransportConsumer.cs.html#265a21c281157aa2" class="t t">TransportConsumer</a>&gt; <a id="aa1a11acb90d1480" href="../R/aa1a11acb90d1480.html" target="n" data-glyph="106,1" class="i property">SourceConsumer</a> { <b>get</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   A set of information about the last enqueued event of a partition, as observed by the associated EventHubs client</span>
        <span class="c">///</span><span class="c">   associated with this context as events are received from the Event Hubs service.  This is only available if the consumer was</span>
        <span class="c">///</span><span class="c">   created with </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="ReadEventOptions.cs.html#897fd8591f87ab3a" class="t t">ReadEventOptions</a>.<a href="ReadEventOptions.cs.html#43c7feb4920f033f" class="i property">TrackLastEnqueuedEventProperties</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> set.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">The set of properties for the last event that was enqueued to the partition.  If no events were read or tracking was not set, the properties will be returned with default values.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   When information about the partition&#39;s last enqueued event is being tracked, each event received from the Event Hubs</span>
        <span class="c">///</span><span class="c">   service will carry metadata about the partition that it otherwise would not. This results in a small amount of</span>
        <span class="c">///</span><span class="c">   additional network bandwidth consumption that is generally a favorable trade-off when considered</span>
        <span class="c">///</span><span class="c">   against periodically making requests for partition properties using an Event Hub client.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="../EventHubsException.cs.html#fe9b3d9ffc64177d" class="t t">EventHubsException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Occurs when the Event Hubs client needed to read this information is no longer available.</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>public virtual</b> <a href="LastEnqueuedEventProperties.cs.html#e54b900e1c5c3c73" class="t t">LastEnqueuedEventProperties</a> <a id="a9065742cbb15e0b" href="../R/a9065742cbb15e0b.html" target="n" data-glyph="72,1" class="i method">ReadLastEnqueuedEventProperties</a>()
        {
            <a href="../Core/TransportConsumer.cs.html#265a21c281157aa2" class="k">var</a> <span id="r0 rd" class="r0 r">consumer</span> = <b>default</b>(<a href="../Core/TransportConsumer.cs.html#265a21c281157aa2" class="t t">TransportConsumer</a>);
 
            <b>if</b> ((<a href="#aa1a11acb90d1480" class="i property">SourceConsumer</a>?.<a href="@1@netstandard/A.html#655561bce79c86cd" class="i method">TryGetTarget</a>(<b>out</b> <span class="r0 r">consumer</span>) == <b>false</b>) || (<span class="r0 r">consumer</span> == <b>null</b>))
            {
                <span class="c">// If the consumer instance was not available, treat it as a closed instance for</span>
                <span class="c">// messaging consistency.</span>
 
                <a href="../P/0198b1312554d2ed.html#0198b1312554d2ed" class="t t">Argument</a>.<a href="../SharedSource/Core/Argument.cs.html#eda8ff4d51bf8b3e" class="i method">AssertNotClosed</a>(<b>true</b>, <a href="../Resources.Designer.cs.html#0f60eafa1a3b4f36" class="t t">Resources</a>.<a href="../Resources.Designer.cs.html#3a7d3fdccd5b0111" class="i property">ClientNeededForThisInformationNotAvailable</a>);
            }
 
            <b>return</b> <b>new</b> <a href="LastEnqueuedEventProperties.cs.html#f8a657afe06228dc" class="t constructor">LastEnqueuedEventProperties</a>(<span class="r0 r">consumer</span>.<a href="../Core/TransportConsumer.cs.html#8974ffb1d687671c" class="i property">LastReceivedEvent</a>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Initializes a new instance of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#224668d23057d29b" class="t t">PartitionContext</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> class.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r1 r">partitionId</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The identifier of the Event Hub partition this context is associated with.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r2 r">consumer</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="../Core/TransportConsumer.cs.html#265a21c281157aa2" class="t t">TransportConsumer</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> for this context to use as the source for information.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   The </span><span class="c">&lt;</span><span class="c">paramref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r2 r">consumer</span><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c">, if provided, will be held in a weak reference to ensure that it</span>
        <span class="c">///</span><span class="c">   does not impact resource use should the partition context be held beyond the lifespan of the</span>
        <span class="c">///</span><span class="c">   consumer instance.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>internal</b> <a id="c1e8ded3a7b6846a" href="../R/c1e8ded3a7b6846a.html" target="n" data-glyph="74,1" class="t constructor">PartitionContext</a>(<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1 rd" class="r1 r">partitionId</span>,
                                  <a href="../Core/TransportConsumer.cs.html#265a21c281157aa2" class="t t">TransportConsumer</a> <span id="r2 rd" class="r2 r">consumer</span>) : <a href="#d27f703e95b42e38" class="k">this</a>(<span class="r1 r">partitionId</span>)
        {
            <a href="../P/0198b1312554d2ed.html#0198b1312554d2ed" class="t t">Argument</a>.<a href="../SharedSource/Azure.Core/Argument.cs.html#208d023d6fa23d33" class="i method">AssertNotNull</a>(<span class="r2 r">consumer</span>, <b>nameof</b>(<span class="r2 r">consumer</span>));
            <a href="#aa1a11acb90d1480" class="i property">SourceConsumer</a> = <b>new</b> <a href="@1@netstandard/A.html#0bcc5ece65ea67eb" class="t constructor">WeakReference</a>&lt;<a href="../Core/TransportConsumer.cs.html#265a21c281157aa2" class="t t">TransportConsumer</a>&gt;(<span class="r2 r">consumer</span>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Initializes a new instance of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#224668d23057d29b" class="t t">PartitionContext</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> class.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r3 r">partitionId</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The identifier of the Event Hub partition this context is associated with.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>protected internal</b> <a id="d27f703e95b42e38" href="../R/d27f703e95b42e38.html" target="n" data-glyph="75,1" class="t constructor">PartitionContext</a>(<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r3 rd" class="r3 r">partitionId</span>)
        {
            <a href="../P/0198b1312554d2ed.html#0198b1312554d2ed" class="t t">Argument</a>.<a href="../SharedSource/Azure.Core/Argument.cs.html#6f15f042abe7f96a" class="i method">AssertNotNullOrEmpty</a>(<span class="r3 r">partitionId</span>, <b>nameof</b>(<span class="r3 r">partitionId</span>));
            <a href="#cd3de8a2df1fbc04" class="i property">PartitionId</a> = <span class="r3 r">partitionId</span>;
        }
    }
}
</pre></td></tr></table></div></body></html>

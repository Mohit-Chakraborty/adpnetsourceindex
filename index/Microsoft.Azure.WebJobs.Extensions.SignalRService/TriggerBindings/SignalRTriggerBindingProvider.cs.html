<!DOCTYPE html>
<html><head><title>SignalRTriggerBindingProvider.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(199);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Microsoft.Azure.WebJobs.Extensions.SignalRService/TriggerBindings/SignalRTriggerBindingProvider.cs" target="_top">TriggerBindings\SignalRTriggerBindingProvider.cs</a><br/></td><td><a class="blueLink" href="https://github.com/Azure/azure-sdk-for-net/tree/main/sdk/signalr/Microsoft.Azure.WebJobs.Extensions.SignalRService/src/TriggerBindings/SignalRTriggerBindingProvider.cs" target="_blank">View on GitHub</a></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Microsoft.Azure.WebJobs.Extensions.SignalRService" target="_top">Microsoft.Azure.WebJobs.Extensions.SignalRService.csproj</a> (Microsoft.Azure.WebJobs.Extensions.SignalRService)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License.</span>
 
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Reflection</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>.<span class="i n">Tasks</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">SignalR</span>.<span class="i n">Management</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">WebJobs</span>.<span class="i n">Description</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">WebJobs</span>.<span class="i n">Host</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">WebJobs</span>.<span class="i n">Host</span>.<span class="i n">Triggers</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Extensions</span>.<span class="i n">Logging</span>;
<b>using static</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">WebJobs</span>.<span class="i n">Extensions</span>.<span class="i n">SignalRService</span>.<a href="ServerlessHub.cs.html#f4a91ed4f596d263" class="t t">ServerlessHub</a>;
 
<b>namespace</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">WebJobs</span>.<span class="i n">Extensions</span>.<span class="i n">SignalRService</span>
{
    <b>internal class</b> <a id="bc87b11cb994e136" href="../R/bc87b11cb994e136.html" target="n" data-glyph="2,0" class="t t">SignalRTriggerBindingProvider</a> : <span class="t t">ITriggerBindingProvider</span>
    {
        <b>private readonly</b> <a href="ISignalRTriggerDispatcher.cs.html#ce7208060f389994" class="t t">ISignalRTriggerDispatcher</a> <a id="dceb3601e49c944e" href="../R/dceb3601e49c944e.html" target="n" data-glyph="46,1" class="i field">_dispatcher</a>;
        <b>private readonly</b> <span class="t t">INameResolver</span> <a id="43044b3d78189f1d" href="../R/43044b3d78189f1d.html" target="n" data-glyph="46,1" class="i field">_nameResolver</a>;
        <b>private readonly</b> <a href="../Config/IServiceManagerStore.cs.html#518cb3648929bf77" class="t t">IServiceManagerStore</a> <a id="c952cf6e48bd695b" href="../R/c952cf6e48bd695b.html" target="n" data-glyph="46,1" class="i field">_managerStore</a>;
        <b>private readonly</b> <a href="@1@netstandard/A.html#f092fb2b893a0162" class="t t">Exception</a> <a id="4780659bd6b8cd9c" href="../R/4780659bd6b8cd9c.html" target="n" data-glyph="46,1" class="i field">_webhookException</a>;
 
        <b>public</b> <a id="9aebbc500f9011bf" href="../R/9aebbc500f9011bf.html" target="n" data-glyph="72,1" class="t constructor">SignalRTriggerBindingProvider</a>(<a href="ISignalRTriggerDispatcher.cs.html#ce7208060f389994" class="t t">ISignalRTriggerDispatcher</a> <span id="r0 rd" class="r0 r">dispatcher</span>, <span class="t t">INameResolver</span> <span id="r1 rd" class="r1 r">nameResolver</span>, <a href="../Config/IServiceManagerStore.cs.html#518cb3648929bf77" class="t t">IServiceManagerStore</a> <span id="r2 rd" class="r2 r">managerStore</span>, <a href="@1@netstandard/A.html#f092fb2b893a0162" class="t t">Exception</a> <span id="r3 rd" class="r3 r">webhookException</span>)
        {
            <a href="#dceb3601e49c944e" class="i field">_dispatcher</a> = <span class="r0 r">dispatcher</span> ?? <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#8314938388254d5a" class="t constructor">ArgumentNullException</a>(<b>nameof</b>(<span class="r0 r">dispatcher</span>));
            <a href="#43044b3d78189f1d" class="i field">_nameResolver</a> = <span class="r1 r">nameResolver</span> ?? <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#8314938388254d5a" class="t constructor">ArgumentNullException</a>(<b>nameof</b>(<span class="r1 r">nameResolver</span>));
            <a href="#c952cf6e48bd695b" class="i field">_managerStore</a> = <span class="r2 r">managerStore</span> ?? <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#8314938388254d5a" class="t constructor">ArgumentNullException</a>(<b>nameof</b>(<span class="r2 r">managerStore</span>));
            <a href="#4780659bd6b8cd9c" class="i field">_webhookException</a> = <span class="r3 r">webhookException</span>;
        }
 
        <b>public async</b> <a href="@1@netstandard/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<span class="t t">ITriggerBinding</span>&gt; <a id="b257c202c82f5e7f" href="../R/b257c202c82f5e7f.html" target="n" data-glyph="72,1" class="i method">TryCreateAsync</a>(<span class="t t">TriggerBindingProviderContext</span> <span id="r4 rd" class="r4 r">context</span>)
        {
            <b>if</b> (<span class="r4 r">context</span> == <b>null</b>)
            {
                <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#8314938388254d5a" class="t constructor">ArgumentNullException</a>(<b>nameof</b>(<span class="r4 r">context</span>));
            }
 
            <a href="@1@netstandard/A.html#adf5577c07f51f16" class="k">var</a> <span id="r5 rd" class="r5 r">parameterInfo</span> = <span class="r4 r">context</span>.<span class="i property">Parameter</span>;
            <a href="SignalRTriggerAttribute.cs.html#5a1a9ceece6fd92d" class="k">var</a> <span id="r6 rd" class="r6 r">attribute</span> = <span class="r5 r">parameterInfo</span>.<a href="@1@netstandard/A.html#3e7787ed060c726d" class="i method">GetCustomAttribute</a>&lt;<a href="SignalRTriggerAttribute.cs.html#5a1a9ceece6fd92d" class="t t">SignalRTriggerAttribute</a>&gt;(<b>false</b>);
            <b>if</b> (<span class="r6 r">attribute</span> == <b>null</b>)
            {
                <b>return</b> <b>null</b>;
            }
 
            <b>if</b> (<a href="#4780659bd6b8cd9c" class="i field">_webhookException</a> != <b>null</b>)
            {
                <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#3d3c2c03118be4f8" class="t constructor">NotSupportedException</a>(<span class="s">$&quot;</span><span class="s">SignalR trigger is disabled due to &#39;AzureWebJobsStorage&#39; connection string is not set or invalid. </span>{<a href="#4780659bd6b8cd9c" class="i field">_webhookException</a>}<span class="s">&quot;</span>);
            }
 
            <a href="SignalRTriggerAttribute.cs.html#5a1a9ceece6fd92d" class="k">var</a> <span id="r7 rd" class="r7 r">resolvedAttribute</span> = <a href="#5aa448092b4f5b01" class="i method">GetParameterResolvedAttribute</a>(<span class="r6 r">attribute</span>, <span class="r5 r">parameterInfo</span>);
            <a href="#a0a5721acfa5ee9f" class="i method">ValidateSignalRTriggerAttributeBinding</a>(<span class="r7 r">resolvedAttribute</span>);
 
            <b>var</b> <span id="r8 rd" class="r8 r">accessKeys</span> = <a href="#c952cf6e48bd695b" class="i field">_managerStore</a>.<a href="../Config/IServiceManagerStore.cs.html#2d148b803e907b5b" class="i method">GetOrAddByConnectionStringKey</a>(<span class="r7 r">resolvedAttribute</span>.<a href="SignalRTriggerAttribute.cs.html#3f898a8d359e6982" class="i property">ConnectionStringSetting</a>).<a href="../Config/IInternalServiceHubContextStore.cs.html#6a70a58dcbdae7f6" class="i property">AccessKeys</a>;
 
            <b>var</b> <span id="r9 rd" class="r9 r">hubContext</span> = <b>await</b> <a href="#c952cf6e48bd695b" class="i field">_managerStore</a>.<a href="../Config/IServiceManagerStore.cs.html#2d148b803e907b5b" class="i method">GetOrAddByConnectionStringKey</a>(<span class="r7 r">resolvedAttribute</span>.<a href="SignalRTriggerAttribute.cs.html#3f898a8d359e6982" class="i property">ConnectionStringSetting</a>).<a href="../Config/IServiceHubContextStore.cs.html#dfe4e17bbfd2b4f4" class="i method">GetAsync</a>(<span class="r7 r">resolvedAttribute</span>.<a href="SignalRTriggerAttribute.cs.html#d2712b0ecc6923df" class="i property">HubName</a>).<span class="i method">ConfigureAwait</span>(<b>false</b>);
 
            <b>return</b> <b>new</b> <a href="SignalRTriggerBinding.cs.html#4991351846591b50" class="t constructor">SignalRTriggerBinding</a>(<span class="r5 r">parameterInfo</span>, <span class="r7 r">resolvedAttribute</span>, <a href="#dceb3601e49c944e" class="i field">_dispatcher</a>, <span class="r8 r">accessKeys</span>, <span class="r9 r">hubContext</span> <b>as</b> <span class="t t">ServiceHubContext</span>);
        }
 
        <b>internal</b> <a href="SignalRTriggerAttribute.cs.html#5a1a9ceece6fd92d" class="t t">SignalRTriggerAttribute</a> <a id="5aa448092b4f5b01" href="../R/5aa448092b4f5b01.html" target="n" data-glyph="74,1" class="i method">GetParameterResolvedAttribute</a>(<a href="SignalRTriggerAttribute.cs.html#5a1a9ceece6fd92d" class="t t">SignalRTriggerAttribute</a> <span id="r10 rd" class="r10 r">attribute</span>, <a href="@1@netstandard/A.html#adf5577c07f51f16" class="t t">ParameterInfo</a> <span id="r11 rd" class="r11 r">parameterInfo</span>)
        {
            <span class="c">//TODO: AutoResolve more properties in attribute</span>
            <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r12 rd" class="r12 r">hubName</span> = <span class="r10 r">attribute</span>.<a href="SignalRTriggerAttribute.cs.html#d2712b0ecc6923df" class="i property">HubName</a>;
            <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r13 rd" class="r13 r">category</span> = <span class="r10 r">attribute</span>.<a href="SignalRTriggerAttribute.cs.html#a20c4dc60d2d6d67" class="i property">Category</a>;
            <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r14 rd" class="r14 r">@event</span> = <span class="r10 r">attribute</span>.<a href="SignalRTriggerAttribute.cs.html#ae9039db05a212f0" class="i property">Event</a>;
            <b>var</b> <span id="r15 rd" class="r15 r">parameterNames</span> = <span class="r10 r">attribute</span>.<a href="SignalRTriggerAttribute.cs.html#777633891f9909a2" class="i property">ParameterNames</a> ?? <a href="@1@netstandard/A.html#156e066ecc4ccedf" class="t t">Array</a>.<a href="@1@netstandard/A.html#bc9fd1be0e4f4e70" class="i method">Empty</a>&lt;<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>&gt;();
            <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r16 rd" class="r16 r">connectionStringSetting</span> = <span class="r10 r">attribute</span>.<a href="SignalRTriggerAttribute.cs.html#3f898a8d359e6982" class="i property">ConnectionStringSetting</a>;
 
            <span class="c">// We have two models for C#, one is function based model which also work in multiple language</span>
            <span class="c">// Another one is class based model, which is highly close to SignalR itself but must keep some conventions.</span>
            <a href="@1@netstandard/A.html#382d90b1fa682bac" class="k">var</a> <span id="r17 rd" class="r17 r">method</span> = (<a href="@1@netstandard/A.html#382d90b1fa682bac" class="t t">MethodInfo</a>)<span class="r11 r">parameterInfo</span>.<a href="@1@netstandard/A.html#b2e9492d4754805d" class="i property">Member</a>;
            <a href="@1@netstandard/A.html#3d00eeab9feb80f3" class="k">var</a> <span id="r18 rd" class="r18 r">declaredType</span> = <span class="r17 r">method</span>.<a href="@1@netstandard/A.html#3eb1391de297c1a8" class="i property">DeclaringType</a>;
            <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>[] <span id="r19 rd" class="r19 r">parameterNamesFromAttribute</span>;
 
            <b>if</b> (<span class="r18 r">declaredType</span> != <b>null</b> &amp;&amp; <span class="r18 r">declaredType</span>.<a href="@1@netstandard/A.html#824767d46f981ce3" class="i method">IsSubclassOf</a>(<b>typeof</b>(<a href="ServerlessHub.cs.html#f4a91ed4f596d263" class="t t">ServerlessHub</a>)))
            {
                <span class="c">// Class based model</span>
                <b>if</b> (!<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@netstandard/A.html#23a8597f842071f4" class="i method">IsNullOrEmpty</a>(<span class="r12 r">hubName</span>) ||
                    !<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@netstandard/A.html#23a8597f842071f4" class="i method">IsNullOrEmpty</a>(<span class="r13 r">category</span>) ||
                    !<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@netstandard/A.html#23a8597f842071f4" class="i method">IsNullOrEmpty</a>(<span class="r14 r">@event</span>) ||
                    <span class="r15 r">parameterNames</span>.<a href="@1@netstandard/A.html#42e9b7616956cf94" class="i property">Length</a> != 0)
                {
                    <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#eb98012a74461437" class="t constructor">ArgumentException</a>(<span class="s">$&quot;</span>{<b>nameof</b>(<a href="SignalRTriggerAttribute.cs.html#5a1a9ceece6fd92d" class="t t">SignalRTriggerAttribute</a>)}<span class="s"> must use parameterless constructor in class based model.</span><span class="s">&quot;</span>);
                }
                <span class="r19 r">parameterNamesFromAttribute</span> = <span class="r17 r">method</span>.<a href="@1@netstandard/A.html#91801fac9c14db1f" class="i method">GetParameters</a>().<a href="@1@netstandard/A.html#e73922753675387a" class="i method">Where</a>(<a href="#37261673a2e7d5b8" class="i method">IsLegalClassBasedParameter</a>).<a href="@1@netstandard/A.html#5c652c53e80df013" class="i method">Select</a>(<span id="r20 rd" class="r20 r">p</span> =&gt; <span class="r20 r">p</span>.<a href="@1@netstandard/A.html#5189606fee27d248" class="i property">Name</a>).<a href="@1@netstandard/A.html#783a052330e7d48d" class="i method">ToArray</a>();
                <span class="r12 r">hubName</span> = <span class="r18 r">declaredType</span>.<a href="@1@netstandard/A.html#aa4f112f79364b6e" class="i property">Name</a>;
                <span class="r13 r">category</span> = <a href="#ad9f443cedf388e8" class="i method">GetCategoryFromMethodName</a>(<span class="r17 r">method</span>.<a href="@1@netstandard/A.html#aa4f112f79364b6e" class="i property">Name</a>);
                <span class="r14 r">@event</span> = <a href="#5782c82744229a52" class="i method">GetEventFromMethodName</a>(<span class="r17 r">method</span>.<a href="@1@netstandard/A.html#aa4f112f79364b6e" class="i property">Name</a>, <span class="r13 r">category</span>);
                <span class="r16 r">connectionStringSetting</span> = <span class="r18 r">declaredType</span>.<a href="@1@netstandard/A.html#0497c27b6539bfd9" class="i method">GetCustomAttribute</a>&lt;<a href="ServerlessHub.cs.html#1ced147895249971" class="t t">SignalRConnectionAttribute</a>&gt;()?.<a href="ServerlessHub.cs.html#fd906e5a9801f854" class="i property">Connection</a> ?? <span class="r10 r">attribute</span>.<a href="SignalRTriggerAttribute.cs.html#3f898a8d359e6982" class="i property">ConnectionStringSetting</a>;
            }
            <b>else</b>
            {
                <span class="r19 r">parameterNamesFromAttribute</span> = <span class="r17 r">method</span>.<a href="@1@netstandard/A.html#91801fac9c14db1f" class="i method">GetParameters</a>().
                    <a href="@1@netstandard/A.html#e73922753675387a" class="i method">Where</a>(<span id="r21 rd" class="r21 r">p</span> =&gt; <span class="r21 r">p</span>.<a href="@1@netstandard/A.html#3e7787ed060c726d" class="i method">GetCustomAttribute</a>&lt;<a href="SignalRParameterAttribute.cs.html#1a1ec701c2c42535" class="t t">SignalRParameterAttribute</a>&gt;(<b>false</b>) != <b>null</b>).
                    <a href="@1@netstandard/A.html#5c652c53e80df013" class="i method">Select</a>(<span id="r22 rd" class="r22 r">p</span> =&gt; <span class="r22 r">p</span>.<a href="@1@netstandard/A.html#5189606fee27d248" class="i property">Name</a>).<a href="@1@netstandard/A.html#783a052330e7d48d" class="i method">ToArray</a>();
 
                <b>if</b> (<span class="r19 r">parameterNamesFromAttribute</span>.<a href="@1@netstandard/A.html#42e9b7616956cf94" class="i property">Length</a> != 0 &amp;&amp; <span class="r15 r">parameterNames</span>.<a href="@1@netstandard/A.html#42e9b7616956cf94" class="i property">Length</a> != 0)
                {
                    <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#265d72f49e915224" class="t constructor">InvalidOperationException</a>(
                        <span class="s">$&quot;</span>{<b>nameof</b>(<a href="SignalRTriggerAttribute.cs.html#5a1a9ceece6fd92d" class="t t">SignalRTriggerAttribute</a>)}<span class="s">.</span>{<b>nameof</b>(<a href="SignalRTriggerAttribute.cs.html#5a1a9ceece6fd92d" class="t t">SignalRTriggerAttribute</a>.<a href="SignalRTriggerAttribute.cs.html#777633891f9909a2" class="i property">ParameterNames</a>)}<span class="s"> and </span>{<b>nameof</b>(<a href="SignalRParameterAttribute.cs.html#1a1ec701c2c42535" class="t t">SignalRParameterAttribute</a>)}<span class="s"> can not be set in the same Function.</span><span class="s">&quot;</span>);
                }
 
                <span class="c">// If we aren&#39;t using the class-based model, make sure we resolve binding expressions for attribute properties here.</span>
                <span class="r12 r">hubName</span> = <a href="#43044b3d78189f1d" class="i field">_nameResolver</a>.<span class="i method">ResolveWholeString</span>(<span class="r12 r">hubName</span>);
                <span class="r13 r">category</span> = <a href="#43044b3d78189f1d" class="i field">_nameResolver</a>.<span class="i method">ResolveWholeString</span>(<span class="r13 r">category</span>);
                <span class="r14 r">@event</span> = <a href="#43044b3d78189f1d" class="i field">_nameResolver</a>.<span class="i method">ResolveWholeString</span>(<span class="r14 r">@event</span>);
            }
 
            <span class="r15 r">parameterNames</span> = <span class="r19 r">parameterNamesFromAttribute</span>.<a href="@1@netstandard/A.html#42e9b7616956cf94" class="i property">Length</a> != 0
                ? <span class="r19 r">parameterNamesFromAttribute</span>
                : <span class="r15 r">parameterNames</span>;
 
            <b>return</b> <b>new</b> <a href="SignalRTriggerAttribute.cs.html#62242552d09070f1" class="t constructor">SignalRTriggerAttribute</a>(<span class="r12 r">hubName</span>, <span class="r13 r">category</span>, <span class="r14 r">@event</span>, <span class="r15 r">parameterNames</span>) { <a href="SignalRTriggerAttribute.cs.html#3f898a8d359e6982" class="i property">ConnectionStringSetting</a> = <span class="r16 r">connectionStringSetting</span> };
        }
 
        <b>private static void</b> <a id="a0a5721acfa5ee9f" href="../R/a0a5721acfa5ee9f.html" target="n" data-glyph="76,1" class="i method">ValidateSignalRTriggerAttributeBinding</a>(<a href="SignalRTriggerAttribute.cs.html#5a1a9ceece6fd92d" class="t t">SignalRTriggerAttribute</a> <span id="r23 rd" class="r23 r">attribute</span>)
        {
            <b>if</b> (<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@netstandard/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>(<span class="r23 r">attribute</span>.<a href="SignalRTriggerAttribute.cs.html#3f898a8d359e6982" class="i property">ConnectionStringSetting</a>))
            {
                <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#265d72f49e915224" class="t constructor">InvalidOperationException</a>(
                    <span class="s">$&quot;</span>{<b>nameof</b>(<a href="SignalRTriggerAttribute.cs.html#5a1a9ceece6fd92d" class="t t">SignalRTriggerAttribute</a>)}<span class="s">.</span>{<b>nameof</b>(<a href="../SignalRConnectionInfoAttribute.cs.html#4bfc34f71009f2cc" class="t t">SignalRConnectionInfoAttribute</a>.<a href="../NegotiationBaseAttribute.cs.html#f47a94f353661d1e" class="i property">ConnectionStringSetting</a>)}<span class="s"> is not allowed to be null or whitespace.</span><span class="s">&quot;</span>);
            }
            <a href="#de8e3ffb451d9b95" class="i method">ValidateParameterNames</a>(<span class="r23 r">attribute</span>.<a href="SignalRTriggerAttribute.cs.html#777633891f9909a2" class="i property">ParameterNames</a>);
        }
 
        <b>private static string</b> <a id="ad9f443cedf388e8" href="../R/ad9f443cedf388e8.html" target="n" data-glyph="76,1" class="i method">GetCategoryFromMethodName</a>(<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r24 rd" class="r24 r">name</span>)
        {
            <b>if</b> (<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@netstandard/A.html#d47c1f57ad1e1e6e" class="i method">Equals</a>(<span class="r24 r">name</span>, <a href="../Constants.cs.html#2a8c172e6bf1aff3" class="t t">Constants</a>.<a href="../Constants.cs.html#6cb3a0feae0cc149" class="i field">OnConnected</a>, <a href="@1@netstandard/A.html#702797def97ecb7c" class="t t">StringComparison</a>.<a href="@1@netstandard/A.html#6c3139b940557bf9" class="i field">OrdinalIgnoreCase</a>) ||
                <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@netstandard/A.html#d47c1f57ad1e1e6e" class="i method">Equals</a>(<span class="r24 r">name</span>, <a href="../Constants.cs.html#2a8c172e6bf1aff3" class="t t">Constants</a>.<a href="../Constants.cs.html#5f21a609f990f333" class="i field">OnDisconnected</a>, <a href="@1@netstandard/A.html#702797def97ecb7c" class="t t">StringComparison</a>.<a href="@1@netstandard/A.html#6c3139b940557bf9" class="i field">OrdinalIgnoreCase</a>))
            {
                <b>return</b> <a href="../Category.cs.html#eb439cf43823b849" class="t t">Category</a>.<a href="../Category.cs.html#5c05c151d97b4d98" class="i field">Connections</a>;
            }
 
            <b>return</b> <a href="../Category.cs.html#eb439cf43823b849" class="t t">Category</a>.<a href="../Category.cs.html#d85ed031db536750" class="i field">Messages</a>;
        }
 
        <b>private static string</b> <a id="5782c82744229a52" href="../R/5782c82744229a52.html" target="n" data-glyph="76,1" class="i method">GetEventFromMethodName</a>(<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r25 rd" class="r25 r">name</span>, <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r26 rd" class="r26 r">category</span>)
        {
            <b>if</b> (<span class="r26 r">category</span> == <a href="../Category.cs.html#eb439cf43823b849" class="t t">Category</a>.<a href="../Category.cs.html#5c05c151d97b4d98" class="i field">Connections</a>)
            {
                <b>if</b> (<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@netstandard/A.html#d47c1f57ad1e1e6e" class="i method">Equals</a>(<span class="r25 r">name</span>, <a href="../Constants.cs.html#2a8c172e6bf1aff3" class="t t">Constants</a>.<a href="../Constants.cs.html#6cb3a0feae0cc149" class="i field">OnConnected</a>, <a href="@1@netstandard/A.html#702797def97ecb7c" class="t t">StringComparison</a>.<a href="@1@netstandard/A.html#6c3139b940557bf9" class="i field">OrdinalIgnoreCase</a>))
                {
                    <b>return</b> <a href="../Event.cs.html#200821e8aecd8f18" class="t t">Event</a>.<a href="../Event.cs.html#2d794994abc9ae6f" class="i field">Connected</a>;
                }
                <b>if</b> (<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@netstandard/A.html#d47c1f57ad1e1e6e" class="i method">Equals</a>(<span class="r25 r">name</span>, <a href="../Constants.cs.html#2a8c172e6bf1aff3" class="t t">Constants</a>.<a href="../Constants.cs.html#5f21a609f990f333" class="i field">OnDisconnected</a>, <a href="@1@netstandard/A.html#702797def97ecb7c" class="t t">StringComparison</a>.<a href="@1@netstandard/A.html#6c3139b940557bf9" class="i field">OrdinalIgnoreCase</a>))
                {
                    <b>return</b> <a href="../Event.cs.html#200821e8aecd8f18" class="t t">Event</a>.<a href="../Event.cs.html#cae8f36cd83ffec7" class="i field">Disconnected</a>;
                }
            }
 
            <b>return</b> <span class="r25 r">name</span>;
        }
 
        <b>private static void</b> <a id="de8e3ffb451d9b95" href="../R/de8e3ffb451d9b95.html" target="n" data-glyph="76,1" class="i method">ValidateParameterNames</a>(<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>[] <span id="r27 rd" class="r27 r">parameterNames</span>)
        {
            <b>if</b> (<span class="r27 r">parameterNames</span> == <b>null</b> || <span class="r27 r">parameterNames</span>.<a href="@1@netstandard/A.html#42e9b7616956cf94" class="i property">Length</a> == 0)
            {
                <b>return</b>;
            }
 
            <b>if</b> (<span class="r27 r">parameterNames</span>.<a href="@1@netstandard/A.html#42e9b7616956cf94" class="i property">Length</a> != <span class="r27 r">parameterNames</span>.<a href="@1@netstandard/A.html#1246b23904e29c42" class="i method">Distinct</a>(<a href="@1@netstandard/A.html#a1c3d85bbf4ae20e" class="t t">StringComparer</a>.<a href="@1@netstandard/A.html#59b9c33842417944" class="i property">OrdinalIgnoreCase</a>).<a href="@1@netstandard/A.html#41ef9e39e54d0d0b" class="i method">Count</a>())
            {
                <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#eb98012a74461437" class="t constructor">ArgumentException</a>(<span class="s">&quot;Elements in ParameterNames should be ignore case unique.&quot;</span>);
            }
        }
 
        <b>private bool</b> <a id="37261673a2e7d5b8" href="../R/37261673a2e7d5b8.html" target="n" data-glyph="76,1" class="i method">IsLegalClassBasedParameter</a>(<a href="@1@netstandard/A.html#adf5577c07f51f16" class="t t">ParameterInfo</a> <span id="r28 rd" class="r28 r">parameter</span>)
        {
            <span class="c">// In class based model, we treat all the parameters as a legal parameter except the cases below</span>
            <span class="c">// 1. Parameter decorated by [SignalRIgnore]</span>
            <span class="c">// 2. Parameter decorated Attribute that has BindingAttribute</span>
            <span class="c">// 3. Two special type ILogger and CancellationToken</span>
 
            <b>if</b> (<span class="r28 r">parameter</span>.<a href="@1@netstandard/A.html#caa6206e7a50fd83" class="i property">ParameterType</a>.<a href="@1@netstandard/A.html#ba0cffea035fe210" class="i method">IsAssignableFrom</a>(<b>typeof</b>(<span class="t t">ILogger</span>)) ||
                <span class="r28 r">parameter</span>.<a href="@1@netstandard/A.html#caa6206e7a50fd83" class="i property">ParameterType</a>.<a href="@1@netstandard/A.html#ba0cffea035fe210" class="i method">IsAssignableFrom</a>(<b>typeof</b>(<a href="@1@netstandard/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a>)))
            {
                <b>return</b> <b>false</b>;
            }
            <b>if</b> (<span class="r28 r">parameter</span>.<a href="@1@netstandard/A.html#c9cfb19ceea55818" class="i method">GetCustomAttribute</a>&lt;<a href="SignalRIgnoreAttribute.cs.html#04056f29bac1ff7d" class="t t">SignalRIgnoreAttribute</a>&gt;() != <b>null</b>)
            {
                <b>return</b> <b>false</b>;
            }
            <b>if</b> (<a href="#72b1fc1771fe1595" class="i method">HasBindingAttribute</a>(<span class="r28 r">parameter</span>.<a href="@1@netstandard/A.html#0881c7b942645ac0" class="i method">GetCustomAttributes</a>()))
            {
                <b>return</b> <b>false</b>;
            }
 
            <b>return</b> <b>true</b>;
        }
 
        <b>private static bool</b> <a id="72b1fc1771fe1595" href="../R/72b1fc1771fe1595.html" target="n" data-glyph="76,1" class="i method">HasBindingAttribute</a>(<a href="@1@netstandard/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="@1@netstandard/A.html#707d3dbc6c887265" class="t t">Attribute</a>&gt; <span id="r29 rd" class="r29 r">attributes</span>)
        {
            <b>return</b> <span class="r29 r">attributes</span>.<a href="@1@netstandard/A.html#6a1af7c3d17845e3" class="i method">Any</a>(<span id="r30 rd" class="r30 r">attribute</span> =&gt; <span class="r30 r">attribute</span>.<a href="@1@netstandard/A.html#4d73eb225aef8a61" class="i method">GetType</a>().<a href="@1@netstandard/A.html#c6bc76200d08473d" class="i method">GetCustomAttribute</a>&lt;<span class="t t">BindingAttribute</span>&gt;(<b>false</b>) != <b>null</b>);
        }
    }
}</pre></td></tr></table></div></body></html>

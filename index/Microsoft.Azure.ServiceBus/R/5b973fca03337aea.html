<!DOCTYPE html>
<html><head><title>SystemProperties</title><link rel="stylesheet" href="../../styles.css"/><script src="../../scripts.js"></script></head><body onload="ro();">
<div class="rH">2 writes to SystemProperties</div><div class="rA">Microsoft.Azure.ServiceBus (2)</div><div class="rG" id="Microsoft.Azure.ServiceBus"><div class="rF"><div class="rN">Message.cs (2)</div>
<a href="../Message.cs.html#51"><b>51</b>this.<i>SystemProperties</i> = new SystemPropertiesCollection();</a>
<a href="../Message.cs.html#309"><b>309</b>clone.<i>SystemProperties</i> = new SystemPropertiesCollection();</a>
</div>
</div>
<div class="rH">66 references to SystemProperties</div><div class="rA">Microsoft.Azure.ServiceBus (34)</div><div class="rG" id="Microsoft.Azure.ServiceBus"><div class="rF"><div class="rN">Amqp\AmqpMessageConverter.cs (10)</div>
<a href="../Amqp/AmqpMessageConverter.cs.html#183"><b>183</b>sbMessage.<i>SystemProperties</i>.BodyObject = dotNetObject;</a>
<a href="../Amqp/AmqpMessageConverter.cs.html#187"><b>187</b>sbMessage.<i>SystemProperties</i>.BodyObject = amqpMessage.ValueBody.Value;</a>
<a href="../Amqp/AmqpMessageConverter.cs.html#232"><b>232</b>sbMessage.<i>SystemProperties</i>.DeliveryCount = isPeeked ? (int)(amqpMessage.Header.DeliveryCount.Value) : (int)(amqpMessage.Header.DeliveryCount.Value + 1);</a>
<a href="../Amqp/AmqpMessageConverter.cs.html#306"><b>306</b>sbMessage.<i>SystemProperties</i>.EnqueuedTimeUtc = (DateTime)pair.Value;</a>
<a href="../Amqp/AmqpMessageConverter.cs.html#312"><b>312</b>sbMessage.<i>SystemProperties</i>.SequenceNumber = (long)pair.Value;</a>
<a href="../Amqp/AmqpMessageConverter.cs.html#315"><b>315</b>sbMessage.<i>SystemProperties</i>.EnqueuedSequenceNumber = (long)pair.Value;</a>
<a href="../Amqp/AmqpMessageConverter.cs.html#318"><b>318</b>sbMessage.<i>SystemProperties</i>.LockedUntilUtc = (DateTime)pair.Value;</a>
<a href="../Amqp/AmqpMessageConverter.cs.html#324"><b>324</b>sbMessage.<i>SystemProperties</i>.PartitionId = (short)pair.Value;</a>
<a href="../Amqp/AmqpMessageConverter.cs.html#330"><b>330</b>sbMessage.<i>SystemProperties</i>.DeadLetterSource = (string)pair.Value;</a>
<a href="../Amqp/AmqpMessageConverter.cs.html#346"><b>346</b>sbMessage.<i>SystemProperties</i>.LockTokenGuid = new Guid(guidBuffer);</a>
</div>
<div class="rF"><div class="rN">Core\MessageReceiver.cs (5)</div>
<a href="../Core/MessageReceiver.cs.html#746"><b>746</b>message.<i>SystemProperties</i>.LockedUntilUtc = await RenewLockAsync(message.<i>SystemProperties</i>.LockToken).ConfigureAwait(false);</a>
<a href="../Core/MessageReceiver.cs.html#1164"><b>1164</b>this.LastPeekedSequenceNumber = message.<i>SystemProperties</i>.SequenceNumber;</a>
<a href="../Core/MessageReceiver.cs.html#1214"><b>1214</b>message.<i>SystemProperties</i>.LockTokenGuid = lockToken;</a>
<a href="../Core/MessageReceiver.cs.html#1215"><b>1215</b>this.requestResponseLockedMessages.AddOrUpdate(lockToken, message.<i>SystemProperties</i>.LockedUntilUtc);</a>
</div>
<div class="rF"><div class="rN">Core\MessageSender.cs (1)</div>
<a href="../Core/MessageSender.cs.html#481"><b>481</b>if (message.<i>SystemProperties</i>.IsLockTokenSet)</a>
</div>
<div class="rF"><div class="rN">Extensions\MessageInterOpExtensions.cs (2)</div>
<a href="../Extensions/MessageInterOpExtensions.cs.html#83"><b>83</b>if(message.<i>SystemProperties</i>.BodyObject != null)</a>
<a href="../Extensions/MessageInterOpExtensions.cs.html#85"><b>85</b>return (T)message.<i>SystemProperties</i>.BodyObject;</a>
</div>
<div class="rF"><div class="rN">Message.cs (2)</div>
<a href="../Message.cs.html#181"><b>181</b>if (this.TimeToLive &gt;= DateTime.MaxValue.Subtract(this.<i>SystemProperties</i>.EnqueuedTimeUtc))</a>
<a href="../Message.cs.html#186"><b>186</b>return this.<i>SystemProperties</i>.EnqueuedTimeUtc.Add(this.TimeToLive);</a>
</div>
<div class="rF"><div class="rN">MessageReceivePump.cs (3)</div>
<a href="../MessageReceivePump.cs.html#226"><b>226</b>await this.messageReceiver.AbandonAsync(message.<i>SystemProperties</i>.LockToken).ConfigureAwait(false);</a>
<a href="../MessageReceivePump.cs.html#242"><b>242</b>await this.messageReceiver.CompleteAsync(new[] { message.<i>SystemProperties</i>.LockToken }).ConfigureAwait(false);</a>
<a href="../MessageReceivePump.cs.html#258"><b>258</b>var amount = MessagingUtilities.CalculateRenewAfterDuration(message.<i>SystemProperties</i>.LockedUntilUtc);</a>
</div>
<div class="rF"><div class="rN">MessagingEventSource.cs (9)</div>
<a href="../MessagingEventSource.cs.html#699"><b>699</b>this.MessageReceiverPumpTaskStart(clientId, message?.<i>SystemProperties</i>.SequenceNumber ?? -1, currentSemaphoreCount);</a>
<a href="../MessagingEventSource.cs.html#738"><b>738</b>this.MessageReceiverPumpDispatchTaskStart(clientId, message?.<i>SystemProperties</i>.SequenceNumber ?? -1);</a>
<a href="../MessagingEventSource.cs.html#753"><b>753</b>this.MessageReceiverPumpDispatchTaskStop(clientId, message?.<i>SystemProperties</i>.SequenceNumber ?? -1, currentSemaphoreCount);</a>
<a href="../MessagingEventSource.cs.html#768"><b>768</b>this.MessageReceiverPumpUserCallbackStart(clientId, message?.<i>SystemProperties</i>.SequenceNumber ?? -1);</a>
<a href="../MessagingEventSource.cs.html#783"><b>783</b>this.MessageReceiverPumpUserCallbackStop(clientId, message?.<i>SystemProperties</i>.SequenceNumber ?? -1);</a>
<a href="../MessagingEventSource.cs.html#798"><b>798</b>this.MessageReceiverPumpUserCallbackException(clientId, message?.<i>SystemProperties</i>.SequenceNumber ?? -1, exception.ToString());</a>
<a href="../MessagingEventSource.cs.html#813"><b>813</b>this.MessageReceiverPumpRenewMessageStart(clientId, message?.<i>SystemProperties</i>.SequenceNumber ?? -1, (long)renewAfterTimeSpan.TotalSeconds);</a>
<a href="../MessagingEventSource.cs.html#828"><b>828</b>this.MessageReceiverPumpRenewMessageStop(clientId, message?.<i>SystemProperties</i>.SequenceNumber ?? -1);</a>
<a href="../MessagingEventSource.cs.html#843"><b>843</b>this.MessageReceiverPumpRenewMessageException(clientId, message?.<i>SystemProperties</i>.SequenceNumber ?? -1, exception.ToString());</a>
</div>
<div class="rF"><div class="rN">SessionReceivePump.cs (2)</div>
<a href="../SessionReceivePump.cs.html#94"><b>94</b>await session.CompleteAsync(new[] { message.<i>SystemProperties</i>.LockToken }).ConfigureAwait(false);</a>
<a href="../SessionReceivePump.cs.html#109"><b>109</b>await session.AbandonAsync(message.<i>SystemProperties</i>.LockToken).ConfigureAwait(false);</a>
</div>
</div>
<div class="rA">Microsoft.Azure.ServiceBus.Tests (32)</div><div class="rG" id="Microsoft.Azure.ServiceBus.Tests"><div class="rF"><div class="rN">AmqpConverterTests.cs (4)</div>
<a href="../../Microsoft.Azure.ServiceBus.Tests/AmqpConverterTests.cs.html#144"><b>144</b>sbMessage.<i>SystemProperties</i>.SequenceNumber = 1L;</a>
<a href="../../Microsoft.Azure.ServiceBus.Tests/AmqpConverterTests.cs.html#146"><b>146</b>Assert.Equal(2, sbMessage.<i>SystemProperties</i>.DeliveryCount);</a>
<a href="../../Microsoft.Azure.ServiceBus.Tests/AmqpConverterTests.cs.html#161"><b>161</b>sbMessage.<i>SystemProperties</i>.SequenceNumber = 1L;</a>
<a href="../../Microsoft.Azure.ServiceBus.Tests/AmqpConverterTests.cs.html#163"><b>163</b>Assert.Equal(3, sbMessage.<i>SystemProperties</i>.DeliveryCount);</a>
</div>
<div class="rF"><div class="rN">Infrastructure\TestUtility.cs (6)</div>
<a href="../../Microsoft.Azure.ServiceBus.Tests/Infrastructure/TestUtility.cs.html#144"><b>144</b>await messageReceiver.CompleteAsync(messages.Select(message =&gt; message.<i>SystemProperties</i>.LockToken));</a>
<a href="../../Microsoft.Azure.ServiceBus.Tests/Infrastructure/TestUtility.cs.html#153"><b>153</b>await messageReceiver.AbandonAsync(message.<i>SystemProperties</i>.LockToken);</a>
<a href="../../Microsoft.Azure.ServiceBus.Tests/Infrastructure/TestUtility.cs.html#164"><b>164</b>await messageReceiver.DeadLetterAsync(message.<i>SystemProperties</i>.LockToken);</a>
<a href="../../Microsoft.Azure.ServiceBus.Tests/Infrastructure/TestUtility.cs.html#175"><b>175</b>await messageReceiver.DeferAsync(message.<i>SystemProperties</i>.LockToken);</a>
<a href="../../Microsoft.Azure.ServiceBus.Tests/Infrastructure/TestUtility.cs.html#213"><b>213</b>if (!sequenceNumbers.Add(message.<i>SystemProperties</i>.SequenceNumber))</a>
<a href="../../Microsoft.Azure.ServiceBus.Tests/Infrastructure/TestUtility.cs.html#215"><b>215</b>throw new Exception($&quot;Sequence Number &#39;{message.<i>SystemProperties</i>.SequenceNumber}&#39; was repeated&quot;);</a>
</div>
<div class="rF"><div class="rN">MessageTests.cs (1)</div>
<a href="../../Microsoft.Azure.ServiceBus.Tests/MessageTests.cs.html#95"><b>95</b>Assert.False(message.<i>SystemProperties</i>.IsReceived);</a>
</div>
<div class="rF"><div class="rN">OnSessionQueueTests.cs (4)</div>
<a href="../../Microsoft.Azure.ServiceBus.Tests/OnSessionQueueTests.cs.html#229"><b>229</b>TestUtility.Log($&quot;Received Session: {session.SessionId} message: SequenceNumber: {message.<i>SystemProperties</i>.SequenceNumber}&quot;);</a>
<a href="../../Microsoft.Azure.ServiceBus.Tests/OnSessionQueueTests.cs.html#233"><b>233</b>await session.CompleteAsync(message.<i>SystemProperties</i>.LockToken);</a>
<a href="../../Microsoft.Azure.ServiceBus.Tests/OnSessionQueueTests.cs.html#282"><b>282</b>TestUtility.Log($&quot;Received Session: {session.SessionId} message: SequenceNumber: {message.<i>SystemProperties</i>.SequenceNumber}&quot;);</a>
<a href="../../Microsoft.Azure.ServiceBus.Tests/OnSessionQueueTests.cs.html#286"><b>286</b>await session.CompleteAsync(message.<i>SystemProperties</i>.LockToken);</a>
</div>
<div class="rF"><div class="rN">OnSessionTopicSubscriptionTests.cs (4)</div>
<a href="../../Microsoft.Azure.ServiceBus.Tests/OnSessionTopicSubscriptionTests.cs.html#179"><b>179</b>TestUtility.Log($&quot;Received Session: {session.SessionId} message: SequenceNumber: {message.<i>SystemProperties</i>.SequenceNumber}&quot;);</a>
<a href="../../Microsoft.Azure.ServiceBus.Tests/OnSessionTopicSubscriptionTests.cs.html#183"><b>183</b>await session.CompleteAsync(message.<i>SystemProperties</i>.LockToken);</a>
<a href="../../Microsoft.Azure.ServiceBus.Tests/OnSessionTopicSubscriptionTests.cs.html#239"><b>239</b>TestUtility.Log($&quot;Received Session: {session.SessionId} message: SequenceNumber: {message.<i>SystemProperties</i>.SequenceNumber}&quot;);</a>
<a href="../../Microsoft.Azure.ServiceBus.Tests/OnSessionTopicSubscriptionTests.cs.html#243"><b>243</b>await session.CompleteAsync(message.<i>SystemProperties</i>.LockToken);</a>
</div>
<div class="rF"><div class="rN">SenderReceiverClientTestBase.cs (11)</div>
<a href="../../Microsoft.Azure.ServiceBus.Tests/SenderReceiverClientTestBase.cs.html#50"><b>50</b>var messagesWithDeliveryCount2 = receivedMessages.Where(message =&gt; message.<i>SystemProperties</i>.DeliveryCount == 2).Count();</a>
<a href="../../Microsoft.Azure.ServiceBus.Tests/SenderReceiverClientTestBase.cs.html#93"><b>93</b>var sequenceNumbers = receivedMessages.Select(receivedMessage =&gt; receivedMessage.<i>SystemProperties</i>.SequenceNumber).ToList();</a>
<a href="../../Microsoft.Azure.ServiceBus.Tests/SenderReceiverClientTestBase.cs.html#108"><b>108</b>var count = receivedMessages.Count(message =&gt; message.<i>SystemProperties</i>.DeliveryCount == 3);</a>
<a href="../../Microsoft.Azure.ServiceBus.Tests/SenderReceiverClientTestBase.cs.html#124"><b>124</b>var firstLockedUntilUtcTime = message.<i>SystemProperties</i>.LockedUntilUtc;</a>
<a href="../../Microsoft.Azure.ServiceBus.Tests/SenderReceiverClientTestBase.cs.html#132"><b>132</b>TestUtility.Log($&quot;After First Renewal: {message.<i>SystemProperties</i>.LockedUntilUtc}&quot;);</a>
<a href="../../Microsoft.Azure.ServiceBus.Tests/SenderReceiverClientTestBase.cs.html#133"><b>133</b>Assert.True(message.<i>SystemProperties</i>.LockedUntilUtc &gt;= firstLockedUntilUtcTime + TimeSpan.FromSeconds(10));</a>
<a href="../../Microsoft.Azure.ServiceBus.Tests/SenderReceiverClientTestBase.cs.html#138"><b>138</b>await messageReceiver.RenewLockAsync(message.<i>SystemProperties</i>.LockToken);</a>
<a href="../../Microsoft.Azure.ServiceBus.Tests/SenderReceiverClientTestBase.cs.html#139"><b>139</b>TestUtility.Log($&quot;After Second Renewal: {message.<i>SystemProperties</i>.LockedUntilUtc}&quot;);</a>
<a href="../../Microsoft.Azure.ServiceBus.Tests/SenderReceiverClientTestBase.cs.html#140"><b>140</b>Assert.True(message.<i>SystemProperties</i>.LockedUntilUtc &gt;= firstLockedUntilUtcTime + TimeSpan.FromSeconds(5));</a>
<a href="../../Microsoft.Azure.ServiceBus.Tests/SenderReceiverClientTestBase.cs.html#159"><b>159</b>Assert.True(message.<i>SystemProperties</i>.SequenceNumber != lastSequenceNumber);</a>
<a href="../../Microsoft.Azure.ServiceBus.Tests/SenderReceiverClientTestBase.cs.html#160"><b>160</b>lastSequenceNumber = message.<i>SystemProperties</i>.SequenceNumber;</a>
</div>
<div class="rF"><div class="rN">TestSessionHandler.cs (2)</div>
<a href="../../Microsoft.Azure.ServiceBus.Tests/TestSessionHandler.cs.html#66"><b>66</b>TestUtility.Log($&quot;Received Session: {session.SessionId} message: SequenceNumber: {message.<i>SystemProperties</i>.SequenceNumber}&quot;);</a>
<a href="../../Microsoft.Azure.ServiceBus.Tests/TestSessionHandler.cs.html#70"><b>70</b>await session.CompleteAsync(message.<i>SystemProperties</i>.LockToken);</a>
</div>
</div>
</body></html>
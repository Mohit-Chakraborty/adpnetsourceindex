<!DOCTYPE html>
<html><head><title>ServiceBusConnectionStringBuilder.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(459);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Microsoft.Azure.ServiceBus/ServiceBusConnectionStringBuilder.cs" target="_top">ServiceBusConnectionStringBuilder.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Microsoft.Azure.ServiceBus" target="_top">Microsoft.Azure.ServiceBus.csproj</a> (Microsoft.Azure.ServiceBus)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft. All rights reserved.</span>
<span class="c">// Licensed under the MIT license. See LICENSE file in the project root for full license information.</span>
 
<b>namespace</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">ServiceBus</span>
{
    <b>using</b> <span class="i">System</span>;
    <b>using</b> <span class="i">System</span>.<span class="i">Collections</span>.<span class="i">Generic</span>;
    <b>using</b> <span class="i">System</span>.<span class="i">Globalization</span>;
    <b>using</b> <span class="i">System</span>.<span class="i">Text</span>;
    <b>using</b> <span class="i n">Primitives</span>;
 
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
    <span class="c">///</span><span class="c"> Used to generate Service Bus connection strings.</span>
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
    <b>public class</b> <a id="f5792d111dd93f0d" href="R/f5792d111dd93f0d.html" target="n" data-glyph="0,0" class="t t">ServiceBusConnectionStringBuilder</a>
    {
        <b>const char</b> <a id="71934899f86c90e3" href="R/71934899f86c90e3.html" target="n" data-glyph="10,1" class="i field">KeyValueSeparator</a> = <span class="s">&#39;=&#39;</span>;
        <b>const char</b> <a id="f42de3c092ef28a3" href="R/f42de3c092ef28a3.html" target="n" data-glyph="10,1" class="i field">KeyValuePairDelimiter</a> = <span class="s">&#39;;&#39;</span>;
        <b>const string</b> <a id="cb7107b15df13265" href="R/cb7107b15df13265.html" target="n" data-glyph="10,1" class="i field">EndpointScheme</a> = <span class="s">&quot;amqps&quot;</span>;
        <b>const string</b> <a id="61257756d5b99888" href="R/61257756d5b99888.html" target="n" data-glyph="10,1" class="i field">EndpointConfigName</a> = <span class="s">&quot;Endpoint&quot;</span>;
        <b>const string</b> <a id="3b269e204a7dc4ab" href="R/3b269e204a7dc4ab.html" target="n" data-glyph="10,1" class="i field">SharedAccessKeyNameConfigName</a> = <span class="s">&quot;SharedAccessKeyName&quot;</span>;
        <b>const string</b> <a id="f422bf5735f5caac" href="R/f422bf5735f5caac.html" target="n" data-glyph="10,1" class="i field">SharedAccessKeyConfigName</a> = <span class="s">&quot;SharedAccessKey&quot;</span>;
        <b>const string</b> <a id="b536e9e82baa26c2" href="R/b536e9e82baa26c2.html" target="n" data-glyph="10,1" class="i field">SharedAccessSignatureConfigName</a> = <span class="s">&quot;SharedAccessSignature&quot;</span>;
        <b>const string</b> <a id="42ca9db278c5f9bb" href="R/42ca9db278c5f9bb.html" target="n" data-glyph="10,1" class="i field">AuthenticationConfigName</a> = <span class="s">&quot;Authentication&quot;</span>;
 
        <b>const string</b> <a id="223cd662233cbc45" href="R/223cd662233cbc45.html" target="n" data-glyph="10,1" class="i field">EntityPathConfigName</a> = <span class="s">&quot;EntityPath&quot;</span>;
        <b>const string</b> <a id="7cffbbc0f9944a2e" href="R/7cffbbc0f9944a2e.html" target="n" data-glyph="10,1" class="i field">TransportTypeConfigName</a> = <span class="s">&quot;TransportType&quot;</span>;
 
        <b>const string</b> <a id="02f1ceab433148c8" href="R/02f1ceab433148c8.html" target="n" data-glyph="10,1" class="i field">OperationTimeoutConfigName</a> = <span class="s">&quot;OperationTimeout&quot;</span>;
        <b>const string</b> <a id="f5bc1dbb908a9596" href="R/f5bc1dbb908a9596.html" target="n" data-glyph="10,1" class="i field">ConnectionIdleTimeoutConfigName</a> = <span class="s">&quot;ConnectionIdleTimeout&quot;</span>;
 
        <b>string</b> <a id="8d749901721e3fb9" href="R/8d749901721e3fb9.html" target="n" data-glyph="46,1" class="i field">entityPath</a>, <a id="13923fc51e518990" href="R/13923fc51e518990.html" target="n" data-glyph="46,1" class="i field">sasKeyName</a>, <a id="b1b8617fd51e41c1" href="R/b1b8617fd51e41c1.html" target="n" data-glyph="46,1" class="i field">sasKey</a>, <a id="0f63992acb92e22c" href="R/0f63992acb92e22c.html" target="n" data-glyph="46,1" class="i field">sasToken</a>, <a id="5741cb933bbcfc1f" href="R/5741cb933bbcfc1f.html" target="n" data-glyph="46,1" class="i field">endpoint</a>;
        <a href="#3d65e888e8be7a54" class="t t">AuthenticationType</a> <a id="c0711c3215fce74c" href="R/c0711c3215fce74c.html" target="n" data-glyph="46,1" class="i field">authType</a> = <a href="#3d65e888e8be7a54" class="t t">AuthenticationType</a>.<a href="#db29dc7b79c533af" class="i field">Other</a>;
 
        <b>public enum</b> <a id="3d65e888e8be7a54" href="R/3d65e888e8be7a54.html" target="n" data-glyph="18,1" class="t t"><span id="fdb8d2ba79c9bc7d">AuthenticationType</span></a>
        {
            <a id="db29dc7b79c533af" href="R/db29dc7b79c533af.html" target="n" data-glyph="24,2" class="i field">Other</a>,
            <a id="165ffc0c2fd01f50" href="R/165ffc0c2fd01f50.html" target="n" data-glyph="24,2" class="i field">ManagedIdentity</a>
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Instantiates a new </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#f5792d111dd93f0d" class="t t">ServiceBusConnectionStringBuilder</a><span class="c">&quot;</span><span class="c">/&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public</b> <a id="209481adc15426e1" href="R/209481adc15426e1.html" target="n" data-glyph="72,1" class="t constructor">ServiceBusConnectionStringBuilder</a>()
        {
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Instantiates a new </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#f5792d111dd93f0d" class="t t">ServiceBusConnectionStringBuilder</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r0 r">connectionString</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Connection string for namespace or the entity.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <b>public</b> <a id="827839081d194f7b" href="R/827839081d194f7b.html" target="n" data-glyph="72,1" class="t constructor">ServiceBusConnectionStringBuilder</a>(<b>string</b> <span id="r0 rd" class="r0 r">connectionString</span>)
        {
            <b>if</b> (!<b>string</b>.<span class="i">IsNullOrWhiteSpace</span>(<span class="r0 r">connectionString</span>))
            {
                <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#79d7949ef873dcb6" class="i method">ParseConnectionString</a>(<span class="r0 r">connectionString</span>);
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Instantiates a new </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#f5792d111dd93f0d" class="t t">ServiceBusConnectionStringBuilder</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">example</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> var connectionStringBuilder = new ServiceBusConnectionStringBuilder(</span>
        <span class="c">///</span><span class="c">     &quot;contoso.servicebus.windows.net&quot;,</span>
        <span class="c">///</span><span class="c">     &quot;myQueue&quot;,</span>
        <span class="c">///</span><span class="c">     &quot;RootManageSharedAccessKey&quot;,</span>
        <span class="c">///</span><span class="c">     &quot;</span><span class="c">&amp;amp;</span><span class="c">lt;sharedAccessKey</span><span class="c">&amp;amp;</span><span class="c">gt;</span>
        <span class="c">///</span><span class="c"> );</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">example</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r1 r">endpoint</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Fully qualified endpoint.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <b>public</b> <a id="f06c2a439e1ca9f7" href="R/f06c2a439e1ca9f7.html" target="n" data-glyph="72,1" class="t constructor">ServiceBusConnectionStringBuilder</a>(<b>string</b> <span id="r1 rd" class="r1 r">endpoint</span>, <b>string</b> <span id="r2 rd" class="r2 r">entityPath</span>, <b>string</b> <span id="r3 rd" class="r3 r">sharedAccessKeyName</span>, <b>string</b> <span id="r4 rd" class="r4 r">sharedAccessKey</span>)
        {
            <b>if</b> (<b>string</b>.<span class="i">IsNullOrWhiteSpace</span>(<span class="r1 r">endpoint</span>))
            {
                <b>throw</b> <a href="Primitives/Fx.cs.html#c01e8844709e19c1" class="t t">Fx</a>.<a href="Primitives/Fx.cs.html#0793cb830fb5b201" class="i property">Exception</a>.<a href="Primitives/ExceptionUtility.cs.html#4ae6cf9072070b0b" class="i method">ArgumentNullOrWhiteSpace</a>(<b>nameof</b>(<span class="r1 r">endpoint</span>));
            }
            <b>if</b> (<b>string</b>.<span class="i">IsNullOrWhiteSpace</span>(<span class="r3 r">sharedAccessKeyName</span>) || <b>string</b>.<span class="i">IsNullOrWhiteSpace</span>(<span class="r4 r">sharedAccessKey</span>))
            {
                <b>throw</b> <a href="Primitives/Fx.cs.html#c01e8844709e19c1" class="t t">Fx</a>.<a href="Primitives/Fx.cs.html#0793cb830fb5b201" class="i property">Exception</a>.<a href="Primitives/ExceptionUtility.cs.html#4ae6cf9072070b0b" class="i method">ArgumentNullOrWhiteSpace</a>(<b>string</b>.<span class="i">IsNullOrWhiteSpace</span>(<span class="r3 r">sharedAccessKeyName</span>) ? <b>nameof</b>(<span class="r3 r">sharedAccessKeyName</span>) : <b>nameof</b>(<span class="r4 r">sharedAccessKey</span>));
            }
 
            <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#d82416b2893a7a2a" class="i property">Endpoint</a> = <span class="r1 r">endpoint</span>;
            <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#07e91b5081d2efe4" class="i property">EntityPath</a> = <span class="r2 r">entityPath</span>;
            <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#314e80ac524061ba" class="i property">SasKeyName</a> = <span class="r3 r">sharedAccessKeyName</span>;
            <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#58c098126f1761f8" class="i property">SasKey</a> = <span class="r4 r">sharedAccessKey</span>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Instantiates a new </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#f5792d111dd93f0d" class="t t">ServiceBusConnectionStringBuilder</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">example</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> var connectionStringBuilder = new ServiceBusConnectionStringBuilder(</span>
        <span class="c">///</span><span class="c">     &quot;contoso.servicebus.windows.net&quot;,</span>
        <span class="c">///</span><span class="c">     &quot;myQueue&quot;,</span>
        <span class="c">///</span><span class="c">     &quot;{ ... SAS token ... }&quot;</span>
        <span class="c">///</span><span class="c"> );</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">example</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r5 r">endpoint</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Fully qualified endpoint.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <b>public</b> <a id="2f24e2effb4a4061" href="R/2f24e2effb4a4061.html" target="n" data-glyph="72,1" class="t constructor">ServiceBusConnectionStringBuilder</a>(<b>string</b> <span id="r5 rd" class="r5 r">endpoint</span>, <b>string</b> <span id="r6 rd" class="r6 r">entityPath</span>, <b>string</b> <span id="r7 rd" class="r7 r">sharedAccessSignature</span>)
        {
            <b>if</b> (<b>string</b>.<span class="i">IsNullOrWhiteSpace</span>(<span class="r5 r">endpoint</span>))
            {
                <b>throw</b> <a href="Primitives/Fx.cs.html#c01e8844709e19c1" class="t t">Fx</a>.<a href="Primitives/Fx.cs.html#0793cb830fb5b201" class="i property">Exception</a>.<a href="Primitives/ExceptionUtility.cs.html#4ae6cf9072070b0b" class="i method">ArgumentNullOrWhiteSpace</a>(<b>nameof</b>(<span class="r5 r">endpoint</span>));
            }
            <b>if</b> (<b>string</b>.<span class="i">IsNullOrWhiteSpace</span>(<span class="r7 r">sharedAccessSignature</span>))
            {
                <b>throw</b> <a href="Primitives/Fx.cs.html#c01e8844709e19c1" class="t t">Fx</a>.<a href="Primitives/Fx.cs.html#0793cb830fb5b201" class="i property">Exception</a>.<a href="Primitives/ExceptionUtility.cs.html#4ae6cf9072070b0b" class="i method">ArgumentNullOrWhiteSpace</a>(<b>nameof</b>(<span class="r7 r">sharedAccessSignature</span>));
            }
 
            <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#d82416b2893a7a2a" class="i property">Endpoint</a> = <span class="r5 r">endpoint</span>;
            <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#07e91b5081d2efe4" class="i property">EntityPath</a> = <span class="r6 r">entityPath</span>;
            <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#c164ea1845de213b" class="i property">SasToken</a> = <span class="r7 r">sharedAccessSignature</span>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Instantiates a new </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="c">T:Microsoft.Azure.ServiceBus.ServiceBusConnectionStringBuilder</span><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c">.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">example</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> var connectionStringBuilder = new ServiceBusConnectionStringBuilder(</span>
        <span class="c">///</span><span class="c">     &quot;contoso.servicebus.windows.net&quot;,</span>
        <span class="c">///</span><span class="c">     &quot;myQueue&quot;,</span>
        <span class="c">///</span><span class="c">     &quot;RootManageSharedAccessKey&quot;,</span>
        <span class="c">///</span><span class="c">     &quot;</span><span class="c">&amp;amp;</span><span class="c">lt;sharedAccessKey</span><span class="c">&amp;amp;</span><span class="c">gt;,</span>
        <span class="c">///</span><span class="c">     TransportType.Amqp</span>
        <span class="c">///</span><span class="c"> );</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">example</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r8 r">endpoint</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Fully qualified endpoint.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <b>public</b> <a id="b2a53c5ffafbe204" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="t constructor">ServiceBusConnectionStringBuilder</a>(<b>string</b> <span id="r8 rd" class="r8 r">endpoint</span>, <b>string</b> <span id="r9 rd" class="r9 r">entityPath</span>, <b>string</b> <span id="r10 rd" class="r10 r">sharedAccessKeyName</span>, <b>string</b> <span id="r11 rd" class="r11 r">sharedAccessKey</span>, <a href="TransportType.cs.html#0a715f93272561f8" class="t t">TransportType</a> <span id="r12 rd" class="r12 r">transportType</span>)
            : <a href="#f06c2a439e1ca9f7" class="k">this</a>(<span class="r8 r">endpoint</span>, <span class="r9 r">entityPath</span>, <span class="r10 r">sharedAccessKeyName</span>, <span class="r11 r">sharedAccessKey</span>)
        {
            <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#f67160408e0badd5" class="i property">TransportType</a> = <span class="r12 r">transportType</span>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Instantiates a new </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#f5792d111dd93f0d" class="t t">ServiceBusConnectionStringBuilder</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">example</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> var connectionStringBuilder = new ServiceBusConnectionStringBuilder(</span>
        <span class="c">///</span><span class="c">     &quot;contoso.servicebus.windows.net&quot;,</span>
        <span class="c">///</span><span class="c">     &quot;myQueue&quot;,</span>
        <span class="c">///</span><span class="c">     &quot;{ ... SAS token ... }&quot;,</span>
        <span class="c">///</span><span class="c">     TransportType.Amqp</span>
        <span class="c">///</span><span class="c"> );</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">example</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r13 r">endpoint</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Fully qualified endpoint.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <b>public</b> <a id="e168ac4bb99c3b81" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="t constructor">ServiceBusConnectionStringBuilder</a>(<b>string</b> <span id="r13 rd" class="r13 r">endpoint</span>, <b>string</b> <span id="r14 rd" class="r14 r">entityPath</span>, <b>string</b> <span id="r15 rd" class="r15 r">sharedAccessSignature</span>, <a href="TransportType.cs.html#0a715f93272561f8" class="t t">TransportType</a> <span id="r16 rd" class="r16 r">transportType</span>)
            :<a href="#2f24e2effb4a4061" class="k">this</a>(<span class="r13 r">endpoint</span>, <span class="r14 r">entityPath</span>, <span class="r15 r">sharedAccessSignature</span>)
        {
            <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#f67160408e0badd5" class="i property">TransportType</a> = <span class="r16 r">transportType</span>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Fully qualified domain name of the endpoint.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">example</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">code</span><span class="c">&gt;</span><span class="c">this.Endpoint = contoso.servicebus.windows.net</span><span class="c">&lt;/</span><span class="c">code</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">example</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i">ArgumentException</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Throws when endpoint is not fully qualified endpoint.</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i">UriFormatException</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Throws when the hostname cannot be parsed</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <b>public string</b> <a id="d82416b2893a7a2a" href="R/d82416b2893a7a2a.html" target="n" data-glyph="102,1" class="i property">Endpoint</a>
        {
            <b>get</b> =&gt; <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#5741cb933bbcfc1f" class="i field">endpoint</a>;
            <b>set</b>
            {
                <b>if</b> (!<b>value</b>.<span class="i">Contains</span>(<span class="s">&quot;.&quot;</span>))
                {
                    <b>throw</b> <a href="Primitives/Fx.cs.html#c01e8844709e19c1" class="t t">Fx</a>.<a href="Primitives/Fx.cs.html#0793cb830fb5b201" class="i property">Exception</a>.<a href="Primitives/ExceptionUtility.cs.html#e75e149f89dada84" class="i method">Argument</a>(<b>nameof</b>(<a href="#d82416b2893a7a2a" class="i property">Endpoint</a>), <span class="s">&quot;Endpoint should be fully qualified endpoint&quot;</span>);
                }
 
                <b>var</b> <span id="r17 rd" class="r17 r">uriBuilder</span> = <b>new</b> <span class="i">UriBuilder</span>(<b>value</b>.<span class="i">Trim</span>());
                <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#5741cb933bbcfc1f" class="i field">endpoint</a> = (<b>value</b>.<span class="i">Contains</span>(<span class="s">&quot;://&quot;</span>) ? <span class="r17 r">uriBuilder</span>.<span class="i">Scheme</span> : <a href="#cb7107b15df13265" class="i field">EndpointScheme</a>) + <span class="s">&quot;://&quot;</span> + <span class="r17 r">uriBuilder</span>.<span class="i">Host</span>;
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Get the entity path value from the connection string</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public string</b> <a id="07e91b5081d2efe4" href="R/07e91b5081d2efe4.html" target="n" data-glyph="102,1" class="i property">EntityPath</a>
        {
            <b>get</b> =&gt; <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#8d749901721e3fb9" class="i field">entityPath</a>;
            <b>set</b> =&gt; <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#8d749901721e3fb9" class="i field">entityPath</a> = <b>value</b>.<span class="i">Trim</span>();
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Get the shared access policy owner name from the connection string</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public string</b> <a id="314e80ac524061ba" href="R/314e80ac524061ba.html" target="n" data-glyph="102,1" class="i property">SasKeyName</a>
        {
            <b>get</b> =&gt; <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#13923fc51e518990" class="i field">sasKeyName</a>;
            <b>set</b>
            {
                <b>if</b> (<a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#84e3a9645c579be9" class="i property">Authentication</a> != <a href="#3d65e888e8be7a54" class="t t">AuthenticationType</a>.<a href="#db29dc7b79c533af" class="i field">Other</a>)
                {
                    <b>throw</b> <a href="Primitives/Fx.cs.html#c01e8844709e19c1" class="t t">Fx</a>.<a href="Primitives/Fx.cs.html#0793cb830fb5b201" class="i property">Exception</a>.<a href="Primitives/ExceptionUtility.cs.html#e75e149f89dada84" class="i method">Argument</a>(<span class="s">&quot;Authentication, SasKeyName&quot;</span>, <a href="Resources.Designer.cs.html#8e0563579d43c165" class="t t">Resources</a>.<a href="Resources.Designer.cs.html#e62e905da4f97091" class="i property">ArgumentInvalidCombination</a>.<a href="Primitives/StringUtility.cs.html#3a252e19ad9654c1" class="i method">FormatForUser</a>(<span class="s">&quot;Authentication, SasKeyName&quot;</span>));
                }
                <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#13923fc51e518990" class="i field">sasKeyName</a> = <b>value</b>.<span class="i">Trim</span>();
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Get the shared access policy key value from the connection string</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">value</span><span class="c">&gt;</span><span class="c">Shared Access Signature key</span><span class="c">&lt;/</span><span class="c">value</span><span class="c">&gt;</span>
        <b>public string</b> <a id="58c098126f1761f8" href="R/58c098126f1761f8.html" target="n" data-glyph="102,1" class="i property">SasKey</a>
        {
            <b>get</b> =&gt; <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#b1b8617fd51e41c1" class="i field">sasKey</a>;
            <b>set</b> =&gt; <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#b1b8617fd51e41c1" class="i field">sasKey</a> = <b>value</b>.<span class="i">Trim</span>();
        }
 
         <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Get the shared access signature token from the connection string</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">value</span><span class="c">&gt;</span><span class="c">Shared Access Signature token</span><span class="c">&lt;/</span><span class="c">value</span><span class="c">&gt;</span>
        <b>public string</b> <a id="c164ea1845de213b" href="R/c164ea1845de213b.html" target="n" data-glyph="102,1" class="i property">SasToken</a>
        {
            <b>get</b> =&gt; <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#0f63992acb92e22c" class="i field">sasToken</a>;
            <b>set</b>
            {
                <b>if</b> (<a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#84e3a9645c579be9" class="i property">Authentication</a> != <a href="#3d65e888e8be7a54" class="t t">AuthenticationType</a>.<a href="#db29dc7b79c533af" class="i field">Other</a>)
                {
                    <b>throw</b> <a href="Primitives/Fx.cs.html#c01e8844709e19c1" class="t t">Fx</a>.<a href="Primitives/Fx.cs.html#0793cb830fb5b201" class="i property">Exception</a>.<a href="Primitives/ExceptionUtility.cs.html#e75e149f89dada84" class="i method">Argument</a>(<span class="s">&quot;Authentication, SasToken&quot;</span>, <a href="Resources.Designer.cs.html#8e0563579d43c165" class="t t">Resources</a>.<a href="Resources.Designer.cs.html#e62e905da4f97091" class="i property">ArgumentInvalidCombination</a>.<a href="Primitives/StringUtility.cs.html#3a252e19ad9654c1" class="i method">FormatForUser</a>(<span class="s">&quot;Authentication, SasToken&quot;</span>));
                }
                <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#0f63992acb92e22c" class="i field">sasToken</a> = <b>value</b>.<span class="i">Trim</span>();
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Get the transport type from the connection string</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public</b> <a href="TransportType.cs.html#0a715f93272561f8" class="t t">TransportType</a> <a id="f67160408e0badd5" href="R/f67160408e0badd5.html" target="n" data-glyph="102,1" class="i property">TransportType</a> { <b>get</b>; <b>set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Duration after which individual operations will timeout.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span><span class="c">Defaults to 1 minute.</span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <b>public</b> <span class="i">TimeSpan</span> <a id="e4ea4f18d82ddda2" href="R/e4ea4f18d82ddda2.html" target="n" data-glyph="102,1" class="i property">OperationTimeout</a> { <b>get</b>; <b>set</b>; } = <a href="Constants.cs.html#6e9a057faa1690df" class="t t">Constants</a>.<a href="Constants.cs.html#3a6b1881fb5c8139" class="i field">DefaultOperationTimeout</a>;
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Maximum duration after which an idle connection is closed.A connection is considered</span>
        <span class="c">///</span><span class="c"> idle if it receives no traffic.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span><span class="c">Defaults to null.</span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <b>public</b> <span class="i">TimeSpan</span>? <a id="f59093422550eae3" href="R/f59093422550eae3.html" target="n" data-glyph="102,1" class="i property">ConnectionIdleTimeout</a> { <b>get</b>; <b>set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Enables Azure Active Directory Managed Identity authentication when set to ServiceBusConnectionStringBuilder.AuthenticationType.ManagedIdentity</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public</b> <a href="#3d65e888e8be7a54" class="t t">AuthenticationType</a> <a id="84e3a9645c579be9" href="R/84e3a9645c579be9.html" target="n" data-glyph="102,1" class="i property">Authentication</a>
        {
            <b>get</b> =&gt; <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#c0711c3215fce74c" class="i field">authType</a>;
            <b>set</b>
            {
                <b>if</b> (!<b>string</b>.<span class="i">IsNullOrWhiteSpace</span>(<a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#314e80ac524061ba" class="i property">SasKeyName</a>))
                {
                    <b>throw</b> <a href="Primitives/Fx.cs.html#c01e8844709e19c1" class="t t">Fx</a>.<a href="Primitives/Fx.cs.html#0793cb830fb5b201" class="i property">Exception</a>.<span class="i">Argument</span>(<b>nameof</b>(<a href="#42ca9db278c5f9bb" class="i field">AuthenticationConfigName</a>) + <span class="s">&quot;, &quot;</span> + <b>nameof</b>(<a href="#f422bf5735f5caac" class="i field">SharedAccessKeyConfigName</a>), 
                        <a href="Resources.Designer.cs.html#8e0563579d43c165" class="t t">Resources</a>.<a href="Resources.Designer.cs.html#e62e905da4f97091" class="i property">ArgumentInvalidCombination</a>.<span class="i">FormatForUser</span>(<b>nameof</b>(<a href="#42ca9db278c5f9bb" class="i field">AuthenticationConfigName</a>) + <span class="s">&quot;, &quot;</span> + <b>nameof</b>(<a href="#f422bf5735f5caac" class="i field">SharedAccessKeyConfigName</a>)));
                }
 
                <b>if</b> (!<b>string</b>.<span class="i">IsNullOrWhiteSpace</span>(<a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#c164ea1845de213b" class="i property">SasToken</a>))
                {
                    <b>throw</b> <a href="Primitives/Fx.cs.html#c01e8844709e19c1" class="t t">Fx</a>.<a href="Primitives/Fx.cs.html#0793cb830fb5b201" class="i property">Exception</a>.<span class="i">Argument</span>(<b>nameof</b>(<a href="#42ca9db278c5f9bb" class="i field">AuthenticationConfigName</a>) + <span class="s">&quot;, &quot;</span> + <b>nameof</b>(<a href="#f422bf5735f5caac" class="i field">SharedAccessKeyConfigName</a>), 
                        <a href="Resources.Designer.cs.html#8e0563579d43c165" class="t t">Resources</a>.<a href="Resources.Designer.cs.html#e62e905da4f97091" class="i property">ArgumentInvalidCombination</a>.<span class="i">FormatForUser</span>(<b>nameof</b>(<a href="#42ca9db278c5f9bb" class="i field">AuthenticationConfigName</a>) + <span class="s">&quot;, &quot;</span> + <b>nameof</b>(<a href="#f422bf5735f5caac" class="i field">SharedAccessKeyConfigName</a>)));
                }
                <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#c0711c3215fce74c" class="i field">authType</a> = <b>value</b>;
            }
        }
 
        <b>internal</b> <span class="i">Dictionary</span>&lt;<b>string</b>, <b>string</b>&gt; <a id="b78490c0ada308c2" href="R/b78490c0ada308c2.html" target="n" data-glyph="44,1" class="i field">ConnectionStringProperties</a> = <b>new</b> <span class="i">Dictionary</span>&lt;<b>string</b>, <b>string</b>&gt;(<span class="i">StringComparer</span>.<span class="i">CurrentCultureIgnoreCase</span>);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Returns an interoperable connection string that can be used to connect to ServiceBus Namespace</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">Namespace connection string</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>public string</b> <a id="667a4826f798998b" href="R/667a4826f798998b.html" target="n" data-glyph="72,1" class="i method">GetNamespaceConnectionString</a>()
        {
            <b>var</b> <span id="r18 rd" class="r18 r">connectionStringBuilder</span> = <b>new</b> <span class="i">StringBuilder</span>();
            <b>if</b> (<a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#d82416b2893a7a2a" class="i property">Endpoint</a> != <b>null</b>)
            {
                <span class="r18 r">connectionStringBuilder</span>.<span class="i">Append</span>(<a href="#61257756d5b99888" class="i field">EndpointConfigName</a>).<span class="i">Append</span>(<a href="#71934899f86c90e3" class="i field">KeyValueSeparator</a>).<span class="i">Append</span>(<a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#d82416b2893a7a2a" class="i property">Endpoint</a>).<span class="i">Append</span>(<a href="#f42de3c092ef28a3" class="i field">KeyValuePairDelimiter</a>);
            }
 
            <b>if</b> (!<b>string</b>.<span class="i">IsNullOrWhiteSpace</span>(<a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#314e80ac524061ba" class="i property">SasKeyName</a>))
            {
                <span class="r18 r">connectionStringBuilder</span>.<span class="i">Append</span>(<a href="#3b269e204a7dc4ab" class="i field">SharedAccessKeyNameConfigName</a>).<span class="i">Append</span>(<a href="#71934899f86c90e3" class="i field">KeyValueSeparator</a>).<span class="i">Append</span>(<a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#314e80ac524061ba" class="i property">SasKeyName</a>).<span class="i">Append</span>(<a href="#f42de3c092ef28a3" class="i field">KeyValuePairDelimiter</a>);
            }
 
            <b>if</b> (!<b>string</b>.<span class="i">IsNullOrWhiteSpace</span>(<a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#58c098126f1761f8" class="i property">SasKey</a>))
            {
                <span class="r18 r">connectionStringBuilder</span>.<span class="i">Append</span>(<a href="#f422bf5735f5caac" class="i field">SharedAccessKeyConfigName</a>).<span class="i">Append</span>(<a href="#71934899f86c90e3" class="i field">KeyValueSeparator</a>).<span class="i">Append</span>(<a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#58c098126f1761f8" class="i property">SasKey</a>).<span class="i">Append</span>(<a href="#f42de3c092ef28a3" class="i field">KeyValuePairDelimiter</a>);
            }
 
            <b>if</b> (!<b>string</b>.<span class="i">IsNullOrWhiteSpace</span>(<a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#c164ea1845de213b" class="i property">SasToken</a>))
            {
                <span class="r18 r">connectionStringBuilder</span>.<span class="i">Append</span>(<a href="#b536e9e82baa26c2" class="i field">SharedAccessSignatureConfigName</a>).<span class="i">Append</span>(<a href="#71934899f86c90e3" class="i field">KeyValueSeparator</a>).<span class="i">Append</span>(<a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#c164ea1845de213b" class="i property">SasToken</a>).<span class="i">Append</span>(<a href="#f42de3c092ef28a3" class="i field">KeyValuePairDelimiter</a>);
            }
 
            <b>if</b> (<a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#f67160408e0badd5" class="i property">TransportType</a> != <a href="TransportType.cs.html#0a715f93272561f8" class="t t">TransportType</a>.<a href="TransportType.cs.html#8cda352639a9c461" class="i field">Amqp</a>)
            {
                <span class="r18 r">connectionStringBuilder</span>.<span class="i">Append</span>(<a href="#7cffbbc0f9944a2e" class="i field">TransportTypeConfigName</a>).<span class="i">Append</span>(<a href="#71934899f86c90e3" class="i field">KeyValueSeparator</a>).<span class="i">Append</span>(<a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#f67160408e0badd5" class="i property">TransportType</a>).<span class="i">Append</span>(<a href="#f42de3c092ef28a3" class="i field">KeyValuePairDelimiter</a>);
            }
 
            <b>if</b> (<a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#e4ea4f18d82ddda2" class="i property">OperationTimeout</a> != <a href="Constants.cs.html#6e9a057faa1690df" class="t t">Constants</a>.<a href="Constants.cs.html#3a6b1881fb5c8139" class="i field">DefaultOperationTimeout</a>)
            {
                <span class="r18 r">connectionStringBuilder</span>.<span class="i">Append</span>(<a href="#02f1ceab433148c8" class="i field">OperationTimeoutConfigName</a>).<span class="i">Append</span>(<a href="#71934899f86c90e3" class="i field">KeyValueSeparator</a>).<span class="i">Append</span>(<a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#e4ea4f18d82ddda2" class="i property">OperationTimeout</a>).<span class="i">Append</span>(<a href="#f42de3c092ef28a3" class="i field">KeyValuePairDelimiter</a>);
            }
 
            <b>if</b> (<a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#84e3a9645c579be9" class="i property">Authentication</a> == <a href="#3d65e888e8be7a54" class="t t">AuthenticationType</a>.<a href="#165ffc0c2fd01f50" class="i field">ManagedIdentity</a>)
            {
                <span class="r18 r">connectionStringBuilder</span>.<span class="i">Append</span>(<a href="#42ca9db278c5f9bb" class="i field">AuthenticationConfigName</a>).<span class="i">Append</span>(<a href="#71934899f86c90e3" class="i field">KeyValueSeparator</a>).<span class="i">Append</span>(<span class="s">&quot;Managed Identity&quot;</span>).<span class="i">Append</span>(<a href="#f42de3c092ef28a3" class="i field">KeyValuePairDelimiter</a>);
            }
 
            <b>if</b> (<a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#f59093422550eae3" class="i property">ConnectionIdleTimeout</a>.<span class="i">HasValue</span>)
            {
                <span class="r18 r">connectionStringBuilder</span>.<span class="i">Append</span>(<a href="#f5bc1dbb908a9596" class="i field">ConnectionIdleTimeoutConfigName</a>).<span class="i">Append</span>(<a href="#71934899f86c90e3" class="i field">KeyValueSeparator</a>).<span class="i">Append</span>(<a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#f59093422550eae3" class="i property">ConnectionIdleTimeout</a>.<span class="i">Value</span>).<span class="i">Append</span>(<a href="#f42de3c092ef28a3" class="i field">KeyValuePairDelimiter</a>);
            }
 
            <b>return</b> <span class="r18 r">connectionStringBuilder</span>.<span class="i">ToString</span>().<span class="i">Trim</span>(<span class="s">&#39;;&#39;</span>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Returns an interoperable connection string that can be used to connect to the given ServiceBus Entity</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">Entity connection string</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>public string</b> <a id="6824e13b47e855cb" href="R/6824e13b47e855cb.html" target="n" data-glyph="72,1" class="i method">GetEntityConnectionString</a>()
        {
            <b>if</b> (<b>string</b>.<span class="i">IsNullOrWhiteSpace</span>(<a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#07e91b5081d2efe4" class="i property">EntityPath</a>))
            {
                <b>throw</b> <a href="Primitives/Fx.cs.html#c01e8844709e19c1" class="t t">Fx</a>.<a href="Primitives/Fx.cs.html#0793cb830fb5b201" class="i property">Exception</a>.<a href="Primitives/ExceptionUtility.cs.html#4ae6cf9072070b0b" class="i method">ArgumentNullOrWhiteSpace</a>(<b>nameof</b>(<a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#07e91b5081d2efe4" class="i property">EntityPath</a>));
            }
 
            <b>return</b> <span class="s">$&quot;</span>{<a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#667a4826f798998b" class="i method">GetNamespaceConnectionString</a>()}{<a href="#f42de3c092ef28a3" class="i field">KeyValuePairDelimiter</a>}{<a href="#223cd662233cbc45" class="i field">EntityPathConfigName</a>}{<a href="#71934899f86c90e3" class="i field">KeyValueSeparator</a>}{<a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#07e91b5081d2efe4" class="i property">EntityPath</a>}<span class="s">&quot;</span>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Returns an interoperable connection string that can be used to connect to ServiceBus Namespace</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">The connection string</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>public override string</b> <a id="353ea1e21e88827a" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ToString</a>()
        {
            <b>if</b> (<b>string</b>.<span class="i">IsNullOrWhiteSpace</span>(<a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#07e91b5081d2efe4" class="i property">EntityPath</a>))
            {
                <b>return</b> <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#667a4826f798998b" class="i method">GetNamespaceConnectionString</a>();
            }
 
            <b>return</b> <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#6824e13b47e855cb" class="i method">GetEntityConnectionString</a>();
        }
 
        <b>void</b> <a id="79d7949ef873dcb6" href="R/79d7949ef873dcb6.html" target="n" data-glyph="76,1" class="i method">ParseConnectionString</a>(<b>string</b> <span id="r19 rd" class="r19 r">connectionString</span>)
        {
            <span class="c">// First split based on &#39;;&#39;</span>
            <b>var</b> <span id="r20 rd" class="r20 r">keyValuePairs</span> = <span class="r19 r">connectionString</span>.<span class="i">Split</span>(<b>new</b>[] { <a href="#f42de3c092ef28a3" class="i field">KeyValuePairDelimiter</a> }, <span class="i">StringSplitOptions</span>.<span class="i">RemoveEmptyEntries</span>);
            <b>foreach</b> (<b>var</b> <span id="r21 rd" class="r21 r">keyValuePair</span> <b>in</b> <span class="r20 r">keyValuePairs</span>)
            {
                <span class="c">// Now split based on the _first_ &#39;=&#39;</span>
                <b>var</b> <span id="r22 rd" class="r22 r">keyAndValue</span> = <span class="r21 r">keyValuePair</span>.<span class="i">Split</span>(<b>new</b>[] { <a href="#71934899f86c90e3" class="i field">KeyValueSeparator</a> }, 2);
                <b>var</b> <span id="r23 rd" class="r23 r">key</span> = <span class="r22 r">keyAndValue</span>[0];
                <b>if</b> (<span class="r22 r">keyAndValue</span>.<span class="i">Length</span> != 2)
                {
                    <b>throw</b> <a href="Primitives/Fx.cs.html#c01e8844709e19c1" class="t t">Fx</a>.<a href="Primitives/Fx.cs.html#0793cb830fb5b201" class="i property">Exception</a>.<a href="Primitives/ExceptionUtility.cs.html#e75e149f89dada84" class="i method">Argument</a>(<b>nameof</b>(<span class="r19 r">connectionString</span>), <span class="s">$&quot;</span><span class="s">Value for the connection string parameter name &#39;</span>{<span class="r23 r">key</span>}<span class="s">&#39; was not found.</span><span class="s">&quot;</span>);
                }
 
                <b>var</b> <span id="r24 rd" class="r24 r">value</span> = <span class="r22 r">keyAndValue</span>[1].<span class="i">Trim</span>();
                <b>if</b> (<span class="r23 r">key</span>.<span class="i">Equals</span>(<a href="#61257756d5b99888" class="i field">EndpointConfigName</a>, <span class="i">StringComparison</span>.<span class="i">OrdinalIgnoreCase</span>))
                {
                    <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#d82416b2893a7a2a" class="i property">Endpoint</a> = <span class="r24 r">value</span>;
                }
                <b>else</b> <b>if</b> (<span class="r23 r">key</span>.<span class="i">Equals</span>(<a href="#3b269e204a7dc4ab" class="i field">SharedAccessKeyNameConfigName</a>, <span class="i">StringComparison</span>.<span class="i">OrdinalIgnoreCase</span>))
                {
                    <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#314e80ac524061ba" class="i property">SasKeyName</a> = <span class="r24 r">value</span>;
                }
                <b>else</b> <b>if</b> (<span class="r23 r">key</span>.<span class="i">Equals</span>(<a href="#223cd662233cbc45" class="i field">EntityPathConfigName</a>, <span class="i">StringComparison</span>.<span class="i">OrdinalIgnoreCase</span>))
                {
                    <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#07e91b5081d2efe4" class="i property">EntityPath</a> = <span class="r24 r">value</span>;
                }
                <b>else</b> <b>if</b> (<span class="r23 r">key</span>.<span class="i">Equals</span>(<a href="#f422bf5735f5caac" class="i field">SharedAccessKeyConfigName</a>, <span class="i">StringComparison</span>.<span class="i">OrdinalIgnoreCase</span>))
                {
                    <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#58c098126f1761f8" class="i property">SasKey</a> = <span class="r24 r">value</span>;
                }
                <b>else</b> <b>if</b> (<span class="r23 r">key</span>.<span class="i">Equals</span>(<a href="#b536e9e82baa26c2" class="i field">SharedAccessSignatureConfigName</a>, <span class="i">StringComparison</span>.<span class="i">OrdinalIgnoreCase</span>))
                {
                    <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#c164ea1845de213b" class="i property">SasToken</a> = <span class="r24 r">value</span>;
                }
                <b>else</b> <b>if</b> (<span class="r23 r">key</span>.<span class="i">Equals</span>(<a href="#7cffbbc0f9944a2e" class="i field">TransportTypeConfigName</a>, <span class="i">StringComparison</span>.<span class="i">OrdinalIgnoreCase</span>))
                {
                    <b>if</b> (<span class="i">Enum</span>.<span class="i">TryParse</span>(<span class="r24 r">value</span>, <b>true</b>, <b>out</b> <a href="TransportType.cs.html#0a715f93272561f8" class="t t">TransportType</a> <span id="r25 rd" class="r25 r">transportType</span>))
                    {
                        <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#f67160408e0badd5" class="i property">TransportType</a> = <span class="r25 r">transportType</span>;
                    }
                }
                <b>else</b> <b>if</b> (<span class="r23 r">key</span>.<span class="i">Equals</span>(<a href="#02f1ceab433148c8" class="i field">OperationTimeoutConfigName</a>, <span class="i">StringComparison</span>.<span class="i">OrdinalIgnoreCase</span>))
                {
                    <b>if</b> (<b>int</b>.<span class="i">TryParse</span>(<span class="r24 r">value</span>, <span class="i">NumberStyles</span>.<span class="i">Integer</span>, <span class="i">NumberFormatInfo</span>.<span class="i">InvariantInfo</span>, <b>out</b> <b>var</b> <span id="r26 rd" class="r26 r">timeoutInSeconds</span>))
                    {
                        <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#e4ea4f18d82ddda2" class="i property">OperationTimeout</a> = <span class="i">TimeSpan</span>.<span class="i">FromSeconds</span>(<span class="r26 r">timeoutInSeconds</span>);
                    }
                    <b>else</b> <b>if</b> (<span class="i">TimeSpan</span>.<span class="i">TryParse</span>(<span class="r24 r">value</span>, <span class="i">NumberFormatInfo</span>.<span class="i">InvariantInfo</span>, <b>out</b> <b>var</b> <span id="r27 rd" class="r27 r">operationTimeout</span>))
                    {
                        <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#e4ea4f18d82ddda2" class="i property">OperationTimeout</a> = <span class="r27 r">operationTimeout</span>;
                    }
                    <b>else</b>
                    {
                        <b>throw</b> <a href="Primitives/Fx.cs.html#c01e8844709e19c1" class="t t">Fx</a>.<a href="Primitives/Fx.cs.html#0793cb830fb5b201" class="i property">Exception</a>.<a href="Primitives/ExceptionUtility.cs.html#e75e149f89dada84" class="i method">Argument</a>(<b>nameof</b>(<span class="r19 r">connectionString</span>), <span class="s">$&quot;</span><span class="s">The </span>{<a href="#02f1ceab433148c8" class="i field">OperationTimeoutConfigName</a>}<span class="s"> (</span>{<span class="r24 r">value</span>}<span class="s">) format is invalid. It must be an integer representing a number of seconds.</span><span class="s">&quot;</span>);
                    }
 
                    <b>if</b> (<a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#e4ea4f18d82ddda2" class="i property">OperationTimeout</a>.<span class="i">TotalMilliseconds</span> &lt;= 0)
                    {
                        <b>throw</b> <a href="Primitives/Fx.cs.html#c01e8844709e19c1" class="t t">Fx</a>.<a href="Primitives/Fx.cs.html#0793cb830fb5b201" class="i property">Exception</a>.<a href="Primitives/ExceptionUtility.cs.html#e75e149f89dada84" class="i method">Argument</a>(<b>nameof</b>(<span class="r19 r">connectionString</span>), <span class="s">$&quot;</span><span class="s">The </span>{<a href="#02f1ceab433148c8" class="i field">OperationTimeoutConfigName</a>}<span class="s"> (</span>{<span class="r24 r">value</span>}<span class="s">) must be greater than zero.</span><span class="s">&quot;</span>);
                    }
 
                    <b>if</b> (<a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#e4ea4f18d82ddda2" class="i property">OperationTimeout</a>.<span class="i">TotalHours</span> &gt;= 1)
                    {
                        <b>throw</b> <a href="Primitives/Fx.cs.html#c01e8844709e19c1" class="t t">Fx</a>.<a href="Primitives/Fx.cs.html#0793cb830fb5b201" class="i property">Exception</a>.<a href="Primitives/ExceptionUtility.cs.html#e75e149f89dada84" class="i method">Argument</a>(<b>nameof</b>(<span class="r19 r">connectionString</span>), <span class="s">$&quot;</span><span class="s">The </span>{<a href="#02f1ceab433148c8" class="i field">OperationTimeoutConfigName</a>}<span class="s"> (</span>{<span class="r24 r">value</span>}<span class="s">) must be smaller than one hour.</span><span class="s">&quot;</span>);
                    }
                }
                <b>else</b> <b>if</b> (<span class="r23 r">key</span>.<span class="i">Equals</span>(<a href="#42ca9db278c5f9bb" class="i field">AuthenticationConfigName</a>, <span class="i">StringComparison</span>.<span class="i">OrdinalIgnoreCase</span>) &amp;&amp; !<b>int</b>.<span class="i">TryParse</span>(<span class="r24 r">value</span>, <b>out _</b>))
                {
                    <span class="r24 r">value</span> = <span class="r24 r">value</span>.<span class="i">Replace</span>(<span class="s">&quot; &quot;</span>, <b>string</b>.<span class="i">Empty</span>);
                    <b>if</b> (!<span class="i">Enum</span>.<span class="i">TryParse</span>(<span class="r24 r">value</span>, <b>true</b>, <b>out</b> <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#c0711c3215fce74c" class="i field">authType</a>))
                    {
                        <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#c0711c3215fce74c" class="i field">authType</a> = <a href="#3d65e888e8be7a54" class="t t">AuthenticationType</a>.<a href="#db29dc7b79c533af" class="i field">Other</a>;
                    }
                }
                <b>else</b> <b>if</b> (<span class="r23 r">key</span>.<span class="i">Equals</span>(<a href="#f5bc1dbb908a9596" class="i field">ConnectionIdleTimeoutConfigName</a>, <span class="i">StringComparison</span>.<span class="i">OrdinalIgnoreCase</span>))
                {
                    <b>if</b> (<b>int</b>.<span class="i">TryParse</span>(<span class="r24 r">value</span>, <span class="i">NumberStyles</span>.<span class="i">Integer</span>, <span class="i">NumberFormatInfo</span>.<span class="i">InvariantInfo</span>, <b>out</b> <b>var</b> <span id="r28 rd" class="r28 r">timeoutInSeconds</span>))
                    {
                        <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#f59093422550eae3" class="i property">ConnectionIdleTimeout</a> = <span class="i">TimeSpan</span>.<span class="i">FromSeconds</span>(<span class="r28 r">timeoutInSeconds</span>);
                    }
                    <b>else</b> <b>if</b> (<span class="i">TimeSpan</span>.<span class="i">TryParse</span>(<span class="r24 r">value</span>, <span class="i">NumberFormatInfo</span>.<span class="i">InvariantInfo</span>, <b>out</b> <b>var</b> <span id="r29 rd" class="r29 r">connectionIdleTimeout</span>))
                    {
                        <a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#f59093422550eae3" class="i property">ConnectionIdleTimeout</a> = <span class="r29 r">connectionIdleTimeout</span>;
                    }
                    <b>else</b>
                    {
                        <b>throw</b> <a href="Primitives/Fx.cs.html#c01e8844709e19c1" class="t t">Fx</a>.<a href="Primitives/Fx.cs.html#0793cb830fb5b201" class="i property">Exception</a>.<a href="Primitives/ExceptionUtility.cs.html#e75e149f89dada84" class="i method">Argument</a>(<b>nameof</b>(<span class="r19 r">connectionString</span>), <span class="s">$&quot;</span><span class="s">The </span>{<a href="#f5bc1dbb908a9596" class="i field">ConnectionIdleTimeoutConfigName</a>}<span class="s"> (</span>{<span class="r24 r">value</span>}<span class="s">) format is invalid. It must be an integer representing a number of seconds or a timespan.</span><span class="s">&quot;</span>);
                    }
 
                    <b>if</b> (<a href="#f5792d111dd93f0d" class="k">this</a>.<a href="#f59093422550eae3" class="i property">ConnectionIdleTimeout</a>.<span class="i">Value</span>.<span class="i">TotalMilliseconds</span> &lt;= 0)
                    {
                        <b>throw</b> <a href="Primitives/Fx.cs.html#c01e8844709e19c1" class="t t">Fx</a>.<a href="Primitives/Fx.cs.html#0793cb830fb5b201" class="i property">Exception</a>.<a href="Primitives/ExceptionUtility.cs.html#e75e149f89dada84" class="i method">Argument</a>(<b>nameof</b>(<span class="r19 r">connectionString</span>), <span class="s">$&quot;</span><span class="s">The </span>{<a href="#f5bc1dbb908a9596" class="i field">ConnectionIdleTimeoutConfigName</a>}<span class="s"> (</span>{<span class="r24 r">value</span>}<span class="s">) must be greater than zero.</span><span class="s">&quot;</span>);
                    }
                }
                <b>else</b>
                {
                    <a href="#b78490c0ada308c2" class="i field">ConnectionStringProperties</a>[<span class="r23 r">key</span>] = <span class="r24 r">value</span>;
                }
            }
        }
    }
}</pre></td></tr></table></div></body></html>

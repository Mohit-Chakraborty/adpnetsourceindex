<!DOCTYPE html>
<html><head><title>EventProcessorClient.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(1237);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Azure.Messaging.EventHubs.Processor/EventProcessorClient.cs" target="_top">EventProcessorClient.cs</a><br/></td><td><a class="blueLink" href="https://github.com/Azure/azure-sdk-for-net/tree/master/sdk/eventhub/Azure.Messaging.EventHubs.Processor/src/EventProcessorClient.cs" target="_blank">View on GitHub</a></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Azure.Messaging.EventHubs.Processor" target="_top">Azure.Messaging.EventHubs.Processor.csproj</a> (Azure.Messaging.EventHubs.Processor)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License.</span>
 
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Concurrent</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">ComponentModel</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Diagnostics</span>.<span class="i n">CodeAnalysis</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Globalization</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Runtime</span>.<span class="i n">ExceptionServices</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>.<span class="i n">Tasks</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Core</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Messaging</span>.<span class="i n">EventHubs</span>.<span class="i n">Consumer</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Messaging</span>.<span class="i n">EventHubs</span>.<span class="i n">Core</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Messaging</span>.<span class="i n">EventHubs</span>.<span class="i n">Diagnostics</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Messaging</span>.<span class="i n">EventHubs</span>.<span class="i n">Primitives</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Messaging</span>.<span class="i n">EventHubs</span>.<span class="i n">Processor</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Messaging</span>.<span class="i n">EventHubs</span>.<span class="i n">Processor</span>.<span class="i n">Diagnostics</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Storage</span>.<span class="i n">Blobs</span>;
 
<b>namespace</b> <span class="i n">Azure</span>.<span class="i n">Messaging</span>.<span class="i n">EventHubs</span>
{
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
    <span class="c">///</span><span class="c">   Allows for consuming and processing events across all partitions of a given Event Hub within the scope of a specific</span>
    <span class="c">///</span><span class="c">   consumer group.  The processor is capable of collaborating with other instances for the same Event Hub and consumer</span>
    <span class="c">///</span><span class="c">   group pairing to share work by using a common storage platform to communicate.  Fault tolerance is also built-in,</span>
    <span class="c">///</span><span class="c">   allowing the processor to be resilient in the face of errors.</span>
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
    <span class="c">///</span>
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
    <span class="c">///</span><span class="c">   The </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> is safe to cache and use for the lifetime of an application, and that is best practice when the application</span>
    <span class="c">///</span><span class="c">   processes events regularly or semi-regularly.  The processor holds responsibility for efficient resource management, working to keep resource usage low during</span>
    <span class="c">///</span><span class="c">   periods of inactivity and manage health during periods of higher use.  Calling either the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9480e7e1bf9ebb4d" class="i method">StopProcessingAsync</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> or </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#1039efdeb092eeac" class="i method">StopProcessing</a><span class="c">&quot;</span> <span class="c">/&gt;</span>
    <span class="c">///</span><span class="c">   method when processing is complete or as the application is shutting down will ensure that network resources and other unmanaged objects are properly cleaned up.</span>
    <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
    <span class="c">///</span>
    [<a href="@1@netstandard/A.html#5e00de6576fb9ce7" class="t constructor">SuppressMessage</a>(<span class="s">&quot;Usage&quot;</span>, <span class="s">&quot;CA1001:Types that own disposable fields should be disposable.&quot;</span>, <a href="@1@netstandard/A.html#ce02a652a479502a" class="i property">Justification</a> = <span class="s">&quot;Disposal is managed internally as part of the Stop operation.&quot;</span>)]
    <b>public class</b> <a id="9008d12c4d71cbcc" href="R/9008d12c4d71cbcc.html" target="n" data-glyph="0,0" class="t t">EventProcessorClient</a> : <a href="/Azure.Messaging.EventHubs/A.html#4ce59cd6fc256750" class="t t">EventProcessor</a>&lt;<a href="/Azure.Messaging.EventHubs/A.html#f166f8955ab127cc" class="t t">EventProcessorPartition</a>&gt;
    {
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">The delegate to invoke when attempting to update a checkpoint using an empty event.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private static readonly</b> <a href="@1@netstandard/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<a href="@1@netstandard/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a>, <a href="@1@netstandard/A.html#045a746eb48cbaa9" class="t t">Task</a>&gt; <a id="bf82617aa7d19575" href="R/bf82617aa7d19575.html" target="n" data-glyph="46,1" class="i field">EmptyEventUpdateCheckpoint</a> = <span id="r0 rd" class="r0 r">cancellationToken</span> =&gt; <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#265d72f49e915224" class="t constructor">InvalidOperationException</a>(<a href="Resources.Designer.cs.html#0f60eafa1a3b4f36" class="t t">Resources</a>.<a href="Resources.Designer.cs.html#74e5ccbc898fdffd" class="i property">CannotCreateCheckpointForEmptyEvent</a>);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">The set of default options for the processor.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private static readonly</b> <a href="EventProcessorClientOptions.cs.html#2864c3d44b8ecdfa" class="t t">EventProcessorClientOptions</a> <a id="df17fae7f2c8cc9b" href="R/df17fae7f2c8cc9b.html" target="n" data-glyph="46,1" class="i field">DefaultClientOptions</a> = <b>new</b> <a href="EventProcessorClientOptions.cs.html#2864c3d44b8ecdfa" class="t constructor">EventProcessorClientOptions</a>();
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">The default starting position for the processor.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private readonly</b> <a href="/Azure.Messaging.EventHubs/A.html#97742fa7b7b6b68f" class="t t">EventPosition</a> <a id="f8be204f8af38f5b" href="R/f8be204f8af38f5b.html" target="n" data-glyph="46,1" class="i field">DefaultStartingPosition</a> = <b>new</b> <a href="/Azure.Messaging.EventHubs/A.html#d8d65f58ba26fc53" class="t constructor">EventProcessorOptions</a>().<a href="/Azure.Messaging.EventHubs/A.html#eccc0976e25b4b6e" class="i property">DefaultStartingPosition</a>;
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">The set of default starting positions for partitions being processed; these are collected at initialization and are surfaced as checkpoints to override defaults on a partition-specific basis.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private readonly</b> <a href="@1@netstandard/A.html#2e5ef5704344a309" class="t t">ConcurrentDictionary</a>&lt;<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="/Azure.Messaging.EventHubs/A.html#97742fa7b7b6b68f" class="t t">EventPosition</a>&gt; <a id="e47d6704fcbf7d50" href="R/e47d6704fcbf7d50.html" target="n" data-glyph="46,1" class="i field">PartitionStartingPositionDefaults</a> = <b>new</b> <a href="@1@netstandard/A.html#abc35f3c19fa0290" class="t constructor">ConcurrentDictionary</a>&lt;<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="/Azure.Messaging.EventHubs/A.html#97742fa7b7b6b68f" class="t t">EventPosition</a>&gt;();
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">The primitive for synchronizing access during start and set handler operations.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private readonly</b> <a href="@1@netstandard/A.html#d57f52e0341a581f" class="t t">SemaphoreSlim</a> <a id="2709050b118f875c" href="R/2709050b118f875c.html" target="n" data-glyph="46,1" class="i field">ProcessorStatusGuard</a> = <b>new</b> <a href="@1@netstandard/A.html#ed5ff10a1fcba4d4" class="t constructor">SemaphoreSlim</a>(1, 1);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">The handler to be called just before event processing starts for a given partition.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private</b> <a href="@1@netstandard/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<a href="/Azure.Messaging.EventHubs/A.html#77f637a004136fc2" class="t t">PartitionInitializingEventArgs</a>, <a href="@1@netstandard/A.html#045a746eb48cbaa9" class="t t">Task</a>&gt; <a id="0f1135d4580aed32" href="R/0f1135d4580aed32.html" target="n" data-glyph="46,1" class="i field">_partitionInitializingAsync</a>;
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">The handler to be called once event processing stops for a given partition.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private</b> <a href="@1@netstandard/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<a href="/Azure.Messaging.EventHubs/A.html#00ac02b897003fee" class="t t">PartitionClosingEventArgs</a>, <a href="@1@netstandard/A.html#045a746eb48cbaa9" class="t t">Task</a>&gt; <a id="18897a0effcb217c" href="R/18897a0effcb217c.html" target="n" data-glyph="46,1" class="i field">_partitionClosingAsync</a>;
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Responsible for processing events received from the Event Hubs service.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private</b> <a href="@1@netstandard/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<a href="/Azure.Messaging.EventHubs/A.html#01166992a2a01f56" class="t t">ProcessEventArgs</a>, <a href="@1@netstandard/A.html#045a746eb48cbaa9" class="t t">Task</a>&gt; <a id="94788bd419b1c1f0" href="R/94788bd419b1c1f0.html" target="n" data-glyph="46,1" class="i field">_processEventAsync</a>;
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">Responsible for processing unhandled exceptions thrown while this processor is running.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>private</b> <a href="@1@netstandard/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<a href="/Azure.Messaging.EventHubs/A.html#7cd8970f9040d756" class="t t">ProcessErrorEventArgs</a>, <a href="@1@netstandard/A.html#045a746eb48cbaa9" class="t t">Task</a>&gt; <a id="be9960fc5d4c6e90" href="R/be9960fc5d4c6e90.html" target="n" data-glyph="46,1" class="i field">_processErrorAsync</a>;
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">    Performs the tasks to initialize a partition, and its associated context, for event processing.</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c">   </span><span class="c">&lt;</span><span class="c">para</span><span class="c">&gt;</span><span class="c">It is not recommended that the state of the processor be managed directly from within this method; requesting to start or stop the processor may result in</span>
        <span class="c">///</span><span class="c">   a deadlock scenario, especially if using the synchronous form of the call.</span><span class="c">&lt;/</span><span class="c">para</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        [<a href="@1@netstandard/A.html#5e00de6576fb9ce7" class="t constructor">SuppressMessage</a>(<span class="s">&quot;Usage&quot;</span>, <span class="s">&quot;AZC0002:Ensure all service methods take an optional CancellationToken parameter.&quot;</span>, <a href="@1@netstandard/A.html#ce02a652a479502a" class="i property">Justification</a> = <span class="s">&quot;Guidance does not apply; this is an event.&quot;</span>)]
        [<a href="@1@netstandard/A.html#5e00de6576fb9ce7" class="t constructor">SuppressMessage</a>(<span class="s">&quot;Usage&quot;</span>, <span class="s">&quot;AZC0003:DO make service methods virtual.&quot;</span>, <a href="@1@netstandard/A.html#ce02a652a479502a" class="i property">Justification</a> = <span class="s">&quot;This member follows the standard .NET event pattern; override via the associated On&lt;&lt;EVENT&gt;&gt; method.&quot;</span>)]
        [<a href="@1@netstandard/A.html#5e00de6576fb9ce7" class="t constructor">SuppressMessage</a>(<span class="s">&quot;Design&quot;</span>, <span class="s">&quot;CA1065:Do not raise exceptions in unexpected locations&quot;</span>, <a href="@1@netstandard/A.html#ce02a652a479502a" class="i property">Justification</a> = <span class="s">&quot;Guidelines do allow throwing NotSupportedException or ArgumentException here&quot;</span>)]
        <b>public event</b> <a href="@1@netstandard/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<a href="/Azure.Messaging.EventHubs/A.html#77f637a004136fc2" class="t t">PartitionInitializingEventArgs</a>, <a href="@1@netstandard/A.html#045a746eb48cbaa9" class="t t">Task</a>&gt; <a id="daeb1808841368e4" href="R/daeb1808841368e4.html" target="n" data-glyph="30,1" class="i">PartitionInitializingAsync</a>
        {
            <b>add</b>
            {
                <a href="P/0198b1312554d2ed.html#0198b1312554d2ed" class="t t">Argument</a>.<a href="SharedSource/Azure.Core/Argument.cs.html#208d023d6fa23d33" class="i method">AssertNotNull</a>(<b>value</b>, <b>nameof</b>(<a href="#daeb1808841368e4" class="i">PartitionInitializingAsync</a>));
 
                <b>if</b> (<a href="#0f1135d4580aed32" class="i field">_partitionInitializingAsync</a> != <b>default</b>)
                {
                    <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#3d3c2c03118be4f8" class="t constructor">NotSupportedException</a>(<a href="Resources.Designer.cs.html#0f60eafa1a3b4f36" class="t t">Resources</a>.<a href="Resources.Designer.cs.html#6cdf2863a0a955b3" class="i property">HandlerHasAlreadyBeenAssigned</a>);
                }
 
                <a href="#77c1ad1891ca4969" class="i method">EnsureNotRunningAndInvoke</a>(() =&gt; <a href="#0f1135d4580aed32" class="i field">_partitionInitializingAsync</a> = <b>value</b>);
            }
 
            <b>remove</b>
            {
                <a href="P/0198b1312554d2ed.html#0198b1312554d2ed" class="t t">Argument</a>.<a href="SharedSource/Azure.Core/Argument.cs.html#208d023d6fa23d33" class="i method">AssertNotNull</a>(<b>value</b>, <b>nameof</b>(<a href="#daeb1808841368e4" class="i">PartitionInitializingAsync</a>));
 
                <b>if</b> (<a href="#0f1135d4580aed32" class="i field">_partitionInitializingAsync</a> != <b>value</b>)
                {
                    <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#eb98012a74461437" class="t constructor">ArgumentException</a>(<a href="Resources.Designer.cs.html#0f60eafa1a3b4f36" class="t t">Resources</a>.<a href="Resources.Designer.cs.html#3d37ea9cbabc409d" class="i property">HandlerHasNotBeenAssigned</a>);
                }
 
                <a href="#77c1ad1891ca4969" class="i method">EnsureNotRunningAndInvoke</a>(() =&gt; <a href="#0f1135d4580aed32" class="i field">_partitionInitializingAsync</a> = <b>default</b>);
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Performs the tasks needed when processing for a partition is being stopped.  This commonly occurs when the partition is claimed by another event processor instance or when</span>
        <span class="c">///</span><span class="c">   the current event processor instance is shutting down.</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c">   </span><span class="c">&lt;</span><span class="c">para</span><span class="c">&gt;</span><span class="c">It is not recommended that the state of the processor be managed directly from within this method; requesting to start or stop the processor may result in</span>
        <span class="c">///</span><span class="c">   a deadlock scenario, especially if using the synchronous form of the call.</span><span class="c">&lt;/</span><span class="c">para</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        [<a href="@1@netstandard/A.html#5e00de6576fb9ce7" class="t constructor">SuppressMessage</a>(<span class="s">&quot;Usage&quot;</span>, <span class="s">&quot;AZC0002:Ensure all service methods take an optional CancellationToken parameter.&quot;</span>, <a href="@1@netstandard/A.html#ce02a652a479502a" class="i property">Justification</a> = <span class="s">&quot;Guidance does not apply; this is an event.&quot;</span>)]
        [<a href="@1@netstandard/A.html#5e00de6576fb9ce7" class="t constructor">SuppressMessage</a>(<span class="s">&quot;Usage&quot;</span>, <span class="s">&quot;AZC0003:DO make service methods virtual.&quot;</span>, <a href="@1@netstandard/A.html#ce02a652a479502a" class="i property">Justification</a> = <span class="s">&quot;This member follows the standard .NET event pattern; override via the associated On&lt;&lt;EVENT&gt;&gt; method.&quot;</span>)]
        [<a href="@1@netstandard/A.html#5e00de6576fb9ce7" class="t constructor">SuppressMessage</a>(<span class="s">&quot;Design&quot;</span>, <span class="s">&quot;CA1065:Do not raise exceptions in unexpected locations&quot;</span>, <a href="@1@netstandard/A.html#ce02a652a479502a" class="i property">Justification</a> = <span class="s">&quot;Guidelines do allow throwing NotSupportedException or ArgumentException here&quot;</span>)]
        <b>public event</b> <a href="@1@netstandard/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<a href="/Azure.Messaging.EventHubs/A.html#00ac02b897003fee" class="t t">PartitionClosingEventArgs</a>, <a href="@1@netstandard/A.html#045a746eb48cbaa9" class="t t">Task</a>&gt; <a id="9a7e2e96155e9f3b" href="R/9a7e2e96155e9f3b.html" target="n" data-glyph="30,1" class="i">PartitionClosingAsync</a>
        {
            <b>add</b>
            {
                <a href="P/0198b1312554d2ed.html#0198b1312554d2ed" class="t t">Argument</a>.<a href="SharedSource/Azure.Core/Argument.cs.html#208d023d6fa23d33" class="i method">AssertNotNull</a>(<b>value</b>, <b>nameof</b>(<a href="#9a7e2e96155e9f3b" class="i">PartitionClosingAsync</a>));
 
                <b>if</b> (<a href="#18897a0effcb217c" class="i field">_partitionClosingAsync</a> != <b>default</b>)
                {
                    <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#3d3c2c03118be4f8" class="t constructor">NotSupportedException</a>(<a href="Resources.Designer.cs.html#0f60eafa1a3b4f36" class="t t">Resources</a>.<a href="Resources.Designer.cs.html#6cdf2863a0a955b3" class="i property">HandlerHasAlreadyBeenAssigned</a>);
                }
 
                <a href="#77c1ad1891ca4969" class="i method">EnsureNotRunningAndInvoke</a>(() =&gt; <a href="#18897a0effcb217c" class="i field">_partitionClosingAsync</a> = <b>value</b>);
            }
 
            <b>remove</b>
            {
                <a href="P/0198b1312554d2ed.html#0198b1312554d2ed" class="t t">Argument</a>.<a href="SharedSource/Azure.Core/Argument.cs.html#208d023d6fa23d33" class="i method">AssertNotNull</a>(<b>value</b>, <b>nameof</b>(<a href="#9a7e2e96155e9f3b" class="i">PartitionClosingAsync</a>));
 
                <b>if</b> (<a href="#18897a0effcb217c" class="i field">_partitionClosingAsync</a> != <b>value</b>)
                {
                    <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#eb98012a74461437" class="t constructor">ArgumentException</a>(<a href="Resources.Designer.cs.html#0f60eafa1a3b4f36" class="t t">Resources</a>.<a href="Resources.Designer.cs.html#3d37ea9cbabc409d" class="i property">HandlerHasNotBeenAssigned</a>);
                }
 
                <a href="#77c1ad1891ca4969" class="i method">EnsureNotRunningAndInvoke</a>(() =&gt; <a href="#18897a0effcb217c" class="i field">_partitionClosingAsync</a> = <b>default</b>);
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">  Performs the tasks needed to process a batch of events for a given partition as they are read from the Event Hubs service. Implementation is mandatory.</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c">  </span><span class="c">&lt;</span><span class="c">para</span><span class="c">&gt;</span><span class="c">Should an exception occur within the code for this handler, the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> will allow it to bubble and will not surface to the error handler or attempt to handle</span>
        <span class="c">///</span><span class="c">   it in any way.  Developers are strongly encouraged to take exception scenarios into account, including the need to retry processing, and guard against them using try/catch blocks and other means,</span>
        <span class="c">///</span><span class="c">   as appropriate.</span><span class="c">&lt;/</span><span class="c">para</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c">  </span><span class="c">&lt;</span><span class="c">para</span><span class="c">&gt;</span><span class="c">It is not recommended that the state of the processor be managed directly from within this handler; requesting to start or stop the processor may result in</span>
        <span class="c">///</span><span class="c">   a deadlock scenario, especially if using the synchronous form of the call.</span><span class="c">&lt;/</span><span class="c">para</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        [<a href="@1@netstandard/A.html#5e00de6576fb9ce7" class="t constructor">SuppressMessage</a>(<span class="s">&quot;Usage&quot;</span>, <span class="s">&quot;AZC0002:Ensure all service methods take an optional CancellationToken parameter.&quot;</span>, <a href="@1@netstandard/A.html#ce02a652a479502a" class="i property">Justification</a> = <span class="s">&quot;Guidance does not apply; this is an event.&quot;</span>)]
        [<a href="@1@netstandard/A.html#5e00de6576fb9ce7" class="t constructor">SuppressMessage</a>(<span class="s">&quot;Usage&quot;</span>, <span class="s">&quot;AZC0003:DO make service methods virtual.&quot;</span>, <a href="@1@netstandard/A.html#ce02a652a479502a" class="i property">Justification</a> = <span class="s">&quot;This member follows the standard .NET event pattern; override via the associated On&lt;&lt;EVENT&gt;&gt; method.&quot;</span>)]
        [<a href="@1@netstandard/A.html#5e00de6576fb9ce7" class="t constructor">SuppressMessage</a>(<span class="s">&quot;Design&quot;</span>, <span class="s">&quot;CA1065:Do not raise exceptions in unexpected locations&quot;</span>, <a href="@1@netstandard/A.html#ce02a652a479502a" class="i property">Justification</a> = <span class="s">&quot;Guidelines do allow throwing NotSupportedException or ArgumentException here&quot;</span>)]
        <b>public event</b> <a href="@1@netstandard/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<a href="/Azure.Messaging.EventHubs/A.html#01166992a2a01f56" class="t t">ProcessEventArgs</a>, <a href="@1@netstandard/A.html#045a746eb48cbaa9" class="t t">Task</a>&gt; <a id="7db3b59bf2f031f4" href="R/7db3b59bf2f031f4.html" target="n" data-glyph="30,1" class="i">ProcessEventAsync</a>
        {
            <b>add</b>
            {
                <a href="P/0198b1312554d2ed.html#0198b1312554d2ed" class="t t">Argument</a>.<a href="SharedSource/Azure.Core/Argument.cs.html#208d023d6fa23d33" class="i method">AssertNotNull</a>(<b>value</b>, <b>nameof</b>(<a href="#7db3b59bf2f031f4" class="i">ProcessEventAsync</a>));
 
                <b>if</b> (<a href="#94788bd419b1c1f0" class="i field">_processEventAsync</a> != <b>default</b>)
                {
                    <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#3d3c2c03118be4f8" class="t constructor">NotSupportedException</a>(<a href="Resources.Designer.cs.html#0f60eafa1a3b4f36" class="t t">Resources</a>.<a href="Resources.Designer.cs.html#6cdf2863a0a955b3" class="i property">HandlerHasAlreadyBeenAssigned</a>);
                }
 
                <a href="#77c1ad1891ca4969" class="i method">EnsureNotRunningAndInvoke</a>(() =&gt; <a href="#94788bd419b1c1f0" class="i field">_processEventAsync</a> = <b>value</b>);
            }
 
            <b>remove</b>
            {
                <a href="P/0198b1312554d2ed.html#0198b1312554d2ed" class="t t">Argument</a>.<a href="SharedSource/Azure.Core/Argument.cs.html#208d023d6fa23d33" class="i method">AssertNotNull</a>(<b>value</b>, <b>nameof</b>(<a href="#7db3b59bf2f031f4" class="i">ProcessEventAsync</a>));
 
                <b>if</b> (<a href="#94788bd419b1c1f0" class="i field">_processEventAsync</a> != <b>value</b>)
                {
                    <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#eb98012a74461437" class="t constructor">ArgumentException</a>(<a href="Resources.Designer.cs.html#0f60eafa1a3b4f36" class="t t">Resources</a>.<a href="Resources.Designer.cs.html#3d37ea9cbabc409d" class="i property">HandlerHasNotBeenAssigned</a>);
                }
 
                <a href="#77c1ad1891ca4969" class="i method">EnsureNotRunningAndInvoke</a>(() =&gt; <a href="#94788bd419b1c1f0" class="i field">_processEventAsync</a> = <b>default</b>);
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Performs the tasks needed when an unexpected exception occurs within the operation of the event processor infrastructure.  Implementation is mandatory.</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c">   </span><span class="c">&lt;</span><span class="c">para</span><span class="c">&gt;</span><span class="c">This error handler is invoked when there is an exception observed within the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> itself; it is not invoked for exceptions in</span>
        <span class="c">///</span><span class="c">   code that has been implemented to process events or other event handlers and extension points that execute developer code.  The </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> will</span>
        <span class="c">///</span><span class="c">   make every effort to recover from exceptions and continue processing.  Should an exception that cannot be recovered from be encountered, the processor will attempt to forfeit</span>
        <span class="c">///</span><span class="c">   ownership of all partitions that it was processing so that work may be redistributed.</span><span class="c">&lt;/</span><span class="c">para</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c">   </span><span class="c">&lt;</span><span class="c">para</span><span class="c">&gt;</span><span class="c">The exceptions surfaced to this method may be fatal or non-fatal; because the processor may not be able to accurately predict whether an</span>
        <span class="c">///</span><span class="c">   exception was fatal or whether its state was corrupted, this method has responsibility for making the determination as to whether processing</span>
        <span class="c">///</span><span class="c">   should be terminated or restarted.  The method may do so by calling Stop on the processor instance and then, if desired, calling Start on the processor.</span><span class="c">&lt;/</span><span class="c">para</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c">   </span><span class="c">&lt;</span><span class="c">para</span><span class="c">&gt;</span><span class="c">It is recommended that, for production scenarios, the decision be made by considering observations made by this error handler, the method invoked</span>
        <span class="c">///</span><span class="c">   when initializing processing for a partition, and the method invoked when processing for a partition is stopped.  Many developers will also include</span>
        <span class="c">///</span><span class="c">   data from their monitoring platforms in this decision as well.</span><span class="c">&lt;/</span><span class="c">para</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c">   </span><span class="c">&lt;</span><span class="c">para</span><span class="c">&gt;</span><span class="c">As with event processing, should an exception occur in the code for the error handler, the event processor will allow it to bubble and will not attempt to handle</span>
        <span class="c">///</span><span class="c">   it in any way.  Developers are strongly encouraged to take exception scenarios into account and guard against them using try/catch blocks and other means as appropriate.</span><span class="c">&lt;/</span><span class="c">para</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        [<a href="@1@netstandard/A.html#5e00de6576fb9ce7" class="t constructor">SuppressMessage</a>(<span class="s">&quot;Usage&quot;</span>, <span class="s">&quot;AZC0002:Ensure all service methods take an optional CancellationToken parameter.&quot;</span>, <a href="@1@netstandard/A.html#ce02a652a479502a" class="i property">Justification</a> = <span class="s">&quot;Guidance does not apply; this is an event.&quot;</span>)]
        [<a href="@1@netstandard/A.html#5e00de6576fb9ce7" class="t constructor">SuppressMessage</a>(<span class="s">&quot;Usage&quot;</span>, <span class="s">&quot;AZC0003:DO make service methods virtual.&quot;</span>, <a href="@1@netstandard/A.html#ce02a652a479502a" class="i property">Justification</a> = <span class="s">&quot;This member follows the standard .NET event pattern; override via the associated On&lt;&lt;EVENT&gt;&gt; method.&quot;</span>)]
        [<a href="@1@netstandard/A.html#5e00de6576fb9ce7" class="t constructor">SuppressMessage</a>(<span class="s">&quot;Design&quot;</span>, <span class="s">&quot;CA1065:Do not raise exceptions in unexpected locations&quot;</span>, <a href="@1@netstandard/A.html#ce02a652a479502a" class="i property">Justification</a> = <span class="s">&quot;Guidelines do allow throwing NotSupportedException or ArgumentException here&quot;</span>)]
        <b>public event</b> <a href="@1@netstandard/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<a href="/Azure.Messaging.EventHubs/A.html#7cd8970f9040d756" class="t t">ProcessErrorEventArgs</a>, <a href="@1@netstandard/A.html#045a746eb48cbaa9" class="t t">Task</a>&gt; <a id="2845ab90988c8330" href="R/2845ab90988c8330.html" target="n" data-glyph="30,1" class="i">ProcessErrorAsync</a>
        {
            <b>add</b>
            {
                <a href="P/0198b1312554d2ed.html#0198b1312554d2ed" class="t t">Argument</a>.<a href="SharedSource/Azure.Core/Argument.cs.html#208d023d6fa23d33" class="i method">AssertNotNull</a>(<b>value</b>, <b>nameof</b>(<a href="#2845ab90988c8330" class="i">ProcessErrorAsync</a>));
 
                <b>if</b> (<a href="#be9960fc5d4c6e90" class="i field">_processErrorAsync</a> != <b>default</b>)
                {
                    <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#3d3c2c03118be4f8" class="t constructor">NotSupportedException</a>(<a href="Resources.Designer.cs.html#0f60eafa1a3b4f36" class="t t">Resources</a>.<a href="Resources.Designer.cs.html#6cdf2863a0a955b3" class="i property">HandlerHasAlreadyBeenAssigned</a>);
                }
 
                <a href="#77c1ad1891ca4969" class="i method">EnsureNotRunningAndInvoke</a>(() =&gt; <a href="#be9960fc5d4c6e90" class="i field">_processErrorAsync</a> = <b>value</b>);
            }
 
            <b>remove</b>
            {
                <a href="P/0198b1312554d2ed.html#0198b1312554d2ed" class="t t">Argument</a>.<a href="SharedSource/Azure.Core/Argument.cs.html#208d023d6fa23d33" class="i method">AssertNotNull</a>(<b>value</b>, <b>nameof</b>(<a href="#2845ab90988c8330" class="i">ProcessErrorAsync</a>));
 
                <b>if</b> (<a href="#be9960fc5d4c6e90" class="i field">_processErrorAsync</a> != <b>value</b>)
                {
                    <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#eb98012a74461437" class="t constructor">ArgumentException</a>(<a href="Resources.Designer.cs.html#0f60eafa1a3b4f36" class="t t">Resources</a>.<a href="Resources.Designer.cs.html#3d37ea9cbabc409d" class="i property">HandlerHasNotBeenAssigned</a>);
                }
 
                <a href="#77c1ad1891ca4969" class="i method">EnsureNotRunningAndInvoke</a>(() =&gt; <a href="#be9960fc5d4c6e90" class="i field">_processErrorAsync</a> = <b>default</b>);
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   The fully qualified Event Hubs namespace that the processor is associated with.  This is likely</span>
        <span class="c">///</span><span class="c">   to be similar to </span><span class="c">&lt;</span><span class="c">c</span><span class="c">&gt;</span><span class="c">{yournamespace}.servicebus.windows.net</span><span class="c">&lt;/</span><span class="c">c</span><span class="c">&gt;</span><span class="c">.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>public</b> <b>new</b> <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <a id="6305812bd357fbc9" href="R/6305812bd357fbc9.html" target="n" data-glyph="102,1" class="i property">FullyQualifiedNamespace</a>
        {
            <b>get</b> =&gt; <a href="/Azure.Messaging.EventHubs/A.html#4ce59cd6fc256750" class="k">base</a>.<a href="/Azure.Messaging.EventHubs/A.html#1f79ba5702fc2b68" class="i property">FullyQualifiedNamespace</a>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   The name of the Event Hub that the processor is connected to, specific to the</span>
        <span class="c">///</span><span class="c">   Event Hubs namespace that contains it.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>public</b> <b>new</b> <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <a id="bdd8181744fe773a" href="R/bdd8181744fe773a.html" target="n" data-glyph="102,1" class="i property">EventHubName</a>
        {
            <b>get</b> =&gt; <a href="/Azure.Messaging.EventHubs/A.html#4ce59cd6fc256750" class="k">base</a>.<a href="/Azure.Messaging.EventHubs/A.html#d735e7f1d60deaa6" class="i property">EventHubName</a>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   The name of the consumer group this event processor is associated with.  Events will be</span>
        <span class="c">///</span><span class="c">   read only in the context of this group.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>public</b> <b>new</b> <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <a id="44444c3e706418bb" href="R/44444c3e706418bb.html" target="n" data-glyph="102,1" class="i property">ConsumerGroup</a>
        {
            <b>get</b> =&gt; <a href="/Azure.Messaging.EventHubs/A.html#4ce59cd6fc256750" class="k">base</a>.<a href="/Azure.Messaging.EventHubs/A.html#6d7640e769276c4c" class="i property">ConsumerGroup</a>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Indicates whether or not this event processor is currently running.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>public</b> <b>new</b> <b>bool</b> <a id="3524deb3dde4b0a2" href="R/3524deb3dde4b0a2.html" target="n" data-glyph="102,1" class="i property">IsRunning</a>
        {
            <b>get</b> =&gt; <a href="/Azure.Messaging.EventHubs/A.html#4ce59cd6fc256750" class="k">base</a>.<a href="/Azure.Messaging.EventHubs/A.html#296f5f1b1d942f3b" class="i property">IsRunning</a>;
            <b>protected set</b> =&gt; <a href="/Azure.Messaging.EventHubs/A.html#4ce59cd6fc256750" class="k">base</a>.<a href="/Azure.Messaging.EventHubs/A.html#296f5f1b1d942f3b" class="i property">IsRunning</a> = <b>value</b>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   A unique name used to identify this event processor.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>public</b> <b>new</b> <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <a id="42b5a2cf1af5aed5" href="R/42b5a2cf1af5aed5.html" target="n" data-glyph="102,1" class="i property">Identifier</a> =&gt; <a href="/Azure.Messaging.EventHubs/A.html#4ce59cd6fc256750" class="k">base</a>.<a href="/Azure.Messaging.EventHubs/A.html#f7fa4022e2eeea36" class="i property">Identifier</a>;
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   The instance of </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="Diagnostics/EventProcessorClientEventSource.cs.html#7adc5203b42f2c70" class="t t">EventProcessorClientEventSource</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> which can be mocked for testing.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>internal</b> <a href="Diagnostics/EventProcessorClientEventSource.cs.html#7adc5203b42f2c70" class="t t">EventProcessorClientEventSource</a> <a id="a009f2490f7908e9" href="R/a009f2490f7908e9.html" target="n" data-glyph="104,1" class="i property">Logger</a> { <b>get</b>; <b>set</b>; } = <a href="Diagnostics/EventProcessorClientEventSource.cs.html#7adc5203b42f2c70" class="t t">EventProcessorClientEventSource</a>.<a href="Diagnostics/EventProcessorClientEventSource.cs.html#acde3d993eb99902" class="i property">Log</a>;
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Responsible for creation of checkpoints and for ownership claim.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>private</b> <a href="SharedSource/Processor/StorageManager.cs.html#4c3279872ba9c8f6" class="t t">StorageManager</a> <a id="a28da33a68dd9652" href="R/a28da33a68dd9652.html" target="n" data-glyph="106,1" class="i property">StorageManager</a> { <b>get</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Initializes a new instance of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> class.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r1 r">checkpointStore</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The client responsible for persisting checkpoints and processor state to durable storage. The associated container is expected to exist.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r2 r">consumerGroup</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The name of the consumer group this processor is associated with.  Events are read in the context of this group.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r3 r">connectionString</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The connection string to use for connecting to the Event Hubs namespace; it is expected that the Event Hub name and the shared key properties are contained in this connection string.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   </span><span class="c">&lt;</span><span class="c">para</span><span class="c">&gt;</span><span class="c">The container associated with the </span><span class="c">&lt;</span><span class="c">paramref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r1 r">checkpointStore</span><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> is expected to exist; the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span>
        <span class="c">///</span><span class="c">   does not assume the ability to manage the storage account and is safe to run with only read/write permission for blobs in the container.</span><span class="c">&lt;/</span><span class="c">para</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c">   </span><span class="c">&lt;</span><span class="c">para</span><span class="c">&gt;</span><span class="c">If the connection string is copied from the Event Hubs namespace, it will likely not contain the name of the desired Event Hub,</span>
        <span class="c">///</span><span class="c">   which is needed.  In this case, the name can be added manually by adding &quot;;EntityPath=[[ EVENT HUB NAME ]]&quot; to the end of the</span>
        <span class="c">///</span><span class="c">   connection string.  For example, &quot;;EntityPath=telemetry-hub&quot;.</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c">   If you have defined a shared access policy directly on the Event Hub itself, then copying the connection string from that</span>
        <span class="c">///</span><span class="c">   Event Hub will result in a connection string that contains the name.</span><span class="c">&lt;/</span><span class="c">para</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">seealso</span> <span class="c">href</span><span class="c">=</span><span class="c">&quot;</span><span class="c">https://docs.microsoft.com/azure/event-hubs/event-hubs-get-connection-string</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">How to get an Event Hubs connection string</span><span class="c">&lt;/</span><span class="c">seealso</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>public</b> <a id="d7b15c1ca99e05c6" href="R/d7b15c1ca99e05c6.html" target="n" data-glyph="72,1" class="t constructor">EventProcessorClient</a>(<a href="/Azure.Storage.Blobs/A.html#6bb2c165ee95c7d4" class="t t">BlobContainerClient</a> <span id="r1 rd" class="r1 r">checkpointStore</span>,
                                    <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r2 rd" class="r2 r">consumerGroup</span>,
                                    <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r3 rd" class="r3 r">connectionString</span>) : <a href="#d14c3d0804e8382b" class="k">this</a>(<span class="r1 r">checkpointStore</span>, <span class="r2 r">consumerGroup</span>, <span class="r3 r">connectionString</span>, <b>null</b>, <b>null</b>)
        {
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Initializes a new instance of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> class.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r4 r">checkpointStore</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The client responsible for persisting checkpoints and processor state to durable storage. The associated container is expected to exist.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r5 r">consumerGroup</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The name of the consumer group this processor is associated with.  Events are read in the context of this group.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r6 r">connectionString</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The connection string to use for connecting to the Event Hubs namespace; it is expected that the Event Hub name and the shared key properties are contained in this connection string.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r7 r">clientOptions</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The set of options to use for this processor.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   </span><span class="c">&lt;</span><span class="c">para</span><span class="c">&gt;</span><span class="c">The container associated with the </span><span class="c">&lt;</span><span class="c">paramref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r4 r">checkpointStore</span><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> is expected to exist; the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span>
        <span class="c">///</span><span class="c">   does not assume the ability to manage the storage account and is safe to run with only read/write permission for blobs in the container.</span><span class="c">&lt;/</span><span class="c">para</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c">   </span><span class="c">&lt;</span><span class="c">para</span><span class="c">&gt;</span><span class="c">If the connection string is copied from the Event Hubs namespace, it will likely not contain the name of the desired Event Hub,</span>
        <span class="c">///</span><span class="c">   which is needed.  In this case, the name can be added manually by adding &quot;;EntityPath=[[ EVENT HUB NAME ]]&quot; to the end of the</span>
        <span class="c">///</span><span class="c">   connection string.  For example, &quot;;EntityPath=telemetry-hub&quot;.</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c">   If you have defined a shared access policy directly on the Event Hub itself, then copying the connection string from that</span>
        <span class="c">///</span><span class="c">   Event Hub will result in a connection string that contains the name.</span><span class="c">&lt;/</span><span class="c">para</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">seealso</span> <span class="c">href</span><span class="c">=</span><span class="c">&quot;</span><span class="c">https://docs.microsoft.com/azure/event-hubs/event-hubs-get-connection-string</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">How to get an Event Hubs connection string</span><span class="c">&lt;/</span><span class="c">seealso</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>public</b> <a id="e510f108c849fa29" href="R/e510f108c849fa29.html" target="n" data-glyph="72,1" class="t constructor">EventProcessorClient</a>(<a href="/Azure.Storage.Blobs/A.html#6bb2c165ee95c7d4" class="t t">BlobContainerClient</a> <span id="r4 rd" class="r4 r">checkpointStore</span>,
                                    <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r5 rd" class="r5 r">consumerGroup</span>,
                                    <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r6 rd" class="r6 r">connectionString</span>,
                                    <a href="EventProcessorClientOptions.cs.html#2864c3d44b8ecdfa" class="t t">EventProcessorClientOptions</a> <span id="r7 rd" class="r7 r">clientOptions</span>) : <a href="#d14c3d0804e8382b" class="k">this</a>(<span class="r4 r">checkpointStore</span>, <span class="r5 r">consumerGroup</span>, <span class="r6 r">connectionString</span>, <b>null</b>, <span class="r7 r">clientOptions</span>)
        {
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Initializes a new instance of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> class.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r8 r">checkpointStore</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The client responsible for persisting checkpoints and processor state to durable storage. The associated container is expected to exist.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r9 r">consumerGroup</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The name of the consumer group this processor is associated with.  Events are read in the context of this group.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r10 r">connectionString</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The connection string to use for connecting to the Event Hubs namespace; it is expected that the shared key properties are contained in this connection string, but not the Event Hub name.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r11 r">eventHubName</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The name of the specific Event Hub to associate the processor with.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   </span><span class="c">&lt;</span><span class="c">para</span><span class="c">&gt;</span><span class="c">The container associated with the </span><span class="c">&lt;</span><span class="c">paramref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r8 r">checkpointStore</span><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> is expected to exist; the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span>
        <span class="c">///</span><span class="c">   does not assume the ability to manage the storage account and is safe to run with only read/write permission for blobs in the container.</span><span class="c">&lt;/</span><span class="c">para</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c">   </span><span class="c">&lt;</span><span class="c">para</span><span class="c">&gt;</span><span class="c">If the connection string is copied from the Event Hub itself, it will contain the name of the desired Event Hub,</span>
        <span class="c">///</span><span class="c">   and can be used directly without passing the </span><span class="c">&lt;</span><span class="c">paramref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r11 r">eventHubName</span><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c">.  The name of the Event Hub should be</span>
        <span class="c">///</span><span class="c">   passed only once, either as part of the connection string or separately.</span><span class="c">&lt;/</span><span class="c">para</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">seealso</span> <span class="c">href</span><span class="c">=</span><span class="c">&quot;</span><span class="c">https://docs.microsoft.com/azure/event-hubs/event-hubs-get-connection-string</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">How to get an Event Hubs connection string</span><span class="c">&lt;/</span><span class="c">seealso</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>public</b> <a id="3d678cb078574793" href="R/3d678cb078574793.html" target="n" data-glyph="72,1" class="t constructor">EventProcessorClient</a>(<a href="/Azure.Storage.Blobs/A.html#6bb2c165ee95c7d4" class="t t">BlobContainerClient</a> <span id="r8 rd" class="r8 r">checkpointStore</span>,
                                    <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r9 rd" class="r9 r">consumerGroup</span>,
                                    <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r10 rd" class="r10 r">connectionString</span>,
                                    <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r11 rd" class="r11 r">eventHubName</span>) : <a href="#d14c3d0804e8382b" class="k">this</a>(<span class="r8 r">checkpointStore</span>, <span class="r9 r">consumerGroup</span>, <span class="r10 r">connectionString</span>, <span class="r11 r">eventHubName</span>, <b>null</b>)
        {
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Initializes a new instance of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> class.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r12 r">checkpointStore</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The client responsible for persisting checkpoints and processor state to durable storage. The associated container is expected to exist.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r13 r">consumerGroup</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The name of the consumer group this processor is associated with.  Events are read in the context of this group.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r14 r">connectionString</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The connection string to use for connecting to the Event Hubs namespace; it is expected that the shared key properties are contained in this connection string, but not the Event Hub name.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r15 r">eventHubName</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The name of the specific Event Hub to associate the processor with.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r16 r">clientOptions</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The set of options to use for this processor.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   </span><span class="c">&lt;</span><span class="c">para</span><span class="c">&gt;</span><span class="c">The container associated with the </span><span class="c">&lt;</span><span class="c">paramref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r12 r">checkpointStore</span><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> is expected to exist; the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span>
        <span class="c">///</span><span class="c">   does not assume the ability to manage the storage account and is safe to run with only read/write permission for blobs in the container.</span><span class="c">&lt;/</span><span class="c">para</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c">   </span><span class="c">&lt;</span><span class="c">para</span><span class="c">&gt;</span><span class="c">If the connection string is copied from the Event Hub itself, it will contain the name of the desired Event Hub,</span>
        <span class="c">///</span><span class="c">   and can be used directly without passing the </span><span class="c">&lt;</span><span class="c">paramref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r15 r">eventHubName</span><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c">.  The name of the Event Hub should be</span>
        <span class="c">///</span><span class="c">   passed only once, either as part of the connection string or separately.</span><span class="c">&lt;/</span><span class="c">para</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">seealso</span> <span class="c">href</span><span class="c">=</span><span class="c">&quot;</span><span class="c">https://docs.microsoft.com/azure/event-hubs/event-hubs-get-connection-string</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">How to get an Event Hubs connection string</span><span class="c">&lt;/</span><span class="c">seealso</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>public</b> <a id="d14c3d0804e8382b" href="R/d14c3d0804e8382b.html" target="n" data-glyph="72,1" class="t constructor">EventProcessorClient</a>(<a href="/Azure.Storage.Blobs/A.html#6bb2c165ee95c7d4" class="t t">BlobContainerClient</a> <span id="r12 rd" class="r12 r">checkpointStore</span>,
                                    <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r13 rd" class="r13 r">consumerGroup</span>,
                                    <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r14 rd" class="r14 r">connectionString</span>,
                                    <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r15 rd" class="r15 r">eventHubName</span>,
                                    <a href="EventProcessorClientOptions.cs.html#2864c3d44b8ecdfa" class="t t">EventProcessorClientOptions</a> <span id="r16 rd" class="r16 r">clientOptions</span>) : <a href="/Azure.Messaging.EventHubs/A.html#e01ad4b667f2e708" class="k">base</a>((<span class="r16 r">clientOptions</span> ?? <a href="#df17fae7f2c8cc9b" class="i field">DefaultClientOptions</a>).<a href="EventProcessorClientOptions.cs.html#15f88402852559be" class="i property">CacheEventCount</a>, <span class="r13 r">consumerGroup</span>, <span class="r14 r">connectionString</span>, <span class="r15 r">eventHubName</span>, <a href="#ae5609ba393be3dd" class="i method">CreateOptions</a>(<span class="r16 r">clientOptions</span>))
        {
            <a href="P/0198b1312554d2ed.html#0198b1312554d2ed" class="t t">Argument</a>.<a href="SharedSource/Azure.Core/Argument.cs.html#208d023d6fa23d33" class="i method">AssertNotNull</a>(<span class="r12 r">checkpointStore</span>, <b>nameof</b>(<span class="r12 r">checkpointStore</span>));
            <a href="#a28da33a68dd9652" class="i property">StorageManager</a> = <a href="#ded260536a02ffa6" class="i method">CreateStorageManager</a>(<span class="r12 r">checkpointStore</span>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Initializes a new instance of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> class.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r17 r">checkpointStore</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The client responsible for persisting checkpoints and processor state to durable storage. The associated container is expected to exist.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r18 r">consumerGroup</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The name of the consumer group this processor is associated with.  Events are read in the context of this group.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r19 r">fullyQualifiedNamespace</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The fully qualified Event Hubs namespace to connect to.  This is likely to be similar to </span><span class="c">&lt;</span><span class="c">c</span><span class="c">&gt;</span><span class="c">{yournamespace}.servicebus.windows.net</span><span class="c">&lt;/</span><span class="c">c</span><span class="c">&gt;</span><span class="c">.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r20 r">eventHubName</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The name of the specific Event Hub to associate the processor with.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r21 r">credential</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The Event Hubs shared access key credential to use for authorization.  Access controls may be specified by the Event Hubs namespace or the requested Event Hub, depending on Azure configuration.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r22 r">clientOptions</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The set of options to use for this processor.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   The container associated with the </span><span class="c">&lt;</span><span class="c">paramref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r17 r">checkpointStore</span><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> is expected to exist; the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span>
        <span class="c">///</span><span class="c">   does not assume the ability to manage the storage account and is safe to run with only read/write permission for blobs in the container.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>internal</b> <a id="8e57638c5e57ab36" href="R/../../0000000000.html" target="n" data-glyph="74,1" class="t constructor">EventProcessorClient</a>(<a href="/Azure.Storage.Blobs/A.html#6bb2c165ee95c7d4" class="t t">BlobContainerClient</a> <span id="r17 rd" class="r17 r">checkpointStore</span>,
                                      <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r18 rd" class="r18 r">consumerGroup</span>,
                                      <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r19 rd" class="r19 r">fullyQualifiedNamespace</span>,
                                      <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r20 rd" class="r20 r">eventHubName</span>,
                                      <a href="EventHubsSharedAccessKeyCredential.cs.html#fedd60277cbbbc1c" class="t t">EventHubsSharedAccessKeyCredential</a> <span id="r21 rd" class="r21 r">credential</span>,
                                      <a href="EventProcessorClientOptions.cs.html#2864c3d44b8ecdfa" class="t t">EventProcessorClientOptions</a> <span id="r22 rd" class="r22 r">clientOptions</span> = <b>default</b>) : <a href="/Azure.Messaging.EventHubs/A.html#54cc4fbd6cebec5c" class="k">base</a>((<span class="r22 r">clientOptions</span> ?? <a href="#df17fae7f2c8cc9b" class="i field">DefaultClientOptions</a>).<a href="EventProcessorClientOptions.cs.html#15f88402852559be" class="i property">CacheEventCount</a>, <span class="r18 r">consumerGroup</span>, <span class="r19 r">fullyQualifiedNamespace</span>, <span class="r20 r">eventHubName</span>, (<a href="/Azure.Core/A.html#d93a9ffee404e938" class="t t">TokenCredential</a>)(<b>object</b>)<span class="r21 r">credential</span>, <a href="#ae5609ba393be3dd" class="i method">CreateOptions</a>(<span class="r22 r">clientOptions</span>))
        {
            <span class="c">// TODO: Update the credential type and base class constructor invocation.</span>
            <a href="P/0198b1312554d2ed.html#0198b1312554d2ed" class="t t">Argument</a>.<a href="SharedSource/Azure.Core/Argument.cs.html#208d023d6fa23d33" class="i method">AssertNotNull</a>(<span class="r17 r">checkpointStore</span>, <b>nameof</b>(<span class="r17 r">checkpointStore</span>));
            <a href="#a28da33a68dd9652" class="i property">StorageManager</a> = <a href="#ded260536a02ffa6" class="i method">CreateStorageManager</a>(<span class="r17 r">checkpointStore</span>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Initializes a new instance of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> class.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r23 r">checkpointStore</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The client responsible for persisting checkpoints and processor state to durable storage. The associated container is expected to exist.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r24 r">consumerGroup</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The name of the consumer group this processor is associated with.  Events are read in the context of this group.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r25 r">fullyQualifiedNamespace</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The fully qualified Event Hubs namespace to connect to.  This is likely to be similar to </span><span class="c">&lt;</span><span class="c">c</span><span class="c">&gt;</span><span class="c">{yournamespace}.servicebus.windows.net</span><span class="c">&lt;/</span><span class="c">c</span><span class="c">&gt;</span><span class="c">.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r26 r">eventHubName</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The name of the specific Event Hub to associate the processor with.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r27 r">credential</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The Azure identity credential to use for authorization.  Access controls may be specified by the Event Hubs namespace or the requested Event Hub, depending on Azure configuration.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r28 r">clientOptions</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The set of options to use for this processor.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   The container associated with the </span><span class="c">&lt;</span><span class="c">paramref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r23 r">checkpointStore</span><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> is expected to exist; the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span>
        <span class="c">///</span><span class="c">   does not assume the ability to manage the storage account and is safe to run with only read/write permission for blobs in the container.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>public</b> <a id="25655317bdcb1493" href="R/25655317bdcb1493.html" target="n" data-glyph="72,1" class="t constructor">EventProcessorClient</a>(<a href="/Azure.Storage.Blobs/A.html#6bb2c165ee95c7d4" class="t t">BlobContainerClient</a> <span id="r23 rd" class="r23 r">checkpointStore</span>,
                                    <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r24 rd" class="r24 r">consumerGroup</span>,
                                    <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r25 rd" class="r25 r">fullyQualifiedNamespace</span>,
                                    <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r26 rd" class="r26 r">eventHubName</span>,
                                    <a href="/Azure.Core/A.html#d93a9ffee404e938" class="t t">TokenCredential</a> <span id="r27 rd" class="r27 r">credential</span>,
                                    <a href="EventProcessorClientOptions.cs.html#2864c3d44b8ecdfa" class="t t">EventProcessorClientOptions</a> <span id="r28 rd" class="r28 r">clientOptions</span> = <b>default</b>) : <a href="/Azure.Messaging.EventHubs/A.html#54cc4fbd6cebec5c" class="k">base</a>((<span class="r28 r">clientOptions</span> ?? <a href="#df17fae7f2c8cc9b" class="i field">DefaultClientOptions</a>).<a href="EventProcessorClientOptions.cs.html#15f88402852559be" class="i property">CacheEventCount</a>, <span class="r24 r">consumerGroup</span>, <span class="r25 r">fullyQualifiedNamespace</span>, <span class="r26 r">eventHubName</span>, <span class="r27 r">credential</span>, <a href="#ae5609ba393be3dd" class="i method">CreateOptions</a>(<span class="r28 r">clientOptions</span>))
        {
            <a href="P/0198b1312554d2ed.html#0198b1312554d2ed" class="t t">Argument</a>.<a href="SharedSource/Azure.Core/Argument.cs.html#208d023d6fa23d33" class="i method">AssertNotNull</a>(<span class="r23 r">checkpointStore</span>, <b>nameof</b>(<span class="r23 r">checkpointStore</span>));
            <a href="#a28da33a68dd9652" class="i property">StorageManager</a> = <a href="#ded260536a02ffa6" class="i method">CreateStorageManager</a>(<span class="r23 r">checkpointStore</span>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Initializes a new instance of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> class.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r29 r">storageManager</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Responsible for creation of checkpoints and for ownership claim.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r30 r">consumerGroup</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The name of the consumer group this processor is associated with.  Events are read in the context of this group.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r31 r">fullyQualifiedNamespace</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The fully qualified Event Hubs namespace to connect to.  This is likely to be similar to </span><span class="c">&lt;</span><span class="c">c</span><span class="c">&gt;</span><span class="c">{yournamespace}.servicebus.windows.net</span><span class="c">&lt;/</span><span class="c">c</span><span class="c">&gt;</span><span class="c">.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r32 r">eventHubName</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The name of the specific Event Hub to associate the processor with.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r33 r">cacheEventCount</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The maximum number of events that will be read from the Event Hubs service and held in a local memory cache when reading is active and events are being emitted to an enumerator for processing.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r34 r">credential</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">A shared access key credential to satisfy base class requirements; this credential may not be </span><span class="c">&lt;</span><span class="c">c</span><span class="c">&gt;</span><span class="c">null</span><span class="c">&lt;/</span><span class="c">c</span><span class="c">&gt;</span><span class="c"> but will only be used in the case that </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9ce0d46832a50877" class="i method">CreateConnection</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> has not been overridden.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r35 r">clientOptions</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The set of options to use for this processor.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   This constructor is intended only to support functional testing and mocking; it should not be used for production scenarios.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>internal</b> <a id="b888f530c6422a46" href="R/../../0000000000.html" target="n" data-glyph="74,1" class="t constructor">EventProcessorClient</a>(<a href="SharedSource/Processor/StorageManager.cs.html#4c3279872ba9c8f6" class="t t">StorageManager</a> <span id="r29 rd" class="r29 r">storageManager</span>,
                                      <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r30 rd" class="r30 r">consumerGroup</span>,
                                      <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r31 rd" class="r31 r">fullyQualifiedNamespace</span>,
                                      <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r32 rd" class="r32 r">eventHubName</span>,
                                      <b>int</b> <span id="r33 rd" class="r33 r">cacheEventCount</span>,
                                      <a href="EventHubsSharedAccessKeyCredential.cs.html#fedd60277cbbbc1c" class="t t">EventHubsSharedAccessKeyCredential</a> <span id="r34 rd" class="r34 r">credential</span>,
                                      <a href="/Azure.Messaging.EventHubs/A.html#ff5042f1902a1c50" class="t t">EventProcessorOptions</a> <span id="r35 rd" class="r35 r">clientOptions</span>) : <a href="/Azure.Messaging.EventHubs/A.html#54cc4fbd6cebec5c" class="k">base</a>(<span class="r33 r">cacheEventCount</span>, <span class="r30 r">consumerGroup</span>, <span class="r31 r">fullyQualifiedNamespace</span>, <span class="r32 r">eventHubName</span>, (<a href="/Azure.Core/A.html#d93a9ffee404e938" class="t t">TokenCredential</a>)(<b>object</b>)<span class="r34 r">credential</span>, <span class="r35 r">clientOptions</span>)
        {
            <span class="c">// TODO: Update the credential type and base class constructor invocation.</span>
            <a href="P/0198b1312554d2ed.html#0198b1312554d2ed" class="t t">Argument</a>.<a href="SharedSource/Azure.Core/Argument.cs.html#208d023d6fa23d33" class="i method">AssertNotNull</a>(<span class="r29 r">storageManager</span>, <b>nameof</b>(<span class="r29 r">storageManager</span>));
 
            <a href="#f8be204f8af38f5b" class="i field">DefaultStartingPosition</a> = (<span class="r35 r">clientOptions</span>?.<a href="/Azure.Messaging.EventHubs/A.html#eccc0976e25b4b6e" class="i property">DefaultStartingPosition</a> ?? <a href="#f8be204f8af38f5b" class="i field">DefaultStartingPosition</a>);
            <a href="#a28da33a68dd9652" class="i property">StorageManager</a> = <span class="r29 r">storageManager</span>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Initializes a new instance of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> class.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r36 r">storageManager</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Responsible for creation of checkpoints and for ownership claim.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r37 r">consumerGroup</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The name of the consumer group this processor is associated with.  Events are read in the context of this group.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r38 r">fullyQualifiedNamespace</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The fully qualified Event Hubs namespace to connect to.  This is likely to be similar to </span><span class="c">&lt;</span><span class="c">c</span><span class="c">&gt;</span><span class="c">{yournamespace}.servicebus.windows.net</span><span class="c">&lt;/</span><span class="c">c</span><span class="c">&gt;</span><span class="c">.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r39 r">eventHubName</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The name of the specific Event Hub to associate the processor with.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r40 r">cacheEventCount</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The maximum number of events that will be read from the Event Hubs service and held in a local memory cache when reading is active and events are being emitted to an enumerator for processing.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r41 r">credential</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">An Azure identity credential to satisfy base class requirements; this credential may not be </span><span class="c">&lt;</span><span class="c">c</span><span class="c">&gt;</span><span class="c">null</span><span class="c">&lt;/</span><span class="c">c</span><span class="c">&gt;</span><span class="c"> but will only be used in the case that </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9ce0d46832a50877" class="i method">CreateConnection</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> has not been overridden.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r42 r">clientOptions</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The set of options to use for this processor.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   This constructor is intended only to support functional testing and mocking; it should not be used for production scenarios.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>internal</b> <a id="b85bedb21b4e9d43" href="R/b85bedb21b4e9d43.html" target="n" data-glyph="74,1" class="t constructor">EventProcessorClient</a>(<a href="SharedSource/Processor/StorageManager.cs.html#4c3279872ba9c8f6" class="t t">StorageManager</a> <span id="r36 rd" class="r36 r">storageManager</span>,
                                      <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r37 rd" class="r37 r">consumerGroup</span>,
                                      <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r38 rd" class="r38 r">fullyQualifiedNamespace</span>,
                                      <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r39 rd" class="r39 r">eventHubName</span>,
                                      <b>int</b> <span id="r40 rd" class="r40 r">cacheEventCount</span>,
                                      <a href="/Azure.Core/A.html#d93a9ffee404e938" class="t t">TokenCredential</a> <span id="r41 rd" class="r41 r">credential</span>,
                                      <a href="/Azure.Messaging.EventHubs/A.html#ff5042f1902a1c50" class="t t">EventProcessorOptions</a> <span id="r42 rd" class="r42 r">clientOptions</span>) : <a href="/Azure.Messaging.EventHubs/A.html#54cc4fbd6cebec5c" class="k">base</a>(<span class="r40 r">cacheEventCount</span>, <span class="r37 r">consumerGroup</span>, <span class="r38 r">fullyQualifiedNamespace</span>, <span class="r39 r">eventHubName</span>, <span class="r41 r">credential</span>, <span class="r42 r">clientOptions</span>)
        {
            <a href="P/0198b1312554d2ed.html#0198b1312554d2ed" class="t t">Argument</a>.<a href="SharedSource/Azure.Core/Argument.cs.html#208d023d6fa23d33" class="i method">AssertNotNull</a>(<span class="r36 r">storageManager</span>, <b>nameof</b>(<span class="r36 r">storageManager</span>));
 
            <a href="#f8be204f8af38f5b" class="i field">DefaultStartingPosition</a> = (<span class="r42 r">clientOptions</span>?.<a href="/Azure.Messaging.EventHubs/A.html#eccc0976e25b4b6e" class="i property">DefaultStartingPosition</a> ?? <a href="#f8be204f8af38f5b" class="i field">DefaultStartingPosition</a>);
            <a href="#a28da33a68dd9652" class="i property">StorageManager</a> = <span class="r36 r">storageManager</span>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Initializes a new instance of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> class.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>protected</b> <a id="aadb4340427bd219" href="R/../../0000000000.html" target="n" data-glyph="75,1" class="t constructor">EventProcessorClient</a>() : <a href="/Azure.Messaging.EventHubs/A.html#79bbeeb6813b5b7e" class="k">base</a>()
        {
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Signals the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> to begin processing events.  Should this method be called while the processor</span>
        <span class="c">///</span><span class="c">   is running, no action is taken.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r43 r">cancellationToken</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">A </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@1@netstandard/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> instance to signal the request to cancel the start operation.  This won&#39;t affect the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> once it starts running.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>public override async</b> <a href="@1@netstandard/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="d511a17ef4ec3a87" href="R/d511a17ef4ec3a87.html" target="n" data-glyph="72,1" class="i method">StartProcessingAsync</a>(<a href="@1@netstandard/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r43 rd" class="r43 r">cancellationToken</span> = <b>default</b>)
        {
            <span class="r43 r">cancellationToken</span>.<a href="SharedSource/Core/CancellationTokenExtensions.cs.html#48bae066cbca26c9" class="i method">ThrowIfCancellationRequested</a>&lt;<a href="@1@netstandard/A.html#30edb7a318d221fa" class="t t">TaskCanceledException</a>&gt;();
            <a href="@1@netstandard/A.html#f1b135ff6c380b37" class="k">var</a> <span id="r44 rd" class="r44 r">releaseGuard</span> = <b>false</b>;
 
            <b>try</b>
            {
                <b>await</b> <a href="#2709050b118f875c" class="i field">ProcessorStatusGuard</a>.<a href="@1@netstandard/A.html#7a679e542c73988f" class="i method">WaitAsync</a>(<span class="r43 r">cancellationToken</span>).<a href="@1@netstandard/A.html#9ca6b2f012ce7587" class="i method">ConfigureAwait</a>(<b>false</b>);
                <span class="r44 r">releaseGuard</span> = <b>true</b>;
 
                <b>if</b> (<a href="#94788bd419b1c1f0" class="i field">_processEventAsync</a> == <b>null</b>)
                {
                    <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#265d72f49e915224" class="t constructor">InvalidOperationException</a>(<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@netstandard/A.html#c07c3772222caaff" class="i method">Format</a>(<a href="@1@netstandard/A.html#e319c6636909012f" class="t t">CultureInfo</a>.<a href="@1@netstandard/A.html#1f5907384ac6bb55" class="i property">CurrentCulture</a>, <a href="Resources.Designer.cs.html#0f60eafa1a3b4f36" class="t t">Resources</a>.<a href="Resources.Designer.cs.html#95fca0d2bce3d02e" class="i property">CannotStartEventProcessorWithoutHandler</a>, <b>nameof</b>(<a href="#7db3b59bf2f031f4" class="i">ProcessEventAsync</a>)));
                }
 
                <b>if</b> (<a href="#be9960fc5d4c6e90" class="i field">_processErrorAsync</a> == <b>null</b>)
                {
                    <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#265d72f49e915224" class="t constructor">InvalidOperationException</a>(<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@netstandard/A.html#c07c3772222caaff" class="i method">Format</a>(<a href="@1@netstandard/A.html#e319c6636909012f" class="t t">CultureInfo</a>.<a href="@1@netstandard/A.html#1f5907384ac6bb55" class="i property">CurrentCulture</a>, <a href="Resources.Designer.cs.html#0f60eafa1a3b4f36" class="t t">Resources</a>.<a href="Resources.Designer.cs.html#95fca0d2bce3d02e" class="i property">CannotStartEventProcessorWithoutHandler</a>, <b>nameof</b>(<a href="#2845ab90988c8330" class="i">ProcessErrorAsync</a>)));
                }
 
                <b>await</b> <a href="/Azure.Messaging.EventHubs/A.html#4ce59cd6fc256750" class="k">base</a>.<a href="/Azure.Messaging.EventHubs/A.html#c31a825feec42232" class="i method">StartProcessingAsync</a>(<span class="r43 r">cancellationToken</span>).<a href="@1@netstandard/A.html#9ca6b2f012ce7587" class="i method">ConfigureAwait</a>(<b>false</b>);
            }
            <b>catch</b> (<a href="@1@netstandard/A.html#a0a8b79c277cf327" class="t t">OperationCanceledException</a>)
            {
                <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#60da317efa09fc04" class="t constructor">TaskCanceledException</a>();
            }
            <b>finally</b>
            {
                <b>if</b> (<span class="r44 r">releaseGuard</span>)
                {
                    <a href="#2709050b118f875c" class="i field">ProcessorStatusGuard</a>.<a href="@1@netstandard/A.html#f7527810bcfc0842" class="i method">Release</a>();
                }
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Signals the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> to begin processing events.  Should this method be called while the processor</span>
        <span class="c">///</span><span class="c">   is running, no action is taken.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r45 r">cancellationToken</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">A </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@1@netstandard/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> instance to signal the request to cancel the start operation.  This won&#39;t affect the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> once it starts running.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>public override void</b> <a id="894511e60611480c" href="R/894511e60611480c.html" target="n" data-glyph="72,1" class="i method">StartProcessing</a>(<a href="@1@netstandard/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r45 rd" class="r45 r">cancellationToken</span> = <b>default</b>)
        {
            <span class="r45 r">cancellationToken</span>.<a href="SharedSource/Core/CancellationTokenExtensions.cs.html#48bae066cbca26c9" class="i method">ThrowIfCancellationRequested</a>&lt;<a href="@1@netstandard/A.html#30edb7a318d221fa" class="t t">TaskCanceledException</a>&gt;();
            <a href="@1@netstandard/A.html#f1b135ff6c380b37" class="k">var</a> <span id="r46 rd" class="r46 r">releaseGuard</span> = <b>false</b>;
 
            <b>try</b>
            {
                <a href="#2709050b118f875c" class="i field">ProcessorStatusGuard</a>.<a href="@1@netstandard/A.html#03b17b43bf2a7131" class="i method">Wait</a>(<span class="r45 r">cancellationToken</span>);
                <span class="r46 r">releaseGuard</span> = <b>true</b>;
 
                <b>if</b> (<a href="#94788bd419b1c1f0" class="i field">_processEventAsync</a> == <b>null</b>)
                {
                    <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#265d72f49e915224" class="t constructor">InvalidOperationException</a>(<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@netstandard/A.html#c07c3772222caaff" class="i method">Format</a>(<a href="@1@netstandard/A.html#e319c6636909012f" class="t t">CultureInfo</a>.<a href="@1@netstandard/A.html#1f5907384ac6bb55" class="i property">CurrentCulture</a>, <a href="Resources.Designer.cs.html#0f60eafa1a3b4f36" class="t t">Resources</a>.<a href="Resources.Designer.cs.html#95fca0d2bce3d02e" class="i property">CannotStartEventProcessorWithoutHandler</a>, <b>nameof</b>(<a href="#7db3b59bf2f031f4" class="i">ProcessEventAsync</a>)));
                }
 
                <b>if</b> (<a href="#be9960fc5d4c6e90" class="i field">_processErrorAsync</a> == <b>null</b>)
                {
                    <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#265d72f49e915224" class="t constructor">InvalidOperationException</a>(<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@netstandard/A.html#c07c3772222caaff" class="i method">Format</a>(<a href="@1@netstandard/A.html#e319c6636909012f" class="t t">CultureInfo</a>.<a href="@1@netstandard/A.html#1f5907384ac6bb55" class="i property">CurrentCulture</a>, <a href="Resources.Designer.cs.html#0f60eafa1a3b4f36" class="t t">Resources</a>.<a href="Resources.Designer.cs.html#95fca0d2bce3d02e" class="i property">CannotStartEventProcessorWithoutHandler</a>, <b>nameof</b>(<a href="#2845ab90988c8330" class="i">ProcessErrorAsync</a>)));
                }
 
                <a href="/Azure.Messaging.EventHubs/A.html#4ce59cd6fc256750" class="k">base</a>.<a href="/Azure.Messaging.EventHubs/A.html#9a8c527e8fe2ac80" class="i method">StartProcessing</a>(<span class="r45 r">cancellationToken</span>);
            }
            <b>catch</b> (<a href="@1@netstandard/A.html#a0a8b79c277cf327" class="t t">OperationCanceledException</a>)
            {
                <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#60da317efa09fc04" class="t constructor">TaskCanceledException</a>();
            }
            <b>finally</b>
            {
                <b>if</b> (<span class="r46 r">releaseGuard</span>)
                {
                    <a href="#2709050b118f875c" class="i field">ProcessorStatusGuard</a>.<a href="@1@netstandard/A.html#f7527810bcfc0842" class="i method">Release</a>();
                }
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Signals the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> to stop processing events.  Should this method be called while the processor</span>
        <span class="c">///</span><span class="c">   is not running, no action is taken.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r47 r">cancellationToken</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">A </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@1@netstandard/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> instance to signal the request to cancel the stop operation.  If the operation is successfully canceled, the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> will keep running.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   When stopping, the processor will update the ownership of partitions that it was responsible for processing and clean up network resources used for communication with</span>
        <span class="c">///</span><span class="c">   the Event Hubs service.  As a result, this method will perform network I/O and may need to wait for partition reads that were active to complete.</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c">   </span><span class="c">&lt;</span><span class="c">para</span><span class="c">&gt;</span><span class="c">Due to service calls and network latency, an invocation of this method may take slightly longer than the specified </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="EventProcessorClientOptions.cs.html#2864c3d44b8ecdfa" class="t t">EventProcessorClientOptions</a>.<a href="EventProcessorClientOptions.cs.html#0e62f66faaa2dbf7" class="i property">MaximumWaitTime</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> or</span>
        <span class="c">///</span><span class="c">   if the wait time was not configured, the duration of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="/Azure.Messaging.EventHubs/A.html#a38af17da5dfdcd4" class="t t">EventHubsRetryOptions</a>.<a href="/Azure.Messaging.EventHubs/A.html#01f80bad6b3816ae" class="i property">TryTimeout</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> of the configured retry policy.</span><span class="c">&lt;/</span><span class="c">para</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>public override</b> <a href="@1@netstandard/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="9480e7e1bf9ebb4d" href="R/9480e7e1bf9ebb4d.html" target="n" data-glyph="72,1" class="i method">StopProcessingAsync</a>(<a href="@1@netstandard/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r47 rd" class="r47 r">cancellationToken</span> = <b>default</b>) =&gt; <a href="/Azure.Messaging.EventHubs/A.html#4ce59cd6fc256750" class="k">base</a>.<a href="/Azure.Messaging.EventHubs/A.html#ab75e98efdc7e7e6" class="i method">StopProcessingAsync</a>(<span class="r47 r">cancellationToken</span>);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Signals the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> to stop processing events.  Should this method be called while the processor</span>
        <span class="c">///</span><span class="c">   is not running, no action is taken.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r48 r">cancellationToken</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">A </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@1@netstandard/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> instance to signal the request to cancel the stop operation.  If the operation is successfully canceled, the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> will keep running.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   When stopping, the processor will update the ownership of partitions that it was responsible for processing and clean up network resources used for communication with</span>
        <span class="c">///</span><span class="c">   the Event Hubs service.  As a result, this method will perform network I/O and may need to wait for partition reads that were active to complete.</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c">   </span><span class="c">&lt;</span><span class="c">para</span><span class="c">&gt;</span><span class="c">Due to service calls and network latency, an invocation of this method may take slightly longer than the specified </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="EventProcessorClientOptions.cs.html#2864c3d44b8ecdfa" class="t t">EventProcessorClientOptions</a>.<a href="EventProcessorClientOptions.cs.html#0e62f66faaa2dbf7" class="i property">MaximumWaitTime</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> or</span>
        <span class="c">///</span><span class="c">   if the wait time was not configured, the duration of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="/Azure.Messaging.EventHubs/A.html#a38af17da5dfdcd4" class="t t">EventHubsRetryOptions</a>.<a href="/Azure.Messaging.EventHubs/A.html#01f80bad6b3816ae" class="i property">TryTimeout</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> of the configured retry policy.</span><span class="c">&lt;/</span><span class="c">para</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>public override void</b> <a id="1039efdeb092eeac" href="R/1039efdeb092eeac.html" target="n" data-glyph="72,1" class="i method">StopProcessing</a>(<a href="@1@netstandard/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r48 rd" class="r48 r">cancellationToken</span> = <b>default</b>) =&gt; <a href="/Azure.Messaging.EventHubs/A.html#4ce59cd6fc256750" class="k">base</a>.<a href="/Azure.Messaging.EventHubs/A.html#7663cd23ef8edab4" class="i method">StopProcessing</a>(<span class="r48 r">cancellationToken</span>);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Determines whether the specified </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<a href="@1@netstandard/A.html#d9262ceecc1719ab" class="t t">Object</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> is equal to this instance.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r49 r">obj</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<a href="@1@netstandard/A.html#d9262ceecc1719ab" class="t t">Object</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> to compare with this instance.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">&lt;</span><span class="c">c</span><span class="c">&gt;</span><span class="c">true</span><span class="c">&lt;/</span><span class="c">c</span><span class="c">&gt;</span><span class="c"> if the specified </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<a href="@1@netstandard/A.html#d9262ceecc1719ab" class="t t">Object</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> is equal to this instance; otherwise, </span><span class="c">&lt;</span><span class="c">c</span><span class="c">&gt;</span><span class="c">false</span><span class="c">&lt;/</span><span class="c">c</span><span class="c">&gt;</span><span class="c">.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span>
        [<a href="@1@netstandard/A.html#ab67c52c634f618d" class="t constructor">EditorBrowsable</a>(<a href="@1@netstandard/A.html#1a60f7b04af02e88" class="t t">EditorBrowsableState</a>.<a href="@1@netstandard/A.html#043ce0a55050bfc5" class="i field">Never</a>)]
        <b>public override bool</b> <a id="8270764e0cf0a60d" href="R/8270764e0cf0a60d.html" target="n" data-glyph="72,1" class="i method">Equals</a>(<b>object</b> <span id="r49 rd" class="r49 r">obj</span>) =&gt; <a href="/Azure.Messaging.EventHubs/A.html#4ce59cd6fc256750" class="k">base</a>.<a href="/Azure.Messaging.EventHubs/A.html#5ae3b2c4c18adb30" class="i method">Equals</a>(<span class="r49 r">obj</span>);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Returns a hash code for this instance.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">A hash code for this instance, suitable for use in hashing algorithms and data structures like a hash table.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span>
        [<a href="@1@netstandard/A.html#ab67c52c634f618d" class="t constructor">EditorBrowsable</a>(<a href="@1@netstandard/A.html#1a60f7b04af02e88" class="t t">EditorBrowsableState</a>.<a href="@1@netstandard/A.html#043ce0a55050bfc5" class="i field">Never</a>)]
        <b>public override int</b> <a id="9a430c3b37bf6008" href="R/9a430c3b37bf6008.html" target="n" data-glyph="72,1" class="i method">GetHashCode</a>() =&gt; <a href="/Azure.Messaging.EventHubs/A.html#4ce59cd6fc256750" class="k">base</a>.<a href="/Azure.Messaging.EventHubs/A.html#eef733e91a6bf1fa" class="i method">GetHashCode</a>();
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Converts the instance to string representation.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">A </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="t t">String</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> that represents this instance.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span>
        [<a href="@1@netstandard/A.html#ab67c52c634f618d" class="t constructor">EditorBrowsable</a>(<a href="@1@netstandard/A.html#1a60f7b04af02e88" class="t t">EditorBrowsableState</a>.<a href="@1@netstandard/A.html#043ce0a55050bfc5" class="i field">Never</a>)]
        <b>public override string</b> <a id="025fb521f0743217" href="R/025fb521f0743217.html" target="n" data-glyph="72,1" class="i method">ToString</a>() =&gt; <a href="/Azure.Messaging.EventHubs/A.html#4ce59cd6fc256750" class="k">base</a>.<a href="/Azure.Messaging.EventHubs/A.html#e5415b722f498e00" class="i method">ToString</a>();
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Updates the checkpoint using the given information for the associated partition and consumer group in the chosen storage service.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r50 r">eventData</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The event containing the information to be stored in the checkpoint.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r51 r">context</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The context of the partition the checkpoint is associated with.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r52 r">cancellationToken</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">A </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@1@netstandard/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> instance to signal the request to cancel the operation.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>internal</b> <a href="@1@netstandard/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="500469b427b47ee6" href="R/500469b427b47ee6.html" target="n" data-glyph="74,1" class="i method">UpdateCheckpointAsync</a>(<a href="/Azure.Messaging.EventHubs/A.html#557aa370d1369b89" class="t t">EventData</a> <span id="r50 rd" class="r50 r">eventData</span>,
                                            <a href="/Azure.Messaging.EventHubs/A.html#224668d23057d29b" class="t t">PartitionContext</a> <span id="r51 rd" class="r51 r">context</span>,
                                            <a href="@1@netstandard/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r52 rd" class="r52 r">cancellationToken</span>)
        {
            <span class="r52 r">cancellationToken</span>.<a href="SharedSource/Core/CancellationTokenExtensions.cs.html#48bae066cbca26c9" class="i method">ThrowIfCancellationRequested</a>&lt;<a href="@1@netstandard/A.html#30edb7a318d221fa" class="t t">TaskCanceledException</a>&gt;();
 
            <a href="P/0198b1312554d2ed.html#0198b1312554d2ed" class="t t">Argument</a>.<a href="SharedSource/Azure.Core/Argument.cs.html#208d023d6fa23d33" class="i method">AssertNotNull</a>(<span class="r50 r">eventData</span>, <b>nameof</b>(<span class="r50 r">eventData</span>));
            <a href="P/0198b1312554d2ed.html#0198b1312554d2ed" class="t t">Argument</a>.<a href="SharedSource/Azure.Core/Argument.cs.html#84af1169dda2bec9" class="i method">AssertInRange</a>(<span class="r50 r">eventData</span>.<a href="/Azure.Messaging.EventHubs/A.html#64e1427ef56874d4" class="i property">Offset</a>, <b>long</b>.<a href="@1@netstandard/A.html#6159ffbc81b2a9a9" class="i field">MinValue</a> + 1, <b>long</b>.<a href="@1@netstandard/A.html#52a2718fdacedb8b" class="i field">MaxValue</a>, <b>nameof</b>(<span class="r50 r">eventData</span>.<a href="/Azure.Messaging.EventHubs/A.html#64e1427ef56874d4" class="i property">Offset</a>));
            <a href="P/0198b1312554d2ed.html#0198b1312554d2ed" class="t t">Argument</a>.<a href="SharedSource/Azure.Core/Argument.cs.html#84af1169dda2bec9" class="i method">AssertInRange</a>(<span class="r50 r">eventData</span>.<a href="/Azure.Messaging.EventHubs/A.html#a458a2d181ec7bb3" class="i property">SequenceNumber</a>, <b>long</b>.<a href="@1@netstandard/A.html#6159ffbc81b2a9a9" class="i field">MinValue</a> + 1, <b>long</b>.<a href="@1@netstandard/A.html#52a2718fdacedb8b" class="i field">MaxValue</a>, <b>nameof</b>(<span class="r50 r">eventData</span>.<a href="/Azure.Messaging.EventHubs/A.html#a458a2d181ec7bb3" class="i property">SequenceNumber</a>));
            <a href="P/0198b1312554d2ed.html#0198b1312554d2ed" class="t t">Argument</a>.<a href="SharedSource/Azure.Core/Argument.cs.html#208d023d6fa23d33" class="i method">AssertNotNull</a>(<span class="r51 r">context</span>, <b>nameof</b>(<span class="r51 r">context</span>));
 
            <a href="#a009f2490f7908e9" class="i property">Logger</a>.<a href="Diagnostics/EventProcessorClientEventSource.cs.html#987cbceed5c9e355" class="i method">UpdateCheckpointStart</a>(<span class="r51 r">context</span>.<a href="/Azure.Messaging.EventHubs/A.html#cd3de8a2df1fbc04" class="i property">PartitionId</a>, <a href="#42b5a2cf1af5aed5" class="i property">Identifier</a>, <a href="#bdd8181744fe773a" class="i property">EventHubName</a>, <a href="#44444c3e706418bb" class="i property">ConsumerGroup</a>);
 
            <b>using</b> <a href="SharedSource/Azure.Core/DiagnosticScope.cs.html#df3fc9a09421f052" class="k">var</a> <span id="r53 rd" class="r53 r">scope</span> = <a href="SharedSource/Diagnostics/EventDataInstrumentation.cs.html#29a2ad8b9661f165" class="t t">EventDataInstrumentation</a>.<a href="SharedSource/Diagnostics/EventDataInstrumentation.cs.html#c97c98c65f7ca1ea" class="i property">ScopeFactory</a>.<a href="SharedSource/Azure.Core/DiagnosticScopeFactory.cs.html#74f1bd8b1f1143c8" class="i method">CreateScope</a>(<a href="SharedSource/Diagnostics/DiagnosticProperty.cs.html#291e06d56b1b9d57" class="t t">DiagnosticProperty</a>.<a href="SharedSource/Diagnostics/DiagnosticProperty.cs.html#d8d60b77d75fe448" class="i property">EventProcessorCheckpointActivityName</a>);
            <span class="r53 r">scope</span>.<a href="SharedSource/Azure.Core/DiagnosticScope.cs.html#687cad18b595ff81" class="i method">Start</a>();
 
            <b>try</b>
            {
                <span class="c">// Parameter validation is done by Checkpoint constructor.</span>
 
                <a href="/Azure.Messaging.EventHubs/A.html#a957ac02e2072bb9" class="k">var</a> <span id="r54 rd" class="r54 r">checkpoint</span> = <b>new</b> <a href="/Azure.Messaging.EventHubs/A.html#f0f814e1d10a319f" class="t constructor">EventProcessorCheckpoint</a>
                {
                    <a href="/Azure.Messaging.EventHubs/A.html#47fe22648355061c" class="i property">FullyQualifiedNamespace</a> = <a href="#6305812bd357fbc9" class="i property">FullyQualifiedNamespace</a>,
                    <a href="/Azure.Messaging.EventHubs/A.html#00530c9a988fc47c" class="i property">EventHubName</a> = <a href="#bdd8181744fe773a" class="i property">EventHubName</a>,
                    <a href="/Azure.Messaging.EventHubs/A.html#5d53404f5a979b96" class="i property">ConsumerGroup</a> = <a href="#44444c3e706418bb" class="i property">ConsumerGroup</a>,
                    <a href="/Azure.Messaging.EventHubs/A.html#145e376eab80843c" class="i property">PartitionId</a> = <span class="r51 r">context</span>.<a href="/Azure.Messaging.EventHubs/A.html#cd3de8a2df1fbc04" class="i property">PartitionId</a>,
                    <a href="/Azure.Messaging.EventHubs/A.html#e53fa1aec8035654" class="i property">StartingPosition</a> = <a href="/Azure.Messaging.EventHubs/A.html#97742fa7b7b6b68f" class="t t">EventPosition</a>.<a href="/Azure.Messaging.EventHubs/A.html#7bd33a697bf152f3" class="i method">FromOffset</a>(<span class="r50 r">eventData</span>.<a href="/Azure.Messaging.EventHubs/A.html#64e1427ef56874d4" class="i property">Offset</a>)
                };
 
                <b>return</b> <a href="#a28da33a68dd9652" class="i property">StorageManager</a>.<a href="SharedSource/Processor/StorageManager.cs.html#5b41ff5720cdf271" class="i method">UpdateCheckpointAsync</a>(<span class="r54 r">checkpoint</span>, <span class="r50 r">eventData</span>, <span class="r52 r">cancellationToken</span>);
            }
            <b>catch</b> (<a href="@1@netstandard/A.html#f092fb2b893a0162" class="t t">Exception</a> <span id="r55 rd" class="r55 r">ex</span>)
            {
                <span class="c">// In case of failure, there is no need to call the error handler because the exception can</span>
                <span class="c">// be thrown directly to the caller here.</span>
 
                <span class="r53 r">scope</span>.<a href="SharedSource/Azure.Core/DiagnosticScope.cs.html#3d6de3437ae4c961" class="i method">Failed</a>(<span class="r55 r">ex</span>);
                <a href="#a009f2490f7908e9" class="i property">Logger</a>.<a href="Diagnostics/EventProcessorClientEventSource.cs.html#92e8116fae0ceb7a" class="i method">UpdateCheckpointError</a>(<span class="r51 r">context</span>.<a href="/Azure.Messaging.EventHubs/A.html#cd3de8a2df1fbc04" class="i property">PartitionId</a>, <a href="#42b5a2cf1af5aed5" class="i property">Identifier</a>, <a href="#bdd8181744fe773a" class="i property">EventHubName</a>, <a href="#44444c3e706418bb" class="i property">ConsumerGroup</a>, <span class="r55 r">ex</span>.<a href="@1@netstandard/A.html#5fba0e16215b42a3" class="i property">Message</a>);
 
                <b>throw</b>;
            }
            <b>finally</b>
            {
                <a href="#a009f2490f7908e9" class="i property">Logger</a>.<a href="Diagnostics/EventProcessorClientEventSource.cs.html#fe7188269bfbedc4" class="i method">UpdateCheckpointComplete</a>(<span class="r51 r">context</span>.<a href="/Azure.Messaging.EventHubs/A.html#cd3de8a2df1fbc04" class="i property">PartitionId</a>, <a href="#42b5a2cf1af5aed5" class="i property">Identifier</a>, <a href="#bdd8181744fe773a" class="i property">EventHubName</a>, <a href="#44444c3e706418bb" class="i property">ConsumerGroup</a>);
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Creates an </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="/Azure.Messaging.EventHubs/A.html#0646809725209998" class="t t">EventHubConnection</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> to use for communicating with the Event Hubs service.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">The requested </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="/Azure.Messaging.EventHubs/A.html#0646809725209998" class="t t">EventHubConnection</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c">.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>protected override</b> <a href="/Azure.Messaging.EventHubs/A.html#0646809725209998" class="t t">EventHubConnection</a> <a id="9ce0d46832a50877" href="R/9ce0d46832a50877.html" target="n" data-glyph="75,1" class="i method">CreateConnection</a>() =&gt; <a href="/Azure.Messaging.EventHubs/A.html#4ce59cd6fc256750" class="k">base</a>.<a href="/Azure.Messaging.EventHubs/A.html#6bf4729787ecddf5" class="i method">CreateConnection</a>();
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Produces a list of the available checkpoints for the Event Hub and consumer group associated with the</span>
        <span class="c">///</span><span class="c">   event processor instance, so that processing for a given set of partitions can be properly initialized.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r56 r">cancellationToken</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">A </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@1@netstandard/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> instance to signal the request to cancel the processing.  This is most likely to occur when the processor is shutting down.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">The set of checkpoints for the processor to take into account when initializing partitions.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Should a partition not have a corresponding checkpoint, the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="/Azure.Messaging.EventHubs/A.html#ff5042f1902a1c50" class="t t">EventProcessorOptions</a>.<a href="/Azure.Messaging.EventHubs/A.html#eccc0976e25b4b6e" class="i property">DefaultStartingPosition</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> will</span>
        <span class="c">///</span><span class="c">   be used to initialize the partition for processing.</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c">   In the event that a custom starting point is desired for a single partition, or each partition should start at a unique place,</span>
        <span class="c">///</span><span class="c">   it is recommended that this method express that intent by returning checkpoints for those partitions with the desired custom</span>
        <span class="c">///</span><span class="c">   starting location set.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>protected override async</b> <a href="@1@netstandard/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<a href="@1@netstandard/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="/Azure.Messaging.EventHubs/A.html#a957ac02e2072bb9" class="t t">EventProcessorCheckpoint</a>&gt;&gt; <a id="35f37a54b8f26b12" href="R/35f37a54b8f26b12.html" target="n" data-glyph="75,1" class="i method">ListCheckpointsAsync</a>(<a href="@1@netstandard/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r56 rd" class="r56 r">cancellationToken</span>)
        {
            <a href="@1@netstandard/A.html#3acf01620172c7f0" class="k">var</a> <span id="r57 rd" class="r57 r">checkpoints</span> = <b>await</b> <a href="#a28da33a68dd9652" class="i property">StorageManager</a>.<a href="SharedSource/Processor/StorageManager.cs.html#b12cce1e268cd468" class="i method">ListCheckpointsAsync</a>(<a href="#6305812bd357fbc9" class="i property">FullyQualifiedNamespace</a>, <a href="#bdd8181744fe773a" class="i property">EventHubName</a>, <a href="#44444c3e706418bb" class="i property">ConsumerGroup</a>, <span class="r56 r">cancellationToken</span>).<a href="@1@netstandard/A.html#07ef75a8fa372c94" class="i method">ConfigureAwait</a>(<b>false</b>);
 
            <span class="c">// If there was no initialization handler, no custom starting positions</span>
            <span class="c">// could have been specified.  Return the checkpoints without further processing.</span>
 
            <b>if</b> (<a href="#0f1135d4580aed32" class="i field">_partitionInitializingAsync</a> == <b>null</b>)
            {
                <b>return</b> <span class="r57 r">checkpoints</span>;
            }
 
            <span class="c">// Process the checkpoints to inject mock checkpoints for partitions that</span>
            <span class="c">// specify a custom default and do not have an actual checkpoint.</span>
 
            <b>return</b> <a href="#df98b41ddd44e4a4" class="i method">ProcessCheckpointStartingPositions</a>(<span class="r57 r">checkpoints</span>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Returns a checkpoint for the Event Hub, consumer group, and partition ID associated with the</span>
        <span class="c">///</span><span class="c">   event processor instance, so that processing for a given partition can be properly initialized.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r58 r">partitionId</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The ID of the partition for which to retrieve the checkpoint.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r59 r">cancellationToken</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">A </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@1@netstandard/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> instance to signal the request to cancel the processing.  This is most likely to occur when the processor is shutting down.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">The checkpoint for the processor to take into account when initializing partition.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Should a partition not have a corresponding checkpoint, the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="/Azure.Messaging.EventHubs/A.html#ff5042f1902a1c50" class="t t">EventProcessorOptions</a>.<a href="/Azure.Messaging.EventHubs/A.html#eccc0976e25b4b6e" class="i property">DefaultStartingPosition</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> will</span>
        <span class="c">///</span><span class="c">   be used to initialize the partition for processing.</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c">   In the event that a custom starting point is desired for a single partition, or each partition should start at a unique place,</span>
        <span class="c">///</span><span class="c">   it is recommended that this method express that intent by returning checkpoints for those partitions with the desired custom</span>
        <span class="c">///</span><span class="c">   starting location set.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>protected override async</b> <a href="@1@netstandard/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<a href="/Azure.Messaging.EventHubs/A.html#a957ac02e2072bb9" class="t t">EventProcessorCheckpoint</a>&gt; <a id="d405dffa1d8df19d" href="R/d405dffa1d8df19d.html" target="n" data-glyph="75,1" class="i method">GetCheckpointAsync</a>(<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r58 rd" class="r58 r">partitionId</span>, <a href="@1@netstandard/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r59 rd" class="r59 r">cancellationToken</span>)
        {
            <a href="/Azure.Messaging.EventHubs/A.html#a957ac02e2072bb9" class="k">var</a> <span id="r60 rd" class="r60 r">checkpoint</span> = <b>await</b> <a href="#a28da33a68dd9652" class="i property">StorageManager</a>.<a href="SharedSource/Processor/StorageManager.cs.html#f87203089e735c4e" class="i method">GetCheckpointAsync</a>(<a href="#6305812bd357fbc9" class="i property">FullyQualifiedNamespace</a>, <a href="#bdd8181744fe773a" class="i property">EventHubName</a>, <a href="#44444c3e706418bb" class="i property">ConsumerGroup</a>, <span class="r58 r">partitionId</span>, <span class="r59 r">cancellationToken</span>).<a href="@1@netstandard/A.html#07ef75a8fa372c94" class="i method">ConfigureAwait</a>(<b>false</b>);
 
            <span class="c">// If there was no initialization handler, no custom starting positions</span>
            <span class="c">// could have been specified.  Return the checkpoint without further processing.</span>
 
            <b>if</b> (<a href="#0f1135d4580aed32" class="i field">_partitionInitializingAsync</a> == <b>null</b>)
            {
                <b>return</b> <span class="r60 r">checkpoint</span>;
            }
 
            <span class="c">// Process the checkpoints to inject mock checkpoints for partitions that</span>
            <span class="c">// specify a custom default and do not have an actual checkpoint.</span>
 
            <b>return</b> <span class="r60 r">checkpoint</span> ?? <a href="#eb16d40f23440013" class="i method">CreateCheckpointWithDefaultStartingPosition</a>(<span class="r58 r">partitionId</span>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Produces a list of the ownership assignments for partitions between each of the cooperating event processor</span>
        <span class="c">///</span><span class="c">   instances for a given Event Hub and consumer group pairing.  This method is used when load balancing to allow</span>
        <span class="c">///</span><span class="c">   the processor to discover other active collaborators and to make decisions about how to best balance work</span>
        <span class="c">///</span><span class="c">   between them.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r61 r">cancellationToken</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">A </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@1@netstandard/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> instance to signal the request to cancel the processing.  This is most likely to occur when the processor is shutting down.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">The set of ownership records to take into account when making load balancing decisions.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>protected override</b> <a href="@1@netstandard/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<a href="@1@netstandard/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="/Azure.Messaging.EventHubs/A.html#9a85e4e6ad44370e" class="t t">EventProcessorPartitionOwnership</a>&gt;&gt; <a id="d330e69b25a0e4c2" href="R/d330e69b25a0e4c2.html" target="n" data-glyph="75,1" class="i method">ListOwnershipAsync</a>(<a href="@1@netstandard/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r61 rd" class="r61 r">cancellationToken</span>) =&gt;
            <a href="#a28da33a68dd9652" class="i property">StorageManager</a>.<a href="SharedSource/Processor/StorageManager.cs.html#7ecf92f689e27571" class="i method">ListOwnershipAsync</a>(<a href="#6305812bd357fbc9" class="i property">FullyQualifiedNamespace</a>, <a href="#bdd8181744fe773a" class="i property">EventHubName</a>, <a href="#44444c3e706418bb" class="i property">ConsumerGroup</a>, <span class="r61 r">cancellationToken</span>);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Attempts to claim ownership of the specified partitions for processing.  This method is used by</span>
        <span class="c">///</span><span class="c">   load balancing to allow event processor instances to distribute the responsibility for processing</span>
        <span class="c">///</span><span class="c">   partitions for a given Event Hub and consumer group pairing amongst the active event processors.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r62 r">desiredOwnership</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The set of partition ownership desired by the event processor instance; this is the set of partitions that it will attempt to request responsibility for processing.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r63 r">cancellationToken</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">A </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@1@netstandard/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> instance to signal the request to cancel the processing.  This is most likely to occur when the processor is shutting down.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">The set of ownership records for the partitions that were successfully claimed; this is expected to be the </span><span class="c">&lt;</span><span class="c">paramref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r62 r">desiredOwnership</span><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> or a subset of those partitions.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>protected override</b> <a href="@1@netstandard/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<a href="@1@netstandard/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="/Azure.Messaging.EventHubs/A.html#9a85e4e6ad44370e" class="t t">EventProcessorPartitionOwnership</a>&gt;&gt; <a id="509c2cba76d36559" href="R/509c2cba76d36559.html" target="n" data-glyph="75,1" class="i method">ClaimOwnershipAsync</a>(<a href="@1@netstandard/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="/Azure.Messaging.EventHubs/A.html#9a85e4e6ad44370e" class="t t">EventProcessorPartitionOwnership</a>&gt; <span id="r62 rd" class="r62 r">desiredOwnership</span>,
                                                                                                   <a href="@1@netstandard/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r63 rd" class="r63 r">cancellationToken</span>) =&gt;
            <a href="#a28da33a68dd9652" class="i property">StorageManager</a>.<a href="SharedSource/Processor/StorageManager.cs.html#2518dddbde161122" class="i method">ClaimOwnershipAsync</a>(<span class="r62 r">desiredOwnership</span>, <span class="r63 r">cancellationToken</span>);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Performs the tasks needed to process a batch of events for a given partition as they are read from the Event Hubs service.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r64 r">events</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The batch of events to be processed.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r65 r">partition</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The context of the partition from which the events were read.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r66 r">cancellationToken</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">A </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@1@netstandard/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> instance to signal the request to cancel the processing.  This is most likely to occur when the processor is shutting down.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   </span><span class="c">&lt;</span><span class="c">para</span><span class="c">&gt;</span><span class="c">The number of events in the </span><span class="c">&lt;</span><span class="c">paramref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r64 r">events</span><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> batch may vary.  The batch will contain a number of events between zero and batch size that was</span>
        <span class="c">///</span><span class="c">   requested when the processor was created, depending on the availability of events in the partition within the requested </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="/Azure.Messaging.EventHubs/A.html#ff5042f1902a1c50" class="t t">EventProcessorOptions</a>.<a href="/Azure.Messaging.EventHubs/A.html#0a82497014b9abb1" class="i property">MaximumWaitTime</a><span class="c">&quot;</span> <span class="c">/&gt;</span>
        <span class="c">///</span><span class="c">   interval.</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c">   If there are enough events available in the Event Hub partition to fill a batch of the requested size, the processor will populate the batch and dispatch it to this method</span>
        <span class="c">///</span><span class="c">   immediately.  If there were not a sufficient number of events available in the partition to populate a full batch, the event processor will continue reading from the partition</span>
        <span class="c">///</span><span class="c">   to reach the requested batch size until the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="/Azure.Messaging.EventHubs/A.html#ff5042f1902a1c50" class="t t">EventProcessorOptions</a>.<a href="/Azure.Messaging.EventHubs/A.html#0a82497014b9abb1" class="i property">MaximumWaitTime</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> has elapsed, at which point it will return a batch containing whatever events were</span>
        <span class="c">///</span><span class="c">   available by the end of that period.</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c">   If a </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="/Azure.Messaging.EventHubs/A.html#ff5042f1902a1c50" class="t t">EventProcessorOptions</a>.<a href="/Azure.Messaging.EventHubs/A.html#0a82497014b9abb1" class="i property">MaximumWaitTime</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> was not requested, indicated by setting the option to </span><span class="c">&lt;</span><span class="c">c</span><span class="c">&gt;</span><span class="c">null</span><span class="c">&lt;/</span><span class="c">c</span><span class="c">&gt;</span><span class="c">, the event processor will continue reading from the Event Hub</span>
        <span class="c">///</span><span class="c">   partition until a full batch of the requested size could be populated and will not dispatch any partial batches to this method.</span><span class="c">&lt;/</span><span class="c">para</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c">   </span><span class="c">&lt;</span><span class="c">para</span><span class="c">&gt;</span><span class="c">Should an exception occur within the code for this method, the event processor will allow it to bubble and will not surface to the error handler or attempt to handle</span>
        <span class="c">///</span><span class="c">   it in any way.  Developers are strongly encouraged to take exception scenarios into account and guard against them using try/catch blocks and other means as appropriate.</span><span class="c">&lt;/</span><span class="c">para</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c">   </span><span class="c">&lt;</span><span class="c">para</span><span class="c">&gt;</span><span class="c">It is not recommended that the state of the processor be managed directly from within this method; requesting to start or stop the processor may result in</span>
        <span class="c">///</span><span class="c">   a deadlock scenario, especially if using the synchronous form of the call.</span><span class="c">&lt;/</span><span class="c">para</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>protected override async</b> <a href="@1@netstandard/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="280476b956bd754e" href="R/280476b956bd754e.html" target="n" data-glyph="75,1" class="i method">OnProcessingEventBatchAsync</a>(<a href="@1@netstandard/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="/Azure.Messaging.EventHubs/A.html#557aa370d1369b89" class="t t">EventData</a>&gt; <span id="r64 rd" class="r64 r">events</span>,
                                                                  <a href="/Azure.Messaging.EventHubs/A.html#f166f8955ab127cc" class="t t">EventProcessorPartition</a> <span id="r65 rd" class="r65 r">partition</span>,
                                                                  <a href="@1@netstandard/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r66 rd" class="r66 r">cancellationToken</span>)
        {
            <span class="r66 r">cancellationToken</span>.<a href="SharedSource/Core/CancellationTokenExtensions.cs.html#48bae066cbca26c9" class="i method">ThrowIfCancellationRequested</a>&lt;<a href="@1@netstandard/A.html#30edb7a318d221fa" class="t t">TaskCanceledException</a>&gt;();
 
            <a href="/Azure.Messaging.EventHubs/A.html#224668d23057d29b" class="k">var</a> <span id="r67 rd" class="r67 r">context</span> = <b>default</b>(<a href="/Azure.Messaging.EventHubs/A.html#224668d23057d29b" class="t t">PartitionContext</a>);
            <a href="/Azure.Messaging.EventHubs/A.html#01166992a2a01f56" class="k">var</a> <span id="r68 rd" class="r68 r">eventArgs</span> = <b>default</b>(<a href="/Azure.Messaging.EventHubs/A.html#01166992a2a01f56" class="t t">ProcessEventArgs</a>);
            <a href="@1@netstandard/A.html#cf7f4095e4de7646" class="k">var</a> <span id="r69 rd" class="r69 r">caughtExceptions</span> = <b>default</b>(<a href="@1@netstandard/A.html#cf7f4095e4de7646" class="t t">List</a>&lt;<a href="@1@netstandard/A.html#f092fb2b893a0162" class="t t">Exception</a>&gt;);
            <a href="@1@netstandard/A.html#f1b135ff6c380b37" class="k">var</a> <span id="r70 rd" class="r70 r">emptyBatch</span> = <b>true</b>;
 
            <b>try</b>
            {
                <a href="#a009f2490f7908e9" class="i property">Logger</a>.<a href="Diagnostics/EventProcessorClientEventSource.cs.html#2545f366a905f798" class="i method">EventBatchProcessingStart</a>(<span class="r65 r">partition</span>.<a href="/Azure.Messaging.EventHubs/A.html#78ef0d1266ee7e2e" class="i property">PartitionId</a>, <a href="#42b5a2cf1af5aed5" class="i property">Identifier</a>, <a href="#bdd8181744fe773a" class="i property">EventHubName</a>, <a href="#44444c3e706418bb" class="i property">ConsumerGroup</a>);
 
                <span class="c">// Attempt to process each event in the batch, marking if the batch was non-empty.  Exceptions during</span>
                <span class="c">// processing should be logged and cached, as the batch must be processed completely to avoid losing events.</span>
 
                <b>foreach</b> (<a href="/Azure.Messaging.EventHubs/A.html#557aa370d1369b89" class="k">var</a> <span id="r71 rd" class="r71 r">eventData</span> <b>in</b> <span class="r64 r">events</span>)
                {
                    <span class="r70 r">emptyBatch</span> = <b>false</b>;
 
                    <b>try</b>
                    {
                        <span class="r67 r">context</span> ??= <b>new</b> <a href="#b127db0c88052369" class="t constructor">ProcessorPartitionContext</a>(<span class="r65 r">partition</span>.<a href="/Azure.Messaging.EventHubs/A.html#78ef0d1266ee7e2e" class="i property">PartitionId</a>, () =&gt; <a href="/Azure.Messaging.EventHubs/A.html#eb336b40869d9e65" class="i method">ReadLastEnqueuedEventProperties</a>(<span class="r65 r">partition</span>.<a href="/Azure.Messaging.EventHubs/A.html#78ef0d1266ee7e2e" class="i property">PartitionId</a>));
                        <span class="r68 r">eventArgs</span> = <b>new</b> <a href="/Azure.Messaging.EventHubs/A.html#d40e2466464171f7" class="t constructor">ProcessEventArgs</a>(<span class="r67 r">context</span>, <span class="r71 r">eventData</span>, <span id="r72 rd" class="r72 r">updateToken</span> =&gt; <a href="#500469b427b47ee6" class="i method">UpdateCheckpointAsync</a>(<span class="r71 r">eventData</span>, <span class="r67 r">context</span>, <span class="r72 r">updateToken</span>), <span class="r66 r">cancellationToken</span>);
 
                        <b>await</b> <a href="#94788bd419b1c1f0" class="i field">_processEventAsync</a>(<span class="r68 r">eventArgs</span>).<a href="@1@netstandard/A.html#9ca6b2f012ce7587" class="i method">ConfigureAwait</a>(<b>false</b>);
                    }
                    <b>catch</b> (<a href="@1@netstandard/A.html#f092fb2b893a0162" class="t t">Exception</a> <span id="r73 rd" class="r73 r">ex</span>) <b>when</b> (!(<span class="r73 r">ex</span> <b>is</b> <a href="@1@netstandard/A.html#30edb7a318d221fa" class="t t">TaskCanceledException</a>))
                    {
                        <span class="c">// This exception is not surfaced to the error handler or bubbled, as the entire batch must be</span>
                        <span class="c">// processed or events will be lost.  Preserve the exceptions, should any occur.</span>
 
                        <a href="#a009f2490f7908e9" class="i property">Logger</a>.<a href="Diagnostics/EventProcessorClientEventSource.cs.html#454f835d6fe8d94f" class="i method">EventBatchProcessingError</a>(<span class="r65 r">partition</span>.<a href="/Azure.Messaging.EventHubs/A.html#78ef0d1266ee7e2e" class="i property">PartitionId</a>, <a href="#42b5a2cf1af5aed5" class="i property">Identifier</a>, <a href="#bdd8181744fe773a" class="i property">EventHubName</a>, <a href="#44444c3e706418bb" class="i property">ConsumerGroup</a>, <span class="r73 r">ex</span>.<a href="@1@netstandard/A.html#5fba0e16215b42a3" class="i property">Message</a>);
 
                        <span class="r69 r">caughtExceptions</span> ??= <b>new</b> <a href="@1@netstandard/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<a href="@1@netstandard/A.html#f092fb2b893a0162" class="t t">Exception</a>&gt;();
                        <span class="r69 r">caughtExceptions</span>.<a href="@1@netstandard/A.html#9cc11588bffd57c1" class="i method">Add</a>(<span class="r73 r">ex</span>);
                    }
                }
 
                <span class="c">// If the event batch was empty, then dispatch to the handler; the base class will ensure that empty batches</span>
                <span class="c">// are requested and will not invoke this method should empties not be sent to the handler.</span>
 
                <b>if</b> (<span class="r70 r">emptyBatch</span>)
                {
                    <span class="r68 r">eventArgs</span> = <b>new</b> <a href="/Azure.Messaging.EventHubs/A.html#d40e2466464171f7" class="t constructor">ProcessEventArgs</a>(<b>new</b> <a href="#df31bcf295771bc4" class="t constructor">EmptyPartitionContext</a>(<span class="r65 r">partition</span>.<a href="/Azure.Messaging.EventHubs/A.html#78ef0d1266ee7e2e" class="i property">PartitionId</a>), <b>null</b>, <a href="#bf82617aa7d19575" class="i field">EmptyEventUpdateCheckpoint</a>, <span class="r66 r">cancellationToken</span>);
                    <b>await</b> <a href="#94788bd419b1c1f0" class="i field">_processEventAsync</a>(<span class="r68 r">eventArgs</span>).<a href="@1@netstandard/A.html#9ca6b2f012ce7587" class="i method">ConfigureAwait</a>(<b>false</b>);
                }
            }
            <b>catch</b> (<a href="@1@netstandard/A.html#f092fb2b893a0162" class="t t">Exception</a> <span id="r74 rd" class="r74 r">ex</span>) <b>when</b> (!(<span class="r74 r">ex</span> <b>is</b> <a href="@1@netstandard/A.html#30edb7a318d221fa" class="t t">TaskCanceledException</a>))
            {
                <span class="c">// This exception was either not related to processing events or was the result of sending an empty batch to be</span>
                <span class="c">// processed.  Since there would be no other caught exceptions, tread this like a single case.</span>
 
                <a href="#a009f2490f7908e9" class="i property">Logger</a>.<a href="Diagnostics/EventProcessorClientEventSource.cs.html#454f835d6fe8d94f" class="i method">EventBatchProcessingError</a>(<span class="r65 r">partition</span>.<a href="/Azure.Messaging.EventHubs/A.html#78ef0d1266ee7e2e" class="i property">PartitionId</a>, <a href="#42b5a2cf1af5aed5" class="i property">Identifier</a>, <a href="#bdd8181744fe773a" class="i property">EventHubName</a>, <a href="#44444c3e706418bb" class="i property">ConsumerGroup</a>, <span class="r74 r">ex</span>.<a href="@1@netstandard/A.html#5fba0e16215b42a3" class="i property">Message</a>);
                <b>throw</b>;
            }
            <b>finally</b>
            {
                <a href="#a009f2490f7908e9" class="i property">Logger</a>.<a href="Diagnostics/EventProcessorClientEventSource.cs.html#4e0fe04b31d7f4bc" class="i method">EventBatchProcessingComplete</a>(<span class="r65 r">partition</span>.<a href="/Azure.Messaging.EventHubs/A.html#78ef0d1266ee7e2e" class="i property">PartitionId</a>, <a href="#42b5a2cf1af5aed5" class="i property">Identifier</a>, <a href="#bdd8181744fe773a" class="i property">EventHubName</a>, <a href="#44444c3e706418bb" class="i property">ConsumerGroup</a>);
            }
 
            <span class="c">// Deal with any exceptions that occurred while processing the batch.  If more than one was</span>
            <span class="c">// present, preserve them in an aggregate exception for transport.</span>
 
            <b>if</b> (<span class="r69 r">caughtExceptions</span> != <b>null</b>)
            {
                <b>if</b> (<span class="r69 r">caughtExceptions</span>.<a href="@1@netstandard/A.html#78a69d857716bc68" class="i property">Count</a> == 1)
                {
                    <a href="@1@netstandard/A.html#1443447025759846" class="t t">ExceptionDispatchInfo</a>.<a href="@1@netstandard/A.html#139923899a417d5a" class="i method">Capture</a>(<span class="r69 r">caughtExceptions</span>[0]).<a href="@1@netstandard/A.html#fc3b312e2d0ab87a" class="i method">Throw</a>();
                }
 
                <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#4dbda9e082b19a1b" class="t constructor">AggregateException</a>(<a href="Resources.Designer.cs.html#0f60eafa1a3b4f36" class="t t">Resources</a>.<a href="Resources.Designer.cs.html#f2f0375b6bad01fa" class="i property">AggregateEventProcessingExceptionMessage</a>, <span class="r69 r">caughtExceptions</span>);
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Performs the tasks needed when an unexpected exception occurs within the operation of the</span>
        <span class="c">///</span><span class="c">   event processor infrastructure.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r75 r">exception</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The exception that occurred during operation of the event processor.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r76 r">partition</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The context of the partition associated with the error, if any; otherwise, </span><span class="c">&lt;</span><span class="c">c</span><span class="c">&gt;</span><span class="c">null</span><span class="c">&lt;/</span><span class="c">c</span><span class="c">&gt;</span><span class="c">.  This may only be initialized for members of </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="/Azure.Messaging.EventHubs/A.html#f166f8955ab127cc" class="t t">EventProcessorPartition</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c">, depending on the point at which the error occurred.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r77 r">operationDescription</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">A short textual description of the operation during which the exception occurred; intended to be informational only.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r78 r">cancellationToken</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">A </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@1@netstandard/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> instance to signal the request to cancel the processing.  This is most likely to occur when the processor is shutting down.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   This error handler is invoked when there is an exception observed within the event processor itself; it is not invoked for exceptions in</span>
        <span class="c">///</span><span class="c">   code that has been implemented to process events or other overrides and extension points that are not critical to the processor&#39;s operation.</span>
        <span class="c">///</span><span class="c">   The event processor will make every effort to recover from exceptions and continue processing.  Should an exception that cannot be recovered</span>
        <span class="c">///</span><span class="c">   from be encountered, the processor will attempt to forfeit ownership of all partitions that it was processing so that work may be redistributed.</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c">   The exceptions surfaced to this method may be fatal or non-fatal; because the processor may not be able to accurately predict whether an</span>
        <span class="c">///</span><span class="c">   exception was fatal or whether its state was corrupted, this method has responsibility for making the determination as to whether processing</span>
        <span class="c">///</span><span class="c">   should be terminated or restarted.  The method may do so by calling Stop on the processor instance and then, if desired, calling Start on the processor.</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c">   It is recommended that, for production scenarios, the decision be made by considering observations made by this error handler, the method invoked</span>
        <span class="c">///</span><span class="c">   when initializing processing for a partition, and the method invoked when processing for a partition is stopped.  Many developers will also include</span>
        <span class="c">///</span><span class="c">   data from their monitoring platforms in this decision as well.</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c">   As with event processing, should an exception occur in the code for the error handler, the event processor will allow it to bubble and will not attempt to handle</span>
        <span class="c">///</span><span class="c">   it in any way.  Developers are strongly encouraged to take exception scenarios into account and guard against them using try/catch blocks and other means as appropriate.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>protected override async</b> <a href="@1@netstandard/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="9ffc502f1c5c0be3" href="R/9ffc502f1c5c0be3.html" target="n" data-glyph="75,1" class="i method">OnProcessingErrorAsync</a>(<a href="@1@netstandard/A.html#f092fb2b893a0162" class="t t">Exception</a> <span id="r75 rd" class="r75 r">exception</span>,
                                                             <a href="/Azure.Messaging.EventHubs/A.html#f166f8955ab127cc" class="t t">EventProcessorPartition</a> <span id="r76 rd" class="r76 r">partition</span>,
                                                             <a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r77 rd" class="r77 r">operationDescription</span>,
                                                             <a href="@1@netstandard/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r78 rd" class="r78 r">cancellationToken</span>)
        {
            <a href="/Azure.Messaging.EventHubs/A.html#7cd8970f9040d756" class="k">var</a> <span id="r79 rd" class="r79 r">eventArgs</span> = <b>new</b> <a href="/Azure.Messaging.EventHubs/A.html#05f2d8ea754bd996" class="t constructor">ProcessErrorEventArgs</a>(<span class="r76 r">partition</span>?.<a href="/Azure.Messaging.EventHubs/A.html#78ef0d1266ee7e2e" class="i property">PartitionId</a>, <span class="r77 r">operationDescription</span>, <span class="r75 r">exception</span>, <span class="r78 r">cancellationToken</span>);
            <b>await</b> <a href="#be9960fc5d4c6e90" class="i field">_processErrorAsync</a>(<span class="r79 r">eventArgs</span>).<a href="@1@netstandard/A.html#9ca6b2f012ce7587" class="i method">ConfigureAwait</a>(<b>false</b>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Performs the tasks to initialize a partition, and its associated context, for event processing.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r80 r">partition</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The context of the partition being initialized.  Only the well-known members of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="/Azure.Messaging.EventHubs/A.html#f166f8955ab127cc" class="t t">EventProcessorPartition</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> will be populated.  If a custom context is being used, the implementor of this method is responsible for initializing custom members.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r81 r">cancellationToken</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">A </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@1@netstandard/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> instance to signal the request to cancel the initialization.  This is most likely to occur if the partition is claimed by another event processor instance or the processor is shutting down.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   It is not recommended that the state of the processor be managed directly from within this method; requesting to start or stop the processor may result in</span>
        <span class="c">///</span><span class="c">   a deadlock scenario, especially if using the synchronous form of the call.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>protected override async</b> <a href="@1@netstandard/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="fcd7d033350bf40d" href="R/fcd7d033350bf40d.html" target="n" data-glyph="75,1" class="i method">OnInitializingPartitionAsync</a>(<a href="/Azure.Messaging.EventHubs/A.html#f166f8955ab127cc" class="t t">EventProcessorPartition</a> <span id="r80 rd" class="r80 r">partition</span>,
                                                                   <a href="@1@netstandard/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r81 rd" class="r81 r">cancellationToken</span>)
        {
            <span class="c">// Handlers cannot be changed while the processor is running; it is safe to check and call</span>
            <span class="c">// without capturing a local reference.</span>
 
            <b>if</b> (<a href="#0f1135d4580aed32" class="i field">_partitionInitializingAsync</a> != <b>null</b>)
            {
                <a href="/Azure.Messaging.EventHubs/A.html#77f637a004136fc2" class="k">var</a> <span id="r82 rd" class="r82 r">eventArgs</span> = <b>new</b> <a href="/Azure.Messaging.EventHubs/A.html#1e04f24734222258" class="t constructor">PartitionInitializingEventArgs</a>(<span class="r80 r">partition</span>.<a href="/Azure.Messaging.EventHubs/A.html#78ef0d1266ee7e2e" class="i property">PartitionId</a>, <a href="#f8be204f8af38f5b" class="i field">DefaultStartingPosition</a>, <span class="r81 r">cancellationToken</span>);
                <b>await</b> <a href="#0f1135d4580aed32" class="i field">_partitionInitializingAsync</a>(<span class="r82 r">eventArgs</span>).<a href="@1@netstandard/A.html#9ca6b2f012ce7587" class="i method">ConfigureAwait</a>(<b>false</b>);
 
                <a href="#e47d6704fcbf7d50" class="i field">PartitionStartingPositionDefaults</a><a href="@1@netstandard/A.html#52d16ab3fe5a7e2b">[</a><span class="r80 r">partition</span>.<a href="/Azure.Messaging.EventHubs/A.html#78ef0d1266ee7e2e" class="i property">PartitionId</a>] = <span class="r82 r">eventArgs</span>.<a href="/Azure.Messaging.EventHubs/A.html#671f1a9e51873191" class="i property">DefaultStartingPosition</a>;
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Performs the tasks needed when processing for a partition is being stopped.  This commonly occurs when the partition</span>
        <span class="c">///</span><span class="c">   is claimed by another event processor instance or when the current event processor instance is shutting down.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r83 r">partition</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The context of the partition for which processing is being stopped.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r84 r">reason</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The reason that processing is being stopped for the partition.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r85 r">cancellationToken</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">A </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@1@netstandard/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> instance to signal the request to cancel the processing.  This is not expected to signal under normal circumstances and will only occur if the processor encounters an unrecoverable error.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   It is not recommended that the state of the processor be managed directly from within this method; requesting to start or stop the processor may result in</span>
        <span class="c">///</span><span class="c">   a deadlock scenario, especially if using the synchronous form of the call.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>protected override async</b> <a href="@1@netstandard/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="b99183586aa279e0" href="R/b99183586aa279e0.html" target="n" data-glyph="75,1" class="i method">OnPartitionProcessingStoppedAsync</a>(<a href="/Azure.Messaging.EventHubs/A.html#f166f8955ab127cc" class="t t">EventProcessorPartition</a> <span id="r83 rd" class="r83 r">partition</span>,
                                                                        <a href="/Azure.Messaging.EventHubs/A.html#79a7fa1c0b5a3dbd" class="t t">ProcessingStoppedReason</a> <span id="r84 rd" class="r84 r">reason</span>,
                                                                        <a href="@1@netstandard/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r85 rd" class="r85 r">cancellationToken</span>)
        {
            <span class="c">// Handlers cannot be changed while the processor is running; it is safe to check and call</span>
            <span class="c">// without capturing a local reference.</span>
 
            <b>if</b> (<a href="#18897a0effcb217c" class="i field">_partitionClosingAsync</a> != <b>null</b>)
            {
                <a href="/Azure.Messaging.EventHubs/A.html#00ac02b897003fee" class="k">var</a> <span id="r86 rd" class="r86 r">eventArgs</span> = <b>new</b> <a href="/Azure.Messaging.EventHubs/A.html#20db93348b8943e8" class="t constructor">PartitionClosingEventArgs</a>(<span class="r83 r">partition</span>.<a href="/Azure.Messaging.EventHubs/A.html#78ef0d1266ee7e2e" class="i property">PartitionId</a>, <span class="r84 r">reason</span>, <span class="r85 r">cancellationToken</span>);
                <b>await</b> <a href="#18897a0effcb217c" class="i field">_partitionClosingAsync</a>(<span class="r86 r">eventArgs</span>).<a href="@1@netstandard/A.html#9ca6b2f012ce7587" class="i method">ConfigureAwait</a>(<b>false</b>);
            }
 
            <a href="#e47d6704fcbf7d50" class="i field">PartitionStartingPositionDefaults</a>.<a href="@1@netstandard/A.html#19ffd03eb6d3bdff" class="i method">TryRemove</a>(<span class="r83 r">partition</span>.<a href="/Azure.Messaging.EventHubs/A.html#78ef0d1266ee7e2e" class="i property">PartitionId</a>, <b>out</b> <a href="/Azure.Messaging.EventHubs/A.html#97742fa7b7b6b68f" class="k">var</a> <b>_</b>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Creates a </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#a28da33a68dd9652" class="i property">StorageManager</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> to use for interacting with durable storage.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r87 r">checkpointStore</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The client responsible for interaction with durable storage, responsible for persisting checkpoints and load-balancing state.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">A </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#a28da33a68dd9652" class="i property">StorageManager</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> with the requested configuration.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>private</b> <a href="SharedSource/Processor/StorageManager.cs.html#4c3279872ba9c8f6" class="t t">StorageManager</a> <a id="ded260536a02ffa6" href="R/ded260536a02ffa6.html" target="n" data-glyph="76,1" class="i method">CreateStorageManager</a>(<a href="/Azure.Storage.Blobs/A.html#6bb2c165ee95c7d4" class="t t">BlobContainerClient</a> <span id="r87 rd" class="r87 r">checkpointStore</span>) =&gt; <b>new</b> <a href="SharedSource/BlobCheckpointStore/BlobsCheckpointStore.cs.html#e6595e9f6f971e22" class="t constructor">BlobsCheckpointStore</a>(<span class="r87 r">checkpointStore</span>, <a href="/Azure.Messaging.EventHubs/A.html#18887ae4162737a9" class="i property">RetryPolicy</a>);
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Processes the starting positions for checkpoints, ensuring that any overrides set by the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#daeb1808841368e4" class="i">PartitionInitializingAsync</a><span class="c">&quot;</span> <span class="c">/&gt;</span>
        <span class="c">///</span><span class="c">   handler are respected when no natural checkpoint exists for the partition.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r88 r">sourceCheckpoints</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The checkpoint set to process.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">An enumerable consisting of the </span><span class="c">&lt;</span><span class="c">paramref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r88 r">sourceCheckpoints</span><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> and a set of artificial checkpoints for any overrides applied to the starting position.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>private</b> <a href="@1@netstandard/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="/Azure.Messaging.EventHubs/A.html#a957ac02e2072bb9" class="t t">EventProcessorCheckpoint</a>&gt; <a id="df98b41ddd44e4a4" href="R/df98b41ddd44e4a4.html" target="n" data-glyph="76,1" class="i method">ProcessCheckpointStartingPositions</a>(<a href="@1@netstandard/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="/Azure.Messaging.EventHubs/A.html#a957ac02e2072bb9" class="t t">EventProcessorCheckpoint</a>&gt; <span id="r88 rd" class="r88 r">sourceCheckpoints</span>)
        {
            <a href="@1@netstandard/A.html#2d265edc718b158b" class="k">var</a> <span id="r89 rd" class="r89 r">knownCheckpoints</span> = <b>new</b> <a href="@1@netstandard/A.html#eca9ea30fa3b2c28" class="t constructor">HashSet</a>&lt;<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a>&gt;();
 
            <span class="c">// Return the checkpoints and track which partitions they belong to.</span>
 
            <b>foreach</b> (<a href="/Azure.Messaging.EventHubs/A.html#a957ac02e2072bb9" class="k">var</a> <span id="r90 rd" class="r90 r">checkpoint</span> <b>in</b> <span class="r88 r">sourceCheckpoints</span>)
            {
                <span class="r89 r">knownCheckpoints</span>.<a href="@1@netstandard/A.html#43a2b651926474a7" class="i method">Add</a>(<span class="r90 r">checkpoint</span>.<a href="/Azure.Messaging.EventHubs/A.html#145e376eab80843c" class="i property">PartitionId</a>);
                <b>yield</b> <b>return</b> <span class="r90 r">checkpoint</span>;
            }
 
            <span class="c">// For any partitions with custom default starting point, emit an artificial</span>
            <span class="c">// checkpoint if a natural checkpoint did not exist.</span>
 
            <b>foreach</b> (<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r91 rd" class="r91 r">partition</span> <b>in</b> <a href="#e47d6704fcbf7d50" class="i field">PartitionStartingPositionDefaults</a>.<a href="@1@netstandard/A.html#f162e315ef36115b" class="i property">Keys</a>)
            {
                <b>if</b> (!<span class="r89 r">knownCheckpoints</span>.<a href="@1@netstandard/A.html#06d905a0ac76e4f5" class="i method">Contains</a>(<span class="r91 r">partition</span>))
                {
                    <b>yield</b> <b>return</b> <a href="#eb16d40f23440013" class="i method">CreateCheckpointWithDefaultStartingPosition</a>(<span class="r91 r">partition</span>);
                }
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Creates a checkpoint with a default starting position set.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r92 r">partitionId</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The partition id.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">Returns an artificial checkpoint for a provided partition with a starting position set to </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#f8be204f8af38f5b" class="i field">DefaultStartingPosition</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c">.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>private</b> <a href="/Azure.Messaging.EventHubs/A.html#a957ac02e2072bb9" class="t t">EventProcessorCheckpoint</a> <a id="eb16d40f23440013" href="R/eb16d40f23440013.html" target="n" data-glyph="76,1" class="i method">CreateCheckpointWithDefaultStartingPosition</a>(<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r92 rd" class="r92 r">partitionId</span>)
        {
            <b>return</b> <b>new</b> <a href="/Azure.Messaging.EventHubs/A.html#f0f814e1d10a319f" class="t constructor">EventProcessorCheckpoint</a>
            {
                <a href="/Azure.Messaging.EventHubs/A.html#47fe22648355061c" class="i property">FullyQualifiedNamespace</a> = <a href="#6305812bd357fbc9" class="i property">FullyQualifiedNamespace</a>,
                <a href="/Azure.Messaging.EventHubs/A.html#00530c9a988fc47c" class="i property">EventHubName</a> = <a href="#bdd8181744fe773a" class="i property">EventHubName</a>,
                <a href="/Azure.Messaging.EventHubs/A.html#5d53404f5a979b96" class="i property">ConsumerGroup</a> = <a href="#44444c3e706418bb" class="i property">ConsumerGroup</a>,
                <a href="/Azure.Messaging.EventHubs/A.html#145e376eab80843c" class="i property">PartitionId</a> = <span class="r92 r">partitionId</span>,
                <a href="/Azure.Messaging.EventHubs/A.html#e53fa1aec8035654" class="i property">StartingPosition</a> = <a href="#e47d6704fcbf7d50" class="i field">PartitionStartingPositionDefaults</a>.<a href="@1@netstandard/A.html#4d0f4ac22dbeaf08" class="i method">TryGetValue</a>(<span class="r92 r">partitionId</span>, <b>out</b> <a href="/Azure.Messaging.EventHubs/A.html#97742fa7b7b6b68f" class="t t">EventPosition</a> <span id="r93 rd" class="r93 r">position</span>) ? <span class="r93 r">position</span> : <a href="#f8be204f8af38f5b" class="i field">DefaultStartingPosition</a>
            };
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Invokes a specified action only if this </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> instance is not running.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r94 r">action</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The action to invoke.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@1@netstandard/A.html#beac22dfca574cd4" class="t t">InvalidOperationException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Occurs when this method is invoked while the event processor is running.</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>private void</b> <a id="77c1ad1891ca4969" href="R/77c1ad1891ca4969.html" target="n" data-glyph="76,1" class="i method">EnsureNotRunningAndInvoke</a>(<a href="@1@netstandard/A.html#9147ae6f76643aae" class="t t">Action</a> <span id="r94 rd" class="r94 r">action</span>)
        {
            <a href="@1@netstandard/A.html#f1b135ff6c380b37" class="k">var</a> <span id="r95 rd" class="r95 r">releaseGuard</span> = <b>false</b>;
 
            <b>if</b> (!<a href="#3524deb3dde4b0a2" class="i property">IsRunning</a>)
            {
                <b>try</b>
                {
                    <a href="#2709050b118f875c" class="i field">ProcessorStatusGuard</a>.<a href="@1@netstandard/A.html#5897ac2ece381eb7" class="i method">Wait</a>();
                    <span class="r95 r">releaseGuard</span> = <b>true</b>;
 
                    <b>if</b> (!<a href="#3524deb3dde4b0a2" class="i property">IsRunning</a>)
                    {
                        <span class="r94 r">action</span>?.<a href="@1@netstandard/A.html#6fbb51427c383a3a" class="i method">Invoke</a>();
                        <b>return</b>;
                    }
                }
                <b>finally</b>
                {
                    <b>if</b> (<span class="r95 r">releaseGuard</span>)
                    {
                        <a href="#2709050b118f875c" class="i field">ProcessorStatusGuard</a>.<a href="@1@netstandard/A.html#f7527810bcfc0842" class="i method">Release</a>();
                    }
                }
            }
 
            <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#265d72f49e915224" class="t constructor">InvalidOperationException</a>(<a href="Resources.Designer.cs.html#0f60eafa1a3b4f36" class="t t">Resources</a>.<a href="Resources.Designer.cs.html#2fe6f50fe66926c1" class="i property">RunningEventProcessorCannotPerformOperation</a>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Creates the set of options to pass to the base </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c">.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r96 r">clientOptions</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The set of client options for the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#9008d12c4d71cbcc" class="t t">EventProcessorClient</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> instance.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">The set of options to use for the base processor.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <b>private static</b> <a href="/Azure.Messaging.EventHubs/A.html#ff5042f1902a1c50" class="t t">EventProcessorOptions</a> <a id="ae5609ba393be3dd" href="R/ae5609ba393be3dd.html" target="n" data-glyph="76,1" class="i method">CreateOptions</a>(<a href="EventProcessorClientOptions.cs.html#2864c3d44b8ecdfa" class="t t">EventProcessorClientOptions</a> <span id="r96 rd" class="r96 r">clientOptions</span>)
        {
            <span class="r96 r">clientOptions</span> ??= <a href="#df17fae7f2c8cc9b" class="i field">DefaultClientOptions</a>;
 
            <b>return</b> <b>new</b> <a href="/Azure.Messaging.EventHubs/A.html#d8d65f58ba26fc53" class="t constructor">EventProcessorOptions</a>
            {
                <a href="/Azure.Messaging.EventHubs/A.html#9602fa6a24a93182" class="i property">ConnectionOptions</a> = <span class="r96 r">clientOptions</span>.<a href="EventProcessorClientOptions.cs.html#4064eb834875108d" class="i property">ConnectionOptions</a>.<a href="SharedSource/Core/EventHubConnectionOptionsExtensions.cs.html#bbee818bed7377a6" class="i method">Clone</a>(),
                <a href="/Azure.Messaging.EventHubs/A.html#efbff97f25bc98e9" class="i property">RetryOptions</a> = <span class="r96 r">clientOptions</span>.<a href="EventProcessorClientOptions.cs.html#bee86c0fd0d5ddf8" class="i property">RetryOptions</a>.<a href="SharedSource/Core/EventHubsRetryOptionsExtensions.cs.html#9b64fed84e0f170a" class="i method">Clone</a>(),
                <a href="/Azure.Messaging.EventHubs/A.html#8aa652e7bcb51806" class="i property">Identifier</a> = <span class="r96 r">clientOptions</span>.<a href="EventProcessorClientOptions.cs.html#bc95c1607cd79a09" class="i property">Identifier</a>,
                <a href="/Azure.Messaging.EventHubs/A.html#0a82497014b9abb1" class="i property">MaximumWaitTime</a> = <span class="r96 r">clientOptions</span>.<a href="EventProcessorClientOptions.cs.html#0e62f66faaa2dbf7" class="i property">MaximumWaitTime</a>,
                <a href="/Azure.Messaging.EventHubs/A.html#de96937c4bdb5883" class="i property">TrackLastEnqueuedEventProperties</a> = <span class="r96 r">clientOptions</span>.<a href="EventProcessorClientOptions.cs.html#d935ecbd28db6cfd" class="i property">TrackLastEnqueuedEventProperties</a>,
                <a href="/Azure.Messaging.EventHubs/A.html#440f89e64c38d806" class="i property">LoadBalancingStrategy</a> = <span class="r96 r">clientOptions</span>.<a href="EventProcessorClientOptions.cs.html#44afbc1733ea5001" class="i property">LoadBalancingStrategy</a>,
                <a href="/Azure.Messaging.EventHubs/A.html#d7f12816f1250e29" class="i property">PrefetchCount</a> = <span class="r96 r">clientOptions</span>.<a href="EventProcessorClientOptions.cs.html#7824e2dec652e6eb" class="i property">PrefetchCount</a>,
                <a href="/Azure.Messaging.EventHubs/A.html#9eb79030ca610dc0" class="i property">PrefetchSizeInBytes</a> = <span class="r96 r">clientOptions</span>.<a href="EventProcessorClientOptions.cs.html#3bfb35fde0083b1f" class="i property">PrefetchSizeInBytes</a>,
                <a href="/Azure.Messaging.EventHubs/A.html#683a6b0c2592ec66" class="i property">LoadBalancingUpdateInterval</a> = <span class="r96 r">clientOptions</span>.<a href="EventProcessorClientOptions.cs.html#1d1d899178a49dd0" class="i property">LoadBalancingUpdateInterval</a>,
                <a href="/Azure.Messaging.EventHubs/A.html#f9c560e2baa1fef3" class="i property">PartitionOwnershipExpirationInterval</a> = <span class="r96 r">clientOptions</span>.<a href="EventProcessorClientOptions.cs.html#eea67145f3910137" class="i property">PartitionOwnershipExpirationInterval</a>
            };
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Represents a basic partition context for event processing within the processor client.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">seealso</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">Azure</span>.<span class="i n">Messaging</span>.<span class="i n">EventHubs</span>.<span class="i n">Consumer</span>.<a href="/Azure.Messaging.EventHubs/A.html#224668d23057d29b" class="t t">PartitionContext</a><span class="c">&quot;</span> <span class="c">/&gt;</span>
        <span class="c">///</span>
        <b>private class</b> <a id="93280598e6c1a076" href="R/93280598e6c1a076.html" target="n" data-glyph="4,1" class="t t">ProcessorPartitionContext</a> : <a href="/Azure.Messaging.EventHubs/A.html#224668d23057d29b" class="t t">PartitionContext</a>
        {
            <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span><span class="c">A function that can be used to read the last enqueued event properties for the partition.</span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
            <b>private</b> <a href="@1@netstandard/A.html#87d60abb7092d5a4" class="t t">Func</a>&lt;<a href="/Azure.Messaging.EventHubs/A.html#e54b900e1c5c3c73" class="t t">LastEnqueuedEventProperties</a>&gt; <a id="e10a39d06873f25c" href="R/e10a39d06873f25c.html" target="n" data-glyph="46,2" class="i field">_readLastEnqueuedEventProperties</a>;
 
            <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
            <span class="c">///</span><span class="c">   Initializes a new instance of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#30b507a20fd6b9ba" class="t t">EmptyPartitionContext</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> class.</span>
            <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
            <span class="c">///</span>
            <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r97 r">partitionId</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The identifier of the partition that the context represents.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
            <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r98 r">readLastEnqueuedEventProperties</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">A function that can be used to read the last enqueued event properties for the partition.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
            <span class="c">///</span>
            <b>public</b> <a id="b127db0c88052369" href="R/b127db0c88052369.html" target="n" data-glyph="72,2" class="t constructor">ProcessorPartitionContext</a>(<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r97 rd" class="r97 r">partitionId</span>,
                                             <a href="@1@netstandard/A.html#87d60abb7092d5a4" class="t t">Func</a>&lt;<a href="/Azure.Messaging.EventHubs/A.html#e54b900e1c5c3c73" class="t t">LastEnqueuedEventProperties</a>&gt; <span id="r98 rd" class="r98 r">readLastEnqueuedEventProperties</span>) : <a href="/Azure.Messaging.EventHubs/A.html#d27f703e95b42e38" class="k">base</a>(<span class="r97 r">partitionId</span>)
            {
                <a href="#e10a39d06873f25c" class="i field">_readLastEnqueuedEventProperties</a> = <span class="r98 r">readLastEnqueuedEventProperties</span>;
            }
 
            <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
            <span class="c">///</span><span class="c">   A set of information about the last enqueued event of a partition, not available for the</span>
            <span class="c">///</span><span class="c">   empty context.</span>
            <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
            <span class="c">///</span>
            <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">The set of properties for the last event that was enqueued to the partition.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
            <span class="c">///</span>
            <b>public override</b> <a href="/Azure.Messaging.EventHubs/A.html#e54b900e1c5c3c73" class="t t">LastEnqueuedEventProperties</a> <a id="a009414e1505e641" href="R/a009414e1505e641.html" target="n" data-glyph="72,2" class="i method">ReadLastEnqueuedEventProperties</a>() =&gt; <a href="#e10a39d06873f25c" class="i field">_readLastEnqueuedEventProperties</a>();
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c">   Represents a basic partition context for event processing when the</span>
        <span class="c">///</span><span class="c">   full context was not available.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">seealso</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">Azure</span>.<span class="i n">Messaging</span>.<span class="i n">EventHubs</span>.<span class="i n">Consumer</span>.<a href="/Azure.Messaging.EventHubs/A.html#224668d23057d29b" class="t t">PartitionContext</a><span class="c">&quot;</span> <span class="c">/&gt;</span>
        <span class="c">///</span>
        <b>private class</b> <a id="30b507a20fd6b9ba" href="R/30b507a20fd6b9ba.html" target="n" data-glyph="4,1" class="t t">EmptyPartitionContext</a> : <a href="/Azure.Messaging.EventHubs/A.html#224668d23057d29b" class="t t">PartitionContext</a>
        {
            <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
            <span class="c">///</span><span class="c">   Initializes a new instance of the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#30b507a20fd6b9ba" class="t t">EmptyPartitionContext</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c"> class.</span>
            <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
            <span class="c">///</span>
            <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r99 r">partitionId</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The identifier of the partition that the context represents.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
            <span class="c">///</span>
            <b>public</b> <a id="df31bcf295771bc4" href="R/df31bcf295771bc4.html" target="n" data-glyph="72,2" class="t constructor">EmptyPartitionContext</a>(<a href="@1@netstandard/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r99 rd" class="r99 r">partitionId</span>) : <a href="/Azure.Messaging.EventHubs/A.html#d27f703e95b42e38" class="k">base</a>(<span class="r99 r">partitionId</span>)
            {
            }
 
            <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
            <span class="c">///</span><span class="c">   A set of information about the last enqueued event of a partition, not available for the</span>
            <span class="c">///</span><span class="c">   empty context.</span>
            <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
            <span class="c">///</span>
            <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">The set of properties for the last event that was enqueued to the partition.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
            <span class="c">///</span>
            <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@1@netstandard/A.html#beac22dfca574cd4" class="t t">InvalidOperationException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The method call is not available on the </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="#30b507a20fd6b9ba" class="t t">EmptyPartitionContext</a><span class="c">&quot;</span> <span class="c">/&gt;</span><span class="c">.</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
            <span class="c">///</span>
            <b>public override</b> <a href="/Azure.Messaging.EventHubs/A.html#e54b900e1c5c3c73" class="t t">LastEnqueuedEventProperties</a> <a id="3296626684b84dd1" href="R/3296626684b84dd1.html" target="n" data-glyph="72,2" class="i method">ReadLastEnqueuedEventProperties</a>() =&gt;
                <b>throw</b> <b>new</b> <a href="@1@netstandard/A.html#265d72f49e915224" class="t constructor">InvalidOperationException</a>(<a href="Resources.Designer.cs.html#0f60eafa1a3b4f36" class="t t">Resources</a>.<a href="Resources.Designer.cs.html#9052b3e01761ce88" class="i property">CannotReadLastEnqueuedEventPropertiesWithoutEvent</a>);
        }
    }
}
</pre></td></tr></table></div></body></html>

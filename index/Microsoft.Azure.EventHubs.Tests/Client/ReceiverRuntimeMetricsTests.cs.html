<!DOCTYPE html>
<html><head><title>ReceiverRuntimeMetricsTests.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(127);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Microsoft.Azure.EventHubs.Tests/Client/ReceiverRuntimeMetricsTests.cs" target="_top">Client\ReceiverRuntimeMetricsTests.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Microsoft.Azure.EventHubs.Tests" target="_top">Microsoft.Azure.EventHubs.Tests.csproj</a> (Microsoft.Azure.EventHubs.Tests)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft. All rights reserved.</span>
<span class="c">// Licensed under the MIT license. See LICENSE file in the project root for full license information.</span>
 
<b>namespace</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">EventHubs</span>.<span class="i n">Tests</span>.<span class="i n">Client</span>
{
    <b>using</b> <span class="i n">System</span>;
    <b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
    <b>using</b> <span class="i n">System</span>.<span class="i n">Text</span>;
    <b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>.<span class="i n">Tasks</span>;
    <b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">EventHubs</span>;
    <b>using</b> <span class="i">Xunit</span>;
 
    <b>public class</b> <a id="85455b52f88ceae1" href="../R/../../0000000000.html" target="n" data-glyph="0,0" class="t t"><span id="c27e5088e6d7a6d3">ReceiverRuntimeMetricsTests</span></a> : <a href="ClientTestBase.cs.html#6c89701b327e289f" class="t t">ClientTestBase</a>
    {
        <b>readonly string</b> <a id="2f938811621ca318" href="../R/2f938811621ca318.html" target="n" data-glyph="46,1" class="i field">targetPartitionId</a> = <span class="s">&quot;1&quot;</span>;
        <b>readonly string</b> <a id="71ba81b9232db2ce" href="../R/71ba81b9232db2ce.html" target="n" data-glyph="46,1" class="i field">connectionString</a> = <span class="s">&quot;Endpoint=sb://somehost.com;SharedAccessKeyName=ABC;SharedAccessKey=123;EntityPath=somehub&quot;</span>;
 
        [<span class="i">Fact</span>]
        [<span class="i">DisplayTestMethodName</span>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="75b453c9c5acd77f" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">BasicValidation</a>()
        {
            <a href="MockEventHubClient.cs.html#39f1f47af8bcfc8c" class="k">var</a> <span id="r0 rd" class="r0 r">mockClient</span> = <b>new</b> <a href="MockEventHubClient.cs.html#329b4abac6e540d5" class="t constructor">MockEventHubClient</a>(<b>new</b> <span class="t">EventHubsConnectionStringBuilder</span>(<a href="#71ba81b9232db2ce" class="i field">connectionString</a>));
            <a href="/Microsoft.Azure.EventHubs/A.html#c6301acd46b0811a" class="k">var</a> <span id="r1 rd" class="r1 r">partitionReceiver</span> = <span class="r0 r">mockClient</span>.<span class="i">CreateReceiver</span>(<span class="s">&quot;consumerGroup&quot;</span>, <a href="#2f938811621ca318" class="i field">targetPartitionId</a>, <a href="/Microsoft.Azure.EventHubs/A.html#5c55f1ce5bfdf68d" class="t t">EventPosition</a>.<a href="/Microsoft.Azure.EventHubs/A.html#1869cec8b62a47a2" class="i method">FromStart</a>(), <b>new</b> <span class="t">ReceiverOptions</span> { <a href="/Microsoft.Azure.EventHubs/A.html#1f6ab35f7307a573" class="i property">EnableReceiverRuntimeMetric</a> = <b>true</b> });
            <a href="/Microsoft.Azure.EventHubs/A.html#e258527873f12d05" class="k">var</a> <span id="r2 rd" class="r2 r">partitionSender</span> = <span class="r0 r">mockClient</span>.<span class="i">CreateEventSender</span>(<a href="#2f938811621ca318" class="i field">targetPartitionId</a>);
 
            <b>await</b> <span class="r2 r">partitionSender</span>.<span class="i">SendAsync</span>(<b>new</b> <a href="/Microsoft.Azure.EventHubs/A.html#f56ed6e805f7061b" class="t t">EventData</a>[] { <b>new</b> <span class="t">EventData</span>(<a href="@0@mscorlib/A.html#3b6090c501893c25" class="t t">Encoding</a>.<a href="@0@mscorlib/A.html#a10eb90a3d884500" class="i property">UTF8</a>.<a href="@0@mscorlib/A.html#83f2d2c6f22db1a9" class="i method">GetBytes</a>(<span class="s">&quot;foo&quot;</span>)) }, <a href="#2f938811621ca318" class="i field">targetPartitionId</a>);
 
            <span class="c">// Get the partition runtime info so we can compare with runtime metrics.</span>
            <b>var</b> <span id="r3 rd" class="r3 r">pInfo</span> = <b>await</b> <span class="r0 r">mockClient</span>.<span class="i">GetPartitionRuntimeInformationAsync</span>(<a href="#2f938811621ca318" class="i field">targetPartitionId</a>);
 
            <b>await</b> <span class="i">ValidateEnabledBehavior</span>(<span class="r1 r">partitionReceiver</span>, <span class="r3 r">pInfo</span>);
        }
 
        [<span class="i">Fact</span>]
        [<span class="i">DisplayTestMethodName</span>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="7a995edeffbb2d0d" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DefaultBehaviorDisabled</a>()
        {
            <a href="MockEventHubClient.cs.html#39f1f47af8bcfc8c" class="k">var</a> <span id="r4 rd" class="r4 r">mockClient</span> = <b>new</b> <a href="MockEventHubClient.cs.html#329b4abac6e540d5" class="t constructor">MockEventHubClient</a>(<b>new</b> <span class="t">EventHubsConnectionStringBuilder</span>(<a href="#71ba81b9232db2ce" class="i field">connectionString</a>));
            <a href="/Microsoft.Azure.EventHubs/A.html#c6301acd46b0811a" class="k">var</a> <span id="r5 rd" class="r5 r">partitionReceiver</span> = <span class="r4 r">mockClient</span>.<span class="i">CreateReceiver</span>(<span class="s">&quot;consumerGroup&quot;</span>, <a href="#2f938811621ca318" class="i field">targetPartitionId</a>, <a href="/Microsoft.Azure.EventHubs/A.html#5c55f1ce5bfdf68d" class="t t">EventPosition</a>.<a href="/Microsoft.Azure.EventHubs/A.html#1869cec8b62a47a2" class="i method">FromStart</a>());
            <a href="/Microsoft.Azure.EventHubs/A.html#e258527873f12d05" class="k">var</a> <span id="r6 rd" class="r6 r">partitionSender</span> = <span class="r4 r">mockClient</span>.<span class="i">CreateEventSender</span>(<a href="#2f938811621ca318" class="i field">targetPartitionId</a>);
 
            <b>await</b> <span class="r6 r">partitionSender</span>.<span class="i">SendAsync</span>(<b>new</b> <a href="/Microsoft.Azure.EventHubs/A.html#f56ed6e805f7061b" class="t t">EventData</a>[] { <b>new</b> <span class="t">EventData</span>(<a href="@0@mscorlib/A.html#3b6090c501893c25" class="t t">Encoding</a>.<a href="@0@mscorlib/A.html#a10eb90a3d884500" class="i property">UTF8</a>.<a href="@0@mscorlib/A.html#83f2d2c6f22db1a9" class="i method">GetBytes</a>(<span class="s">&quot;foo&quot;</span>)) }, <a href="#2f938811621ca318" class="i field">targetPartitionId</a>);
 
            <b>await</b> <a href="#f9867ec171dff901" class="i method">ValidateDisabledBehavior</a>(<span class="r5 r">partitionReceiver</span>);
        }
 
        [<span class="i">Fact</span>]
        [<span class="i">DisplayTestMethodName</span>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="3e3444c647b706f2" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DisableWithReceiverOptions</a>()
        {
            <a href="MockEventHubClient.cs.html#39f1f47af8bcfc8c" class="k">var</a> <span id="r7 rd" class="r7 r">mockClient</span> = <b>new</b> <a href="MockEventHubClient.cs.html#329b4abac6e540d5" class="t constructor">MockEventHubClient</a>(<b>new</b> <span class="t">EventHubsConnectionStringBuilder</span>(<a href="#71ba81b9232db2ce" class="i field">connectionString</a>));
            <a href="/Microsoft.Azure.EventHubs/A.html#c6301acd46b0811a" class="k">var</a> <span id="r8 rd" class="r8 r">partitionReceiver</span> = <span class="r7 r">mockClient</span>.<span class="i">CreateReceiver</span>(<span class="s">&quot;consumerGroup&quot;</span>, <a href="#2f938811621ca318" class="i field">targetPartitionId</a>, <a href="/Microsoft.Azure.EventHubs/A.html#5c55f1ce5bfdf68d" class="t t">EventPosition</a>.<a href="/Microsoft.Azure.EventHubs/A.html#1869cec8b62a47a2" class="i method">FromStart</a>(), <b>new</b> <span class="t">ReceiverOptions</span> { <a href="/Microsoft.Azure.EventHubs/A.html#1f6ab35f7307a573" class="i property">EnableReceiverRuntimeMetric</a> = <b>false</b> });
            <a href="/Microsoft.Azure.EventHubs/A.html#e258527873f12d05" class="k">var</a> <span id="r9 rd" class="r9 r">partitionSender</span> = <span class="r7 r">mockClient</span>.<span class="i">CreateEventSender</span>(<a href="#2f938811621ca318" class="i field">targetPartitionId</a>);
 
            <b>await</b> <span class="r9 r">partitionSender</span>.<span class="i">SendAsync</span>(<b>new</b> <a href="/Microsoft.Azure.EventHubs/A.html#f56ed6e805f7061b" class="t t">EventData</a>[] { <b>new</b> <span class="t">EventData</span>(<a href="@0@mscorlib/A.html#3b6090c501893c25" class="t t">Encoding</a>.<a href="@0@mscorlib/A.html#a10eb90a3d884500" class="i property">UTF8</a>.<a href="@0@mscorlib/A.html#83f2d2c6f22db1a9" class="i method">GetBytes</a>(<span class="s">&quot;foo&quot;</span>)) }, <a href="#2f938811621ca318" class="i field">targetPartitionId</a>);
 
            <b>await</b> <a href="#f9867ec171dff901" class="i method">ValidateDisabledBehavior</a>(<span class="r8 r">partitionReceiver</span>);
        }
 
        [<span class="i">Fact</span>]
        [<span class="i">DisplayTestMethodName</span>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="165cfca9d170733d" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ClientSettingInherited</a>()
        {
            <a href="MockEventHubClient.cs.html#39f1f47af8bcfc8c" class="k">var</a> <span id="r10 rd" class="r10 r">mockClient</span> = <b>new</b> <a href="MockEventHubClient.cs.html#329b4abac6e540d5" class="t constructor">MockEventHubClient</a>(<b>new</b> <span class="t">EventHubsConnectionStringBuilder</span>(<a href="#71ba81b9232db2ce" class="i field">connectionString</a>));
 
            <span class="c">// Enable runtime metrics on the client.</span>
            <span class="r10 r">mockClient</span>.<a href="/Microsoft.Azure.EventHubs/A.html#5bf4054cc2318221" class="i property">EnableReceiverRuntimeMetric</a> = <b>true</b>;
 
            <a href="/Microsoft.Azure.EventHubs/A.html#c6301acd46b0811a" class="k">var</a> <span id="r11 rd" class="r11 r">partitionReceiver1</span> = <span class="r10 r">mockClient</span>.<span class="i">CreateReceiver</span>(<span class="s">&quot;consumerGroup&quot;</span>, <a href="#2f938811621ca318" class="i field">targetPartitionId</a>, <a href="/Microsoft.Azure.EventHubs/A.html#5c55f1ce5bfdf68d" class="t t">EventPosition</a>.<a href="/Microsoft.Azure.EventHubs/A.html#1869cec8b62a47a2" class="i method">FromStart</a>());
            <a href="/Microsoft.Azure.EventHubs/A.html#c6301acd46b0811a" class="k">var</a> <span id="r12 rd" class="r12 r">partitionReceiver2</span> = <span class="r10 r">mockClient</span>.<span class="i">CreateReceiver</span>(<span class="s">&quot;consumerGroup&quot;</span>, <a href="#2f938811621ca318" class="i field">targetPartitionId</a>, <a href="/Microsoft.Azure.EventHubs/A.html#5c55f1ce5bfdf68d" class="t t">EventPosition</a>.<a href="/Microsoft.Azure.EventHubs/A.html#1869cec8b62a47a2" class="i method">FromStart</a>());
            <a href="/Microsoft.Azure.EventHubs/A.html#e258527873f12d05" class="k">var</a> <span id="r13 rd" class="r13 r">partitionSender</span> = <span class="r10 r">mockClient</span>.<span class="i">CreateEventSender</span>(<a href="#2f938811621ca318" class="i field">targetPartitionId</a>);
 
            <b>await</b> <span class="r13 r">partitionSender</span>.<span class="i">SendAsync</span>(
                <a href="@0@System.Core/A.html#577032c8811e20d3" class="t t">Enumerable</a>.<a href="@0@System.Core/A.html#fda9d378095a6464" class="i method">Range</a>(1, 10)
                    .<span class="i">Select</span>(<span id="r14 rd" class="r14 r">number</span> =&gt; <b>new</b> <span class="t">EventData</span>(<a href="@0@mscorlib/A.html#3b6090c501893c25" class="t t">Encoding</a>.<a href="@0@mscorlib/A.html#a10eb90a3d884500" class="i property">UTF8</a>.<a href="@0@mscorlib/A.html#83f2d2c6f22db1a9" class="i method">GetBytes</a>(<span class="r14 r">number</span>.<a href="@0@mscorlib/A.html#8d6f2d8bc0589463" class="i method">ToString</a>()))
                ), <a href="#2f938811621ca318" class="i field">targetPartitionId</a>);
 
            <span class="c">// Get the partition runtime info so we can compare with runtime metrics.</span>
            <b>var</b> <span id="r15 rd" class="r15 r">pInfo</span> = <b>await</b> <span class="r10 r">mockClient</span>.<span class="i">GetPartitionRuntimeInformationAsync</span>(<a href="#2f938811621ca318" class="i field">targetPartitionId</a>);
 
            <b>await</b> <span class="i">ValidateEnabledBehavior</span>(<span class="r11 r">partitionReceiver1</span>, <span class="r15 r">pInfo</span>);
            <b>await</b> <span class="i">ValidateEnabledBehavior</span>(<span class="r12 r">partitionReceiver2</span>, <span class="r15 r">pInfo</span>);
 
        }
 
        <b>private async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="65d7207b8b0a78ed" href="../R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">ValidateEnabledBehavior</a>(<a href="/Microsoft.Azure.EventHubs/A.html#c6301acd46b0811a" class="t t">PartitionReceiver</a> <span id="r16 rd" class="r16 r">partitionReceiver</span>, <a href="/Microsoft.Azure.EventHubs/A.html#80a307eafc665477" class="t t">EventHubPartitionRuntimeInformation</a> <span id="r17 rd" class="r17 r">pInfo</span>)
        {
            <span class="i">Assert</span>.<span class="i">True</span>(<span class="r16 r">partitionReceiver</span>.<a href="/Microsoft.Azure.EventHubs/A.html#f9d085f517fbf112" class="i property">ReceiverRuntimeMetricEnabled</a> == <b>true</b>, <span class="s">&quot;ReceiverRuntimeMetricEnabled == false&quot;</span>);
 
            <span class="c">// Receive a message and validate RuntimeInfo is set.</span>
            <b>var</b> <span id="r18 rd" class="r18 r">messages</span> = <b>await</b> <span class="r16 r">partitionReceiver</span>.<span class="i">ReceiveAsync</span>(1);
            <span class="i">Assert</span>.<span class="i">True</span>(<span class="r18 r">messages</span> != <b>null</b>, <span class="s">&quot;Failed to receive a message.&quot;</span>);
 
            <b>var</b> <span id="r19 rd" class="r19 r">message</span> = <span class="r18 r">messages</span>.<span class="i">Single</span>();
 
            <span class="i">Assert</span>.<span class="i">False</span>(<span class="r17 r">pInfo</span>.<a href="/Microsoft.Azure.EventHubs/A.html#9dec9b46c3cfc0f4" class="i property">IsEmpty</a>, <span class="s">$&quot;</span><span class="s">pInfo.IsEmpty == </span>{<span class="r17 r">pInfo</span>.<a href="/Microsoft.Azure.EventHubs/A.html#9dec9b46c3cfc0f4" class="i property">IsEmpty</a>}<span class="s">&quot;</span>);
            <span class="i">Assert</span>.<span class="i">True</span>(<span class="r16 r">partitionReceiver</span>.<a href="/Microsoft.Azure.EventHubs/A.html#1a3b6e7a3af58e20" class="i property">RuntimeInfo</a>.<a href="/Microsoft.Azure.EventHubs/A.html#bb168e01d740e50c" class="i property">LastEnqueuedOffset</a> == <span class="r17 r">pInfo</span>.<a href="/Microsoft.Azure.EventHubs/A.html#afbb254953bdbafd" class="i property">LastEnqueuedOffset</a>,
                <span class="s">$&quot;</span><span class="s">FAILED partitionReceiver.RuntimeInfo.LastEnqueuedOffset == </span>{<span class="r16 r">partitionReceiver</span>.<a href="/Microsoft.Azure.EventHubs/A.html#1a3b6e7a3af58e20" class="i property">RuntimeInfo</a>.<a href="/Microsoft.Azure.EventHubs/A.html#bb168e01d740e50c" class="i property">LastEnqueuedOffset</a>}<span class="s">&quot;</span>);
            <span class="i">Assert</span>.<span class="i">True</span>(<span class="r16 r">partitionReceiver</span>.<a href="/Microsoft.Azure.EventHubs/A.html#1a3b6e7a3af58e20" class="i property">RuntimeInfo</a>.<a href="/Microsoft.Azure.EventHubs/A.html#c778bf5b28a5426b" class="i property">LastEnqueuedTimeUtc</a> == <span class="r17 r">pInfo</span>.<a href="/Microsoft.Azure.EventHubs/A.html#35db5dc248f7c75f" class="i property">LastEnqueuedTimeUtc</a>,
                <span class="s">$&quot;</span><span class="s">FAILED partitionReceiver.RuntimeInfo.LastEnqueuedTimeUtc == </span>{<span class="r16 r">partitionReceiver</span>.<a href="/Microsoft.Azure.EventHubs/A.html#1a3b6e7a3af58e20" class="i property">RuntimeInfo</a>.<a href="/Microsoft.Azure.EventHubs/A.html#c778bf5b28a5426b" class="i property">LastEnqueuedTimeUtc</a>}<span class="s">&quot;</span>);
            <span class="i">Assert</span>.<span class="i">True</span>(<span class="r16 r">partitionReceiver</span>.<a href="/Microsoft.Azure.EventHubs/A.html#1a3b6e7a3af58e20" class="i property">RuntimeInfo</a>.<a href="/Microsoft.Azure.EventHubs/A.html#53f35fb9996a4159" class="i property">LastSequenceNumber</a> == <span class="r17 r">pInfo</span>.<a href="/Microsoft.Azure.EventHubs/A.html#ca46b67d9444a696" class="i property">LastEnqueuedSequenceNumber</a>,
                <span class="s">$&quot;</span><span class="s">FAILED partitionReceiver.RuntimeInfo.LastSequenceNumber == </span>{<span class="r16 r">partitionReceiver</span>.<a href="/Microsoft.Azure.EventHubs/A.html#1a3b6e7a3af58e20" class="i property">RuntimeInfo</a>.<a href="/Microsoft.Azure.EventHubs/A.html#53f35fb9996a4159" class="i property">LastSequenceNumber</a>}<span class="s">&quot;</span>);
            <span class="i">Assert</span>.<span class="i">True</span>(<span class="r16 r">partitionReceiver</span>.<a href="/Microsoft.Azure.EventHubs/A.html#1a3b6e7a3af58e20" class="i property">RuntimeInfo</a>.<a href="/Microsoft.Azure.EventHubs/A.html#9082e73b35ac882c" class="i property">RetrievalTime</a> &gt; <a href="@0@mscorlib/A.html#df6b1eba7461813b" class="t t">DateTime</a>.<a href="@0@mscorlib/A.html#b0d5e4c9a8d4ddac" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#4a8bd6c0b5c72d81" class="i method">AddSeconds</a>(-60),
                <span class="s">$&quot;</span><span class="s">FAILED partitionReceiver.RuntimeInfo.RetrievalTime == </span>{<span class="r16 r">partitionReceiver</span>.<a href="/Microsoft.Azure.EventHubs/A.html#1a3b6e7a3af58e20" class="i property">RuntimeInfo</a>.<a href="/Microsoft.Azure.EventHubs/A.html#9082e73b35ac882c" class="i property">RetrievalTime</a>}<span class="s">&quot;</span>);
            <span class="i">Assert</span>.<span class="i">True</span>(<span class="r16 r">partitionReceiver</span>.<a href="/Microsoft.Azure.EventHubs/A.html#1a3b6e7a3af58e20" class="i property">RuntimeInfo</a>.<a href="/Microsoft.Azure.EventHubs/A.html#3a59ed77dd9eaa06" class="i property">PartitionId</a> == <span class="r16 r">partitionReceiver</span>.<a href="/Microsoft.Azure.EventHubs/A.html#470835fa67813644" class="i property">PartitionId</a>,
                <span class="s">$&quot;</span><span class="s">FAILED partitionReceiver.RuntimeInfo.PartitionId == </span>{<span class="r16 r">partitionReceiver</span>.<a href="/Microsoft.Azure.EventHubs/A.html#1a3b6e7a3af58e20" class="i property">RuntimeInfo</a>.<a href="/Microsoft.Azure.EventHubs/A.html#3a59ed77dd9eaa06" class="i property">PartitionId</a>}<span class="s">&quot;</span>);
        }
 
        <b>private async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="f9867ec171dff901" href="../R/f9867ec171dff901.html" target="n" data-glyph="76,1" class="i method">ValidateDisabledBehavior</a>(<a href="/Microsoft.Azure.EventHubs/A.html#c6301acd46b0811a" class="t t">PartitionReceiver</a> <span id="r20 rd" class="r20 r">partitionReceiver</span>)
        {
            <span class="i">Assert</span>.<span class="i">True</span>(<span class="r20 r">partitionReceiver</span>.<a href="/Microsoft.Azure.EventHubs/A.html#f9d085f517fbf112" class="i property">ReceiverRuntimeMetricEnabled</a> == <b>false</b>, <span class="s">&quot;ReceiverRuntimeMetricEnabled == true&quot;</span>);
 
            <span class="c">// Receive a message and validate RuntimeInfo isn&#39;t set.</span>
            <b>var</b> <span id="r21 rd" class="r21 r">msg</span> = <b>await</b> <span class="r20 r">partitionReceiver</span>.<span class="i">ReceiveAsync</span>(1);
            <span class="i">Assert</span>.<span class="i">True</span>(<span class="r21 r">msg</span> != <b>null</b>, <span class="s">&quot;Failed to receive a message.&quot;</span>);
            <span class="i">Assert</span>.<span class="i">True</span>(<span class="r20 r">partitionReceiver</span>.<a href="/Microsoft.Azure.EventHubs/A.html#1a3b6e7a3af58e20" class="i property">RuntimeInfo</a>.<a href="/Microsoft.Azure.EventHubs/A.html#bb168e01d740e50c" class="i property">LastEnqueuedOffset</a> == <b>null</b>,
                <span class="s">$&quot;</span><span class="s">FAILED partitionReceiver.RuntimeInfo.LastEnqueuedOffset == </span>{<span class="r20 r">partitionReceiver</span>.<a href="/Microsoft.Azure.EventHubs/A.html#1a3b6e7a3af58e20" class="i property">RuntimeInfo</a>.<a href="/Microsoft.Azure.EventHubs/A.html#bb168e01d740e50c" class="i property">LastEnqueuedOffset</a>}<span class="s">&quot;</span>);
            <span class="i">Assert</span>.<span class="i">True</span>(<span class="r20 r">partitionReceiver</span>.<a href="/Microsoft.Azure.EventHubs/A.html#1a3b6e7a3af58e20" class="i property">RuntimeInfo</a>.<a href="/Microsoft.Azure.EventHubs/A.html#c778bf5b28a5426b" class="i property">LastEnqueuedTimeUtc</a> == <a href="@0@mscorlib/A.html#df6b1eba7461813b" class="t t">DateTime</a>.<a href="@0@mscorlib/A.html#e7670be8111807d6" class="i field">MinValue</a>,
                <span class="s">$&quot;</span><span class="s">FAILED partitionReceiver.RuntimeInfo.LastEnqueuedTimeUtc == </span>{<span class="r20 r">partitionReceiver</span>.<a href="/Microsoft.Azure.EventHubs/A.html#1a3b6e7a3af58e20" class="i property">RuntimeInfo</a>.<a href="/Microsoft.Azure.EventHubs/A.html#c778bf5b28a5426b" class="i property">LastEnqueuedTimeUtc</a>}<span class="s">&quot;</span>);
            <span class="i">Assert</span>.<span class="i">True</span>(<span class="r20 r">partitionReceiver</span>.<a href="/Microsoft.Azure.EventHubs/A.html#1a3b6e7a3af58e20" class="i property">RuntimeInfo</a>.<a href="/Microsoft.Azure.EventHubs/A.html#53f35fb9996a4159" class="i property">LastSequenceNumber</a> == -1,
                <span class="s">$&quot;</span><span class="s">FAILED partitionReceiver.RuntimeInfo.LastSequenceNumber == </span>{<span class="r20 r">partitionReceiver</span>.<a href="/Microsoft.Azure.EventHubs/A.html#1a3b6e7a3af58e20" class="i property">RuntimeInfo</a>.<a href="/Microsoft.Azure.EventHubs/A.html#53f35fb9996a4159" class="i property">LastSequenceNumber</a>}<span class="s">&quot;</span>);
            <span class="i">Assert</span>.<span class="i">True</span>(<span class="r20 r">partitionReceiver</span>.<a href="/Microsoft.Azure.EventHubs/A.html#1a3b6e7a3af58e20" class="i property">RuntimeInfo</a>.<a href="/Microsoft.Azure.EventHubs/A.html#9082e73b35ac882c" class="i property">RetrievalTime</a> == <a href="@0@mscorlib/A.html#df6b1eba7461813b" class="t t">DateTime</a>.<a href="@0@mscorlib/A.html#e7670be8111807d6" class="i field">MinValue</a>,
                <span class="s">$&quot;</span><span class="s">FAILED partitionReceiver.RuntimeInfo.RetrievalTime == </span>{<span class="r20 r">partitionReceiver</span>.<a href="/Microsoft.Azure.EventHubs/A.html#1a3b6e7a3af58e20" class="i property">RuntimeInfo</a>.<a href="/Microsoft.Azure.EventHubs/A.html#9082e73b35ac882c" class="i property">RetrievalTime</a>}<span class="s">&quot;</span>);
        }
    }
}
</pre></td></tr></table></div></body></html>

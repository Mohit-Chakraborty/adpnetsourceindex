<!DOCTYPE html>
<html><head><title>KeyVaultOperationsTest.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(4303);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Microsoft.Azure.KeyVault.Tests/KeyVaultOperationsTest.cs" target="_top">KeyVaultOperationsTest.cs</a><br/></td><td><a class="blueLink" href="https://github.com/Azure/azure-sdk-for-net/tree/master/sdk/keyvault/Microsoft.Azure.KeyVault/tests/KeyVaultOperationsTest.cs" target="_blank">View on GitHub</a></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Microsoft.Azure.KeyVault.Tests" target="_top">Microsoft.Azure.KeyVault.Tests.csproj</a> (Microsoft.Azure.KeyVault.Tests)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License. See License.txt in the project root for</span>
<span class="c">// license information.</span>
 
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Globalization</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Net</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Net</span>.<span class="i n">Http</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Security</span>.<span class="i n">Cryptography</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Security</span>.<span class="i n">Cryptography</span>.<span class="i n">X509Certificates</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Text</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>;
<b>using</b> <span class="i n">KeyVault</span>.<span class="i n">TestFramework</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">KeyVault</span>.<span class="i n">Models</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">KeyVault</span>.<span class="i n">WebKey</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Test</span>.<span class="i n">HttpRecorder</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Rest</span>.<span class="i n">ClientRuntime</span>.<span class="i n">Azure</span>.<span class="i n">TestFramework</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Rest</span>.<span class="i n">Serialization</span>;
<b>using</b> <span class="i n">Xunit</span>;
 
<span class="c">// Avoid compiling the test class. Disabling just the test methods still causes the fixture to instantiate and dispose, which still breaks live tests.</span>
<span class="c">// See https://github.com/Azure/azure-sdk-for-net/issues/8420 for status and more information about why these tests are disabled.</span>
<span class="k preprocess">#</span><span class="k preprocess">if</span> !<span class="i">AZURE_KEYVAULT_TEST_MODE_LIVE</span>
 
<b>namespace</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">KeyVault</span>.<span class="i n">Tests</span>
{
    <b>public class</b> <a id="741e26b08beafc2c" href="R/../../0000000000.html" target="n" data-glyph="0,0" class="t t">Operations</a> : <span class="t t">IClassFixture</span>&lt;<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#6af13da317769829" class="t t">KeyVaultTestFixture</a>&gt;
    {
        <b>private</b> <a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#6af13da317769829" class="t t">KeyVaultTestFixture</a> <a id="671cc04f42f659fd" href="R/671cc04f42f659fd.html" target="n" data-glyph="46,1" class="i field">fixture</a>;
 
        <b>public</b> <a id="033a33a55c4fe3ed" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="t constructor">Operations</a>(<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#6af13da317769829" class="t t">KeyVaultTestFixture</a> <span id="r0 rd" class="r0 r">fixture</span>)
        {
            <a href="#741e26b08beafc2c" class="k">this</a>.<a href="#671cc04f42f659fd" class="i field">fixture</a> = <span class="r0 r">fixture</span>;
            <a href="#1f6b9808d2261c2f" class="i field">_standardVaultOnly</a> = <span class="r0 r">fixture</span>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#28756890c3c41a62" class="i field">standardVaultOnly</a>;
            <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a> = <span class="r0 r">fixture</span>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#93b22104d131bf42" class="i field">softDeleteEnabled</a>;
            <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a> = <span class="r0 r">fixture</span>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#942e9122d96cddf7" class="i field">vaultAddress</a>;
            <a href="#4d58e7eec63beec0" class="i field">_keyName</a> = <span class="r0 r">fixture</span>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#a9952dbdacdedf47" class="i field">keyName</a>;
            <a href="#8e866414aaed5551" class="i field">_keyVersion</a> = <span class="r0 r">fixture</span>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#85f733a3902e9acf" class="i field">keyVersion</a>;
            <a href="#a68b0d4f11d56488" class="i field">_keyIdentifier</a> = <span class="r0 r">fixture</span>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#9d8ed5358d8eaa4b" class="i field">keyIdentifier</a>;
            <a href="#c6d9122969a89489" class="i field">_storageResourceUrl1</a> = <span class="r0 r">fixture</span>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#16786b7de92c032a" class="i field">StorageResourceUrl1</a>;
            <a href="#084a303d4f139637" class="i field">_storageResourceUrl2</a> = <span class="r0 r">fixture</span>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#d6565f1fdd1cdfcb" class="i field">StorageResourceUrl2</a>;
        }
 
        <b>private bool</b> <a id="1f6b9808d2261c2f" href="R/1f6b9808d2261c2f.html" target="n" data-glyph="46,1" class="i field">_standardVaultOnly</a> = <b>false</b>;
        <b>private bool</b> <a id="7bb8c5653994a330" href="R/7bb8c5653994a330.html" target="n" data-glyph="46,1" class="i field">_softDeleteEnabled</a> = <b>false</b>;
        <b>private string</b> <a id="15820bb2d3a3ac10" href="R/15820bb2d3a3ac10.html" target="n" data-glyph="46,1" class="i field">_vaultAddress</a> = <span class="s">&quot;&quot;</span>;
        <b>private string</b> <a id="4d58e7eec63beec0" href="R/4d58e7eec63beec0.html" target="n" data-glyph="46,1" class="i field">_keyName</a> = <span class="s">&quot;&quot;</span>;
        <b>private string</b> <a id="8e866414aaed5551" href="R/8e866414aaed5551.html" target="n" data-glyph="46,1" class="i field">_keyVersion</a> = <span class="s">&quot;&quot;</span>;
        <b>private</b> <a href="/Microsoft.Azure.KeyVault/A.html#3ff6311593b8db9a" class="t t">KeyIdentifier</a> <a id="a68b0d4f11d56488" href="R/a68b0d4f11d56488.html" target="n" data-glyph="46,1" class="i field">_keyIdentifier</a>;
        <b>private string</b> <a id="c6d9122969a89489" href="R/c6d9122969a89489.html" target="n" data-glyph="46,1" class="i field">_storageResourceUrl1</a>;
        <b>private string</b> <a id="084a303d4f139637" href="R/084a303d4f139637.html" target="n" data-glyph="46,1" class="i field">_storageResourceUrl2</a>;
 
        <b>private void</b> <a id="31c1bcea6d498a0b" href="R/31c1bcea6d498a0b.html" target="n" data-glyph="76,1" class="i method">Initialize</a>()
        {
            <b>if</b> (<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#348d97248a265d2f" class="t t">HttpMockServer</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#a74d951f775be518" class="i property">Mode</a> == <a href="/Microsoft.Azure.Test.HttpRecorder/A.html#ba41c0be28bfd60b" class="t t">HttpRecorderMode</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#6634c3afad27d401" class="i field">Record</a>)
            {
                <a href="/Microsoft.Azure.Test.HttpRecorder/A.html#348d97248a265d2f" class="t t">HttpMockServer</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#250f849780469e4f" class="i property">Variables</a><a href="@0@mscorlib/A.html#49962975508e2d83">[</a><span class="s">&quot;VaultAddress&quot;</span>] = <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>;
                <a href="/Microsoft.Azure.Test.HttpRecorder/A.html#348d97248a265d2f" class="t t">HttpMockServer</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#250f849780469e4f" class="i property">Variables</a><a href="@0@mscorlib/A.html#49962975508e2d83">[</a><span class="s">&quot;KeyName&quot;</span>] = <a href="#4d58e7eec63beec0" class="i field">_keyName</a>;
                <a href="/Microsoft.Azure.Test.HttpRecorder/A.html#348d97248a265d2f" class="t t">HttpMockServer</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#250f849780469e4f" class="i property">Variables</a><a href="@0@mscorlib/A.html#49962975508e2d83">[</a><span class="s">&quot;KeyVersion&quot;</span>] = <a href="#8e866414aaed5551" class="i field">_keyVersion</a>;
                <a href="/Microsoft.Azure.Test.HttpRecorder/A.html#348d97248a265d2f" class="t t">HttpMockServer</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#250f849780469e4f" class="i property">Variables</a><a href="@0@mscorlib/A.html#49962975508e2d83">[</a><span class="s">&quot;SoftDeleteEnabled&quot;</span>] = <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>.<a href="@0@mscorlib/A.html#871f2a3701fb2564" class="i method">ToString</a>();
                <a href="/Microsoft.Azure.Test.HttpRecorder/A.html#348d97248a265d2f" class="t t">HttpMockServer</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#250f849780469e4f" class="i property">Variables</a><a href="@0@mscorlib/A.html#49962975508e2d83">[</a><span class="s">&quot;StorageResourceUrl1&quot;</span>] = <a href="#c6d9122969a89489" class="i field">_storageResourceUrl1</a>;
                <a href="/Microsoft.Azure.Test.HttpRecorder/A.html#348d97248a265d2f" class="t t">HttpMockServer</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#250f849780469e4f" class="i property">Variables</a><a href="@0@mscorlib/A.html#49962975508e2d83">[</a><span class="s">&quot;StorageResourceUrl2&quot;</span>] = <a href="#084a303d4f139637" class="i field">_storageResourceUrl2</a>;
            }
            <b>else</b>
            {
                <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a> = <a href="/Microsoft.Azure.Test.HttpRecorder/A.html#348d97248a265d2f" class="t t">HttpMockServer</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#250f849780469e4f" class="i property">Variables</a><a href="@0@mscorlib/A.html#49962975508e2d83">[</a><span class="s">&quot;VaultAddress&quot;</span>];
                <a href="#4d58e7eec63beec0" class="i field">_keyName</a> = <a href="/Microsoft.Azure.Test.HttpRecorder/A.html#348d97248a265d2f" class="t t">HttpMockServer</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#250f849780469e4f" class="i property">Variables</a><a href="@0@mscorlib/A.html#49962975508e2d83">[</a><span class="s">&quot;KeyName&quot;</span>];
                <a href="#8e866414aaed5551" class="i field">_keyVersion</a> = <a href="/Microsoft.Azure.Test.HttpRecorder/A.html#348d97248a265d2f" class="t t">HttpMockServer</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#250f849780469e4f" class="i property">Variables</a><a href="@0@mscorlib/A.html#49962975508e2d83">[</a><span class="s">&quot;KeyVersion&quot;</span>];
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1 rd" class="r1 r">softDeleteSetting</span> = <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>;
                <b>if</b> (<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#348d97248a265d2f" class="t t">HttpMockServer</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#250f849780469e4f" class="i property">Variables</a>.<a href="@0@mscorlib/A.html#2e5bc6d8c0f21e67" class="i method">TryGetValue</a>(<span class="s">&quot;SoftDeleteEnabled&quot;</span>, <b>out</b> <span class="r1 r">softDeleteSetting</span>))
                {
                    <a href="@0@mscorlib/A.html#f1b135ff6c380b37" class="t t">Boolean</a>.<a href="@0@mscorlib/A.html#c8d4e2d26d59f9d0" class="i method">TryParse</a>(<span class="r1 r">softDeleteSetting</span>, <b>out</b> <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
                }
 
                <a href="#c6d9122969a89489" class="i field">_storageResourceUrl1</a> = <a href="/Microsoft.Azure.Test.HttpRecorder/A.html#348d97248a265d2f" class="t t">HttpMockServer</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#250f849780469e4f" class="i property">Variables</a>.<a href="@0@mscorlib/A.html#22fd7cd7408aed6e" class="i method">ContainsKey</a>(<span class="s">&quot;StorageResourceUrl1&quot;</span>)
                    ? <a href="/Microsoft.Azure.Test.HttpRecorder/A.html#348d97248a265d2f" class="t t">HttpMockServer</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#250f849780469e4f" class="i property">Variables</a><a href="@0@mscorlib/A.html#49962975508e2d83">[</a><span class="s">&quot;StorageResourceUrl1&quot;</span>]
                    : <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>;
 
                <a href="#084a303d4f139637" class="i field">_storageResourceUrl2</a> = <a href="/Microsoft.Azure.Test.HttpRecorder/A.html#348d97248a265d2f" class="t t">HttpMockServer</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#250f849780469e4f" class="i property">Variables</a>.<a href="@0@mscorlib/A.html#22fd7cd7408aed6e" class="i method">ContainsKey</a>(<span class="s">&quot;StorageResourceUrl2&quot;</span>)
                    ? <a href="/Microsoft.Azure.Test.HttpRecorder/A.html#348d97248a265d2f" class="t t">HttpMockServer</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#250f849780469e4f" class="i property">Variables</a><a href="@0@mscorlib/A.html#49962975508e2d83">[</a><span class="s">&quot;StorageResourceUrl2&quot;</span>]
                    : <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>;
            }
        }
 
        <b>private</b> <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="t t">KeyVaultClient</a> <a id="ac96e2d26f84638b" href="R/ac96e2d26f84638b.html" target="n" data-glyph="76,1" class="i method">GetKeyVaultClient</a>()
        {
            <a href="#31c1bcea6d498a0b" class="i method">Initialize</a>();
            <a href="#a68b0d4f11d56488" class="i field">_keyIdentifier</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#e85eb276dbc72b2d" class="t constructor">KeyIdentifier</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <a href="#4d58e7eec63beec0" class="i field">_keyName</a>, <a href="#8e866414aaed5551" class="i field">_keyVersion</a>);
            <b>return</b> <a href="#671cc04f42f659fd" class="i field">fixture</a>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#52613f00dd2d8dba" class="i method">CreateKeyVaultClient</a>();
        }
 
        <b>private</b> <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="t t">KeyVaultClient</a> <a id="7d583590c1ece8fd" href="R/7d583590c1ece8fd.html" target="n" data-glyph="76,1" class="i method">GetKeyVaultUserClient</a>()
        {
            <a href="#31c1bcea6d498a0b" class="i method">Initialize</a>();
            <a href="#a68b0d4f11d56488" class="i field">_keyIdentifier</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#e85eb276dbc72b2d" class="t constructor">KeyIdentifier</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <a href="#4d58e7eec63beec0" class="i field">_keyName</a>, <a href="#8e866414aaed5551" class="i field">_keyVersion</a>);
            <b>return</b> <a href="#671cc04f42f659fd" class="i field">fixture</a>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#8a516fc0d47c7a9d" class="i method">CreateKeyVaultUserClient</a>();
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="70abb72256faa51f" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">Constructor</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r2 rd" class="r2 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="#31c1bcea6d498a0b" class="i method">Initialize</a>();
                <b>var</b> <span id="r3 rd" class="r3 r">httpClient</span> = <a href="#324db430ed238f6b" class="t t">HttpClientFactory</a>.<a href="#0da6023ecf408a4a" class="i method">Create</a>(<a href="#671cc04f42f659fd" class="i field">fixture</a>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#f0768184dea77e5c" class="i method">GetHandlers</a>());
 
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r4 rd" class="r4 r">kvClient</span> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#7e47b35bccebfd78" class="t constructor">KeyVaultClient</a>(<b>new</b> <a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#8cef3f47efb5fdbe" class="t constructor">TestKeyVaultCredential</a>(<a href="#671cc04f42f659fd" class="i field">fixture</a>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#05bd76fd1fa017e4" class="i method">GetAccessToken</a>), <span class="r3 r">httpClient</span>);
                <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r3 r">httpClient</span>, <span class="r4 r">kvClient</span>.<a href="/Microsoft.Rest.ClientRuntime/A.html#3b478fd98ca7d6dd" class="i property">HttpClient</a>);
                <span class="r4 r">kvClient</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bbc2547ab56a23bc" class="i method">GetKeysAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
            }
        }
 
        <span class="k preprocess">#</span><span class="k preprocess">region</span> Key Operations
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="77f2b8daaed87081" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">EncryptDecryptRsaOaepTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r5 rd" class="r5 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r6 rd" class="r6 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <a href="#98923d439a2d1ba5" class="i method">EncryptDecrypt</a>(<span class="r6 r">client</span>, <a href="#a68b0d4f11d56488" class="i field">_keyIdentifier</a>, <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#da5d653fe0041231" class="t t">JsonWebKeyEncryptionAlgorithm</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#e25facb48b9cb0e0" class="i field">RSAOAEP</a>);
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="1bb8b7a64e6861c3" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">EncryptDecryptRsa15Test</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r7 rd" class="r7 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r8 rd" class="r8 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <a href="#98923d439a2d1ba5" class="i method">EncryptDecrypt</a>(<span class="r8 r">client</span>, <a href="#a68b0d4f11d56488" class="i field">_keyIdentifier</a>, <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#da5d653fe0041231" class="t t">JsonWebKeyEncryptionAlgorithm</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#fe35cb08b58997f8" class="i field">RSA15</a>);
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="6d1e209a662f2313" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">EncryptDecryptRsaOaep256Test</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r9 rd" class="r9 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r10 rd" class="r10 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <a href="#98923d439a2d1ba5" class="i method">EncryptDecrypt</a>(<span class="r10 r">client</span>, <a href="#a68b0d4f11d56488" class="i field">_keyIdentifier</a>, <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#da5d653fe0041231" class="t t">JsonWebKeyEncryptionAlgorithm</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#c17fdc9b3de06f80" class="i field">RSAOAEP256</a>);
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="3c02f8c0ac8054ba" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">EncryptDecryptWithOlderKeyVersion</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r11 rd" class="r11 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r12 rd" class="r12 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r13 rd" class="r13 r">algorithm</span> = <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#da5d653fe0041231" class="t t">JsonWebKeyEncryptionAlgorithm</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#fe35cb08b58997f8" class="i field">RSA15</a>;
 
                <span class="c">// Create a newer version of the current software key</span>
                <a href="/Microsoft.Azure.KeyVault/A.html#743f0f51eba1582c" class="k">var</a> <span id="r14 rd" class="r14 r">newVersionKey</span> =
                    <span class="r12 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#397812f0585de74b" class="i method">CreateKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <a href="#4d58e7eec63beec0" class="i field">_keyName</a>, <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#c90001f143f0f6b2" class="t t">JsonWebKeyType</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#cc9d39c080719cc8" class="i field">Rsa</a>,
                        <span class="r15 r">keyOps</span>: <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#b9f5c67cab5ac556" class="t t">JsonWebKeyOperation</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#e2f7f08e654cef62" class="i property">AllOperations</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                <span class="c">// Use the older version of the software key to do encryption and decryption operation</span>
                <a href="#98923d439a2d1ba5" class="i method">EncryptDecrypt</a>(<span class="r12 r">client</span>, <a href="#a68b0d4f11d56488" class="i field">_keyIdentifier</a>, <span class="r13 r">algorithm</span>);
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="caf6e869cff9209b" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">EncryptDecryptWithDifferentKeyVersions</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r16 rd" class="r16 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r17 rd" class="r17 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r18 rd" class="r18 r">algorithm</span> = <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#da5d653fe0041231" class="t t">JsonWebKeyEncryptionAlgorithm</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#fe35cb08b58997f8" class="i field">RSA15</a>;
 
                <span class="c">// Create a newer version of the current software key</span>
                <a href="/Microsoft.Azure.KeyVault/A.html#743f0f51eba1582c" class="k">var</a> <span id="r19 rd" class="r19 r">newVersionKey</span> =
                    <span class="r17 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#397812f0585de74b" class="i method">CreateKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <a href="#4d58e7eec63beec0" class="i field">_keyName</a>, <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#c90001f143f0f6b2" class="t t">JsonWebKeyType</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#cc9d39c080719cc8" class="i field">Rsa</a>,
                        <span class="r15 r">keyOps</span>: <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#b9f5c67cab5ac556" class="t t">JsonWebKeyOperation</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#e2f7f08e654cef62" class="i property">AllOperations</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                <b>var</b> <span id="r20 rd" class="r20 r">plainText</span> = <a href="#e000cf1a3e8b7ad5" class="i method">RandomBytes</a>(10);
                <a href="/Microsoft.Azure.KeyVault/A.html#e8a56d1906413280" class="k">var</a> <span id="r21 rd" class="r21 r">encryptResult</span> = <span class="r17 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#4d9d92757adbec95" class="i method">EncryptAsync</a>(<span class="r19 r">newVersionKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#fe5560cce3efa496" class="i property">Kid</a>, <span class="r18 r">algorithm</span>, <span class="r20 r">plainText</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                <span class="t t">Assert</span>.<span class="i method">Throws</span>&lt;<a href="/Microsoft.Azure.KeyVault/A.html#554e648dd6b0698c" class="t t">KeyVaultErrorException</a>&gt;(() =&gt;
                    <span class="r17 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#c46e36a1a7f5d5bf" class="i method">DecryptAsync</a>(<a href="#a68b0d4f11d56488" class="i field">_keyIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#0bf83f1b0a96da15" class="i property">Identifier</a>, <span class="r18 r">algorithm</span>, <span class="r21 r">encryptResult</span>.<a href="/Microsoft.Azure.KeyVault/A.html#692ad38bc3c57a20" class="i property">Result</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>());
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="fb1f74029431abd6" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SignVerifyRS256Test</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r22 rd" class="r22 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r23 rd" class="r23 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <b>var</b> <span id="r24 rd" class="r24 r">digest</span> = <a href="#08bc612291e93141" class="i method">RandomHash</a>(<a href="@0@mscorlib/A.html#b87ea7e64312d482" class="t t">SHA256</a>.<a href="@0@mscorlib/A.html#4b15c607be98ae7f" class="i method">Create</a>(), 32);
 
                <a href="#c68517e8a065c0ff" class="i method">SignVerify</a>(<span class="r23 r">client</span>, <a href="#a68b0d4f11d56488" class="i field">_keyIdentifier</a>, <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#9adb975af38633b9" class="t t">JsonWebKeySignatureAlgorithm</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#1ee575272711bf00" class="i field">RS256</a>, <span class="r24 r">digest</span>);
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="ad237bfbdbe1d866" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SignVerifyRS384Test</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r25 rd" class="r25 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r26 rd" class="r26 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <b>var</b> <span id="r27 rd" class="r27 r">digest</span> = <a href="#08bc612291e93141" class="i method">RandomHash</a>(<a href="@0@mscorlib/A.html#1471ed6b02f8580d" class="t t">SHA384</a>.<a href="@0@mscorlib/A.html#efac2f4a8689588f" class="i method">Create</a>(), 64);
 
                <a href="#c68517e8a065c0ff" class="i method">SignVerify</a>(<span class="r26 r">client</span>, <a href="#a68b0d4f11d56488" class="i field">_keyIdentifier</a>, <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#9adb975af38633b9" class="t t">JsonWebKeySignatureAlgorithm</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#74f8fae8456d7c69" class="i field">RS384</a>, <span class="r27 r">digest</span>);
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="dac155a687b501fa" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SignVerifyRS512Test</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r28 rd" class="r28 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r29 rd" class="r29 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <b>var</b> <span id="r30 rd" class="r30 r">digest</span> = <a href="#08bc612291e93141" class="i method">RandomHash</a>(<a href="@0@mscorlib/A.html#f9600b0d781d55e8" class="t t">SHA512</a>.<a href="@0@mscorlib/A.html#86ebf1841a23a159" class="i method">Create</a>(), 64);
 
                <a href="#c68517e8a065c0ff" class="i method">SignVerify</a>(<span class="r29 r">client</span>, <a href="#a68b0d4f11d56488" class="i field">_keyIdentifier</a>, <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#9adb975af38633b9" class="t t">JsonWebKeySignatureAlgorithm</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#de719128e8f3c3fa" class="i field">RS512</a>, <span class="r30 r">digest</span>);
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="fbba63c6afd8e5b8" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SignVerifyPS256Test</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r31 rd" class="r31 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r32 rd" class="r32 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <b>var</b> <span id="r33 rd" class="r33 r">digest</span> = <a href="#08bc612291e93141" class="i method">RandomHash</a>(<a href="@0@mscorlib/A.html#b87ea7e64312d482" class="t t">SHA256</a>.<a href="@0@mscorlib/A.html#4b15c607be98ae7f" class="i method">Create</a>(), 32);
 
                <a href="#c68517e8a065c0ff" class="i method">SignVerify</a>(<span class="r32 r">client</span>, <a href="#a68b0d4f11d56488" class="i field">_keyIdentifier</a>, <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#9adb975af38633b9" class="t t">JsonWebKeySignatureAlgorithm</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#195d218d7df9ad89" class="i field">PS256</a>, <span class="r33 r">digest</span>);
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="5083d8ceda1c6808" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SignVerifyPS384Test</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r34 rd" class="r34 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r35 rd" class="r35 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <b>var</b> <span id="r36 rd" class="r36 r">digest</span> = <a href="#08bc612291e93141" class="i method">RandomHash</a>(<a href="@0@mscorlib/A.html#1471ed6b02f8580d" class="t t">SHA384</a>.<a href="@0@mscorlib/A.html#efac2f4a8689588f" class="i method">Create</a>(), 64);
 
                <a href="#c68517e8a065c0ff" class="i method">SignVerify</a>(<span class="r35 r">client</span>, <a href="#a68b0d4f11d56488" class="i field">_keyIdentifier</a>, <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#9adb975af38633b9" class="t t">JsonWebKeySignatureAlgorithm</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#c5eeaed3b5432941" class="i field">PS384</a>, <span class="r36 r">digest</span>);
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="1a233d8806e50814" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SignVerifyPS512Test</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r37 rd" class="r37 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r38 rd" class="r38 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <b>var</b> <span id="r39 rd" class="r39 r">digest</span> = <a href="#08bc612291e93141" class="i method">RandomHash</a>(<a href="@0@mscorlib/A.html#f9600b0d781d55e8" class="t t">SHA512</a>.<a href="@0@mscorlib/A.html#86ebf1841a23a159" class="i method">Create</a>(), 64);
 
                <a href="#c68517e8a065c0ff" class="i method">SignVerify</a>(<span class="r38 r">client</span>, <a href="#a68b0d4f11d56488" class="i field">_keyIdentifier</a>, <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#9adb975af38633b9" class="t t">JsonWebKeySignatureAlgorithm</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#94f33381108f907c" class="i field">PS512</a>, <span class="r39 r">digest</span>);
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="462d99f0b183445e" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">WrapUnwrapRsaOaepTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r40 rd" class="r40 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
 
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r41 rd" class="r41 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <b>var</b> <span id="r42 rd" class="r42 r">symmetricKeyBytes</span> = <a href="#0f27b157ee0b2a9a" class="i method">GetSymmetricKeyBytes</a>();
                <a href="#7f6c1f1f7dc9ce9d" class="i method">WrapAndUnwrap</a>(<span class="r41 r">client</span>, <a href="#a68b0d4f11d56488" class="i field">_keyIdentifier</a>, <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#da5d653fe0041231" class="t t">JsonWebKeyEncryptionAlgorithm</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#e25facb48b9cb0e0" class="i field">RSAOAEP</a>, <span class="r42 r">symmetricKeyBytes</span>);
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="31468b3ec97c91fe" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">WrapUnwrapRsa15Test</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r43 rd" class="r43 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
 
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r44 rd" class="r44 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <b>var</b> <span id="r45 rd" class="r45 r">symmetricKeyBytes</span> = <a href="#0f27b157ee0b2a9a" class="i method">GetSymmetricKeyBytes</a>();
                <a href="#7f6c1f1f7dc9ce9d" class="i method">WrapAndUnwrap</a>(<span class="r44 r">client</span>, <a href="#a68b0d4f11d56488" class="i field">_keyIdentifier</a>, <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#da5d653fe0041231" class="t t">JsonWebKeyEncryptionAlgorithm</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#fe35cb08b58997f8" class="i field">RSA15</a>, <span class="r45 r">symmetricKeyBytes</span>);
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="7117a49a494e38b6" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">WrapUnwrapRsaOaep256Test</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r46 rd" class="r46 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
 
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r47 rd" class="r47 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <b>var</b> <span id="r48 rd" class="r48 r">symmetricKeyBytes</span> = <a href="#0f27b157ee0b2a9a" class="i method">GetSymmetricKeyBytes</a>();
                <a href="#7f6c1f1f7dc9ce9d" class="i method">WrapAndUnwrap</a>(<span class="r47 r">client</span>, <a href="#a68b0d4f11d56488" class="i field">_keyIdentifier</a>, <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#da5d653fe0041231" class="t t">JsonWebKeyEncryptionAlgorithm</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#c17fdc9b3de06f80" class="i field">RSAOAEP256</a>, <span class="r48 r">symmetricKeyBytes</span>);
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="b77044d96ad99461" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">EcKeyCreateSignVerifyP256</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r49 rd" class="r49 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r50 rd" class="r50 r">curve</span> = <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#880f0ad409210774" class="t t">JsonWebKeyCurveName</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#6a1a931e140d8adf" class="i field">P256</a>;
                <a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r51 rd" class="r51 r">digestSize</span> = 256;
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r52 rd" class="r52 r">algorithm</span> = <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#9adb975af38633b9" class="t t">JsonWebKeySignatureAlgorithm</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#710baa3a402665f3" class="i field">ES256</a>;
 
                <a href="#84254cbce3efddf0" class="i method">TestEcKeyCreateSignVerify</a>(<span class="r50 r">curve</span>, <span class="r51 r">digestSize</span>, <span class="r52 r">algorithm</span>);
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="a1138ec21dff9d42" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">EcKeyCreateSignVerifyP384</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r53 rd" class="r53 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r54 rd" class="r54 r">curve</span> = <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#880f0ad409210774" class="t t">JsonWebKeyCurveName</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#8c9b687b5dca9101" class="i field">P384</a>;
                <a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r55 rd" class="r55 r">digestSize</span> = 384;
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r56 rd" class="r56 r">algorithm</span> = <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#9adb975af38633b9" class="t t">JsonWebKeySignatureAlgorithm</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#15f5c778e3c2c3be" class="i field">ES384</a>;
 
                <a href="#84254cbce3efddf0" class="i method">TestEcKeyCreateSignVerify</a>(<span class="r54 r">curve</span>, <span class="r55 r">digestSize</span>, <span class="r56 r">algorithm</span>);
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="42480cc2f18f0dc5" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">EcKeyCreateSignVerifyP521</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r57 rd" class="r57 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r58 rd" class="r58 r">curve</span> = <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#880f0ad409210774" class="t t">JsonWebKeyCurveName</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#f3954843cd633684" class="i field">P521</a>;
                <a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r59 rd" class="r59 r">digestSize</span> = 512;
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r60 rd" class="r60 r">algorithm</span> = <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#9adb975af38633b9" class="t t">JsonWebKeySignatureAlgorithm</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#c88acdb242866bda" class="i field">ES512</a>;
 
                <a href="#84254cbce3efddf0" class="i method">TestEcKeyCreateSignVerify</a>(<span class="r58 r">curve</span>, <span class="r59 r">digestSize</span>, <span class="r60 r">algorithm</span>);
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="f165eec0787ec24a" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">EcKeyCreateSignVerifySECP256K1</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r61 rd" class="r61 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r62 rd" class="r62 r">curve</span> = <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#880f0ad409210774" class="t t">JsonWebKeyCurveName</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#a386af2b91da273d" class="i field">P256K</a>;
                <a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r63 rd" class="r63 r">digestSize</span> = 256;
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r64 rd" class="r64 r">algorithm</span> = <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#9adb975af38633b9" class="t t">JsonWebKeySignatureAlgorithm</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#75dcc4e58bc54be2" class="i field">ES256K</a>;
 
                <a href="#84254cbce3efddf0" class="i method">TestEcKeyCreateSignVerify</a>(<span class="r62 r">curve</span>, <span class="r63 r">digestSize</span>, <span class="r64 r">algorithm</span>);
            }
        }
 
        <b>private void</b> <a id="84254cbce3efddf0" href="R/84254cbce3efddf0.html" target="n" data-glyph="76,1" class="i method">TestEcKeyCreateSignVerify</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r65 rd" class="r65 r">curve</span>, <b>int</b> <span id="r66 rd" class="r66 r">digestSize</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r67 rd" class="r67 r">algorithm</span>)
        {
            <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r68 rd" class="r68 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
            <a href="/Microsoft.Azure.KeyVault/A.html#909ced96a9d00334" class="k">var</a> <span id="r69 rd" class="r69 r">keyParameters</span> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#451f06d1652ed30e" class="t constructor">NewKeyParameters</a>();
 
            <span class="r69 r">keyParameters</span>.<a href="/Microsoft.Azure.KeyVault/A.html#22a404e991bd2f1d" class="i property">Kty</a> = <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#c90001f143f0f6b2" class="t t">JsonWebKeyType</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#8ec62d93b4c095ea" class="i field">EllipticCurve</a>;
            <span class="r69 r">keyParameters</span>.<a href="/Microsoft.Azure.KeyVault/A.html#75bafe0a0773b619" class="i property">CurveName</a> = <span class="r65 r">curve</span>;
            <span class="r69 r">keyParameters</span>.<a href="/Microsoft.Azure.KeyVault/A.html#68116b02a36a6c09" class="i property">KeyOps</a> = <b>new</b>[] { <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#b9f5c67cab5ac556" class="t t">JsonWebKeyOperation</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#dfad66299196683a" class="i field">Sign</a>, <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#b9f5c67cab5ac556" class="t t">JsonWebKeyOperation</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#caef56d617f788b0" class="i field">Verify</a> };
 
            <span class="c">// Create an EC software key.</span>
            <a href="/Microsoft.Azure.KeyVault/A.html#743f0f51eba1582c" class="k">var</a> <span id="r70 rd" class="r70 r">keyBundle</span> = <span class="r68 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e26f40d537224048" class="i method">CreateKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <a href="#4d58e7eec63beec0" class="i field">_keyName</a>, <span class="r69 r">keyParameters</span>).<a href="@0@mscorlib/A.html#826690b09f24e719" class="i property">Result</a>;
 
            <a href="#d0a980752ddb5e2c" class="i method">TestSignVerify</a>(<span class="r68 r">client</span>, <span class="r70 r">keyBundle</span>, <span class="r66 r">digestSize</span>, <span class="r67 r">algorithm</span>);
        }
 
        <b>private static void</b> <a id="d0a980752ddb5e2c" href="R/d0a980752ddb5e2c.html" target="n" data-glyph="76,1" class="i method">TestSignVerify</a>(<a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="t t">KeyVaultClient</a> <span id="r71 rd" class="r71 r">client</span>, <a href="/Microsoft.Azure.KeyVault/A.html#743f0f51eba1582c" class="t t">KeyBundle</a> <span id="r72 rd" class="r72 r">keyBundle</span>, <b>int</b> <span id="r73 rd" class="r73 r">digestSize</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r74 rd" class="r74 r">algorithm</span>)
        {
            <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#072f5b35a8ee35c6" class="k">var</a> <span id="r75 rd" class="r75 r">key</span> = <span class="r72 r">keyBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>;
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r76 rd" class="r76 r">kid</span> = <span class="r75 r">key</span>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#fe5560cce3efa496" class="i property">Kid</a>;
            <a href="@0@System.Core/A.html#59084d68c76f225c" class="k">var</a> <span id="r77 rd" class="r77 r">ecdsa</span> = <span class="r75 r">key</span>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#118a8b68f400983e" class="i method">ToECDsa</a>(<b>false</b>);
 
            <span class="c">// Sign.</span>
            <b>var</b> <span id="r78 rd" class="r78 r">digest</span> = <a href="#e000cf1a3e8b7ad5" class="i method">RandomBytes</a>(<span class="r73 r">digestSize</span> / 8);
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r78 r">digest</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a> * 8 == <span class="r73 r">digestSize</span>);
 
            <a href="/Microsoft.Azure.KeyVault/A.html#e8a56d1906413280" class="k">var</a> <span id="r79 rd" class="r79 r">signatureResult</span> = <span class="r71 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a0418a98babd924e" class="i method">SignAsync</a>(<span class="r76 r">kid</span>, <span class="r74 r">algorithm</span>, <span class="r78 r">digest</span>).<a href="@0@mscorlib/A.html#826690b09f24e719" class="i property">Result</a>;
            <b>var</b> <span id="r80 rd" class="r80 r">signature</span> = <span class="r79 r">signatureResult</span>.<a href="/Microsoft.Azure.KeyVault/A.html#692ad38bc3c57a20" class="i property">Result</a>;
            <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r76 r">kid</span>, <span class="r79 r">signatureResult</span>.<a href="/Microsoft.Azure.KeyVault/A.html#40c2fac07a30b2cd" class="i property">Kid</a>);
 
            <span class="c">// Verify - positive test.</span>
            <a href="@0@mscorlib/A.html#f1b135ff6c380b37" class="k">var</a> <span id="r81 rd" class="r81 r">verified</span> = <span class="r71 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#755e70fe719043c8" class="i method">VerifyAsync</a>(<span class="r76 r">kid</span>, <span class="r74 r">algorithm</span>, <span class="r78 r">digest</span>, <span class="r80 r">signature</span>).<a href="@0@mscorlib/A.html#826690b09f24e719" class="i property">Result</a>;
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r81 r">verified</span>);
<span class="k preprocess">#</span><span class="k preprocess">if</span> <span class="i">FullNetFx</span>
<span class="c">// Issuse https://github.com/Azure/azure-sdk-for-net/issues/5997 tracking this commented out code on .NET Framework</span>
<span class="c">//            var hashAlgorithmName = new HashAlgorithmName(algorithm);</span>
<span class="c">//            verified = ecdsa.VerifyData(digest, signature, hashAlgorithmName);</span>
<span class="c">//            Assert.True(verified);</span>
<span class="k preprocess">#</span><span class="k preprocess">endif</span>
 
            <span class="c">// Verify - negative test.</span>
            <span class="r80 r">signature</span>[<span class="r80 r">signature</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a> - 1] ^= 1;
            <span class="r81 r">verified</span> = <span class="r71 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#755e70fe719043c8" class="i method">VerifyAsync</a>(<span class="r76 r">kid</span>, <span class="r74 r">algorithm</span>, <span class="r78 r">digest</span>, <span class="r80 r">signature</span>).<a href="@0@mscorlib/A.html#826690b09f24e719" class="i property">Result</a>;
            <span class="t t">Assert</span>.<span class="i method">False</span>(<span class="r81 r">verified</span>);
 
<span class="k preprocess">#</span><span class="k preprocess">if</span> <span class="i">FullNetFx</span>
<span class="c">// Issuse https://github.com/Azure/azure-sdk-for-net/issues/5997 tracking this commented out code on .NET Framework</span>
<span class="c">//            verified = ecdsa.VerifyData(digest, signature, hashAlgorithmName);</span>
<span class="c">//            Assert.False(verified);</span>
<span class="k preprocess">#</span><span class="k preprocess">endif</span>
        }
<span class="c">/*
        public void CreateGetDeleteKeyTest()
        {
            using (MockContext context = MockContext.Start(this.GetType()))
            {
                var client = GetKeyVaultClient();
                bool recoveryLevelIsConsistent = true;
 
                var attributes = new KeyAttributes();
                var tags = new Dictionary&lt;string, string&gt;() { { &quot;purpose&quot;, &quot;unit test&quot; }, { &quot;test name &quot;, &quot;CreateGetDeleteKeyTest&quot; } };
                var createdKey = client.CreateKeyAsync(_vaultAddress, &quot;CreateSoftKeyTest&quot;, JsonWebKeyType.Rsa, 2048,
                    JsonWebKeyOperation.AllOperations, attributes, tags).GetAwaiter().GetResult();
 
                try
                {
                    VerifyKeyAttributesAreEqual(attributes, createdKey.Attributes);
                    Assert.Equal(JsonWebKeyType.Rsa, createdKey.Key.Kty);
                    Assert.Equal(&quot;CreateSoftKeyTest&quot;, createdKey.KeyIdentifier.Name);
                    var retrievedKey = client.GetKeyAsync(createdKey.Key.Kid).GetAwaiter().GetResult();
                    VerifyKeyAttributesAreEqual(attributes, retrievedKey.Attributes);
                    VerifyWebKeysAreEqual(createdKey.Key, retrievedKey.Key);
                    VerifyTagsAreEqual(tags, retrievedKey.Tags);
 
                    recoveryLevelIsConsistent &amp;= VerifyDeletionRecoveryLevel(retrievedKey.Attributes, _softDeleteEnabled);
                }
                finally
                {
                    var deletedKey = client.DeleteKeyAsync(_vaultAddress, &quot;CreateSoftKeyTest&quot;).GetAwaiter().GetResult();
 
                    VerifyKeyAttributesAreEqual(deletedKey.Attributes, createdKey.Attributes);
                    VerifyWebKeysAreEqual(deletedKey.Key, createdKey.Key);
                    recoveryLevelIsConsistent &amp;= VerifyDeletionRecoveryLevel(deletedKey.Attributes, _softDeleteEnabled);
 
                    //verify the key is deleted
                    try
                    {
                        client.GetKeyAsync(_vaultAddress, &quot;CreateSoftKeyTest&quot;).GetAwaiter().GetResult();
                    }
                    catch (KeyVaultErrorException ex)
                    {
                        if (ex.Response.StatusCode != HttpStatusCode.NotFound || ex.Body.Error.Message != ex.Message)
                            throw;
                    }
 
                    if (_softDeleteEnabled)
                    {
                        this.fixture.WaitOnDeletedKey(client, _vaultAddress, &quot;CreateSoftKeyTest&quot;);
 
                        client.PurgeDeletedKeyAsync(_vaultAddress, &quot;CreateSoftKeyTest&quot;).GetAwaiter().GetResult();
                    }
                }
 
                Assert.True(recoveryLevelIsConsistent, &quot;the &#39;recoveryLevel&#39; attribute did not consistently return the expected value.&quot;);
            }
        }
*/</span>
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="574477f72f5ae416" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CreateHsmKeyTest</a>()
        {
            <b>if</b> (<a href="#1f6b9808d2261c2f" class="i field">_standardVaultOnly</a>) <b>return</b>;
 
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r82 rd" class="r82 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
 
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r83 rd" class="r83 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <b>bool</b> <span id="r84 rd" class="r84 r">recoveryLevelIsConsistent</span> = <b>true</b>;
                <a href="/Microsoft.Azure.KeyVault/A.html#94343e9880a92aee" class="k">var</a> <span id="r85 rd" class="r85 r">attributes</span> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#0f357404091624d2" class="t constructor">KeyAttributes</a>();
                <a href="/Microsoft.Azure.KeyVault/A.html#743f0f51eba1582c" class="k">var</a> <span id="r86 rd" class="r86 r">createdKey</span> = <span class="r83 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#397812f0585de74b" class="i method">CreateKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="s">&quot;CreateHsmKeyTest&quot;</span>, <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#c90001f143f0f6b2" class="t t">JsonWebKeyType</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#d474964d1d7a4763" class="i field">RsaHsm</a>, 2048,
                    <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#b9f5c67cab5ac556" class="t t">JsonWebKeyOperation</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#e2f7f08e654cef62" class="i property">AllOperations</a>, <span class="r85 r">attributes</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                <b>try</b>
                {
                    <span class="c">//Trace.WriteLine(&quot;Verify generated key is as expected&quot;);</span>
                    <a href="#a28594ab30d1ad75" class="i method">VerifyKeyAttributesAreEqual</a>(<span class="r85 r">attributes</span>, <span class="r86 r">createdKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>);
                    <span class="t t">Assert</span>.<span class="i method">Equal</span>(<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#c90001f143f0f6b2" class="t t">JsonWebKeyType</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#d474964d1d7a4763" class="i field">RsaHsm</a>, <span class="r86 r">createdKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#bf5694ab09c369fd" class="i property">Kty</a>);
                    <span class="t t">Assert</span>.<span class="i method">False</span>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>(<span class="r86 r">createdKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>.<a href="/Microsoft.Azure.KeyVault/A.html#6f61b8808869ab29" class="i property">RecoveryLevel</a>));
 
                    <span class="c">//Trace.WriteLine(&quot;Get the key&quot;);</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#743f0f51eba1582c" class="k">var</a> <span id="r87 rd" class="r87 r">retrievedKey</span> = <span class="r83 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ccdf557be81379d1" class="i method">GetKeyAsync</a>(<span class="r86 r">createdKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#fe5560cce3efa496" class="i property">Kid</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <a href="#a28594ab30d1ad75" class="i method">VerifyKeyAttributesAreEqual</a>(<span class="r85 r">attributes</span>, <span class="r87 r">retrievedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>);
                    <a href="#7a6ac99fa29d88de" class="i method">VerifyWebKeysAreEqual</a>(<span class="r86 r">createdKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>, <span class="r87 r">retrievedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>);
 
                    <span class="r84 r">recoveryLevelIsConsistent</span> &amp;= <a href="#354b1e47c92614c0" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r86 r">createdKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
                }
                <b>finally</b>
                {
                    <span class="c">//Trace.WriteLine(&quot;Delete the key&quot;);</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#fd8cfd7e3c1c8b34" class="k">var</a> <span id="r88 rd" class="r88 r">deletedKey</span> = <span class="r83 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#335f4fcea9c611fe" class="i method">DeleteKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="s">&quot;CreateHsmKeyTest&quot;</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <a href="#a28594ab30d1ad75" class="i method">VerifyKeyAttributesAreEqual</a>(<span class="r88 r">deletedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>, <span class="r86 r">createdKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>);
                    <a href="#7a6ac99fa29d88de" class="i method">VerifyWebKeysAreEqual</a>(<span class="r88 r">deletedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>, <span class="r86 r">createdKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>);
                    <span class="t t">Assert</span>.<span class="i method">False</span>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>(<span class="r88 r">deletedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>.<a href="/Microsoft.Azure.KeyVault/A.html#6f61b8808869ab29" class="i property">RecoveryLevel</a>));
 
                    <span class="r84 r">recoveryLevelIsConsistent</span> &amp;= <a href="#354b1e47c92614c0" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r88 r">deletedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
 
                    <b>if</b> (<a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>)
                    {
                        <a href="#741e26b08beafc2c" class="k">this</a>.<a href="#671cc04f42f659fd" class="i field">fixture</a>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#b6d1f1bc3162b584" class="i method">WaitOnDeletedKey</a>(<span class="r83 r">client</span>, <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="s">&quot;CreateHsmKeyTest&quot;</span>);
 
                        <span class="r83 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#43183fccf012c992" class="i method">PurgeDeletedKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="s">&quot;CreateHsmKeyTest&quot;</span>).<a href="@0@mscorlib/A.html#1bfe9e19e44f4cfa" class="i method">Wait</a>();
                    }
                }
 
                <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r84 r">recoveryLevelIsConsistent</span>, <span class="s">&quot;the &#39;recoveryLevel&#39; attribute did not consistently return the expected value.&quot;</span>);
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="12a8ea2a51896890" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ImportSoftKeyTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r89 rd" class="r89 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
 
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r90 rd" class="r90 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
                <span class="c">// Generates a new RSA key.</span>
                <a href="@0@mscorlib/A.html#9e72392556b1419c" class="k">var</a> <span id="r91 rd" class="r91 r">rsa</span> = <a href="@0@mscorlib/A.html#9e72392556b1419c" class="t t">RSA</a>.<a href="@0@mscorlib/A.html#7c10efd163896171" class="i method">Create</a>(); <span class="r91 r">rsa</span>.<a href="@0@mscorlib/A.html#27170d83fa59297b" class="i property">KeySize</a> = 2048;
                <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#072f5b35a8ee35c6" class="k">var</a> <span id="r92 rd" class="r92 r">key</span> = <a href="#370568abfc843d10" class="i method">CreateJsonWebKey</a>(<span class="r91 r">rsa</span>.<a href="@0@mscorlib/A.html#24a0e5b7ec837b0b" class="i method">ExportParameters</a>(<b>true</b>));
                <a href="/Microsoft.Azure.KeyVault/A.html#743f0f51eba1582c" class="k">var</a> <span id="r93 rd" class="r93 r">keyBundle</span> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#6b633abce70c52f7" class="t constructor">KeyBundle</a>()
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a> = <b>null</b>,
                    <a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a> = <span class="r92 r">key</span>,
                    <a href="/Microsoft.Azure.KeyVault/A.html#5b69ac46d49a1031" class="i property">Tags</a> = <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;() { { <span class="s">&quot;purpose&quot;</span>, <span class="s">&quot;unit test&quot;</span> } }
                };
 
                <a href="/Microsoft.Azure.KeyVault/A.html#743f0f51eba1582c" class="k">var</a> <span id="r94 rd" class="r94 r">importedKey</span> =
                    <span class="r90 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#76b63697a7697044" class="i method">ImportKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="s">&quot;ImportSoftKeyTest&quot;</span>, <span class="r93 r">keyBundle</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                <span class="t t">Assert</span>.<span class="i method">False</span>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>(<span class="r94 r">importedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>.<a href="/Microsoft.Azure.KeyVault/A.html#6f61b8808869ab29" class="i property">RecoveryLevel</a>));
 
                <b>try</b>
                {
                    <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r93 r">keyBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#bf5694ab09c369fd" class="i property">Kty</a>, <span class="r94 r">importedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#bf5694ab09c369fd" class="i property">Kty</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r94 r">importedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>);
                    <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="s">&quot;unit test&quot;</span>, <span class="r94 r">importedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5b69ac46d49a1031" class="i property">Tags</a><a href="@0@mscorlib/A.html#86884956b17e491a">[</a><span class="s">&quot;purpose&quot;</span>]);
 
                    <a href="/Microsoft.Azure.KeyVault/A.html#743f0f51eba1582c" class="k">var</a> <span id="r95 rd" class="r95 r">retrievedKey</span> = <span class="r90 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ccdf557be81379d1" class="i method">GetKeyAsync</a>(<span class="r94 r">importedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#fe5560cce3efa496" class="i property">Kid</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <a href="#a28594ab30d1ad75" class="i method">VerifyKeyAttributesAreEqual</a>(<span class="r94 r">importedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>, <span class="r95 r">retrievedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>);
                    <a href="#7a6ac99fa29d88de" class="i method">VerifyWebKeysAreEqual</a>(<span class="r94 r">importedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>, <span class="r95 r">retrievedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>);
                    <span class="t t">Assert</span>.<span class="i method">False</span>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>(<span class="r95 r">retrievedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>.<a href="/Microsoft.Azure.KeyVault/A.html#6f61b8808869ab29" class="i property">RecoveryLevel</a>));
                }
                <b>finally</b>
                {
                    <span class="r90 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#335f4fcea9c611fe" class="i method">DeleteKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="s">&quot;ImportSoftKeyTest&quot;</span>).<a href="@0@mscorlib/A.html#1bfe9e19e44f4cfa" class="i method">Wait</a>();
 
                    <b>if</b> (<a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>)
                    {
                        <a href="#741e26b08beafc2c" class="k">this</a>.<a href="#671cc04f42f659fd" class="i field">fixture</a>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#b6d1f1bc3162b584" class="i method">WaitOnDeletedKey</a>(<span class="r90 r">client</span>, <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="s">&quot;ImportSoftKeyTest&quot;</span>);
 
                        <span class="r90 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#43183fccf012c992" class="i method">PurgeDeletedKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="s">&quot;ImportSoftKeyTest&quot;</span>).<a href="@0@mscorlib/A.html#9865ec4fb8abca74" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#fac5be2731353aa8" class="i method">GetResult</a>();
                    }
                }
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="2158acb05b4cb01b" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">UpdateKeyAttributesTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r96 rd" class="r96 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
 
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r97 rd" class="r97 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r98 rd" class="r98 r">keyName</span> = <span class="s">&quot;UpdateKeyAttributesTest&quot;</span>;
                <b>try</b>
                {
                    <span class="c">// Create a key</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#94343e9880a92aee" class="k">var</a> <span id="r99 rd" class="r99 r">attributes</span> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#0f357404091624d2" class="t constructor">KeyAttributes</a>();
                    <b>var</b> <span id="r100 rd" class="r100 r">operations</span> = <b>new</b> <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>[] { <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#b9f5c67cab5ac556" class="t t">JsonWebKeyOperation</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#f832ee804afdf570" class="i field">Decrypt</a>, <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#b9f5c67cab5ac556" class="t t">JsonWebKeyOperation</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#0ad2e310a327bc4e" class="i field">Encrypt</a> };
                    <a href="/Microsoft.Azure.KeyVault/A.html#743f0f51eba1582c" class="k">var</a> <span id="r101 rd" class="r101 r">createdKey</span> =
                        <span class="r97 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#397812f0585de74b" class="i method">CreateKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r98 r">keyName</span>, <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#c90001f143f0f6b2" class="t t">JsonWebKeyType</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#cc9d39c080719cc8" class="i field">Rsa</a>, 2048,
                            <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#b9f5c67cab5ac556" class="t t">JsonWebKeyOperation</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#e2f7f08e654cef62" class="i property">AllOperations</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="c">// Update the current version</span>
                    <span class="r99 r">attributes</span>.<a href="/Microsoft.Azure.KeyVault/A.html#4711a60053ea2d77" class="i property">Enabled</a> = <b>true</b>;
                    <span class="c">//use a constant to avoid time difference failures</span>
                    <span class="r99 r">attributes</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ca02021b80a17394" class="i property">NotBefore</a> = <a href="/Microsoft.Rest.ClientRuntime/A.html#52708b14f5a48f7d" class="t t">UnixTimeJsonConverter</a>.<a href="/Microsoft.Rest.ClientRuntime/A.html#081c0abd8e0c5025" class="i field">EpochDate</a>.<a href="@0@mscorlib/A.html#4a8bd6c0b5c72d81" class="i method">AddSeconds</a>(315561600);
                    <span class="r99 r">attributes</span>.<a href="/Microsoft.Azure.KeyVault/A.html#2fedfe0e857808a8" class="i property">Expires</a> = <a href="/Microsoft.Rest.ClientRuntime/A.html#52708b14f5a48f7d" class="t t">UnixTimeJsonConverter</a>.<a href="/Microsoft.Rest.ClientRuntime/A.html#081c0abd8e0c5025" class="i field">EpochDate</a>.<a href="@0@mscorlib/A.html#4a8bd6c0b5c72d81" class="i method">AddSeconds</a>(347184000);
 
                    <a href="/Microsoft.Azure.KeyVault/A.html#743f0f51eba1582c" class="k">var</a> <span id="r102 rd" class="r102 r">updatedKey</span> =
                        <span class="r97 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#0b605315dfccd6b3" class="i method">UpdateKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r98 r">keyName</span>, <span class="r100 r">operations</span>, <span class="r99 r">attributes</span>)
                            .<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>()
                            .<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <a href="#a28594ab30d1ad75" class="i method">VerifyKeyAttributesAreEqual</a>(<span class="r102 r">updatedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>, <span class="r99 r">attributes</span>);
                    <a href="#7b23e4a6420b13bf" class="i method">VerifyKeyOperationsAreEqual</a>(<span class="r102 r">updatedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#6c108e193a5974bc" class="i property">KeyOps</a>, <span class="r100 r">operations</span>);
                    <span class="r102 r">updatedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#6c108e193a5974bc" class="i property">KeyOps</a> = <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#b9f5c67cab5ac556" class="t t">JsonWebKeyOperation</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#e2f7f08e654cef62" class="i property">AllOperations</a>;
                    <a href="#7a6ac99fa29d88de" class="i method">VerifyWebKeysAreEqual</a>(<span class="r102 r">updatedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>, <span class="r101 r">createdKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>);
                    <span class="t t">Assert</span>.<span class="i method">False</span>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>(<span class="r102 r">updatedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>.<a href="/Microsoft.Azure.KeyVault/A.html#6f61b8808869ab29" class="i property">RecoveryLevel</a>));
 
                    <span class="c">// Create a new version of the key</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#743f0f51eba1582c" class="k">var</a> <span id="r103 rd" class="r103 r">newkeyVersion</span> = <span class="r97 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#397812f0585de74b" class="i method">CreateKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r98 r">keyName</span>, <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#c90001f143f0f6b2" class="t t">JsonWebKeyType</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#cc9d39c080719cc8" class="i field">Rsa</a>, 2048,
                        <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#b9f5c67cab5ac556" class="t t">JsonWebKeyOperation</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#e2f7f08e654cef62" class="i property">AllOperations</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="c">// Update the original version</span>
                    <span class="r99 r">attributes</span>.<a href="/Microsoft.Azure.KeyVault/A.html#4711a60053ea2d77" class="i property">Enabled</a> = <b>false</b>;
                    <span class="r99 r">attributes</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ca02021b80a17394" class="i property">NotBefore</a> = <a href="/Microsoft.Rest.ClientRuntime/A.html#52708b14f5a48f7d" class="t t">UnixTimeJsonConverter</a>.<a href="/Microsoft.Rest.ClientRuntime/A.html#081c0abd8e0c5025" class="i field">EpochDate</a>.<a href="@0@mscorlib/A.html#4a8bd6c0b5c72d81" class="i method">AddSeconds</a>(631180800);
                    <span class="r99 r">attributes</span>.<a href="/Microsoft.Azure.KeyVault/A.html#2fedfe0e857808a8" class="i property">Expires</a> = <a href="/Microsoft.Rest.ClientRuntime/A.html#52708b14f5a48f7d" class="t t">UnixTimeJsonConverter</a>.<a href="/Microsoft.Rest.ClientRuntime/A.html#081c0abd8e0c5025" class="i field">EpochDate</a>.<a href="@0@mscorlib/A.html#4a8bd6c0b5c72d81" class="i method">AddSeconds</a>(662716800);
 
                    <span class="r102 r">updatedKey</span> =
                        <span class="r97 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9f294e8d2436f08f" class="i method">UpdateKeyAsync</a>(<span class="r101 r">createdKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#fe5560cce3efa496" class="i property">Kid</a>, <span class="r100 r">operations</span>, <span class="r99 r">attributes</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <a href="#a28594ab30d1ad75" class="i method">VerifyKeyAttributesAreEqual</a>(<span class="r102 r">updatedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>, <span class="r99 r">attributes</span>);
                    <a href="#7b23e4a6420b13bf" class="i method">VerifyKeyOperationsAreEqual</a>(<span class="r102 r">updatedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#6c108e193a5974bc" class="i property">KeyOps</a>, <span class="r100 r">operations</span>);
                    <span class="r102 r">updatedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#6c108e193a5974bc" class="i property">KeyOps</a> = <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#b9f5c67cab5ac556" class="t t">JsonWebKeyOperation</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#e2f7f08e654cef62" class="i property">AllOperations</a>;
                    <a href="#7a6ac99fa29d88de" class="i method">VerifyWebKeysAreEqual</a>(<span class="r102 r">updatedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>, <span class="r101 r">createdKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>);
                    <span class="t t">Assert</span>.<span class="i method">False</span>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>(<span class="r102 r">updatedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>.<a href="/Microsoft.Azure.KeyVault/A.html#6f61b8808869ab29" class="i property">RecoveryLevel</a>));
                }
                <b>finally</b>
                {
                    <span class="r97 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#335f4fcea9c611fe" class="i method">DeleteKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r98 r">keyName</span>).<a href="@0@mscorlib/A.html#1bfe9e19e44f4cfa" class="i method">Wait</a>();
 
                    <b>if</b> (<a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>)
                    {
                        <a href="#741e26b08beafc2c" class="k">this</a>.<a href="#671cc04f42f659fd" class="i field">fixture</a>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#b6d1f1bc3162b584" class="i method">WaitOnDeletedKey</a>(<span class="r97 r">client</span>, <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r98 r">keyName</span>);
 
                        <span class="r97 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#43183fccf012c992" class="i method">PurgeDeletedKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r98 r">keyName</span>).<a href="@0@mscorlib/A.html#9865ec4fb8abca74" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#fac5be2731353aa8" class="i method">GetResult</a>();
                    }
                }
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="06d5f0cbc340b216" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">UpdateKeyAttributesWithNoChangeTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r104 rd" class="r104 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
 
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r105 rd" class="r105 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r106 rd" class="r106 r">keyName</span> = <span class="s">&quot;UpdateKeyAttributesWithNoChangeTest&quot;</span>;
                <b>try</b>
                {
                    <a href="@0@mscorlib/A.html#f1b135ff6c380b37" class="k">var</a> <span id="r107 rd" class="r107 r">enabledState</span> = <b>false</b>;
                    <a href="/Microsoft.Azure.KeyVault/A.html#94343e9880a92aee" class="k">var</a> <span id="r108 rd" class="r108 r">attributes</span> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#0f357404091624d2" class="t constructor">KeyAttributes</a>()
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#4711a60053ea2d77" class="i property">Enabled</a> = <span class="r107 r">enabledState</span>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#2fedfe0e857808a8" class="i property">Expires</a> = <b>new</b> <a href="@0@mscorlib/A.html#8a120337def0a93a" class="t constructor">DateTime</a>(2030, 1, 1).<a href="@0@mscorlib/A.html#fddce8be2da82dfc" class="i method">ToUniversalTime</a>(),
                        <a href="/Microsoft.Azure.KeyVault/A.html#ca02021b80a17394" class="i property">NotBefore</a> = <b>new</b> <a href="@0@mscorlib/A.html#8a120337def0a93a" class="t constructor">DateTime</a>(2010, 1, 1).<a href="@0@mscorlib/A.html#fddce8be2da82dfc" class="i method">ToUniversalTime</a>()
                    };
                    <a href="/Microsoft.Azure.KeyVault/A.html#743f0f51eba1582c" class="k">var</a> <span id="r109 rd" class="r109 r">createdKey</span> =
                        <span class="r105 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#397812f0585de74b" class="i method">CreateKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r106 r">keyName</span>, <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#c90001f143f0f6b2" class="t t">JsonWebKeyType</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#cc9d39c080719cc8" class="i field">Rsa</a>, 2048,
                            <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#b9f5c67cab5ac556" class="t t">JsonWebKeyOperation</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#e2f7f08e654cef62" class="i property">AllOperations</a>, <span class="r108 r">attributes</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <a href="/Microsoft.Azure.KeyVault/A.html#94343e9880a92aee" class="k">var</a> <span id="r110 rd" class="r110 r">attributes2</span> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#0f357404091624d2" class="t constructor">KeyAttributes</a>()
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#4711a60053ea2d77" class="i property">Enabled</a> = <b>null</b>, <span class="c">//when attributes are null there should not be any change</span>
                        <a href="/Microsoft.Azure.KeyVault/A.html#ca02021b80a17394" class="i property">NotBefore</a> = <b>null</b>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#2fedfe0e857808a8" class="i property">Expires</a> = <b>null</b>
                    };
 
                    <span class="c">// You cannot update a specific version of a key, only the current version</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#743f0f51eba1582c" class="k">var</a> <span id="r111 rd" class="r111 r">updatedKey</span> =
                        <span class="r105 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#0b605315dfccd6b3" class="i method">UpdateKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r106 r">keyName</span>, <b>null</b>, <span class="r108 r">attributes</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <a href="#a28594ab30d1ad75" class="i method">VerifyKeyAttributesAreEqual</a>(<span class="r111 r">updatedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>, <span class="r109 r">createdKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>);
                    <a href="#7b23e4a6420b13bf" class="i method">VerifyKeyOperationsAreEqual</a>(<span class="r111 r">updatedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#6c108e193a5974bc" class="i property">KeyOps</a>, <span class="r109 r">createdKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#6c108e193a5974bc" class="i property">KeyOps</a>);
                    <a href="#7a6ac99fa29d88de" class="i method">VerifyWebKeysAreEqual</a>(<span class="r111 r">updatedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>, <span class="r109 r">createdKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>);
                    <span class="t t">Assert</span>.<span class="i method">False</span>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>(<span class="r111 r">updatedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>.<a href="/Microsoft.Azure.KeyVault/A.html#6f61b8808869ab29" class="i property">RecoveryLevel</a>));
                }
                <b>finally</b>
                {
                    <span class="r105 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#335f4fcea9c611fe" class="i method">DeleteKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r106 r">keyName</span>).<a href="@0@mscorlib/A.html#1bfe9e19e44f4cfa" class="i method">Wait</a>();
 
                    <b>if</b> (<a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>)
                    {
                        <a href="#741e26b08beafc2c" class="k">this</a>.<a href="#671cc04f42f659fd" class="i field">fixture</a>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#b6d1f1bc3162b584" class="i method">WaitOnDeletedKey</a>(<span class="r105 r">client</span>, <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r106 r">keyName</span>);
 
                        <span class="r105 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#43183fccf012c992" class="i method">PurgeDeletedKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r106 r">keyName</span>).<a href="@0@mscorlib/A.html#9865ec4fb8abca74" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#fac5be2731353aa8" class="i method">GetResult</a>();
                    }
                }
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="5e505aff4d6a052d" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">KeyBackupRestoreTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r112 rd" class="r112 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
 
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r113 rd" class="r113 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r114 rd" class="r114 r">keyName</span> = <span class="s">&quot;KeyBackupRestoreTest&quot;</span>;
 
                <a href="/Microsoft.Azure.KeyVault/A.html#94343e9880a92aee" class="k">var</a> <span id="r115 rd" class="r115 r">attribute</span> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#0f357404091624d2" class="t constructor">KeyAttributes</a>()
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#4711a60053ea2d77" class="i property">Enabled</a> = <b>false</b>,
                    <a href="/Microsoft.Azure.KeyVault/A.html#2fedfe0e857808a8" class="i property">Expires</a> = <b>new</b> <a href="@0@mscorlib/A.html#8a120337def0a93a" class="t constructor">DateTime</a>(2030, 1, 1).<a href="@0@mscorlib/A.html#fddce8be2da82dfc" class="i method">ToUniversalTime</a>(),
                    <a href="/Microsoft.Azure.KeyVault/A.html#ca02021b80a17394" class="i property">NotBefore</a> = <b>new</b> <a href="@0@mscorlib/A.html#8a120337def0a93a" class="t constructor">DateTime</a>(2010, 1, 1).<a href="@0@mscorlib/A.html#fddce8be2da82dfc" class="i method">ToUniversalTime</a>()
                };
                <b>bool</b> <span id="r116 rd" class="r116 r">recoveryLevelIsConsistent</span> = <b>true</b>;
 
                <a href="/Microsoft.Azure.KeyVault/A.html#743f0f51eba1582c" class="k">var</a> <span id="r117 rd" class="r117 r">createdKey</span> = <span class="r113 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#397812f0585de74b" class="i method">CreateKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r114 r">keyName</span>, <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#c90001f143f0f6b2" class="t t">JsonWebKeyType</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#cc9d39c080719cc8" class="i field">Rsa</a>, 2048,
                    <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#b9f5c67cab5ac556" class="t t">JsonWebKeyOperation</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#e2f7f08e654cef62" class="i property">AllOperations</a>, <span class="r115 r">attribute</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                <b>try</b>
                {
                    <span class="r116 r">recoveryLevelIsConsistent</span> &amp;= <a href="#354b1e47c92614c0" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r117 r">createdKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
 
                    <span class="c">// Backup the key</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#7a813fb250bec4a4" class="k">var</a> <span id="r118 rd" class="r118 r">backupResponse</span> = <span class="r113 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#c2a65916e555a033" class="i method">BackupKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r114 r">keyName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="r113 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#335f4fcea9c611fe" class="i method">DeleteKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r114 r">keyName</span>).<a href="@0@mscorlib/A.html#1bfe9e19e44f4cfa" class="i method">Wait</a>();
 
                    <b>if</b> (<a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>)
                    {
                        <a href="#741e26b08beafc2c" class="k">this</a>.<a href="#671cc04f42f659fd" class="i field">fixture</a>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#b6d1f1bc3162b584" class="i method">WaitOnDeletedKey</a>(<span class="r113 r">client</span>, <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r114 r">keyName</span>);
 
                        <span class="r113 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#43183fccf012c992" class="i method">PurgeDeletedKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r114 r">keyName</span>).<a href="@0@mscorlib/A.html#1bfe9e19e44f4cfa" class="i method">Wait</a>();
                    }
 
                    <span class="c">// Restore the backedup key</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#743f0f51eba1582c" class="k">var</a> <span id="r119 rd" class="r119 r">restoredDeletedKey</span> =
                        <a href="#741e26b08beafc2c" class="k">this</a>.<a href="#671cc04f42f659fd" class="i field">fixture</a>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#c03b35938bb26bad" class="i property">retryExecutor</a>.<a href="/Microsoft.Rest.ClientRuntime/A.html#c9b46010de36a324" class="i method">ExecuteAction</a>(() =&gt; <span class="r113 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#b82c8c9de4a530f4" class="i method">RestoreKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r118 r">backupResponse</span>.<a href="/Microsoft.Azure.KeyVault/A.html#09ae20c6260dfd7f" class="i property">Value</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>());
 
                    <a href="#a28594ab30d1ad75" class="i method">VerifyKeyAttributesAreEqual</a>(<span class="r119 r">restoredDeletedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>, <span class="r117 r">createdKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>);
                    <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r119 r">restoredDeletedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#bf5694ab09c369fd" class="i property">Kty</a>, <span class="r117 r">createdKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#bf5694ab09c369fd" class="i property">Kty</a>);
                    <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r117 r">createdKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#fe5560cce3efa496" class="i property">Kid</a>, <span class="r119 r">restoredDeletedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#fe5560cce3efa496" class="i property">Kid</a>);
                    <span class="t t">Assert</span>.<span class="i method">False</span>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>(<span class="r119 r">restoredDeletedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>.<a href="/Microsoft.Azure.KeyVault/A.html#6f61b8808869ab29" class="i property">RecoveryLevel</a>));
                    <span class="r116 r">recoveryLevelIsConsistent</span> &amp;= <a href="#354b1e47c92614c0" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r119 r">restoredDeletedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
                }
                <b>finally</b>
                {
                    <a href="#741e26b08beafc2c" class="k">this</a>.<a href="#671cc04f42f659fd" class="i field">fixture</a>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#b6a74640d29c4795" class="i method">WaitOnKey</a>(<span class="r113 r">client</span>, <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r114 r">keyName</span>);
 
                    <span class="r113 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#335f4fcea9c611fe" class="i method">DeleteKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r114 r">keyName</span>).<a href="@0@mscorlib/A.html#1bfe9e19e44f4cfa" class="i method">Wait</a>();
 
                    <b>if</b> (<a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>)
                    {
                        <a href="#741e26b08beafc2c" class="k">this</a>.<a href="#671cc04f42f659fd" class="i field">fixture</a>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#b6d1f1bc3162b584" class="i method">WaitOnDeletedKey</a>(<span class="r113 r">client</span>, <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r114 r">keyName</span>);
 
                        <span class="r113 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#43183fccf012c992" class="i method">PurgeDeletedKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r114 r">keyName</span>).<a href="@0@mscorlib/A.html#1bfe9e19e44f4cfa" class="i method">Wait</a>();
                    }
                }
 
                <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r116 r">recoveryLevelIsConsistent</span>, <span class="s">&quot;the &#39;recoveryLevel&#39; attribute did not consistently return the expected value.&quot;</span>);
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="1a7eccf374e03fc2" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SecretBackupRestoreTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r120 rd" class="r120 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
 
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r121 rd" class="r121 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r122 rd" class="r122 r">name</span> = <span class="s">&quot;SecretBackupRestoreTest&quot;</span>;
                <b>bool</b> <span id="r123 rd" class="r123 r">recoveryLevelIsConsistent</span> = <b>true</b>;
                <a href="/Microsoft.Azure.KeyVault/A.html#e8a7f2beef67b9de" class="k">var</a> <span id="r124 rd" class="r124 r">attributes</span> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#b0430cde654673e4" class="t constructor">SecretAttributes</a>()
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#4711a60053ea2d77" class="i property">Enabled</a> = <b>true</b>,
                    <a href="/Microsoft.Azure.KeyVault/A.html#2fedfe0e857808a8" class="i property">Expires</a> = <b>new</b> <a href="@0@mscorlib/A.html#8a120337def0a93a" class="t constructor">DateTime</a>(2030, 1, 1).<a href="@0@mscorlib/A.html#fddce8be2da82dfc" class="i method">ToUniversalTime</a>(),
                    <a href="/Microsoft.Azure.KeyVault/A.html#ca02021b80a17394" class="i property">NotBefore</a> = <b>new</b> <a href="@0@mscorlib/A.html#8a120337def0a93a" class="t constructor">DateTime</a>(2010, 1, 1).<a href="@0@mscorlib/A.html#fddce8be2da82dfc" class="i method">ToUniversalTime</a>()
                };
 
                <a href="/Microsoft.Azure.KeyVault/A.html#15b4a290938630b9" class="k">var</a> <span id="r125 rd" class="r125 r">created</span> = <span class="r121 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ab03bc4063ebca80" class="i method">SetSecretAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r122 r">name</span>, <span class="s">&quot;if found please return to secretbackuprestoretest&quot;</span>, <span class="r126 r">tags</span>: <b>null</b>, <span class="r127 r">contentType</span>: <span class="s">&quot;text&quot;</span>, <span class="r128 r">secretAttributes</span>: <span class="r124 r">attributes</span>)
                    .<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>()
                    .<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                <span class="r123 r">recoveryLevelIsConsistent</span> &amp;= <a href="#86a8dc90ba3ffe0b" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r125 r">created</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9a4406fe683e270b" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
 
                <b>try</b>
                {
                    <span class="c">// Backup the secret</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#c250b3a6f2d63ecb" class="k">var</a> <span id="r129 rd" class="r129 r">backupResponse</span> = <span class="r121 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#822d72f645a2be01" class="i method">BackupSecretAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r122 r">name</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="r121 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#af6c3fb426a1155a" class="i method">DeleteSecretAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r122 r">name</span>).<a href="@0@mscorlib/A.html#1bfe9e19e44f4cfa" class="i method">Wait</a>();
 
                    <b>if</b> (<a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>)
                    {
                        <a href="#741e26b08beafc2c" class="k">this</a>.<a href="#671cc04f42f659fd" class="i field">fixture</a>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#691e84f490bad5d6" class="i method">WaitOnDeletedSecret</a>(<span class="r121 r">client</span>, <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r122 r">name</span>);
 
                        <span class="r121 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#b5ae1223f0a3c8b9" class="i method">PurgeDeletedSecretAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r122 r">name</span>).<a href="@0@mscorlib/A.html#1bfe9e19e44f4cfa" class="i method">Wait</a>();
                    }
 
                    <span class="c">// Restore the backedup secret</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#15b4a290938630b9" class="k">var</a> <span id="r130 rd" class="r130 r">restoredDeletedSecret</span> =
                        <a href="#741e26b08beafc2c" class="k">this</a>.<a href="#671cc04f42f659fd" class="i field">fixture</a>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#c03b35938bb26bad" class="i property">retryExecutor</a>.<a href="/Microsoft.Rest.ClientRuntime/A.html#c9b46010de36a324" class="i method">ExecuteAction</a>(() =&gt; <span class="r121 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#47c9f1c6311960d4" class="i method">RestoreSecretAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r129 r">backupResponse</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5adab54637a7fd66" class="i property">Value</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>());
 
                    <a href="#110390c8c9ea856f" class="i method">VerifySecretAttributesAreEqual</a>(<span class="r130 r">restoredDeletedSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9a4406fe683e270b" class="i property">Attributes</a>, <span class="r125 r">created</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9a4406fe683e270b" class="i property">Attributes</a>);
                    <span class="r123 r">recoveryLevelIsConsistent</span> &amp;= <a href="#86a8dc90ba3ffe0b" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r130 r">restoredDeletedSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9a4406fe683e270b" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
                    <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r125 r">created</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bc566805b6e87028" class="i property">Id</a>, <span class="r130 r">restoredDeletedSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bc566805b6e87028" class="i property">Id</a>);
                }
                <b>finally</b>
                {
                    <a href="#741e26b08beafc2c" class="k">this</a>.<a href="#671cc04f42f659fd" class="i field">fixture</a>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#20d7f98b39e5e554" class="i method">WaitOnSecret</a>(<span class="r121 r">client</span>, <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r122 r">name</span>);
 
                    <span class="r121 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#af6c3fb426a1155a" class="i method">DeleteSecretAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r122 r">name</span>).<a href="@0@mscorlib/A.html#1bfe9e19e44f4cfa" class="i method">Wait</a>();
 
                    <b>if</b> (<a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>)
                    {
                        <a href="#741e26b08beafc2c" class="k">this</a>.<a href="#671cc04f42f659fd" class="i field">fixture</a>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#691e84f490bad5d6" class="i method">WaitOnDeletedSecret</a>(<span class="r121 r">client</span>, <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r122 r">name</span>);
 
                        <span class="r121 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#b5ae1223f0a3c8b9" class="i method">PurgeDeletedSecretAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r122 r">name</span>).<a href="@0@mscorlib/A.html#1bfe9e19e44f4cfa" class="i method">Wait</a>();
                    }
                }
 
                <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r123 r">recoveryLevelIsConsistent</span>, <span class="s">&quot;the &#39;recoveryLevel&#39; attribute did not consistently return the expected value.&quot;</span>);
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="edea4e4cb85506e6" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ListKeysTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r131 rd" class="r131 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
 
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r132 rd" class="r132 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <b>int</b> <span id="r133 rd" class="r133 r">numKeys</span> = 3;
                <b>int</b> <span id="r134 rd" class="r134 r">maxResults</span> = 1;
                <b>bool</b> <span id="r135 rd" class="r135 r">recoveryLevelIsConsistent</span> = <b>true</b>;
 
                <a href="@0@System.Core/A.html#2d265edc718b158b" class="k">var</a> <span id="r136 rd" class="r136 r">addedObjects</span> = <b>new</b> <a href="@0@System.Core/A.html#eca9ea30fa3b2c28" class="t constructor">HashSet</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;();
 
                <span class="c">//Create the keys</span>
                <b>for</b> (<b>int</b> <span id="r137 rd" class="r137 r">i</span> = 0; <span class="r137 r">i</span> &lt; <span class="r133 r">numKeys</span>; <span class="r137 r">i</span>++)
                {
                    <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r138 rd" class="r138 r">keyName</span> = <span class="s">&quot;listkeytest&quot;</span> + <span class="r137 r">i</span>.<a href="@0@mscorlib/A.html#8d6f2d8bc0589463" class="i method">ToString</a>();
 
                    <a href="/Microsoft.Azure.KeyVault/A.html#743f0f51eba1582c" class="k">var</a> <span id="r139 rd" class="r139 r">addedKey</span> =
                        <span class="r132 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#397812f0585de74b" class="i method">CreateKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r138 r">keyName</span>, <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#c90001f143f0f6b2" class="t t">JsonWebKeyType</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#cc9d39c080719cc8" class="i field">Rsa</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="r136 r">addedObjects</span>.<a href="@0@System.Core/A.html#43a2b651926474a7" class="i method">Add</a>(<a href="#b4de92fda68305c4" class="i method">GetKidWithoutVersion</a>(<span class="r139 r">addedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#fe5560cce3efa496" class="i property">Kid</a>));
 
                    <span class="r135 r">recoveryLevelIsConsistent</span> &amp;= <a href="#354b1e47c92614c0" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r139 r">addedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
                }
 
                <span class="c">//List the keys</span>
                <a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#8125b18f5d7ee303" class="k">var</a> <span id="r140 rd" class="r140 r">listResponse</span> = <span class="r132 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bbc2547ab56a23bc" class="i method">GetKeysAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r134 r">maxResults</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r140 r">listResponse</span>);
                <b>foreach</b> (<a href="/Microsoft.Azure.KeyVault/A.html#6472aadfda4bfd1c" class="t t">KeyItem</a> <span id="r141 rd" class="r141 r">m</span> <b>in</b> <span class="r140 r">listResponse</span>)
                {
                    <b>if</b> (<span class="r136 r">addedObjects</span>.<a href="@0@System.Core/A.html#06d905a0ac76e4f5" class="i method">Contains</a>(<span class="r141 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#06d7a9b7272efd82" class="i property">Kid</a>))
                    {
                        <span class="t t">Assert</span>.<span class="i method">StartsWith</span>(<span class="s">&quot;listkeytest&quot;</span>, <span class="r141 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#30ee90480e14824c" class="i property">Identifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>);
                        <span class="r136 r">addedObjects</span>.<a href="@0@System.Core/A.html#4e77ae9204a00be6" class="i method">Remove</a>(<span class="r141 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#06d7a9b7272efd82" class="i property">Kid</a>);
                    }
 
                    <span class="r135 r">recoveryLevelIsConsistent</span> &amp;= <a href="#354b1e47c92614c0" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r141 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#648318a5c5bddf09" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
                }
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r142 rd" class="r142 r">nextLink</span> = <span class="r140 r">listResponse</span>.<a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#e77457a6e30fcfe3" class="i property">NextPageLink</a>;
                <b>while</b> (!<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#23a8597f842071f4" class="i method">IsNullOrEmpty</a>(<span class="r142 r">nextLink</span>))
                {
                    <a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#8125b18f5d7ee303" class="k">var</a> <span id="r143 rd" class="r143 r">listNextResponse</span> = <span class="r132 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#68908d206345a58c" class="i method">GetKeysNextAsync</a>(<span class="r142 r">nextLink</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r143 r">listNextResponse</span>);
                    <b>foreach</b> (<a href="/Microsoft.Azure.KeyVault/A.html#6472aadfda4bfd1c" class="t t">KeyItem</a> <span id="r144 rd" class="r144 r">m</span> <b>in</b> <span class="r143 r">listNextResponse</span>)
                    {
                        <b>if</b> (<span class="r136 r">addedObjects</span>.<a href="@0@System.Core/A.html#06d905a0ac76e4f5" class="i method">Contains</a>(<span class="r144 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#06d7a9b7272efd82" class="i property">Kid</a>))
                        {
                            <span class="t t">Assert</span>.<span class="i method">StartsWith</span>(<span class="s">&quot;listkeytest&quot;</span>, <span class="r144 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#30ee90480e14824c" class="i property">Identifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>);
                            <span class="r136 r">addedObjects</span>.<a href="@0@System.Core/A.html#4e77ae9204a00be6" class="i method">Remove</a>(<span class="r144 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#06d7a9b7272efd82" class="i property">Kid</a>);
                        }
 
                        <span class="r135 r">recoveryLevelIsConsistent</span> &amp;= <a href="#354b1e47c92614c0" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r144 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#648318a5c5bddf09" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
                    }
                    <span class="r142 r">nextLink</span> = <span class="r143 r">listNextResponse</span>.<a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#e77457a6e30fcfe3" class="i property">NextPageLink</a>;
                }
 
                <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r136 r">addedObjects</span>.<a href="@0@System.Core/A.html#905bec8c22644c82" class="i property">Count</a> == 0);
                <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r135 r">recoveryLevelIsConsistent</span>, <span class="s">&quot;the &#39;recoveryLevel&#39; attribute did not consistently return the expected value.&quot;</span>);
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="9038b7f446194cf0" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ListKeyVersionsTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r145 rd" class="r145 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
 
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r146 rd" class="r146 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <b>int</b> <span id="r147 rd" class="r147 r">numKeys</span> = 3;
                <b>int</b> <span id="r148 rd" class="r148 r">maxResults</span> = 1;
                <b>bool</b> <span id="r149 rd" class="r149 r">recoveryLevelIsConsistent</span> = <b>true</b>;
 
                <a href="@0@System.Core/A.html#2d265edc718b158b" class="k">var</a> <span id="r150 rd" class="r150 r">addedObjects</span> = <b>new</b> <a href="@0@System.Core/A.html#eca9ea30fa3b2c28" class="t constructor">HashSet</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;();
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r151 rd" class="r151 r">keyName</span> = <span class="s">&quot;listkeyversionstest&quot;</span>;
 
                <span class="c">//Create the keys</span>
                <b>for</b> (<b>int</b> <span id="r152 rd" class="r152 r">i</span> = 0; <span class="r152 r">i</span> &lt; <span class="r147 r">numKeys</span>; <span class="r152 r">i</span>++)
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#743f0f51eba1582c" class="k">var</a> <span id="r153 rd" class="r153 r">addedKey</span> =
                        <span class="r146 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#397812f0585de74b" class="i method">CreateKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r151 r">keyName</span>, <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#c90001f143f0f6b2" class="t t">JsonWebKeyType</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#cc9d39c080719cc8" class="i field">Rsa</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="r150 r">addedObjects</span>.<a href="@0@System.Core/A.html#43a2b651926474a7" class="i method">Add</a>(<span class="r153 r">addedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#fe5560cce3efa496" class="i property">Kid</a>);
 
                    <span class="r149 r">recoveryLevelIsConsistent</span> &amp;= <a href="#354b1e47c92614c0" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r153 r">addedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
                }
 
                <span class="c">//List the keys</span>
                <a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#8125b18f5d7ee303" class="k">var</a> <span id="r154 rd" class="r154 r">listResponse</span> = <span class="r146 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#2336e002dfe99ad6" class="i method">GetKeyVersionsAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r151 r">keyName</span>, <span class="r148 r">maxResults</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r154 r">listResponse</span>);
                <b>foreach</b> (<a href="/Microsoft.Azure.KeyVault/A.html#6472aadfda4bfd1c" class="t t">KeyItem</a> <span id="r155 rd" class="r155 r">m</span> <b>in</b> <span class="r154 r">listResponse</span>)
                {
                    <b>if</b> (<span class="r150 r">addedObjects</span>.<a href="@0@System.Core/A.html#06d905a0ac76e4f5" class="i method">Contains</a>(<span class="r155 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#06d7a9b7272efd82" class="i property">Kid</a>))
                        <span class="r150 r">addedObjects</span>.<a href="@0@System.Core/A.html#4e77ae9204a00be6" class="i method">Remove</a>(<span class="r155 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#06d7a9b7272efd82" class="i property">Kid</a>);
 
                    <span class="r149 r">recoveryLevelIsConsistent</span> &amp;= <a href="#354b1e47c92614c0" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r155 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#648318a5c5bddf09" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
                }
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r156 rd" class="r156 r">nextLink</span> = <span class="r154 r">listResponse</span>.<a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#e77457a6e30fcfe3" class="i property">NextPageLink</a>;
                <b>while</b> (!<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#23a8597f842071f4" class="i method">IsNullOrEmpty</a>(<span class="r156 r">nextLink</span>))
                {
                    <a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#8125b18f5d7ee303" class="k">var</a> <span id="r157 rd" class="r157 r">listNextResponse</span> = <span class="r146 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#4a885845a7f6a926" class="i method">GetKeyVersionsNextAsync</a>(<span class="r156 r">nextLink</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r157 r">listNextResponse</span>);
                    <b>foreach</b> (<a href="/Microsoft.Azure.KeyVault/A.html#6472aadfda4bfd1c" class="t t">KeyItem</a> <span id="r158 rd" class="r158 r">m</span> <b>in</b> <span class="r157 r">listNextResponse</span>)
                    {
                        <b>if</b> (<span class="r150 r">addedObjects</span>.<a href="@0@System.Core/A.html#06d905a0ac76e4f5" class="i method">Contains</a>(<span class="r158 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#06d7a9b7272efd82" class="i property">Kid</a>))
                            <span class="r150 r">addedObjects</span>.<a href="@0@System.Core/A.html#4e77ae9204a00be6" class="i method">Remove</a>(<span class="r158 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#06d7a9b7272efd82" class="i property">Kid</a>);
 
                        <span class="r149 r">recoveryLevelIsConsistent</span> &amp;= <a href="#354b1e47c92614c0" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r158 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#648318a5c5bddf09" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
                    }
                    <span class="r156 r">nextLink</span> = <span class="r157 r">listNextResponse</span>.<a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#e77457a6e30fcfe3" class="i property">NextPageLink</a>;
                }
 
                <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r150 r">addedObjects</span>.<a href="@0@System.Core/A.html#905bec8c22644c82" class="i property">Count</a> == 0);
                <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r149 r">recoveryLevelIsConsistent</span>, <span class="s">&quot;the &#39;recoveryLevel&#39; attribute did not consistently return the expected value.&quot;</span>);
            }
        }
<span class="k preprocess">#</span><span class="k preprocess">endregion</span>
 
<span class="k preprocess">#</span><span class="k preprocess">region</span> Deleted Key Operations
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="0ede77eb8347134a" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetDeletedKeyTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r159 rd" class="r159 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r160 rd" class="r160 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <span class="c">// settings may not be loaded until the client is fully initialized</span>
                <b>if</b> (!<a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>) <b>return</b>;
 
                <b>bool</b> <span id="r161 rd" class="r161 r">recoveryLevelIsConsistent</span> = <b>true</b>;
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r162 rd" class="r162 r">keyName</span> = <span class="s">&quot;GetDeletedKeyTest&quot;</span>;
                <a href="/Microsoft.Azure.KeyVault/A.html#94343e9880a92aee" class="k">var</a> <span id="r163 rd" class="r163 r">attributes</span> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#0f357404091624d2" class="t constructor">KeyAttributes</a>();
                <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="k">var</a> <span id="r164 rd" class="r164 r">tags</span> = <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;() { { <span class="s">&quot;purpose&quot;</span>, <span class="s">&quot;unit test&quot;</span> }, { <span class="s">&quot;test name &quot;</span>, <span class="s">&quot;GetDeletedKeyTest&quot;</span> } };
                <a href="/Microsoft.Azure.KeyVault/A.html#743f0f51eba1582c" class="k">var</a> <span id="r165 rd" class="r165 r">createdKey</span> = <span class="r160 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#397812f0585de74b" class="i method">CreateKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r162 r">keyName</span>, <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#c90001f143f0f6b2" class="t t">JsonWebKeyType</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#cc9d39c080719cc8" class="i field">Rsa</a>, 2048,
                    <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#b9f5c67cab5ac556" class="t t">JsonWebKeyOperation</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#e2f7f08e654cef62" class="i property">AllOperations</a>, <span class="r163 r">attributes</span>, <span class="r164 r">tags</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                <span class="r161 r">recoveryLevelIsConsistent</span> &amp;= <a href="#354b1e47c92614c0" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r165 r">createdKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
 
                <a href="/Microsoft.Azure.KeyVault/A.html#fd8cfd7e3c1c8b34" class="k">var</a> <span id="r166 rd" class="r166 r">deletedKey</span> = <span class="r160 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#335f4fcea9c611fe" class="i method">DeleteKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r165 r">createdKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#dfd14afbda3fd0e3" class="i property">KeyIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                <span class="r161 r">recoveryLevelIsConsistent</span> &amp;= <a href="#354b1e47c92614c0" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r166 r">deletedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
 
                <b>try</b>
                {
                    <a href="#741e26b08beafc2c" class="k">this</a>.<a href="#671cc04f42f659fd" class="i field">fixture</a>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#b6d1f1bc3162b584" class="i method">WaitOnDeletedKey</a>(<span class="r160 r">client</span>, <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r162 r">keyName</span>);
 
                    <span class="c">// Get the deleted key using its recovery identifier</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#fd8cfd7e3c1c8b34" class="k">var</a> <span id="r167 rd" class="r167 r">getDeletedKey</span> = <span class="r160 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#94b481d56aebc00f" class="i method">GetDeletedKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r165 r">createdKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#dfd14afbda3fd0e3" class="i property">KeyIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <a href="#796564b83dd343d6" class="i method">VerifyIdsAreEqual</a>(<span class="r165 r">createdKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#fe5560cce3efa496" class="i property">Kid</a>, <span class="r167 r">getDeletedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#fe5560cce3efa496" class="i property">Kid</a>);
                    <a href="#796564b83dd343d6" class="i method">VerifyIdsAreEqual</a>(<span class="r166 r">deletedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#93a66b823973f00d" class="i property">RecoveryId</a>, <span class="r167 r">getDeletedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#93a66b823973f00d" class="i property">RecoveryId</a>);
                    <span class="r161 r">recoveryLevelIsConsistent</span> &amp;= <a href="#354b1e47c92614c0" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r167 r">getDeletedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
                }
                <b>finally</b>
                {
                    <a href="#741e26b08beafc2c" class="k">this</a>.<a href="#671cc04f42f659fd" class="i field">fixture</a>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#b6d1f1bc3162b584" class="i method">WaitOnDeletedKey</a>(<span class="r160 r">client</span>, <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r162 r">keyName</span>);
 
                    <span class="c">// Purge the key</span>
                    <span class="r160 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#43183fccf012c992" class="i method">PurgeDeletedKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r162 r">keyName</span>).<a href="@0@mscorlib/A.html#9865ec4fb8abca74" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#fac5be2731353aa8" class="i method">GetResult</a>();
                }
 
                <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r161 r">recoveryLevelIsConsistent</span>, <span class="s">&quot;the &#39;recoveryLevel&#39; attribute did not consistently return the expected value.&quot;</span>);
            }
        }
<span class="c">/*
        public void KeyCreateDeleteRecoverPurgeTest()
        {
            using (MockContext context = MockContext.Start(this.GetType()))
            {
                var client = GetKeyVaultClient();
 
                // settings may not be loaded until the client is fully initialized
                if (!_softDeleteEnabled) return;
 
                bool recoveryLevelIsConsistent = true;
                var keyName = &quot;CreateDeleteRecoverPurgeTest&quot;;
                var attributes = new KeyAttributes();
                var tags = new Dictionary&lt;string, string&gt;() { { &quot;purpose&quot;, &quot;unit test&quot; }, { &quot;test name &quot;, &quot;CreateDeleteRecoverPurgeTest&quot; } };
                var createdKey = client.CreateKeyAsync(_vaultAddress, keyName, JsonWebKeyType.Rsa, 2048,
                    JsonWebKeyOperation.AllOperations, attributes, tags).GetAwaiter().GetResult();
                recoveryLevelIsConsistent &amp;= VerifyDeletionRecoveryLevel(createdKey.Attributes, _softDeleteEnabled);
 
                var originalKey = client.GetKeyAsync(_vaultAddress, createdKey.KeyIdentifier.Name).GetAwaiter().GetResult();
                recoveryLevelIsConsistent &amp;= VerifyDeletionRecoveryLevel(originalKey.Attributes, _softDeleteEnabled);
 
                try
                {
                    // Delete the key
                    var deletedKey = client.DeleteKeyAsync(_vaultAddress, keyName).GetAwaiter().GetResult();
                    recoveryLevelIsConsistent &amp;= VerifyDeletionRecoveryLevel(deletedKey.Attributes, _softDeleteEnabled);
 
                    //verify the key is deleted
                    try
                    {
                        client.GetKeyAsync(_vaultAddress, keyName).GetAwaiter().GetResult();
                    }
                    catch (KeyVaultErrorException ex)
                    {
                        if (ex.Response.StatusCode != HttpStatusCode.NotFound || ex.Body.Error.Message != ex.Message)
                            throw;
                    }
 
                    this.fixture.WaitOnDeletedKey(client, _vaultAddress, keyName);
 
                    // Recover the key
                    var recoveredKey = client.RecoverDeletedKeyAsync(deletedKey.RecoveryId).GetAwaiter().GetResult();
                    VerifyKeyAttributesAreEqual(recoveredKey.Attributes, originalKey.Attributes);
                    VerifyKeyOperationsAreEqual(recoveredKey.Key.KeyOps, originalKey.Key.KeyOps);
                    Assert.Equal(keyName, recoveredKey.KeyIdentifier.Name);
                    Assert.Equal(originalKey.Key.Kid, recoveredKey.Key.Kid);
                    Assert.False(String.IsNullOrWhiteSpace(recoveredKey.Attributes.RecoveryLevel));
                    recoveryLevelIsConsistent &amp;= VerifyDeletionRecoveryLevel(recoveredKey.Attributes, _softDeleteEnabled);
 
                    this.fixture.WaitOnKey(client, _vaultAddress, keyName);
 
                    var recoveredGetKey = client.GetKeyAsync(_vaultAddress, keyName).GetAwaiter().GetResult();
                    VerifyKeyAttributesAreEqual(recoveredGetKey.Attributes, originalKey.Attributes);
                    VerifyKeyOperationsAreEqual(recoveredGetKey.Key.KeyOps, originalKey.Key.KeyOps);
                    Assert.Equal(keyName, recoveredGetKey.KeyIdentifier.Name);
                    Assert.Equal(originalKey.Key.Kid, recoveredGetKey.Key.Kid);
                    Assert.False(String.IsNullOrWhiteSpace(recoveredGetKey.Attributes.RecoveryLevel));
                    recoveryLevelIsConsistent &amp;= VerifyDeletionRecoveryLevel(recoveredGetKey.Attributes, _softDeleteEnabled);
                }
                finally
                {
                    this.fixture.WaitOnKey(client, _vaultAddress, keyName);
 
                    // Delete the key
                    var deletedKey = client.DeleteKeyAsync(_vaultAddress, keyName).GetAwaiter().GetResult();
                    recoveryLevelIsConsistent &amp;= VerifyDeletionRecoveryLevel(deletedKey.Attributes, _softDeleteEnabled);
 
                    //verify the key is deleted
                    try
                    {
                        client.GetKeyAsync(_vaultAddress, keyName).GetAwaiter().GetResult();
                    }
                    catch (KeyVaultErrorException ex)
                    {
                        if (ex.Response.StatusCode != HttpStatusCode.NotFound || ex.Body.Error.Message != ex.Message)
                            throw;
                    }
 
                    this.fixture.WaitOnDeletedKey(client, _vaultAddress, keyName);
 
                    // Purge the key
                    client.PurgeDeletedKeyAsync(deletedKey.RecoveryId).GetAwaiter().GetResult();
 
                    //verify the key is purged
                    try
                    {
                        client.GetDeletedKeyAsync(_vaultAddress, keyName).GetAwaiter().GetResult();
                    }
                    catch (KeyVaultErrorException ex)
                    {
                        if (ex.Response.StatusCode != HttpStatusCode.NotFound || ex.Body.Error.Message != ex.Message)
                            throw;
                    }
                }
 
                Assert.True(recoveryLevelIsConsistent, &quot;the &#39;recoveryLevel&#39; attribute did not consistently return the expected value.&quot;);
            }
        }
*/</span>
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="0711b0fc6cbe5ebd" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ListDeletedKeysTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r168 rd" class="r168 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r169 rd" class="r169 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <span class="c">// settings may not be loaded until the client is fully initialized</span>
                <b>if</b> (!<a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>) <b>return</b>;
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r170 rd" class="r170 r">keyNamePrefix</span> = <span class="s">&quot;listdeletedkeytest&quot;</span>;
                <b>int</b> <span id="r171 rd" class="r171 r">numKeys</span> = 3;
                <b>int</b> <span id="r172 rd" class="r172 r">maxResults</span> = 1;
                <b>bool</b> <span id="r173 rd" class="r173 r">recoveryLevelIsConsistent</span> = <b>true</b>;
 
                <a href="@0@System.Core/A.html#2d265edc718b158b" class="k">var</a> <span id="r174 rd" class="r174 r">addedObjects</span> = <b>new</b> <a href="@0@System.Core/A.html#eca9ea30fa3b2c28" class="t constructor">HashSet</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;();
                <a href="@0@System.Core/A.html#2d265edc718b158b" class="k">var</a> <span id="r175 rd" class="r175 r">removedObjects</span> = <b>new</b> <a href="@0@System.Core/A.html#eca9ea30fa3b2c28" class="t constructor">HashSet</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;();
 
                <span class="c">//Create and delete the keys</span>
                <b>for</b> (<b>int</b> <span id="r176 rd" class="r176 r">i</span> = 0; <span class="r176 r">i</span> &lt; <span class="r171 r">numKeys</span>; <span class="r176 r">i</span>++)
                {
                    <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r177 rd" class="r177 r">keyName</span> = <span class="r170 r">keyNamePrefix</span> + <span class="r176 r">i</span>.<a href="@0@mscorlib/A.html#8d6f2d8bc0589463" class="i method">ToString</a>();
 
                    <a href="/Microsoft.Azure.KeyVault/A.html#743f0f51eba1582c" class="k">var</a> <span id="r178 rd" class="r178 r">addedKey</span> =
                        <span class="r169 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#397812f0585de74b" class="i method">CreateKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r177 r">keyName</span>, <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#c90001f143f0f6b2" class="t t">JsonWebKeyType</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#cc9d39c080719cc8" class="i field">Rsa</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="r169 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#335f4fcea9c611fe" class="i method">DeleteKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r177 r">keyName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <a href="#741e26b08beafc2c" class="k">this</a>.<a href="#671cc04f42f659fd" class="i field">fixture</a>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#b6d1f1bc3162b584" class="i method">WaitOnDeletedKey</a>(<span class="r169 r">client</span>, <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r177 r">keyName</span>);
 
                    <span class="r174 r">addedObjects</span>.<a href="@0@System.Core/A.html#43a2b651926474a7" class="i method">Add</a>(<a href="#b4de92fda68305c4" class="i method">GetKidWithoutVersion</a>(<span class="r178 r">addedKey</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#fe5560cce3efa496" class="i property">Kid</a>));
                }
 
                <span class="c">//List the deleted keys</span>
                <a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#8125b18f5d7ee303" class="k">var</a> <span id="r179 rd" class="r179 r">listResponse</span> = <span class="r169 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9b63a6a3c9cd22a5" class="i method">GetDeletedKeysAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r172 r">maxResults</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r179 r">listResponse</span>);
                <b>foreach</b> (<a href="/Microsoft.Azure.KeyVault/A.html#111522a4fd3c1487" class="t t">DeletedKeyItem</a> <span id="r180 rd" class="r180 r">m</span> <b>in</b> <span class="r179 r">listResponse</span>)
                {
                    <b>if</b> (<span class="r174 r">addedObjects</span>.<a href="@0@System.Core/A.html#06d905a0ac76e4f5" class="i method">Contains</a>(<span class="r180 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#06d7a9b7272efd82" class="i property">Kid</a>))
                    {
                        <span class="t t">Assert</span>.<span class="i method">StartsWith</span>(<span class="r170 r">keyNamePrefix</span>, <span class="r180 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#30ee90480e14824c" class="i property">Identifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>);
                        <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r180 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#d62598f9ccbfc08f" class="i property">RecoveryId</a>);
                        <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r180 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#2f77db48ed9aa6a6" class="i property">ScheduledPurgeDate</a>);
                        <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r180 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#d68188a8251737c5" class="i property">DeletedDate</a>);
                        <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r180 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6ab06743e8cafebe" class="i property">RecoveryIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>, <span class="r180 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#30ee90480e14824c" class="i property">Identifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>);
                        <span class="t t">Assert</span>.<span class="i method">StartsWith</span>(<span class="r170 r">keyNamePrefix</span>, <span class="r180 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6ab06743e8cafebe" class="i property">RecoveryIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>);
 
                        <span class="r173 r">recoveryLevelIsConsistent</span> &amp;= <a href="#354b1e47c92614c0" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r180 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#648318a5c5bddf09" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
 
                        <span class="r174 r">addedObjects</span>.<a href="@0@System.Core/A.html#4e77ae9204a00be6" class="i method">Remove</a>(<span class="r180 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#06d7a9b7272efd82" class="i property">Kid</a>);
                        <span class="r175 r">removedObjects</span>.<a href="@0@System.Core/A.html#43a2b651926474a7" class="i method">Add</a>(<span class="r180 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#d62598f9ccbfc08f" class="i property">RecoveryId</a>);
                    }
                }
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r181 rd" class="r181 r">nextLink</span> = <span class="r179 r">listResponse</span>.<a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#e77457a6e30fcfe3" class="i property">NextPageLink</a>;
                <b>while</b> (!<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#23a8597f842071f4" class="i method">IsNullOrEmpty</a>(<span class="r181 r">nextLink</span>))
                {
                    <a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#8125b18f5d7ee303" class="k">var</a> <span id="r182 rd" class="r182 r">listNextResponse</span> = <span class="r169 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#711777ff7661e258" class="i method">GetDeletedKeysNextAsync</a>(<span class="r181 r">nextLink</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r182 r">listNextResponse</span>);
                    <b>foreach</b> (<a href="/Microsoft.Azure.KeyVault/A.html#111522a4fd3c1487" class="t t">DeletedKeyItem</a> <span id="r183 rd" class="r183 r">m</span> <b>in</b> <span class="r182 r">listNextResponse</span>)
                    {
                        <b>if</b> (<span class="r174 r">addedObjects</span>.<a href="@0@System.Core/A.html#06d905a0ac76e4f5" class="i method">Contains</a>(<span class="r183 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#06d7a9b7272efd82" class="i property">Kid</a>))
                        {
                            <span class="t t">Assert</span>.<span class="i method">StartsWith</span>(<span class="r170 r">keyNamePrefix</span>, <span class="r183 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#30ee90480e14824c" class="i property">Identifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>);
                            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r183 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#d62598f9ccbfc08f" class="i property">RecoveryId</a>);
                            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r183 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#2f77db48ed9aa6a6" class="i property">ScheduledPurgeDate</a>);
                            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r183 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#d68188a8251737c5" class="i property">DeletedDate</a>);
                            <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r183 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6ab06743e8cafebe" class="i property">RecoveryIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>, <span class="r183 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#30ee90480e14824c" class="i property">Identifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>);
                            <span class="t t">Assert</span>.<span class="i method">StartsWith</span>(<span class="r170 r">keyNamePrefix</span>,<span class="r183 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6ab06743e8cafebe" class="i property">RecoveryIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>);
 
                            <span class="r173 r">recoveryLevelIsConsistent</span> &amp;= <a href="#354b1e47c92614c0" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r183 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#648318a5c5bddf09" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
 
                            <span class="r174 r">addedObjects</span>.<a href="@0@System.Core/A.html#4e77ae9204a00be6" class="i method">Remove</a>(<span class="r183 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#06d7a9b7272efd82" class="i property">Kid</a>);
                            <span class="r175 r">removedObjects</span>.<a href="@0@System.Core/A.html#43a2b651926474a7" class="i method">Add</a>(<span class="r183 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#d62598f9ccbfc08f" class="i property">RecoveryId</a>);
                        }
                    }
                    <span class="r181 r">nextLink</span> = <span class="r182 r">listNextResponse</span>.<a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#e77457a6e30fcfe3" class="i property">NextPageLink</a>;
                }
 
                <b>foreach</b> (<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r184 rd" class="r184 r">recoveryId</span> <b>in</b> <span class="r175 r">removedObjects</span>)
                {
                    <span class="r169 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#dfd7c3c88895e37c" class="i method">PurgeDeletedKeyAsync</a>(<span class="r184 r">recoveryId</span>).<a href="@0@mscorlib/A.html#1bfe9e19e44f4cfa" class="i method">Wait</a>();
                }
 
                <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r174 r">addedObjects</span>.<a href="@0@System.Core/A.html#905bec8c22644c82" class="i property">Count</a> == 0);
                <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r173 r">recoveryLevelIsConsistent</span>, <span class="s">&quot;the &#39;recoveryLevel&#39; attribute did not consistently return the expected value.&quot;</span>);
            }
        }
<span class="k preprocess">#</span><span class="k preprocess">endregion</span>
 
<span class="k preprocess">#</span><span class="k preprocess">region</span> Secret Operations
<span class="c">/*
        public void SecretCreateUpdateDeleteTest()
        {
            using (MockContext context = MockContext.Start(this.GetType()))
            {
 
                var client = GetKeyVaultClient();
 
                string secretName = &quot;crpsecret&quot;;
                string originalSecretValue = &quot;mysecretvalue&quot;;
                bool recoveryLevelAttributeIsConsistent = true;
 
                var originalSecret =
                    client.SetSecretAsync(_vaultAddress, secretName, originalSecretValue).GetAwaiter().GetResult();
 
                VerifySecretValuesAreEqual(originalSecret.Value, originalSecretValue);
                Assert.Equal(secretName, originalSecret.SecretIdentifier.Name);
                recoveryLevelAttributeIsConsistent &amp;= VerifyDeletionRecoveryLevel(originalSecret.Attributes, _softDeleteEnabled);
 
                try
                {
                    // Get the original secret
                    var originalReadSecret = client.GetSecretAsync(originalSecret.Id).GetAwaiter().GetResult();
                    VerifySecretValuesAreEqual(originalReadSecret.Value, originalSecret.Value);
                    VerifyIdsAreEqual(originalSecret.Id, originalReadSecret.Id);
                    recoveryLevelAttributeIsConsistent &amp;= VerifyDeletionRecoveryLevel(originalReadSecret.Attributes, _softDeleteEnabled);
 
                    // Update the secret
                    var updatedSecretValue = &quot;mysecretvalue2&quot;;
                    var updatedSecret =
                        client.SetSecretAsync(_vaultAddress, secretName, updatedSecretValue).GetAwaiter().GetResult();
                    VerifySecretValuesAreNotEqual(originalSecret.Value, updatedSecret.Value);
                    VerifyIdsAreNotEqual(originalSecret.Id, updatedSecret.Id);
                    recoveryLevelAttributeIsConsistent &amp;= VerifyDeletionRecoveryLevel(updatedSecret.Attributes, _softDeleteEnabled);
 
                    // Read the secret using full identifier
                    var updatedReadSecret = client.GetSecretAsync(updatedSecret.Id).GetAwaiter().GetResult();
                    VerifySecretValuesAreEqual(updatedReadSecret.Value, updatedSecret.Value);
                    VerifyIdsAreEqual(updatedReadSecret.Id, updatedSecret.Id);
                    recoveryLevelAttributeIsConsistent &amp;= VerifyDeletionRecoveryLevel(updatedReadSecret.Attributes, _softDeleteEnabled);
 
                    // Read the secret with the version independent identifier
                    updatedReadSecret = client.GetSecretAsync(_vaultAddress, secretName).GetAwaiter().GetResult();
                    VerifySecretValuesAreEqual(updatedReadSecret.Value, updatedSecret.Value);
                    VerifyIdsAreEqual(updatedReadSecret.Id, updatedSecret.Id);
                    recoveryLevelAttributeIsConsistent &amp;= VerifyDeletionRecoveryLevel(updatedReadSecret.Attributes, _softDeleteEnabled);
                }
                finally
                {
                    // Delete the secret
                    var deletedSecret = client.DeleteSecretAsync(_vaultAddress, secretName).GetAwaiter().GetResult();
                    recoveryLevelAttributeIsConsistent &amp;= VerifyDeletionRecoveryLevel(deletedSecret.Attributes, _softDeleteEnabled);
 
                    if (_softDeleteEnabled)
                    {
                        this.fixture.WaitOnDeletedSecret(client, _vaultAddress, secretName);
 
                        client.PurgeDeletedSecretAsync(_vaultAddress, secretName).GetAwaiter().GetResult();
                    }
 
                    //verify the secret is deleted
                    try
                    {
                        client.GetSecretAsync(_vaultAddress, secretName).GetAwaiter().GetResult();
                    }
                    catch (KeyVaultErrorException ex)
                    {
                        if (ex.Response.StatusCode != HttpStatusCode.NotFound || ex.Body.Error.Message != ex.Message)
                            throw;
                    }
 
                    Assert.True(recoveryLevelAttributeIsConsistent, &quot;The recoveryLevel attribute did not return consistently the expected value&quot;);
                }
            }
        }
*/</span>
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="2a03e328729e2582" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetSecretVersionTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r185 rd" class="r185 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
 
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r186 rd" class="r186 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r187 rd" class="r187 r">secretName</span> = <span class="s">&quot;mysecretname&quot;</span>;
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r188 rd" class="r188 r">secretValue</span> = <span class="s">&quot;mysecretvalue&quot;</span>;
                <a href="/Microsoft.Azure.KeyVault/A.html#15b4a290938630b9" class="k">var</a> <span id="r189 rd" class="r189 r">secretOlder</span> = <span class="r186 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ab03bc4063ebca80" class="i method">SetSecretAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r187 r">secretName</span>, <span class="r188 r">secretValue</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                <b>bool</b> <span id="r190 rd" class="r190 r">recoveryLevelAttributeIsConsistent</span> = <b>true</b>;
 
                <b>try</b>
                {
                    <span class="c">// Get the latest secret using its identifier without version</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#c63c1ae25fffbdcf" class="k">var</a> <span id="r191 rd" class="r191 r">secretIdentifier</span> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#0dbdcf12908b3cba" class="t constructor">SecretIdentifier</a>(<span class="r189 r">secretOlder</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bc566805b6e87028" class="i property">Id</a>);
                    <a href="/Microsoft.Azure.KeyVault/A.html#15b4a290938630b9" class="k">var</a> <span id="r192 rd" class="r192 r">getSecret</span> = <span class="r186 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#69e388f97284f19a" class="i method">GetSecretAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r191 r">secretIdentifier</span>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <a href="#3ea2f984aee381e7" class="i method">VerifySecretValuesAreEqual</a>(<span class="r192 r">getSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#87d7dde6ba13e8cb" class="i property">Value</a>, <span class="r189 r">secretOlder</span>.<a href="/Microsoft.Azure.KeyVault/A.html#87d7dde6ba13e8cb" class="i property">Value</a>);
                    <a href="#796564b83dd343d6" class="i method">VerifyIdsAreEqual</a>(<span class="r189 r">secretOlder</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bc566805b6e87028" class="i property">Id</a>, <span class="r192 r">getSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bc566805b6e87028" class="i property">Id</a>);
                    <span class="r190 r">recoveryLevelAttributeIsConsistent</span> &amp;= <a href="#86a8dc90ba3ffe0b" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r192 r">getSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9a4406fe683e270b" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
 
                    <a href="/Microsoft.Azure.KeyVault/A.html#15b4a290938630b9" class="k">var</a> <span id="r193 rd" class="r193 r">secretNewer</span> =
                        <span class="r186 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ab03bc4063ebca80" class="i method">SetSecretAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r187 r">secretName</span>, <span class="r188 r">secretValue</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="c">// Get the older secret version using its name and version</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#15b4a290938630b9" class="k">var</a> <span id="r194 rd" class="r194 r">getSecretOlder</span> =
                        <span class="r186 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#911c9fa5b820c535" class="i method">GetSecretAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r191 r">secretIdentifier</span>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>, <span class="r191 r">secretIdentifier</span>.<a href="/Microsoft.Azure.KeyVault/A.html#97a4e42e4cd29250" class="i property">Version</a>)
                            .<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>()
                            .<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <a href="#3ea2f984aee381e7" class="i method">VerifySecretValuesAreEqual</a>(<span class="r194 r">getSecretOlder</span>.<a href="/Microsoft.Azure.KeyVault/A.html#87d7dde6ba13e8cb" class="i property">Value</a>, <span class="r189 r">secretOlder</span>.<a href="/Microsoft.Azure.KeyVault/A.html#87d7dde6ba13e8cb" class="i property">Value</a>);
                    <a href="#796564b83dd343d6" class="i method">VerifyIdsAreEqual</a>(<span class="r189 r">secretOlder</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bc566805b6e87028" class="i property">Id</a>, <span class="r194 r">getSecretOlder</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bc566805b6e87028" class="i property">Id</a>);
                    <span class="r190 r">recoveryLevelAttributeIsConsistent</span> &amp;= <a href="#86a8dc90ba3ffe0b" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r194 r">getSecretOlder</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9a4406fe683e270b" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
 
                    <span class="c">// Get the latest secret using its identifier with version</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#c63c1ae25fffbdcf" class="k">var</a> <span id="r195 rd" class="r195 r">secretIdentifierNewer</span> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#0dbdcf12908b3cba" class="t constructor">SecretIdentifier</a>(<span class="r193 r">secretNewer</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bc566805b6e87028" class="i property">Id</a>);
                    <a href="/Microsoft.Azure.KeyVault/A.html#15b4a290938630b9" class="k">var</a> <span id="r196 rd" class="r196 r">getSecretNewer</span> =
                        <span class="r186 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#911c9fa5b820c535" class="i method">GetSecretAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r195 r">secretIdentifierNewer</span>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>, <span class="r195 r">secretIdentifierNewer</span>.<a href="/Microsoft.Azure.KeyVault/A.html#97a4e42e4cd29250" class="i property">Version</a>)
                            .<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>()
                            .<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <a href="#3ea2f984aee381e7" class="i method">VerifySecretValuesAreEqual</a>(<span class="r196 r">getSecretNewer</span>.<a href="/Microsoft.Azure.KeyVault/A.html#87d7dde6ba13e8cb" class="i property">Value</a>, <span class="r193 r">secretNewer</span>.<a href="/Microsoft.Azure.KeyVault/A.html#87d7dde6ba13e8cb" class="i property">Value</a>);
                    <a href="#796564b83dd343d6" class="i method">VerifyIdsAreEqual</a>(<span class="r193 r">secretNewer</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bc566805b6e87028" class="i property">Id</a>, <span class="r196 r">getSecretNewer</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bc566805b6e87028" class="i property">Id</a>);
                    <span class="r190 r">recoveryLevelAttributeIsConsistent</span> &amp;= <a href="#86a8dc90ba3ffe0b" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r196 r">getSecretNewer</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9a4406fe683e270b" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
                }
                <b>finally</b>
                {
                    <span class="c">// Delete the secret</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#8c4628c62639b9f0" class="k">var</a> <span id="r197 rd" class="r197 r">deletedSecret</span> = <span class="r186 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#af6c3fb426a1155a" class="i method">DeleteSecretAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r187 r">secretName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="r190 r">recoveryLevelAttributeIsConsistent</span> &amp;= <a href="#86a8dc90ba3ffe0b" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r197 r">deletedSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9a4406fe683e270b" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
 
                    <b>if</b> (<a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>)
                    {
                        <a href="#741e26b08beafc2c" class="k">this</a>.<a href="#671cc04f42f659fd" class="i field">fixture</a>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#691e84f490bad5d6" class="i method">WaitOnDeletedSecret</a>(<span class="r186 r">client</span>, <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r187 r">secretName</span>);
 
                        <span class="r186 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#b5ae1223f0a3c8b9" class="i method">PurgeDeletedSecretAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r187 r">secretName</span>).<a href="@0@mscorlib/A.html#9865ec4fb8abca74" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#fac5be2731353aa8" class="i method">GetResult</a>();
                    }
                }
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="f014ffc75df719e0" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ListSecretsTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r198 rd" class="r198 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
 
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r199 rd" class="r199 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <b>int</b> <span id="r200 rd" class="r200 r">numSecrets</span> = 3;
                <b>int</b> <span id="r201 rd" class="r201 r">maxResults</span> = 1;
 
                <a href="@0@System.Core/A.html#2d265edc718b158b" class="k">var</a> <span id="r202 rd" class="r202 r">addedObjects</span> = <b>new</b> <a href="@0@System.Core/A.html#eca9ea30fa3b2c28" class="t constructor">HashSet</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;();
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r203 rd" class="r203 r">secretValue</span> = <span class="s">&quot;mysecretvalue&quot;</span>;
 
                <span class="c">//Create the secrets</span>
                <b>for</b> (<b>int</b> <span id="r204 rd" class="r204 r">i</span> = 0; <span class="r204 r">i</span> &lt; <span class="r200 r">numSecrets</span>; <span class="r204 r">i</span>++)
                {
                    <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r205 rd" class="r205 r">secretName</span> = <span class="s">&quot;listsecrettest&quot;</span> + <span class="r204 r">i</span>.<a href="@0@mscorlib/A.html#8d6f2d8bc0589463" class="i method">ToString</a>();
 
                    <a href="/Microsoft.Azure.KeyVault/A.html#15b4a290938630b9" class="k">var</a> <span id="r206 rd" class="r206 r">addedSecret</span> =
                        <span class="r199 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ab03bc4063ebca80" class="i method">SetSecretAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r205 r">secretName</span>, <span class="r203 r">secretValue</span>, <span class="r127 r">contentType</span>: <span class="s">&quot;plainText&quot;</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="r202 r">addedObjects</span>.<a href="@0@System.Core/A.html#43a2b651926474a7" class="i method">Add</a>(<span class="r206 r">addedSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bc566805b6e87028" class="i property">Id</a>.<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, <span class="r206 r">addedSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bc566805b6e87028" class="i property">Id</a>.<a href="@0@mscorlib/A.html#750750cd39244ac4" class="i method">LastIndexOf</a>(<span class="s">&quot;/&quot;</span>)));
                }
 
                <span class="c">//List the secrets</span>
                <a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#8125b18f5d7ee303" class="k">var</a> <span id="r207 rd" class="r207 r">listResponse</span> = <span class="r199 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#8f4783acd3aca343" class="i method">GetSecretsAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r201 r">maxResults</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r207 r">listResponse</span>);
                <b>foreach</b> (<a href="/Microsoft.Azure.KeyVault/A.html#41cb9d6b42053675" class="t t">SecretItem</a> <span id="r208 rd" class="r208 r">m</span> <b>in</b> <span class="r207 r">listResponse</span>)
                {
                    <b>if</b> (<span class="r202 r">addedObjects</span>.<a href="@0@System.Core/A.html#06d905a0ac76e4f5" class="i method">Contains</a>(<span class="r208 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5b1b57bc42a99ab9" class="i property">Id</a>))
                    {
                        <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="s">&quot;plainText&quot;</span>, <span class="r208 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#21cc108f4e05f213" class="i property">ContentType</a>);
                        <span class="t t">Assert</span>.<span class="i method">StartsWith</span>(<span class="s">&quot;listsecrettest&quot;</span>, <span class="r208 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#2fb94b4bead35cd5" class="i property">Identifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>);
                        <span class="r202 r">addedObjects</span>.<a href="@0@System.Core/A.html#4e77ae9204a00be6" class="i method">Remove</a>(<span class="r208 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5b1b57bc42a99ab9" class="i property">Id</a>);
                    }
                }
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r209 rd" class="r209 r">nextLink</span> = <span class="r207 r">listResponse</span>.<a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#e77457a6e30fcfe3" class="i property">NextPageLink</a>;
                <b>while</b> (!<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#23a8597f842071f4" class="i method">IsNullOrEmpty</a>(<span class="r209 r">nextLink</span>))
                {
                    <a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#8125b18f5d7ee303" class="k">var</a> <span id="r210 rd" class="r210 r">listNextResponse</span> = <span class="r199 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#4f183cacbec96b1f" class="i method">GetSecretsNextAsync</a>(<span class="r209 r">nextLink</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r210 r">listNextResponse</span>);
                    <b>foreach</b> (<a href="/Microsoft.Azure.KeyVault/A.html#41cb9d6b42053675" class="t t">SecretItem</a> <span id="r211 rd" class="r211 r">m</span> <b>in</b> <span class="r210 r">listNextResponse</span>)
                    {
                        <b>if</b> (<span class="r202 r">addedObjects</span>.<a href="@0@System.Core/A.html#06d905a0ac76e4f5" class="i method">Contains</a>(<span class="r211 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5b1b57bc42a99ab9" class="i property">Id</a>))
                        {
                            <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="s">&quot;plainText&quot;</span>, <span class="r211 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#21cc108f4e05f213" class="i property">ContentType</a>);
                            <b>if</b> (<span class="r202 r">addedObjects</span>.<a href="@0@System.Core/A.html#06d905a0ac76e4f5" class="i method">Contains</a>(<span class="r211 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5b1b57bc42a99ab9" class="i property">Id</a>))
                            {
                                <span class="t t">Assert</span>.<span class="i method">StartsWith</span>(<span class="s">&quot;listsecrettest&quot;</span>, <span class="r211 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#2fb94b4bead35cd5" class="i property">Identifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>);
                                <span class="r202 r">addedObjects</span>.<a href="@0@System.Core/A.html#4e77ae9204a00be6" class="i method">Remove</a>(<span class="r211 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5b1b57bc42a99ab9" class="i property">Id</a>);
                            }
                            <span class="r202 r">addedObjects</span>.<a href="@0@System.Core/A.html#4e77ae9204a00be6" class="i method">Remove</a>(<span class="r211 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5b1b57bc42a99ab9" class="i property">Id</a>);
                        }
                    }
                    <span class="r209 r">nextLink</span> = <span class="r210 r">listNextResponse</span>.<a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#e77457a6e30fcfe3" class="i property">NextPageLink</a>;
                }
 
                <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r202 r">addedObjects</span>.<a href="@0@System.Core/A.html#905bec8c22644c82" class="i property">Count</a> == 0);
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="f60f31dcc527bf32" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ListSecretVersionsTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r212 rd" class="r212 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
 
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r213 rd" class="r213 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <b>int</b> <span id="r214 rd" class="r214 r">numSecretVersions</span> = 3;
                <b>int</b> <span id="r215 rd" class="r215 r">maxResults</span> = 1;
 
                <a href="@0@System.Core/A.html#2d265edc718b158b" class="k">var</a> <span id="r216 rd" class="r216 r">addedObjects</span> = <b>new</b> <a href="@0@System.Core/A.html#eca9ea30fa3b2c28" class="t constructor">HashSet</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;();
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r217 rd" class="r217 r">secretValue</span> = <span class="s">&quot;mysecretvalue&quot;</span>;
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r218 rd" class="r218 r">secretName</span> = <span class="s">&quot;listsecretversionstest&quot;</span>;
 
                <span class="c">//Create the secrets</span>
                <b>for</b> (<b>int</b> <span id="r219 rd" class="r219 r">i</span> = 0; <span class="r219 r">i</span> &lt; <span class="r214 r">numSecretVersions</span>; <span class="r219 r">i</span>++)
                {
 
                    <a href="/Microsoft.Azure.KeyVault/A.html#15b4a290938630b9" class="k">var</a> <span id="r220 rd" class="r220 r">addedSecret</span> =
                        <span class="r213 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ab03bc4063ebca80" class="i method">SetSecretAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r218 r">secretName</span>, <span class="r217 r">secretValue</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="r216 r">addedObjects</span>.<a href="@0@System.Core/A.html#43a2b651926474a7" class="i method">Add</a>(<span class="r220 r">addedSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bc566805b6e87028" class="i property">Id</a>);
                }
 
                <span class="c">//List the secret versions</span>
                <a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#8125b18f5d7ee303" class="k">var</a> <span id="r221 rd" class="r221 r">listResponse</span> = <span class="r213 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#180a6b3ee3ca367c" class="i method">GetSecretVersionsAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r218 r">secretName</span>, <span class="r215 r">maxResults</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r221 r">listResponse</span>);
                <b>foreach</b> (<a href="/Microsoft.Azure.KeyVault/A.html#41cb9d6b42053675" class="t t">SecretItem</a> <span id="r222 rd" class="r222 r">m</span> <b>in</b> <span class="r221 r">listResponse</span>)
                {
                    <b>if</b> (<span class="r216 r">addedObjects</span>.<a href="@0@System.Core/A.html#06d905a0ac76e4f5" class="i method">Contains</a>(<span class="r222 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5b1b57bc42a99ab9" class="i property">Id</a>))
                        <span class="r216 r">addedObjects</span>.<a href="@0@System.Core/A.html#4e77ae9204a00be6" class="i method">Remove</a>(<span class="r222 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5b1b57bc42a99ab9" class="i property">Id</a>);
                }
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r223 rd" class="r223 r">nextLink</span> = <span class="r221 r">listResponse</span>.<a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#e77457a6e30fcfe3" class="i property">NextPageLink</a>;
                <b>while</b> (!<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#23a8597f842071f4" class="i method">IsNullOrEmpty</a>(<span class="r223 r">nextLink</span>))
                {
                    <a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#8125b18f5d7ee303" class="k">var</a> <span id="r224 rd" class="r224 r">listNextResponse</span> = <span class="r213 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e7da5e6d645ce3ec" class="i method">GetSecretVersionsNextAsync</a>(<span class="r223 r">nextLink</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r224 r">listNextResponse</span>);
                    <b>foreach</b> (<a href="/Microsoft.Azure.KeyVault/A.html#41cb9d6b42053675" class="t t">SecretItem</a> <span id="r225 rd" class="r225 r">m</span> <b>in</b> <span class="r224 r">listNextResponse</span>)
                    {
                        <b>if</b> (<span class="r216 r">addedObjects</span>.<a href="@0@System.Core/A.html#06d905a0ac76e4f5" class="i method">Contains</a>(<span class="r225 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5b1b57bc42a99ab9" class="i property">Id</a>))
                            <span class="r216 r">addedObjects</span>.<a href="@0@System.Core/A.html#4e77ae9204a00be6" class="i method">Remove</a>(<span class="r225 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5b1b57bc42a99ab9" class="i property">Id</a>);
                    }
                    <span class="r223 r">nextLink</span> = <span class="r224 r">listNextResponse</span>.<a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#e77457a6e30fcfe3" class="i property">NextPageLink</a>;
                }
 
                <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r216 r">addedObjects</span>.<a href="@0@System.Core/A.html#905bec8c22644c82" class="i property">Count</a> == 0);
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="82eb33953d36e5f7" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestSecretExtendedAttributes</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r226 rd" class="r226 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
 
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r227 rd" class="r227 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r228 rd" class="r228 r">secretName</span> = <span class="s">&quot;secretwithextendedattribs&quot;</span>;
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r229 rd" class="r229 r">originalSecretValue</span> = <span class="s">&quot;mysecretvalue&quot;</span>;
                <b>bool</b> <span id="r230 rd" class="r230 r">recoveryLevelIsConsistent</span> = <b>true</b>;
 
                <b>try</b>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#15b4a290938630b9" class="k">var</a> <span id="r231 rd" class="r231 r">originalSecret</span> = <span class="r227 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ab03bc4063ebca80" class="i method">SetSecretAsync</a>(
                        <span class="r232 r">vaultBaseUrl</span>: <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>,
                        <span class="r233 r">secretName</span>: <span class="r228 r">secretName</span>,
                        <span class="r234 r">value</span>: <span class="r229 r">originalSecretValue</span>,
                        <span class="r126 r">tags</span>: <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;() { { <span class="s">&quot;purpose&quot;</span>, <span class="s">&quot;unit test&quot;</span> } },
                        <span class="r127 r">contentType</span>: <span class="s">&quot;plaintext&quot;</span>,
                        <span class="r128 r">secretAttributes</span>: <a href="#404cb13fe0c3755d" class="i method">NewSecretAttributes</a>(
                            <span class="r235 r">enabled</span>: <b>false</b>,
                            <span class="r236 r">active</span>: <b>false</b>,
                            <span class="r237 r">expired</span>: <b>false</b>)
                        ).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="s">&quot;plaintext&quot;</span>, <span class="r231 r">originalSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#2c544450da2d05d2" class="i property">ContentType</a>);
                    <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="s">&quot;unit test&quot;</span>, <span class="r231 r">originalSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3c7d2d3401066515" class="i property">Tags</a><a href="@0@mscorlib/A.html#86884956b17e491a">[</a><span class="s">&quot;purpose&quot;</span>]);
                    <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r231 r">originalSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9a4406fe683e270b" class="i property">Attributes</a>.<a href="/Microsoft.Azure.KeyVault/A.html#4711a60053ea2d77" class="i property">Enabled</a> != <b>null</b> &amp;&amp; <span class="r231 r">originalSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9a4406fe683e270b" class="i property">Attributes</a>.<a href="/Microsoft.Azure.KeyVault/A.html#4711a60053ea2d77" class="i property">Enabled</a> == <b>false</b>);
 
                    <span class="r230 r">recoveryLevelIsConsistent</span> &amp;= <a href="#86a8dc90ba3ffe0b" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r231 r">originalSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9a4406fe683e270b" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
 
                    <span class="c">// Cannot get disabled secret</span>
                    <b>try</b>
                    {
                        <span class="r227 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#69e388f97284f19a" class="i method">GetSecretAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r228 r">secretName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                        <span class="t t">Assert</span>.<span class="i method">True</span>(<b>false</b>, <span class="s">&quot;Get on disabled secret must throw an exception.&quot;</span>);
                    }
                    <b>catch</b> (<a href="/Microsoft.Azure.KeyVault/A.html#554e648dd6b0698c" class="t t">KeyVaultErrorException</a> <span id="r238 rd" class="r238 r">ex</span>)
                    {
                        <span class="c">// Validate that exception contains an error code, an error message, and an inner error code</span>
                        <span class="t t">Assert</span>.<span class="i method">True</span>(!<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#23a8597f842071f4" class="i method">IsNullOrEmpty</a>(<span class="r238 r">ex</span>.<a href="/Microsoft.Azure.KeyVault/A.html#0b78af2fb808d32f" class="i property">Body</a>.<a href="/Microsoft.Azure.KeyVault/A.html#d27eeb9da4eabf9c" class="i property">Error</a>.<a href="/Microsoft.Azure.KeyVault/A.html#9234d6bb19b92373" class="i property">Code</a>));
                        <span class="t t">Assert</span>.<span class="i method">True</span>(!<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#23a8597f842071f4" class="i method">IsNullOrEmpty</a>(<span class="r238 r">ex</span>.<a href="/Microsoft.Azure.KeyVault/A.html#0b78af2fb808d32f" class="i property">Body</a>.<a href="/Microsoft.Azure.KeyVault/A.html#d27eeb9da4eabf9c" class="i property">Error</a>.<a href="/Microsoft.Azure.KeyVault/A.html#0de85664c442c992" class="i property">Message</a>));
                        <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r238 r">ex</span>.<a href="/Microsoft.Azure.KeyVault/A.html#0b78af2fb808d32f" class="i property">Body</a>.<a href="/Microsoft.Azure.KeyVault/A.html#d27eeb9da4eabf9c" class="i property">Error</a>.<a href="/Microsoft.Azure.KeyVault/A.html#6ea4c6614607c4dc" class="i property">InnerError</a>);
                        <span class="t t">Assert</span>.<span class="i method">True</span>(!<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#23a8597f842071f4" class="i method">IsNullOrEmpty</a>(<span class="r238 r">ex</span>.<a href="/Microsoft.Azure.KeyVault/A.html#0b78af2fb808d32f" class="i property">Body</a>.<a href="/Microsoft.Azure.KeyVault/A.html#d27eeb9da4eabf9c" class="i property">Error</a>.<a href="/Microsoft.Azure.KeyVault/A.html#6ea4c6614607c4dc" class="i property">InnerError</a>.<a href="/Microsoft.Azure.KeyVault/A.html#9234d6bb19b92373" class="i property">Code</a>));
                    }
 
                    <span class="c">// Cleanup is a bit more difficult in soft-delete-enabled vaults; since deletion</span>
                    <span class="c">// is asynchronous, and the secret is disabled, we can&#39;t know when the secret is</span>
                    <span class="c">// safe to purge. Therefore we&#39;ll re-enable the secret before proceeding with the</span>
                    <span class="c">// common cleanup code.</span>
                    <b>if</b> (<a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>)
                    {
                        <span class="r231 r">originalSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9a4406fe683e270b" class="i property">Attributes</a>.<a href="/Microsoft.Azure.KeyVault/A.html#4711a60053ea2d77" class="i property">Enabled</a> = <b>true</b>;
                        <span class="r231 r">originalSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9a4406fe683e270b" class="i property">Attributes</a>.<a href="/Microsoft.Azure.KeyVault/A.html#ca02021b80a17394" class="i property">NotBefore</a> = <a href="@0@mscorlib/A.html#df6b1eba7461813b" class="t t">DateTime</a>.<a href="@0@mscorlib/A.html#b0d5e4c9a8d4ddac" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f5cb6edd98581ca2" class="i method">AddDays</a>(-1);
 
                        <span class="c">// rev the secret to enable it</span>
                        <a href="/Microsoft.Azure.KeyVault/A.html#15b4a290938630b9" class="k">var</a> <span id="r239 rd" class="r239 r">updatedSecret</span> = <span class="r227 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ab03bc4063ebca80" class="i method">SetSecretAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r228 r">secretName</span>, <span class="r229 r">originalSecretValue</span>, (<a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>,<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;)<span class="r231 r">originalSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3c7d2d3401066515" class="i property">Tags</a>, <span class="r231 r">originalSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#2c544450da2d05d2" class="i property">ContentType</a>, <span class="r231 r">originalSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9a4406fe683e270b" class="i property">Attributes</a>)
                            .<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>()
                            .<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                        <span class="c">// verify we can retrieve the secret</span>
                        <b>try</b>
                        {
                            <a href="/Microsoft.Azure.KeyVault/A.html#15b4a290938630b9" class="k">var</a> <span id="r240 rd" class="r240 r">retrievedEnabledSecret</span> = <span class="r227 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#69e388f97284f19a" class="i method">GetSecretAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r228 r">secretName</span>)
                                .<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>()
                                .<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                        }
                        <b>catch</b> (<a href="/Microsoft.Azure.KeyVault/A.html#554e648dd6b0698c" class="t t">KeyVaultErrorException</a>)
                        {
                            <span class="t t">Assert</span>.<span class="i method">False</span>(<b>false</b>, <span class="s">&quot;failed to re-enable disabled secret in soft-delete-enabled vault; cleanup will fail&quot;</span>);
                        }
                    }
                }
                <b>finally</b>
                {
                    <span class="c">// Delete the secret</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#8c4628c62639b9f0" class="k">var</a> <span id="r241 rd" class="r241 r">deletedSecret</span> = <span class="r227 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#af6c3fb426a1155a" class="i method">DeleteSecretAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r228 r">secretName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="r230 r">recoveryLevelIsConsistent</span> &amp;= <a href="#86a8dc90ba3ffe0b" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r241 r">deletedSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9a4406fe683e270b" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
 
                    <b>if</b> (<a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>)
                    {
                        <a href="#741e26b08beafc2c" class="k">this</a>.<a href="#671cc04f42f659fd" class="i field">fixture</a>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#691e84f490bad5d6" class="i method">WaitOnDeletedSecret</a>(<span class="r227 r">client</span>, <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r228 r">secretName</span>);
 
                        <span class="r227 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#b5ae1223f0a3c8b9" class="i method">PurgeDeletedSecretAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r228 r">secretName</span>).<a href="@0@mscorlib/A.html#9865ec4fb8abca74" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#fac5be2731353aa8" class="i method">GetResult</a>();
                    }
                }
 
                <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r230 r">recoveryLevelIsConsistent</span>, <span class="s">&quot;the &#39;recoveryLevel&#39; attribute did not consistently return the expected value.&quot;</span>);
            }
        }
 
<span class="k preprocess">#</span><span class="k preprocess">endregion</span>
 
<span class="k preprocess">#</span><span class="k preprocess">region</span> Deleted Secret Operations
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="afcf9279311908f8" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetDeletedSecretTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r242 rd" class="r242 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r243 rd" class="r243 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <span class="c">// settings may not be loaded until the client is fully initialized</span>
                <b>if</b> (!<a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>) <b>return</b>;
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r244 rd" class="r244 r">secretName</span> = <span class="s">&quot;GetDeletedSecretTest&quot;</span>;
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r245 rd" class="r245 r">secretValue</span> = <span class="s">&quot;mysecretvalue&quot;</span>;
                <b>bool</b> <span id="r246 rd" class="r246 r">recoveryLevelIsConsistent</span> = <b>true</b>;
 
                <a href="/Microsoft.Azure.KeyVault/A.html#15b4a290938630b9" class="k">var</a> <span id="r247 rd" class="r247 r">secretOlder</span> = <span class="r243 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ab03bc4063ebca80" class="i method">SetSecretAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r244 r">secretName</span>, <span class="r245 r">secretValue</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                <span class="r246 r">recoveryLevelIsConsistent</span> &amp;= <a href="#86a8dc90ba3ffe0b" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r247 r">secretOlder</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9a4406fe683e270b" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
 
                <a href="/Microsoft.Azure.KeyVault/A.html#8c4628c62639b9f0" class="k">var</a> <span id="r248 rd" class="r248 r">deletedSecret</span> = <span class="r243 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#af6c3fb426a1155a" class="i method">DeleteSecretAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r244 r">secretName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                <span class="r246 r">recoveryLevelIsConsistent</span> &amp;= <a href="#86a8dc90ba3ffe0b" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r248 r">deletedSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9a4406fe683e270b" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
 
                <a href="#741e26b08beafc2c" class="k">this</a>.<a href="#671cc04f42f659fd" class="i field">fixture</a>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#691e84f490bad5d6" class="i method">WaitOnDeletedSecret</a>(<span class="r243 r">client</span>, <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r244 r">secretName</span>);
 
                <b>try</b>
                {
                    <span class="c">// Get the deleted secret using its recovery identifier</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#8c4628c62639b9f0" class="k">var</a> <span id="r249 rd" class="r249 r">getDeletedSecret</span> = <span class="r243 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#7187ca84df97690a" class="i method">GetDeletedSecretAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r247 r">secretOlder</span>.<a href="/Microsoft.Azure.KeyVault/A.html#743f7b2a11c976eb" class="i property">SecretIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <a href="#796564b83dd343d6" class="i method">VerifyIdsAreEqual</a>(<span class="r247 r">secretOlder</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bc566805b6e87028" class="i property">Id</a>, <span class="r249 r">getDeletedSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bc566805b6e87028" class="i property">Id</a>);
                    <a href="#796564b83dd343d6" class="i method">VerifyIdsAreEqual</a>(<span class="r248 r">deletedSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#121efa0b54e958e6" class="i property">RecoveryId</a>, <span class="r249 r">getDeletedSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#121efa0b54e958e6" class="i property">RecoveryId</a>);
 
                    <span class="r246 r">recoveryLevelIsConsistent</span> &amp;= <a href="#86a8dc90ba3ffe0b" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r249 r">getDeletedSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9a4406fe683e270b" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
                }
                <b>finally</b>
                {
                    <a href="#741e26b08beafc2c" class="k">this</a>.<a href="#671cc04f42f659fd" class="i field">fixture</a>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#691e84f490bad5d6" class="i method">WaitOnDeletedSecret</a>(<span class="r243 r">client</span>, <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r244 r">secretName</span>);
 
                    <span class="c">// Purge the secret</span>
                    <span class="r243 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#b5ae1223f0a3c8b9" class="i method">PurgeDeletedSecretAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r244 r">secretName</span>).<a href="@0@mscorlib/A.html#9865ec4fb8abca74" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#fac5be2731353aa8" class="i method">GetResult</a>();
                }
 
                <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r246 r">recoveryLevelIsConsistent</span>, <span class="s">&quot;the &#39;recoveryLevel&#39; attribute did not consistently return the expected value.&quot;</span>);
            }
        }
<span class="c">/*
        public void SecretCreateDeleteRecoverPurgeTest()
        {
            using (MockContext context = MockContext.Start(this.GetType()))
            {
                var client = GetKeyVaultClient();
 
                // settings may not be loaded until the client is fully initialized
                if (!_softDeleteEnabled) return;
 
                string secretName = &quot;SecretCreateDeleteRecoverPurgeTest&quot;;
                string originalSecretValue = &quot;mysecretvalue&quot;;
                bool recoveryLevelAttributeIsConsistent = true;
 
                var originalSecret =
                    client.SetSecretAsync(_vaultAddress, secretName, originalSecretValue).GetAwaiter().GetResult();
 
                VerifySecretValuesAreEqual(originalSecret.Value, originalSecretValue);
                Assert.Equal(secretName, originalSecret.SecretIdentifier.Name);
                recoveryLevelAttributeIsConsistent &amp;= VerifyDeletionRecoveryLevel(originalSecret.Attributes, _softDeleteEnabled);
 
                try
                {
                    // Delete the secret
                    var deletedSecret = client.DeleteSecretAsync(_vaultAddress, secretName).GetAwaiter().GetResult();
                    recoveryLevelAttributeIsConsistent &amp;= VerifyDeletionRecoveryLevel(deletedSecret.Attributes, _softDeleteEnabled);
 
                    //verify the secret is deleted
                    try
                    {
                        client.GetSecretAsync(_vaultAddress, secretName).GetAwaiter().GetResult();
                    }
                    catch (KeyVaultErrorException ex)
                    {
                        if (ex.Response.StatusCode != HttpStatusCode.NotFound || ex.Body.Error.Message != ex.Message)
                            throw;
                    }
 
                    this.fixture.WaitOnDeletedSecret(client, _vaultAddress, secretName);
 
                    // Recover the secret
                    var recoveredSecret = client.RecoverDeletedSecretAsync(deletedSecret.RecoveryId).GetAwaiter().GetResult();
                    VerifySecretValuesAreEqual(recoveredSecret.Value, null);
                    Assert.Equal(secretName, recoveredSecret.SecretIdentifier.Name);
                    recoveryLevelAttributeIsConsistent &amp;= VerifyDeletionRecoveryLevel(recoveredSecret.Attributes, _softDeleteEnabled);
 
                    this.fixture.WaitOnSecret(client, _vaultAddress, secretName);
 
                    // Read the recovered secret using full identifier
                    var recoveredReadSecret = client.GetSecretAsync(recoveredSecret.Id).GetAwaiter().GetResult();
                    VerifySecretValuesAreEqual(recoveredReadSecret.Value, originalSecretValue);
                    VerifyIdsAreEqual(recoveredReadSecret.Id, recoveredSecret.Id);
                    VerifyTagsAreEqual(originalSecret.Tags, recoveredReadSecret.Tags);
                    recoveryLevelAttributeIsConsistent &amp;= VerifyDeletionRecoveryLevel(recoveredReadSecret.Attributes, _softDeleteEnabled);
 
                    // Read the recovered secret with the version independent identifier
                    recoveredReadSecret = client.GetSecretAsync(_vaultAddress, secretName).GetAwaiter().GetResult();
                    VerifySecretValuesAreEqual(recoveredReadSecret.Value, originalSecretValue);
                    VerifyIdsAreEqual(recoveredReadSecret.Id, recoveredSecret.Id);
                    VerifyTagsAreEqual(originalSecret.Tags, recoveredReadSecret.Tags);
                    recoveryLevelAttributeIsConsistent &amp;= VerifyDeletionRecoveryLevel(recoveredReadSecret.Attributes, _softDeleteEnabled);
                }
                finally
                {
                    this.fixture.WaitOnSecret(client, _vaultAddress, secretName);
 
                    // Delete the secret
                    var deletedSecret = client.DeleteSecretAsync(_vaultAddress, secretName).GetAwaiter().GetResult();
                    recoveryLevelAttributeIsConsistent &amp;= VerifyDeletionRecoveryLevel(deletedSecret.Attributes, _softDeleteEnabled);
 
                    //verify the secret is deleted
                    try
                    {
                        client.GetSecretAsync(_vaultAddress, secretName).GetAwaiter().GetResult();
                    }
                    catch (KeyVaultErrorException ex)
                    {
                        if (ex.Response.StatusCode != HttpStatusCode.NotFound || ex.Body.Error.Message != ex.Message)
                            throw;
                    }
 
                    this.fixture.WaitOnDeletedSecret(client, _vaultAddress, secretName);
 
                    // Purge the secret
                    client.PurgeDeletedSecretAsync(deletedSecret.RecoveryId).GetAwaiter().GetResult();
 
                    //verify the secret is purged
                    try
                    {
                        client.GetDeletedSecretAsync(_vaultAddress, secretName).GetAwaiter().GetResult();
                    }
                    catch (KeyVaultErrorException ex)
                    {
                        if (ex.Response.StatusCode != HttpStatusCode.NotFound || ex.Body.Error.Message != ex.Message)
                            throw;
                    }
                }
 
                Assert.True(recoveryLevelAttributeIsConsistent, &quot;The &#39;recoveryLevel&#39; attribute did not consistently return the expected value&quot;);
            }
        }
*/</span>
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="f016f3d0380bc037" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ListDeletedSecretsTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r250 rd" class="r250 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r251 rd" class="r251 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <span class="c">// settings may not be loaded until the client is fully initialized</span>
                <b>if</b> (!<a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>) <b>return</b>;
 
                <b>int</b> <span id="r252 rd" class="r252 r">numSecrets</span> = 3;
                <b>int</b> <span id="r253 rd" class="r253 r">maxResults</span> = 1;
                <b>bool</b> <span id="r254 rd" class="r254 r">recoveryLevelAttributeIsConsistent</span> = <b>true</b>;
 
                <a href="@0@System.Core/A.html#2d265edc718b158b" class="k">var</a> <span id="r255 rd" class="r255 r">addedObjects</span> = <b>new</b> <a href="@0@System.Core/A.html#eca9ea30fa3b2c28" class="t constructor">HashSet</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;();
                <a href="@0@System.Core/A.html#2d265edc718b158b" class="k">var</a> <span id="r256 rd" class="r256 r">removedObjects</span> = <b>new</b> <a href="@0@System.Core/A.html#eca9ea30fa3b2c28" class="t constructor">HashSet</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;();
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r257 rd" class="r257 r">secretValue</span> = <span class="s">&quot;mysecretvalue&quot;</span>;
 
                <span class="c">//Create and delete the secrets</span>
                <b>for</b> (<b>int</b> <span id="r258 rd" class="r258 r">i</span> = 0; <span class="r258 r">i</span> &lt; <span class="r252 r">numSecrets</span>; <span class="r258 r">i</span>++)
                {
                    <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r259 rd" class="r259 r">secretName</span> = <span class="s">&quot;listdeletedsecrettest&quot;</span> + <span class="r258 r">i</span>.<a href="@0@mscorlib/A.html#8d6f2d8bc0589463" class="i method">ToString</a>();
 
                    <a href="/Microsoft.Azure.KeyVault/A.html#15b4a290938630b9" class="k">var</a> <span id="r260 rd" class="r260 r">addedSecret</span> =
                        <span class="r251 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ab03bc4063ebca80" class="i method">SetSecretAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r259 r">secretName</span>, <span class="r257 r">secretValue</span>, <span class="r127 r">contentType</span>: <span class="s">&quot;plainText&quot;</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="r255 r">addedObjects</span>.<a href="@0@System.Core/A.html#43a2b651926474a7" class="i method">Add</a>(<span class="r260 r">addedSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bc566805b6e87028" class="i property">Id</a>.<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, <span class="r260 r">addedSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bc566805b6e87028" class="i property">Id</a>.<a href="@0@mscorlib/A.html#750750cd39244ac4" class="i method">LastIndexOf</a>(<span class="s">&quot;/&quot;</span>)));
 
                    <span class="r251 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#af6c3fb426a1155a" class="i method">DeleteSecretAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r259 r">secretName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <a href="#741e26b08beafc2c" class="k">this</a>.<a href="#671cc04f42f659fd" class="i field">fixture</a>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#691e84f490bad5d6" class="i method">WaitOnDeletedSecret</a>(<span class="r251 r">client</span>, <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r259 r">secretName</span>);
                }
 
                <span class="c">//List the secrets</span>
                <a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#8125b18f5d7ee303" class="k">var</a> <span id="r261 rd" class="r261 r">listResponse</span> = <span class="r251 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bde14611f73ad2da" class="i method">GetDeletedSecretsAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r253 r">maxResults</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r261 r">listResponse</span>);
                <b>foreach</b> (<a href="/Microsoft.Azure.KeyVault/A.html#e78b1ee4363100fe" class="t t">DeletedSecretItem</a> <span id="r262 rd" class="r262 r">m</span> <b>in</b> <span class="r261 r">listResponse</span>)
                {
                    <b>if</b> (<span class="r255 r">addedObjects</span>.<a href="@0@System.Core/A.html#06d905a0ac76e4f5" class="i method">Contains</a>(<span class="r262 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5b1b57bc42a99ab9" class="i property">Id</a>))
                    {
                        <span class="t t">Assert</span>.<span class="i method">StartsWith</span>(<span class="s">&quot;listdeletedsecrettest&quot;</span>, <span class="r262 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#2fb94b4bead35cd5" class="i property">Identifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>);
                        <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r262 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9052f6a76b2c42dc" class="i property">RecoveryId</a>);
                        <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r262 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#71f437675f5672c0" class="i property">ScheduledPurgeDate</a>);
                        <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r262 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#41d54e224a74c6c4" class="i property">DeletedDate</a>);
                        <span class="t t">Assert</span>.<span class="i method">StartsWith</span>(<span class="s">&quot;listdeletedsecrettest&quot;</span>, <span class="r262 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#f986ab4ae68dedc4" class="i property">RecoveryIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>);
 
                        <span class="r254 r">recoveryLevelAttributeIsConsistent</span> &amp;= <a href="#86a8dc90ba3ffe0b" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r262 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#f4ecda2d7301b814" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
 
                        <span class="r255 r">addedObjects</span>.<a href="@0@System.Core/A.html#4e77ae9204a00be6" class="i method">Remove</a>(<span class="r262 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5b1b57bc42a99ab9" class="i property">Id</a>);
                        <span class="r256 r">removedObjects</span>.<a href="@0@System.Core/A.html#43a2b651926474a7" class="i method">Add</a>(<span class="r262 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9052f6a76b2c42dc" class="i property">RecoveryId</a>);
                    }
                }
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r263 rd" class="r263 r">nextLink</span> = <span class="r261 r">listResponse</span>.<a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#e77457a6e30fcfe3" class="i property">NextPageLink</a>;
                <b>while</b> (!<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#23a8597f842071f4" class="i method">IsNullOrEmpty</a>(<span class="r263 r">nextLink</span>))
                {
                    <a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#8125b18f5d7ee303" class="k">var</a> <span id="r264 rd" class="r264 r">listNextResponse</span> = <span class="r251 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9ffc188f6d58662d" class="i method">GetDeletedSecretsNextAsync</a>(<span class="r263 r">nextLink</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r264 r">listNextResponse</span>);
                    <b>foreach</b> (<a href="/Microsoft.Azure.KeyVault/A.html#e78b1ee4363100fe" class="t t">DeletedSecretItem</a> <span id="r265 rd" class="r265 r">m</span> <b>in</b> <span class="r264 r">listNextResponse</span>)
                    {
                        <b>if</b> (<span class="r255 r">addedObjects</span>.<a href="@0@System.Core/A.html#06d905a0ac76e4f5" class="i method">Contains</a>(<span class="r265 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5b1b57bc42a99ab9" class="i property">Id</a>))
                        {
                            <span class="t t">Assert</span>.<span class="i method">StartsWith</span>(<span class="s">&quot;listdeletedsecrettest&quot;</span>, <span class="r265 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#2fb94b4bead35cd5" class="i property">Identifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>);
                            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r265 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9052f6a76b2c42dc" class="i property">RecoveryId</a>);
                            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r265 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#71f437675f5672c0" class="i property">ScheduledPurgeDate</a>);
                            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r265 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#41d54e224a74c6c4" class="i property">DeletedDate</a>);
                            <span class="t t">Assert</span>.<span class="i method">StartsWith</span>(<span class="s">&quot;listdeletedsecrettest&quot;</span>, <span class="r265 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#f986ab4ae68dedc4" class="i property">RecoveryIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>);
 
                            <span class="r254 r">recoveryLevelAttributeIsConsistent</span> &amp;= <a href="#86a8dc90ba3ffe0b" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r265 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#f4ecda2d7301b814" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
 
                            <span class="r255 r">addedObjects</span>.<a href="@0@System.Core/A.html#4e77ae9204a00be6" class="i method">Remove</a>(<span class="r265 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5b1b57bc42a99ab9" class="i property">Id</a>);
                            <span class="r256 r">removedObjects</span>.<a href="@0@System.Core/A.html#43a2b651926474a7" class="i method">Add</a>(<span class="r265 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9052f6a76b2c42dc" class="i property">RecoveryId</a>);
                        }
                    }
                    <span class="r263 r">nextLink</span> = <span class="r264 r">listNextResponse</span>.<a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#e77457a6e30fcfe3" class="i property">NextPageLink</a>;
                }
 
                <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r255 r">addedObjects</span>.<a href="@0@System.Core/A.html#905bec8c22644c82" class="i property">Count</a> == 0);
 
                <b>foreach</b> (<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r266 rd" class="r266 r">recoveryId</span> <b>in</b> <span class="r256 r">removedObjects</span>)
                {
                    <span class="r251 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#57b7e2f68bf61903" class="i method">PurgeDeletedSecretAsync</a>(<span class="r266 r">recoveryId</span>).<a href="@0@mscorlib/A.html#1bfe9e19e44f4cfa" class="i method">Wait</a>();
                }
 
                <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r254 r">recoveryLevelAttributeIsConsistent</span>, <span class="s">&quot;The &#39;recoveryLevel&#39; attribute did not consistently return the expected value&quot;</span>);
            }
        }
 
<span class="k preprocess">#</span><span class="k preprocess">endregion</span>
 
<span class="k preprocess">#</span><span class="k preprocess">region</span> Certificate Operations
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="7f79b3e1c747fc03" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CertificateImportTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r267 rd" class="r267 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r268 rd" class="r268 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <b>const string</b> <span id="r269 rd" class="r269 r">certificateName</span> = <span class="s">&quot;importCert01&quot;</span>;
                <b>const string</b> <span id="r270 rd" class="r270 r">certificateContent</span> =
                    <span class="s">&quot;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&quot;</span>;
                <b>const string</b> <span id="r271 rd" class="r271 r">certificatePassword</span> = <span class="s">&quot;123&quot;</span>;
                <b>const string</b> <span id="r272 rd" class="r272 r">certificateMimeType</span> = <span class="s">&quot;application/x-pkcs12&quot;</span>;
                <b>bool</b> <span id="r273 rd" class="r273 r">recoveryLevelIsConsistent</span> = <b>true</b>;
 
                <a href="@0@System/A.html#2e8ad9e6007798e5" class="k">var</a> <span id="r274 rd" class="r274 r">myCertificate</span> = <b>new</b> <a href="@0@System/A.html#d1fabe236fa55c47" class="t constructor">X509Certificate2</a>(<a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#08c34f52087ba624" class="i method">FromBase64String</a>(<span class="r270 r">certificateContent</span>), <span class="r271 r">certificatePassword</span>, <a href="@0@mscorlib/A.html#db2c6ad625b2625d" class="t t">X509KeyStorageFlags</a>.<a href="@0@mscorlib/A.html#bbbbe6e8a4f7ebd5" class="i field">Exportable</a>);
 
                <span class="c">// Import cert</span>
                <a href="/Microsoft.Azure.KeyVault/A.html#17bb4008337c63b2" class="k">var</a> <span id="r275 rd" class="r275 r">createdCertificateBundle</span> = <span class="r268 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#7b09294278d30e1a" class="i method">ImportCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r269 r">certificateName</span>, <span class="r270 r">certificateContent</span>, <span class="r271 r">certificatePassword</span>, <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#144276523ef55663" class="t constructor">CertificatePolicy</a>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#811a1f39026ea2e4" class="i property">KeyProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#02d1d5b2b676cbac" class="t constructor">KeyProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#ec7e913f8475364b" class="i property">Exportable</a> = <b>true</b>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#3dc7487df43ecc32" class="i property">KeySize</a> = 2048,
                        <a href="/Microsoft.Azure.KeyVault/A.html#dfefc582b783a01e" class="i property">KeyType</a> = <span class="s">&quot;RSA&quot;</span>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#149ca5a1e3fe5376" class="i property">ReuseKey</a> = <b>false</b>
                    },
                    <a href="/Microsoft.Azure.KeyVault/A.html#3f4c4a8cd9f8a8e9" class="i property">SecretProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#36090c30e3255b35" class="t constructor">SecretProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#d5f6f440a646d1a5" class="i property">ContentType</a> = <span class="r272 r">certificateMimeType</span>
                    }
                }).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r275 r">createdCertificateBundle</span>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r275 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r275 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a9c30d2389e54bbf" class="i property">KeyIdentifier</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r275 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r275 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6eb8e7ba2c1c279d" class="i property">Policy</a>);
                <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r274 r">myCertificate</span>.<a href="@0@System/A.html#6313394a0155d4d0" class="i property">Thumbprint</a>, <a href="#3c129aa0784fec61" class="i method">ToHexString</a>(<span class="r275 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>)));
 
                <span class="r273 r">recoveryLevelIsConsistent</span> &amp;= <a href="#7a03c8e71087b771" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r275 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#15df53aae60c5e58" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
 
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r275 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                <a href="@0@System/A.html#2e8ad9e6007798e5" class="k">var</a> <span id="r276 rd" class="r276 r">publicCer</span> = <b>new</b> <a href="@0@System/A.html#c9d1c203351eec15" class="t constructor">X509Certificate2</a>(<span class="r275 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r276 r">publicCer</span>);
                <span class="t t">Assert</span>.<span class="i method">False</span>(<span class="r276 r">publicCer</span>.<a href="@0@System/A.html#f7670d048c7a5a70" class="i property">HasPrivateKey</a>);
 
                <b>try</b>
                {
                    <span class="c">// Get the current version</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#17bb4008337c63b2" class="k">var</a> <span id="r277 rd" class="r277 r">certificateBundleLatest</span> =
                        <span class="r268 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#92dda13fee99dd3f" class="i method">GetCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r269 r">certificateName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r277 r">certificateBundleLatest</span>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r277 r">certificateBundleLatest</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r277 r">certificateBundleLatest</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a9c30d2389e54bbf" class="i property">KeyIdentifier</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r277 r">certificateBundleLatest</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r275 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6eb8e7ba2c1c279d" class="i property">Policy</a>);
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r274 r">myCertificate</span>.<a href="@0@System/A.html#6313394a0155d4d0" class="i property">Thumbprint</a>, <a href="#3c129aa0784fec61" class="i method">ToHexString</a>(<span class="r275 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>)));
 
                    <span class="r273 r">recoveryLevelIsConsistent</span> &amp;= <a href="#7a03c8e71087b771" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r277 r">certificateBundleLatest</span>.<a href="/Microsoft.Azure.KeyVault/A.html#15df53aae60c5e58" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r277 r">certificateBundleLatest</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                    <span class="r276 r">publicCer</span> = <b>new</b> <a href="@0@System/A.html#c9d1c203351eec15" class="t constructor">X509Certificate2</a>(<span class="r277 r">certificateBundleLatest</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r276 r">publicCer</span>);
                    <span class="t t">Assert</span>.<span class="i method">False</span>(<span class="r276 r">publicCer</span>.<a href="@0@System/A.html#f7670d048c7a5a70" class="i property">HasPrivateKey</a>);
 
                    <span class="c">// Get the specific version</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#17bb4008337c63b2" class="k">var</a> <span id="r278 rd" class="r278 r">certificateBundleVersion</span> =
                        <span class="r268 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bb630d01ea17fa89" class="i method">GetCertificateAsync</a>(<span class="r275 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#b821bb85d4af2d32" class="i property">CertificateIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#0bf83f1b0a96da15" class="i property">Identifier</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r278 r">certificateBundleVersion</span>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r278 r">certificateBundleVersion</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r278 r">certificateBundleVersion</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a9c30d2389e54bbf" class="i property">KeyIdentifier</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r278 r">certificateBundleVersion</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>);
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r274 r">myCertificate</span>.<a href="@0@System/A.html#6313394a0155d4d0" class="i property">Thumbprint</a>, <a href="#3c129aa0784fec61" class="i method">ToHexString</a>(<span class="r275 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>)));
 
                    <span class="r273 r">recoveryLevelIsConsistent</span> &amp;= <a href="#7a03c8e71087b771" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r278 r">certificateBundleVersion</span>.<a href="/Microsoft.Azure.KeyVault/A.html#15df53aae60c5e58" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r278 r">certificateBundleVersion</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                    <span class="r276 r">publicCer</span> = <b>new</b> <a href="@0@System/A.html#c9d1c203351eec15" class="t constructor">X509Certificate2</a>(<span class="r278 r">certificateBundleVersion</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r276 r">publicCer</span>);
                    <span class="t t">Assert</span>.<span class="i method">False</span>(<span class="r276 r">publicCer</span>.<a href="@0@System/A.html#f7670d048c7a5a70" class="i property">HasPrivateKey</a>);
 
                    <span class="c">// Get the secret</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#15b4a290938630b9" class="k">var</a> <span id="r279 rd" class="r279 r">retrievedSecret</span> =
                        <span class="r268 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ac3db2f02b80769f" class="i method">GetSecretAsync</a>(<span class="r278 r">certificateBundleVersion</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#0bf83f1b0a96da15" class="i property">Identifier</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r279 r">retrievedSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#2c544450da2d05d2" class="i property">ContentType</a>, <span class="r272 r">certificateMimeType</span>));
                    <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r279 r">retrievedSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#b5b8092dadf653bc" class="i property">Managed</a>);
 
                    <span class="c">// Get corresponding key</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#743f0f51eba1582c" class="k">var</a> <span id="r280 rd" class="r280 r">key</span> = <span class="r268 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ccdf557be81379d1" class="i method">GetKeyAsync</a>(<span class="r275 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#93ba358a4f4a09c6" class="i property">Kid</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r280 r">key</span>.<a href="/Microsoft.Azure.KeyVault/A.html#29efe9bf0bf510ae" class="i property">Managed</a>);
 
                    <a href="@0@System/A.html#2e8ad9e6007798e5" class="k">var</a> <span id="r281 rd" class="r281 r">retrievedCertificate</span> = <b>new</b> <a href="@0@System/A.html#d1fabe236fa55c47" class="t constructor">X509Certificate2</a>(
                        <a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#08c34f52087ba624" class="i method">FromBase64String</a>(<span class="r279 r">retrievedSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#87d7dde6ba13e8cb" class="i property">Value</a>),
                        <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>,
                        <a href="@0@mscorlib/A.html#db2c6ad625b2625d" class="t t">X509KeyStorageFlags</a>.<a href="@0@mscorlib/A.html#bbbbe6e8a4f7ebd5" class="i field">Exportable</a>);
 
                    <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r281 r">retrievedCertificate</span>.<a href="@0@System/A.html#f7670d048c7a5a70" class="i property">HasPrivateKey</a>);
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r274 r">myCertificate</span>.<a href="@0@System/A.html#6313394a0155d4d0" class="i property">Thumbprint</a>, <span class="r281 r">retrievedCertificate</span>.<a href="@0@System/A.html#6313394a0155d4d0" class="i property">Thumbprint</a>));
                }
                <b>finally</b>
                {
                    <span class="c">// Delete</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#4e8132c83a7cdbc6" class="k">var</a> <span id="r282 rd" class="r282 r">certificateBundleDeleted</span> =
                        <span class="r268 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#1dfc62ae7bb6ff4e" class="i method">DeleteCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r269 r">certificateName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="r273 r">recoveryLevelIsConsistent</span> &amp;= <a href="#7a03c8e71087b771" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r282 r">certificateBundleDeleted</span>.<a href="/Microsoft.Azure.KeyVault/A.html#15df53aae60c5e58" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r282 r">certificateBundleDeleted</span>);
 
                    <b>if</b> ( <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a> )
                    {
                        <a href="#741e26b08beafc2c" class="k">this</a>.<a href="#671cc04f42f659fd" class="i field">fixture</a>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#f964bb6685025291" class="i method">WaitOnDeletedCertificate</a>(<span class="r268 r">client</span>, <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r269 r">certificateName</span>);
                        <span class="r268 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#09606257523fe2db" class="i method">PurgeDeletedCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r269 r">certificateName</span>).<a href="@0@mscorlib/A.html#9865ec4fb8abca74" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#fac5be2731353aa8" class="i method">GetResult</a>();
                    }
                }
 
                <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r273 r">recoveryLevelIsConsistent</span>, <span class="s">&quot;the &#39;recoveryLevel&#39; attribute did not consistently return the expected value.&quot;</span>);
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="cde36469eee0577a" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CertificateImportTest2</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r283 rd" class="r283 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r284 rd" class="r284 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <b>const string</b> <span id="r285 rd" class="r285 r">certificateName</span> = <span class="s">&quot;importCert02&quot;</span>;
                <b>const string</b> <span id="r286 rd" class="r286 r">certificateContent</span> =
                    <span class="s">&quot;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&quot;</span>;
 
                <b>const string</b> <span id="r287 rd" class="r287 r">certificatePassword</span> = <span class="s">&quot;123&quot;</span>;
                <b>const string</b> <span id="r288 rd" class="r288 r">certificateMimeType</span> = <span class="s">&quot;application/x-pkcs12&quot;</span>;
 
                <a href="@0@System/A.html#e7fce4775a334079" class="k">var</a> <span id="r289 rd" class="r289 r">myCertificateCollection</span> = <b>new</b> <a href="@0@System/A.html#5b23257548c78fee" class="t constructor">X509Certificate2Collection</a>();
                <span class="r289 r">myCertificateCollection</span>.<a href="@0@System/A.html#cefad7e469412308" class="i method">Import</a>(<a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#08c34f52087ba624" class="i method">FromBase64String</a>(<span class="r286 r">certificateContent</span>), <span class="r287 r">certificatePassword</span>, <a href="@0@mscorlib/A.html#db2c6ad625b2625d" class="t t">X509KeyStorageFlags</a>.<a href="@0@mscorlib/A.html#bbbbe6e8a4f7ebd5" class="i field">Exportable</a>);
 
                <a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r290 rd" class="r290 r">privateKeyCertificateIndex</span> = 0;
                <b>for</b> (<a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r291 rd" class="r291 r">i</span> = 0; <span class="r291 r">i</span> &lt; <span class="r289 r">myCertificateCollection</span>.<a href="@0@mscorlib/A.html#226516cac1c2208f" class="i property">Count</a>; <span class="r291 r">i</span>++)
                {
                    <b>if</b> (<span class="r289 r">myCertificateCollection</span><a href="@0@System/A.html#e40d03783f7a3350">[</a><span class="r291 r">i</span>].<a href="@0@System/A.html#f7670d048c7a5a70" class="i property">HasPrivateKey</a>)
                    {
                        <span class="r290 r">privateKeyCertificateIndex</span> = <span class="r291 r">i</span>;
                        <b>break</b>;
                    }
                }
 
                <span class="c">// Import cert</span>
                <a href="/Microsoft.Azure.KeyVault/A.html#17bb4008337c63b2" class="k">var</a> <span id="r292 rd" class="r292 r">createdCertificateBundle</span> = <span class="r284 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bf45b92a5feb434b" class="i method">ImportCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r285 r">certificateName</span>, <span class="r289 r">myCertificateCollection</span>, <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#144276523ef55663" class="t constructor">CertificatePolicy</a>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#811a1f39026ea2e4" class="i property">KeyProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#02d1d5b2b676cbac" class="t constructor">KeyProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#ec7e913f8475364b" class="i property">Exportable</a> = <b>true</b>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#3dc7487df43ecc32" class="i property">KeySize</a> = 2048,
                        <a href="/Microsoft.Azure.KeyVault/A.html#dfefc582b783a01e" class="i property">KeyType</a> = <span class="s">&quot;RSA&quot;</span>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#149ca5a1e3fe5376" class="i property">ReuseKey</a> = <b>false</b>
                    },
                    <a href="/Microsoft.Azure.KeyVault/A.html#3f4c4a8cd9f8a8e9" class="i property">SecretProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#36090c30e3255b35" class="t constructor">SecretProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#d5f6f440a646d1a5" class="i property">ContentType</a> = <span class="r288 r">certificateMimeType</span>
                    }
                }).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r292 r">createdCertificateBundle</span>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r292 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r292 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a9c30d2389e54bbf" class="i property">KeyIdentifier</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r292 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r292 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6eb8e7ba2c1c279d" class="i property">Policy</a>);
                <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r289 r">myCertificateCollection</span><a href="@0@System/A.html#e40d03783f7a3350">[</a><span class="r290 r">privateKeyCertificateIndex</span>].<a href="@0@System/A.html#6313394a0155d4d0" class="i property">Thumbprint</a>, <a href="#3c129aa0784fec61" class="i method">ToHexString</a>(<span class="r292 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>)));
 
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r292 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                <a href="@0@System/A.html#2e8ad9e6007798e5" class="k">var</a> <span id="r293 rd" class="r293 r">publicCer</span> = <b>new</b> <a href="@0@System/A.html#c9d1c203351eec15" class="t constructor">X509Certificate2</a>(<span class="r292 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r293 r">publicCer</span>);
                <span class="t t">Assert</span>.<span class="i method">False</span>(<span class="r293 r">publicCer</span>.<a href="@0@System/A.html#f7670d048c7a5a70" class="i property">HasPrivateKey</a>);
 
                <b>try</b>
                {
                    <span class="c">// Get the current version</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#17bb4008337c63b2" class="k">var</a> <span id="r294 rd" class="r294 r">certificateBundleLatest</span> =
                        <span class="r284 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#92dda13fee99dd3f" class="i method">GetCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r285 r">certificateName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r294 r">certificateBundleLatest</span>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r294 r">certificateBundleLatest</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r294 r">certificateBundleLatest</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a9c30d2389e54bbf" class="i property">KeyIdentifier</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r294 r">certificateBundleLatest</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r292 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6eb8e7ba2c1c279d" class="i property">Policy</a>);
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r289 r">myCertificateCollection</span><a href="@0@System/A.html#e40d03783f7a3350">[</a><span class="r290 r">privateKeyCertificateIndex</span>].<a href="@0@System/A.html#6313394a0155d4d0" class="i property">Thumbprint</a>, <a href="#3c129aa0784fec61" class="i method">ToHexString</a>(<span class="r292 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>)));
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r294 r">certificateBundleLatest</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                    <span class="r293 r">publicCer</span> = <b>new</b> <a href="@0@System/A.html#c9d1c203351eec15" class="t constructor">X509Certificate2</a>(<span class="r294 r">certificateBundleLatest</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r293 r">publicCer</span>);
                    <span class="t t">Assert</span>.<span class="i method">False</span>(<span class="r293 r">publicCer</span>.<a href="@0@System/A.html#f7670d048c7a5a70" class="i property">HasPrivateKey</a>);
 
                    <span class="c">// Get the specific version</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#17bb4008337c63b2" class="k">var</a> <span id="r295 rd" class="r295 r">certificateBundleVersion</span> =
                        <span class="r284 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bb630d01ea17fa89" class="i method">GetCertificateAsync</a>(<span class="r292 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#b821bb85d4af2d32" class="i property">CertificateIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#0bf83f1b0a96da15" class="i property">Identifier</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r295 r">certificateBundleVersion</span>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r295 r">certificateBundleVersion</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r295 r">certificateBundleVersion</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a9c30d2389e54bbf" class="i property">KeyIdentifier</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r295 r">certificateBundleVersion</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>);
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r289 r">myCertificateCollection</span><a href="@0@System/A.html#e40d03783f7a3350">[</a><span class="r290 r">privateKeyCertificateIndex</span>].<a href="@0@System/A.html#6313394a0155d4d0" class="i property">Thumbprint</a>, <a href="#3c129aa0784fec61" class="i method">ToHexString</a>(<span class="r292 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>)));
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r295 r">certificateBundleVersion</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                    <span class="r293 r">publicCer</span> = <b>new</b> <a href="@0@System/A.html#c9d1c203351eec15" class="t constructor">X509Certificate2</a>(<span class="r295 r">certificateBundleVersion</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r293 r">publicCer</span>);
                    <span class="t t">Assert</span>.<span class="i method">False</span>(<span class="r293 r">publicCer</span>.<a href="@0@System/A.html#f7670d048c7a5a70" class="i property">HasPrivateKey</a>);
 
                    <span class="c">// Get the secret</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#15b4a290938630b9" class="k">var</a> <span id="r296 rd" class="r296 r">retrievedSecret</span> =
                        <span class="r284 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ac3db2f02b80769f" class="i method">GetSecretAsync</a>(<span class="r295 r">certificateBundleVersion</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#0bf83f1b0a96da15" class="i property">Identifier</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r296 r">retrievedSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#2c544450da2d05d2" class="i property">ContentType</a>, <span class="r288 r">certificateMimeType</span>));
 
                    <a href="@0@System/A.html#2e8ad9e6007798e5" class="k">var</a> <span id="r297 rd" class="r297 r">retrievedCertificate</span> = <b>new</b> <a href="@0@System/A.html#d1fabe236fa55c47" class="t constructor">X509Certificate2</a>(
                        <a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#08c34f52087ba624" class="i method">FromBase64String</a>(<span class="r296 r">retrievedSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#87d7dde6ba13e8cb" class="i property">Value</a>),
                        <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>,
                        <a href="@0@mscorlib/A.html#db2c6ad625b2625d" class="t t">X509KeyStorageFlags</a>.<a href="@0@mscorlib/A.html#bbbbe6e8a4f7ebd5" class="i field">Exportable</a>);
 
                    <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r297 r">retrievedCertificate</span>.<a href="@0@System/A.html#f7670d048c7a5a70" class="i property">HasPrivateKey</a>);
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r289 r">myCertificateCollection</span><a href="@0@System/A.html#e40d03783f7a3350">[</a><span class="r290 r">privateKeyCertificateIndex</span>].<a href="@0@System/A.html#6313394a0155d4d0" class="i property">Thumbprint</a>, <span class="r297 r">retrievedCertificate</span>.<a href="@0@System/A.html#6313394a0155d4d0" class="i property">Thumbprint</a>));
                }
                <b>finally</b>
                {
                    <span class="c">// Delete</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#4e8132c83a7cdbc6" class="k">var</a> <span id="r298 rd" class="r298 r">certificateBundleDeleted</span> =
                        <span class="r284 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#1dfc62ae7bb6ff4e" class="i method">DeleteCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r285 r">certificateName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r298 r">certificateBundleDeleted</span>);
                }
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="80b69c6eb5f52650" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CertificateImportTest3</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r299 rd" class="r299 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r300 rd" class="r300 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <b>const string</b> <span id="r301 rd" class="r301 r">certificateName</span> = <span class="s">&quot;importCert03&quot;</span>;
                <b>const string</b> <span id="r302 rd" class="r302 r">certificateContent</span> =
                      <span class="s">&quot;MIIRoAIBAzCCEWAGCSqGSIb3DQEHAaCCEVEEghFNMIIRSTCCBhoGCSqGSIb3DQEHAaCCBgsEggYHMIIGAzCCBf8GCyqGSIb3DQEMCgECoIIE/jCCBPowHAYKKoZIhvcNAQwBAzAOBAhtIn/Rl4mXPwICB9AEggTYBKW39qNDo42n20iIYa60u9R5BwJpc9zh0F1L7xROH6EUF0jG01TJwFJ10Daz0FCmuK4Ikz+AdDB5FIGCNCWbQDau/aOwad9LkXf+HCHsLe4V6C4oMPsKzcHRkJn3YSx3K/SYKvqPlPzxbch/m7rXE8adPgmC0nHclSkPhQpsjwUx4MLoKGDyN6LVf0Hhn/Cu3yC6mMrFCnPLhXYYq39LDDRFUCvkuamm30skHJIQ3GkWwi21l6E4Wla2ZohRoZi/vag1qCJc3FPS27ftnD3e4xb5dOncS8wkhdwFoKmXCkC+cS8/h2Oy5p+gZ5SbwM8CrwwqLw6H8MQ1F+Bq78JWLLg6LapBegvIDHd6kLd24JMN+OByB1KZJZfvi11YLINrUsF+fdeAUVl4YwlCUR1s6JyekkfaL+Utt+Ryl1icVbS7wxPP3xrYBioJuvHYQWVhfmlBmRLDWRp/mjUmynuIkiJoC7UZLu/SIRQ63fAh92oPkzPCs3R9iKdnSM0sDKVC4r3cDklGl+66ctQCMtbG98elHwilSSCPFu7gpzKgoQUse5On+a8o4RHkS9vUUws5GCpw0qAHWbf3Ka2bW9KBwsai52src6GTt+rY5jqzw+nrfKPReXWWIrXQq/GBJslMzF77JPdoCugcbqpZcGadKj+cZl+KkxAi0DAe+byQhKksplPlpFljWLlhzhQlDiM7dCV/rh3RURTndZEZKV0WSGbD1W4h+nFA/2SYJ/gjkpoQvtkAH1KpVqfA6XZj2rJ0ypHi/TfViHj+UQ0e2b8mn5GbWrJjFNUM3VK+CwAEaLD+JQP6yprO1Tz0guSlgbp9bTiIU/1LfSR3+yKdSpbKwk+UE65GTtJJCkmBbIxzKqT2IUXiDQnWXz6gR3If9mbX0o92oVH/TGihJUOQXGHvgtmx9X99ll+WQAjeJCjJuEAPaof0BhmC3FBIjyAUR4eyQa3quf6bNAJDa9cmBcdxeUXGTsnLpGwGrwhxiVatwHVrOrVy8kCxYatobdYZWsEzYhDHE6LpNxQJ0zKaSwX24/7We0NdpJJQ8LE8dmgjqOYA8bS8Wrwf5Y7u51D/E+uQRzCO9JaORex13itmFIrTC8yTr7N22kZMduLywh/2qaxQRyvQN4z+gIbPpt0kCzGhN6mgkJsvK1ZYQa2/HDVHQZ1hW6HMizhl0O4ArE36RCu5xPhw9GEM66O3aYLtFdF4RGt4/xI7F5WoDVhsW1lftjMbATl/lN16qPCoJOz6fhGPPiwyPdZu49rq/zDyuDSGG+K+AgfvG4pI3gkz3sPkEhRd2SCnU9THQIqBaEfR+go/uTCDbM1JUhaD5rygIRckfAU9quRUxb33ppduiUTuQ/wzy/YQpPrAKxMAGwZjFiztsaYX/YNdH/+OKxL2htg8wlnfSL0LjOIek8bTfjZCl8trpCaVzCtIjE34zFIMO1t30Rauo5R2BsDnbPLOhu+JJjWiSQdNL8+JAwbeMVZ40XBJszsm/Zp3CFlKisQHO62+STHON8MWWaeS0HFuAkQ7oPvkjTisPxK6IpTyQUvt40SjKE5PqtTUA2QwDmNPMzmzXL9HcJO9ShqCQIZ06LuKyU1FjPUGpzaqr+eZ1Whqrg+1hrK0EVeFLqPLuq8g2/p7Rjol/sRWijGB7TATBgkqhkiG9w0BCRUxBgQEAQAAADBbBgkqhkiG9w0BCRQxTh5MAHsAMwA3AEIANQBEAEYANgBFAC0ANwBDAEYAOAAtADQAMQA3ADcALQBCADMAQwA5AC0ANgBCADMAMAA3ADQANQAzAEUAQQBBADgAfTB5BgkrBgEEAYI3EQExbB5qAE0AaQBjAHIAbwBzAG8AZgB0ACAARQBuAGgAYQBuAGMAZQBkACAAUgBTAEEAIABhAG4AZAAgAEEARQBTACAAQwByAHkAcAB0AG8AZwByAGEAcABoAGkAYwAgAFAAcgBvAHYAaQBkAGUAcjCCCycGCSqGSIb3DQEHBqCCCxgwggsUAgEAMIILDQYJKoZIhvcNAQcBMBwGCiqGSIb3DQEMAQYwDgQI+X7kACjTD90CAgfQgIIK4H9VWWQ6sOmJW5DTNp6FbcDBHvvaT0WvCvInP8p6s9pg0lm+BzxTATkpQRZb7ih+EfbkDMW6TMp0ikC4Ln4DTA3SB2xJuNsBhiLzHvfy9CHZhZ+CGgPQfG8ZNQzUJbkGH6vLdcdi0GCVffcZWfSGfp5jWGHE8DfZOihCKc2C+jEzUA32WNETwSsX0Uo+O+IJdIM6t4a+bFEwnOoV/vLCbHb+VoGewZX8n/mRNAjC6zmlOcnMYbck1XTpXOe0fg5OYqz2KpwK3laXDcyRczCR0mSXURHLgAFTlFoVPxnqoVKGn3zyVSyL696KjJ/2Kn0iauHltC+mnq5tpTJiEeN87v7KDyspm+jBSH27QevXCj0mzj/6rYJCXSUO78sZws5837NAVb26P9C1STduOXyCViBJUdcZlhrD1MVLXSgBEUm4UR1eG0hYMrII8I5KibB7WBFR6PGf289XQQPXBIQ4isth/qZT9SbT51Yo5OZM+VSrOmhIIXhzM22PfGwTUxoQteb99fgmIOQjxonD8gN2/g76tdSGO/X7ohmxjhPqMCHtyok8wy3RiCj2tQYX/EXUm5sWRc/73d1++IM7ePNzpmb9BPEVtiiC6P91a/2NGRHlRV893iRJgTc3bn2OSM6Iskqy7HSGDjAKnrwWYptU40jyrXGK8I1X6EBBqTK26ttAGkxBPU567bEts7RherkvbwkrhCI7p2Tp4+oPnIlBgY72h7mp/gDMECpsFOWjAPd9VLITj6tRpa4Bm2aDZFvDAAahS+KuwDJGjh6zKhNEtSIe4xBU5bQo8mMl3UrtNyrG9tJooCVlOfsQp0NS0NbBbbTanQ1NbdZ+kZOqChn7b+dj6fZtYZ6efMV4HX3/dq4rqWNPYx9BZBeduKggOLRMQ4Bz9xAWwVC3D7ksAtRsz4WRkJug/yn/dAMdrWxe9l++F1e/n7tPyoRKLC4eoxCKbcYUZrdmfcaQi8E3duzpL0VkV9hty4BvFw94riV8IVkXcJb7RH+zumwhKqmzb2tnkgXhBOwIyaG2x6avrrkxps7R5lxAyz4JmHbsKFJMrxhX75HI0AxLCUCpJxrQ3uXNSyrsXUo7tpc4Q1DYDUaKfZ3KfBh8CKD3OHcPCyPrwzSS/ZYUUq5hxNJpMTKb4B2HZSHZ6t2driPb+t0pP1khoUKYmf0Z4MJd98lOAbmB55udVDAkbhWVHplB/tU7sHMQd2XmI5ee3+x7ItvsqUZ1xf7mWjM07/HqLCdmlJVQPNtZLxwMtHxaxj0lTpBlhuO91t2XBjrRaZDES1HGNxPtMoX7Tq/yzIFmPl/YnS2QfUR6wwQzoYpKX1p/+E2faywscdOtdoURg/xbIbWALDN61heN8iI3vbMxD7vhaauEWbBSMgplKZntFH0HCbP75TuJWr2nCTsn37dql4CVEim2ITRGDwvlb0O3z37PszJCecI2BOLNAnGjkiGu1qnsrjthltBqxdXkXNtBuX5YQeyoU0I/MeKWJSy/t231Es4iBHsQ2vxdKILi0l//OUDIixc+/eCf2+cVDhcEEzB0KRNziO6b9by9/Man+ZJBxWfQkpTExx8YzmGrftffTLb3qFA7Hd4mHAV3exIL6w5LAJBRr7MwP9V/XlGDgKwaMH8iHidzAkCz5U/AH2gTItGljm/AJgaSl45nwLd4i93Hh10Z/dl5KbGZ62aF7agz0ykYWTdtWyILm1fdI3IpHYsCphiIoFDvKAfktJss1PfNst5iemsCkgzULrb1XBYFyCWTE4pZBAbeU2FpWbZWGyBjNDuofsN4l9RyRBGHFgip+ZgQ1INpvxO9SyLZ+RnG2FL7EewNWD5DepSIDIoQxF/ZRGHtEpOI8oW7beR/lEg6yuycwa7S+PxxoMqKJCyrg7xOjiwpQQBgGmdy0UO/9r4ehn9JmKFqevMQwN7iA+kcSuSx7ZBrmGM+uNDnnuN0/R3XQ/JQfF/lXt4AxaRCZtY5wc9gpwiyZeVvs/67TqBgqijCpO3qOsDMi9zDqUBpFkUOGF/FAm+bz0ouzjgJGK7K0UzBY/sB306qEc3cQiJuU4GDmCM9rs4IeoGG1h4Uy0YZHiEa7rkOr0L5G1Evx5y5wgHZCcmTjqYzGeSOqqoQlXsuiet++jAhCsa3h6bB0YTF7SaBKOeOnY6omioTxvYXoQHKnhdMZs93iKZpJ2W/4cE6D/w3XbgBaeL/D6uHdLpVip9r6VW3LYcvAhVDuygGWez1h6+vin0E1v2nW86CTjX0w+0JNZBez2s1j9SzbUz/lfZMmduQgSHhC92gBfqANhheQvwpTPV2/H1dI6YqD9kHHyquXyuY7cyJ8mmb4j7aM9fGiiwUDf+AJXnUYc7WRLex84xUHHtfArVBsN4akgaGjqgZDybpQAquZcxq5oaF0MBQkd6H3GxQA6p1M1QnoUqQzmchN2oMeaSdE9a0HhHAt3oci4pgyOeFvykrolsZu13boQ3/uyUHarVfF+QoMkKm0QvKuZr0jglwqlVaiXyWBUwN8fCpb3zo8FnY897friBIk5HcaiJiM7B25v46jbImd546ajlPSD+xxUWBmAxFYYebeGE1t/+rYUd4ZcMKaQUD8mhc6iA25ppY5N94+gbvLRl1OixUDPKQohRbvhZhYgpfiQQKWUnJS5fI1plXdVBrcDBzgfBbWBfrSr4tuJTqNGtylMAZPEJOJQYo47JWH9Wate44sM1y6+qVodw6geqDcYltiVxhFP3XYUBOtY9V34WLUxjfu3zapm+Ugnf46sZgU0yg91Lq9BupRDBWpZ/Qb4q//toXXYfeUyAG0G5wgbgqRKyA2RiGljiLOB0VaEbpr3ShBql5Ih67gmCcYlvv05WPA4kL6NMOcK9r46BexTI/7EALNZM5xV9B/jcsckDy2QZ+rMUc4IlAzBQ9exytLwzFanRqKnihuQmcYNJHDbHbYwO2S6h7HWZhVd/9J+ljKWj7pcSQdroiqzzUD8mKpuXbRnAbrsaksDfbEu0S+VmlWY7Q70H1M7V9cEwHt1CdSm95dDQVGJ2DrotPc3LXesw9UH+BmLRc2pSBojI2s5Ojv6yJW1IF6XzwA3b9BJvi5QtKuOL4Wy4u7yue8VtSkW1fqMdq6z5gDe6S6G6msYVPjofdG0/vBoZDxGz0uQ3wsTwes36IuQk9NrAo6ghPs4Yhe3S4rLk1PlVU0PBhnGlWY6PcSfg14PxFclfcR5zW9vazXE3tbzDeHaD7ZHuL2AtQ35PtSCjEqxvz/kXwd15BOvfY6JLxiQ7S3PKR+TYArkcPzRvJBXBkncdm7OC+yYK8RnswVgiG1aENLJnEJW1sMHs8ljOdb/B+m61nfSl5gCc8PyE4wfsdkZtKgxKj9gCkD3HE6C5qM0PThXvvPMKtJk3ol+MuPE1Fz7tGMhpotk0mjFMy6/TY5VtPx69636hxBk2z0zzVtHguRMHtzaKqkRqkWlb/z0wAInI2nBr/44achdUnmOV9CEga3OmSFhfPHD7G0xhKA5kg4vLu9XD/Oru70R7qpaRUzz+qJZ4KGiuGXCgOs6iFkLytBBkc7uF/hmBflF+bhfrOb7hPEEyA5trfJVUoPcDWckJzCq0U5AnpwsXeuNoEKcsKqnA9sqXLEHio/oRDrHHT9uX45s8g6Go5MQfn2Si6JtcfHKMToxJrGy2L1YB8J/jB5SrvHbshEG76n5FnBS/87P3mRTA3MB8wBwYFKw4DAhoEFFf3LCdTrWWjzuc86/lNx3oF4B9xBBRFHJ6spK47q/5FkYCXwwUyuX0eQg==&quot;</span>;
 
                <b>const string</b> <span id="r303 rd" class="r303 r">certificatePassword</span> = <span class="s">&quot;123&quot;</span>;
                <b>const string</b> <span id="r304 rd" class="r304 r">certificateMimeType</span> = <span class="s">&quot;application/x-pkcs12&quot;</span>;
 
                <a href="@0@System/A.html#e7fce4775a334079" class="k">var</a> <span id="r305 rd" class="r305 r">myCertificateCollection</span> = <b>new</b> <a href="@0@System/A.html#5b23257548c78fee" class="t constructor">X509Certificate2Collection</a>();
                <span class="r305 r">myCertificateCollection</span>.<a href="@0@System/A.html#cefad7e469412308" class="i method">Import</a>(<a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#08c34f52087ba624" class="i method">FromBase64String</a>(<span class="r302 r">certificateContent</span>), <span class="r303 r">certificatePassword</span>, <a href="@0@mscorlib/A.html#db2c6ad625b2625d" class="t t">X509KeyStorageFlags</a>.<a href="@0@mscorlib/A.html#bbbbe6e8a4f7ebd5" class="i field">Exportable</a>);
 
                <a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r306 rd" class="r306 r">privateKeyCertificateIndex</span> = 0;
                <b>for</b> (<a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r307 rd" class="r307 r">i</span> = 0; <span class="r307 r">i</span> &lt; <span class="r305 r">myCertificateCollection</span>.<a href="@0@mscorlib/A.html#226516cac1c2208f" class="i property">Count</a>; <span class="r307 r">i</span>++)
                {
                    <b>if</b> (<span class="r305 r">myCertificateCollection</span><a href="@0@System/A.html#e40d03783f7a3350">[</a><span class="r307 r">i</span>].<a href="@0@System/A.html#f7670d048c7a5a70" class="i property">HasPrivateKey</a>)
                    {
                        <span class="r306 r">privateKeyCertificateIndex</span> = <span class="r307 r">i</span>;
                        <b>break</b>;
                    }
                }
 
                <span class="c">// Import cert</span>
                <a href="/Microsoft.Azure.KeyVault/A.html#17bb4008337c63b2" class="k">var</a> <span id="r308 rd" class="r308 r">createdCertificateBundle</span> = <span class="r300 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bf45b92a5feb434b" class="i method">ImportCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r301 r">certificateName</span>, <span class="r305 r">myCertificateCollection</span>, <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#144276523ef55663" class="t constructor">CertificatePolicy</a>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#811a1f39026ea2e4" class="i property">KeyProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#02d1d5b2b676cbac" class="t constructor">KeyProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#ec7e913f8475364b" class="i property">Exportable</a> = <b>true</b>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#3dc7487df43ecc32" class="i property">KeySize</a> = 2048,
                        <a href="/Microsoft.Azure.KeyVault/A.html#dfefc582b783a01e" class="i property">KeyType</a> = <span class="s">&quot;RSA&quot;</span>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#149ca5a1e3fe5376" class="i property">ReuseKey</a> = <b>false</b>
                    },
                    <a href="/Microsoft.Azure.KeyVault/A.html#3f4c4a8cd9f8a8e9" class="i property">SecretProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#36090c30e3255b35" class="t constructor">SecretProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#d5f6f440a646d1a5" class="i property">ContentType</a> = <span class="r304 r">certificateMimeType</span>
                    }
                }).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r308 r">createdCertificateBundle</span>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r308 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r308 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a9c30d2389e54bbf" class="i property">KeyIdentifier</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r308 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r308 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6eb8e7ba2c1c279d" class="i property">Policy</a>);
                <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r305 r">myCertificateCollection</span><a href="@0@System/A.html#e40d03783f7a3350">[</a><span class="r306 r">privateKeyCertificateIndex</span>].<a href="@0@System/A.html#6313394a0155d4d0" class="i property">Thumbprint</a>, <a href="#3c129aa0784fec61" class="i method">ToHexString</a>(<span class="r308 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>)));
 
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r308 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                <a href="@0@System/A.html#2e8ad9e6007798e5" class="k">var</a> <span id="r309 rd" class="r309 r">publicCer</span> = <b>new</b> <a href="@0@System/A.html#c9d1c203351eec15" class="t constructor">X509Certificate2</a>(<span class="r308 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r309 r">publicCer</span>);
                <span class="t t">Assert</span>.<span class="i method">False</span>(<span class="r309 r">publicCer</span>.<a href="@0@System/A.html#f7670d048c7a5a70" class="i property">HasPrivateKey</a>);
 
                <b>try</b>
                {
                    <span class="c">// Get the current version</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#17bb4008337c63b2" class="k">var</a> <span id="r310 rd" class="r310 r">certificateBundleLatest</span> =
                        <span class="r300 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#92dda13fee99dd3f" class="i method">GetCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r301 r">certificateName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r310 r">certificateBundleLatest</span>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r310 r">certificateBundleLatest</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r310 r">certificateBundleLatest</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a9c30d2389e54bbf" class="i property">KeyIdentifier</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r310 r">certificateBundleLatest</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r308 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6eb8e7ba2c1c279d" class="i property">Policy</a>);
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r305 r">myCertificateCollection</span><a href="@0@System/A.html#e40d03783f7a3350">[</a><span class="r306 r">privateKeyCertificateIndex</span>].<a href="@0@System/A.html#6313394a0155d4d0" class="i property">Thumbprint</a>, <a href="#3c129aa0784fec61" class="i method">ToHexString</a>(<span class="r308 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>)));
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r310 r">certificateBundleLatest</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                    <span class="r309 r">publicCer</span> = <b>new</b> <a href="@0@System/A.html#c9d1c203351eec15" class="t constructor">X509Certificate2</a>(<span class="r310 r">certificateBundleLatest</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r309 r">publicCer</span>);
                    <span class="t t">Assert</span>.<span class="i method">False</span>(<span class="r309 r">publicCer</span>.<a href="@0@System/A.html#f7670d048c7a5a70" class="i property">HasPrivateKey</a>);
 
                    <span class="c">// Get the specific version</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#17bb4008337c63b2" class="k">var</a> <span id="r311 rd" class="r311 r">certificateBundleVersion</span> =
                        <span class="r300 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bb630d01ea17fa89" class="i method">GetCertificateAsync</a>(<span class="r308 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#b821bb85d4af2d32" class="i property">CertificateIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#0bf83f1b0a96da15" class="i property">Identifier</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r311 r">certificateBundleVersion</span>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r311 r">certificateBundleVersion</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r311 r">certificateBundleVersion</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a9c30d2389e54bbf" class="i property">KeyIdentifier</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r311 r">certificateBundleVersion</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>);
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r305 r">myCertificateCollection</span><a href="@0@System/A.html#e40d03783f7a3350">[</a><span class="r306 r">privateKeyCertificateIndex</span>].<a href="@0@System/A.html#6313394a0155d4d0" class="i property">Thumbprint</a>, <a href="#3c129aa0784fec61" class="i method">ToHexString</a>(<span class="r308 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>)));
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r311 r">certificateBundleVersion</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                    <span class="r309 r">publicCer</span> = <b>new</b> <a href="@0@System/A.html#c9d1c203351eec15" class="t constructor">X509Certificate2</a>(<span class="r311 r">certificateBundleVersion</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r309 r">publicCer</span>);
                    <span class="t t">Assert</span>.<span class="i method">False</span>(<span class="r309 r">publicCer</span>.<a href="@0@System/A.html#f7670d048c7a5a70" class="i property">HasPrivateKey</a>);
 
                    <span class="c">// Get the secret</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#15b4a290938630b9" class="k">var</a> <span id="r312 rd" class="r312 r">retrievedSecret</span> =
                        <span class="r300 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ac3db2f02b80769f" class="i method">GetSecretAsync</a>(<span class="r311 r">certificateBundleVersion</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#0bf83f1b0a96da15" class="i property">Identifier</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r312 r">retrievedSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#2c544450da2d05d2" class="i property">ContentType</a>, <span class="r304 r">certificateMimeType</span>));
 
                    <a href="@0@System/A.html#2e8ad9e6007798e5" class="k">var</a> <span id="r313 rd" class="r313 r">retrievedCertificate</span> = <b>new</b> <a href="@0@System/A.html#d1fabe236fa55c47" class="t constructor">X509Certificate2</a>(
                        <a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#08c34f52087ba624" class="i method">FromBase64String</a>(<span class="r312 r">retrievedSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#87d7dde6ba13e8cb" class="i property">Value</a>),
                        <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>,
                        <a href="@0@mscorlib/A.html#db2c6ad625b2625d" class="t t">X509KeyStorageFlags</a>.<a href="@0@mscorlib/A.html#bbbbe6e8a4f7ebd5" class="i field">Exportable</a>);
 
                    <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r313 r">retrievedCertificate</span>.<a href="@0@System/A.html#f7670d048c7a5a70" class="i property">HasPrivateKey</a>);
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r305 r">myCertificateCollection</span><a href="@0@System/A.html#e40d03783f7a3350">[</a><span class="r306 r">privateKeyCertificateIndex</span>].<a href="@0@System/A.html#6313394a0155d4d0" class="i property">Thumbprint</a>, <span class="r313 r">retrievedCertificate</span>.<a href="@0@System/A.html#6313394a0155d4d0" class="i property">Thumbprint</a>));
                }
                <b>finally</b>
                {
                    <span class="c">// Delete</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#4e8132c83a7cdbc6" class="k">var</a> <span id="r314 rd" class="r314 r">certificateBundleDeleted</span> =
                        <span class="r300 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#1dfc62ae7bb6ff4e" class="i method">DeleteCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r301 r">certificateName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r314 r">certificateBundleDeleted</span>);
                }
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="b422f479d232690f" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CertificateListTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r315 rd" class="r315 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r316 rd" class="r316 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <span class="c">// Create two certificates</span>
                <b>const string</b> <span id="r317 rd" class="r317 r">certificate01Name</span> = <span class="s">&quot;listCert01&quot;</span>;
                <b>const string</b> <span id="r318 rd" class="r318 r">certificate01Content</span> =
                    <span class="s">&quot;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&quot;</span>;
                <b>const string</b> <span id="r319 rd" class="r319 r">certificate01Password</span> = <span class="s">&quot;123&quot;</span>;
                <b>const string</b> <span id="r320 rd" class="r320 r">certificate01MimeType</span> = <span class="s">&quot;application/x-pkcs12&quot;</span>;
 
                <a href="@0@System/A.html#2e8ad9e6007798e5" class="k">var</a> <span id="r321 rd" class="r321 r">certificate01</span> = <b>new</b> <a href="@0@System/A.html#d1fabe236fa55c47" class="t constructor">X509Certificate2</a>(<a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#08c34f52087ba624" class="i method">FromBase64String</a>(<span class="r318 r">certificate01Content</span>), <span class="r319 r">certificate01Password</span>, <a href="@0@mscorlib/A.html#db2c6ad625b2625d" class="t t">X509KeyStorageFlags</a>.<a href="@0@mscorlib/A.html#bbbbe6e8a4f7ebd5" class="i field">Exportable</a>);
                <a href="/Microsoft.Azure.KeyVault/A.html#17bb4008337c63b2" class="k">var</a> <span id="r322 rd" class="r322 r">createdCertificateBundle01</span> = <span class="r316 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#7b09294278d30e1a" class="i method">ImportCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r317 r">certificate01Name</span>, <span class="r318 r">certificate01Content</span>, <span class="r319 r">certificate01Password</span>, <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#144276523ef55663" class="t constructor">CertificatePolicy</a>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#811a1f39026ea2e4" class="i property">KeyProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#02d1d5b2b676cbac" class="t constructor">KeyProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#ec7e913f8475364b" class="i property">Exportable</a> = <b>true</b>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#3dc7487df43ecc32" class="i property">KeySize</a> = 2048,
                        <a href="/Microsoft.Azure.KeyVault/A.html#dfefc582b783a01e" class="i property">KeyType</a> = <span class="s">&quot;RSA&quot;</span>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#149ca5a1e3fe5376" class="i property">ReuseKey</a> = <b>false</b>
                    },
                    <a href="/Microsoft.Azure.KeyVault/A.html#3f4c4a8cd9f8a8e9" class="i property">SecretProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#36090c30e3255b35" class="t constructor">SecretProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#d5f6f440a646d1a5" class="i property">ContentType</a> = <span class="r320 r">certificate01MimeType</span>
                    }
                }).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r322 r">createdCertificateBundle01</span>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r322 r">createdCertificateBundle01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r322 r">createdCertificateBundle01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a9c30d2389e54bbf" class="i property">KeyIdentifier</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r322 r">createdCertificateBundle01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r322 r">createdCertificateBundle01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6eb8e7ba2c1c279d" class="i property">Policy</a>);
                <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r321 r">certificate01</span>.<a href="@0@System/A.html#6313394a0155d4d0" class="i property">Thumbprint</a>, <a href="#3c129aa0784fec61" class="i method">ToHexString</a>(<span class="r322 r">createdCertificateBundle01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>)));
 
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r322 r">createdCertificateBundle01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                <a href="@0@System/A.html#2e8ad9e6007798e5" class="k">var</a> <span id="r323 rd" class="r323 r">publicCer</span> = <b>new</b> <a href="@0@System/A.html#c9d1c203351eec15" class="t constructor">X509Certificate2</a>(<span class="r322 r">createdCertificateBundle01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r323 r">publicCer</span>);
                <span class="t t">Assert</span>.<span class="i method">False</span>(<span class="r323 r">publicCer</span>.<a href="@0@System/A.html#f7670d048c7a5a70" class="i property">HasPrivateKey</a>);
 
                <b>const string</b> <span id="r324 rd" class="r324 r">certificate02Name</span> = <span class="s">&quot;listCert02&quot;</span>;
                <b>const string</b> <span id="r325 rd" class="r325 r">certificate02Content</span> =
                    <span class="s">&quot;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&quot;</span>;
                <b>const string</b> <span id="r326 rd" class="r326 r">certificate02Password</span> = <span class="s">&quot;123&quot;</span>;
                <b>const string</b> <span id="r327 rd" class="r327 r">certificate02MimeType</span> = <span class="s">&quot;application/x-pkcs12&quot;</span>;
 
                <a href="@0@System/A.html#2e8ad9e6007798e5" class="k">var</a> <span id="r328 rd" class="r328 r">certificate02</span> = <b>new</b> <a href="@0@System/A.html#d1fabe236fa55c47" class="t constructor">X509Certificate2</a>(<a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#08c34f52087ba624" class="i method">FromBase64String</a>(<span class="r325 r">certificate02Content</span>), <span class="r326 r">certificate02Password</span>, <a href="@0@mscorlib/A.html#db2c6ad625b2625d" class="t t">X509KeyStorageFlags</a>.<a href="@0@mscorlib/A.html#bbbbe6e8a4f7ebd5" class="i field">Exportable</a>);
 
                <a href="/Microsoft.Azure.KeyVault/A.html#17bb4008337c63b2" class="k">var</a> <span id="r329 rd" class="r329 r">createdCertificateBundle02</span> = <span class="r316 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#7b09294278d30e1a" class="i method">ImportCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r324 r">certificate02Name</span>, <span class="r325 r">certificate02Content</span>, <span class="r326 r">certificate02Password</span>, <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#144276523ef55663" class="t constructor">CertificatePolicy</a>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#811a1f39026ea2e4" class="i property">KeyProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#02d1d5b2b676cbac" class="t constructor">KeyProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#ec7e913f8475364b" class="i property">Exportable</a> = <b>true</b>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#3dc7487df43ecc32" class="i property">KeySize</a> = 2048,
                        <a href="/Microsoft.Azure.KeyVault/A.html#dfefc582b783a01e" class="i property">KeyType</a> = <span class="s">&quot;RSA&quot;</span>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#149ca5a1e3fe5376" class="i property">ReuseKey</a> = <b>false</b>
                    },
                    <a href="/Microsoft.Azure.KeyVault/A.html#3f4c4a8cd9f8a8e9" class="i property">SecretProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#36090c30e3255b35" class="t constructor">SecretProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#d5f6f440a646d1a5" class="i property">ContentType</a> = <span class="r327 r">certificate02MimeType</span>
                    }
                }).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
 
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r329 r">createdCertificateBundle02</span>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r329 r">createdCertificateBundle02</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r329 r">createdCertificateBundle02</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a9c30d2389e54bbf" class="i property">KeyIdentifier</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r329 r">createdCertificateBundle02</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r329 r">createdCertificateBundle02</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6eb8e7ba2c1c279d" class="i property">Policy</a>);
                <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r328 r">certificate02</span>.<a href="@0@System/A.html#6313394a0155d4d0" class="i property">Thumbprint</a>, <a href="#3c129aa0784fec61" class="i method">ToHexString</a>(<span class="r329 r">createdCertificateBundle02</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>)));
 
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r329 r">createdCertificateBundle02</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                <span class="r323 r">publicCer</span> = <b>new</b> <a href="@0@System/A.html#c9d1c203351eec15" class="t constructor">X509Certificate2</a>(<span class="r329 r">createdCertificateBundle02</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r323 r">publicCer</span>);
                <span class="t t">Assert</span>.<span class="i method">False</span>(<span class="r323 r">publicCer</span>.<a href="@0@System/A.html#f7670d048c7a5a70" class="i property">HasPrivateKey</a>);
 
                <b>try</b>
                {
                    <a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#8125b18f5d7ee303" class="k">var</a> <span id="r330 rd" class="r330 r">certList</span> = <span class="r316 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#628683d08d470ebe" class="i method">GetCertificatesAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r330 r">certList</span>);
                    <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r330 r">certList</span>.<a href="@0@System.Core/A.html#41ef9e39e54d0d0b" class="i method">Count</a>() &gt;= 2);
                    <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r330 r">certList</span>, <span id="r331 rd" class="r331 r">s</span> =&gt; 0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<a href="#3c129aa0784fec61" class="i method">ToHexString</a>(<span class="r331 r">s</span>.<a href="/Microsoft.Azure.KeyVault/A.html#d7e96da0ad737a57" class="i property">X509Thumbprint</a>), <a href="#3c129aa0784fec61" class="i method">ToHexString</a>(<span class="r322 r">createdCertificateBundle01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>)));
                    <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r330 r">certList</span>, <span id="r332 rd" class="r332 r">s</span> =&gt; 0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<a href="#3c129aa0784fec61" class="i method">ToHexString</a>(<span class="r332 r">s</span>.<a href="/Microsoft.Azure.KeyVault/A.html#d7e96da0ad737a57" class="i property">X509Thumbprint</a>), <a href="#3c129aa0784fec61" class="i method">ToHexString</a>(<span class="r329 r">createdCertificateBundle02</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>)));
                }
                <b>finally</b>
                {
                    <span class="c">// Delete</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#4e8132c83a7cdbc6" class="k">var</a> <span id="r333 rd" class="r333 r">certificateBundleDeleted01</span> =
                        <span class="r316 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#1dfc62ae7bb6ff4e" class="i method">DeleteCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r317 r">certificate01Name</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r333 r">certificateBundleDeleted01</span>);
 
                    <a href="/Microsoft.Azure.KeyVault/A.html#4e8132c83a7cdbc6" class="k">var</a> <span id="r334 rd" class="r334 r">certificateBundleDeleted02</span> =
                        <span class="r316 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#1dfc62ae7bb6ff4e" class="i method">DeleteCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r324 r">certificate02Name</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r334 r">certificateBundleDeleted02</span>);
                }
            }
 
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="84346e9a6eb1e2eb" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CertificateListVersionsTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r335 rd" class="r335 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r336 rd" class="r336 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <span class="c">// Create two certificates</span>
                <b>const string</b> <span id="r337 rd" class="r337 r">certificateName</span> = <span class="s">&quot;listVersionsCert01&quot;</span>;
                <b>const string</b> <span id="r338 rd" class="r338 r">certificate01Content</span> =
                    <span class="s">&quot;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&quot;</span>;
                <b>const string</b> <span id="r339 rd" class="r339 r">certificate01Password</span> = <span class="s">&quot;123&quot;</span>;
                <b>const string</b> <span id="r340 rd" class="r340 r">certificate01MimeType</span> = <span class="s">&quot;application/x-pkcs12&quot;</span>;
 
                <a href="@0@System/A.html#2e8ad9e6007798e5" class="k">var</a> <span id="r341 rd" class="r341 r">version01</span> = <b>new</b> <a href="@0@System/A.html#d1fabe236fa55c47" class="t constructor">X509Certificate2</a>(<a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#08c34f52087ba624" class="i method">FromBase64String</a>(<span class="r338 r">certificate01Content</span>), <span class="r339 r">certificate01Password</span>, <a href="@0@mscorlib/A.html#db2c6ad625b2625d" class="t t">X509KeyStorageFlags</a>.<a href="@0@mscorlib/A.html#bbbbe6e8a4f7ebd5" class="i field">Exportable</a>);
                <a href="/Microsoft.Azure.KeyVault/A.html#17bb4008337c63b2" class="k">var</a> <span id="r342 rd" class="r342 r">createdCertificateBundle01</span> = <span class="r336 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#7b09294278d30e1a" class="i method">ImportCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r337 r">certificateName</span>, <span class="r338 r">certificate01Content</span>, <span class="r339 r">certificate01Password</span>, <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#144276523ef55663" class="t constructor">CertificatePolicy</a>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#811a1f39026ea2e4" class="i property">KeyProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#02d1d5b2b676cbac" class="t constructor">KeyProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#ec7e913f8475364b" class="i property">Exportable</a> = <b>true</b>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#3dc7487df43ecc32" class="i property">KeySize</a> = 2048,
                        <a href="/Microsoft.Azure.KeyVault/A.html#dfefc582b783a01e" class="i property">KeyType</a> = <span class="s">&quot;RSA&quot;</span>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#149ca5a1e3fe5376" class="i property">ReuseKey</a> = <b>false</b>
                    },
                    <a href="/Microsoft.Azure.KeyVault/A.html#3f4c4a8cd9f8a8e9" class="i property">SecretProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#36090c30e3255b35" class="t constructor">SecretProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#d5f6f440a646d1a5" class="i property">ContentType</a> = <span class="r340 r">certificate01MimeType</span>
                    }
                }).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r342 r">createdCertificateBundle01</span>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r342 r">createdCertificateBundle01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r342 r">createdCertificateBundle01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a9c30d2389e54bbf" class="i property">KeyIdentifier</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r342 r">createdCertificateBundle01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r342 r">createdCertificateBundle01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6eb8e7ba2c1c279d" class="i property">Policy</a>);
                <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r341 r">version01</span>.<a href="@0@System/A.html#6313394a0155d4d0" class="i property">Thumbprint</a>, <a href="#3c129aa0784fec61" class="i method">ToHexString</a>(<span class="r342 r">createdCertificateBundle01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>)));
 
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r342 r">createdCertificateBundle01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                <a href="@0@System/A.html#2e8ad9e6007798e5" class="k">var</a> <span id="r343 rd" class="r343 r">publicCer</span> = <b>new</b> <a href="@0@System/A.html#c9d1c203351eec15" class="t constructor">X509Certificate2</a>(<span class="r342 r">createdCertificateBundle01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r343 r">publicCer</span>);
                <span class="t t">Assert</span>.<span class="i method">False</span>(<span class="r343 r">publicCer</span>.<a href="@0@System/A.html#f7670d048c7a5a70" class="i property">HasPrivateKey</a>);
 
                <b>const string</b> <span id="r344 rd" class="r344 r">certificate02Content</span> =
    <span class="s">&quot;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&quot;</span>;
                <b>const string</b> <span id="r345 rd" class="r345 r">certificate02Password</span> = <span class="s">&quot;123&quot;</span>;
                <b>const string</b> <span id="r346 rd" class="r346 r">certificate02MimeType</span> = <span class="s">&quot;application/x-pkcs12&quot;</span>;
 
                <a href="@0@System/A.html#2e8ad9e6007798e5" class="k">var</a> <span id="r347 rd" class="r347 r">version02</span> = <b>new</b> <a href="@0@System/A.html#d1fabe236fa55c47" class="t constructor">X509Certificate2</a>(<a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#08c34f52087ba624" class="i method">FromBase64String</a>(<span class="r344 r">certificate02Content</span>), <span class="r345 r">certificate02Password</span>, <a href="@0@mscorlib/A.html#db2c6ad625b2625d" class="t t">X509KeyStorageFlags</a>.<a href="@0@mscorlib/A.html#bbbbe6e8a4f7ebd5" class="i field">Exportable</a>);
                <a href="/Microsoft.Azure.KeyVault/A.html#17bb4008337c63b2" class="k">var</a> <span id="r348 rd" class="r348 r">createdCertificateBundle02</span> = <span class="r336 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#7b09294278d30e1a" class="i method">ImportCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r337 r">certificateName</span>, <span class="r344 r">certificate02Content</span>, <span class="r345 r">certificate02Password</span>, <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#144276523ef55663" class="t constructor">CertificatePolicy</a>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#811a1f39026ea2e4" class="i property">KeyProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#02d1d5b2b676cbac" class="t constructor">KeyProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#ec7e913f8475364b" class="i property">Exportable</a> = <b>true</b>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#3dc7487df43ecc32" class="i property">KeySize</a> = 2048,
                        <a href="/Microsoft.Azure.KeyVault/A.html#dfefc582b783a01e" class="i property">KeyType</a> = <span class="s">&quot;RSA&quot;</span>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#149ca5a1e3fe5376" class="i property">ReuseKey</a> = <b>false</b>
                    },
                    <a href="/Microsoft.Azure.KeyVault/A.html#3f4c4a8cd9f8a8e9" class="i property">SecretProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#36090c30e3255b35" class="t constructor">SecretProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#d5f6f440a646d1a5" class="i property">ContentType</a> = <span class="r346 r">certificate02MimeType</span>
                    }
                }).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r348 r">createdCertificateBundle02</span>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r348 r">createdCertificateBundle02</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r348 r">createdCertificateBundle02</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a9c30d2389e54bbf" class="i property">KeyIdentifier</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r348 r">createdCertificateBundle02</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r348 r">createdCertificateBundle02</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6eb8e7ba2c1c279d" class="i property">Policy</a>);
                <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r347 r">version02</span>.<a href="@0@System/A.html#6313394a0155d4d0" class="i property">Thumbprint</a>, <a href="#3c129aa0784fec61" class="i method">ToHexString</a>(<span class="r348 r">createdCertificateBundle02</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>)));
 
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r348 r">createdCertificateBundle02</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                <span class="r343 r">publicCer</span> = <b>new</b> <a href="@0@System/A.html#c9d1c203351eec15" class="t constructor">X509Certificate2</a>(<span class="r348 r">createdCertificateBundle02</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r343 r">publicCer</span>);
                <span class="t t">Assert</span>.<span class="i method">False</span>(<span class="r343 r">publicCer</span>.<a href="@0@System/A.html#f7670d048c7a5a70" class="i property">HasPrivateKey</a>);
 
                <b>try</b>
                {
                    <a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#8125b18f5d7ee303" class="k">var</a> <span id="r349 rd" class="r349 r">certList</span> = <span class="r336 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#897e8cbf7adc07bf" class="i method">GetCertificateVersionsAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r337 r">certificateName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r349 r">certList</span>);
                    <span class="t t">Assert</span>.<span class="i method">True</span>(2 == <span class="r349 r">certList</span>.<a href="@0@System.Core/A.html#41ef9e39e54d0d0b" class="i method">Count</a>());
                    <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r349 r">certList</span>, <span id="r350 rd" class="r350 r">s</span> =&gt; <span class="r350 r">s</span>.<a href="/Microsoft.Azure.KeyVault/A.html#d7e96da0ad737a57" class="i property">X509Thumbprint</a>.<a href="@0@System.Core/A.html#9bdd6ef7ba6a5615" class="i method">SequenceEqual</a>(<span class="r342 r">createdCertificateBundle01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>));
                    <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r349 r">certList</span>, <span id="r351 rd" class="r351 r">s</span> =&gt; <span class="r351 r">s</span>.<a href="/Microsoft.Azure.KeyVault/A.html#d7e96da0ad737a57" class="i property">X509Thumbprint</a>.<a href="@0@System.Core/A.html#9bdd6ef7ba6a5615" class="i method">SequenceEqual</a>(<span class="r348 r">createdCertificateBundle02</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>));
                }
                <b>finally</b>
                {
                    <span class="c">// Delete</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#4e8132c83a7cdbc6" class="k">var</a> <span id="r352 rd" class="r352 r">certificateBundleDeleted</span> =
                        <span class="r336 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#1dfc62ae7bb6ff4e" class="i method">DeleteCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r337 r">certificateName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r352 r">certificateBundleDeleted</span>);
                }
            }
 
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="812d63817fbc38a1" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CertificateCreateSelfSignedTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r353 rd" class="r353 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r354 rd" class="r354 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <b>const string</b> <span id="r355 rd" class="r355 r">certificateName</span> = <span class="s">&quot;selfSignedCert01&quot;</span>;
                <b>const string</b> <span id="r356 rd" class="r356 r">certificateMimeType</span> = <span class="s">&quot;application/x-pkcs12&quot;</span>;
                <b>const string</b> <span id="r357 rd" class="r357 r">certificateSubjectName</span> = <span class="s">&quot;CN=*.microsoft.com&quot;</span>;
                <b>try</b>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#6ecb24e00693fa9c" class="k">var</a> <span id="r358 rd" class="r358 r">certificateOperation</span> = <span class="r354 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#7e338492cef7ebcd" class="i method">CreateCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r355 r">certificateName</span>, <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#144276523ef55663" class="t constructor">CertificatePolicy</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#811a1f39026ea2e4" class="i property">KeyProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#02d1d5b2b676cbac" class="t constructor">KeyProperties</a>
                        {
                            <a href="/Microsoft.Azure.KeyVault/A.html#ec7e913f8475364b" class="i property">Exportable</a> = <b>true</b>,
                            <a href="/Microsoft.Azure.KeyVault/A.html#3dc7487df43ecc32" class="i property">KeySize</a> = 2048,
                            <a href="/Microsoft.Azure.KeyVault/A.html#dfefc582b783a01e" class="i property">KeyType</a> = <span class="s">&quot;RSA&quot;</span>,
                            <a href="/Microsoft.Azure.KeyVault/A.html#149ca5a1e3fe5376" class="i property">ReuseKey</a> = <b>false</b>
                        },
                        <a href="/Microsoft.Azure.KeyVault/A.html#3f4c4a8cd9f8a8e9" class="i property">SecretProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#36090c30e3255b35" class="t constructor">SecretProperties</a>
                        {
                            <a href="/Microsoft.Azure.KeyVault/A.html#d5f6f440a646d1a5" class="i property">ContentType</a> = <span class="r356 r">certificateMimeType</span>
                        },
                        <a href="/Microsoft.Azure.KeyVault/A.html#bb6228bf6bba8530" class="i property">IssuerParameters</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#5686c516ca2f0fa8" class="t constructor">IssuerParameters</a>
                        {
                            <a href="/Microsoft.Azure.KeyVault/A.html#82f70aae3b67402d" class="i property">Name</a> = <a href="#81e2eaf4784fc3d1" class="t t">WellKnownIssuers</a>.<a href="#479a9997035919bc" class="i field">Self</a>
                        },
                        <a href="/Microsoft.Azure.KeyVault/A.html#46bc8f22a51144e7" class="i property">X509CertificateProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#a31ea414052920b0" class="t constructor">X509CertificateProperties</a>
                        {
                            <a href="/Microsoft.Azure.KeyVault/A.html#897c1b0ee7c24358" class="i property">Subject</a> = <span class="r357 r">certificateSubjectName</span>,
                            <a href="/Microsoft.Azure.KeyVault/A.html#f578aa9d8046f551" class="i property">SubjectAlternativeNames</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#5023bf004ea09116" class="t constructor">SubjectAlternativeNames</a>
                            {
                                <a href="/Microsoft.Azure.KeyVault/A.html#1b66aedc39eba393" class="i property">DnsNames</a> = <b>new</b>[]
                                {
                                    <span class="s">&quot;onedrive.microsoft.com&quot;</span>,
                                    <span class="s">&quot;xbox.microsoft.com&quot;</span>
                                }
                            }
                        }
                    }).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <a href="/Microsoft.Azure.KeyVault/A.html#17bb4008337c63b2" class="k">var</a> <span id="r359 rd" class="r359 r">createdCertificateBundle</span> = <a href="#b92e879d42a15fff" class="i method">PollOnCertificateOperation</a>(<span class="r354 r">client</span>, <span class="r358 r">certificateOperation</span>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r359 r">createdCertificateBundle</span>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r359 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r359 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a9c30d2389e54bbf" class="i property">KeyIdentifier</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r359 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r359 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6eb8e7ba2c1c279d" class="i property">Policy</a>);
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r359 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                    <a href="@0@System/A.html#2e8ad9e6007798e5" class="k">var</a> <span id="r360 rd" class="r360 r">publicCer</span> = <b>new</b> <a href="@0@System/A.html#c9d1c203351eec15" class="t constructor">X509Certificate2</a>(<span class="r359 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r360 r">publicCer</span>);
                    <span class="t t">Assert</span>.<span class="i method">False</span>(<span class="r360 r">publicCer</span>.<a href="@0@System/A.html#f7670d048c7a5a70" class="i property">HasPrivateKey</a>);
 
                    <span class="c">// Get the certificate as a secret</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#15b4a290938630b9" class="k">var</a> <span id="r361 rd" class="r361 r">retrievedSecret</span> = <span class="r354 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ac3db2f02b80769f" class="i method">GetSecretAsync</a>(<span class="r359 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#0bf83f1b0a96da15" class="i property">Identifier</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r361 r">retrievedSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#2c544450da2d05d2" class="i property">ContentType</a>, <span class="r356 r">certificateMimeType</span>));
 
                    <a href="@0@System/A.html#2e8ad9e6007798e5" class="k">var</a> <span id="r362 rd" class="r362 r">retrievedCertificate</span> = <b>new</b> <a href="@0@System/A.html#d1fabe236fa55c47" class="t constructor">X509Certificate2</a>(
                        <a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#08c34f52087ba624" class="i method">FromBase64String</a>(<span class="r361 r">retrievedSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#87d7dde6ba13e8cb" class="i property">Value</a>),
                        <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>,
                        <a href="@0@mscorlib/A.html#db2c6ad625b2625d" class="t t">X509KeyStorageFlags</a>.<a href="@0@mscorlib/A.html#bbbbe6e8a4f7ebd5" class="i field">Exportable</a>);
 
                    <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r362 r">retrievedCertificate</span>.<a href="@0@System/A.html#f7670d048c7a5a70" class="i property">HasPrivateKey</a>);
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r362 r">retrievedCertificate</span>.<a href="@0@System/A.html#68a0d84a44ee8b68" class="i property">SubjectName</a>.<a href="@0@System/A.html#4884a05821706a1e" class="i property">Name</a>, <span class="r357 r">certificateSubjectName</span>));
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r362 r">retrievedCertificate</span>.<a href="@0@System/A.html#4e2977e10d4c9914" class="i property">IssuerName</a>.<a href="@0@System/A.html#4884a05821706a1e" class="i property">Name</a>, <span class="r357 r">certificateSubjectName</span>));
                }
                <b>finally</b>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#4e8132c83a7cdbc6" class="k">var</a> <span id="r363 rd" class="r363 r">certificateBundleDeleted</span> =
                        <span class="r354 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#1dfc62ae7bb6ff4e" class="i method">DeleteCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r355 r">certificateName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r363 r">certificateBundleDeleted</span>);
                }
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="93d040594e32dcac" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CertificateCreateLongSelfSignedTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r364 rd" class="r364 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r365 rd" class="r365 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <b>const string</b> <span id="r366 rd" class="r366 r">certificateName</span> = <span class="s">&quot;longSelfSignedCert01&quot;</span>;
                <b>const string</b> <span id="r367 rd" class="r367 r">certificateMimeType</span> = <span class="s">&quot;application/x-pkcs12&quot;</span>;
                <b>const string</b> <span id="r368 rd" class="r368 r">certificateSubjectName</span> = <span class="s">&quot;CN=*.microsoft.com&quot;</span>;
 
                <a href="/Microsoft.Azure.KeyVault/A.html#6ecb24e00693fa9c" class="k">var</a> <span id="r369 rd" class="r369 r">certificateOperation</span> = <span class="r365 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#7e338492cef7ebcd" class="i method">CreateCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r366 r">certificateName</span>, <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#144276523ef55663" class="t constructor">CertificatePolicy</a>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#811a1f39026ea2e4" class="i property">KeyProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#02d1d5b2b676cbac" class="t constructor">KeyProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#ec7e913f8475364b" class="i property">Exportable</a> = <b>true</b>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#3dc7487df43ecc32" class="i property">KeySize</a> = 2048,
                        <a href="/Microsoft.Azure.KeyVault/A.html#dfefc582b783a01e" class="i property">KeyType</a> = <span class="s">&quot;RSA&quot;</span>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#149ca5a1e3fe5376" class="i property">ReuseKey</a> = <b>false</b>
                    },
                    <a href="/Microsoft.Azure.KeyVault/A.html#3f4c4a8cd9f8a8e9" class="i property">SecretProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#36090c30e3255b35" class="t constructor">SecretProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#d5f6f440a646d1a5" class="i property">ContentType</a> = <span class="r367 r">certificateMimeType</span>
                    },
                    <a href="/Microsoft.Azure.KeyVault/A.html#bb6228bf6bba8530" class="i property">IssuerParameters</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#5686c516ca2f0fa8" class="t constructor">IssuerParameters</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#82f70aae3b67402d" class="i property">Name</a> = <a href="#81e2eaf4784fc3d1" class="t t">WellKnownIssuers</a>.<a href="#479a9997035919bc" class="i field">Self</a>
                    },
                    <a href="/Microsoft.Azure.KeyVault/A.html#46bc8f22a51144e7" class="i property">X509CertificateProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#a31ea414052920b0" class="t constructor">X509CertificateProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#897c1b0ee7c24358" class="i property">Subject</a> = <span class="r368 r">certificateSubjectName</span>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#f578aa9d8046f551" class="i property">SubjectAlternativeNames</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#5023bf004ea09116" class="t constructor">SubjectAlternativeNames</a>
                        {
                            <a href="/Microsoft.Azure.KeyVault/A.html#1b66aedc39eba393" class="i property">DnsNames</a> = <b>new</b>[]
                            {
                                <span class="s">&quot;onedrive.microsoft.com&quot;</span>,
                                <span class="s">&quot;xbox.microsoft.com&quot;</span>
                            }
                        },
                        <a href="/Microsoft.Azure.KeyVault/A.html#71b29a73aada41cc" class="i property">ValidityInMonths</a> = 24,
                    }
                }).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                <a href="/Microsoft.Azure.KeyVault/A.html#17bb4008337c63b2" class="k">var</a> <span id="r370 rd" class="r370 r">createdCertificateBundle</span> = <a href="#b92e879d42a15fff" class="i method">PollOnCertificateOperation</a>(<span class="r365 r">client</span>, <span class="r369 r">certificateOperation</span>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r370 r">createdCertificateBundle</span>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r370 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r370 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a9c30d2389e54bbf" class="i property">KeyIdentifier</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r370 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r370 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6eb8e7ba2c1c279d" class="i property">Policy</a>);
 
                <b>try</b>
                {
                    <span class="c">// Get the certificate as a secret</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#15b4a290938630b9" class="k">var</a> <span id="r371 rd" class="r371 r">retrievedSecret</span> = <span class="r365 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ac3db2f02b80769f" class="i method">GetSecretAsync</a>(<span class="r370 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#0bf83f1b0a96da15" class="i property">Identifier</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r371 r">retrievedSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#2c544450da2d05d2" class="i property">ContentType</a>, <span class="r367 r">certificateMimeType</span>));
 
                    <a href="@0@System/A.html#2e8ad9e6007798e5" class="k">var</a> <span id="r372 rd" class="r372 r">retrievedCertificate</span> = <b>new</b> <a href="@0@System/A.html#d1fabe236fa55c47" class="t constructor">X509Certificate2</a>(
                        <a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#08c34f52087ba624" class="i method">FromBase64String</a>(<span class="r371 r">retrievedSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#87d7dde6ba13e8cb" class="i property">Value</a>),
                        <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>,
                        <a href="@0@mscorlib/A.html#db2c6ad625b2625d" class="t t">X509KeyStorageFlags</a>.<a href="@0@mscorlib/A.html#bbbbe6e8a4f7ebd5" class="i field">Exportable</a>);
 
                    <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r372 r">retrievedCertificate</span>.<a href="@0@System/A.html#f7670d048c7a5a70" class="i property">HasPrivateKey</a>);
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r372 r">retrievedCertificate</span>.<a href="@0@System/A.html#68a0d84a44ee8b68" class="i property">SubjectName</a>.<a href="@0@System/A.html#4884a05821706a1e" class="i property">Name</a>, <span class="r368 r">certificateSubjectName</span>));
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r372 r">retrievedCertificate</span>.<a href="@0@System/A.html#4e2977e10d4c9914" class="i property">IssuerName</a>.<a href="@0@System/A.html#4884a05821706a1e" class="i property">Name</a>, <span class="r368 r">certificateSubjectName</span>));
 
                    <span class="c">// 24 months (ie 2 years) is 729 or 730 days.</span>
                    <span class="c">// for some reason the validity is 731 (+ some) days though</span>
                    <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r373 rd" class="r373 r">validity</span> = <span class="r372 r">retrievedCertificate</span>.<a href="@0@System/A.html#0b24cd2e7cd99b75" class="i property">NotAfter</a> - <span class="r372 r">retrievedCertificate</span>.<a href="@0@System/A.html#e3dec5ca024c7d14" class="i property">NotBefore</a>;
                    <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r373 r">validity</span> &gt;= <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#e7c4baa19fa38e8e" class="i method">FromDays</a>(729));
                    <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r373 r">validity</span> &lt;= <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#e7c4baa19fa38e8e" class="i method">FromDays</a>(732));
                }
                <b>finally</b>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#4e8132c83a7cdbc6" class="k">var</a> <span id="r374 rd" class="r374 r">certificateBundleDeleted</span> =
                        <span class="r365 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#1dfc62ae7bb6ff4e" class="i method">DeleteCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r366 r">certificateName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r374 r">certificateBundleDeleted</span>);
                }
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="4764f92db105a983" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CertificateCreateTestIssuerTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r375 rd" class="r375 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r376 rd" class="r376 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <b>const string</b> <span id="r377 rd" class="r377 r">issuer01Name</span> = <span class="s">&quot;issuer01&quot;</span>;
                <a href="/Microsoft.Azure.KeyVault/A.html#0c8a72de2d32111e" class="k">var</a> <span id="r378 rd" class="r378 r">issuer01</span> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#af0caa72f07a51f4" class="t constructor">IssuerBundle</a>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#cf950316bc25421c" class="i property">Provider</a> = <span class="s">&quot;Test&quot;</span>,
                };
 
                <a href="/Microsoft.Azure.KeyVault/A.html#0c8a72de2d32111e" class="k">var</a> <span id="r379 rd" class="r379 r">createdIssuer01</span> = <span class="r376 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#dc295afeacd451de" class="i method">SetCertificateIssuerAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r377 r">issuer01Name</span>, <span class="r378 r">issuer01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#cf950316bc25421c" class="i property">Provider</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r379 r">createdIssuer01</span>);
 
                <b>const string</b> <span id="r380 rd" class="r380 r">certificateName</span> = <span class="s">&quot;testIssuerCert01&quot;</span>;
                <b>const string</b> <span id="r381 rd" class="r381 r">certificateMimeType</span> = <span class="s">&quot;application/x-pkcs12&quot;</span>;
                <b>const string</b> <span id="r382 rd" class="r382 r">certificateSubjectName</span> = <span class="s">&quot;CN=*.microsoft.com&quot;</span>;
 
                <a href="/Microsoft.Azure.KeyVault/A.html#6ecb24e00693fa9c" class="k">var</a> <span id="r383 rd" class="r383 r">certificateOperation</span> = <span class="r376 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#7e338492cef7ebcd" class="i method">CreateCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r380 r">certificateName</span>, <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#144276523ef55663" class="t constructor">CertificatePolicy</a>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#811a1f39026ea2e4" class="i property">KeyProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#02d1d5b2b676cbac" class="t constructor">KeyProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#ec7e913f8475364b" class="i property">Exportable</a> = <b>true</b>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#3dc7487df43ecc32" class="i property">KeySize</a> = 2048,
                        <a href="/Microsoft.Azure.KeyVault/A.html#dfefc582b783a01e" class="i property">KeyType</a> = <span class="s">&quot;RSA&quot;</span>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#149ca5a1e3fe5376" class="i property">ReuseKey</a> = <b>false</b>
                    },
                    <a href="/Microsoft.Azure.KeyVault/A.html#3f4c4a8cd9f8a8e9" class="i property">SecretProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#36090c30e3255b35" class="t constructor">SecretProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#d5f6f440a646d1a5" class="i property">ContentType</a> = <span class="r381 r">certificateMimeType</span>
                    },
                    <a href="/Microsoft.Azure.KeyVault/A.html#bb6228bf6bba8530" class="i property">IssuerParameters</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#5686c516ca2f0fa8" class="t constructor">IssuerParameters</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#82f70aae3b67402d" class="i property">Name</a> = <span class="r379 r">createdIssuer01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e91647bf3cf3fcb7" class="i property">IssuerIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>
                    },
                    <a href="/Microsoft.Azure.KeyVault/A.html#46bc8f22a51144e7" class="i property">X509CertificateProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#a31ea414052920b0" class="t constructor">X509CertificateProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#897c1b0ee7c24358" class="i property">Subject</a> = <span class="r382 r">certificateSubjectName</span>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#f578aa9d8046f551" class="i property">SubjectAlternativeNames</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#5023bf004ea09116" class="t constructor">SubjectAlternativeNames</a>
                        {
                            <a href="/Microsoft.Azure.KeyVault/A.html#1b66aedc39eba393" class="i property">DnsNames</a> = <b>new</b>[]
                            {
                                <span class="s">&quot;onedrive.microsoft.com&quot;</span>,
                                <span class="s">&quot;xbox.microsoft.com&quot;</span>
                            }
                        },
                        <a href="/Microsoft.Azure.KeyVault/A.html#71b29a73aada41cc" class="i property">ValidityInMonths</a> = 24,
                    }
                }).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                <b>try</b>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#17bb4008337c63b2" class="k">var</a> <span id="r384 rd" class="r384 r">createdCertificateBundle</span> = <a href="#b92e879d42a15fff" class="i method">PollOnCertificateOperation</a>(<span class="r376 r">client</span>, <span class="r383 r">certificateOperation</span>);
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r384 r">createdCertificateBundle</span>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r384 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6eb8e7ba2c1c279d" class="i property">Policy</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r384 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r384 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a9c30d2389e54bbf" class="i property">KeyIdentifier</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r384 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>);
 
                    <span class="c">// Get the certificate as a secret</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#15b4a290938630b9" class="k">var</a> <span id="r385 rd" class="r385 r">retrievedSecret</span> = <span class="r376 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ac3db2f02b80769f" class="i method">GetSecretAsync</a>(<span class="r384 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#0bf83f1b0a96da15" class="i property">Identifier</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r385 r">retrievedSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#2c544450da2d05d2" class="i property">ContentType</a>, <span class="r381 r">certificateMimeType</span>));
 
                    <a href="@0@System/A.html#2e8ad9e6007798e5" class="k">var</a> <span id="r386 rd" class="r386 r">retrievedCertificate</span> = <b>new</b> <a href="@0@System/A.html#d1fabe236fa55c47" class="t constructor">X509Certificate2</a>(
                        <a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#08c34f52087ba624" class="i method">FromBase64String</a>(<span class="r385 r">retrievedSecret</span>.<a href="/Microsoft.Azure.KeyVault/A.html#87d7dde6ba13e8cb" class="i property">Value</a>),
                        <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>,
                        <a href="@0@mscorlib/A.html#db2c6ad625b2625d" class="t t">X509KeyStorageFlags</a>.<a href="@0@mscorlib/A.html#bbbbe6e8a4f7ebd5" class="i field">Exportable</a>);
 
                    <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r386 r">retrievedCertificate</span>.<a href="@0@System/A.html#f7670d048c7a5a70" class="i property">HasPrivateKey</a>);
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r386 r">retrievedCertificate</span>.<a href="@0@System/A.html#68a0d84a44ee8b68" class="i property">SubjectName</a>.<a href="@0@System/A.html#4884a05821706a1e" class="i property">Name</a>, <span class="r382 r">certificateSubjectName</span>));
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r386 r">retrievedCertificate</span>.<a href="@0@System/A.html#4e2977e10d4c9914" class="i property">IssuerName</a>.<a href="@0@System/A.html#4884a05821706a1e" class="i property">Name</a>, <span class="r382 r">certificateSubjectName</span>));
 
                    <span class="c">// 24 months (ie 2 years) is 729 or 730 days.</span>
                    <span class="c">// for some reason the validity is 731 (+ some) days though</span>
                    <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r387 rd" class="r387 r">validity</span> = <span class="r386 r">retrievedCertificate</span>.<a href="@0@System/A.html#0b24cd2e7cd99b75" class="i property">NotAfter</a> - <span class="r386 r">retrievedCertificate</span>.<a href="@0@System/A.html#e3dec5ca024c7d14" class="i property">NotBefore</a>;
                    <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r387 r">validity</span> &gt;= <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#e7c4baa19fa38e8e" class="i method">FromDays</a>(729));
                    <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r387 r">validity</span> &lt;= <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#e7c4baa19fa38e8e" class="i method">FromDays</a>(732));
                }
                <b>finally</b>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#4e8132c83a7cdbc6" class="k">var</a> <span id="r388 rd" class="r388 r">certificateBundleDeleted</span> =
                        <span class="r376 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#1dfc62ae7bb6ff4e" class="i method">DeleteCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r380 r">certificateName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r388 r">certificateBundleDeleted</span>);
                }
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="560303bdd381af69" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CertificateAsyncRequestCancellationTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r389 rd" class="r389 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r390 rd" class="r390 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <b>const string</b> <span id="r391 rd" class="r391 r">issuer01Name</span> = <span class="s">&quot;issuer02&quot;</span>;
                <a href="/Microsoft.Azure.KeyVault/A.html#0c8a72de2d32111e" class="k">var</a> <span id="r392 rd" class="r392 r">issuer01</span> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#af0caa72f07a51f4" class="t constructor">IssuerBundle</a>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#cf950316bc25421c" class="i property">Provider</a> = <span class="s">&quot;Test&quot;</span>,
                };
 
                <a href="/Microsoft.Azure.KeyVault/A.html#0c8a72de2d32111e" class="k">var</a> <span id="r393 rd" class="r393 r">createdIssuer01</span> = <span class="r390 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#dc295afeacd451de" class="i method">SetCertificateIssuerAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r391 r">issuer01Name</span>, <span class="r392 r">issuer01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#cf950316bc25421c" class="i property">Provider</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r393 r">createdIssuer01</span>);
 
                <b>const string</b> <span id="r394 rd" class="r394 r">certificateName</span> = <span class="s">&quot;cancellationRequestedCert01&quot;</span>;
                <b>const string</b> <span id="r395 rd" class="r395 r">certificateMimeType</span> = <span class="s">&quot;application/x-pkcs12&quot;</span>;
                <b>const string</b> <span id="r396 rd" class="r396 r">certificateSubjectName</span> = <span class="s">&quot;CN=*.microsoft.com&quot;</span>;
 
                <a href="/Microsoft.Azure.KeyVault/A.html#6ecb24e00693fa9c" class="k">var</a> <span id="r397 rd" class="r397 r">certificateOperation</span> = <span class="r390 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#7e338492cef7ebcd" class="i method">CreateCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r394 r">certificateName</span>, <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#144276523ef55663" class="t constructor">CertificatePolicy</a>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#811a1f39026ea2e4" class="i property">KeyProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#02d1d5b2b676cbac" class="t constructor">KeyProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#ec7e913f8475364b" class="i property">Exportable</a> = <b>true</b>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#3dc7487df43ecc32" class="i property">KeySize</a> = 2048,
                        <a href="/Microsoft.Azure.KeyVault/A.html#dfefc582b783a01e" class="i property">KeyType</a> = <span class="s">&quot;RSA&quot;</span>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#149ca5a1e3fe5376" class="i property">ReuseKey</a> = <b>false</b>
                    },
                    <a href="/Microsoft.Azure.KeyVault/A.html#3f4c4a8cd9f8a8e9" class="i property">SecretProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#36090c30e3255b35" class="t constructor">SecretProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#d5f6f440a646d1a5" class="i property">ContentType</a> = <span class="r395 r">certificateMimeType</span>
                    },
                    <a href="/Microsoft.Azure.KeyVault/A.html#bb6228bf6bba8530" class="i property">IssuerParameters</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#5686c516ca2f0fa8" class="t constructor">IssuerParameters</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#82f70aae3b67402d" class="i property">Name</a> = <span class="r393 r">createdIssuer01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e91647bf3cf3fcb7" class="i property">IssuerIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>
                    },
                    <a href="/Microsoft.Azure.KeyVault/A.html#46bc8f22a51144e7" class="i property">X509CertificateProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#a31ea414052920b0" class="t constructor">X509CertificateProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#897c1b0ee7c24358" class="i property">Subject</a> = <span class="r396 r">certificateSubjectName</span>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#f578aa9d8046f551" class="i property">SubjectAlternativeNames</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#5023bf004ea09116" class="t constructor">SubjectAlternativeNames</a>
                        {
                            <a href="/Microsoft.Azure.KeyVault/A.html#1b66aedc39eba393" class="i property">DnsNames</a> = <b>new</b>[]
                            {
                                <span class="s">&quot;onedrive.microsoft.com&quot;</span>,
                                <span class="s">&quot;xbox.microsoft.com&quot;</span>
                            }
                        },
                        <a href="/Microsoft.Azure.KeyVault/A.html#71b29a73aada41cc" class="i property">ValidityInMonths</a> = 24,
                    }
                }).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                <b>try</b>
                {
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r397 r">certificateOperation</span>);
                    <a href="/Microsoft.Azure.KeyVault/A.html#6ecb24e00693fa9c" class="k">var</a> <span id="r398 rd" class="r398 r">cancelledCertificateOperation</span> = <span class="r390 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#1be3af34963b946e" class="i method">UpdateCertificateOperationAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r394 r">certificateName</span>, <span class="r399 r">cancellationRequested</span>: <b>true</b>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r398 r">cancelledCertificateOperation</span>);
                    <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r398 r">cancelledCertificateOperation</span>.<a href="/Microsoft.Azure.KeyVault/A.html#2f62cdfcb6143ffe" class="i property">CancellationRequested</a>.<a href="@0@mscorlib/A.html#7bbe60e33e857298" class="i property">HasValue</a> &amp;&amp; <span class="r398 r">cancelledCertificateOperation</span>.<a href="/Microsoft.Azure.KeyVault/A.html#2f62cdfcb6143ffe" class="i property">CancellationRequested</a>.<a href="@0@mscorlib/A.html#7b38d1fa76071c95" class="i property">Value</a>);
 
                    <span class="r397 r">certificateOperation</span> = <span class="r390 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ad3b3be886f03920" class="i method">GetCertificateOperationAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r394 r">certificateName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r397 r">certificateOperation</span>);
                    <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r397 r">certificateOperation</span>.<a href="/Microsoft.Azure.KeyVault/A.html#2f62cdfcb6143ffe" class="i property">CancellationRequested</a>.<a href="@0@mscorlib/A.html#7bbe60e33e857298" class="i property">HasValue</a> &amp;&amp; <span class="r397 r">certificateOperation</span>.<a href="/Microsoft.Azure.KeyVault/A.html#2f62cdfcb6143ffe" class="i property">CancellationRequested</a>.<a href="@0@mscorlib/A.html#7b38d1fa76071c95" class="i property">Value</a>);
                }
                <b>finally</b>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#4e8132c83a7cdbc6" class="k">var</a> <span id="r400 rd" class="r400 r">certificateBundleDeleted</span> =
                        <span class="r390 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#1dfc62ae7bb6ff4e" class="i method">DeleteCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r394 r">certificateName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r400 r">certificateBundleDeleted</span>);
                }
            }
        }
<span class="c">/*
        public void CertificateAsyncDeleteOperationTest()
        {
            using (MockContext context = MockContext.Start(this.GetType()))
            {
                var client = GetKeyVaultClient();
 
                const string issuer01Name = &quot;issuer03&quot;;
                var issuer01 = new IssuerBundle
                {
                    Provider = &quot;Test&quot;,
                };
 
                var createdIssuer01 = client.SetCertificateIssuerAsync(_vaultAddress, issuer01Name, issuer01.Provider).GetAwaiter().GetResult();
                Assert.NotNull(createdIssuer01);
 
                const string certificateName = &quot;deletedRequestedCert01&quot;;
                const string certificateMimeType = &quot;application/x-pkcs12&quot;;
                const string certificateSubjectName = &quot;CN=*.microsoft.com&quot;;
 
                var certificateOperation = client.CreateCertificateAsync(_vaultAddress, certificateName, new CertificatePolicy
                {
                    KeyProperties = new KeyProperties
                    {
                        Exportable = true,
                        KeySize = 2048,
                        KeyType = &quot;RSA&quot;,
                        ReuseKey = false
                    },
                    SecretProperties = new SecretProperties
                    {
                        ContentType = certificateMimeType
                    },
                    IssuerParameters = new IssuerParameters
                    {
                        Name = createdIssuer01.IssuerIdentifier.Name
                    },
                    X509CertificateProperties = new X509CertificateProperties
                    {
                        Subject = certificateSubjectName,
                        SubjectAlternativeNames = new SubjectAlternativeNames
                        {
                            DnsNames = new[]
                            {
                                &quot;onedrive.microsoft.com&quot;,
                                &quot;xbox.microsoft.com&quot;
                            }
                        },
                        ValidityInMonths = 24,
                    }
                }).GetAwaiter().GetResult();
 
                try
                {
                    Assert.NotNull(certificateOperation);
                    var deletedCertificateOperation = client.DeleteCertificateOperationAsync(_vaultAddress, certificateName).GetAwaiter().GetResult();
 
                    Assert.NotNull(deletedCertificateOperation);
 
                    var exceptionThrown = false;
                    try
                    {
                        client.GetCertificateOperationAsync(_vaultAddress, certificateName).GetAwaiter().GetResult();
                    }
                    catch (KeyVaultErrorException e)
                    {
                        if (e.Response.StatusCode == HttpStatusCode.NotFound)
                        {
                            exceptionThrown = true;
                        }
                    }
 
                    Assert.True(exceptionThrown);
                }
                finally
                {
                    var certificateBundleDeleted =
                        client.DeleteCertificateAsync(_vaultAddress, certificateName).GetAwaiter().GetResult();
 
                    Assert.NotNull(certificateBundleDeleted);
 
                    //verify the certificate is deleted
                    try
                    {
                        client.GetCertificateAsync(_vaultAddress, certificateName).GetAwaiter().GetResult();
                    }
                    catch (KeyVaultErrorException ex)
                    {
                        if (ex.Response.StatusCode != HttpStatusCode.NotFound || ex.Body.Error.Message != ex.Message)
                            throw;
                    }
                }
            }
        }
*/</span>
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="95d6235671403464" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CertificateUpdateTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r401 rd" class="r401 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r402 rd" class="r402 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <b>const string</b> <span id="r403 rd" class="r403 r">certificateName</span> = <span class="s">&quot;updateCert01&quot;</span>;
                <b>const string</b> <span id="r404 rd" class="r404 r">certificateContent</span> =
                    <span class="s">&quot;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&quot;</span>;
                <b>const string</b> <span id="r405 rd" class="r405 r">certificatePassword</span> = <span class="s">&quot;123&quot;</span>;
                <b>const string</b> <span id="r406 rd" class="r406 r">certificateMimeType</span> = <span class="s">&quot;application/x-pkcs12&quot;</span>;
 
                <a href="@0@System/A.html#2e8ad9e6007798e5" class="k">var</a> <span id="r407 rd" class="r407 r">myCertificate</span> = <b>new</b> <a href="@0@System/A.html#d1fabe236fa55c47" class="t constructor">X509Certificate2</a>(<a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#08c34f52087ba624" class="i method">FromBase64String</a>(<span class="r404 r">certificateContent</span>), <span class="r405 r">certificatePassword</span>, <a href="@0@mscorlib/A.html#db2c6ad625b2625d" class="t t">X509KeyStorageFlags</a>.<a href="@0@mscorlib/A.html#bbbbe6e8a4f7ebd5" class="i field">Exportable</a>);
 
                <span class="c">// Import cert</span>
                <a href="/Microsoft.Azure.KeyVault/A.html#17bb4008337c63b2" class="k">var</a> <span id="r408 rd" class="r408 r">createdCertificateBundle</span> = <span class="r402 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#7b09294278d30e1a" class="i method">ImportCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r403 r">certificateName</span>, <span class="r404 r">certificateContent</span>, <span class="r405 r">certificatePassword</span>, <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#144276523ef55663" class="t constructor">CertificatePolicy</a>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#811a1f39026ea2e4" class="i property">KeyProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#02d1d5b2b676cbac" class="t constructor">KeyProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#ec7e913f8475364b" class="i property">Exportable</a> = <b>true</b>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#3dc7487df43ecc32" class="i property">KeySize</a> = 2048,
                        <a href="/Microsoft.Azure.KeyVault/A.html#dfefc582b783a01e" class="i property">KeyType</a> = <span class="s">&quot;RSA&quot;</span>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#149ca5a1e3fe5376" class="i property">ReuseKey</a> = <b>false</b>
                    },
                    <a href="/Microsoft.Azure.KeyVault/A.html#3f4c4a8cd9f8a8e9" class="i property">SecretProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#36090c30e3255b35" class="t constructor">SecretProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#d5f6f440a646d1a5" class="i property">ContentType</a> = <span class="r406 r">certificateMimeType</span>
                    }
                }).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r408 r">createdCertificateBundle</span>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r408 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r408 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a9c30d2389e54bbf" class="i property">KeyIdentifier</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r408 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r408 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6eb8e7ba2c1c279d" class="i property">Policy</a>);
                <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r407 r">myCertificate</span>.<a href="@0@System/A.html#6313394a0155d4d0" class="i property">Thumbprint</a>, <a href="#3c129aa0784fec61" class="i method">ToHexString</a>(<span class="r408 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>)));
 
                <b>try</b>
                {
                    <span class="c">// Get the certificate bundle</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#17bb4008337c63b2" class="k">var</a> <span id="r409 rd" class="r409 r">certificateBundleLatest</span> = <span class="r402 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#92dda13fee99dd3f" class="i method">GetCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r403 r">certificateName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r409 r">certificateBundleLatest</span>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r409 r">certificateBundleLatest</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r409 r">certificateBundleLatest</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a9c30d2389e54bbf" class="i property">KeyIdentifier</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r409 r">certificateBundleLatest</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r409 r">certificateBundleLatest</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6eb8e7ba2c1c279d" class="i property">Policy</a>);
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r407 r">myCertificate</span>.<a href="@0@System/A.html#6313394a0155d4d0" class="i property">Thumbprint</a>, <a href="#3c129aa0784fec61" class="i method">ToHexString</a>(<span class="r408 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>)));
 
                    <span class="c">// Update certificate bundle</span>
                    <a href="@0@mscorlib/A.html#20343df0c96b629b" class="k">var</a> <span id="r410 rd" class="r410 r">tags</span> = <span class="r409 r">certificateBundleLatest</span>.<a href="/Microsoft.Azure.KeyVault/A.html#b5260d2b049756a8" class="i property">Tags</a> ?? <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;();
                    <span class="r410 r">tags</span>.<a href="@0@mscorlib/A.html#380bc69e46a83183" class="i method">Add</a>(<span class="s">&quot;department&quot;</span>, <span class="s">&quot;KeyVaultTest&quot;</span>);
                    <span class="r409 r">certificateBundleLatest</span>.<a href="/Microsoft.Azure.KeyVault/A.html#b5260d2b049756a8" class="i property">Tags</a> = <span class="r410 r">tags</span>;
 
                    <a href="/Microsoft.Azure.KeyVault/A.html#17bb4008337c63b2" class="k">var</a> <span id="r411 rd" class="r411 r">certificateBundleUpdatedResponse</span> = <span class="r402 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3e41c24e05740bfb" class="i method">UpdateCertificateAsync</a>(
                        <span class="r409 r">certificateBundleLatest</span>.<a href="/Microsoft.Azure.KeyVault/A.html#b821bb85d4af2d32" class="i property">CertificateIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#0bf83f1b0a96da15" class="i property">Identifier</a>, <b>null</b>, <span class="r409 r">certificateBundleLatest</span>.<a href="/Microsoft.Azure.KeyVault/A.html#15df53aae60c5e58" class="i property">Attributes</a>, <span class="r409 r">certificateBundleLatest</span>.<a href="/Microsoft.Azure.KeyVault/A.html#b5260d2b049756a8" class="i property">Tags</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r411 r">certificateBundleUpdatedResponse</span>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r411 r">certificateBundleUpdatedResponse</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r411 r">certificateBundleUpdatedResponse</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a9c30d2389e54bbf" class="i property">KeyIdentifier</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r411 r">certificateBundleUpdatedResponse</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>);
                    <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r411 r">certificateBundleUpdatedResponse</span>.<a href="/Microsoft.Azure.KeyVault/A.html#b5260d2b049756a8" class="i property">Tags</a>.<a href="@0@mscorlib/A.html#6105ae1e7c0835eb" class="i method">ContainsKey</a>(<span class="s">&quot;department&quot;</span>));
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r411 r">certificateBundleUpdatedResponse</span>.<a href="/Microsoft.Azure.KeyVault/A.html#b5260d2b049756a8" class="i property">Tags</a><a href="@0@mscorlib/A.html#86884956b17e491a">[</a><span class="s">&quot;department&quot;</span>], <span class="s">&quot;KeyVaultTest&quot;</span>));
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r407 r">myCertificate</span>.<a href="@0@System/A.html#6313394a0155d4d0" class="i property">Thumbprint</a>, <a href="#3c129aa0784fec61" class="i method">ToHexString</a>(<span class="r411 r">certificateBundleUpdatedResponse</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>)));
 
                    <span class="c">// Get the update certificate bundle</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#17bb4008337c63b2" class="k">var</a> <span id="r412 rd" class="r412 r">certificateBundleUpdated</span> = <span class="r402 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#92dda13fee99dd3f" class="i method">GetCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r403 r">certificateName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r412 r">certificateBundleUpdated</span>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r412 r">certificateBundleUpdated</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r412 r">certificateBundleUpdated</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a9c30d2389e54bbf" class="i property">KeyIdentifier</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r412 r">certificateBundleUpdated</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r412 r">certificateBundleUpdated</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6eb8e7ba2c1c279d" class="i property">Policy</a>);
                    <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r412 r">certificateBundleUpdated</span>.<a href="/Microsoft.Azure.KeyVault/A.html#b5260d2b049756a8" class="i property">Tags</a>.<a href="@0@mscorlib/A.html#6105ae1e7c0835eb" class="i method">ContainsKey</a>(<span class="s">&quot;department&quot;</span>));
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r412 r">certificateBundleUpdated</span>.<a href="/Microsoft.Azure.KeyVault/A.html#b5260d2b049756a8" class="i property">Tags</a><a href="@0@mscorlib/A.html#86884956b17e491a">[</a><span class="s">&quot;department&quot;</span>], <span class="s">&quot;KeyVaultTest&quot;</span>));
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r407 r">myCertificate</span>.<a href="@0@System/A.html#6313394a0155d4d0" class="i property">Thumbprint</a>, <a href="#3c129aa0784fec61" class="i method">ToHexString</a>(<span class="r412 r">certificateBundleUpdated</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>)));
                }
                <b>finally</b>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#4e8132c83a7cdbc6" class="k">var</a> <span id="r413 rd" class="r413 r">certificateBundleDeleted</span> =
                        <span class="r402 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#1dfc62ae7bb6ff4e" class="i method">DeleteCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r403 r">certificateName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r413 r">certificateBundleDeleted</span>);
                }
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="f6fbbe537d399adb" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CertificatePolicyTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r414 rd" class="r414 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r415 rd" class="r415 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <b>const string</b> <span id="r416 rd" class="r416 r">certificateName</span> = <span class="s">&quot;updateCert01&quot;</span>;
                <b>const string</b> <span id="r417 rd" class="r417 r">certificateContent</span> =
                    <span class="s">&quot;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&quot;</span>;
                <b>const string</b> <span id="r418 rd" class="r418 r">certificatePassword</span> = <span class="s">&quot;123&quot;</span>;
                <b>const string</b> <span id="r419 rd" class="r419 r">certificateMimeType</span> = <span class="s">&quot;application/x-pkcs12&quot;</span>;
 
                <a href="@0@System/A.html#2e8ad9e6007798e5" class="k">var</a> <span id="r420 rd" class="r420 r">myCertificate</span> = <b>new</b> <a href="@0@System/A.html#d1fabe236fa55c47" class="t constructor">X509Certificate2</a>(<a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#08c34f52087ba624" class="i method">FromBase64String</a>(<span class="r417 r">certificateContent</span>), <span class="r418 r">certificatePassword</span>, <a href="@0@mscorlib/A.html#db2c6ad625b2625d" class="t t">X509KeyStorageFlags</a>.<a href="@0@mscorlib/A.html#bbbbe6e8a4f7ebd5" class="i field">Exportable</a>);
 
                <span class="c">// Import cert</span>
                <a href="/Microsoft.Azure.KeyVault/A.html#17bb4008337c63b2" class="k">var</a> <span id="r421 rd" class="r421 r">createdCertificateBundle</span> = <span class="r415 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#7b09294278d30e1a" class="i method">ImportCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r416 r">certificateName</span>, <span class="r417 r">certificateContent</span>, <span class="r418 r">certificatePassword</span>, <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#144276523ef55663" class="t constructor">CertificatePolicy</a>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#811a1f39026ea2e4" class="i property">KeyProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#02d1d5b2b676cbac" class="t constructor">KeyProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#ec7e913f8475364b" class="i property">Exportable</a> = <b>true</b>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#3dc7487df43ecc32" class="i property">KeySize</a> = 2048,
                        <a href="/Microsoft.Azure.KeyVault/A.html#dfefc582b783a01e" class="i property">KeyType</a> = <span class="s">&quot;RSA&quot;</span>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#149ca5a1e3fe5376" class="i property">ReuseKey</a> = <b>false</b>
                    },
                    <a href="/Microsoft.Azure.KeyVault/A.html#3f4c4a8cd9f8a8e9" class="i property">SecretProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#36090c30e3255b35" class="t constructor">SecretProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#d5f6f440a646d1a5" class="i property">ContentType</a> = <span class="r419 r">certificateMimeType</span>
                    }
                }).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r421 r">createdCertificateBundle</span>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r421 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r421 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a9c30d2389e54bbf" class="i property">KeyIdentifier</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r421 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r421 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6eb8e7ba2c1c279d" class="i property">Policy</a>);
                <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r420 r">myCertificate</span>.<a href="@0@System/A.html#6313394a0155d4d0" class="i property">Thumbprint</a>, <a href="#3c129aa0784fec61" class="i method">ToHexString</a>(<span class="r421 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>)));
 
                <b>try</b>
                {
                    <span class="c">// Get the certificate policy</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#aa452aefc727ff55" class="k">var</a> <span id="r422 rd" class="r422 r">certificateBundlePolicy</span> = <span class="r415 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ffed31a36efec6c3" class="i method">GetCertificatePolicyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r416 r">certificateName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r422 r">certificateBundlePolicy</span>);
 
                    <span class="c">// Update certificate policy</span>
                    <span class="r422 r">certificateBundlePolicy</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bb6228bf6bba8530" class="i property">IssuerParameters</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#5686c516ca2f0fa8" class="t constructor">IssuerParameters</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#82f70aae3b67402d" class="i property">Name</a> = <a href="#81e2eaf4784fc3d1" class="t t">WellKnownIssuers</a>.<a href="#479a9997035919bc" class="i field">Self</a>
                    };
 
                    <a href="/Microsoft.Azure.KeyVault/A.html#aa452aefc727ff55" class="k">var</a> <span id="r423 rd" class="r423 r">certificateBundlePolicyUpdatedResponse</span> = <span class="r415 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#be7d934ff5174bce" class="i method">UpdateCertificatePolicyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r416 r">certificateName</span>, <span class="r422 r">certificateBundlePolicy</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r423 r">certificateBundlePolicyUpdatedResponse</span>);
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r423 r">certificateBundlePolicyUpdatedResponse</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bb6228bf6bba8530" class="i property">IssuerParameters</a>.<a href="/Microsoft.Azure.KeyVault/A.html#82f70aae3b67402d" class="i property">Name</a>, <a href="#81e2eaf4784fc3d1" class="t t">WellKnownIssuers</a>.<a href="#479a9997035919bc" class="i field">Self</a>));
 
                    <span class="c">// Get the update certificate policy</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#aa452aefc727ff55" class="k">var</a> <span id="r424 rd" class="r424 r">certificateBundlePolicyUpdated</span> = <span class="r415 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ffed31a36efec6c3" class="i method">GetCertificatePolicyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r416 r">certificateName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r424 r">certificateBundlePolicyUpdated</span>);
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r424 r">certificateBundlePolicyUpdated</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bb6228bf6bba8530" class="i property">IssuerParameters</a>.<a href="/Microsoft.Azure.KeyVault/A.html#82f70aae3b67402d" class="i property">Name</a>, <a href="#81e2eaf4784fc3d1" class="t t">WellKnownIssuers</a>.<a href="#479a9997035919bc" class="i field">Self</a>));
                }
                <b>finally</b>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#4e8132c83a7cdbc6" class="k">var</a> <span id="r425 rd" class="r425 r">certificateBundleDeleted</span> =
                        <span class="r415 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#1dfc62ae7bb6ff4e" class="i method">DeleteCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r416 r">certificateName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r425 r">certificateBundleDeleted</span>);
                }
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="c2e9825797218d00" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CertificateContactsTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r426 rd" class="r426 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r427 rd" class="r427 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <span class="c">// Create contacts</span>
                <a href="/Microsoft.Azure.KeyVault/A.html#fd3e93554416ea22" class="k">var</a> <span id="r428 rd" class="r428 r">contacts</span> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#0b87ed0bb8f3cdae" class="t constructor">Contacts</a>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a> = <b>new</b> <a href="@0@mscorlib/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<a href="/Microsoft.Azure.KeyVault/A.html#b3bc0855641f9a2d" class="t t">Contact</a>&gt;
                    {
                        <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#b389c293bb262352" class="t constructor">Contact</a>
                        {
                            <a href="/Microsoft.Azure.KeyVault/A.html#62c46897a1cf00cf" class="i property">EmailAddress</a> = <span class="s">&quot;admin@contoso.com&quot;</span>,
                            <a href="/Microsoft.Azure.KeyVault/A.html#95573d5288b63132" class="i property">Name</a> = <span class="s">&quot;John Doe&quot;</span>,
                            <a href="/Microsoft.Azure.KeyVault/A.html#d5bae8d8d13248a1" class="i property">Phone</a> = <span class="s">&quot;1111111111&quot;</span>
                        },
                    }
                };
 
                <a href="/Microsoft.Azure.KeyVault/A.html#fd3e93554416ea22" class="k">var</a> <span id="r429 rd" class="r429 r">createdContacts</span> = <span class="r427 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#35d12d44c0122b57" class="i method">SetCertificateContactsAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r428 r">contacts</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r429 r">createdContacts</span>);
 
                <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r429 r">createdContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>.<a href="@0@System.Core/A.html#41ef9e39e54d0d0b" class="i method">Count</a>() == 1);
                <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r429 r">createdContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>, <span id="r430 rd" class="r430 r">s</span> =&gt; 0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r430 r">s</span>.<a href="/Microsoft.Azure.KeyVault/A.html#62c46897a1cf00cf" class="i property">EmailAddress</a>, <span class="s">&quot;admin@contoso.com&quot;</span>));
                <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r429 r">createdContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>, <span id="r431 rd" class="r431 r">s</span> =&gt; 0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r431 r">s</span>.<a href="/Microsoft.Azure.KeyVault/A.html#95573d5288b63132" class="i property">Name</a>, <span class="s">&quot;John Doe&quot;</span>));
                <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r429 r">createdContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>, <span id="r432 rd" class="r432 r">s</span> =&gt; 0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r432 r">s</span>.<a href="/Microsoft.Azure.KeyVault/A.html#d5bae8d8d13248a1" class="i property">Phone</a>, <span class="s">&quot;1111111111&quot;</span>));
 
                <b>try</b>
                {
                    <span class="c">// Get contacts</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#fd3e93554416ea22" class="k">var</a> <span id="r433 rd" class="r433 r">retrievedContacts</span> = <span class="r427 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#4c8ba84fb9c852eb" class="i method">GetCertificateContactsAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r433 r">retrievedContacts</span>);
 
                    <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r433 r">retrievedContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>.<a href="@0@System.Core/A.html#41ef9e39e54d0d0b" class="i method">Count</a>() == 1);
                    <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r433 r">retrievedContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>, <span id="r434 rd" class="r434 r">s</span> =&gt; 0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r434 r">s</span>.<a href="/Microsoft.Azure.KeyVault/A.html#62c46897a1cf00cf" class="i property">EmailAddress</a>, <span class="s">&quot;admin@contoso.com&quot;</span>));
                    <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r433 r">retrievedContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>, <span id="r435 rd" class="r435 r">s</span> =&gt; 0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r435 r">s</span>.<a href="/Microsoft.Azure.KeyVault/A.html#95573d5288b63132" class="i property">Name</a>, <span class="s">&quot;John Doe&quot;</span>));
                    <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r433 r">retrievedContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>, <span id="r436 rd" class="r436 r">s</span> =&gt; 0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r436 r">s</span>.<a href="/Microsoft.Azure.KeyVault/A.html#d5bae8d8d13248a1" class="i property">Phone</a>, <span class="s">&quot;1111111111&quot;</span>));
 
                    <span class="c">// Update contacts</span>
                    <span class="r433 r">retrievedContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a> = <b>new</b> <a href="@0@mscorlib/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<a href="/Microsoft.Azure.KeyVault/A.html#b3bc0855641f9a2d" class="t t">Contact</a>&gt;
                    {
                        <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#b389c293bb262352" class="t constructor">Contact</a>
                        {
                            <a href="/Microsoft.Azure.KeyVault/A.html#62c46897a1cf00cf" class="i property">EmailAddress</a> = <span class="s">&quot;admin@contoso.com&quot;</span>,
                            <a href="/Microsoft.Azure.KeyVault/A.html#95573d5288b63132" class="i property">Name</a> = <span class="s">&quot;John Doe&quot;</span>,
                            <a href="/Microsoft.Azure.KeyVault/A.html#d5bae8d8d13248a1" class="i property">Phone</a> = <span class="s">&quot;1111111111&quot;</span>
                        },
                        <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#b389c293bb262352" class="t constructor">Contact</a>
                        {
                            <a href="/Microsoft.Azure.KeyVault/A.html#62c46897a1cf00cf" class="i property">EmailAddress</a> = <span class="s">&quot;admin@contoso2.com&quot;</span>,
                            <a href="/Microsoft.Azure.KeyVault/A.html#95573d5288b63132" class="i property">Name</a> = <span class="s">&quot;Johnathan Doeman&quot;</span>,
                            <a href="/Microsoft.Azure.KeyVault/A.html#d5bae8d8d13248a1" class="i property">Phone</a> = <span class="s">&quot;2222222222&quot;</span>
                        }
                    };
 
 
                    <a href="/Microsoft.Azure.KeyVault/A.html#fd3e93554416ea22" class="k">var</a> <span id="r437 rd" class="r437 r">updatedContacts</span> = <span class="r427 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#35d12d44c0122b57" class="i method">SetCertificateContactsAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r433 r">retrievedContacts</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r437 r">updatedContacts</span>);
 
                    <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r437 r">updatedContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>.<a href="@0@System.Core/A.html#41ef9e39e54d0d0b" class="i method">Count</a>() == 2);
                    <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r437 r">updatedContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>, <span id="r438 rd" class="r438 r">s</span> =&gt; 0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r438 r">s</span>.<a href="/Microsoft.Azure.KeyVault/A.html#62c46897a1cf00cf" class="i property">EmailAddress</a>, <span class="s">&quot;admin@contoso.com&quot;</span>));
                    <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r437 r">updatedContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>, <span id="r439 rd" class="r439 r">s</span> =&gt; 0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r439 r">s</span>.<a href="/Microsoft.Azure.KeyVault/A.html#95573d5288b63132" class="i property">Name</a>, <span class="s">&quot;John Doe&quot;</span>));
                    <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r437 r">updatedContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>, <span id="r440 rd" class="r440 r">s</span> =&gt; 0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r440 r">s</span>.<a href="/Microsoft.Azure.KeyVault/A.html#d5bae8d8d13248a1" class="i property">Phone</a>, <span class="s">&quot;1111111111&quot;</span>));
 
                    <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r437 r">updatedContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>, <span id="r441 rd" class="r441 r">s</span> =&gt; 0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r441 r">s</span>.<a href="/Microsoft.Azure.KeyVault/A.html#62c46897a1cf00cf" class="i property">EmailAddress</a>, <span class="s">&quot;admin@contoso2.com&quot;</span>));
                    <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r437 r">updatedContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>, <span id="r442 rd" class="r442 r">s</span> =&gt; 0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r442 r">s</span>.<a href="/Microsoft.Azure.KeyVault/A.html#95573d5288b63132" class="i property">Name</a>, <span class="s">&quot;Johnathan Doeman&quot;</span>));
                    <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r437 r">updatedContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>, <span id="r443 rd" class="r443 r">s</span> =&gt; 0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r443 r">s</span>.<a href="/Microsoft.Azure.KeyVault/A.html#d5bae8d8d13248a1" class="i property">Phone</a>, <span class="s">&quot;2222222222&quot;</span>));
 
                    <span class="c">// Retrieve updated</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#fd3e93554416ea22" class="k">var</a> <span id="r444 rd" class="r444 r">retrievedUpdatedContacts</span> = <span class="r427 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#4c8ba84fb9c852eb" class="i method">GetCertificateContactsAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r444 r">retrievedUpdatedContacts</span>);
 
                    <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r444 r">retrievedUpdatedContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>.<a href="@0@System.Core/A.html#41ef9e39e54d0d0b" class="i method">Count</a>() == 2);
                    <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r444 r">retrievedUpdatedContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>, <span id="r445 rd" class="r445 r">s</span> =&gt; 0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r445 r">s</span>.<a href="/Microsoft.Azure.KeyVault/A.html#62c46897a1cf00cf" class="i property">EmailAddress</a>, <span class="s">&quot;admin@contoso.com&quot;</span>));
                    <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r444 r">retrievedUpdatedContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>, <span id="r446 rd" class="r446 r">s</span> =&gt; 0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r446 r">s</span>.<a href="/Microsoft.Azure.KeyVault/A.html#95573d5288b63132" class="i property">Name</a>, <span class="s">&quot;John Doe&quot;</span>));
                    <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r444 r">retrievedUpdatedContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>, <span id="r447 rd" class="r447 r">s</span> =&gt; 0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r447 r">s</span>.<a href="/Microsoft.Azure.KeyVault/A.html#d5bae8d8d13248a1" class="i property">Phone</a>, <span class="s">&quot;1111111111&quot;</span>));
 
                    <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r444 r">retrievedUpdatedContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>, <span id="r448 rd" class="r448 r">s</span> =&gt; 0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r448 r">s</span>.<a href="/Microsoft.Azure.KeyVault/A.html#62c46897a1cf00cf" class="i property">EmailAddress</a>, <span class="s">&quot;admin@contoso2.com&quot;</span>));
                    <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r444 r">retrievedUpdatedContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>, <span id="r449 rd" class="r449 r">s</span> =&gt; 0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r449 r">s</span>.<a href="/Microsoft.Azure.KeyVault/A.html#95573d5288b63132" class="i property">Name</a>, <span class="s">&quot;Johnathan Doeman&quot;</span>));
                    <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r444 r">retrievedUpdatedContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>, <span id="r450 rd" class="r450 r">s</span> =&gt; 0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r450 r">s</span>.<a href="/Microsoft.Azure.KeyVault/A.html#d5bae8d8d13248a1" class="i property">Phone</a>, <span class="s">&quot;2222222222&quot;</span>));
                }
                <b>finally</b>
                {
                    <span class="c">// Delete contacts</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#fd3e93554416ea22" class="k">var</a> <span id="r451 rd" class="r451 r">deletedContacts</span> = <span class="r427 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9c091b97d9124042" class="i method">DeleteCertificateContactsAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r451 r">deletedContacts</span>);
 
                    <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r451 r">deletedContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>.<a href="@0@System.Core/A.html#41ef9e39e54d0d0b" class="i method">Count</a>() == 2);
                    <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r451 r">deletedContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>, <span id="r452 rd" class="r452 r">s</span> =&gt; 0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r452 r">s</span>.<a href="/Microsoft.Azure.KeyVault/A.html#62c46897a1cf00cf" class="i property">EmailAddress</a>, <span class="s">&quot;admin@contoso.com&quot;</span>));
                    <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r451 r">deletedContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>, <span id="r453 rd" class="r453 r">s</span> =&gt; 0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r453 r">s</span>.<a href="/Microsoft.Azure.KeyVault/A.html#95573d5288b63132" class="i property">Name</a>, <span class="s">&quot;John Doe&quot;</span>));
                    <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r451 r">deletedContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>, <span id="r454 rd" class="r454 r">s</span> =&gt; 0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r454 r">s</span>.<a href="/Microsoft.Azure.KeyVault/A.html#d5bae8d8d13248a1" class="i property">Phone</a>, <span class="s">&quot;1111111111&quot;</span>));
 
                    <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r451 r">deletedContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>, <span id="r455 rd" class="r455 r">s</span> =&gt; 0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r455 r">s</span>.<a href="/Microsoft.Azure.KeyVault/A.html#62c46897a1cf00cf" class="i property">EmailAddress</a>, <span class="s">&quot;admin@contoso2.com&quot;</span>));
                    <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r451 r">deletedContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>, <span id="r456 rd" class="r456 r">s</span> =&gt; 0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r456 r">s</span>.<a href="/Microsoft.Azure.KeyVault/A.html#95573d5288b63132" class="i property">Name</a>, <span class="s">&quot;Johnathan Doeman&quot;</span>));
                    <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r451 r">deletedContacts</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3f26f3b7db397c38" class="i property">ContactList</a>, <span id="r457 rd" class="r457 r">s</span> =&gt; 0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r457 r">s</span>.<a href="/Microsoft.Azure.KeyVault/A.html#d5bae8d8d13248a1" class="i property">Phone</a>, <span class="s">&quot;2222222222&quot;</span>));
                }
            }
 
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="0def6f10c2884fb6" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CertificateIssuersTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r458 rd" class="r458 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r459 rd" class="r459 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <b>const string</b> <span id="r460 rd" class="r460 r">issuer01Name</span> = <span class="s">&quot;issuer01&quot;</span>;
                <a href="/Microsoft.Azure.KeyVault/A.html#0c8a72de2d32111e" class="k">var</a> <span id="r461 rd" class="r461 r">issuer01</span> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#af0caa72f07a51f4" class="t constructor">IssuerBundle</a>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#cf950316bc25421c" class="i property">Provider</a> = <span class="s">&quot;Test&quot;</span>,
                    <a href="/Microsoft.Azure.KeyVault/A.html#baaf829f10a5c7ae" class="i property">Credentials</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#2c42e1593f37d114" class="t constructor">IssuerCredentials</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#d720746b8182d740" class="i property">AccountId</a> = <span class="s">&quot;keyvaultuser&quot;</span>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#c9af2ec5f6c73812" class="i property">Password</a> = <span class="s">&quot;password&quot;</span>
                    },
                    <a href="/Microsoft.Azure.KeyVault/A.html#4de6fd10c92b2855" class="i property">OrganizationDetails</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#fd65468d0ad20e44" class="t constructor">OrganizationDetails</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#6a3122ea97e17788" class="i property">AdminDetails</a> = <b>new</b> <a href="@0@mscorlib/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<a href="/Microsoft.Azure.KeyVault/A.html#1101145e47941984" class="t t">AdministratorDetails</a>&gt;
                        {
                            <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#2bb295dc45a4109c" class="t constructor">AdministratorDetails</a>
                            {
                                <a href="/Microsoft.Azure.KeyVault/A.html#b32b76dbe11bbb6d" class="i property">FirstName</a> = <span class="s">&quot;John&quot;</span>,
                                <a href="/Microsoft.Azure.KeyVault/A.html#ef6d46e71b77f055" class="i property">LastName</a> = <span class="s">&quot;Doe&quot;</span>,
                                <a href="/Microsoft.Azure.KeyVault/A.html#eebe31b7dfc019ea" class="i property">EmailAddress</a> = <span class="s">&quot;admin@microsoft.com&quot;</span>,
                                <a href="/Microsoft.Azure.KeyVault/A.html#5594b94a6ca5a2e1" class="i property">Phone</a> = <span class="s">&quot;4255555555&quot;</span>
                            },
                        },
                    }
                };
 
                <a href="/Microsoft.Azure.KeyVault/A.html#0c8a72de2d32111e" class="k">var</a> <span id="r462 rd" class="r462 r">createdIssuer01</span> = <span class="r459 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#dc295afeacd451de" class="i method">SetCertificateIssuerAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r460 r">issuer01Name</span>,
                    <span class="r461 r">issuer01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#cf950316bc25421c" class="i property">Provider</a>, <span class="r461 r">issuer01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#baaf829f10a5c7ae" class="i property">Credentials</a>, <span class="r461 r">issuer01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#4de6fd10c92b2855" class="i property">OrganizationDetails</a>, <span class="r461 r">issuer01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#01ad0536254a3213" class="i property">Attributes</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r462 r">createdIssuer01</span>);
 
                <a href="/Microsoft.Azure.KeyVault/A.html#0c8a72de2d32111e" class="k">var</a> <span id="r463 rd" class="r463 r">retrievedIssuer01</span> = <span class="r459 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#4218c2655596414e" class="i method">GetCertificateIssuerAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r460 r">issuer01Name</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r463 r">retrievedIssuer01</span>);
 
                <b>const string</b> <span id="r464 rd" class="r464 r">issuer02Name</span> = <span class="s">&quot;issuer02&quot;</span>;
                <a href="/Microsoft.Azure.KeyVault/A.html#0c8a72de2d32111e" class="k">var</a> <span id="r465 rd" class="r465 r">issuer02</span> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#af0caa72f07a51f4" class="t constructor">IssuerBundle</a>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#cf950316bc25421c" class="i property">Provider</a> = <span class="s">&quot;Test&quot;</span>,
                    <a href="/Microsoft.Azure.KeyVault/A.html#baaf829f10a5c7ae" class="i property">Credentials</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#2c42e1593f37d114" class="t constructor">IssuerCredentials</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#d720746b8182d740" class="i property">AccountId</a> = <span class="s">&quot;xboxuser&quot;</span>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#c9af2ec5f6c73812" class="i property">Password</a> = <span class="s">&quot;security&quot;</span>
                    },
                    <a href="/Microsoft.Azure.KeyVault/A.html#4de6fd10c92b2855" class="i property">OrganizationDetails</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#fd65468d0ad20e44" class="t constructor">OrganizationDetails</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#6a3122ea97e17788" class="i property">AdminDetails</a> = <b>new</b> <a href="@0@mscorlib/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<a href="/Microsoft.Azure.KeyVault/A.html#1101145e47941984" class="t t">AdministratorDetails</a>&gt;
                        {
                            <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#2bb295dc45a4109c" class="t constructor">AdministratorDetails</a>
                            {
                                <a href="/Microsoft.Azure.KeyVault/A.html#b32b76dbe11bbb6d" class="i property">FirstName</a> = <span class="s">&quot;Jane&quot;</span>,
                                <a href="/Microsoft.Azure.KeyVault/A.html#ef6d46e71b77f055" class="i property">LastName</a> = <span class="s">&quot;Doe&quot;</span>,
                                <a href="/Microsoft.Azure.KeyVault/A.html#eebe31b7dfc019ea" class="i property">EmailAddress</a> = <span class="s">&quot;admin@microsoft.com&quot;</span>,
                                <a href="/Microsoft.Azure.KeyVault/A.html#5594b94a6ca5a2e1" class="i property">Phone</a> = <span class="s">&quot;4256666666&quot;</span>
                            },
                        },
                    }
                };
 
                <a href="/Microsoft.Azure.KeyVault/A.html#0c8a72de2d32111e" class="k">var</a> <span id="r466 rd" class="r466 r">createdIssuer02</span> = <span class="r459 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#dc295afeacd451de" class="i method">SetCertificateIssuerAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r464 r">issuer02Name</span>,
                    <span class="r461 r">issuer01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#cf950316bc25421c" class="i property">Provider</a>, <span class="r461 r">issuer01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#baaf829f10a5c7ae" class="i property">Credentials</a>, <span class="r461 r">issuer01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#4de6fd10c92b2855" class="i property">OrganizationDetails</a>, <span class="r461 r">issuer01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#01ad0536254a3213" class="i property">Attributes</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r466 r">createdIssuer02</span>);
 
                <a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#8125b18f5d7ee303" class="k">var</a> <span id="r467 rd" class="r467 r">issuers</span> = <span class="r459 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#04ebd963901574d1" class="i method">GetCertificateIssuersAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r467 r">issuers</span>);
                <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r467 r">issuers</span>.<a href="@0@System.Core/A.html#41ef9e39e54d0d0b" class="i method">Count</a>() &gt; 1);
                <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r467 r">issuers</span>, <span id="r468 rd" class="r468 r">i</span> =&gt; <span class="r468 r">i</span>.<a href="/Microsoft.Azure.KeyVault/A.html#de7417643e349bce" class="i property">Id</a>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<span class="r460 r">issuer01Name</span>));
                <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r467 r">issuers</span>, <span id="r469 rd" class="r469 r">i</span> =&gt; <span class="r469 r">i</span>.<a href="/Microsoft.Azure.KeyVault/A.html#de7417643e349bce" class="i property">Id</a>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<span class="r464 r">issuer02Name</span>));
 
                <a href="/Microsoft.Azure.KeyVault/A.html#0c8a72de2d32111e" class="k">var</a> <span id="r470 rd" class="r470 r">deletedIssuer01</span> = <span class="r459 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#57cd6adc60d2c6a8" class="i method">DeleteCertificateIssuerAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r460 r">issuer01Name</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r470 r">deletedIssuer01</span>);
 
                <a href="/Microsoft.Azure.KeyVault/A.html#0c8a72de2d32111e" class="k">var</a> <span id="r471 rd" class="r471 r">deletedIssuer02</span> = <span class="r459 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#57cd6adc60d2c6a8" class="i method">DeleteCertificateIssuerAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r464 r">issuer02Name</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r471 r">deletedIssuer02</span>);
 
                <a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#8125b18f5d7ee303" class="k">var</a> <span id="r472 rd" class="r472 r">emptyIssuers</span> = <span class="r459 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#04ebd963901574d1" class="i method">GetCertificateIssuersAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r472 r">emptyIssuers</span>);
                <span class="t t">Assert</span>.<span class="i method">DoesNotContain</span>(<span class="r472 r">emptyIssuers</span>, <span id="r473 rd" class="r473 r">i</span> =&gt; <span class="r473 r">i</span>.<a href="/Microsoft.Azure.KeyVault/A.html#de7417643e349bce" class="i property">Id</a>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<span class="r460 r">issuer01Name</span>));
                <span class="t t">Assert</span>.<span class="i method">DoesNotContain</span>(<span class="r472 r">emptyIssuers</span>, <span id="r474 rd" class="r474 r">i</span> =&gt; <span class="r474 r">i</span>.<a href="/Microsoft.Azure.KeyVault/A.html#de7417643e349bce" class="i property">Id</a>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<span class="r464 r">issuer02Name</span>));
            }
        }
 
        [<span class="t constructor">Fact</span> (<span class="i property">Skip</span> = <span class="s">&quot;Asserts failing, need to be fixed&quot;</span>)]
        <b>public void</b> <a id="337918366b177625" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CertificateCreateManualEnrolledTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r475 rd" class="r475 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r476 rd" class="r476 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <b>const string</b> <span id="r477 rd" class="r477 r">certificateName</span> = <span class="s">&quot;manualCert01&quot;</span>;
 
                <b>const string</b> <span id="r478 rd" class="r478 r">certificateMimeType</span> = <span class="s">&quot;application/x-pkcs12&quot;</span>;
                <b>const string</b> <span id="r479 rd" class="r479 r">certificateSubjectName</span> = <span class="s">&quot;CN=*.microsoft.com&quot;</span>;
 
                <a href="/Microsoft.Azure.KeyVault/A.html#6ecb24e00693fa9c" class="k">var</a> <span id="r480 rd" class="r480 r">certificateOperation</span> = <span class="r476 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#7e338492cef7ebcd" class="i method">CreateCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r477 r">certificateName</span>, <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#144276523ef55663" class="t constructor">CertificatePolicy</a>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#811a1f39026ea2e4" class="i property">KeyProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#02d1d5b2b676cbac" class="t constructor">KeyProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#ec7e913f8475364b" class="i property">Exportable</a> = <b>true</b>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#3dc7487df43ecc32" class="i property">KeySize</a> = 2048,
                        <a href="/Microsoft.Azure.KeyVault/A.html#dfefc582b783a01e" class="i property">KeyType</a> = <span class="s">&quot;RSA&quot;</span>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#149ca5a1e3fe5376" class="i property">ReuseKey</a> = <b>false</b>
                    },
                    <a href="/Microsoft.Azure.KeyVault/A.html#3f4c4a8cd9f8a8e9" class="i property">SecretProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#36090c30e3255b35" class="t constructor">SecretProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#d5f6f440a646d1a5" class="i property">ContentType</a> = <span class="r478 r">certificateMimeType</span>
                    },
                    <a href="/Microsoft.Azure.KeyVault/A.html#bb6228bf6bba8530" class="i property">IssuerParameters</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#5686c516ca2f0fa8" class="t constructor">IssuerParameters</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#82f70aae3b67402d" class="i property">Name</a> = <a href="#81e2eaf4784fc3d1" class="t t">WellKnownIssuers</a>.<a href="#e444ee33e8b622c7" class="i field">Unknown</a>
                    },
                    <a href="/Microsoft.Azure.KeyVault/A.html#46bc8f22a51144e7" class="i property">X509CertificateProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#a31ea414052920b0" class="t constructor">X509CertificateProperties</a>
                    {
                        <a href="/Microsoft.Azure.KeyVault/A.html#897c1b0ee7c24358" class="i property">Subject</a> = <span class="r479 r">certificateSubjectName</span>,
                        <a href="/Microsoft.Azure.KeyVault/A.html#f578aa9d8046f551" class="i property">SubjectAlternativeNames</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#5023bf004ea09116" class="t constructor">SubjectAlternativeNames</a>
                        {
                            <a href="/Microsoft.Azure.KeyVault/A.html#1b66aedc39eba393" class="i property">DnsNames</a> = <b>new</b>[]
                            {
                                <span class="s">&quot;onedrive.microsoft.com&quot;</span>,
                                <span class="s">&quot;xbox.microsoft.com&quot;</span>
                            }
                        }
                    }
                }).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r480 r">certificateOperation</span>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r480 r">certificateOperation</span>.<a href="/Microsoft.Azure.KeyVault/A.html#fb33812e7428f2a8" class="i property">Csr</a>);
 
                <b>try</b>
                {
                    <span class="c">// CSR can also be obtained directly</span>
                    <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r481 rd" class="r481 r">pendingVersionCsr</span> = <span class="r476 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#2e3091f996da84cf" class="i method">GetPendingCertificateSigningRequestAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r477 r">certificateName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r481 r">pendingVersionCsr</span>, <a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#f9e5bd7b69c5f334" class="i method">ToBase64String</a>(<span class="r480 r">certificateOperation</span>.<a href="/Microsoft.Azure.KeyVault/A.html#fb33812e7428f2a8" class="i property">Csr</a>)));
                }
                <b>finally</b>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#4e8132c83a7cdbc6" class="k">var</a> <span id="r482 rd" class="r482 r">certificateBundleDeleted</span> =
                        <span class="r476 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#1dfc62ae7bb6ff4e" class="i method">DeleteCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r477 r">certificateName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r482 r">certificateBundleDeleted</span>);
                }
            }
        }
 
<span class="k preprocess">#</span><span class="k preprocess">endregion</span>
 
<span class="k preprocess">#</span><span class="k preprocess">region</span> Deleted Certificate Operations
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="12871316b2e6a7c5" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetDeletedCertificateTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r483 rd" class="r483 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r484 rd" class="r484 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <span class="c">// settings may not be loaded until the client is fully initialized</span>
                <b>if</b> (!<a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>) <b>return</b>;
 
                <span class="c">// set up a cert</span>
                <b>const string</b> <span id="r485 rd" class="r485 r">certificateName</span> = <span class="s">&quot;getDeletedCert&quot;</span>;
                <b>const string</b> <span id="r486 rd" class="r486 r">certificateContent</span> =
                    <span class="s">&quot;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&quot;</span>;
                <b>const string</b> <span id="r487 rd" class="r487 r">certificatePassword</span> = <span class="s">&quot;123&quot;</span>;
                <b>const string</b> <span id="r488 rd" class="r488 r">certificateMimeType</span> = <span class="s">&quot;application/x-pkcs12&quot;</span>;
                <b>bool</b> <span id="r489 rd" class="r489 r">recoveryLevelIsConsistent</span> = <b>true</b>;
 
                <a href="@0@System/A.html#2e8ad9e6007798e5" class="k">var</a> <span id="r490 rd" class="r490 r">myCertificate</span> = <b>new</b> <a href="@0@System/A.html#d1fabe236fa55c47" class="t constructor">X509Certificate2</a>(<a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#08c34f52087ba624" class="i method">FromBase64String</a>(<span class="r486 r">certificateContent</span>), <span class="r487 r">certificatePassword</span>, <a href="@0@mscorlib/A.html#db2c6ad625b2625d" class="t t">X509KeyStorageFlags</a>.<a href="@0@mscorlib/A.html#bbbbe6e8a4f7ebd5" class="i field">Exportable</a>);
 
                <span class="c">// Import cert</span>
                <a href="/Microsoft.Azure.KeyVault/A.html#bc01aff1aa7e721f" class="k">var</a> <span id="r491 rd" class="r491 r">keyProps</span> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#02d1d5b2b676cbac" class="t constructor">KeyProperties</a>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#ec7e913f8475364b" class="i property">Exportable</a> = <b>true</b>,
                    <a href="/Microsoft.Azure.KeyVault/A.html#3dc7487df43ecc32" class="i property">KeySize</a> = 2048,
                    <a href="/Microsoft.Azure.KeyVault/A.html#dfefc582b783a01e" class="i property">KeyType</a> = <span class="s">&quot;RSA&quot;</span>,
                    <a href="/Microsoft.Azure.KeyVault/A.html#149ca5a1e3fe5376" class="i property">ReuseKey</a> = <b>false</b>
                };
                <a href="/Microsoft.Azure.KeyVault/A.html#c0fc96ff6e1c0113" class="k">var</a> <span id="r492 rd" class="r492 r">secretProps</span> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#36090c30e3255b35" class="t constructor">SecretProperties</a>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#d5f6f440a646d1a5" class="i property">ContentType</a> = <span class="r488 r">certificateMimeType</span>
                };
                <a href="/Microsoft.Azure.KeyVault/A.html#aa452aefc727ff55" class="k">var</a> <span id="r493 rd" class="r493 r">policy</span> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#144276523ef55663" class="t constructor">CertificatePolicy</a>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#811a1f39026ea2e4" class="i property">KeyProperties</a> = <span class="r491 r">keyProps</span>,
                    <a href="/Microsoft.Azure.KeyVault/A.html#3f4c4a8cd9f8a8e9" class="i property">SecretProperties</a> = <span class="r492 r">secretProps</span>
                };
                <a href="/Microsoft.Azure.KeyVault/A.html#17bb4008337c63b2" class="k">var</a> <span id="r494 rd" class="r494 r">createdCertificateBundle</span> = <span class="r484 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#7b09294278d30e1a" class="i method">ImportCertificateAsync</a>(
                    <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>,
                    <span class="r485 r">certificateName</span>,
                    <span class="r486 r">certificateContent</span>,
                    <span class="r487 r">certificatePassword</span>,
                    <span class="r493 r">policy</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                <span class="r489 r">recoveryLevelIsConsistent</span> &amp;= <a href="#7a03c8e71087b771" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r494 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#15df53aae60c5e58" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
 
                <span class="c">// add another version</span>
                <a href="/Microsoft.Azure.KeyVault/A.html#e7975c95ca0c7014" class="k">var</a> <span id="r495 rd" class="r495 r">attributes</span> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#b559357112c6b60a" class="t constructor">CertificateAttributes</a>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#4711a60053ea2d77" class="i property">Enabled</a> = <b>true</b>,
                };
                <a href="/Microsoft.Azure.KeyVault/A.html#17bb4008337c63b2" class="k">var</a> <span id="r496 rd" class="r496 r">updatedCertificateBundle</span> = <span class="r484 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3e41c24e05740bfb" class="i method">UpdateCertificateAsync</a>(
                    <span class="r494 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#b821bb85d4af2d32" class="i property">CertificateIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#51f5cfbfe9a8bfe3" class="i property">BaseIdentifier</a>,
                    <span class="r497 r">certificatePolicy</span>: <span class="r493 r">policy</span>,
                    <span class="r498 r">certificateAttributes</span>: <span class="r495 r">attributes</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                <span class="r489 r">recoveryLevelIsConsistent</span> &amp;= <a href="#7a03c8e71087b771" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r496 r">updatedCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#15df53aae60c5e58" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
 
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r494 r">createdCertificateBundle</span>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r494 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r494 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a9c30d2389e54bbf" class="i property">KeyIdentifier</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r494 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r494 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6eb8e7ba2c1c279d" class="i property">Policy</a>);
                <span class="t t">Assert</span>.<span class="i method">True</span>(0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#0601c3adfb08dab2" class="i method">CompareOrdinal</a>(<span class="r490 r">myCertificate</span>.<a href="@0@System/A.html#6313394a0155d4d0" class="i property">Thumbprint</a>, <a href="#3c129aa0784fec61" class="i method">ToHexString</a>(<span class="r494 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a8d28e498c728e83" class="i property">X509Thumbprint</a>)));
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r494 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                <a href="@0@System/A.html#2e8ad9e6007798e5" class="k">var</a> <span id="r499 rd" class="r499 r">publicCer</span> = <b>new</b> <a href="@0@System/A.html#c9d1c203351eec15" class="t constructor">X509Certificate2</a>(<span class="r494 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#77be60dfddfb8ef2" class="i property">Cer</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r499 r">publicCer</span>);
                <span class="t t">Assert</span>.<span class="i method">False</span>(<span class="r499 r">publicCer</span>.<a href="@0@System/A.html#f7670d048c7a5a70" class="i property">HasPrivateKey</a>);
 
                <span class="c">// soft-delete the cert</span>
                <a href="/Microsoft.Azure.KeyVault/A.html#4e8132c83a7cdbc6" class="k">var</a> <span id="r500 rd" class="r500 r">deletedCert</span> = <span class="r484 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#1dfc62ae7bb6ff4e" class="i method">DeleteCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r485 r">certificateName</span>).<a href="@0@mscorlib/A.html#07ef75a8fa372c94" class="i method">ConfigureAwait</a>(<b>false</b>).<a href="@0@mscorlib/A.html#e356d5440a3c14ad" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#6979b218613f292b" class="i method">GetResult</a>();
                <span class="r489 r">recoveryLevelIsConsistent</span> &amp;= <a href="#7a03c8e71087b771" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r500 r">deletedCert</span>.<a href="/Microsoft.Azure.KeyVault/A.html#15df53aae60c5e58" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
                <a href="#741e26b08beafc2c" class="k">this</a>.<a href="#671cc04f42f659fd" class="i field">fixture</a>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#f964bb6685025291" class="i method">WaitOnDeletedCertificate</a>(<span class="r484 r">client</span>, <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r485 r">certificateName</span>);
 
                <b>try</b>
                {
                    <span class="c">// Get the deleted certificate using its recovery identifier</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#4e8132c83a7cdbc6" class="k">var</a> <span id="r501 rd" class="r501 r">getDeletedCertificate</span> = <span class="r484 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e212eb7e68ae531a" class="i method">GetDeletedCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r485 r">certificateName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <a href="#796564b83dd343d6" class="i method">VerifyIdsAreEqual</a>(<span class="r494 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ff199482f8d31189" class="i property">Id</a>, <span class="r501 r">getDeletedCertificate</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ff199482f8d31189" class="i property">Id</a>);
                    <a href="#796564b83dd343d6" class="i method">VerifyIdsAreEqual</a>(<span class="r494 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a9c30d2389e54bbf" class="i property">KeyIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#0bf83f1b0a96da15" class="i property">Identifier</a>, <span class="r501 r">getDeletedCertificate</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a9c30d2389e54bbf" class="i property">KeyIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#0bf83f1b0a96da15" class="i property">Identifier</a>);
                    <a href="#796564b83dd343d6" class="i method">VerifyIdsAreEqual</a>(<span class="r494 r">createdCertificateBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#0bf83f1b0a96da15" class="i property">Identifier</a>, <span class="r501 r">getDeletedCertificate</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5579b583d213235b" class="i property">SecretIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#0bf83f1b0a96da15" class="i property">Identifier</a>);
 
                    <a href="#796564b83dd343d6" class="i method">VerifyIdsAreEqual</a>(<span class="r500 r">deletedCert</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6c781261d8b70b4c" class="i property">RecoveryId</a>, <span class="r501 r">getDeletedCertificate</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6c781261d8b70b4c" class="i property">RecoveryId</a>);
                    <span class="r489 r">recoveryLevelIsConsistent</span> &amp;= <a href="#7a03c8e71087b771" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r501 r">getDeletedCertificate</span>.<a href="/Microsoft.Azure.KeyVault/A.html#15df53aae60c5e58" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
                }
                <b>finally</b>
                {
                    <a href="#741e26b08beafc2c" class="k">this</a>.<a href="#671cc04f42f659fd" class="i field">fixture</a>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#f964bb6685025291" class="i method">WaitOnDeletedCertificate</a>(<span class="r484 r">client</span>, <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r485 r">certificateName</span>);
 
                    <span class="c">// Purge the cert</span>
                    <span class="r484 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#09606257523fe2db" class="i method">PurgeDeletedCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r485 r">certificateName</span>).<a href="@0@mscorlib/A.html#9865ec4fb8abca74" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#fac5be2731353aa8" class="i method">GetResult</a>();
                }
 
                <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r489 r">recoveryLevelIsConsistent</span>, <span class="s">&quot;The &#39;recoveryLevel&#39; attribute did not consistently return the expected value.&quot;</span>);
            }
        }
<span class="c">/*
        public void CertificateCreateDeleteRecoverPurgeTest()
        {
            using (MockContext context = MockContext.Start(this.GetType()))
            {
                var client = GetKeyVaultClient();
 
                // settings may not be loaded until the client is fully initialized
                if (!_softDeleteEnabled) return;
 
                // set up a cert
                string name = &quot;CertCreateDeleteRecoverPurgeTest&quot;;
                const string certificateContent =
                    &quot;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&quot;;
                const string certificatePassword = &quot;123&quot;;
                const string certificateMimeType = &quot;application/x-pkcs12&quot;;
                bool recoveryLevelIsConsistent = true;
 
                var myCertificate = new X509Certificate2(Convert.FromBase64String(certificateContent), certificatePassword, X509KeyStorageFlags.Exportable);
 
                // Import cert
                var createdCertificateBundle = client.ImportCertificateAsync(
                    _vaultAddress,
                    name,
                    certificateContent,
                    certificatePassword,
                    new CertificatePolicy
                    {
                        KeyProperties = new KeyProperties
                        {
                            Exportable = true,
                            KeySize = 2048,
                            KeyType = &quot;RSA&quot;,
                            ReuseKey = false
                        },
                        SecretProperties = new SecretProperties
                        {
                            ContentType = certificateMimeType
                        }
                    }).GetAwaiter().GetResult();
 
                Assert.NotNull(createdCertificateBundle);
                Assert.NotNull(createdCertificateBundle.SecretIdentifier);
                Assert.NotNull(createdCertificateBundle.KeyIdentifier);
                Assert.NotNull(createdCertificateBundle.X509Thumbprint);
                Assert.NotNull(createdCertificateBundle.Policy);
                Assert.True(0 == string.CompareOrdinal(myCertificate.Thumbprint, ToHexString(createdCertificateBundle.X509Thumbprint)));
                Assert.NotNull(createdCertificateBundle.Cer);
                var publicCer = new X509Certificate2(createdCertificateBundle.Cer);
                Assert.NotNull(publicCer);
                Assert.False(publicCer.HasPrivateKey);
                recoveryLevelIsConsistent &amp;= VerifyDeletionRecoveryLevel(createdCertificateBundle.Attributes, _softDeleteEnabled);
 
                try
                {
                    // Delete the certificate
                    var deletedCert = client.DeleteCertificateAsync(_vaultAddress, name).GetAwaiter().GetResult();
                    recoveryLevelIsConsistent &amp;= VerifyDeletionRecoveryLevel(deletedCert.Attributes, _softDeleteEnabled);
 
                    //verify the certificate is deleted
                    try
                    {
                        client.GetCertificateAsync(_vaultAddress, name).GetAwaiter().GetResult();
                    }
                    catch (KeyVaultErrorException ex)
                    {
                        if (ex.Response.StatusCode != HttpStatusCode.NotFound || ex.Body.Error.Message != ex.Message)
                            throw;
                    }
 
                    this.fixture.WaitOnDeletedCertificate(client, _vaultAddress, name);
 
                    // Recover the certificate
                    var recoveredCert = client.RecoverDeletedCertificateAsync(deletedCert.RecoveryId).GetAwaiter().GetResult();
                    Assert.Equal(name, recoveredCert.SecretIdentifier.Name);
                    recoveryLevelIsConsistent &amp;= VerifyDeletionRecoveryLevel(recoveredCert.Attributes, _softDeleteEnabled);
 
                    this.fixture.WaitOnCertificate(client, _vaultAddress, name);
 
                    // Read the recovered certificate using full identifier
                    var recoveredReadCert = client.GetCertificateAsync(recoveredCert.Id).GetAwaiter().GetResult();
                    VerifyIdsAreEqual(recoveredReadCert.Id, recoveredCert.Id);
                    recoveryLevelIsConsistent &amp;= VerifyDeletionRecoveryLevel(recoveredReadCert.Attributes, _softDeleteEnabled);
 
                    // Read the recovered cert with the version independent identifier
                    recoveredReadCert = client.GetCertificateAsync(_vaultAddress, name).GetAwaiter().GetResult();
                    VerifyIdsAreEqual(recoveredReadCert.Id, recoveredCert.Id);
                    recoveryLevelIsConsistent &amp;= VerifyDeletionRecoveryLevel(recoveredReadCert.Attributes, _softDeleteEnabled);
                }
                finally
                {
                    this.fixture.WaitOnCertificate(client, _vaultAddress, name);
 
                    // Delete the certificate
                    var deletedCert = client.DeleteCertificateAsync(_vaultAddress, name).GetAwaiter().GetResult();
 
                    //verify the certificate is deleted
                    try
                    {
                        client.GetCertificateAsync(_vaultAddress, name).GetAwaiter().GetResult();
                    }
                    catch (KeyVaultErrorException ex)
                    {
                        if (ex.Response.StatusCode != HttpStatusCode.NotFound || ex.Body.Error.Message != ex.Message)
                            throw;
                    }
 
                    this.fixture.WaitOnDeletedCertificate(client, _vaultAddress, name);
 
                    // Purge the certificate
                    client.PurgeDeletedCertificateAsync(_vaultAddress, name).GetAwaiter().GetResult();
 
                    //verify the certificate is purged
                    try
                    {
                        deletedCert = client.GetDeletedCertificateAsync(_vaultAddress, name).GetAwaiter().GetResult();
                    }
                    catch (KeyVaultErrorException ex)
                    {
                        if (ex.Response.StatusCode != HttpStatusCode.NotFound || ex.Body.Error.Message != ex.Message)
                            throw;
                    }
                }
 
                Assert.True(recoveryLevelIsConsistent, &quot;The &#39;recoveryLevel&#39; attribute did not consistently return the expected value&quot;);
            }
        }
*/</span>
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="38e7a48aafd6c93e" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ListDeletedCertificatesTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a> <span id="r502 rd" class="r502 r">context</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r503 rd" class="r503 r">client</span> = <a href="#ac96e2d26f84638b" class="i method">GetKeyVaultClient</a>();
 
                <span class="c">// settings may not be loaded until the client is fully initialized</span>
                <b>if</b> (!<a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>) <b>return</b>;
 
                <b>int</b> <span id="r504 rd" class="r504 r">numCerts</span> = 3;
                <b>int</b> <span id="r505 rd" class="r505 r">maxResults</span> = 1;
 
                <a href="@0@System.Core/A.html#2d265edc718b158b" class="k">var</a> <span id="r506 rd" class="r506 r">addedObjects</span> = <b>new</b> <a href="@0@System.Core/A.html#eca9ea30fa3b2c28" class="t constructor">HashSet</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;();
                <a href="@0@System.Core/A.html#2d265edc718b158b" class="k">var</a> <span id="r507 rd" class="r507 r">removedObjects</span> = <b>new</b> <a href="@0@System.Core/A.html#eca9ea30fa3b2c28" class="t constructor">HashSet</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;();
 
                <b>const string</b> <span id="r508 rd" class="r508 r">namePrefix</span> = <span class="s">&quot;listdeletedcerttest&quot;</span>;
                <b>const string</b> <span id="r509 rd" class="r509 r">certificateContent</span> =
                    <span class="s">&quot;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&quot;</span>;
                <b>const string</b> <span id="r510 rd" class="r510 r">certificatePassword</span> = <span class="s">&quot;123&quot;</span>;
                <b>const string</b> <span id="r511 rd" class="r511 r">certificateMimeType</span> = <span class="s">&quot;application/x-pkcs12&quot;</span>;
                <b>bool</b> <span id="r512 rd" class="r512 r">recoveryLevelIsConsistent</span> = <b>true</b>;
 
                <b>try</b>
                {
                    <span class="c">//Create and delete the certs</span>
                    <b>for</b> (<b>int</b> <span id="r513 rd" class="r513 r">i</span> = 0; <span class="r513 r">i</span> &lt; <span class="r504 r">numCerts</span>; <span class="r513 r">i</span>++)
                    {
                        <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r514 rd" class="r514 r">name</span> = <span class="r508 r">namePrefix</span> + <span class="r513 r">i</span>.<a href="@0@mscorlib/A.html#8d6f2d8bc0589463" class="i method">ToString</a>();
 
                        <a href="@0@System/A.html#2e8ad9e6007798e5" class="k">var</a> <span id="r515 rd" class="r515 r">myCertificate</span> = <b>new</b> <a href="@0@System/A.html#d1fabe236fa55c47" class="t constructor">X509Certificate2</a>(<a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#08c34f52087ba624" class="i method">FromBase64String</a>(<span class="r509 r">certificateContent</span>), <span class="r510 r">certificatePassword</span>, <a href="@0@mscorlib/A.html#db2c6ad625b2625d" class="t t">X509KeyStorageFlags</a>.<a href="@0@mscorlib/A.html#bbbbe6e8a4f7ebd5" class="i field">Exportable</a>);
 
                        <span class="c">// Import cert</span>
                        <a href="/Microsoft.Azure.KeyVault/A.html#17bb4008337c63b2" class="k">var</a> <span id="r516 rd" class="r516 r">addedCert</span> = <span class="r503 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#7b09294278d30e1a" class="i method">ImportCertificateAsync</a>(
                            <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>,
                            <span class="r514 r">name</span>,
                            <span class="r509 r">certificateContent</span>,
                            <span class="r510 r">certificatePassword</span>,
                            <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#144276523ef55663" class="t constructor">CertificatePolicy</a>
                            {
                                <a href="/Microsoft.Azure.KeyVault/A.html#811a1f39026ea2e4" class="i property">KeyProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#02d1d5b2b676cbac" class="t constructor">KeyProperties</a>
                                {
                                    <a href="/Microsoft.Azure.KeyVault/A.html#ec7e913f8475364b" class="i property">Exportable</a> = <b>true</b>,
                                    <a href="/Microsoft.Azure.KeyVault/A.html#3dc7487df43ecc32" class="i property">KeySize</a> = 2048,
                                    <a href="/Microsoft.Azure.KeyVault/A.html#dfefc582b783a01e" class="i property">KeyType</a> = <span class="s">&quot;RSA&quot;</span>,
                                    <a href="/Microsoft.Azure.KeyVault/A.html#149ca5a1e3fe5376" class="i property">ReuseKey</a> = <b>false</b>
                                },
                                <a href="/Microsoft.Azure.KeyVault/A.html#3f4c4a8cd9f8a8e9" class="i property">SecretProperties</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#36090c30e3255b35" class="t constructor">SecretProperties</a>
                                {
                                    <a href="/Microsoft.Azure.KeyVault/A.html#d5f6f440a646d1a5" class="i property">ContentType</a> = <span class="r511 r">certificateMimeType</span>
                                }
                            }).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                        <span class="r506 r">addedObjects</span>.<a href="@0@System.Core/A.html#43a2b651926474a7" class="i method">Add</a>(<span class="r516 r">addedCert</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ff199482f8d31189" class="i property">Id</a>.<a href="@0@mscorlib/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, <span class="r516 r">addedCert</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ff199482f8d31189" class="i property">Id</a>.<a href="@0@mscorlib/A.html#750750cd39244ac4" class="i method">LastIndexOf</a>(<span class="s">&quot;/&quot;</span>)));
 
                        <span class="r503 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#1dfc62ae7bb6ff4e" class="i method">DeleteCertificateAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r514 r">name</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                        <a href="#741e26b08beafc2c" class="k">this</a>.<a href="#671cc04f42f659fd" class="i field">fixture</a>.<a href="/Microsoft.Azure.KeyVault.TestFramework/A.html#f964bb6685025291" class="i method">WaitOnDeletedCertificate</a>(<span class="r503 r">client</span>, <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r514 r">name</span>);
                    }
 
                    <span class="c">//List the deleted certificates</span>
                    <a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#8125b18f5d7ee303" class="k">var</a> <span id="r517 rd" class="r517 r">listResponse</span> = <span class="r503 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#49a95c25de236024" class="i method">GetDeletedCertificatesAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r505 r">maxResults</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r517 r">listResponse</span>);
                    <b>foreach</b> (<a href="/Microsoft.Azure.KeyVault/A.html#1a96c4ebff992140" class="t t">DeletedCertificateItem</a> <span id="r518 rd" class="r518 r">m</span> <b>in</b> <span class="r517 r">listResponse</span>)
                    {
                        <b>if</b> (<span class="r506 r">addedObjects</span>.<a href="@0@System.Core/A.html#06d905a0ac76e4f5" class="i method">Contains</a>(<span class="r518 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#aca3e91a81675b28" class="i property">Id</a>))
                        {
                            <span class="t t">Assert</span>.<span class="i method">StartsWith</span>(<span class="r508 r">namePrefix</span>, <span class="r518 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a9233083ccc4723f" class="i property">Identifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>);
                            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r518 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#86f7a03f02d8af74" class="i property">RecoveryId</a>);
                            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r518 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#41072405355a61c0" class="i property">ScheduledPurgeDate</a>);
                            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r518 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3589407b403f4803" class="i property">DeletedDate</a>);
                            <span class="t t">Assert</span>.<span class="i method">StartsWith</span>(<span class="r508 r">namePrefix</span>, <span class="r518 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#8f5e1de217461326" class="i property">RecoveryIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>);
                            <span class="r512 r">recoveryLevelIsConsistent</span> &amp;= <a href="#7a03c8e71087b771" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r518 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e53c33a405a97966" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
 
                            <span class="r506 r">addedObjects</span>.<a href="@0@System.Core/A.html#4e77ae9204a00be6" class="i method">Remove</a>(<span class="r518 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#aca3e91a81675b28" class="i property">Id</a>);
                            <span class="r507 r">removedObjects</span>.<a href="@0@System.Core/A.html#43a2b651926474a7" class="i method">Add</a>(<span class="r518 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#86f7a03f02d8af74" class="i property">RecoveryId</a>);
                        }
                    }
 
                    <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r519 rd" class="r519 r">nextLink</span> = <span class="r517 r">listResponse</span>.<a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#e77457a6e30fcfe3" class="i property">NextPageLink</a>;
                    <b>while</b> (!<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#23a8597f842071f4" class="i method">IsNullOrEmpty</a>(<span class="r519 r">nextLink</span>))
                    {
                        <a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#8125b18f5d7ee303" class="k">var</a> <span id="r520 rd" class="r520 r">listNextResponse</span> = <span class="r503 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6326d1b14f31dd50" class="i method">GetDeletedCertificatesNextAsync</a>(<span class="r519 r">nextLink</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                        <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r520 r">listNextResponse</span>);
                        <b>foreach</b> (<a href="/Microsoft.Azure.KeyVault/A.html#1a96c4ebff992140" class="t t">DeletedCertificateItem</a> <span id="r521 rd" class="r521 r">m</span> <b>in</b> <span class="r520 r">listNextResponse</span>)
                        {
                            <b>if</b> (<span class="r506 r">addedObjects</span>.<a href="@0@System.Core/A.html#06d905a0ac76e4f5" class="i method">Contains</a>(<span class="r521 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#aca3e91a81675b28" class="i property">Id</a>))
                            {
                                <span class="t t">Assert</span>.<span class="i method">StartsWith</span>(<span class="r508 r">namePrefix</span>, <span class="r521 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a9233083ccc4723f" class="i property">Identifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>);
                                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r521 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#86f7a03f02d8af74" class="i property">RecoveryId</a>);
                                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r521 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#41072405355a61c0" class="i property">ScheduledPurgeDate</a>);
                                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r521 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#3589407b403f4803" class="i property">DeletedDate</a>);
                                <span class="t t">Assert</span>.<span class="i method">StartsWith</span>(<span class="r508 r">namePrefix</span>, <span class="r521 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#8f5e1de217461326" class="i property">RecoveryIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>);
                                <span class="r512 r">recoveryLevelIsConsistent</span> &amp;= <a href="#7a03c8e71087b771" class="i method">VerifyDeletionRecoveryLevel</a>(<span class="r521 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e53c33a405a97966" class="i property">Attributes</a>, <a href="#7bb8c5653994a330" class="i field">_softDeleteEnabled</a>);
 
                                <span class="r506 r">addedObjects</span>.<a href="@0@System.Core/A.html#4e77ae9204a00be6" class="i method">Remove</a>(<span class="r521 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#aca3e91a81675b28" class="i property">Id</a>);
                                <span class="r507 r">removedObjects</span>.<a href="@0@System.Core/A.html#43a2b651926474a7" class="i method">Add</a>(<span class="r521 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#86f7a03f02d8af74" class="i property">RecoveryId</a>);
                            }
                        }
                        <span class="r519 r">nextLink</span> = <span class="r520 r">listNextResponse</span>.<a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#e77457a6e30fcfe3" class="i property">NextPageLink</a>;
                    }
 
                    <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r506 r">addedObjects</span>.<a href="@0@System.Core/A.html#905bec8c22644c82" class="i property">Count</a> == 0);
                }
                <b>finally</b>
                {
                    <b>foreach</b> (<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r522 rd" class="r522 r">recoveryId</span> <b>in</b> <span class="r507 r">removedObjects</span>)
                    {
                        <span class="r503 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#201a2a92fd4233f0" class="i method">PurgeDeletedCertificateAsync</a>(<span class="r522 r">recoveryId</span>).<a href="@0@mscorlib/A.html#1bfe9e19e44f4cfa" class="i method">Wait</a>();
                    }
                }
 
                <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r512 r">recoveryLevelIsConsistent</span>, <span class="s">&quot;the &#39;recoveryLevel&#39; attribute did not consistently return the expected value.&quot;</span>);
            }
        }
 
<span class="k preprocess">#</span><span class="k preprocess">endregion</span>
 
<span class="k preprocess">#</span><span class="k preprocess">region</span> Storage Operations
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="03bcadb5a2883604" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageCreateTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r523 rd" class="r523 r">client</span> = <a href="#7d583590c1ece8fd" class="i method">GetKeyVaultUserClient</a>();
 
                <b>const string</b> <span id="r524 rd" class="r524 r">storageAccountName</span> = <span class="s">&quot;createStrg01&quot;</span>;
                <b>try</b>
                {
                    <a href="#384f33a19b8b5cdf" class="i method">CreateKvStorageAccount</a>(<span class="r523 r">client</span>, <span class="r524 r">storageAccountName</span>);
                }
                <b>finally</b>
                {
                    <span class="c">// Delete</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#a4522c6eb8c4cff5" class="k">var</a> <span id="r525 rd" class="r525 r">storageBundleDeleted</span> =
                        <span class="r523 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#c8f4d598149e09f2" class="i method">DeleteStorageAccountAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r524 r">storageAccountName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r525 r">storageBundleDeleted</span>);
                }
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="ecd6a553c23e480d" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageReadTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r526 rd" class="r526 r">client</span> = <a href="#7d583590c1ece8fd" class="i method">GetKeyVaultUserClient</a>();
 
                <b>const string</b> <span id="r527 rd" class="r527 r">storageAccountName</span> = <span class="s">&quot;readStrg01&quot;</span>;
                <b>try</b>
                {
                    <a href="#384f33a19b8b5cdf" class="i method">CreateKvStorageAccount</a>(<span class="r526 r">client</span>, <span class="r527 r">storageAccountName</span>);
 
                    <a href="/Microsoft.Azure.KeyVault/A.html#f04dc708d8aab749" class="k">var</a> <span id="r528 rd" class="r528 r">storageBundle</span> = <span class="r526 r">client</span>
                        .<a href="/Microsoft.Azure.KeyVault/A.html#faf2237156025da1" class="i method">GetStorageAccountAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r527 r">storageAccountName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r528 r">storageBundle</span>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r528 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ebc1b9acc0d2aea6" class="i property">Id</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r528 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6eb9925ea291dcdb" class="i property">ActiveKeyName</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r528 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#fd6b0cdd2048df7d" class="i property">AutoRegenerateKey</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r528 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#aa3b614348ab7763" class="i property">RegenerationPeriod</a>);
                    <span class="t t">Assert</span>.<span class="i method">Null</span>(<span class="r528 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e4786a989be96404" class="i property">Tags</a>);
                    <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r528 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5ac96effb9ecbe45" class="i property">Attributes</a>.<a href="/Microsoft.Azure.KeyVault/A.html#69ea2bcdf77618b6" class="i property">Enabled</a>);
                }
                <b>finally</b>
                {
                    <span class="c">// Delete</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#a4522c6eb8c4cff5" class="k">var</a> <span id="r529 rd" class="r529 r">storageBundleDeleted</span> =
                        <span class="r526 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#c8f4d598149e09f2" class="i method">DeleteStorageAccountAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r527 r">storageAccountName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r529 r">storageBundleDeleted</span>);
                }
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="da7c1c8abd110e9e" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageDeleteTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r530 rd" class="r530 r">client</span> = <a href="#7d583590c1ece8fd" class="i method">GetKeyVaultUserClient</a>();
 
                <b>const string</b> <span id="r531 rd" class="r531 r">storageAccountName</span> = <span class="s">&quot;deleteStrg01&quot;</span>;
 
                <a href="#384f33a19b8b5cdf" class="i method">CreateKvStorageAccount</a>(<span class="r530 r">client</span>, <span class="r531 r">storageAccountName</span>);
 
                <a href="/Microsoft.Azure.KeyVault/A.html#a4522c6eb8c4cff5" class="k">var</a> <span id="r532 rd" class="r532 r">storageBundle</span> = <span class="r530 r">client</span>
                    .<a href="/Microsoft.Azure.KeyVault/A.html#c8f4d598149e09f2" class="i method">DeleteStorageAccountAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r531 r">storageAccountName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r532 r">storageBundle</span>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r532 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ebc1b9acc0d2aea6" class="i property">Id</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r532 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6eb9925ea291dcdb" class="i property">ActiveKeyName</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r532 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#fd6b0cdd2048df7d" class="i property">AutoRegenerateKey</a>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r532 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#aa3b614348ab7763" class="i property">RegenerationPeriod</a>);
                <span class="t t">Assert</span>.<span class="i method">Null</span>(<span class="r532 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e4786a989be96404" class="i property">Tags</a>);
                <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r532 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5ac96effb9ecbe45" class="i property">Attributes</a>.<a href="/Microsoft.Azure.KeyVault/A.html#69ea2bcdf77618b6" class="i property">Enabled</a>);
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="58af5127c32e6c14" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageUpdateTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r533 rd" class="r533 r">client</span> = <a href="#7d583590c1ece8fd" class="i method">GetKeyVaultUserClient</a>();
 
                <b>const string</b> <span id="r534 rd" class="r534 r">storageAccountName</span> = <span class="s">&quot;updateStrg01&quot;</span>;
                <b>try</b>
                {
                    <a href="#384f33a19b8b5cdf" class="i method">CreateKvStorageAccount</a>(<span class="r533 r">client</span>, <span class="r534 r">storageAccountName</span>);
 
                    <a href="/Microsoft.Azure.KeyVault/A.html#f04dc708d8aab749" class="k">var</a> <span id="r535 rd" class="r535 r">storageBundle</span> = <span class="r533 r">client</span>
                        .<a href="/Microsoft.Azure.KeyVault/A.html#781c6d59ca7b8215" class="i method">UpdateStorageAccountAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r534 r">storageAccountName</span>, <span class="s">&quot;key2&quot;</span>, <b>false</b>, <span class="s">&quot;P10D&quot;</span>)
                        .<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>()
                        .<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r535 r">storageBundle</span>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r535 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ebc1b9acc0d2aea6" class="i property">Id</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotEqual</span>(<span class="s">&quot;key1&quot;</span>, <span class="r535 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6eb9925ea291dcdb" class="i property">ActiveKeyName</a>);
                    <span class="t t">Assert</span>.<span class="i method">False</span>(<span class="r535 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#fd6b0cdd2048df7d" class="i property">AutoRegenerateKey</a>);
                    <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="s">&quot;P10D&quot;</span>, <span class="r535 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#aa3b614348ab7763" class="i property">RegenerationPeriod</a>);
                    <span class="t t">Assert</span>.<span class="i method">Null</span>(<span class="r535 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e4786a989be96404" class="i property">Tags</a>);
                    <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r535 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5ac96effb9ecbe45" class="i property">Attributes</a>.<a href="/Microsoft.Azure.KeyVault/A.html#69ea2bcdf77618b6" class="i property">Enabled</a>);
                }
                <b>finally</b>
                {
                    <span class="c">// Delete</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#a4522c6eb8c4cff5" class="k">var</a> <span id="r536 rd" class="r536 r">storageBundleDeleted</span> =
                        <span class="r533 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#c8f4d598149e09f2" class="i method">DeleteStorageAccountAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r534 r">storageAccountName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r536 r">storageBundleDeleted</span>);
                }
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="ef762949e9ae827e" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageListTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r537 rd" class="r537 r">client</span> = <a href="#7d583590c1ece8fd" class="i method">GetKeyVaultUserClient</a>();
                <a href="@0@System.Core/A.html#2d265edc718b158b" class="k">var</a> <span id="r538 rd" class="r538 r">addedObjects</span> = <b>new</b> <a href="@0@System.Core/A.html#eca9ea30fa3b2c28" class="t constructor">HashSet</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;();
 
                <b>const string</b> <span id="r539 rd" class="r539 r">storageAccountName1</span> = <span class="s">&quot;listStrg01&quot;</span>;
                <b>const string</b> <span id="r540 rd" class="r540 r">storageAccountName2</span> = <span class="s">&quot;listStrg02&quot;</span>;
                <b>try</b>
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#f04dc708d8aab749" class="k">var</a> <span id="r541 rd" class="r541 r">bundle01</span> = <a href="#384f33a19b8b5cdf" class="i method">CreateKvStorageAccount</a>(<span class="r537 r">client</span>, <span class="r539 r">storageAccountName1</span>);
                    <span class="r538 r">addedObjects</span>.<a href="@0@System.Core/A.html#43a2b651926474a7" class="i method">Add</a>(<span class="r541 r">bundle01</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ebc1b9acc0d2aea6" class="i property">Id</a>);
                    <a href="/Microsoft.Azure.KeyVault/A.html#f04dc708d8aab749" class="k">var</a> <span id="r542 rd" class="r542 r">bundle02</span> = <a href="#f7c0fd4ec3d2561b" class="i method">CreateKvStorageAccount</a>(<span class="r537 r">client</span>, <span class="r540 r">storageAccountName2</span>, <a href="#084a303d4f139637" class="i field">_storageResourceUrl2</a>);
                    <span class="r538 r">addedObjects</span>.<a href="@0@System.Core/A.html#43a2b651926474a7" class="i method">Add</a>(<span class="r542 r">bundle02</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ebc1b9acc0d2aea6" class="i property">Id</a>);
 
                    <a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#8125b18f5d7ee303" class="k">var</a> <span id="r543 rd" class="r543 r">listResponse</span> = <span class="r537 r">client</span>
                        .<a href="/Microsoft.Azure.KeyVault/A.html#c01923a97606c6f3" class="i method">GetStorageAccountsAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>)
                        .<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>()
                        .<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r543 r">listResponse</span>);
                    <b>foreach</b> (<a href="/Microsoft.Azure.KeyVault/A.html#a84ac8fa74bc436b" class="t t">StorageAccountItem</a> <span id="r544 rd" class="r544 r">m</span> <b>in</b> <span class="r543 r">listResponse</span>)
                    {
                        <b>if</b> (<span class="r538 r">addedObjects</span>.<a href="@0@System.Core/A.html#06d905a0ac76e4f5" class="i method">Contains</a>(<span class="r544 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bd766e2569ed8e13" class="i property">Id</a>))
                        {
                            <span class="t t">Assert</span>.<span class="i method">StartsWith</span>(<span class="s">&quot;listStrg&quot;</span>, <span class="r544 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#55ca593e166f45a9" class="i property">Identifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>);
                            <span class="r538 r">addedObjects</span>.<a href="@0@System.Core/A.html#4e77ae9204a00be6" class="i method">Remove</a>(<span class="r544 r">m</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bd766e2569ed8e13" class="i property">Id</a>);
                        }
                    }
                }
                <b>finally</b>
                {
                    <span class="c">// Delete</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#a4522c6eb8c4cff5" class="k">var</a> <span id="r545 rd" class="r545 r">storageBundleDeleted01</span> =
                        <span class="r537 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#c8f4d598149e09f2" class="i method">DeleteStorageAccountAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r539 r">storageAccountName1</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r545 r">storageBundleDeleted01</span>);
 
                    <a href="/Microsoft.Azure.KeyVault/A.html#a4522c6eb8c4cff5" class="k">var</a> <span id="r546 rd" class="r546 r">storageBundleDeleted02</span> =
                        <span class="r537 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#c8f4d598149e09f2" class="i method">DeleteStorageAccountAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r540 r">storageAccountName2</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r546 r">storageBundleDeleted02</span>);
                }
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="b5fdce91d38aa51b" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StorageRegenerateKeyTest</a>()
        {
            <b>using</b> (<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#99795cd14ff6aa3c" class="t t">MockContext</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7807b8f25afc69de" class="i method">Start</a>(<a href="#741e26b08beafc2c" class="k">this</a>.<a href="@0@mscorlib/A.html#4d73eb225aef8a61" class="i method">GetType</a>()))
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="k">var</a> <span id="r547 rd" class="r547 r">client</span> = <a href="#7d583590c1ece8fd" class="i method">GetKeyVaultUserClient</a>();
 
                <b>const string</b> <span id="r548 rd" class="r548 r">storageAccountName</span> = <span class="s">&quot;regenerateKeyStrg01&quot;</span>;
                <b>try</b>
                {
                    <a href="#384f33a19b8b5cdf" class="i method">CreateKvStorageAccount</a>(<span class="r547 r">client</span>, <span class="r548 r">storageAccountName</span>);
 
                    <a href="/Microsoft.Azure.KeyVault/A.html#f04dc708d8aab749" class="k">var</a> <span id="r549 rd" class="r549 r">storageBundle</span> = <span class="r547 r">client</span>
                        .<a href="/Microsoft.Azure.KeyVault/A.html#7dd852dec06dc610" class="i method">RegenerateStorageAccountKeyAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r548 r">storageAccountName</span>, <span class="s">&quot;key2&quot;</span>)
                        .<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>()
                        .<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r549 r">storageBundle</span>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r549 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ebc1b9acc0d2aea6" class="i property">Id</a>);
                    <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="s">&quot;key2&quot;</span>, <span class="r549 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6eb9925ea291dcdb" class="i property">ActiveKeyName</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r549 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#fd6b0cdd2048df7d" class="i property">AutoRegenerateKey</a>);
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r549 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#aa3b614348ab7763" class="i property">RegenerationPeriod</a>);
                    <span class="t t">Assert</span>.<span class="i method">Null</span>(<span class="r549 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e4786a989be96404" class="i property">Tags</a>);
                    <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r549 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5ac96effb9ecbe45" class="i property">Attributes</a>.<a href="/Microsoft.Azure.KeyVault/A.html#69ea2bcdf77618b6" class="i property">Enabled</a>);
                }
                <b>finally</b>
                {
                    <span class="c">// Delete</span>
                    <a href="/Microsoft.Azure.KeyVault/A.html#a4522c6eb8c4cff5" class="k">var</a> <span id="r550 rd" class="r550 r">storageBundleDeleted</span> =
                        <span class="r547 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#c8f4d598149e09f2" class="i method">DeleteStorageAccountAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r548 r">storageAccountName</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
                    <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r550 r">storageBundleDeleted</span>);
                }
            }
        }
<span class="c">/*
        public void StorageSasDefCreateTest()
        {
            using (MockContext.Start(this.GetType()))
            {
                var client = GetKeyVaultUserClient();
 
                const string storageAccountName = &quot;createsas01&quot;; ;
                const string sasDefName = &quot;createStrgSasDef01&quot;;
 
                try
                {
                    CreateKvStorageSasDef(client, storageAccountName, sasDefName);
                }
                finally
                {
                    // Delete
                    var sasDefDeleted =
                        client.DeleteSasDefinitionAsync(_vaultAddress, storageAccountName, sasDefName).GetAwaiter().GetResult();
 
                    Assert.NotNull(sasDefDeleted);
                }
            }
        }
 
        public void StorageSasDefReadTest()
        {
            using (MockContext.Start(this.GetType()))
            {
                var client = GetKeyVaultUserClient();
 
                const string storageAccountName = &quot;readsas01&quot;;
                const string sasDefName = &quot;readStrgSasDef01&quot;;
                try
                {
                    CreateKvStorageSasDef(client, storageAccountName, sasDefName);
 
                    var response = client
                        .GetSasDefinitionAsync(_vaultAddress, storageAccountName, sasDefName).GetAwaiter().GetResult();
 
                    Assert.NotNull(response.Id);
                    Assert.NotNull(response.SecretId);
                    Assert.NotNull(response.TemplateUri);
                    Assert.NotNull(response.SasType);
                    Assert.NotNull(response.ValidityPeriod);
                    Assert.True(response.Attributes.Enabled);
                    Assert.Null(response.Tags);
                }
                finally
                {
                    // Delete
                    var sasDefDeleted =
                        client.DeleteSasDefinitionAsync(_vaultAddress, storageAccountName, sasDefName).GetAwaiter().GetResult();
 
                    Assert.NotNull(sasDefDeleted);
                }
            }
        }
 
        public void StorageSasDefDeleteTest()
        {
            using (MockContext.Start(this.GetType()))
            {
                var client = GetKeyVaultUserClient();
 
                const string storageAccountName = &quot;deletesas01&quot;;
                const string sasDefName = &quot;deleteStrgSasDef01&quot;;
 
                CreateKvStorageSasDef(client, storageAccountName, sasDefName);
 
                var response = client
                       .DeleteSasDefinitionAsync(_vaultAddress, storageAccountName, sasDefName).GetAwaiter().GetResult();
 
                Assert.NotNull(response.Id);
                Assert.NotNull(response.SecretId);
                Assert.NotNull(response.TemplateUri);
                Assert.NotNull(response.SasType);
                Assert.NotNull(response.ValidityPeriod);
                Assert.True(response.Attributes.Enabled);
                Assert.Null(response.Tags);
            }
        }
 
        public void StorageSasDefUpdateTest()
        {
            using (MockContext.Start(this.GetType()))
            {
                var client = GetKeyVaultUserClient();
 
                const string storageAccountName = &quot;updatesas01&quot;;
                const string sasDefName = &quot;updateStrgSasDef01&quot;;
                try
                {
                    CreateKvStorageSasDef(client, storageAccountName, sasDefName);
 
                    var sasType = &quot;account&quot;;
                    var validityPeriod = &quot;P7D&quot;;
                    var storageApiVer = &quot;2016-05-31&quot;;
                    var templateUri = GetSasDefinitionTemplateUri(
                        blobUri: String.Format(&quot;https://{0}.blob.core.windows.net/&quot;, storageAccountName),
                        startTime: DateTime.UtcNow.ToString(),
                        expiryTime: DateTime.UtcNow.AddDays(7).ToString(),
                        resourceType: &quot;c&quot;,  // &quot;container&quot;
                        permissions: &quot;rw&quot;,  // read/write
                        storageServiceEndpoint: &quot;b&quot;,    // &quot;blob&quot;
                        storageServiceVersion: storageApiVer,
                        signature: &quot;dummySig&quot;);
                    var response = client
                        .UpdateSasDefinitionAsync(
                            _vaultAddress,
                            storageAccountName,
                            sasDefName,
                            templateUri.ToString(),
                            sasType,
                            validityPeriod,
                            new SasDefinitionAttributes(false))
                        .GetAwaiter()
                        .GetResult();
 
                    Assert.NotNull(response.Id);
                    Assert.NotNull(response.SecretId);
                    Assert.Equal(response.TemplateUri, templateUri.ToString());
                    Assert.False(response.Attributes.Enabled);
                    Assert.Null(response.Tags);
                }
                finally
                {
                    // Delete
                    var sasDefDeleted =
                        client.DeleteSasDefinitionAsync(_vaultAddress, storageAccountName, sasDefName)
                            .GetAwaiter()
                            .GetResult();
 
                    Assert.NotNull(sasDefDeleted);
                }
            }
        }
 
        public void StorageSasDefListTest()
        {
            using (MockContext.Start(this.GetType()))
            {
                var client = GetKeyVaultUserClient();
                var addedObjects = new HashSet&lt;string&gt;();
 
                const string storageAccountName = &quot;listsas01&quot;;
                const string sasDefName1 = &quot;listStrgSasDef01&quot;;
                const string sasDefName2 = &quot;listStrgSasDef02&quot;;
                try
                {
                    var bundle01 = CreateKvStorageSasDef(client, storageAccountName, sasDefName1);
                    addedObjects.Add(bundle01.Id);
                    var bundle02 = CreateKvStorageSasDef(client, storageAccountName, sasDefName2);
                    addedObjects.Add(bundle02.Id);
 
                    var listResponse = client
                        .GetSasDefinitionsAsync(_vaultAddress, storageAccountName)
                        .GetAwaiter()
                        .GetResult();
 
                    Assert.NotNull(listResponse);
                    foreach (SasDefinitionItem m in listResponse)
                    {
                        if (addedObjects.Contains(m.Id))
                        {
                            Assert.StartsWith(&quot;listStrgSasDef&quot;, m.Identifier.Name);
                            addedObjects.Remove(m.Id);
                        }
                    }
                }
                finally
                {
                    // Delete
                    var sasDefDeleted01 =
                        client.DeleteSasDefinitionAsync(_vaultAddress, storageAccountName, sasDefName1).GetAwaiter().GetResult();
 
                    Assert.NotNull(sasDefDeleted01);
 
                    var sasDefDeleted02 =
                        client.DeleteSasDefinitionAsync(_vaultAddress, storageAccountName, sasDefName2).GetAwaiter().GetResult();
 
                    Assert.NotNull(sasDefDeleted02);
                }
            }
        }
*/</span>
<span class="k preprocess">#</span><span class="k preprocess">endregion</span>
 
<span class="k preprocess">#</span><span class="k preprocess">region</span> Helper Methods
 
        <b>private static</b> <a href="/Microsoft.Azure.KeyVault/A.html#e8a7f2beef67b9de" class="t t">SecretAttributes</a> <a id="404cb13fe0c3755d" href="R/404cb13fe0c3755d.html" target="n" data-glyph="76,1" class="i method">NewSecretAttributes</a>(<b>bool</b> <span id="r235 rd" class="r235 r">enabled</span>, <b>bool</b> <span id="r236 rd" class="r236 r">active</span>, <b>bool</b> <span id="r237 rd" class="r237 r">expired</span>)
        {
            <b>if</b> (!<span class="r236 r">active</span> &amp;&amp; <span class="r237 r">expired</span>)
                <b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#eb98012a74461437" class="t constructor">ArgumentException</a>(<span class="s">&quot;Secret cannot be both inactive and expired; math not possible&quot;</span>);
 
            <a href="/Microsoft.Azure.KeyVault/A.html#e8a7f2beef67b9de" class="k">var</a> <span id="r551 rd" class="r551 r">attributes</span> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#b0430cde654673e4" class="t constructor">SecretAttributes</a>();
            <span class="r551 r">attributes</span>.<a href="/Microsoft.Azure.KeyVault/A.html#4711a60053ea2d77" class="i property">Enabled</a> = <span class="r235 r">enabled</span>;
 
            <b>if</b> (<span class="r236 r">active</span> == <b>false</b>)
            {
                <span class="c">// Set the secret to not be active for 12 hours</span>
                <span class="r551 r">attributes</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ca02021b80a17394" class="i property">NotBefore</a> = (<a href="@0@mscorlib/A.html#df6b1eba7461813b" class="t t">DateTime</a>.<a href="@0@mscorlib/A.html#b0d5e4c9a8d4ddac" class="i property">UtcNow</a> + <b>new</b> <a href="@0@mscorlib/A.html#cc47d2ab23466909" class="t constructor">TimeSpan</a>(0, 12, 0, 0));
            }
 
            <b>if</b> (<span class="r237 r">expired</span>)
            {
                <span class="c">// Set the secret to be expired 12 hours ago</span>
                <span class="r551 r">attributes</span>.<a href="/Microsoft.Azure.KeyVault/A.html#2fedfe0e857808a8" class="i property">Expires</a> = (<a href="@0@mscorlib/A.html#df6b1eba7461813b" class="t t">DateTime</a>.<a href="@0@mscorlib/A.html#b0d5e4c9a8d4ddac" class="i property">UtcNow</a> - <b>new</b> <a href="@0@mscorlib/A.html#cc47d2ab23466909" class="t constructor">TimeSpan</a>(0, 12, 0, 0));
            }
            <b>return</b> <span class="r551 r">attributes</span>;
        }
 
 
        <b>internal void</b> <a id="98923d439a2d1ba5" href="R/98923d439a2d1ba5.html" target="n" data-glyph="74,1" class="i method">EncryptDecrypt</a>(<a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="t t">KeyVaultClient</a> <span id="r552 rd" class="r552 r">client</span>, <a href="/Microsoft.Azure.KeyVault/A.html#3ff6311593b8db9a" class="t t">KeyIdentifier</a> <span id="r553 rd" class="r553 r">keyIdentifier</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r554 rd" class="r554 r">algorithm</span>)
        {
            <b>var</b> <span id="r555 rd" class="r555 r">plainText</span> = <a href="#e000cf1a3e8b7ad5" class="i method">RandomBytes</a>(10);
            <a href="/Microsoft.Azure.KeyVault/A.html#e8a56d1906413280" class="k">var</a> <span id="r556 rd" class="r556 r">encryptResult</span> = <span class="r552 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#4d9d92757adbec95" class="i method">EncryptAsync</a>(<span class="r553 r">keyIdentifier</span>.<a href="/Microsoft.Azure.KeyVault/A.html#51f5cfbfe9a8bfe3" class="i property">BaseIdentifier</a>, <span class="r554 r">algorithm</span>, <span class="r555 r">plainText</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r556 r">encryptResult</span>);
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r556 r">encryptResult</span>.<a href="/Microsoft.Azure.KeyVault/A.html#40c2fac07a30b2cd" class="i property">Kid</a>);
 
            <a href="/Microsoft.Azure.KeyVault/A.html#e8a56d1906413280" class="k">var</a> <span id="r557 rd" class="r557 r">decryptResult</span> = <span class="r552 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#c46e36a1a7f5d5bf" class="i method">DecryptAsync</a>(<span class="r556 r">encryptResult</span>.<a href="/Microsoft.Azure.KeyVault/A.html#40c2fac07a30b2cd" class="i property">Kid</a>, <span class="r554 r">algorithm</span>, <span class="r556 r">encryptResult</span>.<a href="/Microsoft.Azure.KeyVault/A.html#692ad38bc3c57a20" class="i property">Result</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r557 r">decryptResult</span>);
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r557 r">decryptResult</span>.<a href="/Microsoft.Azure.KeyVault/A.html#40c2fac07a30b2cd" class="i property">Kid</a>);
 
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r555 r">plainText</span>.<a href="@0@System.Core/A.html#9bdd6ef7ba6a5615" class="i method">SequenceEqual</a>(<span class="r557 r">decryptResult</span>.<a href="/Microsoft.Azure.KeyVault/A.html#692ad38bc3c57a20" class="i property">Result</a>));
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Wraps and unwraps symmetric key</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r558 r">algorithm</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c"> the wrao and unwrap algorithm </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <b>private void</b> <a id="7f6c1f1f7dc9ce9d" href="R/7f6c1f1f7dc9ce9d.html" target="n" data-glyph="76,1" class="i method">WrapAndUnwrap</a>(<a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="t t">KeyVaultClient</a> <span id="r559 rd" class="r559 r">client</span>, <a href="/Microsoft.Azure.KeyVault/A.html#3ff6311593b8db9a" class="t t">KeyIdentifier</a> <span id="r560 rd" class="r560 r">keyIdentifier</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r558 rd" class="r558 r">algorithm</span>, <b>byte</b>[] <span id="r561 rd" class="r561 r">symmetricKeyBytes</span>)
        {
 
            <a href="/Microsoft.Azure.KeyVault/A.html#e8a56d1906413280" class="k">var</a> <span id="r562 rd" class="r562 r">wrapResult</span> = <span class="r559 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#1203c75dd532e9f7" class="i method">WrapKeyAsync</a>(<span class="r560 r">keyIdentifier</span>.<a href="/Microsoft.Azure.KeyVault/A.html#51f5cfbfe9a8bfe3" class="i property">BaseIdentifier</a>, <span class="r558 r">algorithm</span>, <span class="r561 r">symmetricKeyBytes</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r562 r">wrapResult</span>);
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r562 r">wrapResult</span>.<a href="/Microsoft.Azure.KeyVault/A.html#40c2fac07a30b2cd" class="i property">Kid</a>);
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r562 r">wrapResult</span>.<a href="/Microsoft.Azure.KeyVault/A.html#692ad38bc3c57a20" class="i property">Result</a>);
 
            <a href="/Microsoft.Azure.KeyVault/A.html#e8a56d1906413280" class="k">var</a> <span id="r563 rd" class="r563 r">unwrapResult</span> = <span class="r559 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#d4fc3566c2093e2b" class="i method">UnwrapKeyAsync</a>(<span class="r562 r">wrapResult</span>.<a href="/Microsoft.Azure.KeyVault/A.html#40c2fac07a30b2cd" class="i property">Kid</a>, <span class="r558 r">algorithm</span>, <span class="r562 r">wrapResult</span>.<a href="/Microsoft.Azure.KeyVault/A.html#692ad38bc3c57a20" class="i property">Result</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r563 r">unwrapResult</span>);
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r563 r">unwrapResult</span>.<a href="/Microsoft.Azure.KeyVault/A.html#40c2fac07a30b2cd" class="i property">Kid</a>);
 
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r563 r">unwrapResult</span>.<a href="/Microsoft.Azure.KeyVault/A.html#692ad38bc3c57a20" class="i property">Result</a>.<a href="@0@System.Core/A.html#9bdd6ef7ba6a5615" class="i method">SequenceEqual</a>(<span class="r561 r">symmetricKeyBytes</span>), <span class="s">&quot;the symmetric key after unwrap should match the initial key&quot;</span>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Creates a signature and verifies it</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r564 r">keyIdentifier</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c"> key identifier </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r565 r">algorithm</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c"> sign algorithm </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r566 r">digest</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c"> digest hash </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <b>private void</b> <a id="c68517e8a065c0ff" href="R/c68517e8a065c0ff.html" target="n" data-glyph="76,1" class="i method">SignVerify</a>(<a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="t t">KeyVaultClient</a> <span id="r567 rd" class="r567 r">client</span>, <a href="/Microsoft.Azure.KeyVault/A.html#3ff6311593b8db9a" class="t t">KeyIdentifier</a> <span id="r564 rd" class="r564 r">keyIdentifier</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r565 rd" class="r565 r">algorithm</span>, <b>byte</b>[] <span id="r566 rd" class="r566 r">digest</span>)
        {
            <a href="/Microsoft.Azure.KeyVault/A.html#e8a56d1906413280" class="k">var</a> <span id="r568 rd" class="r568 r">signResult</span> = <span class="r567 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#a0418a98babd924e" class="i method">SignAsync</a>(<span class="r564 r">keyIdentifier</span>.<a href="/Microsoft.Azure.KeyVault/A.html#51f5cfbfe9a8bfe3" class="i property">BaseIdentifier</a>, <span class="r565 r">algorithm</span>, <span class="r566 r">digest</span>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
            <a href="@0@mscorlib/A.html#f1b135ff6c380b37" class="k">var</a> <span id="r569 rd" class="r569 r">verifyResult</span> = <span class="r567 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#755e70fe719043c8" class="i method">VerifyAsync</a>(<span class="r568 r">signResult</span>.<a href="/Microsoft.Azure.KeyVault/A.html#40c2fac07a30b2cd" class="i property">Kid</a>, <span class="r565 r">algorithm</span>, <span class="r566 r">digest</span>, <span class="r568 r">signResult</span>.<a href="/Microsoft.Azure.KeyVault/A.html#692ad38bc3c57a20" class="i property">Result</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r569 r">verifyResult</span>, <span class="s">&quot;Signature was not verified&quot;</span>);
        }
 
        <b>public static string</b> <a id="b4de92fda68305c4" href="R/b4de92fda68305c4.html" target="n" data-glyph="72,1" class="i method">GetKidWithoutVersion</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r570 rd" class="r570 r">kid</span>)
        {
            <a href="@0@System/A.html#991565dd25f47c90" class="k">var</a> <span id="r571 rd" class="r571 r">uri</span> = <b>new</b> <a href="@0@System/A.html#d9fc45d783ee73ff" class="t constructor">Uri</a>(<span class="r570 r">kid</span>, <a href="@0@System/A.html#ac43655101ad74be" class="t t">UriKind</a>.<a href="@0@System/A.html#d734108197254429" class="i field">Absolute</a>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r572 rd" class="r572 r">result</span> = <span class="r571 r">uri</span>.<a href="@0@System/A.html#4976ca5940014388" class="i method">GetComponents</a>(<a href="@0@System/A.html#991327569fea4e2a" class="t t">UriComponents</a>.<a href="@0@System/A.html#b3e50b9a82ff7a5d" class="i field">SchemeAndServer</a>, <a href="@0@System/A.html#2edfd6a63eb427d0" class="t t">UriFormat</a>.<a href="@0@System/A.html#be4319571451825f" class="i field">SafeUnescaped</a>);
            <b>for</b> (<a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r573 rd" class="r573 r">i</span> = 0; <span class="r573 r">i</span> &lt; 3; <span class="r573 r">i</span>++)
            {
                <span class="r572 r">result</span> += <span class="r571 r">uri</span>.<a href="@0@System/A.html#9f1791fdcbd164c6" class="i property">Segments</a>[<span class="r573 r">i</span>];
            }
            <span class="r572 r">result</span> = <span class="r572 r">result</span>.<a href="@0@mscorlib/A.html#628f74f98ae9d848" class="i method">Trim</a>(<span class="s">&quot;/&quot;</span>.<a href="@0@mscorlib/A.html#81c2d980f5d0ee35" class="i method">ToCharArray</a>());
            <b>return</b> <span class="r572 r">result</span>;
        }
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Verifies secret values are equal</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r574 r">secretValue1</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c"> secret value </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r575 r">secretValue2</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c"> secret value </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <b>private void</b> <a id="3ea2f984aee381e7" href="R/3ea2f984aee381e7.html" target="n" data-glyph="76,1" class="i method">VerifySecretValuesAreEqual</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r574 rd" class="r574 r">secretValue1</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r575 rd" class="r575 r">secretValue2</span>)
        {
            <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r574 r">secretValue1</span>, <span class="r575 r">secretValue2</span>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Verifies secret values are not equal</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r576 r">secretValue1</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c"> secret value </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r577 r">secretValue2</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c"> secret value </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <b>private void</b> <a id="a8b951ae524bd377" href="R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">VerifySecretValuesAreNotEqual</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r576 rd" class="r576 r">secretValue1</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r577 rd" class="r577 r">secretValue2</span>)
        {
            <span class="t t">Assert</span>.<span class="i method">NotEqual</span>(<span class="r576 r">secretValue1</span>, <span class="r577 r">secretValue2</span>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Verifies IDs are equal</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r578 r">secretId1</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c"> ID </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r579 r">secretId2</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c"> ID </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <b>private void</b> <a id="796564b83dd343d6" href="R/796564b83dd343d6.html" target="n" data-glyph="76,1" class="i method">VerifyIdsAreEqual</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r578 rd" class="r578 r">secretId1</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r579 rd" class="r579 r">secretId2</span>)
        {
            <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r578 r">secretId1</span>, <span class="r579 r">secretId2</span>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Verifies IDs are not equal</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r580 r">id1</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c"> ID </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r581 r">id2</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c"> ID </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <b>private void</b> <a id="dc043928b4414bb2" href="R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">VerifyIdsAreNotEqual</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r580 rd" class="r580 r">id1</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r581 rd" class="r581 r">id2</span>)
        {
            <span class="t t">Assert</span>.<span class="i method">NotEqual</span>(<span class="r580 r">id1</span>, <span class="r581 r">id2</span>);
        }
 
        <b>protected static byte</b>[] <a id="e000cf1a3e8b7ad5" href="R/e000cf1a3e8b7ad5.html" target="n" data-glyph="75,1" class="i method">RandomBytes</a>(<b>int</b> <span id="r582 rd" class="r582 r">length</span>)
        {
            <b>if</b> (<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#348d97248a265d2f" class="t t">HttpMockServer</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#a74d951f775be518" class="i property">Mode</a> == <a href="/Microsoft.Azure.Test.HttpRecorder/A.html#ba41c0be28bfd60b" class="t t">HttpRecorderMode</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#6634c3afad27d401" class="i field">Record</a>)
            {
                <b>var</b> <span id="r583 rd" class="r583 r">bytes</span> = <b>new</b> <b>byte</b>[<span class="r582 r">length</span>];
                <a href="@0@mscorlib/A.html#bb77e610694e64ca" class="t t">Random</a> <span id="r584 rd" class="r584 r">rnd</span> = <b>new</b> <a href="@0@mscorlib/A.html#5d22f8880fc9f8d9" class="t constructor">Random</a>();
                <span class="r584 r">rnd</span>.<a href="@0@mscorlib/A.html#04910e5e5c6c9a8b" class="i method">NextBytes</a>(<span class="r583 r">bytes</span>);
                <a href="/Microsoft.Azure.Test.HttpRecorder/A.html#348d97248a265d2f" class="t t">HttpMockServer</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#250f849780469e4f" class="i property">Variables</a><a href="@0@mscorlib/A.html#49962975508e2d83">[</a><span class="s">&quot;RandomBytes&quot;</span>] = <a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#f9e5bd7b69c5f334" class="i method">ToBase64String</a>(<span class="r583 r">bytes</span>);
                <b>return</b> <span class="r583 r">bytes</span>;
            }
            <b>else</b>
            {
                <b>return</b> <a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#08c34f52087ba624" class="i method">FromBase64String</a>(<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#348d97248a265d2f" class="t t">HttpMockServer</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#250f849780469e4f" class="i property">Variables</a><a href="@0@mscorlib/A.html#49962975508e2d83">[</a><span class="s">&quot;RandomBytes&quot;</span>]);
            }
        }
 
        <b>protected static byte</b>[] <a id="08bc612291e93141" href="R/08bc612291e93141.html" target="n" data-glyph="75,1" class="i method">RandomHash</a>(<a href="@0@mscorlib/A.html#e7c6be1ed86f474f" class="t t">HashAlgorithm</a> <span id="r585 rd" class="r585 r">hashAlgorithm</span>, <b>int</b> <span id="r586 rd" class="r586 r">length</span>)
        {
            <b>var</b> <span id="r587 rd" class="r587 r">data</span> = <a href="#e000cf1a3e8b7ad5" class="i method">RandomBytes</a>(<span class="r586 r">length</span>);
            <b>var</b> <span id="r588 rd" class="r588 r">hash</span> = <span class="r585 r">hashAlgorithm</span>.<a href="@0@mscorlib/A.html#a71a3cba2c656040" class="i method">ComputeHash</a>(<span class="r587 r">data</span>);
            <b>return</b> <span class="r588 r">hash</span>;
        }
 
        <b>private void</b> <a id="a28594ab30d1ad75" href="R/a28594ab30d1ad75.html" target="n" data-glyph="76,1" class="i method">VerifyKeyAttributesAreEqual</a>(<a href="/Microsoft.Azure.KeyVault/A.html#94343e9880a92aee" class="t t">KeyAttributes</a> <span id="r589 rd" class="r589 r">keyAttribute1</span>, <a href="/Microsoft.Azure.KeyVault/A.html#94343e9880a92aee" class="t t">KeyAttributes</a> <span id="r590 rd" class="r590 r">keyAttribute2</span>)
        {
            <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r589 r">keyAttribute1</span>.<a href="/Microsoft.Azure.KeyVault/A.html#2fedfe0e857808a8" class="i property">Expires</a>, <span class="r590 r">keyAttribute2</span>.<a href="/Microsoft.Azure.KeyVault/A.html#2fedfe0e857808a8" class="i property">Expires</a>);
            <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r589 r">keyAttribute1</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ca02021b80a17394" class="i property">NotBefore</a>, <span class="r590 r">keyAttribute2</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ca02021b80a17394" class="i property">NotBefore</a>);
            <span class="t t">Assert</span>.<span class="i method">Equal</span>&lt;<b>bool</b>?&gt;(<span class="r589 r">keyAttribute1</span>.<a href="/Microsoft.Azure.KeyVault/A.html#4711a60053ea2d77" class="i property">Enabled</a> ?? <b>true</b>, <span class="r590 r">keyAttribute2</span>.<a href="/Microsoft.Azure.KeyVault/A.html#4711a60053ea2d77" class="i property">Enabled</a> ?? <b>true</b>);
        }
 
        <b>private void</b> <a id="110390c8c9ea856f" href="R/110390c8c9ea856f.html" target="n" data-glyph="76,1" class="i method">VerifySecretAttributesAreEqual</a>(<a href="/Microsoft.Azure.KeyVault/A.html#e8a7f2beef67b9de" class="t t">SecretAttributes</a> <span id="r591 rd" class="r591 r">leftAttributes</span>, <a href="/Microsoft.Azure.KeyVault/A.html#e8a7f2beef67b9de" class="t t">SecretAttributes</a> <span id="r592 rd" class="r592 r">rightAttributes</span>)
        {
            <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r591 r">leftAttributes</span>.<a href="/Microsoft.Azure.KeyVault/A.html#2fedfe0e857808a8" class="i property">Expires</a>, <span class="r592 r">rightAttributes</span>.<a href="/Microsoft.Azure.KeyVault/A.html#2fedfe0e857808a8" class="i property">Expires</a>);
            <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r591 r">leftAttributes</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ca02021b80a17394" class="i property">NotBefore</a>, <span class="r592 r">rightAttributes</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ca02021b80a17394" class="i property">NotBefore</a>);
            <span class="t t">Assert</span>.<span class="i method">Equal</span>&lt;<b>bool</b>?&gt;(<span class="r591 r">leftAttributes</span>.<a href="/Microsoft.Azure.KeyVault/A.html#4711a60053ea2d77" class="i property">Enabled</a> ?? <b>true</b>, <span class="r592 r">rightAttributes</span>.<a href="/Microsoft.Azure.KeyVault/A.html#4711a60053ea2d77" class="i property">Enabled</a> ?? <b>true</b>);
        }
 
        <b>private void</b> <a id="7b23e4a6420b13bf" href="R/7b23e4a6420b13bf.html" target="n" data-glyph="76,1" class="i method">VerifyKeyOperationsAreEqual</a>(<a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r593 rd" class="r593 r">firstOperations</span>, <a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r594 rd" class="r594 r">secondOperations</span>)
        {
            <span class="t t">Assert</span>.<span class="i method">False</span>(<span class="r593 r">firstOperations</span> == <b>null</b> &amp;&amp; <span class="r594 r">secondOperations</span> != <b>null</b>);
            <span class="t t">Assert</span>.<span class="i method">False</span>(<span class="r593 r">firstOperations</span> != <b>null</b> &amp;&amp; <span class="r594 r">secondOperations</span> == <b>null</b>);
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r593 r">firstOperations</span>.<a href="@0@mscorlib/A.html#3d6c21c4e9bd5f63" class="i property">Count</a> == <span class="r594 r">secondOperations</span>.<a href="@0@mscorlib/A.html#3d6c21c4e9bd5f63" class="i property">Count</a>);
 
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r593 r">firstOperations</span>.<a href="@0@System.Core/A.html#be4bfd025bd2724c" class="i method">All</a>(<span id="r595 rd" class="r595 r">op</span> =&gt; <span class="r594 r">secondOperations</span>.<a href="@0@mscorlib/A.html#8f74065d140cfe04" class="i method">Contains</a>(<span class="r595 r">op</span>)));
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Verifies web keys are equal</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r596 r">webKey1</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c"> first web key </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r597 r">webKey2</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c"> second web key </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <b>private void</b> <a id="7a6ac99fa29d88de" href="R/7a6ac99fa29d88de.html" target="n" data-glyph="76,1" class="i method">VerifyWebKeysAreEqual</a>(<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#072f5b35a8ee35c6" class="t t">JsonWebKey</a> <span id="r596 rd" class="r596 r">webKey1</span>, <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#072f5b35a8ee35c6" class="t t">JsonWebKey</a> <span id="r597 rd" class="r597 r">webKey2</span>)
        {
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r596 r">webKey1</span>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#dd2022e1649e713a" class="i method">Equals</a>(<span class="r597 r">webKey2</span>));
            <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r596 r">webKey1</span>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#fe5560cce3efa496" class="i property">Kid</a>, <span class="r597 r">webKey2</span>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#fe5560cce3efa496" class="i property">Kid</a>);
            <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r596 r">webKey1</span>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#bf5694ab09c369fd" class="i property">Kty</a>, <span class="r597 r">webKey2</span>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#bf5694ab09c369fd" class="i property">Kty</a>);
        }
 
        <b>private void</b> <a id="2d96dfecab051b57" href="R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">VerifyTagsAreEqual</a>(<a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r598 rd" class="r598 r">expected</span>, <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r599 rd" class="r599 r">actual</span>)
        {
            <b>if</b> (<span class="r598 r">expected</span> == <span class="r599 r">actual</span>) <b>return</b>;
 
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r598 r">expected</span> != <b>null</b> &amp;&amp; <span class="r599 r">actual</span> != <b>null</b>);
            <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r598 r">expected</span>.<a href="@0@mscorlib/A.html#3d6c21c4e9bd5f63" class="i property">Count</a>, <span class="r599 r">actual</span>.<a href="@0@mscorlib/A.html#3d6c21c4e9bd5f63" class="i property">Count</a>);
 
            <b>foreach</b> (<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r600 rd" class="r600 r">key</span> <b>in</b> <span class="r598 r">expected</span>.<a href="@0@mscorlib/A.html#6141d2484c7e5c1a" class="i property">Keys</a>)
            {
                <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r598 r">expected</span><a href="@0@mscorlib/A.html#86884956b17e491a">[</a><span class="r600 r">key</span>], <span class="r599 r">actual</span><a href="@0@mscorlib/A.html#86884956b17e491a">[</a><span class="r600 r">key</span>]);
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Creates a key bundle from existing key material.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r601 r">keyType</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Key type.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r602 r">keyToken</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Key material or content description.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r603 r">enabled</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Initial &#39;enabled&#39; state.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r604 r">notBefore</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Key cannot be used before this time.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r605 r">notAfter</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Key cannot be used after this time.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">A KeyBundle.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>protected static</b> <a href="/Microsoft.Azure.KeyVault/A.html#743f0f51eba1582c" class="t t">KeyBundle</a> <a id="245e926f2199dd31" href="R/../../0000000000.html" target="n" data-glyph="75,1" class="i method">GetImportKeyBundle</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r601 rd" class="r601 r">keyType</span>, <b>byte</b>[] <span id="r602 rd" class="r602 r">keyToken</span> = <b>null</b>, <b>bool</b> <span id="r603 rd" class="r603 r">enabled</span> = <b>true</b>, <b>int</b> <span id="r604 rd" class="r604 r">notBefore</span> = 0, <b>int</b> <span id="r605 rd" class="r605 r">notAfter</span> = <b>int</b>.<a href="@0@mscorlib/A.html#c45153c0501d7122" class="i field">MaxValue</a>)
        {
            <b>return</b> <a href="#34bfaf1826ead44a" class="i method">GetImportKeyBundle</a>(<b>new</b> <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#7e44e4e1a4778cc9" class="t constructor">JsonWebKey</a> { <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#bf5694ab09c369fd" class="i property">Kty</a> = <span class="r601 r">keyType</span>, <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#849f90102ea84e9c" class="i property">T</a> = <span class="r602 r">keyToken</span> }, <span class="r603 r">enabled</span>, <span class="r604 r">notBefore</span>, <span class="r605 r">notAfter</span>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Creates a key bundle from an existing JSON web key.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r606 r">key</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The key to import. Must contain public and private components.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r607 r">enabled</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Initial &#39;enabled&#39; state.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r608 r">notBefore</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Key cannot be used before this time.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r609 r">notAfter</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Key cannot be used after this time.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">A KeyBundle.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>protected static</b> <a href="/Microsoft.Azure.KeyVault/A.html#743f0f51eba1582c" class="t t">KeyBundle</a> <a id="34bfaf1826ead44a" href="R/34bfaf1826ead44a.html" target="n" data-glyph="75,1" class="i method">GetImportKeyBundle</a>(<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#072f5b35a8ee35c6" class="t t">JsonWebKey</a> <span id="r606 rd" class="r606 r">key</span>, <b>bool</b> <span id="r607 rd" class="r607 r">enabled</span> = <b>true</b>, <b>int</b> <span id="r608 rd" class="r608 r">notBefore</span> = 0, <b>int</b> <span id="r609 rd" class="r609 r">notAfter</span> = <b>int</b>.<a href="@0@mscorlib/A.html#c45153c0501d7122" class="i field">MaxValue</a>)
        {
            <b>return</b> <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#6b633abce70c52f7" class="t constructor">KeyBundle</a>
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#e04cfa08dbdf419f" class="i property">Key</a> = <span class="r606 r">key</span>,
                <a href="/Microsoft.Azure.KeyVault/A.html#5fc90840d44a26f8" class="i property">Attributes</a> = <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#0f357404091624d2" class="t constructor">KeyAttributes</a>()
                {
                    <a href="/Microsoft.Azure.KeyVault/A.html#4711a60053ea2d77" class="i property">Enabled</a> = <span class="r607 r">enabled</span>,
                    <a href="/Microsoft.Azure.KeyVault/A.html#2fedfe0e857808a8" class="i property">Expires</a> = <a href="/Microsoft.Rest.ClientRuntime/A.html#52708b14f5a48f7d" class="t t">UnixTimeJsonConverter</a>.<a href="/Microsoft.Rest.ClientRuntime/A.html#081c0abd8e0c5025" class="i field">EpochDate</a>.<a href="@0@mscorlib/A.html#4a8bd6c0b5c72d81" class="i method">AddSeconds</a>(<span class="r609 r">notAfter</span>),
                    <a href="/Microsoft.Azure.KeyVault/A.html#ca02021b80a17394" class="i property">NotBefore</a> = <a href="/Microsoft.Rest.ClientRuntime/A.html#52708b14f5a48f7d" class="t t">UnixTimeJsonConverter</a>.<a href="/Microsoft.Rest.ClientRuntime/A.html#081c0abd8e0c5025" class="i field">EpochDate</a>.<a href="@0@mscorlib/A.html#4a8bd6c0b5c72d81" class="i method">AddSeconds</a>(<span class="r608 r">notBefore</span>)
                },
                <a href="/Microsoft.Azure.KeyVault/A.html#5b69ac46d49a1031" class="i property">Tags</a> = <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;()
                {
                    { <span class="s">&quot;purpose&quot;</span>, <span class="s">&quot;unit test&quot;</span> }
                }
            };
        }
 
        <b>private static byte</b>[] <a id="0f27b157ee0b2a9a" href="R/0f27b157ee0b2a9a.html" target="n" data-glyph="76,1" class="i method">GetSymmetricKeyBytes</a>()
        {
            <b>if</b> (<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#348d97248a265d2f" class="t t">HttpMockServer</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#a74d951f775be518" class="i property">Mode</a> == <a href="/Microsoft.Azure.Test.HttpRecorder/A.html#ba41c0be28bfd60b" class="t t">HttpRecorderMode</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#6634c3afad27d401" class="i field">Record</a>)
            {
                <a href="@0@mscorlib/A.html#ddb5f33f82818174" class="k">var</a> <span id="r610 rd" class="r610 r">symmetricKey</span> = <a href="@0@mscorlib/A.html#ddb5f33f82818174" class="t t">Aes</a>.<a href="@0@mscorlib/A.html#f7c32038963e5062" class="i method">Create</a>();
                <b>var</b> <span id="r611 rd" class="r611 r">symmetricKeyBytes</span> = <span class="r610 r">symmetricKey</span>.<a href="@0@mscorlib/A.html#d12a38c78f5c3174" class="i property">Key</a>;
                <a href="/Microsoft.Azure.Test.HttpRecorder/A.html#348d97248a265d2f" class="t t">HttpMockServer</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#250f849780469e4f" class="i property">Variables</a><a href="@0@mscorlib/A.html#49962975508e2d83">[</a><span class="s">&quot;SymmetricKeyBytes&quot;</span>] = <a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#f9e5bd7b69c5f334" class="i method">ToBase64String</a>(<span class="r611 r">symmetricKeyBytes</span>);
                <b>return</b> <span class="r611 r">symmetricKeyBytes</span>;
            }
            <b>else</b>
            {
                <b>return</b> <a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#08c34f52087ba624" class="i method">FromBase64String</a>(<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#348d97248a265d2f" class="t t">HttpMockServer</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#250f849780469e4f" class="i property">Variables</a><a href="@0@mscorlib/A.html#49962975508e2d83">[</a><span class="s">&quot;SymmetricKeyBytes&quot;</span>]);
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Converts a RSAParameters object to a WebKey of type RSA.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r612 r">rsaParameters</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The RSA parameters object to convert</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">A WebKey representing the RSA object</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>private</b> <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#072f5b35a8ee35c6" class="t t">JsonWebKey</a> <a id="370568abfc843d10" href="R/370568abfc843d10.html" target="n" data-glyph="76,1" class="i method">CreateJsonWebKey</a>(<a href="@0@mscorlib/A.html#dfd6cfff509b13df" class="t t">RSAParameters</a> <span id="r612 rd" class="r612 r">rsaParameters</span>)
        {
            <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#072f5b35a8ee35c6" class="k">var</a> <span id="r613 rd" class="r613 r">key</span> = <b>new</b> <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#7e44e4e1a4778cc9" class="t constructor">JsonWebKey</a>
            {
                <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#bf5694ab09c369fd" class="i property">Kty</a> = <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#c90001f143f0f6b2" class="t t">JsonWebKeyType</a>.<a href="/Microsoft.Azure.KeyVault.WebKey/A.html#cc9d39c080719cc8" class="i field">Rsa</a>,
                <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#12108e7b667ecd5e" class="i property">E</a> = <span class="r612 r">rsaParameters</span>.<a href="@0@mscorlib/A.html#91d13f36d3d02fd7" class="i field">Exponent</a>,
                <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#c852bc6e5241eab3" class="i property">N</a> = <span class="r612 r">rsaParameters</span>.<a href="@0@mscorlib/A.html#f2621da5f160ffb5" class="i field">Modulus</a>,
                <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#e36618c05b815e77" class="i property">D</a> = <span class="r612 r">rsaParameters</span>.<a href="@0@mscorlib/A.html#33f3738835659b02" class="i field">D</a>,
                <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#ee12900e829c9da2" class="i property">DP</a> = <span class="r612 r">rsaParameters</span>.<a href="@0@mscorlib/A.html#7b8dbd3faf1d9481" class="i field">DP</a>,
                <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#65719c489919d919" class="i property">DQ</a> = <span class="r612 r">rsaParameters</span>.<a href="@0@mscorlib/A.html#155c902ff43a9ea8" class="i field">DQ</a>,
                <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#9094a77b302e79bc" class="i property">QI</a> = <span class="r612 r">rsaParameters</span>.<a href="@0@mscorlib/A.html#8c8c5dd0c42c705e" class="i field">InverseQ</a>,
                <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#b18a4697a345d9b6" class="i property">P</a> = <span class="r612 r">rsaParameters</span>.<a href="@0@mscorlib/A.html#0c464c45da683f89" class="i field">P</a>,
                <a href="/Microsoft.Azure.KeyVault.WebKey/A.html#88d5be9b58de3cd9" class="i property">Q</a> = <span class="r612 r">rsaParameters</span>.<a href="@0@mscorlib/A.html#e6f0eac2caa4e0c0" class="i field">Q</a>
            };
 
            <b>return</b> <span class="r613 r">key</span>;
        }
 
        <b>private</b> <a href="/Microsoft.Azure.KeyVault/A.html#17bb4008337c63b2" class="t t">CertificateBundle</a> <a id="b92e879d42a15fff" href="R/b92e879d42a15fff.html" target="n" data-glyph="76,1" class="i method">PollOnCertificateOperation</a>(<a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="t t">KeyVaultClient</a> <span id="r614 rd" class="r614 r">client</span>, <a href="/Microsoft.Azure.KeyVault/A.html#6ecb24e00693fa9c" class="t t">CertificateOperation</a> <span id="r615 rd" class="r615 r">pendingCertificate</span>)
        {
            <span class="c">// Wait till pending is complete. We will wait for 200 seconds</span>
            <a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r616 rd" class="r616 r">pendingPollCount</span> = 0;
            <b>while</b> (<span class="r616 r">pendingPollCount</span> &lt; 11)
            {
                <a href="/Microsoft.Azure.KeyVault/A.html#6ecb24e00693fa9c" class="k">var</a> <span id="r617 rd" class="r617 r">pendingCertificateResponse</span> = <span class="r614 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ad3b3be886f03920" class="i method">GetCertificateOperationAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r615 r">pendingCertificate</span>.<a href="/Microsoft.Azure.KeyVault/A.html#1a85a0245b515298" class="i property">CertificateOperationIdentifier</a>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                <b>if</b> (0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#bda3b2c94b5251ce" class="i method">Compare</a>(<span class="r617 r">pendingCertificateResponse</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9a0ae0e079b7a82c" class="i property">Status</a>, <span class="s">&quot;InProgress&quot;</span>, <b>true</b>))
                {
                    <b>if</b> (<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#348d97248a265d2f" class="t t">HttpMockServer</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#a74d951f775be518" class="i property">Mode</a> == <a href="/Microsoft.Azure.Test.HttpRecorder/A.html#ba41c0be28bfd60b" class="t t">HttpRecorderMode</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#6634c3afad27d401" class="i field">Record</a>)
                        <a href="@0@mscorlib/A.html#3980e012bae82e96" class="t t">Thread</a>.<a href="@0@mscorlib/A.html#82aedb56cecde82c" class="i method">Sleep</a>(<a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(20));
                    <span class="r616 r">pendingPollCount</span> += 1;
                    <b>continue</b>;
                }
 
                <b>if</b> (0 == <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#bda3b2c94b5251ce" class="i method">Compare</a>(<span class="r617 r">pendingCertificateResponse</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9a0ae0e079b7a82c" class="i property">Status</a>, <span class="s">&quot;Completed&quot;</span>, <b>true</b>))
                {
                    <b>return</b> <span class="r614 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bb630d01ea17fa89" class="i method">GetCertificateAsync</a>(<span class="r617 r">pendingCertificateResponse</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5f59c6a92afb89fe" class="i property">Target</a>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                }
 
                <b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#df2d82d91ca29e40" class="t constructor">Exception</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#9726f19207b91186" class="i method">Format</a>(
                    <a href="@0@mscorlib/A.html#e319c6636909012f" class="t t">CultureInfo</a>.<a href="@0@mscorlib/A.html#26ef1c020f0dbb7a" class="i property">InvariantCulture</a>,
                    <span class="s">&quot;Polling on pending certificate returned an unexpected result. Error code = {0}, Error message = {1}&quot;</span>,
                    <span class="r615 r">pendingCertificate</span>.<a href="/Microsoft.Azure.KeyVault/A.html#84676f47a5e0b169" class="i property">Error</a>.<a href="/Microsoft.Azure.KeyVault/A.html#9234d6bb19b92373" class="i property">Code</a>,
                    <span class="r615 r">pendingCertificate</span>.<a href="/Microsoft.Azure.KeyVault/A.html#84676f47a5e0b169" class="i property">Error</a>.<a href="/Microsoft.Azure.KeyVault/A.html#0de85664c442c992" class="i property">Message</a>));
            }
 
            <b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#df2d82d91ca29e40" class="t constructor">Exception</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#691a34e179b91fdb" class="i method">Format</a>(
                <a href="@0@mscorlib/A.html#e319c6636909012f" class="t t">CultureInfo</a>.<a href="@0@mscorlib/A.html#26ef1c020f0dbb7a" class="i property">InvariantCulture</a>,
                <span class="s">&quot;Pending certificate processing delayed&quot;</span>));
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Converts a byte array to a Hex encoded string</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r618 r">input</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The byte array to convert</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">The Hex encoded form of the input</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>private static string</b> <a id="3c129aa0784fec61" href="R/3c129aa0784fec61.html" target="n" data-glyph="76,1" class="i method">ToHexString</a>(<b>byte</b>[] <span id="r618 rd" class="r618 r">input</span>)
        {
            <b>if</b> (<span class="r618 r">input</span> == <b>null</b>)
                <b>return</b> <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>;
 
            <b>return</b> <a href="@0@mscorlib/A.html#8640d8adfffb155b" class="t t">BitConverter</a>.<a href="@0@mscorlib/A.html#867cd6f1b74e166e" class="i method">ToString</a>(<span class="r618 r">input</span>).<a href="@0@mscorlib/A.html#69fc1d0aa6df8a90" class="i method">Replace</a>(<span class="s">&quot;-&quot;</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Well known issuers</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public static class</b> <a id="81e2eaf4784fc3d1" href="R/81e2eaf4784fc3d1.html" target="n" data-glyph="0,1" class="t t">WellKnownIssuers</a>
        {
            <b>public const string</b> <a id="479a9997035919bc" href="R/479a9997035919bc.html" target="n" data-glyph="6,2" class="i field">Self</a> = <span class="s">&quot;Self&quot;</span>;
 
            <b>public const string</b> <a id="e444ee33e8b622c7" href="R/e444ee33e8b622c7.html" target="n" data-glyph="6,2" class="i field">Unknown</a> = <span class="s">&quot;Unknown&quot;</span>;
 
            <b>public static readonly string</b>[] <a id="68c6e7b8bcfc26c6" href="R/../../0000000000.html" target="n" data-glyph="42,2" class="i field">AllIssuers</a> = { <a href="#479a9997035919bc" class="i field">Self</a>, <a href="#e444ee33e8b622c7" class="i field">Unknown</a> };
        }
 
        <b>private</b> <a href="/Microsoft.Azure.KeyVault/A.html#f04dc708d8aab749" class="t t">StorageBundle</a> <a id="384f33a19b8b5cdf" href="R/384f33a19b8b5cdf.html" target="n" data-glyph="76,1" class="i method">CreateKvStorageAccount</a>(<a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="t t">KeyVaultClient</a> <span id="r619 rd" class="r619 r">client</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r620 rd" class="r620 r">storageAccountName</span>)
        {
            <b>return</b> <a href="#f7c0fd4ec3d2561b" class="i method">CreateKvStorageAccount</a>(<span class="r619 r">client</span>, <span class="r620 r">storageAccountName</span>, <a href="#c6d9122969a89489" class="i field">_storageResourceUrl1</a>);
        }
 
        <b>private</b> <a href="/Microsoft.Azure.KeyVault/A.html#f04dc708d8aab749" class="t t">StorageBundle</a> <a id="f7c0fd4ec3d2561b" href="R/f7c0fd4ec3d2561b.html" target="n" data-glyph="76,1" class="i method">CreateKvStorageAccount</a>(<a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="t t">KeyVaultClient</a> <span id="r621 rd" class="r621 r">client</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r622 rd" class="r622 r">storageAccountName</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r623 rd" class="r623 r">storageUrl</span>)
        {
            <a href="/Microsoft.Azure.KeyVault/A.html#f04dc708d8aab749" class="k">var</a> <span id="r624 rd" class="r624 r">storageBundle</span> = <span class="r621 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e7dc8224aa046664" class="i method">SetStorageAccountAsync</a>(<a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>, <span class="r622 r">storageAccountName</span>, <span class="r623 r">storageUrl</span>,
                <span class="s">&quot;key1&quot;</span>, <b>true</b>, <span class="s">&quot;P30D&quot;</span>, <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#9f2eac2a2d35915f" class="t constructor">StorageAccountAttributes</a>(<b>true</b>)).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r624 r">storageBundle</span>);
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r624 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#ebc1b9acc0d2aea6" class="i property">Id</a>);
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r624 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6eb9925ea291dcdb" class="i property">ActiveKeyName</a>);
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r624 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#fd6b0cdd2048df7d" class="i property">AutoRegenerateKey</a>);
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r624 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#aa3b614348ab7763" class="i property">RegenerationPeriod</a>);
            <span class="t t">Assert</span>.<span class="i method">Null</span>(<span class="r624 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#e4786a989be96404" class="i property">Tags</a>);
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r624 r">storageBundle</span>.<a href="/Microsoft.Azure.KeyVault/A.html#5ac96effb9ecbe45" class="i property">Attributes</a>.<a href="/Microsoft.Azure.KeyVault/A.html#69ea2bcdf77618b6" class="i property">Enabled</a>);
 
            <b>return</b> <span class="r624 r">storageBundle</span>;
        }
 
        <b>private</b> <a href="/Microsoft.Azure.KeyVault/A.html#588b368eb8f9c8e2" class="t t">SasDefinitionBundle</a> <a id="789aab58e19f23b4" href="R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">CreateKvStorageSasDef</a>(
            <a href="/Microsoft.Azure.KeyVault/A.html#7dc00214e066e5ca" class="t t">KeyVaultClient</a> <span id="r625 rd" class="r625 r">client</span>,
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r626 rd" class="r626 r">storageAccountName</span>,
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r627 rd" class="r627 r">sasDefName</span>)
        {
            <a href="#384f33a19b8b5cdf" class="i method">CreateKvStorageAccount</a>(<span class="r625 r">client</span>, <span class="r626 r">storageAccountName</span>);
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r628 rd" class="r628 r">sasType</span> = <span class="s">&quot;account&quot;</span>;
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r629 rd" class="r629 r">validityPeriod</span> = <span class="s">&quot;P10H&quot;</span>;
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r630 rd" class="r630 r">storageApiVer</span> = <span class="s">&quot;2016-05-31&quot;</span>;
            <a href="@0@System/A.html#991565dd25f47c90" class="k">var</a> <span id="r631 rd" class="r631 r">templateUri</span> = <a href="#b3bc089c49c76ea6" class="i method">GetSasDefinitionTemplateUri</a>(
                <span class="r632 r">blobUri</span>: <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#9d5604d4425b216f" class="i method">Format</a>(<span class="s">&quot;https://{0}.blob.core.windows.net/&quot;</span>, <span class="r626 r">storageAccountName</span>),
                <span class="r633 r">startTime</span>: <a href="@0@mscorlib/A.html#df6b1eba7461813b" class="t t">DateTime</a>.<a href="@0@mscorlib/A.html#b0d5e4c9a8d4ddac" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#11d38858dedad166" class="i method">ToString</a>(),
                <span class="r634 r">expiryTime</span>: <a href="@0@mscorlib/A.html#df6b1eba7461813b" class="t t">DateTime</a>.<a href="@0@mscorlib/A.html#b0d5e4c9a8d4ddac" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f5cb6edd98581ca2" class="i method">AddDays</a>(7).<a href="@0@mscorlib/A.html#11d38858dedad166" class="i method">ToString</a>(),
                <span class="r635 r">resourceType</span>: <span class="s">&quot;c&quot;</span>,  <span class="c">// &quot;container&quot;</span>
                <span class="r636 r">permissions</span>: <span class="s">&quot;rw&quot;</span>,  <span class="c">// read/write</span>
                <span class="r637 r">storageServiceEndpoint</span>: <span class="s">&quot;bq&quot;</span>,    <span class="c">// &quot;blob&quot;</span>
                <span class="r638 r">storageServiceVersion</span>: <span class="r630 r">storageApiVer</span>,
                <span class="r639 r">signature</span>: <span class="s">&quot;dummySig&quot;</span>);
 
            <a href="/Microsoft.Azure.KeyVault/A.html#588b368eb8f9c8e2" class="k">var</a> <span id="r640 rd" class="r640 r">response</span> = <span class="r625 r">client</span>.<a href="/Microsoft.Azure.KeyVault/A.html#52b91c2fb510818c" class="i method">SetSasDefinitionAsync</a>(
                <a href="#15820bb2d3a3ac10" class="i field">_vaultAddress</a>,
                <span class="r626 r">storageAccountName</span>,
                <span class="r627 r">sasDefName</span>,
                <span class="r631 r">templateUri</span>.<a href="@0@System/A.html#bf3caa11ab73e433" class="i method">ToString</a>(),
                <span class="r628 r">sasType</span>,
                <span class="r629 r">validityPeriod</span>,
                <b>new</b> <a href="/Microsoft.Azure.KeyVault/A.html#1c829c400d7d9340" class="t constructor">SasDefinitionAttributes</a>(<b>true</b>))
                .<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>()
                .<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
 
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r640 r">response</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6587807cd4cc8776" class="i property">Id</a>);
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r640 r">response</span>.<a href="/Microsoft.Azure.KeyVault/A.html#d0cc3f51421f50fe" class="i property">SecretId</a>);
            <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r640 r">response</span>.<a href="/Microsoft.Azure.KeyVault/A.html#c43d779e3dca7507" class="i property">TemplateUri</a>, <span class="r631 r">templateUri</span>.<a href="@0@System/A.html#bf3caa11ab73e433" class="i method">ToString</a>());
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r640 r">response</span>.<a href="/Microsoft.Azure.KeyVault/A.html#9f9df98c5457a8c2" class="i property">Attributes</a>.<a href="/Microsoft.Azure.KeyVault/A.html#72a0e39d4e187a4f" class="i property">Enabled</a>);
            <span class="t t">Assert</span>.<span class="i method">Null</span>(<span class="r640 r">response</span>.<a href="/Microsoft.Azure.KeyVault/A.html#69c895012e36eafd" class="i property">Tags</a>);
 
            <b>return</b> <span class="r640 r">response</span>;
        }
 
        <b>private class</b> <a id="324db430ed238f6b" href="R/324db430ed238f6b.html" target="n" data-glyph="4,1" class="t t"><span id="e2b9134c856a47f6">HttpClientFactory</span></a>
        {
            <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
            <span class="c">///</span><span class="c"> Mimics the implementation of the HttpClientFactory.Create method.</span>
            <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
            <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r641 r">handlers</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">Delegating handlers to act as the pipeline for the client being created.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
            <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">An http client instance with the specified delegating handlers as the inner pipeline.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
            <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">remarks</span><span class="c">&gt;</span>
            <span class="c">///</span><span class="c"> * The original implementation of this class is in the System.Net.Http.Formatting assembly, which</span>
            <span class="c">///</span><span class="c"> does not support .netcoreApp as a target framework.</span>
            <span class="c">///</span><span class="c"> * Since the class is private, no parameter validation is required. However, the provider</span>
            <span class="c">///</span><span class="c"> of the delegating handler array must behave, and ensure there are no preset inners.</span>
            <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">remarks</span><span class="c">&gt;</span>
            <b>public static</b> <span class="t t">HttpClient</span> <a id="0da6023ecf408a4a" href="R/0da6023ecf408a4a.html" target="n" data-glyph="72,2" class="i method">Create</a>(<span class="t t">DelegatingHandler</span>[] <span id="r641 rd" class="r641 r">handlers</span>)
            {
                <b>for</b> (<b>int</b> <span id="r642 rd" class="r642 r">idx</span> = 1; <span class="r642 r">idx</span> &lt; <span class="r641 r">handlers</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>; <span class="r642 r">idx</span>++)
                {
                    <span class="c">// set each previous handler as the inner of the subsequent one.</span>
                    <span class="c">// Last handler becomes the first handler in the pipeline.</span>
                    <span class="r641 r">handlers</span>[<span class="r642 r">idx</span>].<span class="i property">InnerHandler</span> = <span class="r641 r">handlers</span>[<span class="r642 r">idx</span> - 1];
                }
 
                <b>return</b> <b>new</b> <span class="t constructor">HttpClient</span>(<span class="r641 r">handlers</span>[<span class="r641 r">handlers</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a> - 1]);
            }
        }
 
        <b>private static bool</b> <a id="86a8dc90ba3ffe0b" href="R/86a8dc90ba3ffe0b.html" target="n" data-glyph="76,1" class="i method">VerifyDeletionRecoveryLevel</a>( <a href="/Microsoft.Azure.KeyVault/A.html#e8a7f2beef67b9de" class="t t">SecretAttributes</a> <span id="r643 rd" class="r643 r">attributes</span>, <b>bool</b> <span id="r644 rd" class="r644 r">isSoftDeleteEnabledVault</span> )
        {
            <b>return</b> !<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>(<span class="r643 r">attributes</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bd167e17276c2179" class="i property">RecoveryLevel</a>)
                &amp;&amp; <span class="r643 r">attributes</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bd167e17276c2179" class="i property">RecoveryLevel</a>.<a href="@0@mscorlib/A.html#2d51c212cb09178e" class="i method">ToLowerInvariant</a>().<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<a href="/Microsoft.Azure.KeyVault/A.html#ef48089692c1cd6e" class="t t">DeletionRecoveryLevel</a>.<a href="/Microsoft.Azure.KeyVault/A.html#9feecb291edcb76f" class="i field">Purgeable</a>.<a href="@0@mscorlib/A.html#2d51c212cb09178e" class="i method">ToLowerInvariant</a>())
                &amp;&amp; !(<span class="r644 r">isSoftDeleteEnabledVault</span> ^ <span class="r643 r">attributes</span>.<a href="/Microsoft.Azure.KeyVault/A.html#bd167e17276c2179" class="i property">RecoveryLevel</a>.<a href="@0@mscorlib/A.html#2d51c212cb09178e" class="i method">ToLowerInvariant</a>().<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<a href="/Microsoft.Azure.KeyVault/A.html#ef48089692c1cd6e" class="t t">DeletionRecoveryLevel</a>.<a href="/Microsoft.Azure.KeyVault/A.html#38b3accfa21b5c81" class="i field">Recoverable</a>.<a href="@0@mscorlib/A.html#2d51c212cb09178e" class="i method">ToLowerInvariant</a>()));
        }
 
        <b>private static bool</b> <a id="354b1e47c92614c0" href="R/354b1e47c92614c0.html" target="n" data-glyph="76,1" class="i method">VerifyDeletionRecoveryLevel</a>(<a href="/Microsoft.Azure.KeyVault/A.html#94343e9880a92aee" class="t t">KeyAttributes</a> <span id="r645 rd" class="r645 r">attributes</span>, <b>bool</b> <span id="r646 rd" class="r646 r">isSoftDeleteEnabledVault</span>)
        {
            <b>return</b> !<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>(<span class="r645 r">attributes</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6f61b8808869ab29" class="i property">RecoveryLevel</a>)
                &amp;&amp; <span class="r645 r">attributes</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6f61b8808869ab29" class="i property">RecoveryLevel</a>.<a href="@0@mscorlib/A.html#2d51c212cb09178e" class="i method">ToLowerInvariant</a>().<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<a href="/Microsoft.Azure.KeyVault/A.html#ef48089692c1cd6e" class="t t">DeletionRecoveryLevel</a>.<a href="/Microsoft.Azure.KeyVault/A.html#9feecb291edcb76f" class="i field">Purgeable</a>.<a href="@0@mscorlib/A.html#2d51c212cb09178e" class="i method">ToLowerInvariant</a>())
                &amp;&amp; !(<span class="r646 r">isSoftDeleteEnabledVault</span> ^ <span class="r645 r">attributes</span>.<a href="/Microsoft.Azure.KeyVault/A.html#6f61b8808869ab29" class="i property">RecoveryLevel</a>.<a href="@0@mscorlib/A.html#2d51c212cb09178e" class="i method">ToLowerInvariant</a>().<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<a href="/Microsoft.Azure.KeyVault/A.html#ef48089692c1cd6e" class="t t">DeletionRecoveryLevel</a>.<a href="/Microsoft.Azure.KeyVault/A.html#38b3accfa21b5c81" class="i field">Recoverable</a>.<a href="@0@mscorlib/A.html#2d51c212cb09178e" class="i method">ToLowerInvariant</a>()));
        }
 
        <b>private static bool</b> <a id="7a03c8e71087b771" href="R/7a03c8e71087b771.html" target="n" data-glyph="76,1" class="i method">VerifyDeletionRecoveryLevel</a>(<a href="/Microsoft.Azure.KeyVault/A.html#e7975c95ca0c7014" class="t t">CertificateAttributes</a> <span id="r647 rd" class="r647 r">attributes</span>, <b>bool</b> <span id="r648 rd" class="r648 r">isSoftDeleteEnabledVault</span>)
        {
            <b>return</b> !<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@0@mscorlib/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>(<span class="r647 r">attributes</span>.<a href="/Microsoft.Azure.KeyVault/A.html#b219ad6476cca16c" class="i property">RecoveryLevel</a>)
                &amp;&amp; <span class="r647 r">attributes</span>.<a href="/Microsoft.Azure.KeyVault/A.html#b219ad6476cca16c" class="i property">RecoveryLevel</a>.<a href="@0@mscorlib/A.html#2d51c212cb09178e" class="i method">ToLowerInvariant</a>().<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<a href="/Microsoft.Azure.KeyVault/A.html#ef48089692c1cd6e" class="t t">DeletionRecoveryLevel</a>.<a href="/Microsoft.Azure.KeyVault/A.html#9feecb291edcb76f" class="i field">Purgeable</a>.<a href="@0@mscorlib/A.html#2d51c212cb09178e" class="i method">ToLowerInvariant</a>())
                &amp;&amp; !(<span class="r648 r">isSoftDeleteEnabledVault</span> ^ <span class="r647 r">attributes</span>.<a href="/Microsoft.Azure.KeyVault/A.html#b219ad6476cca16c" class="i property">RecoveryLevel</a>.<a href="@0@mscorlib/A.html#2d51c212cb09178e" class="i method">ToLowerInvariant</a>().<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<a href="/Microsoft.Azure.KeyVault/A.html#ef48089692c1cd6e" class="t t">DeletionRecoveryLevel</a>.<a href="/Microsoft.Azure.KeyVault/A.html#38b3accfa21b5c81" class="i field">Recoverable</a>.<a href="@0@mscorlib/A.html#2d51c212cb09178e" class="i method">ToLowerInvariant</a>()));
        }
 
        <b>private static</b> <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <a id="b3bc089c49c76ea6" href="R/b3bc089c49c76ea6.html" target="n" data-glyph="76,1" class="i method">GetSasDefinitionTemplateUri</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r632 rd" class="r632 r">blobUri</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r633 rd" class="r633 r">startTime</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r634 rd" class="r634 r">expiryTime</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r635 rd" class="r635 r">resourceType</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r636 rd" class="r636 r">permissions</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r637 rd" class="r637 r">storageServiceEndpoint</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r638 rd" class="r638 r">storageServiceVersion</span>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r639 rd" class="r639 r">signature</span>)
        {
            <a href="@0@mscorlib/A.html#adf60ee46ebd299f" class="t t">StringBuilder</a> <span id="r649 rd" class="r649 r">builder</span> = <b>new</b> <a href="@0@mscorlib/A.html#57b9d3a70c2aba34" class="t constructor">StringBuilder</a>(<span class="r632 r">blobUri</span>);
            <span class="r649 r">builder</span>.<a href="@0@mscorlib/A.html#ad46fb2c09cab59a" class="i method">AppendFormat</a>(<span class="s">&quot;?sv={0}&quot;</span>, <span class="r638 r">storageServiceVersion</span>);
            <span class="r649 r">builder</span>.<a href="@0@mscorlib/A.html#ad46fb2c09cab59a" class="i method">AppendFormat</a>(<span class="s">&quot;&amp;st={0}&quot;</span>, <span class="r633 r">startTime</span>);
            <span class="r649 r">builder</span>.<a href="@0@mscorlib/A.html#ad46fb2c09cab59a" class="i method">AppendFormat</a>(<span class="s">&quot;&amp;se={0}&quot;</span>, <span class="r634 r">expiryTime</span>);
            <span class="r649 r">builder</span>.<a href="@0@mscorlib/A.html#ad46fb2c09cab59a" class="i method">AppendFormat</a>(<span class="s">&quot;&amp;sr={0}&quot;</span>, <span class="r635 r">resourceType</span>);
            <span class="r649 r">builder</span>.<a href="@0@mscorlib/A.html#ad46fb2c09cab59a" class="i method">AppendFormat</a>(<span class="s">&quot;&amp;sp={0}&quot;</span>, <span class="r636 r">permissions</span>);
            <span class="r649 r">builder</span>.<a href="@0@mscorlib/A.html#ad46fb2c09cab59a" class="i method">AppendFormat</a>(<span class="s">&quot;&amp;ss={0}&quot;</span>, <span class="r637 r">storageServiceEndpoint</span>);
            <span class="r649 r">builder</span>.<a href="@0@mscorlib/A.html#ad46fb2c09cab59a" class="i method">AppendFormat</a>(<span class="s">&quot;&amp;sig={0}&quot;</span>, <span class="r639 r">signature</span>);
 
            <b>return</b> <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="r649 r">builder</span>.<a href="@0@mscorlib/A.html#5a97da49a158a3c9" class="i method">ToString</a>());
        }
<span class="k preprocess">#</span><span class="k preprocess">endregion</span>
    }
}
 
<span class="k preprocess">#</span><span class="k preprocess">endif</span>
</pre></td></tr></table></div></body></html>

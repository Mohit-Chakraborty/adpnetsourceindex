<!DOCTYPE html>
<html><head><title>ConfigurationClientBenchmark.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(67);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Azure.Data.AppConfiguration.Performance/ConfigurationClientBenchmark.cs" target="_top">ConfigurationClientBenchmark.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Azure.Data.AppConfiguration.Performance" target="_top">Azure.Data.AppConfiguration.Performance.csproj</a> (Azure.Data.AppConfiguration.Performance)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License.</span>
 
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Net</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Net</span>.<span class="i n">Http</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Text</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>.<span class="i n">Tasks</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Core</span>.<span class="i n">Pipeline</span>;
<b>using</b> <span class="i n">BenchmarkDotNet</span>.<span class="i n">Attributes</span>;
 
<b>namespace</b> <span class="i n">Azure</span>.<span class="i n">Data</span>.<span class="i n">AppConfiguration</span>.<span class="i n">Performance</span>
{
    [<span class="t constructor">MemoryDiagnoser</span>]
    <b>public class</b> <a id="cafff25aa87d4474" href="R/../../0000000000.html" target="n" data-glyph="0,0" class="t t"><span id="9e9b249e2b0e2062">ConfigurationClientBenchmark</span></a>
    {
        <b>private static readonly string</b> <a id="1bbec664d670fb37" href="R/1bbec664d670fb37.html" target="n" data-glyph="46,1" class="i field">s_mockConnectionString</a> = <span class="s">&quot;Endpoint=https://contoso.appconfig.io;Id=b1d9b31;Secret=aabbccdd&quot;</span>;
 
        <b>private static readonly</b> <a href="#5a84d8bc5e6abc72" class="t t">MockClientHandler</a> <a id="6fcf4c14fbe1ce91" href="R/6fcf4c14fbe1ce91.html" target="n" data-glyph="46,1" class="i field">s_getResponseMessage</a> = <b>new</b> <a href="#fa6b086510ed86c9" class="t constructor">MockClientHandler</a>(<span id="r0 rd" class="r0 r">request</span> =&gt; <b>new</b> <span class="t constructor">HttpResponseMessage</span>((<a href="@0@System/A.html#9b95c882b40ef96e" class="t t">HttpStatusCode</a>)200)
        {
            <span class="i property">Content</span> = <b>new</b> <span class="t constructor">ByteArrayContent</span>(<a href="#8a928812116e5b0b" class="i field">s_getResponseBytes</a>)
        });
 
        <b>private static readonly</b> <a href="/Azure.Data.AppConfiguration/A.html#7752b7247f4bc364" class="t t">ConfigurationClient</a> <a id="1971ba89a9a8cfac" href="R/1971ba89a9a8cfac.html" target="n" data-glyph="46,1" class="i field">s_configurationClient</a> = <b>new</b> <a href="/Azure.Data.AppConfiguration/A.html#52132ee70d2bd97d" class="t constructor">ConfigurationClient</a>(<a href="#1bbec664d670fb37" class="i field">s_mockConnectionString</a>, <b>new</b> <a href="/Azure.Data.AppConfiguration/A.html#dac122c703423fe2" class="t constructor">ConfigurationClientOptions</a>()
        {
            <a href="/Azure.Core/A.html#d1bdf798bcd1c508" class="i property">Transport</a> = <b>new</b> <a href="/Azure.Core/A.html#2f786ba6530ee31f" class="t constructor">HttpClientTransport</a>(<b>new</b> <span class="t constructor">HttpClient</span>(<a href="#6fcf4c14fbe1ce91" class="i field">s_getResponseMessage</a>))
        });
 
        <b>private static readonly byte</b>[] <a id="8a928812116e5b0b" href="R/8a928812116e5b0b.html" target="n" data-glyph="46,1" class="i field">s_getResponseBytes</a> = <a href="@0@mscorlib/A.html#3b6090c501893c25" class="t t">Encoding</a>.<a href="@0@mscorlib/A.html#a10eb90a3d884500" class="i property">UTF8</a>.<a href="@0@mscorlib/A.html#83f2d2c6f22db1a9" class="i method">GetBytes</a>(
<span class="s">@&quot;{
  &quot;&quot;etag&quot;&quot;: &quot;&quot;4f6dd610dd5e4deebc7fbaef685fb903&quot;&quot;,
  &quot;&quot;key&quot;&quot;: &quot;&quot;key&quot;&quot;,
  &quot;&quot;label&quot;&quot;: &quot;&quot;label&quot;&quot;,
  &quot;&quot;content_type&quot;&quot;: null,
  &quot;&quot;value&quot;&quot;: &quot;&quot;example value&quot;&quot;,
  &quot;&quot;last_modified&quot;&quot;: &quot;&quot;2017-12-05T02:41:26+00:00&quot;&quot;,
  &quot;&quot;locked&quot;&quot;: false,
  &quot;&quot;tags&quot;&quot;: {
    &quot;&quot;t1&quot;&quot;: &quot;&quot;value1&quot;&quot;,
    &quot;&quot;t2&quot;&quot;: &quot;&quot;value2&quot;&quot;
  }
}&quot;</span>);
 
        [<span class="t constructor">Benchmark</span>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="a28c511c628523a7" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetAsync</a>()
        {
            <b>await</b> <a href="#1971ba89a9a8cfac" class="i field">s_configurationClient</a>.<a href="/Azure.Data.AppConfiguration/A.html#e2f2119533d1cf86" class="i method">GetConfigurationSettingAsync</a>(<span class="s">&quot;key&quot;</span>);
        }
 
        <b>private class</b> <a id="5a84d8bc5e6abc72" href="R/5a84d8bc5e6abc72.html" target="n" data-glyph="4,1" class="t t">MockClientHandler</a> : <span class="t t">HttpClientHandler</span>
        {
            <b>private readonly</b> <a href="@0@mscorlib/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<span class="t t">HttpRequestMessage</span>, <span class="t t">HttpResponseMessage</span>&gt; <a id="8b092e22248d5a76" href="R/8b092e22248d5a76.html" target="n" data-glyph="46,2" class="i field">_responseMessage</a>;
 
            <b>public</b> <a id="fa6b086510ed86c9" href="R/fa6b086510ed86c9.html" target="n" data-glyph="72,2" class="t constructor">MockClientHandler</a>(<a href="@0@mscorlib/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<span class="t t">HttpRequestMessage</span>, <span class="t t">HttpResponseMessage</span>&gt; <span id="r1 rd" class="r1 r">responseMessage</span>)
            {
                <a href="#8b092e22248d5a76" class="i field">_responseMessage</a> = <span class="r1 r">responseMessage</span>;
            }
 
            <b>protected override</b> <a href="@0@mscorlib/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<span class="t t">HttpResponseMessage</span>&gt; <a id="8dab20a8d6be36e9" href="R/8dab20a8d6be36e9.html" target="n" data-glyph="75,2" class="i method">SendAsync</a>(<span class="t t">HttpRequestMessage</span> <span id="r2 rd" class="r2 r">request</span>, <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r3 rd" class="r3 r">cancellationToken</span>)
            {
                <b>return</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a>.<a href="@0@mscorlib/A.html#11a386e7d7cae64a" class="i method">FromResult</a>(<a href="#8b092e22248d5a76" class="i field">_responseMessage</a>(<span class="r2 r">request</span>));
            }
        }
    }
}
</pre></td></tr></table></div></body></html>

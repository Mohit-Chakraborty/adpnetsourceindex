<!DOCTYPE html>
<html><head><title>UtilitiesInternal.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(557);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Microsoft.Azure.Batch/UtilitiesInternal.cs" target="_top">UtilitiesInternal.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Microsoft.Azure.Batch" target="_top">Microsoft.Azure.Batch.csproj</a> (Microsoft.Azure.Batch)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License. See License.txt in the project root for license information.</span>
 
﻿<b>namespace</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Batch</span>
{
    <b>using</b> <span class="i n">System</span>;
    <b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
    <b>using</b> <span class="i n">System</span>.<span class="i n">IO</span>;
    <b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
    <b>using</b> <span class="i n">System</span>.<span class="i n">Text</span>;
    <b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>.<span class="i n">Tasks</span>;
    <b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>;
    <b>using</b> <span class="i n">Common</span>;
    <b>using</b> <span class="i n">Utils</span>;
 
    <b>internal static class</b> <a id="75d406733ca3f619" href="R/75d406733ca3f619.html" target="n" data-glyph="2,0" class="t t">UtilitiesInternal</a>
    {
        <b>internal static</b> <span class="r0 r t">TTo</span> <a id="ee3c8196baa19ae2" href="R/ee3c8196baa19ae2.html" target="n" data-glyph="74,1" class="i method">MapEnum</a>&lt;<span id="r1 rd t" class="r1 r t">TFrom</span>, <span id="r0 rd t" class="r0 r t">TTo</span>&gt;(<span class="r1 r t">TFrom</span> <span id="r2 rd" class="r2 r">otherEnum</span>)
            <b>where</b> <span class="r0 r t">TTo</span> : <b>struct
            where</b> <span class="r1 r t">TFrom</span> : <b>struct</b>
        {
            <span class="r0 r t">TTo</span> <span id="r3 rd" class="r3 r">result</span> = (<span class="r0 r t">TTo</span>)<a href="@0@mscorlib/A.html#36729210e317a805" class="t t">Enum</a>.<a href="@0@mscorlib/A.html#25a49abd9da136dd" class="i method">Parse</a>(<b>typeof</b>(<span class="r0 r t">TTo</span>), <span class="r2 r">otherEnum</span>.<a href="@0@mscorlib/A.html#74fc14588f65e616" class="i method">ToString</a>(), <span class="r4 r">ignoreCase</span>: <b>true</b>);
            <b>return</b> <span class="r3 r">result</span>;
        }
 
        <b>internal static</b> <span class="r5 r t">TTo</span>? <a id="45e95c25dc6d2cba" href="R/45e95c25dc6d2cba.html" target="n" data-glyph="74,1" class="i method">MapNullableEnum</a>&lt;<span id="r6 rd t" class="r6 r t">TFrom</span>, <span id="r5 rd t" class="r5 r t">TTo</span>&gt;(<span class="r6 r t">TFrom</span>? <span id="r7 rd" class="r7 r">otherEnum</span>)
            <b>where</b> <span class="r5 r t">TTo</span> : <b>struct
            where</b> <span class="r6 r t">TFrom</span> : <b>struct</b>
        {
            <b>if</b> (<span class="r7 r">otherEnum</span> == <b>null</b>)
            {
                <b>return</b> <b>null</b>;
            }
 
            <b>return</b> <a href="#75d406733ca3f619" class="t t">UtilitiesInternal</a>.<a href="#ee3c8196baa19ae2" class="i method">MapEnum</a>&lt;<span class="r6 r t">TFrom</span>, <span class="r5 r t">TTo</span>&gt;(<span class="r7 r">otherEnum</span>.<a href="@0@mscorlib/A.html#7b38d1fa76071c95" class="i property">Value</a>);
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Convert an enum of type CertificateVisibility to a List of Protocol.Models.CertificateVisibility.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r8 r">value</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The value to convert.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The enum value to convert into list format.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>internal static</b> <a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<span class="i n">Protocol</span>.<span class="i n">Models</span>.<a href="GeneratedProtocol/Models/CertificateVisibility.cs.html#ce2d4b572dc37855" class="t t">CertificateVisibility</a>&gt; <a id="67e8c640ac92e579" href="R/67e8c640ac92e579.html" target="n" data-glyph="74,1" class="i method">CertificateVisibilityToList</a>(<span class="i n">Common</span>.<a href="Common/Enumerations/CertificateVisibility.cs.html#16d96b39bcaf86be" class="t t">CertificateVisibility</a>? <span id="r8 rd" class="r8 r">value</span>)
        {
            <a href="@0@mscorlib/A.html#cf7f4095e4de7646" class="t t">List</a>&lt;<span class="i n">Protocol</span>.<span class="i n">Models</span>.<a href="GeneratedProtocol/Models/CertificateVisibility.cs.html#ce2d4b572dc37855" class="t t">CertificateVisibility</a>&gt; <span id="r9 rd" class="r9 r">result</span> = <b>new</b> <a href="@0@mscorlib/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<span class="i n">Protocol</span>.<span class="i n">Models</span>.<a href="GeneratedProtocol/Models/CertificateVisibility.cs.html#ce2d4b572dc37855" class="t t">CertificateVisibility</a>&gt;();
            <b>if</b> (<span class="r8 r">value</span>.<a href="@0@mscorlib/A.html#7bbe60e33e857298" class="i property">HasValue</a>)
            {
                <a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<span class="i n">Common</span>.<a href="Common/Enumerations/CertificateVisibility.cs.html#16d96b39bcaf86be" class="t t">CertificateVisibility</a>&gt; <span id="r10 rd" class="r10 r">enumValues</span> = <b>new</b> <a href="@0@mscorlib/A.html#d2ac2c19c9cf1d44" class="t constructor">List</a>&lt;<span class="i n">Common</span>.<a href="Common/Enumerations/CertificateVisibility.cs.html#16d96b39bcaf86be" class="t t">CertificateVisibility</a>&gt;(
                    (<span class="i n">Common</span>.<a href="Common/Enumerations/CertificateVisibility.cs.html#16d96b39bcaf86be" class="t t">CertificateVisibility</a>[])<a href="@0@mscorlib/A.html#36729210e317a805" class="t t">Enum</a>.<a href="@0@mscorlib/A.html#20fa909ef3233d20" class="i method">GetValues</a>(<b>typeof</b>(<span class="i n">Common</span>.<a href="Common/Enumerations/CertificateVisibility.cs.html#16d96b39bcaf86be" class="t t">CertificateVisibility</a>)));
 
                <span class="r10 r">enumValues</span>.<a href="@0@mscorlib/A.html#12ab6cfa5ca2ceec" class="i method">Remove</a>(<span class="i n">Common</span>.<a href="Common/Enumerations/CertificateVisibility.cs.html#16d96b39bcaf86be" class="t t">CertificateVisibility</a>.<a href="Common/Enumerations/CertificateVisibility.cs.html#b2ceef36a388ec1b" class="i field">None</a>); <span class="c">//None is an artifact of the OM so skip it</span>
 
                <b>foreach</b> (<span class="i n">Common</span>.<a href="Common/Enumerations/CertificateVisibility.cs.html#16d96b39bcaf86be" class="t t">CertificateVisibility</a> <span id="r11 rd" class="r11 r">enumValue</span> <b>in</b> <span class="r10 r">enumValues</span>)
                {
                    <b>if</b> (<span class="r8 r">value</span>.<a href="@0@mscorlib/A.html#7b38d1fa76071c95" class="i property">Value</a>.<a href="@0@mscorlib/A.html#9cd73f33d2df3074" class="i method">HasFlag</a>(<span class="r11 r">enumValue</span>))
                    {
                        <span class="i n">Protocol</span>.<span class="i n">Models</span>.<a href="GeneratedProtocol/Models/CertificateVisibility.cs.html#ce2d4b572dc37855" class="t t">CertificateVisibility</a> <span id="r12 rd" class="r12 r">protoEnumValue</span> = <a href="#75d406733ca3f619" class="t t">UtilitiesInternal</a>.<a href="#ee3c8196baa19ae2" class="i method">MapEnum</a>&lt;<span class="i n">Common</span>.<a href="Common/Enumerations/CertificateVisibility.cs.html#16d96b39bcaf86be" class="t t">CertificateVisibility</a>, <span class="i n">Protocol</span>.<span class="i n">Models</span>.<a href="GeneratedProtocol/Models/CertificateVisibility.cs.html#ce2d4b572dc37855" class="t t">CertificateVisibility</a>&gt;(<span class="r11 r">enumValue</span>);
                        <span class="r9 r">result</span>.<a href="@0@mscorlib/A.html#9cc11588bffd57c1" class="i method">Add</a>(<span class="r12 r">protoEnumValue</span>);
                    }
                }
            }
 
            <b>return</b> <span class="r9 r">result</span>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Convert an enum of type AccessScope to a List of Protocol.Models.AccessScope.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r13 r">value</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The value to convert.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The enum value to convert into list format.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>internal static</b> <a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<span class="i n">Protocol</span>.<span class="i n">Models</span>.<a href="GeneratedProtocol/Models/AccessScope.cs.html#38075684d2766d34" class="t t">AccessScope</a>&gt; <a id="eb70aecb8dad74c8" href="R/eb70aecb8dad74c8.html" target="n" data-glyph="74,1" class="i method">AccessScopeToList</a>(<span class="i n">Common</span>.<a href="Common/Enumerations/AccessScope.cs.html#df5b1be052f6af1c" class="t t">AccessScope</a> <span id="r13 rd" class="r13 r">value</span>)
        {
            <a href="@0@mscorlib/A.html#cf7f4095e4de7646" class="t t">List</a>&lt;<span class="i n">Protocol</span>.<span class="i n">Models</span>.<a href="GeneratedProtocol/Models/AccessScope.cs.html#38075684d2766d34" class="t t">AccessScope</a>&gt; <span id="r14 rd" class="r14 r">result</span> = <b>new</b> <a href="@0@mscorlib/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<span class="i n">Protocol</span>.<span class="i n">Models</span>.<a href="GeneratedProtocol/Models/AccessScope.cs.html#38075684d2766d34" class="t t">AccessScope</a>&gt;();
 
            <a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<span class="i n">Common</span>.<a href="Common/Enumerations/AccessScope.cs.html#df5b1be052f6af1c" class="t t">AccessScope</a>&gt; <span id="r15 rd" class="r15 r">enumValues</span> = <b>new</b> <a href="@0@mscorlib/A.html#d2ac2c19c9cf1d44" class="t constructor">List</a>&lt;<span class="i n">Common</span>.<a href="Common/Enumerations/AccessScope.cs.html#df5b1be052f6af1c" class="t t">AccessScope</a>&gt;((<span class="i n">Common</span>.<a href="Common/Enumerations/AccessScope.cs.html#df5b1be052f6af1c" class="t t">AccessScope</a>[])<a href="@0@mscorlib/A.html#36729210e317a805" class="t t">Enum</a>.<a href="@0@mscorlib/A.html#20fa909ef3233d20" class="i method">GetValues</a>(<b>typeof</b>(<span class="i n">Common</span>.<a href="Common/Enumerations/AccessScope.cs.html#df5b1be052f6af1c" class="t t">AccessScope</a>)));
 
            <span class="r15 r">enumValues</span>.<a href="@0@mscorlib/A.html#12ab6cfa5ca2ceec" class="i method">Remove</a>(<span class="i n">Common</span>.<a href="Common/Enumerations/AccessScope.cs.html#df5b1be052f6af1c" class="t t">AccessScope</a>.<a href="Common/Enumerations/AccessScope.cs.html#e7e6782778a2535a" class="i field">None</a>); <span class="c">//None is an artifact of the OM so skip it</span>
 
            <b>foreach</b> (<span class="i n">Common</span>.<a href="Common/Enumerations/AccessScope.cs.html#df5b1be052f6af1c" class="t t">AccessScope</a> <span id="r16 rd" class="r16 r">enumValue</span> <b>in</b> <span class="r15 r">enumValues</span>)
            {
                <b>if</b> (<span class="r13 r">value</span>.<a href="@0@mscorlib/A.html#9cd73f33d2df3074" class="i method">HasFlag</a>(<span class="r16 r">enumValue</span>))
                {
                    <span class="i n">Protocol</span>.<span class="i n">Models</span>.<a href="GeneratedProtocol/Models/AccessScope.cs.html#38075684d2766d34" class="t t">AccessScope</a> <span id="r17 rd" class="r17 r">protoEnumValue</span> = <a href="#75d406733ca3f619" class="t t">UtilitiesInternal</a>.<a href="#ee3c8196baa19ae2" class="i method">MapEnum</a>&lt;<span class="i n">Common</span>.<a href="Common/Enumerations/AccessScope.cs.html#df5b1be052f6af1c" class="t t">AccessScope</a>, <span class="i n">Protocol</span>.<span class="i n">Models</span>.<a href="GeneratedProtocol/Models/AccessScope.cs.html#38075684d2766d34" class="t t">AccessScope</a>&gt;(<span class="r16 r">enumValue</span>);
                    <span class="r14 r">result</span>.<a href="@0@mscorlib/A.html#9cc11588bffd57c1" class="i method">Add</a>(<span class="r17 r">protoEnumValue</span>);
                }
            }
 
            <b>return</b> <span class="r14 r">result</span>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Parse enum values for type CertificateVisibility.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r18 r">value</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The value to parse.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The enum value.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>internal static</b> <span class="i n">Common</span>.<a href="Common/Enumerations/CertificateVisibility.cs.html#16d96b39bcaf86be" class="t t">CertificateVisibility</a>? <a id="5fa146aa3198ea2e" href="R/5fa146aa3198ea2e.html" target="n" data-glyph="74,1" class="i method">ParseCertificateVisibility</a>(<a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<span class="i n">Protocol</span>.<span class="i n">Models</span>.<a href="GeneratedProtocol/Models/CertificateVisibility.cs.html#ce2d4b572dc37855" class="t t">CertificateVisibility</a>&gt; <span id="r18 rd" class="r18 r">value</span>)
        {
            <b>if</b> (<span class="r18 r">value</span> == <b>null</b>)
            {
                <b>return</b> <b>null</b>;
            }
 
            <span class="i n">Common</span>.<a href="Common/Enumerations/CertificateVisibility.cs.html#16d96b39bcaf86be" class="t t">CertificateVisibility</a> <span id="r19 rd" class="r19 r">flags</span> = <a href="Common/Enumerations/CertificateVisibility.cs.html#16d96b39bcaf86be" class="t t">CertificateVisibility</a>.<a href="Common/Enumerations/CertificateVisibility.cs.html#b2ceef36a388ec1b" class="i field">None</a>;
 
            <b>foreach</b> (<span class="i n">Protocol</span>.<span class="i n">Models</span>.<a href="GeneratedProtocol/Models/CertificateVisibility.cs.html#ce2d4b572dc37855" class="t t">CertificateVisibility</a> <span id="r20 rd" class="r20 r">visibility</span> <b>in</b> <span class="r18 r">value</span>)
            {
                <span class="i n">Common</span>.<a href="Common/Enumerations/CertificateVisibility.cs.html#16d96b39bcaf86be" class="t t">CertificateVisibility</a> <span id="r21 rd" class="r21 r">convertedEnum</span> = <a href="#75d406733ca3f619" class="t t">UtilitiesInternal</a>.<a href="#ee3c8196baa19ae2" class="i method">MapEnum</a>&lt;<span class="i n">Protocol</span>.<span class="i n">Models</span>.<a href="GeneratedProtocol/Models/CertificateVisibility.cs.html#ce2d4b572dc37855" class="t t">CertificateVisibility</a>, <span class="i n">Common</span>.<a href="Common/Enumerations/CertificateVisibility.cs.html#16d96b39bcaf86be" class="t t">CertificateVisibility</a>&gt;(<span class="r20 r">visibility</span>);
 
                <span class="r19 r">flags</span> |= <span class="r21 r">convertedEnum</span>;
            }
 
            <b>return</b> <span class="r19 r">flags</span>;
        }
 
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Parse enum values for type AccessScope.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&#39;</span><span class="r22 r">value</span><span class="c">&#39;</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The value to parse.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> The enum value.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>internal static</b> <span class="i n">Common</span>.<a href="Common/Enumerations/AccessScope.cs.html#df5b1be052f6af1c" class="t t">AccessScope</a> <a id="b6585dc2efc94095" href="R/b6585dc2efc94095.html" target="n" data-glyph="74,1" class="i method">ParseAccessScope</a>(<a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<span class="i n">Protocol</span>.<span class="i n">Models</span>.<a href="GeneratedProtocol/Models/AccessScope.cs.html#38075684d2766d34" class="t t">AccessScope</a>&gt; <span id="r22 rd" class="r22 r">value</span>)
        {
            <b>if</b> (<span class="r22 r">value</span> == <b>null</b>)
            {
                <b>return</b> <span class="i n">Common</span>.<a href="Common/Enumerations/AccessScope.cs.html#df5b1be052f6af1c" class="t t">AccessScope</a>.<a href="Common/Enumerations/AccessScope.cs.html#e7e6782778a2535a" class="i field">None</a>;
            }
 
            <span class="i n">Common</span>.<a href="Common/Enumerations/AccessScope.cs.html#df5b1be052f6af1c" class="t t">AccessScope</a> <span id="r23 rd" class="r23 r">flags</span> = <a href="Common/Enumerations/AccessScope.cs.html#df5b1be052f6af1c" class="t t">AccessScope</a>.<a href="Common/Enumerations/AccessScope.cs.html#e7e6782778a2535a" class="i field">None</a>;
 
            <b>foreach</b> (<span class="i n">Protocol</span>.<span class="i n">Models</span>.<a href="GeneratedProtocol/Models/AccessScope.cs.html#38075684d2766d34" class="t t">AccessScope</a> <span id="r24 rd" class="r24 r">visibility</span> <b>in</b> <span class="r22 r">value</span>)
            {
                <span class="i n">Common</span>.<a href="Common/Enumerations/AccessScope.cs.html#df5b1be052f6af1c" class="t t">AccessScope</a> <span id="r25 rd" class="r25 r">convertedEnum</span> = <a href="#75d406733ca3f619" class="t t">UtilitiesInternal</a>.<a href="#ee3c8196baa19ae2" class="i method">MapEnum</a>&lt;<span class="i n">Protocol</span>.<span class="i n">Models</span>.<a href="GeneratedProtocol/Models/AccessScope.cs.html#38075684d2766d34" class="t t">AccessScope</a>, <span class="i n">Common</span>.<a href="Common/Enumerations/AccessScope.cs.html#df5b1be052f6af1c" class="t t">AccessScope</a>&gt;(<span class="r24 r">visibility</span>);
                
                <span class="r23 r">flags</span> |= <span class="r25 r">convertedEnum</span>;
            }
 
            <b>return</b> <span class="r23 r">flags</span>;
        }
 
 
        <b>internal static void</b> <a id="03c23cf0b29f702a" href="R/03c23cf0b29f702a.html" target="n" data-glyph="74,1" class="i method">ThrowOnUnbound</a>(<a href="BindingState.cs.html#8e9f6d0db7ea871e" class="t t">BindingState</a> <span id="r26 rd" class="r26 r">bindingState</span>)
        {
            <b>if</b> (<a href="BindingState.cs.html#8e9f6d0db7ea871e" class="t t">BindingState</a>.<a href="BindingState.cs.html#279468bb89f43d41" class="i field">Unbound</a> == <span class="r26 r">bindingState</span>)
            {
                <b>throw</b> <a href="#7dd1b729cf2f40c1" class="i property">OperationForbiddenOnUnboundObjects</a>;
            }
        }
        
        <b>internal static</b> <span class="r27 r t">TWrappedItem</span> <a id="8fc6276156af9d7e" href="R/8fc6276156af9d7e.html" target="n" data-glyph="74,1" class="i method">CreateObjectWithNullCheck</a>&lt;<span id="r28 rd t" class="r28 r t">TItem</span>, <span id="r27 rd t" class="r27 r t">TWrappedItem</span>&gt;(<span class="r28 r t">TItem</span> <span id="r29 rd" class="r29 r">item</span>, <a href="@0@mscorlib/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<span class="r28 r t">TItem</span>, <span class="r27 r t">TWrappedItem</span>&gt; <span id="r30 rd" class="r30 r">factory</span>, <a href="@0@mscorlib/A.html#87d60abb7092d5a4" class="t t">Func</a>&lt;<span class="r27 r t">TWrappedItem</span>&gt; <span id="r31 rd" class="r31 r">nullFactory</span> = <b>null</b>)
            <b>where</b> <span class="r28 r t">TItem</span> : <b>class
            where</b> <span class="r27 r t">TWrappedItem</span> : <b>class</b>
        {
            <b>if</b> (<span class="r29 r">item</span> == <b>null</b>)
            {
                <b>if</b> (<span class="r31 r">nullFactory</span> != <b>null</b>)
                {
                    <b>return</b> <span class="r31 r">nullFactory</span>();
                }
                <b>else</b>
                {
                    <b>return</b> <b>null</b>;
                }
            }
            <b>else</b>
            {
                <b>return</b> <span class="r30 r">factory</span>(<span class="r29 r">item</span>);
            }
        }
        
        <span class="k preprocess">#</span><span class="k preprocess">region</span> Collection conversions
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Converts a collection of object model items into a corresponding collection of transport layer items.</span>
        <span class="c">///</span><span class="c"> If the </span><span class="c">&lt;</span><span class="c">paramref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r32 r">items</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> collection is null, null is returned.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> A collection of type </span><span class="c">&lt;</span><span class="c">typeparam</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r33 r t">T</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> generated by calling </span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="ITransportObjectProvider.cs.html#d5ad5af7e7b4d7fc" class="t t">ITransportObjectProvider</a>{<span class="r34 r t">T</span>}.<a href="ITransportObjectProvider.cs.html#3a9e3bdeca63e8e8" class="i method">GetTransportObject</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> on each element of the input collection.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>internal static</b> <a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<span class="r33 r t">T</span>&gt; <a id="707db0581de83237" href="R/707db0581de83237.html" target="n" data-glyph="74,1" class="i method">ConvertToProtocolCollection</a>&lt;<span id="r33 rd t" class="r33 r t">T</span>&gt;(<a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="ITransportObjectProvider.cs.html#d5ad5af7e7b4d7fc" class="t t">ITransportObjectProvider</a>&lt;<span class="r33 r t">T</span>&gt;&gt; <span id="r32 rd" class="r32 r">items</span>)
        {
            <b>if</b> (<b>null</b> == <span class="r32 r">items</span>)
            {
                <b>return</b> <b>null</b>;
            }
 
            <a href="@0@mscorlib/A.html#cf7f4095e4de7646" class="t t">List</a>&lt;<span class="r33 r t">T</span>&gt; <span id="r35 rd" class="r35 r">protocolItems</span> = <b>new</b> <a href="@0@mscorlib/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<span class="r33 r t">T</span>&gt;();
 
            <b>foreach</b> (<a href="ITransportObjectProvider.cs.html#d5ad5af7e7b4d7fc" class="t t">ITransportObjectProvider</a>&lt;<span class="r33 r t">T</span>&gt; <span id="r36 rd" class="r36 r">item</span> <b>in</b> <span class="r32 r">items</span>)
            {
                <span class="r33 r t">T</span> <span id="r37 rd" class="r37 r">protocolItem</span> = <span class="r36 r">item</span>.<a href="ITransportObjectProvider.cs.html#3a9e3bdeca63e8e8" class="i method">GetTransportObject</a>();
 
                <span class="c">// add the protocol object to the return collection</span>
                <span class="r35 r">protocolItems</span>.<a href="@0@mscorlib/A.html#9cc11588bffd57c1" class="i method">Add</a>(<span class="r37 r">protocolItem</span>);
            }
 
            <b>return</b> <span class="r35 r">protocolItems</span>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Converts a collection of object model items into a corresponding array of transport layer items.</span>
        <span class="c">///</span><span class="c"> If the </span><span class="c">&lt;</span><span class="c">paramref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r38 r">items</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> collection is null, null is returned.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> A collection of type </span><span class="c">&lt;</span><span class="c">typeparam</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r39 r t">T</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> generated by calling </span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="ITransportObjectProvider.cs.html#d5ad5af7e7b4d7fc" class="t t">ITransportObjectProvider</a>{<span class="r40 r t">T</span>}.<a href="ITransportObjectProvider.cs.html#3a9e3bdeca63e8e8" class="i method">GetTransportObject</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> on each element of the input collection.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>internal static</b> <span class="r39 r t">T</span>[] <a id="bbf329990e2afc67" href="R/bbf329990e2afc67.html" target="n" data-glyph="74,1" class="i method">ConvertToProtocolArray</a>&lt;<span id="r39 rd t" class="r39 r t">T</span>&gt;(<a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="ITransportObjectProvider.cs.html#d5ad5af7e7b4d7fc" class="t t">ITransportObjectProvider</a>&lt;<span class="r39 r t">T</span>&gt;&gt; <span id="r38 rd" class="r38 r">items</span>)
        {
            <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="r39 r t">T</span>&gt; <span id="r41 rd" class="r41 r">protocolCollection</span> = <a href="#707db0581de83237" class="i method">ConvertToProtocolCollection</a>(<span class="r38 r">items</span>);
 
            <b>if</b> (<span class="r41 r">protocolCollection</span> != <b>null</b>)
            {
                <b>return</b> <span class="r41 r">protocolCollection</span>.<a href="@0@System.Core/A.html#783a052330e7d48d" class="i method">ToArray</a>();
            }
            <b>else</b>
            {
                <b>return</b> <b>null</b>;
            }
        }
 
        <b>internal static</b> <a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<span class="r42 r t">TTo</span>&gt; <a id="111093ab78bfd69f" href="R/111093ab78bfd69f.html" target="n" data-glyph="74,1" class="i method">ConvertEnumCollection</a>&lt;<span id="r43 rd t" class="r43 r t">TFrom</span>, <span id="r42 rd t" class="r42 r t">TTo</span>&gt;(<a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="r43 r t">TFrom</span>&gt; <span id="r44 rd" class="r44 r">items</span>)
            <b>where</b> <span class="r43 r t">TFrom</span> : <b>struct
            where</b> <span class="r42 r t">TTo</span> : <b>struct</b>
        {
            <b>return</b> <span class="r44 r">items</span>?.<a href="@0@System.Core/A.html#5c652c53e80df013" class="i method">Select</a>(<a href="#ee3c8196baa19ae2" class="i method">MapEnum</a>&lt;<span class="r43 r t">TFrom</span>, <span class="r42 r t">TTo</span>&gt;).<a href="@0@System.Core/A.html#e276d6892241255b" class="i method">ToList</a>();
        }
 
        <b>internal static</b> <a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<span class="r45 r t">TTo</span>?&gt; <a id="90031fa89589bcfd" href="R/../../0000000000.html" target="n" data-glyph="74,1" class="i method">ConvertEnumCollection</a>&lt;<span id="r46 rd t" class="r46 r t">TFrom</span>, <span id="r45 rd t" class="r45 r t">TTo</span>&gt;(<a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="r46 r t">TFrom</span>?&gt; <span id="r47 rd" class="r47 r">items</span>)
            <b>where</b> <span class="r46 r t">TFrom</span> : <b>struct
            where</b> <span class="r45 r t">TTo</span> : <b>struct</b>
        {
            <b>return</b> <span class="r47 r">items</span>?.<a href="@0@System.Core/A.html#5c652c53e80df013" class="i method">Select</a>(<a href="#45e95c25dc6d2cba" class="i method">MapNullableEnum</a>&lt;<span class="r46 r t">TFrom</span>, <span class="r45 r t">TTo</span>&gt;).<a href="@0@System.Core/A.html#e276d6892241255b" class="i method">ToList</a>();
        }
 
        <b>private static</b> <span class="r48 r t">TList</span> <a id="a9981a49f7c4da68" href="R/a9981a49f7c4da68.html" target="n" data-glyph="76,1" class="i method">ConvertCollection</a>&lt;<span id="r49 rd t" class="r49 r t">TIn</span>, <span id="r50 rd t" class="r50 r t">TOut</span>, <span id="r48 rd t" class="r48 r t">TList</span>&gt;(
            <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="r49 r t">TIn</span>&gt; <span id="r51 rd" class="r51 r">items</span>,
            <a href="@0@mscorlib/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<span class="r49 r t">TIn</span>, <span class="r50 r t">TOut</span>&gt; <span id="r52 rd" class="r52 r">objectCreationFunc</span>,
            <a href="@0@mscorlib/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="r50 r t">TOut</span>&gt;, <span class="r48 r t">TList</span>&gt; <span id="r53 rd" class="r53 r">listCreationFunc</span>) 
            <b>where</b> <span class="r48 r t">TList</span> : <b>class</b>, <a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<span class="r50 r t">TOut</span>&gt; 
            <b>where</b> <span class="r49 r t">TIn</span> : <b>class 
            where</b> <span class="r50 r t">TOut</span> : <b>class</b>
        {
            <b>if</b> (<b>null</b> == <span class="r51 r">items</span>)
            {
                <b>return</b> <b>null</b>;
            }
 
            <span class="r48 r t">TList</span> <span id="r54 rd" class="r54 r">result</span> = <span class="r53 r">listCreationFunc</span>(<span class="r51 r">items</span>.<a href="@0@System.Core/A.html#5c652c53e80df013" class="i method">Select</a>(<span id="r55 rd" class="r55 r">item</span> =&gt; <span class="r55 r">item</span> == <b>null</b> ? <b>null</b> : <span class="r52 r">objectCreationFunc</span>(<span class="r55 r">item</span>)));
 
            <b>return</b> <span class="r54 r">result</span>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Applies the </span><span class="c">&lt;</span><span class="c">paramref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r56 r">objectCreationFunc</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> to each item in </span><span class="c">&lt;</span><span class="c">paramref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r57 r">items</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> and returns a non-threadsafe collection containing the results.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">typeparam</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r58 r t">TIn</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The type of the input collection.</span><span class="c">&lt;/</span><span class="c">typeparam</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">typeparam</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r59 r t">TOut</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The type of the output collection.</span><span class="c">&lt;/</span><span class="c">typeparam</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r57 r">items</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The collection to convert.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r56 r">objectCreationFunc</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The function used to created each </span><span class="c">&lt;</span><span class="c">typeparamref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r59 r t">TOut</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> type object.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">A non-threadsafe collection containing the results of the conversion, or null if </span><span class="c">&lt;</span><span class="c">paramref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r57 r">items</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> was null.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>internal static</b> <a href="@0@mscorlib/A.html#cf7f4095e4de7646" class="t t">List</a>&lt;<span class="r59 r t">TOut</span>&gt; <a id="c732c78e755f77b3" href="R/c732c78e755f77b3.html" target="n" data-glyph="74,1" class="i method">CollectionToNonThreadSafeCollection</a>&lt;<span id="r58 rd t" class="r58 r t">TIn</span>, <span id="r59 rd t" class="r59 r t">TOut</span>&gt;(
            <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="r58 r t">TIn</span>&gt; <span id="r57 rd" class="r57 r">items</span>,
            <a href="@0@mscorlib/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<span class="r58 r t">TIn</span>, <span class="r59 r t">TOut</span>&gt; <span id="r56 rd" class="r56 r">objectCreationFunc</span>)
            <b>where</b> <span class="r58 r t">TIn</span> : <b>class
            where</b> <span class="r59 r t">TOut</span> : <b>class</b>
        {
            <a href="@0@mscorlib/A.html#cf7f4095e4de7646" class="t t">List</a>&lt;<span class="r59 r t">TOut</span>&gt; <span id="r60 rd" class="r60 r">result</span> = <a href="#75d406733ca3f619" class="t t">UtilitiesInternal</a>.<a href="#a9981a49f7c4da68" class="i method">ConvertCollection</a>(
                <span class="r57 r">items</span>,
                <span class="r56 r">objectCreationFunc</span>,
                (<span id="r61 rd" class="r61 r">convertedItemsEnumerable</span>) =&gt; <b>new</b> <a href="@0@mscorlib/A.html#d2ac2c19c9cf1d44" class="t constructor">List</a>&lt;<span class="r59 r t">TOut</span>&gt;(<span class="r61 r">convertedItemsEnumerable</span>));
 
            <b>return</b> <span class="r60 r">result</span>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Applies the </span><span class="c">&lt;</span><span class="c">paramref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r62 r">objectCreationFunc</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> to each item in </span><span class="c">&lt;</span><span class="c">paramref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r63 r">items</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> and returns a non-threadsafe collection containing the results.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">typeparam</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r64 r t">TIn</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The type of the input collection.</span><span class="c">&lt;/</span><span class="c">typeparam</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">typeparam</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r65 r t">TOut</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The type of the output collection.</span><span class="c">&lt;/</span><span class="c">typeparam</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r63 r">items</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The collection to convert.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r62 r">objectCreationFunc</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The function used to created each </span><span class="c">&lt;</span><span class="c">typeparamref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r65 r t">TOut</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> type object.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">A non-threadsafe collection containing the results of the conversion, or null if </span><span class="c">&lt;</span><span class="c">paramref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r63 r">items</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> was null.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>internal static</b> <a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<span class="r65 r t">TOut</span>&gt; <a id="06cd77cf659ccc39" href="R/06cd77cf659ccc39.html" target="n" data-glyph="74,1" class="i method">CollectionToThreadSafeCollection</a>&lt;<span id="r64 rd t" class="r64 r t">TIn</span>, <span id="r65 rd t" class="r65 r t">TOut</span>&gt;(
            <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="r64 r t">TIn</span>&gt; <span id="r63 rd" class="r63 r">items</span>,
            <a href="@0@mscorlib/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<span class="r64 r t">TIn</span>, <span class="r65 r t">TOut</span>&gt; <span id="r62 rd" class="r62 r">objectCreationFunc</span>)
            <b>where</b> <span class="r64 r t">TIn</span> : <b>class
            where</b> <span class="r65 r t">TOut</span> : <b>class</b>
        {
            <a href="ConcurrentChangeTrackedList.cs.html#8f0d85d2a99c872c" class="t t">ConcurrentChangeTrackedList</a>&lt;<span class="r65 r t">TOut</span>&gt; <span id="r66 rd" class="r66 r">result</span> = <a href="#75d406733ca3f619" class="t t">UtilitiesInternal</a>.<a href="#a9981a49f7c4da68" class="i method">ConvertCollection</a>(
                <span class="r63 r">items</span>,
                <span class="r62 r">objectCreationFunc</span>,
                (<span id="r67 rd" class="r67 r">convertedItemsEnumerable</span>) =&gt; <b>new</b> <a href="ConcurrentChangeTrackedList.cs.html#379a1ea0ca358c3e" class="t constructor">ConcurrentChangeTrackedList</a>&lt;<span class="r65 r t">TOut</span>&gt;(<span class="r67 r">convertedItemsEnumerable</span>));
 
            <b>return</b> <span class="r66 r">result</span>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Applies the </span><span class="c">&lt;</span><span class="c">paramref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r68 r">objectCreationFunc</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> to each item in </span><span class="c">&lt;</span><span class="c">paramref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r69 r">items</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> and returns a threadsafe collection containing the results.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">typeparam</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r70 r t">TIn</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The type of the input collection.</span><span class="c">&lt;/</span><span class="c">typeparam</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">typeparam</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r71 r t">TOut</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The type of the output collection.</span><span class="c">&lt;/</span><span class="c">typeparam</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r69 r">items</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The collection to convert.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r68 r">objectCreationFunc</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The function used to created each </span><span class="c">&lt;</span><span class="c">typeparamref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r71 r t">TOut</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> type object.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">A threadsafe collection containing the results of the conversion, or null if </span><span class="c">&lt;</span><span class="c">paramref</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r69 r">items</span><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> was null.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>internal static</b> <a href="ConcurrentChangeTrackedList.cs.html#b210ccbdd12a4697" class="t t">ConcurrentChangeTrackedModifiableList</a>&lt;<span class="r71 r t">TOut</span>&gt; <a id="726af14bb92015fa" href="R/726af14bb92015fa.html" target="n" data-glyph="74,1" class="i method">CollectionToThreadSafeCollectionIModifiable</a>&lt;<span id="r70 rd t" class="r70 r t">TIn</span>, <span id="r71 rd t" class="r71 r t">TOut</span>&gt;(
            <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="r70 r t">TIn</span>&gt; <span id="r69 rd" class="r69 r">items</span>,
            <a href="@0@mscorlib/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<span class="r70 r t">TIn</span>, <span class="r71 r t">TOut</span>&gt; <span id="r68 rd" class="r68 r">objectCreationFunc</span>)
            <b>where</b> <span class="r70 r t">TIn</span> : <b>class
            where</b> <span class="r71 r t">TOut</span> : <b>class</b>, <a href="IPropertyMetadata.cs.html#a6cdfab92c5b5626" class="t t">IPropertyMetadata</a>
        {
            <a href="ConcurrentChangeTrackedList.cs.html#b210ccbdd12a4697" class="t t">ConcurrentChangeTrackedModifiableList</a>&lt;<span class="r71 r t">TOut</span>&gt; <span id="r72 rd" class="r72 r">result</span> = <a href="#75d406733ca3f619" class="t t">UtilitiesInternal</a>.<a href="#a9981a49f7c4da68" class="i method">ConvertCollection</a>(
                <span class="r69 r">items</span>,
                <span class="r68 r">objectCreationFunc</span>,
                (<span id="r73 rd" class="r73 r">convertedItemsEnumerable</span>) =&gt; <b>new</b> <a href="ConcurrentChangeTrackedList.cs.html#fcfbce439c47662b" class="t constructor">ConcurrentChangeTrackedModifiableList</a>&lt;<span class="r71 r t">TOut</span>&gt;(<span class="r73 r">convertedItemsEnumerable</span>));
 
            <b>return</b> <span class="r72 r">result</span>;
        }
        
        <span class="k preprocess">#</span><span class="k preprocess">endregion</span>
 
        <b>internal static</b> <a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a> <a id="7dd1b729cf2f40c1" href="R/7dd1b729cf2f40c1.html" target="n" data-glyph="104,1" class="i property">OperationForbiddenOnUnboundObjects</a>
        {
            <b>get</b>
            {
                <b>return</b> <b>new</b> <a href="@0@mscorlib/A.html#265d72f49e915224" class="t constructor">InvalidOperationException</a>(<a href="BatchErrorMessages.Designer.cs.html#3c2fda6d707d8e3d" class="t t">BatchErrorMessages</a>.<a href="BatchErrorMessages.Designer.cs.html#1fc2b596d3df0f67" class="i property">OperationForbiddenOnUnboundObjects</a>);
            }
        }
 
        <b>internal static</b> <a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a> <a id="366ebbba9b956c95" href="R/366ebbba9b956c95.html" target="n" data-glyph="104,1" class="i property">OperationForbiddenOnBoundObjects</a>
        {
            <b>get</b>
            {
                <b>return</b> <b>new</b> <a href="@0@mscorlib/A.html#265d72f49e915224" class="t constructor">InvalidOperationException</a>(<a href="BatchErrorMessages.Designer.cs.html#3c2fda6d707d8e3d" class="t t">BatchErrorMessages</a>.<a href="BatchErrorMessages.Designer.cs.html#fef1403479c477e9" class="i property">OperationForbiddenOnBoundObjects</a>);
            }
        }
        
        <b>internal static</b> <a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a> <a id="160b58860ce50c0b" href="R/160b58860ce50c0b.html" target="n" data-glyph="104,1" class="i property">MonitorRequiresConsistentHierarchyChain</a>
        {
            <b>get</b>
            {
                <b>return</b> <b>new</b> <a href="@0@mscorlib/A.html#265d72f49e915224" class="t constructor">InvalidOperationException</a>(<a href="BatchErrorMessages.Designer.cs.html#3c2fda6d707d8e3d" class="t t">BatchErrorMessages</a>.<a href="BatchErrorMessages.Designer.cs.html#9b75b7029189d89d" class="i property">MonitorInstancesMustHaveSameServerSideParent</a>);
            }
        }
 
        <b>internal static</b> <a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a> <a id="15cbc827b41d5508" href="R/15cbc827b41d5508.html" target="n" data-glyph="104,1" class="i property">IncorrectTypeReturned</a>
        {
            <b>get</b>
            {
                <b>return</b> <b>new</b> <a href="@0@mscorlib/A.html#265d72f49e915224" class="t constructor">InvalidOperationException</a>(<a href="BatchErrorMessages.Designer.cs.html#3c2fda6d707d8e3d" class="t t">BatchErrorMessages</a>.<a href="BatchErrorMessages.Designer.cs.html#3add7dbeb48dfd88" class="i property">IncorrectTypeReturned</a>);
            }
        }
        
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Reads entire Stream into a string.  When null encoding is provided, UTF8 is used.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r74 r">s</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r75 r">encoding</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>internal static string</b> <a id="71394ef4de3b242c" href="R/71394ef4de3b242c.html" target="n" data-glyph="74,1" class="i method">StreamToString</a>(<a href="@0@mscorlib/A.html#f956b0c07e86df64" class="t t">Stream</a> <span id="r74 rd" class="r74 r">s</span>, <a href="@0@mscorlib/A.html#3b6090c501893c25" class="t t">Encoding</a> <span id="r75 rd" class="r75 r">encoding</span>)
        {
            <b>if</b> (<b>null</b> == <span class="r75 r">encoding</span>)
            {
                <span class="r75 r">encoding</span> = <a href="@0@mscorlib/A.html#3b6090c501893c25" class="t t">Encoding</a>.<a href="@0@mscorlib/A.html#a10eb90a3d884500" class="i property">UTF8</a>;
            }
 
            <span class="c">//Avoid disposing of the underlying stream -- the streams lifetime is not owned by this method</span>
            <span class="c">//and disposing the reader will dispose the underlying stream.</span>
            
            <span class="c">//Note: detectEncodingFromByteOrderMarks default is true, and bufferSize default is 1024, we have to pass those here in order to</span>
            <span class="c">//get access to the leaveOpen parameter.</span>
            <b>using</b> (<a href="@0@mscorlib/A.html#b5fe1efcec14de32" class="t t">StreamReader</a> <span id="r76 rd" class="r76 r">reader</span> = <b>new</b> <a href="@0@mscorlib/A.html#aa16b00d54a1b6a6" class="t constructor">StreamReader</a>(<span class="r74 r">s</span>, <span class="r75 r">encoding</span>, <span class="r77 r">detectEncodingFromByteOrderMarks</span>: <b>true</b>, <span class="r78 r">bufferSize</span>: 1024, <span class="r79 r">leaveOpen</span>: <b>true</b>))
            {
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r80 rd" class="r80 r">txt</span> = <span class="r76 r">reader</span>.<a href="@0@mscorlib/A.html#dc5c2420e739a03e" class="i method">ReadToEnd</a>();
 
                <b>return</b> <span class="r80 r">txt</span>;
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Enumerates an enumerable asyncronously if required.  If the enumerable is of type IPagedCollection(T) then </span>
        <span class="c">///</span><span class="c"> ToListAsync is called on it.  Otherwise the enumerable is returned as is. </span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>internal static async</b> <a href="@0@mscorlib/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="r81 r t">T</span>&gt;&gt; <a id="088abbcf2618839d" href="R/088abbcf2618839d.html" target="n" data-glyph="74,1" class="i method">EnumerateIfNeededAsync</a>&lt;<span id="r81 rd t" class="r81 r t">T</span>&gt;(<a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="r81 r t">T</span>&gt; <span id="r82 rd" class="r82 r">enumerable</span>, <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r83 rd" class="r83 r">cancellationToken</span>)
        {
            <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<span class="r81 r t">T</span>&gt; <span id="r84 rd" class="r84 r">result</span>;
            
            <a href="IPagedEnumerable.cs.html#f93c71bac5f9f1fd" class="t t">IPagedEnumerable</a>&lt;<span class="r81 r t">T</span>&gt; <span id="r85 rd" class="r85 r">pagedEnumerable</span> = <span class="r82 r">enumerable</span> <b>as</b> <a href="IPagedEnumerable.cs.html#f93c71bac5f9f1fd" class="t t">IPagedEnumerable</a>&lt;<span class="r81 r t">T</span>&gt;;
            
            <b>if</b> (<span class="r85 r">pagedEnumerable</span> != <b>null</b>)
            {
                <span class="r84 r">result</span> = <b>await</b> <span class="r85 r">pagedEnumerable</span>.<a href="PagedEnumerableExtensions.cs.html#723cee45811b5af1" class="i method">ToListAsync</a>(<span class="r83 r">cancellationToken</span>).<a href="@0@mscorlib/A.html#07ef75a8fa372c94" class="i method">ConfigureAwait</a>(<b>false</b>);
            }
            <b>else</b>
            {
                <span class="r84 r">result</span> = <span class="r82 r">enumerable</span>;
            }
 
            <b>return</b> <span class="r84 r">result</span>;
        }
 
        <b>internal static void</b> <a id="a326273479c6ea11" href="R/a326273479c6ea11.html" target="n" data-glyph="221,1" class="i method">WaitAndUnaggregateException</a>(<b>this</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <span id="r86 rd" class="r86 r">task</span>)
        {
            <span class="r86 r">task</span>.<a href="@0@mscorlib/A.html#9865ec4fb8abca74" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#fac5be2731353aa8" class="i method">GetResult</a>();
        }
 
        <b>internal static</b> <span class="r87 r t">T</span> <a id="9622688606f2ac11" href="R/9622688606f2ac11.html" target="n" data-glyph="221,1" class="i method">WaitAndUnaggregateException</a>&lt;<span id="r87 rd t" class="r87 r t">T</span>&gt;(<b>this</b> <a href="@0@mscorlib/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<span class="r87 r t">T</span>&gt; <span id="r88 rd" class="r88 r">task</span>)
        {
            <b>return</b> <span class="r88 r">task</span>.<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
        }
 
        <b>internal static void</b> <a id="0516af48a6379fbb" href="R/0516af48a6379fbb.html" target="n" data-glyph="221,1" class="i method">WaitAndUnaggregateException</a>(<b>this</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <span id="r89 rd" class="r89 r">task</span>, <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="BatchClientBehaviors.cs.html#f6f05bb3f3db0258" class="t t">BatchClientBehavior</a>&gt; <span id="r90 rd" class="r90 r">rootBehaviors</span>, <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="BatchClientBehaviors.cs.html#f6f05bb3f3db0258" class="t t">BatchClientBehavior</a>&gt; <span id="r91 rd" class="r91 r">additionalBehaviors</span>)
        {
            <a href="BehaviorManager.cs.html#e4e15696c391247e" class="t t">BehaviorManager</a> <span id="r92 rd" class="r92 r">bhMgr</span> = <b>new</b> <a href="BehaviorManager.cs.html#b3d9dfb2d68630f9" class="t constructor">BehaviorManager</a>(<span class="r90 r">rootBehaviors</span>, <span class="r91 r">additionalBehaviors</span>);
            <a href="SynchronousMethodExceptionBehavior.cs.html#9590963c1591f383" class="t t">SynchronousMethodExceptionBehavior</a> <span id="r93 rd" class="r93 r">exceptionBehavior</span> = <span class="r92 r">bhMgr</span>.<a href="BehaviorManager.cs.html#094744946fccac98" class="i method">GetBehaviors</a>&lt;<a href="SynchronousMethodExceptionBehavior.cs.html#9590963c1591f383" class="t t">SynchronousMethodExceptionBehavior</a>&gt;().<a href="@0@System.Core/A.html#981cccb3b4b716eb" class="i method">LastOrDefault</a>();
            <b>if</b> (<span class="r93 r">exceptionBehavior</span> != <b>null</b>)
            {
                <span class="r93 r">exceptionBehavior</span>.<a href="SynchronousMethodExceptionBehavior.cs.html#af138833ea7e2a4c" class="i method">Wait</a>(<span class="r89 r">task</span>);
            }
            <b>else</b>
            {
                <span class="r89 r">task</span>.<a href="#a326273479c6ea11" class="i method">WaitAndUnaggregateException</a>();
            }
        }
 
        <b>internal static</b> <span class="r94 r t">T</span> <a id="617b13aeb5ecb166" href="R/617b13aeb5ecb166.html" target="n" data-glyph="221,1" class="i method">WaitAndUnaggregateException</a>&lt;<span id="r94 rd t" class="r94 r t">T</span>&gt;(<b>this</b> <a href="@0@mscorlib/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<span class="r94 r t">T</span>&gt; <span id="r95 rd" class="r95 r">task</span>, <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="BatchClientBehaviors.cs.html#f6f05bb3f3db0258" class="t t">BatchClientBehavior</a>&gt; <span id="r96 rd" class="r96 r">rootBehaviors</span>, <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="BatchClientBehaviors.cs.html#f6f05bb3f3db0258" class="t t">BatchClientBehavior</a>&gt; <span id="r97 rd" class="r97 r">additionalBehaviors</span>)
        {
            <a href="BehaviorManager.cs.html#e4e15696c391247e" class="t t">BehaviorManager</a> <span id="r98 rd" class="r98 r">bhMgr</span> = <b>new</b> <a href="BehaviorManager.cs.html#b3d9dfb2d68630f9" class="t constructor">BehaviorManager</a>(<span class="r96 r">rootBehaviors</span>, <span class="r97 r">additionalBehaviors</span>);
            <a href="SynchronousMethodExceptionBehavior.cs.html#9590963c1591f383" class="t t">SynchronousMethodExceptionBehavior</a> <span id="r99 rd" class="r99 r">exceptionBehavior</span> = <span class="r98 r">bhMgr</span>.<a href="BehaviorManager.cs.html#094744946fccac98" class="i method">GetBehaviors</a>&lt;<a href="SynchronousMethodExceptionBehavior.cs.html#9590963c1591f383" class="t t">SynchronousMethodExceptionBehavior</a>&gt;().<a href="@0@System.Core/A.html#981cccb3b4b716eb" class="i method">LastOrDefault</a>();
            <span class="r94 r t">T</span> <span id="r100 rd" class="r100 r">result</span>;
            <b>if</b> (<span class="r99 r">exceptionBehavior</span> != <b>null</b>)
            {
                <span class="r99 r">exceptionBehavior</span>.<a href="SynchronousMethodExceptionBehavior.cs.html#af138833ea7e2a4c" class="i method">Wait</a>(<span class="r95 r">task</span>);
                <span class="r100 r">result</span> = <span class="r95 r">task</span>.<a href="@0@mscorlib/A.html#826690b09f24e719" class="i property">Result</a>;
            }
            <b>else</b>
            {
                <span class="r100 r">result</span> = <span class="r95 r">task</span>.<a href="#9622688606f2ac11" class="i method">WaitAndUnaggregateException</a>();
            }
 
            <b>return</b> <span class="r100 r">result</span>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets the object if the property has been changed, otherwise returns null.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#beac22dfca574cd4" class="t t">InvalidOperationException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">When the property was changed to null, since the patch REST verb does not support that today in Batch.</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <b>internal static</b> <span class="r101 r t">T</span>? <a id="069a20f825be34ec" href="R/069a20f825be34ec.html" target="n" data-glyph="221,1" class="i method">GetIfChangedOrNull</a>&lt;<span id="r101 rd t" class="r101 r t">T</span>&gt;(<b>this</b> <a href="PropertyAccessor.cs.html#84458ababdd15014" class="t t">PropertyAccessor</a>&lt;<span class="r101 r t">T</span>?&gt; <span id="r102 rd" class="r102 r">property</span>)
            <b>where</b> <span class="r101 r t">T</span> : <b>struct</b>
        {
            <b>if</b> (<span class="r102 r">property</span>.<a href="PropertyAccessor.cs.html#a27a7b59779eadf4" class="i property">HasBeenModified</a>)
            {
                <b>if</b> (<span class="r102 r">property</span>.<a href="PropertyAccessor.cs.html#8d7cd5f20f168850" class="i property">Value</a> == <b>null</b>)
                {
                    <b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#265d72f49e915224" class="t constructor">InvalidOperationException</a>(<a href="BatchErrorMessages.Designer.cs.html#3c2fda6d707d8e3d" class="t t">BatchErrorMessages</a>.<a href="BatchErrorMessages.Designer.cs.html#045b3830991235fb" class="i property">CannotPatchNullValue</a>);
                }
                <b>return</b> <span class="r102 r">property</span>.<a href="PropertyAccessor.cs.html#8d7cd5f20f168850" class="i property">Value</a>;
            }
            <b>else</b>
            {
                <b>return</b> <b>null</b>;
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets the transport object if the property has been changed, otherwise returns null.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#beac22dfca574cd4" class="t t">InvalidOperationException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">When the property was changed to null, since the patch REST verb does not support that today in Batch.</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <b>internal static</b> <span class="r103 r t">TProtocol</span> <a id="5830a78aef9d807c" href="R/5830a78aef9d807c.html" target="n" data-glyph="221,1" class="i method">GetTransportObjectIfChanged</a>&lt;<span id="r104 rd t" class="r104 r t">TObjectModel</span>, <span id="r103 rd t" class="r103 r t">TProtocol</span>&gt;(<b>this</b> <a href="PropertyAccessor.cs.html#84458ababdd15014" class="t t">PropertyAccessor</a>&lt;<span class="r104 r t">TObjectModel</span>&gt; <span id="r105 rd" class="r105 r">property</span>)
            <b>where</b> <span class="r104 r t">TObjectModel</span> : <b>class</b>, <a href="ITransportObjectProvider.cs.html#d5ad5af7e7b4d7fc" class="t t">ITransportObjectProvider</a>&lt;<span class="r103 r t">TProtocol</span>&gt;
            <b>where</b> <span class="r103 r t">TProtocol</span> : <b>class</b>
        {
            <b>if</b> (<span class="r105 r">property</span>.<a href="PropertyAccessor.cs.html#a27a7b59779eadf4" class="i property">HasBeenModified</a>)
            {
                <b>if</b> (<span class="r105 r">property</span>.<a href="PropertyAccessor.cs.html#8d7cd5f20f168850" class="i property">Value</a> == <b>null</b>)
                {
                    <b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#265d72f49e915224" class="t constructor">InvalidOperationException</a>(<a href="BatchErrorMessages.Designer.cs.html#3c2fda6d707d8e3d" class="t t">BatchErrorMessages</a>.<a href="BatchErrorMessages.Designer.cs.html#045b3830991235fb" class="i property">CannotPatchNullValue</a>);
                }
                <b>return</b> <a href="#8fc6276156af9d7e" class="i method">CreateObjectWithNullCheck</a>(<span class="r105 r">property</span>.<a href="PropertyAccessor.cs.html#8d7cd5f20f168850" class="i property">Value</a>, <span id="r106 rd" class="r106 r">item</span> =&gt; <span class="r106 r">item</span>.<a href="ITransportObjectProvider.cs.html#3a9e3bdeca63e8e8" class="i method">GetTransportObject</a>());
            }
            <b>else</b>
            {
                <b>return</b> <b>null</b>;
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Gets the transport object if the property has been changed, otherwise returns null.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">exception</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#beac22dfca574cd4" class="t t">InvalidOperationException</a><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">When the property was changed to null, since the patch REST verb does not support that today in Batch.</span><span class="c">&lt;/</span><span class="c">exception</span><span class="c">&gt;</span>
        <b>internal static</b> <span class="r107 r t">TProtocol</span>[] <a id="37360e99a668984c" href="R/37360e99a668984c.html" target="n" data-glyph="221,1" class="i method">GetTransportObjectIfChanged</a>&lt;<span id="r108 rd t" class="r108 r t">TObjectModel</span>, <span id="r107 rd t" class="r107 r t">TProtocol</span>&gt;(<b>this</b> <a href="PropertyAccessor.cs.html#84458ababdd15014" class="t t">PropertyAccessor</a>&lt;<a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<span class="r108 r t">TObjectModel</span>&gt;&gt; <span id="r109 rd" class="r109 r">property</span>)
            <b>where</b> <span class="r108 r t">TObjectModel</span> : <b>class</b>, <a href="ITransportObjectProvider.cs.html#d5ad5af7e7b4d7fc" class="t t">ITransportObjectProvider</a>&lt;<span class="r107 r t">TProtocol</span>&gt;
            <b>where</b> <span class="r107 r t">TProtocol</span> : <b>class</b>
        {
            <b>if</b> (<span class="r109 r">property</span>.<a href="PropertyAccessor.cs.html#a27a7b59779eadf4" class="i property">HasBeenModified</a>)
            {
                <b>if</b> (<span class="r109 r">property</span>.<a href="PropertyAccessor.cs.html#8d7cd5f20f168850" class="i property">Value</a> == <b>null</b>)
                {
                    <b>throw</b> <b>new</b> <a href="@0@mscorlib/A.html#265d72f49e915224" class="t constructor">InvalidOperationException</a>(<a href="BatchErrorMessages.Designer.cs.html#3c2fda6d707d8e3d" class="t t">BatchErrorMessages</a>.<a href="BatchErrorMessages.Designer.cs.html#045b3830991235fb" class="i property">CannotPatchNullValue</a>);
                }
                <b>return</b> <a href="#bbf329990e2afc67" class="i method">ConvertToProtocolArray</a>(<span class="r109 r">property</span>.<a href="PropertyAccessor.cs.html#8d7cd5f20f168850" class="i property">Value</a>);
            }
            <b>else</b>
            {
                <b>return</b> <b>null</b>;
            }
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Begins asynchronous call to return the contents of the file as a string.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r110 r">copyStreamFunc</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The stream copy function.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r111 r">encoding</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The encoding used to interpret the file data. If no value or null is specified, UTF8 is used.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r112 r">byteRange</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">The file byte range to retrieve. If null, the entire file is retrieved.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r113 r">additionalBehaviors</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">A collection of BatchClientBehavior instances that are applied after the CustomBehaviors on the current object.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">param</span> <span class="c">name</span><span class="c">=</span><span class="c">&quot;</span><span class="r114 r">cancellationToken</span><span class="c">&quot;</span><span class="c">&gt;</span><span class="c">A </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> for controlling the lifetime of the asynchronous operation.</span><span class="c">&lt;/</span><span class="c">param</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">returns</span><span class="c">&gt;</span><span class="c">A </span><span class="c">&lt;</span><span class="c">see</span> <span class="c">cref</span><span class="c">=</span><span class="c">&quot;</span><span class="i n">System</span>.<span class="i n">Threading</span>.<span class="i n">Tasks</span>.<a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a><span class="c">&quot;</span><span class="c">/&gt;</span><span class="c"> object that represents the asynchronous operation.</span><span class="c">&lt;/</span><span class="c">returns</span><span class="c">&gt;</span>
        <b>internal static async</b> <a href="@0@mscorlib/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <a id="ee7a2755878c63c3" href="R/ee7a2755878c63c3.html" target="n" data-glyph="74,1" class="i method">ReadNodeFileAsStringAsync</a>(
            <a href="@0@mscorlib/A.html#dd88852b83582863" class="t t">Func</a>&lt;<a href="@0@mscorlib/A.html#f956b0c07e86df64" class="t t">Stream</a>, <a href="GetFileRequestByteRange.cs.html#9274e99f770fbd16" class="t t">GetFileRequestByteRange</a>, <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="BatchClientBehaviors.cs.html#f6f05bb3f3db0258" class="t t">BatchClientBehavior</a>&gt;, <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a>, <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a>&gt; <span id="r110 rd" class="r110 r">copyStreamFunc</span>,
            <a href="@0@mscorlib/A.html#3b6090c501893c25" class="t t">Encoding</a> <span id="r111 rd" class="r111 r">encoding</span>,
            <a href="GetFileRequestByteRange.cs.html#9274e99f770fbd16" class="t t">GetFileRequestByteRange</a> <span id="r112 rd" class="r112 r">byteRange</span>,
            <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="BatchClientBehaviors.cs.html#f6f05bb3f3db0258" class="t t">BatchClientBehavior</a>&gt; <span id="r113 rd" class="r113 r">additionalBehaviors</span>,
            <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r114 rd" class="r114 r">cancellationToken</span>)
        {
            <b>using</b> (<a href="@0@mscorlib/A.html#f956b0c07e86df64" class="t t">Stream</a> <span id="r115 rd" class="r115 r">streamToUse</span> = <b>new</b> <a href="@0@mscorlib/A.html#d308091cc690e78d" class="t constructor">MemoryStream</a>())
            {
                <span class="c">// get the data</span>
                <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <span id="r116 rd" class="r116 r">asyncTask</span> = <span class="r110 r">copyStreamFunc</span>(<span class="r115 r">streamToUse</span>, <span class="r112 r">byteRange</span>, <span class="r113 r">additionalBehaviors</span>, <span class="r114 r">cancellationToken</span>);
 
                <span class="c">// wait for completion</span>
                <b>await</b> <span class="r116 r">asyncTask</span>.<a href="@0@mscorlib/A.html#9ca6b2f012ce7587" class="i method">ConfigureAwait</a>(<span class="r117 r">continueOnCapturedContext</span>: <b>false</b>);
 
                <span class="r115 r">streamToUse</span>.<a href="@0@mscorlib/A.html#eb5599035c4388ce" class="i method">Seek</a>(0, <a href="@0@mscorlib/A.html#2cc1cf6635f00a52" class="t t">SeekOrigin</a>.<a href="@0@mscorlib/A.html#c29481af7c617299" class="i field">Begin</a>); <span class="c">//We just wrote to this stream, have to seek to the beginning</span>
                <span class="c">// convert to string</span>
                <b>return</b> <a href="#71394ef4de3b242c" class="i method">StreamToString</a>(<span class="r115 r">streamToUse</span>, <span class="r111 r">encoding</span>);
            }
        }
    }
 
}
</pre></td></tr></table></div></body></html>

<!DOCTYPE html>
<html><head><title>ManagedDiskTests.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(164);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Azure.Storage.Blobs.Tests/ManagedDiskTests.cs" target="_top">ManagedDiskTests.cs</a><br/></td><td><a class="blueLink" href="https://github.com/Azure/azure-sdk-for-net/tree/main/sdk/storage/Azure.Storage.Blobs/tests/ManagedDiskTests.cs" target="_blank">View on GitHub</a></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Azure.Storage.Blobs.Tests" target="_top">Azure.Storage.Blobs.Tests.csproj</a> (Azure.Storage.Blobs.Tests)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License.</span>
 
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">IO</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>.<span class="i n">Tasks</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Core</span>.<span class="i n">TestFramework</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Storage</span>.<span class="i n">Blobs</span>.<span class="i n">Models</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Storage</span>.<span class="i n">Blobs</span>.<span class="i n">Specialized</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Storage</span>.<span class="i n">Blobs</span>.<span class="i n">Test</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Storage</span>.<span class="i n">Test</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Storage</span>.<span class="i n">Test</span>.<span class="i n">Shared</span>;
<b>using</b> <span class="i n">NUnit</span>.<span class="i n">Framework</span>;
 
<b>namespace</b> <span class="i n">Azure</span>.<span class="i n">Storage</span>.<span class="i n">Blobs</span>.<span class="i n">Tests</span>.<span class="i n">ManagedDisk</span>
{
    [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#6de5212dacb3a5ca" class="i field">V2019_07_07</a>)]
    <b>public class</b> <a id="cafcfc2f7c1b6979" href="R/../../0000000000.html" target="n" data-glyph="0,0" class="t t">ManagedDiskTests</a> : <a href="BlobTestBase.cs.html#eff0070a998fc610" class="t t">BlobTestBase</a>
    {
        <b>private</b> <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <a id="09094978a81267d3" href="R/09094978a81267d3.html" target="n" data-glyph="46,1" class="i field">snapshot1SASUri</a>;
        <b>private</b> <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <a id="57227c109b952f03" href="R/57227c109b952f03.html" target="n" data-glyph="46,1" class="i field">snapshot2SASUri</a>;
        <b>private long</b> <a id="131bb6aab360e0ef" href="R/131bb6aab360e0ef.html" target="n" data-glyph="46,1" class="i field">snapshot1Size</a>;
 
        <b>public</b> <a id="a1b8f0362cfbb5b1" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="t constructor">ManagedDiskTests</a>(<b>bool</b> <span id="r0 rd" class="r0 r">async</span>, <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a> <span id="r1 rd" class="r1 r">serviceVersion</span>)
            : <a href="BlobTestBase.cs.html#584bc3bfb854a893" class="k">base</a>(<span class="r0 r">async</span>, <span class="r1 r">serviceVersion</span>, <b>null</b> <span class="c">/* RecordedTestMode.Record /* to re-record */</span>)
        {
        }
 
        [<span class="t constructor">SetUp</span>]
        <b>public void</b> <a id="593e9b1c77d7b933" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">Setup</a>()
        {
            <a href="#09094978a81267d3" class="i field">snapshot1SASUri</a> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#89ed8eba7a7ce6c2" class="i method">GetVariable</a>(<b>nameof</b>(<a href="#09094978a81267d3" class="i field">snapshot1SASUri</a>), <a href="ManagedDiskFixture.cs.html#f414a95cd3693c30" class="t t">ManagedDiskFixture</a>.<a href="ManagedDiskFixture.cs.html#953250a1cbaef715" class="i property">Instance</a>.<a href="ManagedDiskFixture.cs.html#ace7f0e2c59f2abe" class="i property">Snapshot1SASUri</a>?.<a href="@0@System/A.html#e335fec0022465e6" class="i property">AbsoluteUri</a>, <span id="r2 rd" class="r2 r">v</span> =&gt; <a href="/Azure.Core.TestFramework/A.html#2800a862b6d5bdce" class="i property">Sanitizer</a>.<a href="/Azure.Core.TestFramework/A.html#f34151f63ddfaf69" class="i method">SanitizeUri</a>(<span class="r2 r">v</span>)));
            <a href="#57227c109b952f03" class="i field">snapshot2SASUri</a> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#89ed8eba7a7ce6c2" class="i method">GetVariable</a>(<b>nameof</b>(<a href="#57227c109b952f03" class="i field">snapshot2SASUri</a>), <a href="ManagedDiskFixture.cs.html#f414a95cd3693c30" class="t t">ManagedDiskFixture</a>.<a href="ManagedDiskFixture.cs.html#953250a1cbaef715" class="i property">Instance</a>.<a href="ManagedDiskFixture.cs.html#f6ab659666f48e18" class="i property">Snapshot2SASUri</a>?.<a href="@0@System/A.html#e335fec0022465e6" class="i property">AbsoluteUri</a>, <span id="r3 rd" class="r3 r">v</span> =&gt; <a href="/Azure.Core.TestFramework/A.html#2800a862b6d5bdce" class="i property">Sanitizer</a>.<a href="/Azure.Core.TestFramework/A.html#f34151f63ddfaf69" class="i method">SanitizeUri</a>(<span class="r3 r">v</span>)));
            <a href="#131bb6aab360e0ef" class="i field">snapshot1Size</a> = <b>long</b>.<a href="@0@mscorlib/A.html#7967a886c106fcce" class="i method">Parse</a>(<a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#89ed8eba7a7ce6c2" class="i method">GetVariable</a>(<b>nameof</b>(<a href="#131bb6aab360e0ef" class="i field">snapshot1Size</a>), <a href="ManagedDiskFixture.cs.html#f414a95cd3693c30" class="t t">ManagedDiskFixture</a>.<a href="ManagedDiskFixture.cs.html#953250a1cbaef715" class="i property">Instance</a>.<a href="ManagedDiskFixture.cs.html#226d5d98f7b9180d" class="i property">Snapshot1</a>?.<a href="/Azure.ResourceManager.Compute/A.html#8f6499eede46667a" class="i property">Data</a>.<a href="/Azure.ResourceManager.Compute/A.html#567f74d659fd916a" class="i property">DiskSizeBytes</a>.<a href="@0@mscorlib/A.html#d83d2db767b43db7" class="i method">ToString</a>()));
        }
 
        [<span class="t constructor">Test</span>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="7647ec58bc06f983" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanDiffPagesBetweenSnapshots</a>()
        {
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#22dff01887f5d331" class="k">var</a> <span id="r4 rd" class="r4 r">snapshot1Client</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#2c92264f44c1298f" class="t constructor">PageBlobClient</a>(<a href="#09094978a81267d3" class="i field">snapshot1SASUri</a>, <a href="BlobTestBase.cs.html#8b419660de0d26a1" class="i method">GetOptions</a>()));
            <a href="/Azure.Storage.Blobs/A.html#22dff01887f5d331" class="k">var</a> <span id="r5 rd" class="r5 r">snapshot2Client</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#2c92264f44c1298f" class="t constructor">PageBlobClient</a>(<a href="#57227c109b952f03" class="i field">snapshot2SASUri</a>, <a href="BlobTestBase.cs.html#8b419660de0d26a1" class="i method">GetOptions</a>()));
 
            <span class="c">// Act</span>
            <a href="/Azure.Storage.Blobs/A.html#fb27d379dc77532d" class="t t">PageRangesInfo</a> <span id="r6 rd" class="r6 r">pageRangesInfo</span> = <b>await</b> <span class="r5 r">snapshot2Client</span>.<a href="/Azure.Storage.Blobs/A.html#254554c62e85039b" class="i method">GetManagedDiskPageRangesDiffAsync</a>(<span class="r7 r">previousSnapshotUri</span>: <a href="#09094978a81267d3" class="i field">snapshot1SASUri</a>);
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r6 r">pageRangesInfo</span>.<a href="/Azure.Storage.Blobs/A.html#09fb1de19a69f194" class="i property">LastModified</a>);
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r6 r">pageRangesInfo</span>.<a href="/Azure.Storage.Blobs/A.html#254d72296abbda96" class="i property">ETag</a>);
            <span class="t t">CollectionAssert</span>.<span class="i method">IsNotEmpty</span>(<span class="r6 r">pageRangesInfo</span>.<a href="/Azure.Storage.Blobs/A.html#88a8df062ed6d375" class="i property">ClearRanges</a>);
            <span class="t t">CollectionAssert</span>.<span class="i method">IsNotEmpty</span>(<span class="r6 r">pageRangesInfo</span>.<a href="/Azure.Storage.Blobs/A.html#c38f27c995d69b1a" class="i property">PageRanges</a>);
 
            <span class="c">// Assert page diff</span>
            <a href="/Azure.Core/A.html#d6f9b3aba6783671" class="k">var</a> <span id="r8 rd" class="r8 r">pageRange</span> = <span class="r6 r">pageRangesInfo</span>.<a href="/Azure.Storage.Blobs/A.html#c38f27c995d69b1a" class="i property">PageRanges</a>.<a href="@0@System.Core/A.html#bc8ae402a61dd9d6" class="i method">First</a>();
            <b>var</b> <span id="r9 rd" class="r9 r">range1</span> = <b>await</b> <a href="#ff9842ffda9cde97" class="i method">DownloadRange</a>(<span class="r4 r">snapshot1Client</span>, <span class="r8 r">pageRange</span>);
            <b>var</b> <span id="r10 rd" class="r10 r">range2</span> = <b>await</b> <a href="#ff9842ffda9cde97" class="i method">DownloadRange</a>(<span class="r5 r">snapshot2Client</span>, <span class="r8 r">pageRange</span>);
 
            <span class="t t">Assert</span>.<span class="i method">AreNotEqual</span>(<span class="r9 r">range1</span>, <span class="r10 r">range2</span>);
 
            <span class="c">// Assert page clean</span>
            <a href="/Azure.Core/A.html#d6f9b3aba6783671" class="k">var</a> <span id="r11 rd" class="r11 r">cleanRange</span> = <span class="r6 r">pageRangesInfo</span>.<a href="/Azure.Storage.Blobs/A.html#88a8df062ed6d375" class="i property">ClearRanges</a>.<a href="@0@System.Core/A.html#bc8ae402a61dd9d6" class="i method">First</a>();
            <span class="r10 r">range2</span> = <b>await</b> <a href="#ff9842ffda9cde97" class="i method">DownloadRange</a>(<span class="r5 r">snapshot2Client</span>, <span class="r11 r">cleanRange</span>);
            <b>foreach</b> (<b>byte</b> <span id="r12 rd" class="r12 r">b</span> <b>in</b> <span class="r10 r">range2</span>)
            {
                <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(0, <span class="r12 r">b</span>);
            }
        }
 
        [<span class="t constructor">Test</span>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="7a5c22d8980287e0" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetManagedDiskPageRangesDiffAsync_Error</a>()
        {
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#22dff01887f5d331" class="k">var</a> <span id="r13 rd" class="r13 r">snapshot1Client</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#2c92264f44c1298f" class="t constructor">PageBlobClient</a>(<a href="#09094978a81267d3" class="i field">snapshot1SASUri</a>, <a href="BlobTestBase.cs.html#8b419660de0d26a1" class="i method">GetOptions</a>()));
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r13 r">snapshot1Client</span>.<a href="/Azure.Storage.Blobs/A.html#254554c62e85039b" class="i method">GetManagedDiskPageRangesDiffAsync</a>(<span class="r14 r">range</span>: <b>new</b> <a href="/Azure.Core/A.html#6ed33a49a04456b8" class="t constructor">HttpRange</a>(<a href="#131bb6aab360e0ef" class="i field">snapshot1Size</a> + <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f083580f332431a9" class="i field">MB</a>, 4 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>)),
                <span id="r15 rd" class="r15 r">e</span> =&gt;
                {
                    <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;InvalidRange&quot;</span>, <span class="r15 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>);
                    <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;The range specified is invalid for the current size of the resource.&quot;</span>,
                        <span class="r15 r">e</span>.<a href="@0@mscorlib/A.html#5fba0e16215b42a3" class="i property">Message</a>.<a href="@0@mscorlib/A.html#1c4a9dc78ba38999" class="i method">Split</a>(<span class="s">&#39;\n&#39;</span>)[0]);
                });
        }
 
        [<span class="t constructor">Test</span>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="ff09b1405b2fe805" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetManagedDiskPageRangesDiffAsync_AccessConditions</a>()
        {
            <a href="/Azure.Storage.Blobs/A.html#22dff01887f5d331" class="k">var</a> <span id="r16 rd" class="r16 r">snapshot2Client</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#2c92264f44c1298f" class="t constructor">PageBlobClient</a>(<a href="#57227c109b952f03" class="i field">snapshot2SASUri</a>, <a href="BlobTestBase.cs.html#8b419660de0d26a1" class="i method">GetOptions</a>()));
 
            <b>foreach</b> (<a href="PageBlobClientTests.cs.html#d45ee56409defe0e" class="k">var</a> <span id="r17 rd" class="r17 r">parameters</span> <b>in</b> <a href="#d5067f1dbc4ae7ee" class="i property">Reduced_AccessConditions_Data</a>)
            {
                <span class="r17 r">parameters</span>.<a href="PageBlobClientTests.cs.html#3868f862bfea4871" class="i property">Match</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r16 r">snapshot2Client</span>, <span class="r17 r">parameters</span>.<a href="PageBlobClientTests.cs.html#3868f862bfea4871" class="i property">Match</a>);
 
                <a href="/Azure.Storage.Blobs/A.html#e53ee0bc9abf40d9" class="t t">PageBlobRequestConditions</a> <span id="r18 rd" class="r18 r">accessConditions</span> = <a href="PageBlobClientTests.cs.html#f11b3764f7765c8c" class="t t">PageBlobClientTests</a>.<a href="PageBlobClientTests.cs.html#01dff2835463dd32" class="i method">BuildAccessConditions</a>(
                    <span class="r19 r">parameters</span>: <span class="r17 r">parameters</span>,
                    <span class="r20 r">lease</span>: <b>false</b>);
 
                <span class="c">// Act</span>
                <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#fb27d379dc77532d" class="t t">PageRangesInfo</a>&gt; <span id="r21 rd" class="r21 r">response</span> = <b>await</b> <span class="r16 r">snapshot2Client</span>.<a href="/Azure.Storage.Blobs/A.html#254554c62e85039b" class="i method">GetManagedDiskPageRangesDiffAsync</a>(
                    <span class="r14 r">range</span>: <b>new</b> <a href="/Azure.Core/A.html#6ed33a49a04456b8" class="t constructor">HttpRange</a>(0, <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>),
                    <span class="r7 r">previousSnapshotUri</span>: <a href="#09094978a81267d3" class="i field">snapshot1SASUri</a>,
                    <span class="r22 r">conditions</span>: <span class="r18 r">accessConditions</span>);
 
                <span class="c">// Assert</span>
                <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r21 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#c38f27c995d69b1a" class="i property">PageRanges</a>);
            }
        }
 
        [<span class="t constructor">Test</span>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="18f127c36a908539" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetManagedDiskPageRangesDiffAsync_AccessConditionsFail</a>()
        {
            <a href="/Azure.Storage.Blobs/A.html#22dff01887f5d331" class="k">var</a> <span id="r23 rd" class="r23 r">snapshot2Client</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#2c92264f44c1298f" class="t constructor">PageBlobClient</a>(<a href="#57227c109b952f03" class="i field">snapshot2SASUri</a>, <a href="BlobTestBase.cs.html#8b419660de0d26a1" class="i method">GetOptions</a>()));
            <b>foreach</b> (<a href="PageBlobClientTests.cs.html#d45ee56409defe0e" class="k">var</a> <span id="r24 rd" class="r24 r">parameters</span> <b>in</b> <a href="#6154c1d21f76deff" class="i property">Reduced_AccessConditions_Fail_Data</a>)
            {
                <span class="r24 r">parameters</span>.<a href="PageBlobClientTests.cs.html#e9178267a3913d19" class="i property">NoneMatch</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r23 r">snapshot2Client</span>, <span class="r24 r">parameters</span>.<a href="PageBlobClientTests.cs.html#e9178267a3913d19" class="i property">NoneMatch</a>);
 
                <a href="/Azure.Storage.Blobs/A.html#e53ee0bc9abf40d9" class="t t">PageBlobRequestConditions</a> <span id="r25 rd" class="r25 r">accessConditions</span> = <a href="PageBlobClientTests.cs.html#f11b3764f7765c8c" class="t t">PageBlobClientTests</a>.<a href="PageBlobClientTests.cs.html#01dff2835463dd32" class="i method">BuildAccessConditions</a>(
                    <span class="r19 r">parameters</span>: <span class="r24 r">parameters</span>,
                    <span class="r20 r">lease</span>: <b>false</b>);
 
                <span class="c">// Act</span>
                <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#4c635e211835e989" class="i method">CatchAsync</a>&lt;<a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a>&gt;(
                    <b>async</b> () =&gt;
                    {
                        <a href="/Azure.Storage.Blobs/A.html#fb27d379dc77532d" class="k">var</a> <span id="r26 rd" class="r26 r">_</span> = (<b>await</b> <span class="r23 r">snapshot2Client</span>.<a href="/Azure.Storage.Blobs/A.html#254554c62e85039b" class="i method">GetManagedDiskPageRangesDiffAsync</a>(
                            <span class="r14 r">range</span>: <b>new</b> <a href="/Azure.Core/A.html#6ed33a49a04456b8" class="t constructor">HttpRange</a>(0, <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>),
                            <span class="r7 r">previousSnapshotUri</span>: <a href="#09094978a81267d3" class="i field">snapshot1SASUri</a>,
                            <span class="r22 r">conditions</span>: <span class="r25 r">accessConditions</span>)).<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>;
                    });
            }
        }
 
        <b>public</b> <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="PageBlobClientTests.cs.html#f11b3764f7765c8c" class="t t">PageBlobClientTests</a>.<a href="PageBlobClientTests.cs.html#d45ee56409defe0e" class="t t">AccessConditionParameters</a>&gt; <a id="d5067f1dbc4ae7ee" href="R/d5067f1dbc4ae7ee.html" target="n" data-glyph="102,1" class="i property">Reduced_AccessConditions_Data</a>
            =&gt; <b>new</b>[]
            {
                <b>new</b> <a href="PageBlobClientTests.cs.html#f11b3764f7765c8c" class="t t">PageBlobClientTests</a>.<a href="PageBlobClientTests.cs.html#d45ee56409defe0e" class="t constructor">AccessConditionParameters</a>(),
                <b>new</b> <a href="PageBlobClientTests.cs.html#f11b3764f7765c8c" class="t t">PageBlobClientTests</a>.<a href="PageBlobClientTests.cs.html#d45ee56409defe0e" class="t constructor">AccessConditionParameters</a> { <a href="PageBlobClientTests.cs.html#f1d5126fc6f87cff" class="i property">IfModifiedSince</a> = <a href="BlobTestBase.cs.html#e9911a9548f25e65" class="i property">OldDate</a> },
                <b>new</b> <a href="PageBlobClientTests.cs.html#f11b3764f7765c8c" class="t t">PageBlobClientTests</a>.<a href="PageBlobClientTests.cs.html#d45ee56409defe0e" class="t constructor">AccessConditionParameters</a> { <a href="PageBlobClientTests.cs.html#29feadbd0fde491b" class="i property">IfUnmodifiedSince</a> = <a href="BlobTestBase.cs.html#2fbbec11a30e744c" class="i property">NewDate</a> },
                <b>new</b> <a href="PageBlobClientTests.cs.html#f11b3764f7765c8c" class="t t">PageBlobClientTests</a>.<a href="PageBlobClientTests.cs.html#d45ee56409defe0e" class="t constructor">AccessConditionParameters</a> { <a href="PageBlobClientTests.cs.html#3868f862bfea4871" class="i property">Match</a> = <a href="BlobTestBase.cs.html#13e3be366a1fa28f" class="i field">ReceivedETag</a> },
                <b>new</b> <a href="PageBlobClientTests.cs.html#f11b3764f7765c8c" class="t t">PageBlobClientTests</a>.<a href="PageBlobClientTests.cs.html#d45ee56409defe0e" class="t constructor">AccessConditionParameters</a> { <a href="PageBlobClientTests.cs.html#e9178267a3913d19" class="i property">NoneMatch</a> = <a href="BlobTestBase.cs.html#b1968ca6fd0467f0" class="i field">GarbageETag</a> }
            };
 
        <b>public</b> <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="PageBlobClientTests.cs.html#f11b3764f7765c8c" class="t t">PageBlobClientTests</a>.<a href="PageBlobClientTests.cs.html#d45ee56409defe0e" class="t t">AccessConditionParameters</a>&gt; <a id="6154c1d21f76deff" href="R/6154c1d21f76deff.html" target="n" data-glyph="102,1" class="i property">Reduced_AccessConditions_Fail_Data</a>
            =&gt; <b>new</b>[]
            {
                        <b>new</b> <a href="PageBlobClientTests.cs.html#f11b3764f7765c8c" class="t t">PageBlobClientTests</a>.<a href="PageBlobClientTests.cs.html#d45ee56409defe0e" class="t constructor">AccessConditionParameters</a> { <a href="PageBlobClientTests.cs.html#f1d5126fc6f87cff" class="i property">IfModifiedSince</a> = <a href="BlobTestBase.cs.html#2fbbec11a30e744c" class="i property">NewDate</a> },
                        <b>new</b> <a href="PageBlobClientTests.cs.html#f11b3764f7765c8c" class="t t">PageBlobClientTests</a>.<a href="PageBlobClientTests.cs.html#d45ee56409defe0e" class="t constructor">AccessConditionParameters</a> { <a href="PageBlobClientTests.cs.html#29feadbd0fde491b" class="i property">IfUnmodifiedSince</a> = <a href="BlobTestBase.cs.html#e9911a9548f25e65" class="i property">OldDate</a> },
                        <b>new</b> <a href="PageBlobClientTests.cs.html#f11b3764f7765c8c" class="t t">PageBlobClientTests</a>.<a href="PageBlobClientTests.cs.html#d45ee56409defe0e" class="t constructor">AccessConditionParameters</a> { <a href="PageBlobClientTests.cs.html#3868f862bfea4871" class="i property">Match</a> = <a href="BlobTestBase.cs.html#b1968ca6fd0467f0" class="i field">GarbageETag</a> },
                        <b>new</b> <a href="PageBlobClientTests.cs.html#f11b3764f7765c8c" class="t t">PageBlobClientTests</a>.<a href="PageBlobClientTests.cs.html#d45ee56409defe0e" class="t constructor">AccessConditionParameters</a> { <a href="PageBlobClientTests.cs.html#e9178267a3913d19" class="i property">NoneMatch</a> = <a href="BlobTestBase.cs.html#13e3be366a1fa28f" class="i field">ReceivedETag</a> }
            };
 
        <b>private async</b> <a href="@0@mscorlib/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<b>byte</b>[]&gt; <a id="ff9842ffda9cde97" href="R/ff9842ffda9cde97.html" target="n" data-glyph="76,1" class="i method">DownloadRange</a>(<a href="/Azure.Storage.Blobs/A.html#22dff01887f5d331" class="t t">PageBlobClient</a> <span id="r27 rd" class="r27 r">client</span>, <a href="/Azure.Core/A.html#d6f9b3aba6783671" class="t t">HttpRange</a> <span id="r28 rd" class="r28 r">range</span>)
        {
            <a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r29 rd" class="r29 r">memoryStream</span> = <b>new</b> <a href="@0@mscorlib/A.html#d308091cc690e78d" class="t constructor">MemoryStream</a>();
            <b>using</b> <a href="/Azure.Storage.Blobs/A.html#17d7ce05ae2ed5a8" class="t t">BlobDownloadStreamingResult</a> <span id="r30 rd" class="r30 r">result1</span> = <b>await</b> <span class="r27 r">client</span>.<a href="/Azure.Storage.Blobs/A.html#6ef330c88c9e043e" class="i method">DownloadStreamingAsync</a>(<span class="r31 r">range</span>: <span class="r28 r">range</span>);
            <b>await</b> <span class="r30 r">result1</span>.<a href="/Azure.Storage.Blobs/A.html#65882b6dfc5bedb7" class="i property">Content</a>.<a href="@0@mscorlib/A.html#1ed7a6d41a19abf9" class="i method">CopyToAsync</a>(<span class="r29 r">memoryStream</span>);
            <b>return</b> <span class="r29 r">memoryStream</span>.<a href="@0@mscorlib/A.html#5df5fc757781f05e" class="i method">ToArray</a>();
        }
    }
}
</pre></td></tr></table></div></body></html>

<!DOCTYPE html>
<html><head><title>BlobBaseClientTests.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(7313);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Azure.Storage.Blobs.Tests/BlobBaseClientTests.cs" target="_top">BlobBaseClientTests.cs</a><br/></td><td><a class="blueLink" href="https://github.com/Azure/azure-sdk-for-net/tree/main/sdk/storage/Azure.Storage.Blobs/tests/BlobBaseClientTests.cs" target="_blank">View on GitHub</a></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Azure.Storage.Blobs.Tests" target="_top">Azure.Storage.Blobs.Tests.csproj</a> (Azure.Storage.Blobs.Tests)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License.</span>
 
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">IO</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Net</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Net</span>.<span class="i n">Http</span>.<span class="i n">Headers</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Security</span>.<span class="i n">Cryptography</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>.<span class="i n">Tasks</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Core</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Core</span>.<span class="i n">TestFramework</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Identity</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Storage</span>.<span class="i n">Blobs</span>.<span class="i n">Models</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Storage</span>.<span class="i n">Blobs</span>.<span class="i n">Specialized</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Storage</span>.<span class="i n">Blobs</span>.<span class="i n">Tests</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Storage</span>.<span class="i n">Sas</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Storage</span>.<span class="i n">Shared</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Storage</span>.<span class="i n">Test</span>;
<b>using</b> <span class="i n">Azure</span>.<span class="i n">Storage</span>.<span class="i n">Test</span>.<span class="i n">Shared</span>;
<b>using</b> <span class="i n">Moq</span>;
<b>using</b> <span class="i n">Moq</span>.<span class="i n">Protected</span>;
<b>using</b> <span class="i n">NUnit</span>.<span class="i n">Framework</span>;
<b>using</b> <span class="t">TestConstants</span> = <span class="i n">Azure</span>.<span class="i n">Storage</span>.<span class="i n">Test</span>.<a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a>;
 
<b>namespace</b> <span class="i n">Azure</span>.<span class="i n">Storage</span>.<span class="i n">Blobs</span>.<span class="i n">Test</span>
{
    <b>public class</b> <a id="6047b3fd44e291e9" href="R/../../0000000000.html" target="n" data-glyph="0,0" class="t t">BlobBaseClientTests</a> : <a href="BlobTestBase.cs.html#eff0070a998fc610" class="t t">BlobTestBase</a>
    {
        <b>public</b> <a href="BlobAccessConditionConfigs.cs.html#6ccce773ee1341d4" class="t t">BlobAccessConditionConfigs</a> <a id="c6fe4665c9650047" href="R/c6fe4665c9650047.html" target="n" data-glyph="102,1" class="i property">BlobConditions</a> { <b>get</b>; }
 
        <b>public</b> <a id="74a1efcc4599efd2" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="t constructor">BlobBaseClientTests</a>(<b>bool</b> <span id="r0 rd" class="r0 r">async</span>, <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a> <span id="r1 rd" class="r1 r">serviceVersion</span>)
            : <a href="BlobTestBase.cs.html#584bc3bfb854a893" class="k">base</a>(<span class="r0 r">async</span>, <span class="r1 r">serviceVersion</span>, <b>null</b> <span class="c">/* RecordedTestMode.Record /* to re-record */</span>)
        {
            <a href="#c6fe4665c9650047" class="i property">BlobConditions</a> = <b>new</b> <a href="BlobAccessConditionConfigs.cs.html#2e2ae090549a3b23" class="t constructor">BlobAccessConditionConfigs</a>(<a href="#6047b3fd44e291e9" class="k">this</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public void</b> <a id="78977cecbb4f52a3" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">Ctor_ConnectionString</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r2 rd" class="r2 r">accountName</span> = <span class="s">&quot;accountName&quot;</span>;
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r3 rd" class="r3 r">accountKey</span> = <a href="@0@mscorlib/A.html#fc990bd1275d43d6" class="t t">Convert</a>.<a href="@0@mscorlib/A.html#f9e5bd7b69c5f334" class="i method">ToBase64String</a>(<b>new</b> <b>byte</b>[] { 0, 1, 2, 3, 4, 5 });
 
            <a href="/Azure.Storage.Common/A.html#6b51bf09188ec1c0" class="k">var</a> <span id="r4 rd" class="r4 r">credentials</span> = <b>new</b> <a href="/Azure.Storage.Common/A.html#5886b33715fef501" class="t constructor">StorageSharedKeyCredential</a>(<span class="r2 r">accountName</span>, <span class="r3 r">accountKey</span>);
            <a href="@0@System/A.html#991565dd25f47c90" class="k">var</a> <span id="r5 rd" class="r5 r">blobEndpoint</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">&quot;http://127.0.0.1/&quot;</span> + <span class="r2 r">accountName</span>);
            <a href="@0@System/A.html#991565dd25f47c90" class="k">var</a> <span id="r6 rd" class="r6 r">blobSecondaryEndpoint</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">&quot;http://127.0.0.1/&quot;</span> + <span class="r2 r">accountName</span> + <span class="s">&quot;-secondary&quot;</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#7ccfb159d18cf63e" class="k">var</a> <span id="r7 rd" class="r7 r">connectionString</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4eec574b9d8c7b03" class="t constructor">StorageConnectionString</a>(<span class="r4 r">credentials</span>, <span class="r8 r">blobStorageUri</span>: (<span class="r5 r">blobEndpoint</span>, <span class="r6 r">blobSecondaryEndpoint</span>));
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r9 rd" class="r9 r">containerName</span> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r10 rd" class="r10 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
 
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r11 rd" class="r11 r">blob1</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#1dd5a2f2a12f75b4" class="t constructor">BlobBaseClient</a>(<span class="r7 r">connectionString</span>.<a href="Shared/TestExtensions.cs.html#87d23cce92a2a26b" class="i method">ToString</a>(<b>true</b>), <span class="r9 r">containerName</span>, <span class="r10 r">blobName</span>, <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>()));
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r12 rd" class="r12 r">blob2</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#9f3e9c661ef21b9f" class="t constructor">BlobBaseClient</a>(<span class="r7 r">connectionString</span>.<a href="Shared/TestExtensions.cs.html#87d23cce92a2a26b" class="i method">ToString</a>(<b>true</b>), <span class="r9 r">containerName</span>, <span class="r10 r">blobName</span>));
 
            <a href="/Azure.Storage.Blobs/A.html#9147ea6881bb009b" class="k">var</a> <span id="r13 rd" class="r13 r">builder1</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<span class="r11 r">blob1</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>);
            <a href="/Azure.Storage.Blobs/A.html#9147ea6881bb009b" class="k">var</a> <span id="r14 rd" class="r14 r">builder2</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<span class="r12 r">blob2</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>);
 
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r9 r">containerName</span>, <span class="r13 r">builder1</span>.<a href="/Azure.Storage.Blobs/A.html#4093b9ec449e05da" class="i property">BlobContainerName</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r10 r">blobName</span>, <span class="r13 r">builder1</span>.<a href="/Azure.Storage.Blobs/A.html#66d0888b29b9df5c" class="i property">BlobName</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;accountName&quot;</span>, <span class="r13 r">builder1</span>.<a href="/Azure.Storage.Blobs/A.html#a4106776a1aa6850" class="i property">AccountName</a>);
 
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r9 r">containerName</span>, <span class="r14 r">builder2</span>.<a href="/Azure.Storage.Blobs/A.html#4093b9ec449e05da" class="i property">BlobContainerName</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r10 r">blobName</span>, <span class="r14 r">builder2</span>.<a href="/Azure.Storage.Blobs/A.html#66d0888b29b9df5c" class="i property">BlobName</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;accountName&quot;</span>, <span class="r14 r">builder2</span>.<a href="/Azure.Storage.Blobs/A.html#a4106776a1aa6850" class="i property">AccountName</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="e6c65a861ab03d04" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">Ctor_ConnectionStringEscapeBlobName</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r15 rd" class="r15 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r16 rd" class="r16 r">blobName</span> = <span class="s">&quot;!*&#39;();[]:@&amp;%=+$,/?#äÄöÖüÜß&quot;</span>;
 
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r17 rd" class="r17 r">initalBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r15 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<span class="r16 r">blobName</span>));
            <b>var</b> <span id="r18 rd" class="r18 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
 
            <b>using</b> <a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r19 rd" class="r19 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r18 r">data</span>);
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#66a553618c3f7c72" class="t t">BlobContentInfo</a>&gt; <span id="r20 rd" class="r20 r">uploadResponse</span> = <b>await</b> <span class="r17 r">initalBlob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r19 r">stream</span>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r21 rd" class="r21 r">blob</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#1dd5a2f2a12f75b4" class="t constructor">BlobBaseClient</a>(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#c138650c6d983a3c" class="i property">ConnectionString</a>, <span class="r15 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>, <span class="r16 r">blobName</span>, <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>());
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r22 rd" class="r22 r">propertiesResponse</span> = <b>await</b> <span class="r21 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r20 r">uploadResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#4f7f201ae3000c6c" class="i property">ETag</a>, <span class="r22 r">propertiesResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#8491b5521f600f18" class="i property">ETag</a>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r23 rd" class="r23 r">sasBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(
                <a href="BlobTestBase.cs.html#7b3d7ba8bf1d919e" class="i method">GetServiceClient_BlobServiceSas_Blob</a>(
                    <span class="r24 r">containerName</span>: <span class="r15 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>,
                    <span class="r25 r">blobName</span>: <span class="r16 r">blobName</span>)
                .<a href="/Azure.Storage.Blobs/A.html#e3b6b5726874c210" class="i method">GetBlobContainerClient</a>(<span class="r15 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>)
                .<a href="/Azure.Storage.Blobs/A.html#e796fb2e7b99a23b" class="i method">GetBlobClient</a>(<span class="r16 r">blobName</span>));
 
            <span class="r22 r">propertiesResponse</span> = <b>await</b> <span class="r23 r">sasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r20 r">uploadResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#4f7f201ae3000c6c" class="i property">ETag</a>, <span class="r22 r">propertiesResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#8491b5521f600f18" class="i property">ETag</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public void</b> <a id="38a0661e7ddaf6e2" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">Ctor_Uri</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r26 rd" class="r26 r">accountName</span> = <span class="s">&quot;accountName&quot;</span>;
            <a href="@0@System/A.html#991565dd25f47c90" class="k">var</a> <span id="r27 rd" class="r27 r">blobEndpoint</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">&quot;http://127.0.0.1/&quot;</span> + <span class="r26 r">accountName</span>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r28 rd" class="r28 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(<span class="r27 r">blobEndpoint</span>));
            <a href="/Azure.Storage.Blobs/A.html#9147ea6881bb009b" class="k">var</a> <span id="r29 rd" class="r29 r">builder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<span class="r28 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>);
 
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r26 r">accountName</span>, <span class="r29 r">builder</span>.<a href="/Azure.Storage.Blobs/A.html#a4106776a1aa6850" class="i property">AccountName</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public void</b> <a id="52fa94f31699dcd8" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">Ctor_UriNonIpStyle</a>()
        {
            <span class="c">// Arrange</span>
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r30 rd" class="r30 r">accountName</span> = <span class="s">&quot;accountname&quot;</span>;
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r31 rd" class="r31 r">containerName</span> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r32 rd" class="r32 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
 
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r33 rd" class="r33 r">uri</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span><span class="s">https://</span>{<span class="r30 r">accountName</span>}<span class="s">.blob.core.windows.net/</span>{<span class="r31 r">containerName</span>}<span class="s">/</span>{<span class="r32 r">blobName</span>}<span class="s">&quot;</span>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r34 rd" class="r34 r">blobBaseClient</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(<span class="r33 r">uri</span>);
 
            <span class="c">// Assert</span>
            <a href="/Azure.Storage.Blobs/A.html#9147ea6881bb009b" class="t t">BlobUriBuilder</a> <span id="r35 rd" class="r35 r">builder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<span class="r34 r">blobBaseClient</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>);
 
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r31 r">containerName</span>, <span class="r35 r">builder</span>.<a href="/Azure.Storage.Blobs/A.html#4093b9ec449e05da" class="i property">BlobContainerName</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r32 r">blobName</span>, <span class="r35 r">builder</span>.<a href="/Azure.Storage.Blobs/A.html#66d0888b29b9df5c" class="i property">BlobName</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r30 r">accountName</span>, <span class="r35 r">builder</span>.<a href="/Azure.Storage.Blobs/A.html#a4106776a1aa6850" class="i property">AccountName</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public void</b> <a id="e47612f6751a18dd" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">Ctor_TokenAuth_Http</a>()
        {
            <span class="c">// Arrange</span>
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r36 rd" class="r36 r">httpUri</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<a href="Shared/StorageTestBase.cs.html#014ad718b41f3c72" class="i field">Tenants</a>.<a href="Shared/TenantConfigurationBuilder.cs.html#e30a3a081b015e88" class="i property">TestConfigOAuth</a>.<a href="Shared/TenantConfiguration.cs.html#9c094343c57a64fb" class="i property">BlobServiceEndpoint</a>).<a href="Shared/TestExtensions.cs.html#ce2911231dec4691" class="i method">ToHttp</a>();
 
            <span class="c">// Act</span>
            <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#631bb3deb06304ab" class="i method">AssertExpectedException</a>(
                () =&gt; <b>new</b> <a href="/Azure.Storage.Blobs/A.html#186ca8efbece6dea" class="t constructor">BlobBaseClient</a>(<span class="r36 r">httpUri</span>, <a href="Shared/StorageTestBase.cs.html#014ad718b41f3c72" class="i field">Tenants</a>.<a href="Shared/TenantConfigurationBuilder.cs.html#ce586e6961afa351" class="i method">GetOAuthCredential</a>()),
                 <b>new</b> <a href="@0@mscorlib/A.html#eb98012a74461437" class="t constructor">ArgumentException</a>(<span class="s">&quot;Cannot use TokenCredential without HTTPS.&quot;</span>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public void</b> <a id="f1783bbce0e9270b" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">Ctor_CPK_Http</a>()
        {
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#f11bcd56fc9ad22a" class="t t">CustomerProvidedKey</a> <span id="r37 rd" class="r37 r">customerProvidedKey</span> = <a href="BlobTestBase.cs.html#b481ac8680ce4d57" class="i method">GetCustomerProvidedKey</a>();
            <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a> <span id="r38 rd" class="r38 r">blobClientOptions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5d4c62c639f0fccb" class="t constructor">BlobClientOptions</a>()
            {
                <a href="/Azure.Storage.Blobs/A.html#89658194d148b74d" class="i property">CustomerProvidedKey</a> = <span class="r37 r">customerProvidedKey</span>
            };
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r39 rd" class="r39 r">httpUri</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#9c094343c57a64fb" class="i property">BlobServiceEndpoint</a>).<a href="Shared/TestExtensions.cs.html#ce2911231dec4691" class="i method">ToHttp</a>();
 
            <span class="c">// Act</span>
            <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#631bb3deb06304ab" class="i method">AssertExpectedException</a>(
                () =&gt; <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(<span class="r39 r">httpUri</span>, <span class="r38 r">blobClientOptions</span>),
                <b>new</b> <a href="@0@mscorlib/A.html#eb98012a74461437" class="t constructor">ArgumentException</a>(<span class="s">&quot;Cannot use client-provided key without HTTPS.&quot;</span>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public void</b> <a id="318157e5ac501336" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">Ctor_CPK_EncryptionScope</a>()
        {
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#f11bcd56fc9ad22a" class="t t">CustomerProvidedKey</a> <span id="r40 rd" class="r40 r">customerProvidedKey</span> = <a href="BlobTestBase.cs.html#b481ac8680ce4d57" class="i method">GetCustomerProvidedKey</a>();
            <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a> <span id="r41 rd" class="r41 r">blobClientOptions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5d4c62c639f0fccb" class="t constructor">BlobClientOptions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#89658194d148b74d" class="i property">CustomerProvidedKey</a> = <span class="r40 r">customerProvidedKey</span>,
                <a href="/Azure.Storage.Blobs/A.html#4fc90dcd71e6b6c2" class="i property">EncryptionScope</a> = <a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#0234405d8d5e089b" class="i property">EncryptionScope</a>
            };
 
            <span class="c">// Act</span>
            <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#631bb3deb06304ab" class="i method">AssertExpectedException</a>(
                () =&gt; <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(<b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#9c094343c57a64fb" class="i property">BlobServiceEndpoint</a>), <span class="r41 r">blobClientOptions</span>),
                <b>new</b> <a href="@0@mscorlib/A.html#eb98012a74461437" class="t constructor">ArgumentException</a>(<span class="s">&quot;CustomerProvidedKey and EncryptionScope cannot both be set&quot;</span>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="03279af63813f3a8" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">Ctor_AzureSasCredential</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r42 rd" class="r42 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r43 rd" class="r43 r">sas</span> = <a href="BlobTestBase.cs.html#d71f19ba1645e5f8" class="i method">GetContainerSas</a>(<span class="r42 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>, <a href="/Azure.Storage.Blobs/A.html#4c988bea3bd2c716" class="t t">BlobContainerSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#fa22e892a3c44ecc" class="i field">All</a>).<a href="/Azure.Storage.Blobs/A.html#ea915fd6ac1b7fb0" class="i method">ToString</a>();
            <a href="/Azure.Storage.Blobs/A.html#f0665d15d63242b1" class="k">var</a> <span id="r44 rd" class="r44 r">client</span> = <span class="r42 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#e796fb2e7b99a23b" class="i method">GetBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>());
            <b>await</b> <span class="r44 r">client</span>.<a href="/Azure.Storage.Blobs/A.html#b43e68f04bbbae62" class="i method">UploadAsync</a>(<b>new</b> <a href="@0@mscorlib/A.html#d308091cc690e78d" class="t constructor">MemoryStream</a>());
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r45 rd" class="r45 r">blobUri</span> = <span class="r44 r">client</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>;
 
            <span class="c">// Act</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="k">var</a> <span id="r46 rd" class="r46 r">sasClient</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#44b3c9631ee3d43a" class="t constructor">BlobBaseClient</a>(<span class="r45 r">blobUri</span>, <b>new</b> <a href="/Azure.Core/A.html#7c49a23f7592174a" class="t constructor">AzureSasCredential</a>(<span class="r43 r">sas</span>), <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>()));
            <a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a> <span id="r47 rd" class="r47 r">blobProperties</span> = <b>await</b> <span class="r46 r">sasClient</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r47 r">blobProperties</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="8982211c58ef6bcb" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">Ctor_AzureSasCredential_UserDelegationSAS</a>()
        {
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r48 rd" class="r48 r">oauthService</span> = <a href="BlobTestBase.cs.html#a0ccf5affc88da7d" class="i property">BlobsClientBuilder</a>.<a href="ClientBuilderExtensions.cs.html#a816bf81da5c6a2b" class="i method">GetServiceClient_OAuth</a>();
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r49 rd" class="r49 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(<span class="r48 r">oauthService</span>);
            <a href="/Azure.Storage.Blobs/A.html#f0665d15d63242b1" class="k">var</a> <span id="r50 rd" class="r50 r">client</span> = <span class="r49 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#e796fb2e7b99a23b" class="i method">GetBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>());
            <b>await</b> <span class="r50 r">client</span>.<a href="/Azure.Storage.Blobs/A.html#b43e68f04bbbae62" class="i method">UploadAsync</a>(<b>new</b> <a href="@0@mscorlib/A.html#d308091cc690e78d" class="t constructor">MemoryStream</a>());
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r51 rd" class="r51 r">blobUri</span> = <span class="r50 r">client</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>;
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#781f283857f7caf2" class="t t">UserDelegationKey</a>&gt; <span id="r52 rd" class="r52 r">userDelegationKey</span> = <b>await</b> <span class="r48 r">oauthService</span>.<a href="/Azure.Storage.Blobs/A.html#0e8108c060ec84fc" class="i method">GetUserDelegationKeyAsync</a>(
                <span class="r53 r">startsOn</span>: <b>null</b>,
                <span class="r54 r">expiresOn</span>: <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(1));
            <a href="/Azure.Storage.Blobs/A.html#494fcdf61457bd9e" class="k">var</a> <span id="r55 rd" class="r55 r">sasBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#0fa8cbdfa7613015" class="t constructor">BlobSasBuilder</a>(<a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#796b36cb23a40798" class="i field">All</a>, <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(1))
            {
                <a href="/Azure.Storage.Blobs/A.html#ce07251198338797" class="i property">BlobContainerName</a> = <span class="r50 r">client</span>.<a href="/Azure.Storage.Blobs/A.html#8125465144699fdb" class="i property">BlobContainerName</a>,
                <a href="/Azure.Storage.Blobs/A.html#5faddb946ddd32e7" class="i property">BlobName</a> = <span class="r50 r">client</span>.<a href="/Azure.Storage.Blobs/A.html#157bb830a0c2db34" class="i property">Name</a>,
            };
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r56 rd" class="r56 r">sas</span> = <span class="r55 r">sasBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#dbb27de69fa640c0" class="i method">ToSasQueryParameters</a>(<span class="r52 r">userDelegationKey</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>, <span class="r50 r">client</span>.<a href="/Azure.Storage.Blobs/A.html#0ec0e7af4edc605e" class="i property">AccountName</a>).<a href="/Azure.Storage.Blobs/A.html#ea915fd6ac1b7fb0" class="i method">ToString</a>();
 
            <span class="c">// Act</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="k">var</a> <span id="r57 rd" class="r57 r">sasClient</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#44b3c9631ee3d43a" class="t constructor">BlobBaseClient</a>(<span class="r51 r">blobUri</span>, <b>new</b> <a href="/Azure.Core/A.html#7c49a23f7592174a" class="t constructor">AzureSasCredential</a>(<span class="r56 r">sas</span>), <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>()));
            <a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a> <span id="r58 rd" class="r58 r">blobProperties</span> = <b>await</b> <span class="r57 r">sasClient</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r58 r">blobProperties</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="cfff514a17455b48" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">Ctor_AzureSasCredential_VerifyNoSasInUri</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r59 rd" class="r59 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r60 rd" class="r60 r">sas</span> = <a href="BlobTestBase.cs.html#d71f19ba1645e5f8" class="i method">GetContainerSas</a>(<span class="r59 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>, <a href="/Azure.Storage.Blobs/A.html#4c988bea3bd2c716" class="t t">BlobContainerSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#fa22e892a3c44ecc" class="i field">All</a>).<a href="/Azure.Storage.Blobs/A.html#ea915fd6ac1b7fb0" class="i method">ToString</a>();
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r61 rd" class="r61 r">blobUri</span> = <span class="r59 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#e796fb2e7b99a23b" class="i method">GetBlobClient</a>(<span class="s">&quot;foo&quot;</span>).<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>;
            <span class="r61 r">blobUri</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="r61 r">blobUri</span>.<a href="@0@System/A.html#bf3caa11ab73e433" class="i method">ToString</a>() + <span class="s">&quot;?&quot;</span> + <span class="r60 r">sas</span>);
 
            <span class="c">// Act</span>
            <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#97823387bdf80bda" class="i method">AssertExpectedException</a>&lt;<a href="@0@mscorlib/A.html#109b3ef6299ef9df" class="t t">ArgumentException</a>&gt;(
                () =&gt; <b>new</b> <a href="/Azure.Storage.Blobs/A.html#44b3c9631ee3d43a" class="t constructor">BlobBaseClient</a>(<span class="r61 r">blobUri</span>, <b>new</b> <a href="/Azure.Core/A.html#7c49a23f7592174a" class="t constructor">AzureSasCredential</a>(<span class="r60 r">sas</span>)),
                <span id="r62 rd" class="r62 r">e</span> =&gt; <span class="r62 r">e</span>.<a href="@0@mscorlib/A.html#71cfcd61786aa2d8" class="i property">Message</a>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<span class="s">$&quot;</span><span class="s">You cannot use </span>{<b>nameof</b>(<a href="/Azure.Core/A.html#77bc7924ac000276" class="t t">AzureSasCredential</a>)}<span class="s"> when the resource URI also contains a Shared Access Signature</span><span class="s">&quot;</span>));
        }
 
        <span class="k preprocess">#</span><span class="k preprocess">region</span> Sequential Download
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="62a7ad984f682d4f" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r63 rd" class="r63 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <b>var</b> <span id="r64 rd" class="r64 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r65 rd" class="r65 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r63 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r66 rd" class="r66 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r64 r">data</span>))
            {
                <b>await</b> <span class="r65 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r66 r">stream</span>);
            }
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#3ce0c298c6f02684" class="t t">BlobDownloadInfo</a>&gt; <span id="r67 rd" class="r67 r">response</span> = <b>await</b> <span class="r65 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#3d24e9ffd423b49e" class="i method">DownloadAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r64 r">data</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r67 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#d9898dabb0903dc6" class="i property">ContentLength</a>);
            <a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r68 rd" class="r68 r">actual</span> = <b>new</b> <a href="@0@mscorlib/A.html#d308091cc690e78d" class="t constructor">MemoryStream</a>();
            <b>await</b> <span class="r67 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#5bf65f1a0f1a3713" class="i property">Content</a>.<a href="@0@mscorlib/A.html#1ed7a6d41a19abf9" class="i method">CopyToAsync</a>(<span class="r68 r">actual</span>);
            <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#59794893533f4fba" class="i method">AssertSequenceEqual</a>(<span class="r64 r">data</span>, <span class="r68 r">actual</span>.<a href="@0@mscorlib/A.html#5df5fc757781f05e" class="i method">ToArray</a>());
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="21f0eebd6420623c" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_Disposal</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r69 rd" class="r69 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <b>var</b> <span id="r70 rd" class="r70 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r71 rd" class="r71 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r69 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r72 rd" class="r72 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r70 r">data</span>))
            {
                <b>await</b> <span class="r71 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r72 r">stream</span>);
            }
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#3ce0c298c6f02684" class="t t">BlobDownloadInfo</a>&gt; <span id="r73 rd" class="r73 r">response</span> = <b>await</b> <span class="r71 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#3d24e9ffd423b49e" class="i method">DownloadAsync</a>();
            <span class="r73 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#4e9b654dbd994867" class="i method">Dispose</a>();
            <span class="r73 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#4e9b654dbd994867" class="i method">Dispose</a>(); <span class="c">// 2nd disposal shouldn&#39;t throw.</span>
 
            <span class="c">// Assert</span>
            <span class="c">// Not thrown</span>
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="f64dcefa4e2a9d30" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_Streaming</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r74 rd" class="r74 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <b>var</b> <span id="r75 rd" class="r75 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r76 rd" class="r76 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r74 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r77 rd" class="r77 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r75 r">data</span>))
            {
                <b>await</b> <span class="r76 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r77 r">stream</span>);
            }
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#17d7ce05ae2ed5a8" class="t t">BlobDownloadStreamingResult</a>&gt; <span id="r78 rd" class="r78 r">response</span> = <b>await</b> <span class="r76 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#6ef330c88c9e043e" class="i method">DownloadStreamingAsync</a>();
 
            <span class="c">// Assert</span>
 
            <span class="c">// Ensure that we grab the whole ETag value from the service without removing the quotes</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r78 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#11972a51ed7547d7" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#c9cdc23d88d1d5a3" class="i property">ETag</a>.<a href="/Azure.Core/A.html#c02596ded366f933" class="i method">ToString</a>(), <span class="s">$&quot;</span>\&quot;{<span class="r78 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#5cb5957443570b99" class="i property">ETag</a>.<a href="@0@mscorlib/A.html#d83d2db767b43db7" class="i method">ToString</a>()}\&quot;<span class="s">&quot;</span>);
 
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r75 r">data</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r78 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#11972a51ed7547d7" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#f201c7780503f6f4" class="i property">ContentLength</a>);
            <a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r79 rd" class="r79 r">actual</span> = <b>new</b> <a href="@0@mscorlib/A.html#d308091cc690e78d" class="t constructor">MemoryStream</a>();
            <b>await</b> <span class="r78 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#65882b6dfc5bedb7" class="i property">Content</a>.<a href="@0@mscorlib/A.html#1ed7a6d41a19abf9" class="i method">CopyToAsync</a>(<span class="r79 r">actual</span>);
            <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#59794893533f4fba" class="i method">AssertSequenceEqual</a>(<span class="r75 r">data</span>, <span class="r79 r">actual</span>.<a href="@0@mscorlib/A.html#5df5fc757781f05e" class="i method">ToArray</a>());
 
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#ab11c19c91d77efa" class="t t">LeaseStatus</a>.<a href="/Azure.Storage.Blobs/A.html#4676199349264a63" class="i field">Unlocked</a>, <span class="r78 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#11972a51ed7547d7" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#ff1e4f5c32ac7545" class="i property">LeaseStatus</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#774c843d1f085d80" class="t t">LeaseState</a>.<a href="/Azure.Storage.Blobs/A.html#9a8735890416d5dd" class="i field">Available</a>, <span class="r78 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#11972a51ed7547d7" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#55fe586307012000" class="i property">LeaseState</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#9451f8799dfa5482" class="t t">LeaseDurationType</a>.<a href="/Azure.Storage.Blobs/A.html#22e49609267c4423" class="i field">Infinite</a>, <span class="r78 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#11972a51ed7547d7" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#4fdaba6a4dc270e9" class="i property">LeaseDuration</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="5d5af3f229166337" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_Streaming_Disposal</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r80 rd" class="r80 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <b>var</b> <span id="r81 rd" class="r81 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r82 rd" class="r82 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r80 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r83 rd" class="r83 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r81 r">data</span>))
            {
                <b>await</b> <span class="r82 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r83 r">stream</span>);
            }
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#17d7ce05ae2ed5a8" class="t t">BlobDownloadStreamingResult</a>&gt; <span id="r84 rd" class="r84 r">response</span> = <b>await</b> <span class="r82 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#6ef330c88c9e043e" class="i method">DownloadStreamingAsync</a>();
            <span class="r84 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#91cd24fd150b425d" class="i method">Dispose</a>();
            <span class="r84 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#91cd24fd150b425d" class="i method">Dispose</a>(); <span class="c">// 2nd disposal shouldn&#39;t throw</span>
 
            <span class="c">// Assert</span>
            <span class="c">// not thrown</span>
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="eff2ca4b0e1b035a" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_BinaryData</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r85 rd" class="r85 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <b>var</b> <span id="r86 rd" class="r86 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r87 rd" class="r87 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r85 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r88 rd" class="r88 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r86 r">data</span>))
            {
                <b>await</b> <span class="r87 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r88 r">stream</span>);
            }
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#e20a1a448aa3110c" class="t t">BlobDownloadResult</a>&gt; <span id="r89 rd" class="r89 r">response</span> = <b>await</b> <span class="r87 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a6e46609fba22e81" class="i method">DownloadContentAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r86 r">data</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r89 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#38359c87135e7cc6" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#f201c7780503f6f4" class="i property">ContentLength</a>);
            <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#59794893533f4fba" class="i method">AssertSequenceEqual</a>(<span class="r86 r">data</span>, <span class="r89 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#8b9ab46048dfc623" class="i property">Content</a>.<a href="/System.Memory.Data/A.html#288a77b70eac3839" class="i method">ToArray</a>());
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="4e46d45c09b15ee5" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_ZeroSizeBlob</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r90 rd" class="r90 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r91 rd" class="r91 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r90 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>byte</b>[] <span id="r92 rd" class="r92 r">data</span> = <b>new</b> <b>byte</b>[] { };
            <b>using</b> <a href="@0@mscorlib/A.html#f956b0c07e86df64" class="t t">Stream</a> <span id="r93 rd" class="r93 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r92 r">data</span>);
            <b>await</b> <span class="r91 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r93 r">stream</span>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#3ce0c298c6f02684" class="t t">BlobDownloadInfo</a>&gt; <span id="r94 rd" class="r94 r">response</span> = <b>await</b> <span class="r91 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#3d24e9ffd423b49e" class="i method">DownloadAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r92 r">data</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r94 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#d9898dabb0903dc6" class="i property">ContentLength</a>);
            <a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r95 rd" class="r95 r">actual</span> = <b>new</b> <a href="@0@mscorlib/A.html#d308091cc690e78d" class="t constructor">MemoryStream</a>();
            <b>await</b> <span class="r94 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#5bf65f1a0f1a3713" class="i property">Content</a>.<a href="@0@mscorlib/A.html#1ed7a6d41a19abf9" class="i method">CopyToAsync</a>(<span class="r95 r">actual</span>);
            <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#59794893533f4fba" class="i method">AssertSequenceEqual</a>(<span class="r92 r">data</span>, <span class="r95 r">actual</span>.<a href="@0@mscorlib/A.html#5df5fc757781f05e" class="i method">ToArray</a>());
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="fdcbb371d037276f" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_ZeroSizeBlob_Streaming</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r96 rd" class="r96 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r97 rd" class="r97 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r96 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>byte</b>[] <span id="r98 rd" class="r98 r">data</span> = <b>new</b> <b>byte</b>[] { };
            <b>using</b> <a href="@0@mscorlib/A.html#f956b0c07e86df64" class="t t">Stream</a> <span id="r99 rd" class="r99 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r98 r">data</span>);
            <b>await</b> <span class="r97 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r99 r">stream</span>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#17d7ce05ae2ed5a8" class="t t">BlobDownloadStreamingResult</a>&gt; <span id="r100 rd" class="r100 r">response</span> = <b>await</b> <span class="r97 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#6ef330c88c9e043e" class="i method">DownloadStreamingAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r98 r">data</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r100 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#11972a51ed7547d7" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#f201c7780503f6f4" class="i property">ContentLength</a>);
            <a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r101 rd" class="r101 r">actual</span> = <b>new</b> <a href="@0@mscorlib/A.html#d308091cc690e78d" class="t constructor">MemoryStream</a>();
            <b>await</b> <span class="r100 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#65882b6dfc5bedb7" class="i property">Content</a>.<a href="@0@mscorlib/A.html#1ed7a6d41a19abf9" class="i method">CopyToAsync</a>(<span class="r101 r">actual</span>);
            <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#59794893533f4fba" class="i method">AssertSequenceEqual</a>(<span class="r98 r">data</span>, <span class="r101 r">actual</span>.<a href="@0@mscorlib/A.html#5df5fc757781f05e" class="i method">ToArray</a>());
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="202d0b484b92d712" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_ZeroSizeBlob_BinaryData</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r102 rd" class="r102 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r103 rd" class="r103 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r102 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>byte</b>[] <span id="r104 rd" class="r104 r">data</span> = <b>new</b> <b>byte</b>[] { };
            <b>using</b> <a href="@0@mscorlib/A.html#f956b0c07e86df64" class="t t">Stream</a> <span id="r105 rd" class="r105 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r104 r">data</span>);
            <b>await</b> <span class="r103 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r105 r">stream</span>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#e20a1a448aa3110c" class="t t">BlobDownloadResult</a>&gt; <span id="r106 rd" class="r106 r">response</span> = <b>await</b> <span class="r103 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a6e46609fba22e81" class="i method">DownloadContentAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r104 r">data</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r106 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#38359c87135e7cc6" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#f201c7780503f6f4" class="i property">ContentLength</a>);
            <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#59794893533f4fba" class="i method">AssertSequenceEqual</a>(<span class="r104 r">data</span>, <span class="r106 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#8b9ab46048dfc623" class="i property">Content</a>.<a href="/System.Memory.Data/A.html#288a77b70eac3839" class="i method">ToArray</a>());
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="eda41a3676d615b9" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_Tags</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r107 rd" class="r107 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <b>var</b> <span id="r108 rd" class="r108 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r109 rd" class="r109 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r107 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r110 rd" class="r110 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r108 r">data</span>))
            {
                <b>await</b> <span class="r109 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r110 r">stream</span>);
            }
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r111 rd" class="r111 r">tags</span> = <a href="BlobTestBase.cs.html#7fec8daec2d431bb" class="i method">BuildTags</a>();
            <b>await</b> <span class="r109 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r111 r">tags</span>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#3ce0c298c6f02684" class="t t">BlobDownloadInfo</a>&gt; <span id="r112 rd" class="r112 r">response</span> = <b>await</b> <span class="r109 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#3d24e9ffd423b49e" class="i method">DownloadAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r111 r">tags</span>.<a href="@0@mscorlib/A.html#3d6c21c4e9bd5f63" class="i property">Count</a>, <span class="r112 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#e967990c9b1e7bf1" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#1ca0b81648fe66cc" class="i property">TagCount</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="67b632356a4eaebb" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_Tags_Streaming</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r113 rd" class="r113 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <b>var</b> <span id="r114 rd" class="r114 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r115 rd" class="r115 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r113 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r116 rd" class="r116 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r114 r">data</span>))
            {
                <b>await</b> <span class="r115 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r116 r">stream</span>);
            }
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r117 rd" class="r117 r">tags</span> = <a href="BlobTestBase.cs.html#7fec8daec2d431bb" class="i method">BuildTags</a>();
            <b>await</b> <span class="r115 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r117 r">tags</span>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#17d7ce05ae2ed5a8" class="t t">BlobDownloadStreamingResult</a>&gt; <span id="r118 rd" class="r118 r">response</span> = <b>await</b> <span class="r115 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#6ef330c88c9e043e" class="i method">DownloadStreamingAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r117 r">tags</span>.<a href="@0@mscorlib/A.html#3d6c21c4e9bd5f63" class="i property">Count</a>, <span class="r118 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#11972a51ed7547d7" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#1ca0b81648fe66cc" class="i property">TagCount</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="4069aa1342712053" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_Tags_BinaryData</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r119 rd" class="r119 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <b>var</b> <span id="r120 rd" class="r120 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r121 rd" class="r121 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r119 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r122 rd" class="r122 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r120 r">data</span>))
            {
                <b>await</b> <span class="r121 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r122 r">stream</span>);
            }
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r123 rd" class="r123 r">tags</span> = <a href="BlobTestBase.cs.html#7fec8daec2d431bb" class="i method">BuildTags</a>();
            <b>await</b> <span class="r121 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r123 r">tags</span>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#e20a1a448aa3110c" class="t t">BlobDownloadResult</a>&gt; <span id="r124 rd" class="r124 r">response</span> = <b>await</b> <span class="r121 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a6e46609fba22e81" class="i method">DownloadContentAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r123 r">tags</span>.<a href="@0@mscorlib/A.html#3d6c21c4e9bd5f63" class="i property">Count</a>, <span class="r124 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#38359c87135e7cc6" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#1ca0b81648fe66cc" class="i property">TagCount</a>);
        }
 
        <span class="k preprocess">#</span><span class="k preprocess">region</span> Secondary Storage
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="866d18df521b5a50" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_ReadFromSecondaryStorage</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r125 rd" class="r125 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(<a href="BlobTestBase.cs.html#412930e23462b95c" class="i method">GetServiceClient_SecondaryAccount_ReadEnabledOnRetry</a>(1, <b>out</b> <a href="Shared/TestExceptionPolicy.cs.html#0d68b3a20bb1a76e" class="t t">TestExceptionPolicy</a> <span id="r126 rd" class="r126 r">testExceptionPolicy</span>));
 
            <span class="c">// Arrange</span>
            <b>var</b> <span id="r127 rd" class="r127 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r128 rd" class="r128 r">blockBlobClient</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r125 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r129 rd" class="r129 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r127 r">data</span>))
            {
                <b>await</b> <span class="r128 r">blockBlobClient</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r129 r">stream</span>);
            }
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#3ce0c298c6f02684" class="t t">BlobDownloadInfo</a>&gt; <span id="r130 rd" class="r130 r">response</span> = <b>await</b> <a href="Shared/StorageTestBase.cs.html#6e32d03176ec7912" class="i method">EnsurePropagatedAsync</a>(
                <b>async</b> () =&gt; <b>await</b> <span class="r128 r">blockBlobClient</span>.<a href="/Azure.Storage.Blobs/A.html#3d24e9ffd423b49e" class="i method">DownloadAsync</a>(),
                <span id="r131 rd" class="r131 r">downloadInfo</span> =&gt; <span class="r131 r">downloadInfo</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#53e6401c580f9719" class="i property">Status</a> != 404);
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r127 r">data</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r130 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#d9898dabb0903dc6" class="i property">ContentLength</a>);
            <a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r132 rd" class="r132 r">actual</span> = <b>new</b> <a href="@0@mscorlib/A.html#d308091cc690e78d" class="t constructor">MemoryStream</a>();
            <b>await</b> <span class="r130 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#5bf65f1a0f1a3713" class="i property">Content</a>.<a href="@0@mscorlib/A.html#1ed7a6d41a19abf9" class="i method">CopyToAsync</a>(<span class="r132 r">actual</span>);
            <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#59794893533f4fba" class="i method">AssertSequenceEqual</a>(<span class="r127 r">data</span>, <span class="r132 r">actual</span>.<a href="@0@mscorlib/A.html#5df5fc757781f05e" class="i method">ToArray</a>());
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="BlobTestBase.cs.html#d199883d497e968e" class="i method">SecondaryStorageTenantPrimaryHost</a>(), <span class="r126 r">testExceptionPolicy</span>.<a href="Shared/TestExceptionPolicy.cs.html#150340088532dcec" class="i property">HostsSetInRequests</a>[0]);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="BlobTestBase.cs.html#149b4a0a1156aad2" class="i method">SecondaryStorageTenantSecondaryHost</a>(), <span class="r126 r">testExceptionPolicy</span>.<a href="Shared/TestExceptionPolicy.cs.html#150340088532dcec" class="i property">HostsSetInRequests</a>[1]);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="cb420fe914bae1ad" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_ReadFromSecondaryStorageShouldNotPut</a>()
        {
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r133 rd" class="r133 r">serviceClient</span> = <a href="BlobTestBase.cs.html#412930e23462b95c" class="i method">GetServiceClient_SecondaryAccount_ReadEnabledOnRetry</a>(
                1,
                <b>out</b> <a href="Shared/TestExceptionPolicy.cs.html#0d68b3a20bb1a76e" class="t t">TestExceptionPolicy</a> <span id="r134 rd" class="r134 r">testExceptionPolicy</span>,
                <b>false</b>,
                <b>new</b> <a href="@0@mscorlib/A.html#d2ac2c19c9cf1d44" class="t constructor">List</a>&lt;<a href="/Azure.Core/A.html#fccfde0a4ed3b2c2" class="t t">RequestMethod</a>&gt;(<b>new</b> <a href="/Azure.Core/A.html#fccfde0a4ed3b2c2" class="t t">RequestMethod</a>[] { <a href="/Azure.Core/A.html#fccfde0a4ed3b2c2" class="t t">RequestMethod</a>.<a href="/Azure.Core/A.html#e8de8f17e6d623af" class="i property">Put</a> }));
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r135 rd" class="r135 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(<span class="r133 r">serviceClient</span>);
 
            <span class="c">// Arrange</span>
            <b>var</b> <span id="r136 rd" class="r136 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r137 rd" class="r137 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r135 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r138 rd" class="r138 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r136 r">data</span>))
            {
                <b>await</b> <span class="r137 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r138 r">stream</span>);
            }
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#3ce0c298c6f02684" class="t t">BlobDownloadInfo</a>&gt; <span id="r139 rd" class="r139 r">response</span> = <b>await</b> <span class="r137 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#3d24e9ffd423b49e" class="i method">DownloadAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r136 r">data</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r139 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#d9898dabb0903dc6" class="i property">ContentLength</a>);
            <a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r140 rd" class="r140 r">actual</span> = <b>new</b> <a href="@0@mscorlib/A.html#d308091cc690e78d" class="t constructor">MemoryStream</a>();
            <b>await</b> <span class="r139 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#5bf65f1a0f1a3713" class="i property">Content</a>.<a href="@0@mscorlib/A.html#1ed7a6d41a19abf9" class="i method">CopyToAsync</a>(<span class="r140 r">actual</span>);
            <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#59794893533f4fba" class="i method">AssertSequenceEqual</a>(<span class="r136 r">data</span>, <span class="r140 r">actual</span>.<a href="@0@mscorlib/A.html#5df5fc757781f05e" class="i method">ToArray</a>());
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="BlobTestBase.cs.html#d199883d497e968e" class="i method">SecondaryStorageTenantPrimaryHost</a>(), <span class="r134 r">testExceptionPolicy</span>.<a href="Shared/TestExceptionPolicy.cs.html#150340088532dcec" class="i property">HostsSetInRequests</a>[0]);
            <span class="c">// should not toggle to secondary host on put request failure</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="BlobTestBase.cs.html#d199883d497e968e" class="i method">SecondaryStorageTenantPrimaryHost</a>(), <span class="r134 r">testExceptionPolicy</span>.<a href="Shared/TestExceptionPolicy.cs.html#150340088532dcec" class="i property">HostsSetInRequests</a>[1]);
        }
        <span class="k preprocess">#</span><span class="k preprocess">endregion</span>
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="0ea7042e97131982" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_CPK</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r141 rd" class="r141 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <b>var</b> <span id="r142 rd" class="r142 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r143 rd" class="r143 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r141 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Storage.Blobs/A.html#f11bcd56fc9ad22a" class="t t">CustomerProvidedKey</a> <span id="r144 rd" class="r144 r">customerProvidedKey</span> = <a href="BlobTestBase.cs.html#b481ac8680ce4d57" class="i method">GetCustomerProvidedKey</a>();
            <span class="r143 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r143 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a29450bfddd3d355" class="i method">WithCustomerProvidedKey</a>(<span class="r144 r">customerProvidedKey</span>));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r145 rd" class="r145 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r142 r">data</span>))
            {
                <b>await</b> <span class="r143 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r145 r">stream</span>);
            }
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#3ce0c298c6f02684" class="t t">BlobDownloadInfo</a>&gt; <span id="r146 rd" class="r146 r">response</span> = <b>await</b> <span class="r143 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#3d24e9ffd423b49e" class="i method">DownloadAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r144 r">customerProvidedKey</span>.<a href="/Azure.Storage.Blobs/A.html#7af1811ae000bcba" class="i property">EncryptionKeyHash</a>, <span class="r146 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#e967990c9b1e7bf1" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#31af33edca26a19e" class="i property">EncryptionKeySha256</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="8351d08c043d8eff" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_CPK_Streaming</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r147 rd" class="r147 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <b>var</b> <span id="r148 rd" class="r148 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r149 rd" class="r149 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r147 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Storage.Blobs/A.html#f11bcd56fc9ad22a" class="t t">CustomerProvidedKey</a> <span id="r150 rd" class="r150 r">customerProvidedKey</span> = <a href="BlobTestBase.cs.html#b481ac8680ce4d57" class="i method">GetCustomerProvidedKey</a>();
            <span class="r149 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r149 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a29450bfddd3d355" class="i method">WithCustomerProvidedKey</a>(<span class="r150 r">customerProvidedKey</span>));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r151 rd" class="r151 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r148 r">data</span>))
            {
                <b>await</b> <span class="r149 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r151 r">stream</span>);
            }
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#17d7ce05ae2ed5a8" class="t t">BlobDownloadStreamingResult</a>&gt; <span id="r152 rd" class="r152 r">response</span> = <b>await</b> <span class="r149 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#6ef330c88c9e043e" class="i method">DownloadStreamingAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r150 r">customerProvidedKey</span>.<a href="/Azure.Storage.Blobs/A.html#7af1811ae000bcba" class="i property">EncryptionKeyHash</a>, <span class="r152 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#11972a51ed7547d7" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#31af33edca26a19e" class="i property">EncryptionKeySha256</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="769ae3d7ac2a3c89" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_CPK_BinaryData</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r153 rd" class="r153 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <b>var</b> <span id="r154 rd" class="r154 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r155 rd" class="r155 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r153 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Storage.Blobs/A.html#f11bcd56fc9ad22a" class="t t">CustomerProvidedKey</a> <span id="r156 rd" class="r156 r">customerProvidedKey</span> = <a href="BlobTestBase.cs.html#b481ac8680ce4d57" class="i method">GetCustomerProvidedKey</a>();
            <span class="r155 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r155 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a29450bfddd3d355" class="i method">WithCustomerProvidedKey</a>(<span class="r156 r">customerProvidedKey</span>));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r157 rd" class="r157 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r154 r">data</span>))
            {
                <b>await</b> <span class="r155 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r157 r">stream</span>);
            }
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#e20a1a448aa3110c" class="t t">BlobDownloadResult</a>&gt; <span id="r158 rd" class="r158 r">response</span> = <b>await</b> <span class="r155 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a6e46609fba22e81" class="i method">DownloadContentAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r156 r">customerProvidedKey</span>.<a href="/Azure.Storage.Blobs/A.html#7af1811ae000bcba" class="i property">EncryptionKeyHash</a>, <span class="r158 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#38359c87135e7cc6" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#31af33edca26a19e" class="i property">EncryptionKeySha256</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#6de5212dacb3a5ca" class="i field">V2019_07_07</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="8d9699d3aa37b916" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_EncryptionScope</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r159 rd" class="r159 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <b>var</b> <span id="r160 rd" class="r160 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r161 rd" class="r161 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r159 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <span class="r161 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r161 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#73519c629746cdda" class="i method">WithEncryptionScope</a>(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#0234405d8d5e089b" class="i property">EncryptionScope</a>));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r162 rd" class="r162 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r160 r">data</span>))
            {
                <b>await</b> <span class="r161 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r162 r">stream</span>);
            }
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#3ce0c298c6f02684" class="t t">BlobDownloadInfo</a>&gt; <span id="r163 rd" class="r163 r">response</span> = <b>await</b> <span class="r161 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#3d24e9ffd423b49e" class="i method">DownloadAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#0234405d8d5e089b" class="i property">EncryptionScope</a>, <span class="r163 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#e967990c9b1e7bf1" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#70a56a1ac683ee41" class="i property">EncryptionScope</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#6de5212dacb3a5ca" class="i field">V2019_07_07</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="32b48851085f33d8" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_EncryptionScope_Streaming</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r164 rd" class="r164 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <b>var</b> <span id="r165 rd" class="r165 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r166 rd" class="r166 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r164 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <span class="r166 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r166 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#73519c629746cdda" class="i method">WithEncryptionScope</a>(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#0234405d8d5e089b" class="i property">EncryptionScope</a>));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r167 rd" class="r167 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r165 r">data</span>))
            {
                <b>await</b> <span class="r166 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r167 r">stream</span>);
            }
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#17d7ce05ae2ed5a8" class="t t">BlobDownloadStreamingResult</a>&gt; <span id="r168 rd" class="r168 r">response</span> = <b>await</b> <span class="r166 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#6ef330c88c9e043e" class="i method">DownloadStreamingAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#0234405d8d5e089b" class="i property">EncryptionScope</a>, <span class="r168 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#11972a51ed7547d7" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#70a56a1ac683ee41" class="i property">EncryptionScope</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#6de5212dacb3a5ca" class="i field">V2019_07_07</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="136bc52295deb077" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_EncryptionScope_BinaryData</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r169 rd" class="r169 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <b>var</b> <span id="r170 rd" class="r170 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r171 rd" class="r171 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r169 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <span class="r171 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r171 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#73519c629746cdda" class="i method">WithEncryptionScope</a>(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#0234405d8d5e089b" class="i property">EncryptionScope</a>));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r172 rd" class="r172 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r170 r">data</span>))
            {
                <b>await</b> <span class="r171 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r172 r">stream</span>);
            }
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#e20a1a448aa3110c" class="t t">BlobDownloadResult</a>&gt; <span id="r173 rd" class="r173 r">response</span> = <b>await</b> <span class="r171 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a6e46609fba22e81" class="i method">DownloadContentAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#0234405d8d5e089b" class="i property">EncryptionScope</a>, <span class="r173 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#38359c87135e7cc6" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#70a56a1ac683ee41" class="i property">EncryptionScope</a>);
        }
 
        [<span class="t constructor">Test</span>]
        [<span class="t constructor">TestCase</span>(10 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>, 1 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>)]
        [<span class="t constructor">TestCase</span>(256 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>, 255 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>)]
        [<span class="t constructor">TestCase</span>(257 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>, 256 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>)]
        [<span class="t constructor">TestCase</span>(1 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f083580f332431a9" class="i field">MB</a>, 1 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>)]
        [<a href="/Azure.Core.TestFramework/A.html#9ce10179a72216c9" class="t constructor">LiveOnly</a>] <span class="c">// Stream copy uses ArrayPool under the hood. Which brings undeterministic behavior for larger content.</span>
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="502e55d56f325224" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_WithUnreliableConnection</a>(<b>int</b> <span id="r174 rd" class="r174 r">dataSize</span>, <b>int</b> <span id="r175 rd" class="r175 r">faultPoint</span>)
        {
            <span class="c">// Arrange</span>
            <b>int</b> <span id="r176 rd" class="r176 r">timesFaulted</span> = 0;
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r177 rd" class="r177 r">service</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(
                <b>new</b> <a href="/Azure.Storage.Blobs/A.html#991ca5e21b6fe5b6" class="t constructor">BlobServiceClient</a>(
                    <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#9c094343c57a64fb" class="i property">BlobServiceEndpoint</a>),
                    <b>new</b> <a href="/Azure.Storage.Common/A.html#5886b33715fef501" class="t constructor">StorageSharedKeyCredential</a>(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#774d8fba75d6b5dd" class="i property">AccountName</a>, <a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#fc6c2fe34872ce46" class="i property">AccountKey</a>),
                    <a href="BlobTestBase.cs.html#292debe31a448ee6" class="i method">GetFaultyBlobConnectionOptions</a>(
                        <span class="r178 r">raiseAt</span>: <span class="r175 r">faultPoint</span>,
                        <span class="r179 r">raise</span>: <b>new</b> <a href="@0@mscorlib/A.html#db370b64091ac4df" class="t constructor">IOException</a>(<span class="s">&quot;Manually injected testing fault&quot;</span>),
                        () =&gt;
                        {
                            <span class="r176 r">timesFaulted</span>++;
                        })));
 
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r180 rd" class="r180 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(<span class="r181 r">service</span>: <span class="r177 r">service</span>);
 
            <b>var</b> <span id="r182 rd" class="r182 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<span class="r174 r">dataSize</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r183 rd" class="r183 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r180 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r184 rd" class="r184 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r182 r">data</span>))
            {
                <b>await</b> <span class="r183 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r184 r">stream</span>);
            }
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#3ce0c298c6f02684" class="t t">BlobDownloadInfo</a>&gt; <span id="r185 rd" class="r185 r">response</span> = <b>await</b> <span class="r183 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#3d24e9ffd423b49e" class="i method">DownloadAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r182 r">data</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r185 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#d9898dabb0903dc6" class="i property">ContentLength</a>);
            <a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r186 rd" class="r186 r">actual</span> = <b>new</b> <a href="@0@mscorlib/A.html#d308091cc690e78d" class="t constructor">MemoryStream</a>();
            <b>await</b> <span class="r185 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#5bf65f1a0f1a3713" class="i property">Content</a>.<a href="@0@mscorlib/A.html#1ed7a6d41a19abf9" class="i method">CopyToAsync</a>(<span class="r186 r">actual</span>);
            <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#59794893533f4fba" class="i method">AssertSequenceEqual</a>(<span class="r182 r">data</span>, <span class="r186 r">actual</span>.<a href="@0@mscorlib/A.html#5df5fc757781f05e" class="i method">ToArray</a>());
            <span class="t t">Assert</span>.<span class="i method">AreNotEqual</span>(0, <span class="r176 r">timesFaulted</span>);
        }
 
        [<span class="t constructor">Test</span>]
        [<span class="t constructor">TestCase</span>(10 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>, 1 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>)]
        [<span class="t constructor">TestCase</span>(256 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>, 255 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>)]
        [<span class="t constructor">TestCase</span>(257 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>, 256 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>)]
        [<span class="t constructor">TestCase</span>(1 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f083580f332431a9" class="i field">MB</a>, 1 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>)]
        [<a href="/Azure.Core.TestFramework/A.html#9ce10179a72216c9" class="t constructor">LiveOnly</a>] <span class="c">// Stream copy uses ArrayPool under the hood. Which brings undeterministic behavior for larger content.</span>
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="4316c99953888769" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_WithUnreliableConnection_Streaming</a>(<b>int</b> <span id="r187 rd" class="r187 r">dataSize</span>, <b>int</b> <span id="r188 rd" class="r188 r">faultPoint</span>)
        {
            <span class="c">// Arrange</span>
            <b>int</b> <span id="r189 rd" class="r189 r">timesFaulted</span> = 0;
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r190 rd" class="r190 r">service</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(
                <b>new</b> <a href="/Azure.Storage.Blobs/A.html#991ca5e21b6fe5b6" class="t constructor">BlobServiceClient</a>(
                    <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#9c094343c57a64fb" class="i property">BlobServiceEndpoint</a>),
                    <b>new</b> <a href="/Azure.Storage.Common/A.html#5886b33715fef501" class="t constructor">StorageSharedKeyCredential</a>(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#774d8fba75d6b5dd" class="i property">AccountName</a>, <a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#fc6c2fe34872ce46" class="i property">AccountKey</a>),
                    <a href="BlobTestBase.cs.html#292debe31a448ee6" class="i method">GetFaultyBlobConnectionOptions</a>(
                        <span class="r178 r">raiseAt</span>: <span class="r188 r">faultPoint</span>,
                        <span class="r179 r">raise</span>: <b>new</b> <a href="@0@mscorlib/A.html#db370b64091ac4df" class="t constructor">IOException</a>(<span class="s">&quot;Manually injected testing fault&quot;</span>),
                        () =&gt;
                        {
                            <span class="r189 r">timesFaulted</span>++;
                        })));
 
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r191 rd" class="r191 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(<span class="r181 r">service</span>: <span class="r190 r">service</span>);
 
            <b>var</b> <span id="r192 rd" class="r192 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<span class="r187 r">dataSize</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r193 rd" class="r193 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r191 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r194 rd" class="r194 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r192 r">data</span>))
            {
                <b>await</b> <span class="r193 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r194 r">stream</span>);
            }
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#17d7ce05ae2ed5a8" class="t t">BlobDownloadStreamingResult</a>&gt; <span id="r195 rd" class="r195 r">response</span> = <b>await</b> <span class="r193 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#6ef330c88c9e043e" class="i method">DownloadStreamingAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r192 r">data</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r195 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#11972a51ed7547d7" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#f201c7780503f6f4" class="i property">ContentLength</a>);
            <a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r196 rd" class="r196 r">actual</span> = <b>new</b> <a href="@0@mscorlib/A.html#d308091cc690e78d" class="t constructor">MemoryStream</a>();
            <b>await</b> <span class="r195 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#65882b6dfc5bedb7" class="i property">Content</a>.<a href="@0@mscorlib/A.html#1ed7a6d41a19abf9" class="i method">CopyToAsync</a>(<span class="r196 r">actual</span>);
            <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#59794893533f4fba" class="i method">AssertSequenceEqual</a>(<span class="r192 r">data</span>, <span class="r196 r">actual</span>.<a href="@0@mscorlib/A.html#5df5fc757781f05e" class="i method">ToArray</a>());
            <span class="t t">Assert</span>.<span class="i method">AreNotEqual</span>(0, <span class="r189 r">timesFaulted</span>);
        }
 
        [<span class="t constructor">Test</span>]
        [<span class="t constructor">TestCase</span>(10 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>, 1 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>)]
        [<span class="t constructor">TestCase</span>(256 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>, 255 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>)]
        [<span class="t constructor">TestCase</span>(257 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>, 256 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>)]
        [<span class="t constructor">TestCase</span>(1 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f083580f332431a9" class="i field">MB</a>, 1 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>)]
        [<a href="/Azure.Core.TestFramework/A.html#9ce10179a72216c9" class="t constructor">LiveOnly</a>] <span class="c">// Stream copy uses ArrayPool under the hood. Which brings undeterministic behavior for larger content.</span>
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="e459aa22114bf716" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_WithUnreliableConnection_Streaming_And_ConcurrentChange</a>(<b>int</b> <span id="r197 rd" class="r197 r">dataSize</span>, <b>int</b> <span id="r198 rd" class="r198 r">faultPoint</span>)
        {
            <span class="c">// Arrange</span>
            <b>int</b> <span id="r199 rd" class="r199 r">timesFaulted</span> = 0;
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r200 rd" class="r200 r">containerName</span> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r201 rd" class="r201 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r202 rd" class="r202 r">nonFaultyService</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(
                <b>new</b> <a href="/Azure.Storage.Blobs/A.html#991ca5e21b6fe5b6" class="t constructor">BlobServiceClient</a>(
                    <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#9c094343c57a64fb" class="i property">BlobServiceEndpoint</a>),
                    <b>new</b> <a href="/Azure.Storage.Common/A.html#5886b33715fef501" class="t constructor">StorageSharedKeyCredential</a>(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#774d8fba75d6b5dd" class="i property">AccountName</a>, <a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#fc6c2fe34872ce46" class="i property">AccountKey</a>)));
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r203 rd" class="r203 r">service</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(
                <b>new</b> <a href="/Azure.Storage.Blobs/A.html#991ca5e21b6fe5b6" class="t constructor">BlobServiceClient</a>(
                    <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#9c094343c57a64fb" class="i property">BlobServiceEndpoint</a>),
                    <b>new</b> <a href="/Azure.Storage.Common/A.html#5886b33715fef501" class="t constructor">StorageSharedKeyCredential</a>(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#774d8fba75d6b5dd" class="i property">AccountName</a>, <a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#fc6c2fe34872ce46" class="i property">AccountKey</a>),
                    <a href="BlobTestBase.cs.html#292debe31a448ee6" class="i method">GetFaultyBlobConnectionOptions</a>(
                        <span class="r178 r">raiseAt</span>: <span class="r198 r">faultPoint</span>,
                        <span class="r179 r">raise</span>: <b>new</b> <a href="@0@mscorlib/A.html#db370b64091ac4df" class="t constructor">IOException</a>(<span class="s">&quot;Manually injected testing fault&quot;</span>),
                        () =&gt;
                        {
                            <span class="r199 r">timesFaulted</span>++;
                            <b>var</b> <span id="r204 rd" class="r204 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<span class="r197 r">dataSize</span>);
                            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r205 rd" class="r205 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r204 r">data</span>))
                            {
                                <span class="r202 r">nonFaultyService</span>.<a href="/Azure.Storage.Blobs/A.html#e3b6b5726874c210" class="i method">GetBlobContainerClient</a>(<span class="r200 r">containerName</span>).<a href="/Azure.Storage.Blobs/A.html#e796fb2e7b99a23b" class="i method">GetBlobClient</a>(<span class="r201 r">blobName</span>)
                                    .<a href="/Azure.Storage.Blobs/A.html#4e53ffbb1a703075" class="i method">UploadAsync</a>(<span class="r205 r">stream</span>, <span class="r206 r">overwrite</span>: <b>true</b>).<a href="@0@mscorlib/A.html#e1d639f68b66715a" class="i method">GetAwaiter</a>().<a href="@0@mscorlib/A.html#c2597ba59f71d619" class="i method">GetResult</a>();
                            }
                        })));
 
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r207 rd" class="r207 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(<span class="r181 r">service</span>: <span class="r203 r">service</span>, <span class="r208 r">containerName</span>: <span class="r200 r">containerName</span>);
 
            <b>var</b> <span id="r209 rd" class="r209 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<span class="r197 r">dataSize</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r210 rd" class="r210 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r207 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<span class="r201 r">blobName</span>));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r211 rd" class="r211 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r209 r">data</span>))
            {
                <b>await</b> <span class="r210 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r211 r">stream</span>);
            }
 
            <span class="c">// Act</span>
            <span class="c">// Check the error we get when a download fails because the blob</span>
            <span class="c">// was replaced while we&#39;re downloading</span>
            <a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a> <span id="r212 rd" class="r212 r">ex</span> = <span class="t t">Assert</span>.<span class="i method">CatchAsync</span>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(<b>async</b> () =&gt; {
                <a href="/Azure.Storage.Blobs/A.html#17d7ce05ae2ed5a8" class="t t">BlobDownloadStreamingResult</a> <span id="r213 rd" class="r213 r">result</span> = <b>await</b> <span class="r210 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#6ef330c88c9e043e" class="i method">DownloadStreamingAsync</a>();
                <b>await</b> <span class="r213 r">result</span>.<a href="/Azure.Storage.Blobs/A.html#65882b6dfc5bedb7" class="i property">Content</a>.<a href="@0@mscorlib/A.html#1ed7a6d41a19abf9" class="i method">CopyToAsync</a>(<a href="@0@mscorlib/A.html#f956b0c07e86df64" class="t t">Stream</a>.<a href="@0@mscorlib/A.html#7e25c72455973e1f" class="i field">Null</a>);
                });
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r212 r">ex</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a> == <a href="/Azure.Storage.Blobs/A.html#e0d947616d6aba70" class="t t">BlobErrorCode</a>.<a href="/Azure.Storage.Blobs/A.html#e12b0b7714ae7485" class="i property">ConditionNotMet</a>);
        }
 
        [<span class="t constructor">Test</span>]
        [<span class="t constructor">TestCase</span>(10 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>, 1 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>)]
        [<span class="t constructor">TestCase</span>(256 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>, 255 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>)]
        [<span class="t constructor">TestCase</span>(257 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>, 256 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>)]
        [<span class="t constructor">TestCase</span>(1 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f083580f332431a9" class="i field">MB</a>, 1 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>)]
        [<a href="/Azure.Core.TestFramework/A.html#9ce10179a72216c9" class="t constructor">LiveOnly</a>] <span class="c">// Stream copy uses ArrayPool under the hood. Which brings undeterministic behavior for larger content.</span>
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="797a7ff8a8ec559b" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_WithUnreliableConnection_BinaryData</a>(<b>int</b> <span id="r214 rd" class="r214 r">dataSize</span>, <b>int</b> <span id="r215 rd" class="r215 r">faultPoint</span>)
        {
            <span class="c">// Arrange</span>
            <b>int</b> <span id="r216 rd" class="r216 r">timesFaulted</span> = 0;
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r217 rd" class="r217 r">service</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(
                <b>new</b> <a href="/Azure.Storage.Blobs/A.html#991ca5e21b6fe5b6" class="t constructor">BlobServiceClient</a>(
                    <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#9c094343c57a64fb" class="i property">BlobServiceEndpoint</a>),
                    <b>new</b> <a href="/Azure.Storage.Common/A.html#5886b33715fef501" class="t constructor">StorageSharedKeyCredential</a>(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#774d8fba75d6b5dd" class="i property">AccountName</a>, <a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#fc6c2fe34872ce46" class="i property">AccountKey</a>),
                    <a href="BlobTestBase.cs.html#292debe31a448ee6" class="i method">GetFaultyBlobConnectionOptions</a>(
                        <span class="r178 r">raiseAt</span>: <span class="r215 r">faultPoint</span>,
                        <span class="r179 r">raise</span>: <b>new</b> <a href="@0@mscorlib/A.html#db370b64091ac4df" class="t constructor">IOException</a>(<span class="s">&quot;Manually injected testing fault&quot;</span>),
                        () =&gt;
                        {
                            <span class="r216 r">timesFaulted</span>++;
                        })));
 
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r218 rd" class="r218 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(<span class="r181 r">service</span>: <span class="r217 r">service</span>);
 
            <b>var</b> <span id="r219 rd" class="r219 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<span class="r214 r">dataSize</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r220 rd" class="r220 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r218 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r221 rd" class="r221 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r219 r">data</span>))
            {
                <b>await</b> <span class="r220 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r221 r">stream</span>);
            }
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#e20a1a448aa3110c" class="t t">BlobDownloadResult</a>&gt; <span id="r222 rd" class="r222 r">response</span> = <b>await</b> <span class="r220 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a6e46609fba22e81" class="i method">DownloadContentAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r219 r">data</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r222 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#38359c87135e7cc6" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#f201c7780503f6f4" class="i property">ContentLength</a>);
            <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#59794893533f4fba" class="i method">AssertSequenceEqual</a>(<span class="r219 r">data</span>, <span class="r222 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#8b9ab46048dfc623" class="i property">Content</a>.<a href="/System.Memory.Data/A.html#288a77b70eac3839" class="i method">ToArray</a>());
            <span class="t t">Assert</span>.<span class="i method">AreNotEqual</span>(0, <span class="r216 r">timesFaulted</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="7f0b02678e3d3484" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_Range</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r223 rd" class="r223 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <b>var</b> <span id="r224 rd" class="r224 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(10 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r225 rd" class="r225 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r223 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r226 rd" class="r226 r">offset</span> = <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>;
            <a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r227 rd" class="r227 r">count</span> = 2 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>;
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r228 rd" class="r228 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r224 r">data</span>))
            {
                <b>await</b> <span class="r225 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r228 r">stream</span>);
            }
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#3ce0c298c6f02684" class="t t">BlobDownloadInfo</a>&gt; <span id="r229 rd" class="r229 r">response</span> = <b>await</b> <span class="r225 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#e43375e1c8271251" class="i method">DownloadAsync</a>(<span class="r230 r">range</span>: <b>new</b> <a href="/Azure.Core/A.html#6ed33a49a04456b8" class="t constructor">HttpRange</a>(<span class="r226 r">offset</span>, <span class="r227 r">count</span>));
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r227 r">count</span>, <span class="r229 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#d9898dabb0903dc6" class="i property">ContentLength</a>);
            <a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r231 rd" class="r231 r">actual</span> = <b>new</b> <a href="@0@mscorlib/A.html#d308091cc690e78d" class="t constructor">MemoryStream</a>();
            <b>await</b> <span class="r229 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#5bf65f1a0f1a3713" class="i property">Content</a>.<a href="@0@mscorlib/A.html#1ed7a6d41a19abf9" class="i method">CopyToAsync</a>(<span class="r231 r">actual</span>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r227 r">count</span>, <span class="r231 r">actual</span>.<a href="@0@mscorlib/A.html#af4720ccd5d86f14" class="i property">Length</a>);
            <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#59794893533f4fba" class="i method">AssertSequenceEqual</a>(<span class="r224 r">data</span>.<a href="@0@System.Core/A.html#90ccdbd47b57182e" class="i method">Skip</a>(<span class="r226 r">offset</span>).<a href="@0@System.Core/A.html#aae92b018fa12b39" class="i method">Take</a>(<span class="r227 r">count</span>), <span class="r231 r">actual</span>.<a href="@0@mscorlib/A.html#5df5fc757781f05e" class="i method">ToArray</a>());
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="3ee0d03cc42da8b9" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_Range_Streaming</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r232 rd" class="r232 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <b>var</b> <span id="r233 rd" class="r233 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(10 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r234 rd" class="r234 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r232 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r235 rd" class="r235 r">offset</span> = <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>;
            <a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r236 rd" class="r236 r">count</span> = 2 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>;
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r237 rd" class="r237 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r233 r">data</span>))
            {
                <b>await</b> <span class="r234 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r237 r">stream</span>);
            }
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#17d7ce05ae2ed5a8" class="t t">BlobDownloadStreamingResult</a>&gt; <span id="r238 rd" class="r238 r">response</span> = <b>await</b> <span class="r234 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#6ef330c88c9e043e" class="i method">DownloadStreamingAsync</a>(<span class="r239 r">range</span>: <b>new</b> <a href="/Azure.Core/A.html#6ed33a49a04456b8" class="t constructor">HttpRange</a>(<span class="r235 r">offset</span>, <span class="r236 r">count</span>));
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r236 r">count</span>, <span class="r238 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#11972a51ed7547d7" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#f201c7780503f6f4" class="i property">ContentLength</a>);
            <a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r240 rd" class="r240 r">actual</span> = <b>new</b> <a href="@0@mscorlib/A.html#d308091cc690e78d" class="t constructor">MemoryStream</a>();
            <b>await</b> <span class="r238 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#65882b6dfc5bedb7" class="i property">Content</a>.<a href="@0@mscorlib/A.html#1ed7a6d41a19abf9" class="i method">CopyToAsync</a>(<span class="r240 r">actual</span>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r236 r">count</span>, <span class="r240 r">actual</span>.<a href="@0@mscorlib/A.html#af4720ccd5d86f14" class="i property">Length</a>);
            <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#59794893533f4fba" class="i method">AssertSequenceEqual</a>(<span class="r233 r">data</span>.<a href="@0@System.Core/A.html#90ccdbd47b57182e" class="i method">Skip</a>(<span class="r235 r">offset</span>).<a href="@0@System.Core/A.html#aae92b018fa12b39" class="i method">Take</a>(<span class="r236 r">count</span>), <span class="r240 r">actual</span>.<a href="@0@mscorlib/A.html#5df5fc757781f05e" class="i method">ToArray</a>());
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="ad5d676a52c9cd84" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_AccessConditions</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r241 rd" class="r241 r">garbageLeaseId</span> = <a href="BlobTestBase.cs.html#d39dc6fab7daaa70" class="i method">GetGarbageLeaseId</a>();
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r242 rd" class="r242 r">parameters</span> <b>in</b> <a href="#94c281f351d174da" class="i property">NoLease_AccessConditions_Data</a>)
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r243 rd" class="r243 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
                <span class="c">// Arrange</span>
                <b>var</b> <span id="r244 rd" class="r244 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
                <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r245 rd" class="r245 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r243 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
                <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r246 rd" class="r246 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r244 r">data</span>))
                {
                    <b>await</b> <span class="r245 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r246 r">stream</span>);
                }
 
                <span class="r242 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r245 r">blob</span>, <span class="r242 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a>);
                <span class="r242 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#af0faf1b7c1c85bd" class="i property">LeaseId</a> = <b>await</b> <a href="BlobTestBase.cs.html#2216a728843c891e" class="i method">SetupBlobLeaseCondition</a>(<span class="r245 r">blob</span>, <span class="r242 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#af0faf1b7c1c85bd" class="i property">LeaseId</a>, <span class="r241 r">garbageLeaseId</span>);
                <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r247 rd" class="r247 r">accessConditions</span> = <a href="#47a1d944fb251ee5" class="i method">BuildAccessConditions</a>(<span class="r242 r">parameters</span>);
 
                <span class="c">// Act</span>
                <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#3ce0c298c6f02684" class="t t">BlobDownloadInfo</a>&gt; <span id="r248 rd" class="r248 r">response</span> = <b>await</b> <span class="r245 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#e43375e1c8271251" class="i method">DownloadAsync</a>(<span class="r249 r">conditions</span>: <span class="r247 r">accessConditions</span>);
 
                <span class="c">// Assert</span>
                <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r244 r">data</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r248 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#d9898dabb0903dc6" class="i property">ContentLength</a>);
                <a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r250 rd" class="r250 r">actual</span> = <b>new</b> <a href="@0@mscorlib/A.html#d308091cc690e78d" class="t constructor">MemoryStream</a>();
                <b>await</b> <span class="r248 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#5bf65f1a0f1a3713" class="i property">Content</a>.<a href="@0@mscorlib/A.html#1ed7a6d41a19abf9" class="i method">CopyToAsync</a>(<span class="r250 r">actual</span>);
                <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#59794893533f4fba" class="i method">AssertSequenceEqual</a>(<span class="r244 r">data</span>, <span class="r250 r">actual</span>.<a href="@0@mscorlib/A.html#5df5fc757781f05e" class="i method">ToArray</a>());
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="79a2401fad1c8ca4" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_AccessConditions_Streaming</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r251 rd" class="r251 r">garbageLeaseId</span> = <a href="BlobTestBase.cs.html#d39dc6fab7daaa70" class="i method">GetGarbageLeaseId</a>();
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r252 rd" class="r252 r">parameters</span> <b>in</b> <a href="#94c281f351d174da" class="i property">NoLease_AccessConditions_Data</a>)
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r253 rd" class="r253 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
                <span class="c">// Arrange</span>
                <b>var</b> <span id="r254 rd" class="r254 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
                <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r255 rd" class="r255 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r253 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
                <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r256 rd" class="r256 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r254 r">data</span>))
                {
                    <b>await</b> <span class="r255 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r256 r">stream</span>);
                }
 
                <span class="r252 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r255 r">blob</span>, <span class="r252 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a>);
                <span class="r252 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#af0faf1b7c1c85bd" class="i property">LeaseId</a> = <b>await</b> <a href="BlobTestBase.cs.html#2216a728843c891e" class="i method">SetupBlobLeaseCondition</a>(<span class="r255 r">blob</span>, <span class="r252 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#af0faf1b7c1c85bd" class="i property">LeaseId</a>, <span class="r251 r">garbageLeaseId</span>);
                <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r257 rd" class="r257 r">accessConditions</span> = <a href="#47a1d944fb251ee5" class="i method">BuildAccessConditions</a>(<span class="r252 r">parameters</span>);
 
                <span class="c">// Act</span>
                <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#17d7ce05ae2ed5a8" class="t t">BlobDownloadStreamingResult</a>&gt; <span id="r258 rd" class="r258 r">response</span> = <b>await</b> <span class="r255 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#6ef330c88c9e043e" class="i method">DownloadStreamingAsync</a>(<span class="r259 r">conditions</span>: <span class="r257 r">accessConditions</span>);
 
                <span class="c">// Assert</span>
                <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r254 r">data</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r258 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#11972a51ed7547d7" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#f201c7780503f6f4" class="i property">ContentLength</a>);
                <a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r260 rd" class="r260 r">actual</span> = <b>new</b> <a href="@0@mscorlib/A.html#d308091cc690e78d" class="t constructor">MemoryStream</a>();
                <b>await</b> <span class="r258 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#65882b6dfc5bedb7" class="i property">Content</a>.<a href="@0@mscorlib/A.html#1ed7a6d41a19abf9" class="i method">CopyToAsync</a>(<span class="r260 r">actual</span>);
                <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#59794893533f4fba" class="i method">AssertSequenceEqual</a>(<span class="r254 r">data</span>, <span class="r260 r">actual</span>.<a href="@0@mscorlib/A.html#5df5fc757781f05e" class="i method">ToArray</a>());
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="5e5cd42a8d9d0f8c" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_AccessConditions_BinaryData</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r261 rd" class="r261 r">garbageLeaseId</span> = <a href="BlobTestBase.cs.html#d39dc6fab7daaa70" class="i method">GetGarbageLeaseId</a>();
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r262 rd" class="r262 r">parameters</span> <b>in</b> <a href="#94c281f351d174da" class="i property">NoLease_AccessConditions_Data</a>)
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r263 rd" class="r263 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
                <span class="c">// Arrange</span>
                <b>var</b> <span id="r264 rd" class="r264 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
                <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r265 rd" class="r265 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r263 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
                <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r266 rd" class="r266 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r264 r">data</span>))
                {
                    <b>await</b> <span class="r265 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r266 r">stream</span>);
                }
 
                <span class="r262 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r265 r">blob</span>, <span class="r262 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a>);
                <span class="r262 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#af0faf1b7c1c85bd" class="i property">LeaseId</a> = <b>await</b> <a href="BlobTestBase.cs.html#2216a728843c891e" class="i method">SetupBlobLeaseCondition</a>(<span class="r265 r">blob</span>, <span class="r262 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#af0faf1b7c1c85bd" class="i property">LeaseId</a>, <span class="r261 r">garbageLeaseId</span>);
                <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r267 rd" class="r267 r">accessConditions</span> = <a href="#47a1d944fb251ee5" class="i method">BuildAccessConditions</a>(<span class="r262 r">parameters</span>);
 
                <span class="c">// Act</span>
                <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#e20a1a448aa3110c" class="t t">BlobDownloadResult</a>&gt; <span id="r268 rd" class="r268 r">response</span> = <b>await</b> <span class="r265 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#020a2f6b1942893d" class="i method">DownloadContentAsync</a>(<span class="r269 r">conditions</span>: <span class="r267 r">accessConditions</span>);
 
                <span class="c">// Assert</span>
                <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r264 r">data</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r268 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#38359c87135e7cc6" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#f201c7780503f6f4" class="i property">ContentLength</a>);
                <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#59794893533f4fba" class="i method">AssertSequenceEqual</a>(<span class="r264 r">data</span>, <span class="r268 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#8b9ab46048dfc623" class="i property">Content</a>.<a href="/System.Memory.Data/A.html#288a77b70eac3839" class="i method">ToArray</a>());
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="7f7cb5539a063045" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_AccessConditionsFail</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r270 rd" class="r270 r">garbageLeaseId</span> = <a href="BlobTestBase.cs.html#d39dc6fab7daaa70" class="i method">GetGarbageLeaseId</a>();
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r271 rd" class="r271 r">parameters</span> <b>in</b> <a href="#f06bf70b762b1860" class="i method">GetAccessConditionsFail_Data</a>(<span class="r270 r">garbageLeaseId</span>))
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r272 rd" class="r272 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
                <span class="c">// Arrange</span>
                <b>var</b> <span id="r273 rd" class="r273 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
                <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r274 rd" class="r274 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r272 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
                <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r275 rd" class="r275 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r273 r">data</span>))
                {
                    <b>await</b> <span class="r274 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r275 r">stream</span>);
                }
 
                <span class="r271 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r274 r">blob</span>, <span class="r271 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a>);
                <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r276 rd" class="r276 r">accessConditions</span> = <a href="#47a1d944fb251ee5" class="i method">BuildAccessConditions</a>(<span class="r271 r">parameters</span>);
 
                <span class="c">// Act</span>
                <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#4c635e211835e989" class="i method">CatchAsync</a>&lt;<a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a>&gt;(
                    <b>async</b> () =&gt;
                    {
                        <a href="/Azure.Storage.Blobs/A.html#3ce0c298c6f02684" class="k">var</a> <span id="r277 rd" class="r277 r">_</span> = (<b>await</b> <span class="r274 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#e43375e1c8271251" class="i method">DownloadAsync</a>(
                            <span class="r249 r">conditions</span>: <span class="r276 r">accessConditions</span>)).<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>;
                    });
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="3f63188f0fea9b77" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_AccessConditionsFail_Streaming</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r278 rd" class="r278 r">garbageLeaseId</span> = <a href="BlobTestBase.cs.html#d39dc6fab7daaa70" class="i method">GetGarbageLeaseId</a>();
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r279 rd" class="r279 r">parameters</span> <b>in</b> <a href="#f06bf70b762b1860" class="i method">GetAccessConditionsFail_Data</a>(<span class="r278 r">garbageLeaseId</span>))
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r280 rd" class="r280 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
                <span class="c">// Arrange</span>
                <b>var</b> <span id="r281 rd" class="r281 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
                <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r282 rd" class="r282 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r280 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
                <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r283 rd" class="r283 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r281 r">data</span>))
                {
                    <b>await</b> <span class="r282 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r283 r">stream</span>);
                }
 
                <span class="r279 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r282 r">blob</span>, <span class="r279 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a>);
                <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r284 rd" class="r284 r">accessConditions</span> = <a href="#47a1d944fb251ee5" class="i method">BuildAccessConditions</a>(<span class="r279 r">parameters</span>);
 
                <span class="c">// Act</span>
                <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#4c635e211835e989" class="i method">CatchAsync</a>&lt;<a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a>&gt;(
                    <b>async</b> () =&gt;
                    {
                        <a href="/Azure.Storage.Blobs/A.html#17d7ce05ae2ed5a8" class="k">var</a> <span id="r285 rd" class="r285 r">_</span> = (<b>await</b> <span class="r282 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#6ef330c88c9e043e" class="i method">DownloadStreamingAsync</a>(
                            <span class="r259 r">conditions</span>: <span class="r284 r">accessConditions</span>)).<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>;
                    });
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="8dc10060723ef836" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_AccessConditionsFail_BinaryData</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r286 rd" class="r286 r">garbageLeaseId</span> = <a href="BlobTestBase.cs.html#d39dc6fab7daaa70" class="i method">GetGarbageLeaseId</a>();
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r287 rd" class="r287 r">parameters</span> <b>in</b> <a href="#f06bf70b762b1860" class="i method">GetAccessConditionsFail_Data</a>(<span class="r286 r">garbageLeaseId</span>))
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r288 rd" class="r288 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
                <span class="c">// Arrange</span>
                <b>var</b> <span id="r289 rd" class="r289 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
                <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r290 rd" class="r290 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r288 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
                <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r291 rd" class="r291 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r289 r">data</span>))
                {
                    <b>await</b> <span class="r290 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r291 r">stream</span>);
                }
 
                <span class="r287 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r290 r">blob</span>, <span class="r287 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a>);
                <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r292 rd" class="r292 r">accessConditions</span> = <a href="#47a1d944fb251ee5" class="i method">BuildAccessConditions</a>(<span class="r287 r">parameters</span>);
 
                <span class="c">// Act</span>
                <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#4c635e211835e989" class="i method">CatchAsync</a>&lt;<a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a>&gt;(
                    <b>async</b> () =&gt;
                    {
                        <a href="/Azure.Storage.Blobs/A.html#e20a1a448aa3110c" class="k">var</a> <span id="r293 rd" class="r293 r">_</span> = (<b>await</b> <span class="r290 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#020a2f6b1942893d" class="i method">DownloadContentAsync</a>(
                            <span class="r269 r">conditions</span>: <span class="r292 r">accessConditions</span>)).<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>;
                    });
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="ff76c41f20f4fae5" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_IfTags</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r294 rd" class="r294 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <b>var</b> <span id="r295 rd" class="r295 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r296 rd" class="r296 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r294 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> <a href="@0@mscorlib/A.html#f956b0c07e86df64" class="t t">Stream</a> <span id="r297 rd" class="r297 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r295 r">data</span>);
            <b>await</b> <span class="r296 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r297 r">stream</span>);
 
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r298 rd" class="r298 r">tags</span> = <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;
            {
                { <span class="s">&quot;coolTag&quot;</span>, <span class="s">&quot;true&quot;</span> }
            };
            <b>await</b> <span class="r296 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r298 r">tags</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r299 rd" class="r299 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
            };
 
            <span class="c">// Act</span>
            <b>await</b> <span class="r296 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#e43375e1c8271251" class="i method">DownloadAsync</a>(<span class="r249 r">conditions</span>: <span class="r299 r">conditions</span>);
            <b>await</b> <span class="r296 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#6ef330c88c9e043e" class="i method">DownloadStreamingAsync</a>(<span class="r259 r">conditions</span>: <span class="r299 r">conditions</span>);
            <b>await</b> <span class="r296 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#020a2f6b1942893d" class="i method">DownloadContentAsync</a>(<span class="r269 r">conditions</span>: <span class="r299 r">conditions</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="9b566d8800ff0358" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_IfTagsFailed</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r300 rd" class="r300 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <b>var</b> <span id="r301 rd" class="r301 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r302 rd" class="r302 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r300 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> <a href="@0@mscorlib/A.html#f956b0c07e86df64" class="t t">Stream</a> <span id="r303 rd" class="r303 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r301 r">data</span>);
            <b>await</b> <span class="r302 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r303 r">stream</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r304 rd" class="r304 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
            };
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r302 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#e43375e1c8271251" class="i method">DownloadAsync</a>(
                    <span class="r249 r">conditions</span>: <span class="r304 r">conditions</span>),
                <span id="r305 rd" class="r305 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;ConditionNotMet&quot;</span>, <span class="r305 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r302 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#6ef330c88c9e043e" class="i method">DownloadStreamingAsync</a>(
                    <span class="r259 r">conditions</span>: <span class="r304 r">conditions</span>),
                <span id="r306 rd" class="r306 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;ConditionNotMet&quot;</span>, <span class="r306 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r302 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#020a2f6b1942893d" class="i method">DownloadContentAsync</a>(
                    <span class="r269 r">conditions</span>: <span class="r304 r">conditions</span>),
                <span id="r307 rd" class="r307 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;ConditionNotMet&quot;</span>, <span class="r307 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="7f0f199b1f523186" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_MD5</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r308 rd" class="r308 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <b>var</b> <span id="r309 rd" class="r309 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(10 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r310 rd" class="r310 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r308 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r311 rd" class="r311 r">offset</span> = <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>;
            <a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r312 rd" class="r312 r">count</span> = 2 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>;
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r313 rd" class="r313 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r309 r">data</span>))
            {
                <b>await</b> <span class="r310 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r313 r">stream</span>);
            }
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#3ce0c298c6f02684" class="t t">BlobDownloadInfo</a>&gt; <span id="r314 rd" class="r314 r">response</span> = <b>await</b> <span class="r310 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#e43375e1c8271251" class="i method">DownloadAsync</a>(
                <span class="r230 r">range</span>: <b>new</b> <a href="/Azure.Core/A.html#6ed33a49a04456b8" class="t constructor">HttpRange</a>(<span class="r311 r">offset</span>, <span class="r312 r">count</span>),
                <span class="r315 r">rangeGetContentHash</span>: <b>true</b>);
 
            <span class="c">// Assert</span>
            <b>var</b> <span id="r316 rd" class="r316 r">expectedMD5</span> = <a href="@0@mscorlib/A.html#c7a9f849977ccfaa" class="t t">MD5</a>.<a href="@0@mscorlib/A.html#dbd8d3af8cb2e795" class="i method">Create</a>().<a href="@0@mscorlib/A.html#a71a3cba2c656040" class="i method">ComputeHash</a>(<span class="r309 r">data</span>.<a href="@0@System.Core/A.html#90ccdbd47b57182e" class="i method">Skip</a>(<span class="r311 r">offset</span>).<a href="@0@System.Core/A.html#aae92b018fa12b39" class="i method">Take</a>(<span class="r312 r">count</span>).<a href="@0@System.Core/A.html#783a052330e7d48d" class="i method">ToArray</a>());
            <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#59794893533f4fba" class="i method">AssertSequenceEqual</a>(<span class="r316 r">expectedMD5</span>, <span class="r314 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#2e0d3d9dd0f35065" class="i property">ContentHash</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="a4a75b671cee3fb9" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_MD5_Streaming</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r317 rd" class="r317 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <b>var</b> <span id="r318 rd" class="r318 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(10 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r319 rd" class="r319 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r317 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r320 rd" class="r320 r">offset</span> = <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>;
            <a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r321 rd" class="r321 r">count</span> = 2 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>;
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r322 rd" class="r322 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r318 r">data</span>))
            {
                <b>await</b> <span class="r319 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r322 r">stream</span>);
            }
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#17d7ce05ae2ed5a8" class="t t">BlobDownloadStreamingResult</a>&gt; <span id="r323 rd" class="r323 r">response</span> = <b>await</b> <span class="r319 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#6ef330c88c9e043e" class="i method">DownloadStreamingAsync</a>(
                <span class="r239 r">range</span>: <b>new</b> <a href="/Azure.Core/A.html#6ed33a49a04456b8" class="t constructor">HttpRange</a>(<span class="r320 r">offset</span>, <span class="r321 r">count</span>),
                <span class="r324 r">rangeGetContentHash</span>: <b>true</b>);
 
            <span class="c">// Assert</span>
            <b>var</b> <span id="r325 rd" class="r325 r">expectedMD5</span> = <a href="@0@mscorlib/A.html#c7a9f849977ccfaa" class="t t">MD5</a>.<a href="@0@mscorlib/A.html#dbd8d3af8cb2e795" class="i method">Create</a>().<a href="@0@mscorlib/A.html#a71a3cba2c656040" class="i method">ComputeHash</a>(<span class="r318 r">data</span>.<a href="@0@System.Core/A.html#90ccdbd47b57182e" class="i method">Skip</a>(<span class="r320 r">offset</span>).<a href="@0@System.Core/A.html#aae92b018fa12b39" class="i method">Take</a>(<span class="r321 r">count</span>).<a href="@0@System.Core/A.html#783a052330e7d48d" class="i method">ToArray</a>());
            <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#59794893533f4fba" class="i method">AssertSequenceEqual</a>(<span class="r325 r">expectedMD5</span>, <span class="r323 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#11972a51ed7547d7" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#192418d9d51bd01c" class="i property">ContentHash</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="bc9b79c9446996c2" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_Error</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r326 rd" class="r326 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r327 rd" class="r327 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r326 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r327 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#3d24e9ffd423b49e" class="i method">DownloadAsync</a>(),
                <span id="r328 rd" class="r328 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;The specified blob does not exist.&quot;</span>, <span class="r328 r">e</span>.<a href="@0@mscorlib/A.html#5fba0e16215b42a3" class="i property">Message</a>.<a href="@0@mscorlib/A.html#1c4a9dc78ba38999" class="i method">Split</a>(<span class="s">&#39;\n&#39;</span>)[0]));
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r327 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#6ef330c88c9e043e" class="i method">DownloadStreamingAsync</a>(),
                <span id="r329 rd" class="r329 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;The specified blob does not exist.&quot;</span>, <span class="r329 r">e</span>.<a href="@0@mscorlib/A.html#5fba0e16215b42a3" class="i property">Message</a>.<a href="@0@mscorlib/A.html#1c4a9dc78ba38999" class="i method">Split</a>(<span class="s">&#39;\n&#39;</span>)[0]));
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r327 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a6e46609fba22e81" class="i method">DownloadContentAsync</a>(),
                <span id="r330 rd" class="r330 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;The specified blob does not exist.&quot;</span>, <span class="r330 r">e</span>.<a href="@0@mscorlib/A.html#5fba0e16215b42a3" class="i property">Message</a>.<a href="@0@mscorlib/A.html#1c4a9dc78ba38999" class="i method">Split</a>(<span class="s">&#39;\n&#39;</span>)[0]));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#27df0a26b8a4fbfb" class="i field">V2020_02_10</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="f5c9f10c3205e6e0" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_LastAccess</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r331 rd" class="r331 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <b>var</b> <span id="r332 rd" class="r332 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r333 rd" class="r333 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r331 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r334 rd" class="r334 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r332 r">data</span>))
            {
                <b>await</b> <span class="r333 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r334 r">stream</span>);
            }
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#3ce0c298c6f02684" class="t t">BlobDownloadInfo</a>&gt; <span id="r335 rd" class="r335 r">response</span> = <b>await</b> <span class="r333 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#3d24e9ffd423b49e" class="i method">DownloadAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreNotEqual</span>(<a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a>.<a href="@0@mscorlib/A.html#027622e417a4d206" class="i field">MinValue</a>, <span class="r335 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#e967990c9b1e7bf1" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#760d60cc2d369809" class="i property">LastAccessed</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#27df0a26b8a4fbfb" class="i field">V2020_02_10</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="11b7c7ee0498a30f" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_LastAccess_Streaming</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r336 rd" class="r336 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <b>var</b> <span id="r337 rd" class="r337 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r338 rd" class="r338 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r336 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r339 rd" class="r339 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r337 r">data</span>))
            {
                <b>await</b> <span class="r338 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r339 r">stream</span>);
            }
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#17d7ce05ae2ed5a8" class="t t">BlobDownloadStreamingResult</a>&gt; <span id="r340 rd" class="r340 r">response</span> = <b>await</b> <span class="r338 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#6ef330c88c9e043e" class="i method">DownloadStreamingAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreNotEqual</span>(<a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a>.<a href="@0@mscorlib/A.html#027622e417a4d206" class="i field">MinValue</a>, <span class="r340 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#11972a51ed7547d7" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#760d60cc2d369809" class="i property">LastAccessed</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#27df0a26b8a4fbfb" class="i field">V2020_02_10</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="65fbc939e125f39e" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_LastAccess_BinaryData</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r341 rd" class="r341 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <b>var</b> <span id="r342 rd" class="r342 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r343 rd" class="r343 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r341 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r344 rd" class="r344 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r342 r">data</span>))
            {
                <b>await</b> <span class="r343 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r344 r">stream</span>);
            }
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#e20a1a448aa3110c" class="t t">BlobDownloadResult</a>&gt; <span id="r345 rd" class="r345 r">response</span> = <b>await</b> <span class="r343 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a6e46609fba22e81" class="i method">DownloadContentAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreNotEqual</span>(<a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a>.<a href="@0@mscorlib/A.html#027622e417a4d206" class="i field">MinValue</a>, <span class="r345 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#38359c87135e7cc6" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#760d60cc2d369809" class="i property">LastAccessed</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="16537712db4a70f7" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_Overloads</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r346 rd" class="r346 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <b>var</b> <span id="r347 rd" class="r347 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r348 rd" class="r348 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r346 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r349 rd" class="r349 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r347 r">data</span>))
            {
                <b>await</b> <span class="r348 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r349 r">stream</span>);
            }
 
            <b>await</b> <a href="#fcc05865a543b325" class="i method">Verify</a>(<b>await</b> <span class="r348 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#3d24e9ffd423b49e" class="i method">DownloadAsync</a>());
            <b>await</b> <a href="#fcc05865a543b325" class="i method">Verify</a>(<b>await</b> <span class="r348 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#11219b38657ff8eb" class="i method">DownloadAsync</a>(<a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a>.<a href="@0@mscorlib/A.html#ec32c41597007382" class="i property">None</a>));
            <b>await</b> <a href="#fcc05865a543b325" class="i method">Verify</a>(<b>await</b> <span class="r348 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#e43375e1c8271251" class="i method">DownloadAsync</a>(<span class="r230 r">range</span>: <b>default</b>));
 
            <b>async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="fcc05865a543b325" href="R/fcc05865a543b325.html" target="n" data-glyph="76,2" class="i method">Verify</a>(<a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#3ce0c298c6f02684" class="t t">BlobDownloadInfo</a>&gt; <span id="r350 rd" class="r350 r">response</span>)
            {
                <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r347 r">data</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r350 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#d9898dabb0903dc6" class="i property">ContentLength</a>);
                <b>using</b> <a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r351 rd" class="r351 r">actual</span> = <b>new</b> <a href="@0@mscorlib/A.html#d308091cc690e78d" class="t constructor">MemoryStream</a>();
                <b>await</b> <span class="r350 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#5bf65f1a0f1a3713" class="i property">Content</a>.<a href="@0@mscorlib/A.html#1ed7a6d41a19abf9" class="i method">CopyToAsync</a>(<span class="r351 r">actual</span>);
                <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#59794893533f4fba" class="i method">AssertSequenceEqual</a>(<span class="r347 r">data</span>, <span class="r351 r">actual</span>.<a href="@0@mscorlib/A.html#5df5fc757781f05e" class="i method">ToArray</a>());
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="ae69d389e74d2759" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_Overloads_BinaryData</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r352 rd" class="r352 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <b>var</b> <span id="r353 rd" class="r353 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r354 rd" class="r354 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r352 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r355 rd" class="r355 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r353 r">data</span>))
            {
                <b>await</b> <span class="r354 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r355 r">stream</span>);
            }
 
            <a href="#0b5ec3178c7e4fba" class="i method">Verify</a>(<b>await</b> <span class="r354 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a6e46609fba22e81" class="i method">DownloadContentAsync</a>());
            <a href="#0b5ec3178c7e4fba" class="i method">Verify</a>(<b>await</b> <span class="r354 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#54e09935a88e6c79" class="i method">DownloadContentAsync</a>(<a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a>.<a href="@0@mscorlib/A.html#ec32c41597007382" class="i property">None</a>));
            <a href="#0b5ec3178c7e4fba" class="i method">Verify</a>(<b>await</b> <span class="r354 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#020a2f6b1942893d" class="i method">DownloadContentAsync</a>(<span class="r269 r">conditions</span>: <b>default</b>));
 
            <b>void</b> <a id="0b5ec3178c7e4fba" href="R/0b5ec3178c7e4fba.html" target="n" data-glyph="76,2" class="i method">Verify</a>(<a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#e20a1a448aa3110c" class="t t">BlobDownloadResult</a>&gt; <span id="r356 rd" class="r356 r">response</span>)
            {
                <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r353 r">data</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r356 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#38359c87135e7cc6" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#f201c7780503f6f4" class="i property">ContentLength</a>);
                <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#59794893533f4fba" class="i method">AssertSequenceEqual</a>(<span class="r353 r">data</span>, <span class="r356 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#8b9ab46048dfc623" class="i property">Content</a>.<a href="/System.Memory.Data/A.html#288a77b70eac3839" class="i method">ToArray</a>());
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="e3d34291b26d07bb" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_VersionId</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r357 rd" class="r357 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <b>var</b> <span id="r358 rd" class="r358 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r359 rd" class="r359 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r357 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#66a553618c3f7c72" class="t t">BlobContentInfo</a>&gt; <span id="r360 rd" class="r360 r">uploadResponse</span>;
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r361 rd" class="r361 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r358 r">data</span>))
            {
                <span class="r360 r">uploadResponse</span> = <b>await</b> <span class="r359 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r361 r">stream</span>);
            }
 
            <span class="c">// Act</span>
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r362 rd" class="r362 r">versionBlob</span> = <span class="r359 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#160553f40f2ac074" class="i method">WithVersion</a>(<span class="r360 r">uploadResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#d6d167cdb7477b7e" class="i property">VersionId</a>);
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#3ce0c298c6f02684" class="t t">BlobDownloadInfo</a>&gt; <span id="r363 rd" class="r363 r">response</span> = <b>await</b> <span class="r359 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#3d24e9ffd423b49e" class="i method">DownloadAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r363 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#e967990c9b1e7bf1" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#bad2295d26204c4d" class="i property">VersionId</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#3877171c1b02b2a6" class="t constructor">PlaybackOnly</a>(<span class="s">&quot;Object Replication policies is only enabled on certain storage accounts&quot;</span>)]
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="e92cc50b17040a6a" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadAsync_ObjectReplication</a>()
        {
            <span class="c">// TODO: The tests will temporarily use designated account, containers and blobs to check the</span>
            <span class="c">// existence of OR headers</span>
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r364 rd" class="r364 r">sourceServiceClient</span> = <a href="BlobTestBase.cs.html#a0ccf5affc88da7d" class="i property">BlobsClientBuilder</a>.<a href="ClientBuilderExtensions.cs.html#6aefc2d0167a3d3f" class="i method">GetServiceClient_SharedKey</a>();
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r365 rd" class="r365 r">destinationServiceClient</span> = <a href="BlobTestBase.cs.html#a0ccf5affc88da7d" class="i property">BlobsClientBuilder</a>.<a href="ClientBuilderExtensions.cs.html#fdafd88aa5d1c416" class="i method">GetServiceClient_SecondaryAccount_SharedKey</a>();
 
            <span class="c">// This is a PLAYBACK ONLY test with a special container we previously setup, as we can&#39;t auto setup policies yet</span>
            <a href="/Azure.Storage.Blobs/A.html#6bb2c165ee95c7d4" class="t t">BlobContainerClient</a> <span id="r366 rd" class="r366 r">sourceContainer</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r364 r">sourceServiceClient</span>.<a href="/Azure.Storage.Blobs/A.html#e3b6b5726874c210" class="i method">GetBlobContainerClient</a>(<span class="s">&quot;test1&quot;</span>));
            <a href="/Azure.Storage.Blobs/A.html#6bb2c165ee95c7d4" class="t t">BlobContainerClient</a> <span id="r367 rd" class="r367 r">destinationContainer</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r365 r">destinationServiceClient</span>.<a href="/Azure.Storage.Blobs/A.html#e3b6b5726874c210" class="i method">GetBlobContainerClient</a>(<span class="s">&quot;test2&quot;</span>));
 
            <span class="c">// Arrange</span>
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r368 rd" class="r368 r">blob_name</span> = <span class="s">&quot;netgetpropertiesors2blobapitestgetpropertiesors&quot;</span>;
            <a href="/Azure.Storage.Blobs/A.html#f0665d15d63242b1" class="t t">BlobClient</a> <span id="r369 rd" class="r369 r">sourceBlob</span> = <span class="r366 r">sourceContainer</span>.<a href="/Azure.Storage.Blobs/A.html#e796fb2e7b99a23b" class="i method">GetBlobClient</a>(<span class="r368 r">blob_name</span>);
            <a href="/Azure.Storage.Blobs/A.html#f0665d15d63242b1" class="t t">BlobClient</a> <span id="r370 rd" class="r370 r">destBlob</span> = <span class="r367 r">destinationContainer</span>.<a href="/Azure.Storage.Blobs/A.html#e796fb2e7b99a23b" class="i method">GetBlobClient</a>(<span class="r368 r">blob_name</span>);
 
            <span class="c">//Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#3ce0c298c6f02684" class="t t">BlobDownloadInfo</a>&gt; <span id="r371 rd" class="r371 r">sourceResponse</span> = <b>await</b> <span class="r369 r">sourceBlob</span>.<a href="/Azure.Storage.Blobs/A.html#3d24e9ffd423b49e" class="i method">DownloadAsync</a>();
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#3ce0c298c6f02684" class="t t">BlobDownloadInfo</a>&gt; <span id="r372 rd" class="r372 r">destResponse</span> = <b>await</b> <span class="r370 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#3d24e9ffd423b49e" class="i method">DownloadAsync</a>();
 
            <span class="c">//Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(1, <span class="r371 r">sourceResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#e967990c9b1e7bf1" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#8a92dec223b4bf07" class="i property">ObjectReplicationSourceProperties</a>.<a href="@0@mscorlib/A.html#3d6c21c4e9bd5f63" class="i property">Count</a>);
            <span class="t t">Assert</span>.<span class="i method">IsNull</span>(<span class="r371 r">sourceResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#e967990c9b1e7bf1" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#8eec5453c5bc5eaf" class="i property">ObjectReplicationDestinationPolicyId</a>);
            <span class="t t">Assert</span>.<span class="i method">IsNotEmpty</span>(<span class="r372 r">destResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#e967990c9b1e7bf1" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#8eec5453c5bc5eaf" class="i property">ObjectReplicationDestinationPolicyId</a>);
            <span class="t t">Assert</span>.<span class="i method">IsNull</span>(<span class="r372 r">destResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#e967990c9b1e7bf1" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#8a92dec223b4bf07" class="i property">ObjectReplicationSourceProperties</a>);
        }
        <span class="k preprocess">#</span><span class="k preprocess">endregion</span> Sequential Download
 
        <span class="k preprocess">#</span><span class="k preprocess">region</span> Parallel Download
 
        <b>private async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="2b1887d57a387e1f" href="R/2b1887d57a387e1f.html" target="n" data-glyph="76,1" class="i method">ParallelDownloadFileAndVerify</a>(
            <b>long</b> <span id="r373 rd" class="r373 r">size</span>,
            <b>long</b> <span id="r374 rd" class="r374 r">singleBlockThreshold</span>,
            <a href="/Azure.Storage.Common/A.html#5906346a5aaad27d" class="t t">StorageTransferOptions</a> <span id="r375 rd" class="r375 r">transferOptions</span>)
        {
            <b>var</b> <span id="r376 rd" class="r376 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<span class="r373 r">size</span>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r377 rd" class="r377 r">path</span> = <a href="@0@mscorlib/A.html#090eca8621a248ee" class="t t">Path</a>.<a href="@0@mscorlib/A.html#3f28ce894873de0a" class="i method">GetTempFileName</a>();
 
            <b>try</b>
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r378 rd" class="r378 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r379 rd" class="r379 r">name</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
                <a href="/Azure.Storage.Blobs/A.html#f0665d15d63242b1" class="t t">BlobClient</a> <span id="r380 rd" class="r380 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r378 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#e796fb2e7b99a23b" class="i method">GetBlobClient</a>(<span class="r379 r">name</span>));
 
                <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r381 rd" class="r381 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r376 r">data</span>))
                {
                    <b>await</b> <span class="r380 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#b43e68f04bbbae62" class="i method">UploadAsync</a>(<span class="r381 r">stream</span>);
                }
 
                <span class="c">// Create a special blob client for downloading that will</span>
                <span class="c">// assign client request IDs based on the range so that out</span>
                <span class="c">// of order operations still get predictable IDs and the</span>
                <span class="c">// recordings work correctly</span>
                <a href="/Azure.Storage.Common/A.html#6b51bf09188ec1c0" class="k">var</a> <span id="r382 rd" class="r382 r">credential</span> = <b>new</b> <a href="/Azure.Storage.Common/A.html#5886b33715fef501" class="t constructor">StorageSharedKeyCredential</a>(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#774d8fba75d6b5dd" class="i property">AccountName</a>, <a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#fc6c2fe34872ce46" class="i property">AccountKey</a>);
                <a href="/Azure.Storage.Blobs/A.html#f0665d15d63242b1" class="t t">BlobClient</a> <span id="r383 rd" class="r383 r">downloadingBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#5723ace566892810" class="t constructor">BlobClient</a>(<span class="r380 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>, <span class="r382 r">credential</span>, <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>(<b>true</b>)));
 
                <b>using</b> (<a href="@0@mscorlib/A.html#e23a38af5d11ddd3" class="t t">FileStream</a> <span id="r384 rd" class="r384 r">file</span> = <a href="@0@mscorlib/A.html#1c7421e464f67b7e" class="t t">File</a>.<a href="@0@mscorlib/A.html#a30071aa09897b66" class="i method">OpenWrite</a>(<span class="r377 r">path</span>))
                {
                    <b>await</b> <span class="r383 r">downloadingBlob</span>.<a href="/Azure.Storage.Blobs/A.html#8ee4f69328c4f087" class="i method">StagedDownloadAsync</a>(
                        <span class="r384 r">file</span>,
                        <span class="r385 r">transferOptions</span>: <span class="r375 r">transferOptions</span>);
                }
 
                <b>using</b> (<a href="@0@mscorlib/A.html#e23a38af5d11ddd3" class="t t">FileStream</a> <span id="r386 rd" class="r386 r">resultStream</span> = <a href="@0@mscorlib/A.html#1c7421e464f67b7e" class="t t">File</a>.<a href="@0@mscorlib/A.html#7a7d1c864bec521e" class="i method">OpenRead</a>(<span class="r377 r">path</span>))
                {
                    <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#59794893533f4fba" class="i method">AssertSequenceEqual</a>(<span class="r376 r">data</span>, <span class="r386 r">resultStream</span>.<a href="Shared/TestHelper.cs.html#2a18a911afc5df17" class="i method">AsBytes</a>());
                }
            }
            <b>finally</b>
            {
                <b>if</b> (<a href="@0@mscorlib/A.html#1c7421e464f67b7e" class="t t">File</a>.<a href="@0@mscorlib/A.html#3360368484a9f131" class="i method">Exists</a>(<span class="r377 r">path</span>))
                {
                    <a href="@0@mscorlib/A.html#1c7421e464f67b7e" class="t t">File</a>.<a href="@0@mscorlib/A.html#c4e7406e837331d5" class="i method">Delete</a>(<span class="r377 r">path</span>);
                }
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<span class="t constructor">TestCase</span>(512)]
        [<span class="t constructor">TestCase</span>(1 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>)]
        [<span class="t constructor">TestCase</span>(2 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>)]
        [<span class="t constructor">TestCase</span>(4 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>)]
        [<span class="t constructor">TestCase</span>(10 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>)]
        [<span class="t constructor">TestCase</span>(20 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>)]
        [<span class="t constructor">TestCase</span>(30 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>)]
        [<span class="t constructor">TestCase</span>(50 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>)]
        [<span class="t constructor">TestCase</span>(501 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="28a21b111729dd30" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadFileAsync_Parallel_SmallBlobs</a>(<b>long</b> <span id="r387 rd" class="r387 r">size</span>) =&gt;
             <span class="c">// Use a 1KB threshold so we get a lot of individual blocks</span>
             <b>await</b> <a href="#2b1887d57a387e1f" class="i method">ParallelDownloadFileAndVerify</a>(<span class="r387 r">size</span>, <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>, <b>new</b> <a href="/Azure.Storage.Common/A.html#5906346a5aaad27d" class="t constructor">StorageTransferOptions</a> { <a href="/Azure.Storage.Common/A.html#6c3ac4bff39cdfb2" class="i property">MaximumTransferLength</a> = <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a> });
 
        [<span class="t constructor">Ignore</span>(<span class="s">&quot;These tests currently take 40 mins for little additional coverage&quot;</span>)]
        [<span class="t constructor">Test</span>]
        [<span class="t constructor">Category</span>(<span class="s">&quot;Live&quot;</span>)]
        [<span class="t constructor">TestCase</span>(33 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f083580f332431a9" class="i field">MB</a>, 1)]
        [<span class="t constructor">TestCase</span>(33 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f083580f332431a9" class="i field">MB</a>, 4)]
        [<span class="t constructor">TestCase</span>(33 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f083580f332431a9" class="i field">MB</a>, 8)]
        [<span class="t constructor">TestCase</span>(33 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f083580f332431a9" class="i field">MB</a>, 16)]
        [<span class="t constructor">TestCase</span>(33 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f083580f332431a9" class="i field">MB</a>, <b>null</b>)]
        [<span class="t constructor">TestCase</span>(257 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f083580f332431a9" class="i field">MB</a>, 1)]
        [<span class="t constructor">TestCase</span>(257 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f083580f332431a9" class="i field">MB</a>, 4)]
        [<span class="t constructor">TestCase</span>(257 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f083580f332431a9" class="i field">MB</a>, 8)]
        [<span class="t constructor">TestCase</span>(257 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f083580f332431a9" class="i field">MB</a>, 16)]
        [<span class="t constructor">TestCase</span>(257 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f083580f332431a9" class="i field">MB</a>, <b>null</b>)]
        [<span class="t constructor">TestCase</span>(1 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#e8f38afe41d3db2c" class="i field">GB</a>, 1)]
        [<span class="t constructor">TestCase</span>(1 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#e8f38afe41d3db2c" class="i field">GB</a>, 4)]
        [<span class="t constructor">TestCase</span>(1 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#e8f38afe41d3db2c" class="i field">GB</a>, 8)]
        [<span class="t constructor">TestCase</span>(1 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#e8f38afe41d3db2c" class="i field">GB</a>, 16)]
        [<span class="t constructor">TestCase</span>(1 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#e8f38afe41d3db2c" class="i field">GB</a>, <b>null</b>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="c3b9bf251ab1f580" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadFileAsync_Parallel_LargeBlobs</a>(<b>long</b> <span id="r388 rd" class="r388 r">size</span>, <b>int</b>? <span id="r389 rd" class="r389 r">maximumThreadCount</span>)
        {
            <span class="c">// TODO: #6781 We don&#39;t want to add 1GB of random data in the recordings</span>
            <b>if</b> (<a href="/Azure.Core.TestFramework/A.html#eb077c11a09b6b1e" class="i property">Mode</a> == <a href="/Azure.Core.TestFramework/A.html#d7d5cc97dd76217f" class="t t">RecordedTestMode</a>.<a href="/Azure.Core.TestFramework/A.html#6de2da8c848daf8b" class="i field">Live</a>)
            {
                <b>await</b> <a href="#2b1887d57a387e1f" class="i method">ParallelDownloadFileAndVerify</a>(<span class="r388 r">size</span>, 16 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f083580f332431a9" class="i field">MB</a>, <b>new</b> <a href="/Azure.Storage.Common/A.html#5906346a5aaad27d" class="t constructor">StorageTransferOptions</a> { <a href="/Azure.Storage.Common/A.html#9af76c13ed7d72aa" class="i property">MaximumConcurrency</a> = <span class="r389 r">maximumThreadCount</span> });
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="0fddb67e2e8eecc6" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadToAsync_ZeroSizeBlob</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r390 rd" class="r390 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r391 rd" class="r391 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r390 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> <a href="@0@mscorlib/A.html#f956b0c07e86df64" class="t t">Stream</a> <span id="r392 rd" class="r392 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<b>new</b> <b>byte</b>[] { });
            <b>await</b> <span class="r391 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r392 r">stream</span>);
 
            <span class="c">// Act</span>
            <b>using</b> <a href="@0@mscorlib/A.html#f956b0c07e86df64" class="t t">Stream</a> <span id="r393 rd" class="r393 r">resultStream</span> = <b>new</b> <a href="@0@mscorlib/A.html#d308091cc690e78d" class="t constructor">MemoryStream</a>();
            <b>await</b> <span class="r391 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#03e5c9435901584b" class="i method">DownloadToAsync</a>(<span class="r393 r">resultStream</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<span class="t constructor">Ignore</span>(<span class="s">&quot;Don&#39;t want to record 300 MB of data in the tests&quot;</span>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="2e4ebe358922a65e" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadToAsync_LargeStream</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r394 rd" class="r394 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <b>var</b> <span id="r395 rd" class="r395 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(300 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f083580f332431a9" class="i field">MB</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r396 rd" class="r396 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r394 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r397 rd" class="r397 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r395 r">data</span>))
            {
                <b>await</b> <span class="r396 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r397 r">stream</span>);
            }
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r398 rd" class="r398 r">resultStream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r395 r">data</span>))
            {
                <b>await</b> <span class="r396 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#03e5c9435901584b" class="i method">DownloadToAsync</a>(<span class="r398 r">resultStream</span>);
                <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r395 r">data</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r398 r">resultStream</span>.<a href="@0@mscorlib/A.html#af4720ccd5d86f14" class="i property">Length</a>);
                <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#59794893533f4fba" class="i method">AssertSequenceEqual</a>(<span class="r395 r">data</span>, <span class="r398 r">resultStream</span>.<a href="@0@mscorlib/A.html#5df5fc757781f05e" class="i method">ToArray</a>());
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="662b3af5db476d7e" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadTo_Initial304</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r399 rd" class="r399 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Upload a blob</span>
            <b>var</b> <span id="r400 rd" class="r400 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#f0665d15d63242b1" class="t t">BlobClient</a> <span id="r401 rd" class="r401 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r399 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#e796fb2e7b99a23b" class="i method">GetBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r402 rd" class="r402 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r400 r">data</span>))
            {
                <b>await</b> <span class="r401 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#b43e68f04bbbae62" class="i method">UploadAsync</a>(<span class="r402 r">stream</span>);
            }
 
            <span class="c">// Add conditions to cause a failure and ensure we don&#39;t explode</span>
            <a href="/Azure.Core/A.html#ad97b1910f5ca3eb" class="t t">Response</a> <span id="r403 rd" class="r403 r">result</span> = <b>await</b> <span class="r401 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#2455f5f748982345" class="i method">DownloadToAsync</a>(
                <a href="@0@mscorlib/A.html#f956b0c07e86df64" class="t t">Stream</a>.<a href="@0@mscorlib/A.html#7e25c72455973e1f" class="i field">Null</a>,
                <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
                {
                    <a href="/Azure.Core/A.html#4e2106a4ce43d036" class="i property">IfModifiedSince</a> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>
                });
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(304, <span class="r403 r">result</span>.<a href="/Azure.Core/A.html#53e6401c580f9719" class="i property">Status</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="8f0d5bb5ef27ec8b" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadContent_Initial304</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r404 rd" class="r404 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Upload a blob</span>
            <b>var</b> <span id="r405 rd" class="r405 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#f0665d15d63242b1" class="t t">BlobClient</a> <span id="r406 rd" class="r406 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r404 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#e796fb2e7b99a23b" class="i method">GetBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r407 rd" class="r407 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r405 r">data</span>))
            {
                <b>await</b> <span class="r406 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#b43e68f04bbbae62" class="i method">UploadAsync</a>(<span class="r407 r">stream</span>);
            }
 
            <span class="c">// Add conditions to cause a failure and ensure we don&#39;t explode</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#e20a1a448aa3110c" class="t t">BlobDownloadResult</a>&gt; <span id="r408 rd" class="r408 r">result</span> = <b>await</b> <span class="r406 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#020a2f6b1942893d" class="i method">DownloadContentAsync</a>(
                <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
                {
                    <a href="/Azure.Core/A.html#4e2106a4ce43d036" class="i property">IfModifiedSince</a> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>
                });
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(304, <span class="r408 r">result</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#53e6401c580f9719" class="i property">Status</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="e7a10b7e89cc8e56" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadStreaming_Initial304</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r409 rd" class="r409 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Upload a blob</span>
            <b>var</b> <span id="r410 rd" class="r410 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#f0665d15d63242b1" class="t t">BlobClient</a> <span id="r411 rd" class="r411 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r409 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#e796fb2e7b99a23b" class="i method">GetBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r412 rd" class="r412 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r410 r">data</span>))
            {
                <b>await</b> <span class="r411 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#b43e68f04bbbae62" class="i method">UploadAsync</a>(<span class="r412 r">stream</span>);
            }
 
            <span class="c">// Add conditions to cause a failure and ensure we don&#39;t explode</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#17d7ce05ae2ed5a8" class="t t">BlobDownloadStreamingResult</a>&gt; <span id="r413 rd" class="r413 r">result</span> = <b>await</b> <span class="r411 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#6ef330c88c9e043e" class="i method">DownloadStreamingAsync</a>(
                <span class="r259 r">conditions</span>: <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
                {
                    <a href="/Azure.Core/A.html#4e2106a4ce43d036" class="i property">IfModifiedSince</a> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>
                });
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(304, <span class="r413 r">result</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#53e6401c580f9719" class="i property">Status</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="4de76f1320b3960b" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">Download_Initial304</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r414 rd" class="r414 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Upload a blob</span>
            <b>var</b> <span id="r415 rd" class="r415 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#f0665d15d63242b1" class="t t">BlobClient</a> <span id="r416 rd" class="r416 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r414 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#e796fb2e7b99a23b" class="i method">GetBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r417 rd" class="r417 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r415 r">data</span>))
            {
                <b>await</b> <span class="r416 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#b43e68f04bbbae62" class="i method">UploadAsync</a>(<span class="r417 r">stream</span>);
            }
 
            <span class="c">// Add conditions to cause a failure and ensure we don&#39;t explode</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#3ce0c298c6f02684" class="t t">BlobDownloadInfo</a>&gt; <span id="r418 rd" class="r418 r">result</span> = <b>await</b> <span class="r416 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#e43375e1c8271251" class="i method">DownloadAsync</a>(
                <span class="r249 r">conditions</span>: <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
                {
                    <a href="/Azure.Core/A.html#4e2106a4ce43d036" class="i property">IfModifiedSince</a> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>
                });
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(304, <span class="r418 r">result</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#53e6401c580f9719" class="i property">Status</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="614eebe4880a92c6" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadTo_ReplacedDuringDownload</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r419 rd" class="r419 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Upload a large blob</span>
            <a href="/Azure.Storage.Blobs/A.html#f0665d15d63242b1" class="t t">BlobClient</a> <span id="r420 rd" class="r420 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r419 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#e796fb2e7b99a23b" class="i method">GetBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r421 rd" class="r421 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(10 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>)))
            {
                <b>await</b> <span class="r420 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#b43e68f04bbbae62" class="i method">UploadAsync</a>(<span class="r421 r">stream</span>);
            }
 
            <span class="c">// Check the error we get when a download fails because the blob</span>
            <span class="c">// was replaced while we&#39;re downloading</span>
            <a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a> <span id="r422 rd" class="r422 r">ex</span> = <span class="t t">Assert</span>.<span class="i method">CatchAsync</span>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <b>async</b> () =&gt;
                {
                    <span class="c">// Create a stream that replaces the blob as soon as it starts downloading</span>
                    <b>bool</b> <span id="r423 rd" class="r423 r">replaced</span> = <b>false</b>;
                    <b>await</b> <span class="r420 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#8ee4f69328c4f087" class="i method">StagedDownloadAsync</a>(
                        <b>new</b> <a href="FuncStream.cs.html#a8aa29f3edddf0de" class="t constructor">FuncStream</a>(
                            <a href="@0@mscorlib/A.html#f956b0c07e86df64" class="t t">Stream</a>.<a href="@0@mscorlib/A.html#7e25c72455973e1f" class="i field">Null</a>,
                            <b>async</b> () =&gt;
                            {
                                <b>if</b> (!<span class="r423 r">replaced</span>)
                                {
                                    <span class="r423 r">replaced</span> = <b>true</b>;
                                    <b>using</b> <a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r424 rd" class="r424 r">newStream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>));
                                    <b>await</b> <span class="r420 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e53ffbb1a703075" class="i method">UploadAsync</a>(<span class="r424 r">newStream</span>, <span class="r206 r">overwrite</span>: <b>true</b>);
                                }
                            }),
                        <span class="r385 r">transferOptions</span>:
                            <b>new</b> <a href="/Azure.Storage.Common/A.html#5906346a5aaad27d" class="t constructor">StorageTransferOptions</a>
                            {
                                <a href="/Azure.Storage.Common/A.html#9af76c13ed7d72aa" class="i property">MaximumConcurrency</a> = 1,
                                <a href="/Azure.Storage.Common/A.html#6c3ac4bff39cdfb2" class="i property">MaximumTransferLength</a> = <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>,
                                <a href="/Azure.Storage.Common/A.html#2db18e92623468ec" class="i property">InitialTransferLength</a> = <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>
                            });
                });
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r422 r">ex</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a> == <a href="/Azure.Storage.Blobs/A.html#e0d947616d6aba70" class="t t">BlobErrorCode</a>.<a href="/Azure.Storage.Blobs/A.html#e12b0b7714ae7485" class="i property">ConditionNotMet</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="736925d9daf7321c" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadTo_ReplacedDuringDownload_MatchAny</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r425 rd" class="r425 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Upload a large blob</span>
            <a href="/Azure.Storage.Blobs/A.html#f0665d15d63242b1" class="t t">BlobClient</a> <span id="r426 rd" class="r426 r">blob</span> = <span class="r425 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#e796fb2e7b99a23b" class="i method">GetBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>());
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r427 rd" class="r427 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(10 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>)))
            {
                <b>await</b> <span class="r426 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#b43e68f04bbbae62" class="i method">UploadAsync</a>(<span class="r427 r">stream</span>);
            }
 
            <span class="c">// Check the error we get when a download fails because the blob</span>
            <span class="c">// was replaced while we&#39;re downloading</span>
            <a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a> <span id="r428 rd" class="r428 r">ex</span> = <span class="t t">Assert</span>.<span class="i method">CatchAsync</span>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <b>async</b> () =&gt;
                {
                    <span class="c">// Create a stream that replaces the blob as soon as it starts downloading</span>
                    <b>bool</b> <span id="r429 rd" class="r429 r">replaced</span> = <b>false</b>;
                    <b>await</b> <span class="r426 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#2455f5f748982345" class="i method">DownloadToAsync</a>(
                        <b>new</b> <a href="FuncStream.cs.html#a8aa29f3edddf0de" class="t constructor">FuncStream</a>(
                            <a href="@0@mscorlib/A.html#f956b0c07e86df64" class="t t">Stream</a>.<a href="@0@mscorlib/A.html#7e25c72455973e1f" class="i field">Null</a>,
                            <b>async</b> () =&gt;
                            {
                                <b>if</b> (!<span class="r429 r">replaced</span>)
                                {
                                    <span class="r429 r">replaced</span> = <b>true</b>;
                                    <b>using</b> <a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r430 rd" class="r430 r">newStream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(10 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>));
                                    <b>await</b> <span class="r426 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e53ffbb1a703075" class="i method">UploadAsync</a>(<span class="r430 r">newStream</span>, <span class="r206 r">overwrite</span>: <b>true</b>);
                                }
                            }),
                        <span class="r431 r">conditions</span>: <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
                        {
                            <a href="/Azure.Core/A.html#c0640f9cb69488b5" class="i property">IfMatch</a> = <b>new</b> <a href="/Azure.Core/A.html#83878a5758faf623" class="t constructor">ETag</a>(<span class="s">&quot;*&quot;</span>)
                        },
                        <span class="r432 r">transferOptions</span>:
                            <b>new</b> <a href="/Azure.Storage.Common/A.html#5906346a5aaad27d" class="t constructor">StorageTransferOptions</a>
                            {
                                <a href="/Azure.Storage.Common/A.html#9af76c13ed7d72aa" class="i property">MaximumConcurrency</a> = 1,
                                <a href="/Azure.Storage.Common/A.html#6c3ac4bff39cdfb2" class="i property">MaximumTransferLength</a> = <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>,
                                <a href="/Azure.Storage.Common/A.html#2db18e92623468ec" class="i property">InitialTransferLength</a> = <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>
                            });
                });
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r428 r">ex</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a> == <a href="/Azure.Storage.Blobs/A.html#e0d947616d6aba70" class="t t">BlobErrorCode</a>.<a href="/Azure.Storage.Blobs/A.html#e12b0b7714ae7485" class="i property">ConditionNotMet</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="2c77f615a1466b80" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadToAsync_PathOverloads</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r433 rd" class="r433 r">path</span> = <a href="@0@mscorlib/A.html#090eca8621a248ee" class="t t">Path</a>.<a href="@0@mscorlib/A.html#3f28ce894873de0a" class="i method">GetTempFileName</a>();
            <b>try</b>
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r434 rd" class="r434 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
                <b>var</b> <span id="r435 rd" class="r435 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
 
                <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r436 rd" class="r436 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r434 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
                <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r437 rd" class="r437 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r435 r">data</span>))
                {
                    <b>await</b> <span class="r436 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r437 r">stream</span>);
                }
                <b>await</b> <a href="#ded93b2ebbca825e" class="i method">Verify</a>(<b>await</b> <span class="r436 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#09b789492bc76915" class="i method">DownloadToAsync</a>(<span class="r433 r">path</span>));
                <b>await</b> <a href="#ded93b2ebbca825e" class="i method">Verify</a>(<b>await</b> <span class="r436 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#09421e9bb5c60481" class="i method">DownloadToAsync</a>(<span class="r433 r">path</span>, <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a>.<a href="@0@mscorlib/A.html#ec32c41597007382" class="i property">None</a>));
                <b>await</b> <a href="#ded93b2ebbca825e" class="i method">Verify</a>(<b>await</b> <span class="r436 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#e74486f9256141a6" class="i method">DownloadToAsync</a>(<span class="r433 r">path</span>,
                    <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>() { <a href="/Azure.Core/A.html#4e2106a4ce43d036" class="i property">IfModifiedSince</a> = <b>default</b> }));
 
                <b>async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="ded93b2ebbca825e" href="R/ded93b2ebbca825e.html" target="n" data-glyph="76,2" class="i method">Verify</a>(<a href="/Azure.Core/A.html#ad97b1910f5ca3eb" class="t t">Response</a> <span id="r438 rd" class="r438 r">response</span>)
                {
                    <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r435 r">data</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <a href="@0@mscorlib/A.html#1c7421e464f67b7e" class="t t">File</a>.<a href="@0@mscorlib/A.html#ee8033fcb7e7a677" class="i method">ReadAllBytes</a>(<span class="r433 r">path</span>).<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>);
                    <b>using</b> <a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r439 rd" class="r439 r">actual</span> = <b>new</b> <a href="@0@mscorlib/A.html#d308091cc690e78d" class="t constructor">MemoryStream</a>();
                    <b>using</b> (<a href="@0@mscorlib/A.html#e23a38af5d11ddd3" class="t t">FileStream</a> <span id="r440 rd" class="r440 r">resultStream</span> = <a href="@0@mscorlib/A.html#1c7421e464f67b7e" class="t t">File</a>.<a href="@0@mscorlib/A.html#7a7d1c864bec521e" class="i method">OpenRead</a>(<span class="r433 r">path</span>))
                    {
                        <b>await</b> <span class="r440 r">resultStream</span>.<a href="@0@mscorlib/A.html#1ed7a6d41a19abf9" class="i method">CopyToAsync</a>(<span class="r439 r">actual</span>);
                        <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#59794893533f4fba" class="i method">AssertSequenceEqual</a>(<span class="r435 r">data</span>, <span class="r439 r">actual</span>.<a href="@0@mscorlib/A.html#5df5fc757781f05e" class="i method">ToArray</a>());
                    }
                }
            }
            <b>finally</b>
            {
                <b>if</b> (<a href="@0@mscorlib/A.html#1c7421e464f67b7e" class="t t">File</a>.<a href="@0@mscorlib/A.html#3360368484a9f131" class="i method">Exists</a>(<span class="r433 r">path</span>))
                {
                    <a href="@0@mscorlib/A.html#1c7421e464f67b7e" class="t t">File</a>.<a href="@0@mscorlib/A.html#c4e7406e837331d5" class="i method">Delete</a>(<span class="r433 r">path</span>);
                }
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="e0da2ac1264b1e29" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadToAsync_StreamOverloads</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r441 rd" class="r441 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <b>var</b> <span id="r442 rd" class="r442 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r443 rd" class="r443 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r441 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r444 rd" class="r444 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r442 r">data</span>))
            {
                <b>await</b> <span class="r443 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r444 r">stream</span>);
            }
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r445 rd" class="r445 r">resultStream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r442 r">data</span>))
            {
                <b>await</b> <span class="r443 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#03e5c9435901584b" class="i method">DownloadToAsync</a>(<span class="r445 r">resultStream</span>);
                <a href="#1049f7a40c0ca48c" class="i method">Verify</a>(<span class="r445 r">resultStream</span>);
            }
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r446 rd" class="r446 r">resultStream</span> = <b>new</b> <a href="@0@mscorlib/A.html#d308091cc690e78d" class="t constructor">MemoryStream</a>())
            {
                <b>await</b> <span class="r443 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#c39f061f96ca8adc" class="i method">DownloadToAsync</a>(<span class="r446 r">resultStream</span>, <a href="@0@mscorlib/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a>.<a href="@0@mscorlib/A.html#ec32c41597007382" class="i property">None</a>);
                <a href="#1049f7a40c0ca48c" class="i method">Verify</a>(<span class="r446 r">resultStream</span>);
            }
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r447 rd" class="r447 r">resultStream</span> = <b>new</b> <a href="@0@mscorlib/A.html#d308091cc690e78d" class="t constructor">MemoryStream</a>())
            {
                <b>await</b> <span class="r443 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#2455f5f748982345" class="i method">DownloadToAsync</a>(<span class="r447 r">resultStream</span>,
                    <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>() { <a href="/Azure.Core/A.html#4e2106a4ce43d036" class="i property">IfModifiedSince</a> = <b>default</b> });
                <a href="#1049f7a40c0ca48c" class="i method">Verify</a>(<span class="r447 r">resultStream</span>);
            }
 
            <b>void</b> <a id="1049f7a40c0ca48c" href="R/1049f7a40c0ca48c.html" target="n" data-glyph="76,2" class="i method">Verify</a>(<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="t t">MemoryStream</a> <span id="r448 rd" class="r448 r">resultStream</span>)
            {
                <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r442 r">data</span>.<a href="@0@mscorlib/A.html#42e9b7616956cf94" class="i property">Length</a>, <span class="r448 r">resultStream</span>.<a href="@0@mscorlib/A.html#af4720ccd5d86f14" class="i property">Length</a>);
                <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#59794893533f4fba" class="i method">AssertSequenceEqual</a>(<span class="r442 r">data</span>, <span class="r448 r">resultStream</span>.<a href="@0@mscorlib/A.html#5df5fc757781f05e" class="i method">ToArray</a>());
            }
        }
        <span class="k preprocess">#</span><span class="k preprocess">endregion</span> Parallel Download
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="4536a4558b76a1c6" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DownloadEmptyBlobTest</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r449 rd" class="r449 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#f0665d15d63242b1" class="t t">BlobClient</a> <span id="r450 rd" class="r450 r">blobClient</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r449 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#e796fb2e7b99a23b" class="i method">GetBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r451 rd" class="r451 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#d308091cc690e78d" class="t constructor">MemoryStream</a>())
            {
                <b>await</b> <span class="r450 r">blobClient</span>.<a href="/Azure.Storage.Blobs/A.html#4e53ffbb1a703075" class="i method">UploadAsync</a>(<span class="r451 r">stream</span>, <span class="r206 r">overwrite</span>: <b>true</b>);
            }
 
            <span class="c">// Act</span>
            <b>await</b> <span class="r450 r">blobClient</span>.<a href="/Azure.Storage.Blobs/A.html#3d24e9ffd423b49e" class="i method">DownloadAsync</a>();
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="0bb70ee6ac2976da" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StartCopyFromUriAsync</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r452 rd" class="r452 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r453 rd" class="r453 r">srcBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r452 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r454 rd" class="r454 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r452 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#9f993becb7caf4ab" class="t t">Operation</a>&lt;<b>long</b>&gt; <span id="r455 rd" class="r455 r">operation</span> = <b>await</b> <span class="r454 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#9bc9dbfe9cc4ed80" class="i method">StartCopyFromUriAsync</a>(<span class="r453 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>);
 
            <span class="c">// Assert</span>
            <b>await</b> <span class="r455 r">operation</span>.<a href="/Azure.Core/A.html#a5c876e29e7551d3" class="i method">WaitForCompletionAsync</a>();
 
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r455 r">operation</span>.<a href="/Azure.Core/A.html#dea97cf86f26128d" class="i property">HasCompleted</a>);
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r455 r">operation</span>.<a href="/Azure.Core/A.html#797e78f4f8524db5" class="i property">HasValue</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<span class="t constructor">TestCase</span>(<b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Storage.Blobs/A.html#49487ceff21a9309" class="i property">LeaseId</a>))]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="2ce4411d44f6a64a" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StartCopyFromUriAsync_InvalidSourceRequestConditions</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r456 rd" class="r456 r">invalidSourceCondition</span>)
        {
            <span class="c">// Arrange</span>
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r457 rd" class="r457 r">uri</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">&quot;https://www.doesntmatter.com&quot;</span>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r458 rd" class="r458 r">blobBaseClient</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(<span class="r457 r">uri</span>, <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>());
 
            <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r459 rd" class="r459 r">sourceConditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>();
 
            <b>switch</b> (<span class="r456 r">invalidSourceCondition</span>)
            {
                <b>case</b> <b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Storage.Blobs/A.html#49487ceff21a9309" class="i property">LeaseId</a>):
                    <span class="r459 r">sourceConditions</span>.<a href="/Azure.Storage.Blobs/A.html#49487ceff21a9309" class="i property">LeaseId</a> = <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>;
                    <b>break</b>;
            }
 
            <a href="/Azure.Storage.Blobs/A.html#214bad0a180caa4a" class="t t">BlobCopyFromUriOptions</a> <span id="r460 rd" class="r460 r">options</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#755a79f1554e1e6a" class="t constructor">BlobCopyFromUriOptions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#13107eb91f6a5241" class="i property">SourceConditions</a> = <span class="r459 r">sourceConditions</span>
            };
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="@0@mscorlib/A.html#109b3ef6299ef9df" class="t t">ArgumentException</a>&gt;(
                <span class="r458 r">blobBaseClient</span>.<a href="/Azure.Storage.Blobs/A.html#d32f314829a57be8" class="i method">StartCopyFromUriAsync</a>(
                    <span class="r457 r">uri</span>,
                    <span class="r461 r">options</span>: <span class="r460 r">options</span>),
                <span id="r462 rd" class="r462 r">e</span> =&gt;
                {
                    <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r462 r">e</span>.<a href="@0@mscorlib/A.html#71cfcd61786aa2d8" class="i property">Message</a>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<span class="s">$&quot;</span><span class="s">StartCopyFromUri does not support the </span>{<span class="r456 r">invalidSourceCondition</span>}<span class="s"> condition(s).</span><span class="s">&quot;</span>));
                    <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r462 r">e</span>.<a href="@0@mscorlib/A.html#71cfcd61786aa2d8" class="i property">Message</a>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<span class="s">&quot;sourceConditions&quot;</span>));
                });
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="667385b928fc56b8" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StartCopyFromUriAsync_Tags</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r463 rd" class="r463 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r464 rd" class="r464 r">srcBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r463 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r465 rd" class="r465 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r463 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r466 rd" class="r466 r">tags</span> = <a href="BlobTestBase.cs.html#7fec8daec2d431bb" class="i method">BuildTags</a>();
            <a href="/Azure.Storage.Blobs/A.html#214bad0a180caa4a" class="t t">BlobCopyFromUriOptions</a> <span id="r467 rd" class="r467 r">options</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#755a79f1554e1e6a" class="t constructor">BlobCopyFromUriOptions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#0633dc9bdefa6cd7" class="i property">Tags</a> = <span class="r466 r">tags</span>
            };
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#9f993becb7caf4ab" class="t t">Operation</a>&lt;<b>long</b>&gt; <span id="r468 rd" class="r468 r">operation</span> = <b>await</b> <span class="r465 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#d32f314829a57be8" class="i method">StartCopyFromUriAsync</a>(<span class="r464 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>, <span class="r467 r">options</span>);
 
            <span class="c">// Assert</span>
            <b>await</b> <span class="r468 r">operation</span>.<a href="/Azure.Core/A.html#a5c876e29e7551d3" class="i method">WaitForCompletionAsync</a>();
 
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#ef95198899ead425" class="t t">GetBlobTagResult</a>&gt; <span id="r469 rd" class="r469 r">response</span> = <b>await</b> <span class="r465 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#b7f89f805d5f0d37" class="i method">GetTagsAsync</a>();
            <a href="Shared/StorageTestBase.cs.html#d0a7dd4c7ffda95e" class="i method">AssertDictionaryEquality</a>(<span class="r466 r">tags</span>, <span class="r469 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#0dc9c594d988f55e" class="i property">Tags</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="505b5d19cbcab0c9" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StartCopyFromUriAsync_Metadata</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r470 rd" class="r470 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r471 rd" class="r471 r">srcBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r470 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r472 rd" class="r472 r">metadata</span> = <a href="Shared/StorageTestBase.cs.html#9bbe73e9e1c28539" class="i method">BuildMetadata</a>();
            <a href="/Azure.Storage.Blobs/A.html#214bad0a180caa4a" class="t t">BlobCopyFromUriOptions</a> <span id="r473 rd" class="r473 r">options</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#755a79f1554e1e6a" class="t constructor">BlobCopyFromUriOptions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#b13caaa1fe534a57" class="i property">Metadata</a> = <span class="r472 r">metadata</span>
            };
 
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r474 rd" class="r474 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r470 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
 
            <span class="c">// Act</span>
            <b>await</b> <span class="r474 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#d32f314829a57be8" class="i method">StartCopyFromUriAsync</a>(
                <span class="r475 r">source</span>: <span class="r471 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>,
                <span class="r473 r">options</span>);
 
            <span class="c">// Assert</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r476 rd" class="r476 r">response</span> = <b>await</b> <span class="r474 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
            <a href="Shared/StorageTestBase.cs.html#d0a7dd4c7ffda95e" class="i method">AssertDictionaryEquality</a>(<span class="r472 r">metadata</span>, <span class="r476 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#27d37e820e0d05ba" class="i property">Metadata</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="db9feea3f41a76ee" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StartCopyFromUriAsync_Source_AccessConditions</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r477 rd" class="r477 r">garbageLeaseId</span> = <a href="BlobTestBase.cs.html#d39dc6fab7daaa70" class="i method">GetGarbageLeaseId</a>();
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r478 rd" class="r478 r">parameters</span> <b>in</b> <a href="#94c281f351d174da" class="i property">NoLease_AccessConditions_Data</a>)
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r479 rd" class="r479 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
                <span class="c">// Arrange</span>
                <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r480 rd" class="r480 r">srcBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r479 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
                <span class="r478 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r480 r">srcBlob</span>, <span class="r478 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a>);
                <span class="r478 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#af0faf1b7c1c85bd" class="i property">LeaseId</a> = <b>await</b> <a href="BlobTestBase.cs.html#2216a728843c891e" class="i method">SetupBlobLeaseCondition</a>(<span class="r480 r">srcBlob</span>, <span class="r478 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#af0faf1b7c1c85bd" class="i property">LeaseId</a>, <span class="r477 r">garbageLeaseId</span>);
                <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r481 rd" class="r481 r">sourceAccessConditions</span> = <a href="#47a1d944fb251ee5" class="i method">BuildAccessConditions</a>(
                    <span class="r482 r">parameters</span>: <span class="r478 r">parameters</span>);
                <a href="/Azure.Storage.Blobs/A.html#214bad0a180caa4a" class="t t">BlobCopyFromUriOptions</a> <span id="r483 rd" class="r483 r">options</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#755a79f1554e1e6a" class="t constructor">BlobCopyFromUriOptions</a>
                {
                    <a href="/Azure.Storage.Blobs/A.html#13107eb91f6a5241" class="i property">SourceConditions</a> = <span class="r481 r">sourceAccessConditions</span>
                };
 
                <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r484 rd" class="r484 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r479 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
 
                <span class="c">// Act</span>
                <a href="/Azure.Core/A.html#9f993becb7caf4ab" class="t t">Operation</a>&lt;<b>long</b>&gt; <span id="r485 rd" class="r485 r">response</span> = <b>await</b> <span class="r484 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#d32f314829a57be8" class="i method">StartCopyFromUriAsync</a>(
                    <span class="r475 r">source</span>: <span class="r480 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>,
                    <span class="r483 r">options</span>);
 
                <span class="c">// Assert</span>
                <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r485 r">response</span>.<a href="/Azure.Core/A.html#bf1f83c9d05bd2ed" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="6fa75804365962de" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StartCopyFromUriAsync_Source_AccessConditionsFail</a>()
        {
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r486 rd" class="r486 r">parameters</span> <b>in</b> <a href="#cd39d61d30a86c0a" class="i property">NoLease_AccessConditionsFail_Data</a>)
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r487 rd" class="r487 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
                <span class="c">// Arrange</span>
                <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r488 rd" class="r488 r">srcBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r487 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
                <span class="r486 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r488 r">srcBlob</span>, <span class="r486 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a>);
 
                <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r489 rd" class="r489 r">sourceAccessConditions</span> = <a href="#47a1d944fb251ee5" class="i method">BuildAccessConditions</a>(
                    <span class="r482 r">parameters</span>: <span class="r486 r">parameters</span>,
                    <span class="r490 r">lease</span>: <b>false</b>);
                <a href="/Azure.Storage.Blobs/A.html#214bad0a180caa4a" class="t t">BlobCopyFromUriOptions</a> <span id="r491 rd" class="r491 r">options</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#755a79f1554e1e6a" class="t constructor">BlobCopyFromUriOptions</a>
                {
                    <a href="/Azure.Storage.Blobs/A.html#13107eb91f6a5241" class="i property">SourceConditions</a> = <span class="r489 r">sourceAccessConditions</span>
                };
 
                <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r492 rd" class="r492 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r487 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
 
                <span class="c">// Act</span>
                <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                    <span class="r492 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#d32f314829a57be8" class="i method">StartCopyFromUriAsync</a>(
                        <span class="r475 r">source</span>: <span class="r488 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>,
                        <span class="r491 r">options</span>),
                    <span id="r493 rd" class="r493 r">e</span> =&gt; { });
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="ac78dd60c4c4c8ef" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StartCopyFromUriAsync_Source_IfTags</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r494 rd" class="r494 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r495 rd" class="r495 r">srcBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r494 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r496 rd" class="r496 r">destBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r494 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r497 rd" class="r497 r">tags</span> = <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;
            {
                { <span class="s">&quot;coolTag&quot;</span>, <span class="s">&quot;true&quot;</span> }
            };
            <b>await</b> <span class="r495 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r497 r">tags</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#214bad0a180caa4a" class="t t">BlobCopyFromUriOptions</a> <span id="r498 rd" class="r498 r">options</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#755a79f1554e1e6a" class="t constructor">BlobCopyFromUriOptions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#13107eb91f6a5241" class="i property">SourceConditions</a> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
                {
                    <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
                }
            };
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#9f993becb7caf4ab" class="t t">Operation</a>&lt;<b>long</b>&gt; <span id="r499 rd" class="r499 r">operation</span> = <b>await</b> <span class="r496 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#d32f314829a57be8" class="i method">StartCopyFromUriAsync</a>(
                <span class="r495 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>,
                <span class="r461 r">options</span>: <span class="r498 r">options</span>);
 
            <span class="c">// Assert</span>
            <b>await</b> <span class="r499 r">operation</span>.<a href="/Azure.Core/A.html#a5c876e29e7551d3" class="i method">WaitForCompletionAsync</a>();
 
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r499 r">operation</span>.<a href="/Azure.Core/A.html#dea97cf86f26128d" class="i property">HasCompleted</a>);
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r499 r">operation</span>.<a href="/Azure.Core/A.html#797e78f4f8524db5" class="i property">HasValue</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="523182280c6ecb57" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StartCopyFromUriAsync_Source_IfTagsFailed</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r500 rd" class="r500 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r501 rd" class="r501 r">srcBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r500 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r502 rd" class="r502 r">destBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r500 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#214bad0a180caa4a" class="t t">BlobCopyFromUriOptions</a> <span id="r503 rd" class="r503 r">options</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#755a79f1554e1e6a" class="t constructor">BlobCopyFromUriOptions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#13107eb91f6a5241" class="i property">SourceConditions</a> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
                {
                    <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
                }
            };
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r502 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#d32f314829a57be8" class="i method">StartCopyFromUriAsync</a>(
                            <span class="r501 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>,
                            <span class="r461 r">options</span>: <span class="r503 r">options</span>),
                <span id="r504 rd" class="r504 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;ConditionNotMet&quot;</span>, <span class="r504 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="5a52af347dfa0323" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StartCopyFromUriAsync_Destination_AccessConditions</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r505 rd" class="r505 r">garbageLeaseId</span> = <a href="BlobTestBase.cs.html#d39dc6fab7daaa70" class="i method">GetGarbageLeaseId</a>();
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r506 rd" class="r506 r">parameters</span> <b>in</b> <a href="#2a798157c01985c4" class="i property">AccessConditions_Data</a>)
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r507 rd" class="r507 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
                <span class="c">// Arrange</span>
                <b>var</b> <span id="r508 rd" class="r508 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
                <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r509 rd" class="r509 r">srcBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r507 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
                <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r510 rd" class="r510 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r508 r">data</span>))
                {
                    <b>await</b> <span class="r509 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r510 r">stream</span>);
                }
                <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r511 rd" class="r511 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r507 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
 
                <span class="c">// destBlob needs to exist so we can get its lease and etag</span>
                <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r512 rd" class="r512 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r508 r">data</span>))
                {
                    <b>await</b> <span class="r511 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r512 r">stream</span>);
                }
 
                <span class="r506 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r511 r">destBlob</span>, <span class="r506 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a>);
                <span class="r506 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#af0faf1b7c1c85bd" class="i property">LeaseId</a> = <b>await</b> <a href="BlobTestBase.cs.html#2216a728843c891e" class="i method">SetupBlobLeaseCondition</a>(<span class="r511 r">destBlob</span>, <span class="r506 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#af0faf1b7c1c85bd" class="i property">LeaseId</a>, <span class="r505 r">garbageLeaseId</span>);
 
                <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r513 rd" class="r513 r">accessConditions</span> = <a href="#47a1d944fb251ee5" class="i method">BuildAccessConditions</a>(<span class="r482 r">parameters</span>: <span class="r506 r">parameters</span>);
                <a href="/Azure.Storage.Blobs/A.html#214bad0a180caa4a" class="t t">BlobCopyFromUriOptions</a> <span id="r514 rd" class="r514 r">options</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#755a79f1554e1e6a" class="t constructor">BlobCopyFromUriOptions</a>
                {
                    <a href="/Azure.Storage.Blobs/A.html#d64d34bd9edd329a" class="i property">DestinationConditions</a> = <span class="r513 r">accessConditions</span>
                };
 
                <span class="c">// Act</span>
                <a href="/Azure.Core/A.html#9f993becb7caf4ab" class="t t">Operation</a>&lt;<b>long</b>&gt; <span id="r515 rd" class="r515 r">response</span> = <b>await</b> <span class="r511 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#d32f314829a57be8" class="i method">StartCopyFromUriAsync</a>(
                    <span class="r475 r">source</span>: <span class="r509 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>,
                    <span class="r514 r">options</span>);
 
                <span class="c">// Assert</span>
                <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r515 r">response</span>.<a href="/Azure.Core/A.html#bf1f83c9d05bd2ed" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="840d96d8ec66b7d4" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StartCopyFromUriAsync_Destination_AccessConditionsFail</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r516 rd" class="r516 r">garbageLeaseId</span> = <a href="BlobTestBase.cs.html#d39dc6fab7daaa70" class="i method">GetGarbageLeaseId</a>();
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r517 rd" class="r517 r">parameters</span> <b>in</b> <a href="#f06bf70b762b1860" class="i method">GetAccessConditionsFail_Data</a>(<span class="r516 r">garbageLeaseId</span>))
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r518 rd" class="r518 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
                <span class="c">// Arrange</span>
                <b>var</b> <span id="r519 rd" class="r519 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
                <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r520 rd" class="r520 r">srcBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r518 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
                <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r521 rd" class="r521 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r519 r">data</span>))
                {
                    <b>await</b> <span class="r520 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r521 r">stream</span>);
                }
 
                <span class="c">// destBlob needs to exist so we can get its etag</span>
                <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r522 rd" class="r522 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r518 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
                <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r523 rd" class="r523 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r519 r">data</span>))
                {
                    <b>await</b> <span class="r522 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r523 r">stream</span>);
                }
 
                <span class="r517 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r522 r">destBlob</span>, <span class="r517 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a>);
                <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r524 rd" class="r524 r">accessConditions</span> = <a href="#47a1d944fb251ee5" class="i method">BuildAccessConditions</a>(<span class="r482 r">parameters</span>: <span class="r517 r">parameters</span>);
                <a href="/Azure.Storage.Blobs/A.html#214bad0a180caa4a" class="t t">BlobCopyFromUriOptions</a> <span id="r525 rd" class="r525 r">options</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#755a79f1554e1e6a" class="t constructor">BlobCopyFromUriOptions</a>
                {
                    <a href="/Azure.Storage.Blobs/A.html#d64d34bd9edd329a" class="i property">DestinationConditions</a> = <span class="r524 r">accessConditions</span>
                };
 
                <span class="c">// Act</span>
                <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                    <span class="r522 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#d32f314829a57be8" class="i method">StartCopyFromUriAsync</a>(
                        <span class="r475 r">source</span>: <span class="r520 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>,
                        <span class="r525 r">options</span>),
                    <span id="r526 rd" class="r526 r">e</span> =&gt; { });
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="24b00517112d178e" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StartCopyFromUriAsync_IfTags</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r527 rd" class="r527 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r528 rd" class="r528 r">srcBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r527 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r529 rd" class="r529 r">destBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r527 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r530 rd" class="r530 r">tags</span> = <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;
            {
                { <span class="s">&quot;coolTag&quot;</span>, <span class="s">&quot;true&quot;</span> }
            };
            <b>await</b> <span class="r529 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r530 r">tags</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#214bad0a180caa4a" class="t t">BlobCopyFromUriOptions</a> <span id="r531 rd" class="r531 r">options</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#755a79f1554e1e6a" class="t constructor">BlobCopyFromUriOptions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#d64d34bd9edd329a" class="i property">DestinationConditions</a> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
                {
                    <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
                }
            };
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#9f993becb7caf4ab" class="t t">Operation</a>&lt;<b>long</b>&gt; <span id="r532 rd" class="r532 r">operation</span> = <b>await</b> <span class="r529 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#d32f314829a57be8" class="i method">StartCopyFromUriAsync</a>(
                <span class="r528 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>,
                <span class="r461 r">options</span>: <span class="r531 r">options</span>);
 
            <span class="c">// Assert</span>
            <b>await</b> <span class="r532 r">operation</span>.<a href="/Azure.Core/A.html#a5c876e29e7551d3" class="i method">WaitForCompletionAsync</a>();
 
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r532 r">operation</span>.<a href="/Azure.Core/A.html#dea97cf86f26128d" class="i property">HasCompleted</a>);
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r532 r">operation</span>.<a href="/Azure.Core/A.html#797e78f4f8524db5" class="i property">HasValue</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="d62d62334408d2a8" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StartCopyFromUriAsync_IfTagsFailed</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r533 rd" class="r533 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r534 rd" class="r534 r">srcBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r533 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r535 rd" class="r535 r">destBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r533 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#214bad0a180caa4a" class="t t">BlobCopyFromUriOptions</a> <span id="r536 rd" class="r536 r">options</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#755a79f1554e1e6a" class="t constructor">BlobCopyFromUriOptions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#d64d34bd9edd329a" class="i property">DestinationConditions</a> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
                {
                    <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
                }
            };
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r535 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#d32f314829a57be8" class="i method">StartCopyFromUriAsync</a>(
                            <span class="r534 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>,
                            <span class="r461 r">options</span>: <span class="r536 r">options</span>),
                <span id="r537 rd" class="r537 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;ConditionNotMet&quot;</span>, <span class="r537 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="6a687b1ce55d311c" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StartCopyFromUriAsync_AccessTier</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r538 rd" class="r538 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r539 rd" class="r539 r">srcBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r538 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r540 rd" class="r540 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r538 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Storage.Blobs/A.html#214bad0a180caa4a" class="t t">BlobCopyFromUriOptions</a> <span id="r541 rd" class="r541 r">options</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#755a79f1554e1e6a" class="t constructor">BlobCopyFromUriOptions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#f903ea825f26ca3d" class="i property">AccessTier</a> = <a href="/Azure.Storage.Blobs/A.html#fba68f8727fd7278" class="t t">AccessTier</a>.<a href="/Azure.Storage.Blobs/A.html#ca04e0d5eba05558" class="i property">Cool</a>
            };
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#9f993becb7caf4ab" class="t t">Operation</a>&lt;<b>long</b>&gt; <span id="r542 rd" class="r542 r">operation</span> = <b>await</b> <span class="r540 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#d32f314829a57be8" class="i method">StartCopyFromUriAsync</a>(
                <span class="r539 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>,
                <span class="r541 r">options</span>);
 
            <span class="c">// Assert</span>
            <span class="c">// data copied within an account, so copy should be instantaneous</span>
            <b>await</b> <span class="r542 r">operation</span>.<a href="/Azure.Core/A.html#a5c876e29e7551d3" class="i method">WaitForCompletionAsync</a>();
 
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r542 r">operation</span>.<a href="/Azure.Core/A.html#dea97cf86f26128d" class="i property">HasCompleted</a>);
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r542 r">operation</span>.<a href="/Azure.Core/A.html#797e78f4f8524db5" class="i property">HasValue</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="2ca1fa8f81153009" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StartCopyFromUriAsync_Seal</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r543 rd" class="r543 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#ab2a0e921078c272" class="t t">AppendBlobClient</a> <span id="r544 rd" class="r544 r">srcBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r543 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9b1458a6a968c4e1" class="i method">GetAppendBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Storage.Blobs/A.html#ab2a0e921078c272" class="t t">AppendBlobClient</a> <span id="r545 rd" class="r545 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r543 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9b1458a6a968c4e1" class="i method">GetAppendBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>await</b> <span class="r544 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#4dc3eeb6e23e9c0f" class="i method">CreateAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#214bad0a180caa4a" class="t t">BlobCopyFromUriOptions</a> <span id="r546 rd" class="r546 r">options</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#755a79f1554e1e6a" class="t constructor">BlobCopyFromUriOptions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#4c9c9bea1bfcc47c" class="i property">ShouldSealDestination</a> = <b>true</b>
            };
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#9f993becb7caf4ab" class="t t">Operation</a>&lt;<b>long</b>&gt; <span id="r547 rd" class="r547 r">operation</span> = <b>await</b> <span class="r545 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#d32f314829a57be8" class="i method">StartCopyFromUriAsync</a>(<span class="r544 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>, <span class="r546 r">options</span>);
 
            <span class="c">// Assert</span>
            <b>await</b> <span class="r547 r">operation</span>.<a href="/Azure.Core/A.html#a5c876e29e7551d3" class="i method">WaitForCompletionAsync</a>();
 
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r548 rd" class="r548 r">response</span> = <b>await</b> <span class="r545 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r548 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#58bc8b035431e4d1" class="i property">IsSealed</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="7851432b7dae5f3b" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StartCopyFromUriAsync_Error</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r549 rd" class="r549 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r550 rd" class="r550 r">srcBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r549 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r551 rd" class="r551 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r549 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r551 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#9bc9dbfe9cc4ed80" class="i method">StartCopyFromUriAsync</a>(<span class="r550 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>),
                <span id="r552 rd" class="r552 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;BlobNotFound&quot;</span>, <span class="r552 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="54ad62edf6f89798" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StartCopyFromUriAsync_RehydratePriority</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r553 rd" class="r553 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <b>var</b> <span id="r554 rd" class="r554 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <b>var</b> <span id="r555 rd" class="r555 r">data2</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r556 rd" class="r556 r">srcBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r553 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r557 rd" class="r557 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r553 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r558 rd" class="r558 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r554 r">data</span>))
            {
                <b>await</b> <span class="r556 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r558 r">stream</span>);
            }
 
            <span class="c">// destBlob needs to exist so we can get its lease and etag</span>
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r559 rd" class="r559 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r555 r">data2</span>))
            {
                <b>await</b> <span class="r557 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r559 r">stream</span>);
            }
 
            <a href="/Azure.Storage.Blobs/A.html#214bad0a180caa4a" class="t t">BlobCopyFromUriOptions</a> <span id="r560 rd" class="r560 r">options</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#755a79f1554e1e6a" class="t constructor">BlobCopyFromUriOptions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#f903ea825f26ca3d" class="i property">AccessTier</a> = <a href="/Azure.Storage.Blobs/A.html#fba68f8727fd7278" class="t t">AccessTier</a>.<a href="/Azure.Storage.Blobs/A.html#a8a54fd366606d43" class="i property">Archive</a>,
                <a href="/Azure.Storage.Blobs/A.html#7ed0dcb1b651011b" class="i property">RehydratePriority</a> = <a href="/Azure.Storage.Blobs/A.html#24706b1eae49d67f" class="t t">RehydratePriority</a>.<a href="/Azure.Storage.Blobs/A.html#a4fa13cea0b00cfe" class="i field">High</a>
            };
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#9f993becb7caf4ab" class="t t">Operation</a>&lt;<b>long</b>&gt; <span id="r561 rd" class="r561 r">operation</span> = <b>await</b> <span class="r557 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#d32f314829a57be8" class="i method">StartCopyFromUriAsync</a>(
                <span class="r556 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>,
                <span class="r560 r">options</span>);
 
            <span class="c">// Assert</span>
            <span class="c">// data copied within an account, so copy should be instantaneous</span>
            <b>await</b> <span class="r561 r">operation</span>.<a href="/Azure.Core/A.html#a5c876e29e7551d3" class="i method">WaitForCompletionAsync</a>();
 
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r561 r">operation</span>.<a href="/Azure.Core/A.html#dea97cf86f26128d" class="i property">HasCompleted</a>);
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r561 r">operation</span>.<a href="/Azure.Core/A.html#797e78f4f8524db5" class="i property">HasValue</a>);
 
            <span class="c">// Act</span>
            <b>await</b> <span class="r557 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#326b7b743ac09161" class="i method">SetAccessTierAsync</a>(<a href="/Azure.Storage.Blobs/A.html#fba68f8727fd7278" class="t t">AccessTier</a>.<a href="/Azure.Storage.Blobs/A.html#ca04e0d5eba05558" class="i property">Cool</a>);
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r562 rd" class="r562 r">propertiesResponse</span> = <b>await</b> <span class="r557 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;rehydrate-pending-to-cool&quot;</span>, <span class="r562 r">propertiesResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#05583bc6988f5d97" class="i property">ArchiveStatus</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="cf567be707883ba3" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StartCopyFromUriAsync_AccessTierFail</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r563 rd" class="r563 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r564 rd" class="r564 r">srcBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r563 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r565 rd" class="r565 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r563 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Storage.Blobs/A.html#214bad0a180caa4a" class="t t">BlobCopyFromUriOptions</a> <span id="r566 rd" class="r566 r">options</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#755a79f1554e1e6a" class="t constructor">BlobCopyFromUriOptions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#f903ea825f26ca3d" class="i property">AccessTier</a> = <a href="/Azure.Storage.Blobs/A.html#fba68f8727fd7278" class="t t">AccessTier</a>.<a href="/Azure.Storage.Blobs/A.html#0422c3b977681334" class="i property">P20</a>
            };
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r565 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#d32f314829a57be8" class="i method">StartCopyFromUriAsync</a>(
                <span class="r564 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>,
                <span class="r566 r">options</span>),
                <span id="r567 rd" class="r567 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#e0d947616d6aba70" class="t t">BlobErrorCode</a>.<a href="/Azure.Storage.Blobs/A.html#c0f0cc85b2567211" class="i property">InvalidHeaderValue</a>.<a href="/Azure.Storage.Blobs/A.html#956fff1c6f30e077" class="i method">ToString</a>(), <span class="r567 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="46ea8ec738777ac8" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">StartCopyFromUriAsync_VersionId</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r568 rd" class="r568 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r569 rd" class="r569 r">srcBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r568 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r570 rd" class="r570 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r568 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#9f993becb7caf4ab" class="t t">Operation</a>&lt;<b>long</b>&gt; <span id="r571 rd" class="r571 r">operation</span> = <b>await</b> <span class="r570 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#9bc9dbfe9cc4ed80" class="i method">StartCopyFromUriAsync</a>(<span class="r569 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>);
 
            <span class="c">// Assert</span>
            <b>await</b> <span class="r571 r">operation</span>.<a href="/Azure.Core/A.html#a5c876e29e7551d3" class="i method">WaitForCompletionAsync</a>();
 
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r571 r">operation</span>.<a href="/Azure.Core/A.html#dea97cf86f26128d" class="i property">HasCompleted</a>);
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r571 r">operation</span>.<a href="/Azure.Core/A.html#797e78f4f8524db5" class="i property">HasValue</a>);
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r571 r">operation</span>.<a href="/Azure.Core/A.html#bf1f83c9d05bd2ed" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#b9e2782d1af92ede" class="i method">TryGetValue</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#fb4970515a57da2f" class="t t">HeaderNames</a>.<a href="/Azure.Storage.Blobs/A.html#18c383318bd1f002" class="i field">VersionId</a>, <b>out</b> <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <b>_</b>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="e01cab1f6360e69d" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">AbortCopyFromUriAsync</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r572 rd" class="r572 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <b>await</b> <span class="r572 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#66e94da104359874" class="i method">SetAccessPolicyAsync</a>(<a href="/Azure.Storage.Blobs/A.html#674161da970857ad" class="t t">PublicAccessType</a>.<a href="/Azure.Storage.Blobs/A.html#3aadf575d812dfcc" class="i field">Blob</a>);
            <b>var</b> <span id="r573 rd" class="r573 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(8 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f083580f332431a9" class="i field">MB</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r574 rd" class="r574 r">srcBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r572 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r575 rd" class="r575 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r573 r">data</span>))
            {
                <b>await</b> <span class="r574 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r575 r">stream</span>);
            }
 
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r576 rd" class="r576 r">secondaryService</span> = <a href="BlobTestBase.cs.html#a0ccf5affc88da7d" class="i property">BlobsClientBuilder</a>.<a href="ClientBuilderExtensions.cs.html#fdafd88aa5d1c416" class="i method">GetServiceClient_SecondaryAccount_SharedKey</a>();
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r577 rd" class="r577 r">destTest</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(<span class="r181 r">service</span>: <span class="r576 r">secondaryService</span>);
            {
                <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r578 rd" class="r578 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r577 r">destTest</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
 
                <a href="/Azure.Core/A.html#9f993becb7caf4ab" class="t t">Operation</a>&lt;<b>long</b>&gt; <span id="r579 rd" class="r579 r">operation</span> = <b>await</b> <span class="r578 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#9bc9dbfe9cc4ed80" class="i method">StartCopyFromUriAsync</a>(<span class="r574 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>);
 
                <span class="c">// Act</span>
                <b>try</b>
                {
                    <a href="/Azure.Core/A.html#ad97b1910f5ca3eb" class="t t">Response</a> <span id="r580 rd" class="r580 r">response</span> = <b>await</b> <span class="r578 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#9bddf18013cb2370" class="i method">AbortCopyFromUriAsync</a>(<span class="r579 r">operation</span>.<a href="/Azure.Core/A.html#822532f351414fd3" class="i property">Id</a>);
 
                    <span class="c">// Assert</span>
                    <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r580 r">response</span>.<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
                }
                <b>catch</b> (<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a> <span id="r581 rd" class="r581 r">e</span>) <b>when</b> (<span class="r581 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a> == <span class="s">&quot;NoPendingCopyOperation&quot;</span>)
                {
                    <a href="Shared/StorageTestBase.cs.html#c549c59a59cffa04" class="i method">WarnCopyCompletedTooQuickly</a>();
                }
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<span class="t constructor">TestCase</span>(<b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#4e2106a4ce43d036" class="i property">IfModifiedSince</a>))]
        [<span class="t constructor">TestCase</span>(<b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#ef1f2b8d0f0fd9ea" class="i property">IfUnmodifiedSince</a>))]
        [<span class="t constructor">TestCase</span>(<b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#c0640f9cb69488b5" class="i property">IfMatch</a>))]
        [<span class="t constructor">TestCase</span>(<b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#9dcd4da0df2d88c2" class="i property">IfNoneMatch</a>))]
        [<span class="t constructor">TestCase</span>(<b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a>))]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="95e3b04377de44d3" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">AbortCopyFromUriAsync_InvalidRequestConditions</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r582 rd" class="r582 r">invalidCondition</span>)
        {
            <span class="c">// Arrange</span>
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r583 rd" class="r583 r">uri</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">&quot;https://www.doesntmatter.com&quot;</span>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r584 rd" class="r584 r">blobBaseClient</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(<span class="r583 r">uri</span>, <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>());
 
            <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r585 rd" class="r585 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>();
 
            <b>switch</b> (<span class="r582 r">invalidCondition</span>)
            {
                <b>case</b> <b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#4e2106a4ce43d036" class="i property">IfModifiedSince</a>):
                    <span class="r585 r">conditions</span>.<a href="/Azure.Core/A.html#4e2106a4ce43d036" class="i property">IfModifiedSince</a> = <b>new</b> <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t constructor">DateTimeOffset</a>();
                    <b>break</b>;
                <b>case</b> <b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#ef1f2b8d0f0fd9ea" class="i property">IfUnmodifiedSince</a>):
                    <span class="r585 r">conditions</span>.<a href="/Azure.Core/A.html#ef1f2b8d0f0fd9ea" class="i property">IfUnmodifiedSince</a> = <b>new</b> <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t constructor">DateTimeOffset</a>();
                    <b>break</b>;
                <b>case</b> <b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#c0640f9cb69488b5" class="i property">IfMatch</a>):
                    <span class="r585 r">conditions</span>.<a href="/Azure.Core/A.html#c0640f9cb69488b5" class="i property">IfMatch</a> = <b>new</b> <a href="/Azure.Core/A.html#69017d8593c3f0de" class="t constructor">ETag</a>();
                    <b>break</b>;
                <b>case</b> <b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#9dcd4da0df2d88c2" class="i property">IfNoneMatch</a>):
                    <span class="r585 r">conditions</span>.<a href="/Azure.Core/A.html#9dcd4da0df2d88c2" class="i property">IfNoneMatch</a> = <b>new</b> <a href="/Azure.Core/A.html#69017d8593c3f0de" class="t constructor">ETag</a>();
                    <b>break</b>;
                <b>case</b> <b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a>):
                    <span class="r585 r">conditions</span>.<a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>;
                    <b>break</b>;
            }
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="@0@mscorlib/A.html#109b3ef6299ef9df" class="t t">ArgumentException</a>&gt;(
                <span class="r584 r">blobBaseClient</span>.<a href="/Azure.Storage.Blobs/A.html#9bddf18013cb2370" class="i method">AbortCopyFromUriAsync</a>(
                    <span class="r586 r">copyId</span>: <span class="s">&quot;copyId&quot;</span>,
                    <span class="r587 r">conditions</span>: <span class="r585 r">conditions</span>),
                <span id="r588 rd" class="r588 r">e</span> =&gt;
                {
                    <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r588 r">e</span>.<a href="@0@mscorlib/A.html#71cfcd61786aa2d8" class="i property">Message</a>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<span class="s">$&quot;</span><span class="s">AbortCopyFromUri does not support the </span>{<span class="r582 r">invalidCondition</span>}<span class="s"> condition(s).</span><span class="s">&quot;</span>));
                    <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r588 r">e</span>.<a href="@0@mscorlib/A.html#71cfcd61786aa2d8" class="i property">Message</a>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<span class="s">&quot;conditions&quot;</span>));
                });
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="37643fcc854fcd6f" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">AbortCopyFromUriAsync_Lease</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r589 rd" class="r589 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <b>await</b> <span class="r589 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#66e94da104359874" class="i method">SetAccessPolicyAsync</a>(<a href="/Azure.Storage.Blobs/A.html#674161da970857ad" class="t t">PublicAccessType</a>.<a href="/Azure.Storage.Blobs/A.html#3aadf575d812dfcc" class="i field">Blob</a>);
            <b>var</b> <span id="r590 rd" class="r590 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(8 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f083580f332431a9" class="i field">MB</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r591 rd" class="r591 r">srcBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r589 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r592 rd" class="r592 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r590 r">data</span>))
            {
                <b>await</b> <span class="r591 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r592 r">stream</span>);
            }
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r593 rd" class="r593 r">secondaryService</span> = <a href="BlobTestBase.cs.html#a0ccf5affc88da7d" class="i property">BlobsClientBuilder</a>.<a href="ClientBuilderExtensions.cs.html#fdafd88aa5d1c416" class="i method">GetServiceClient_SecondaryAccount_SharedKey</a>();
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r594 rd" class="r594 r">destTest</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(<span class="r181 r">service</span>: <span class="r593 r">secondaryService</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r595 rd" class="r595 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r594 r">destTest</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r596 rd" class="r596 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r590 r">data</span>))
            {
                <b>await</b> <span class="r595 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r596 r">stream</span>);
            }
 
            <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a> <span id="r597 rd" class="r597 r">duration</span> = <a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="t t">BlobLeaseClient</a>.<a href="/Azure.Storage.Blobs/A.html#10750128eacdf57c" class="i field">InfiniteLeaseDuration</a>;
            <a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="t t">BlobLeaseClient</a> <span id="r598 rd" class="r598 r">lease</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r595 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>()));
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#91e6307d565054a8" class="t t">BlobLease</a>&gt; <span id="r599 rd" class="r599 r">leaseResponse</span> = <b>await</b> <span class="r598 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(<span class="r597 r">duration</span>);
 
            <a href="/Azure.Core/A.html#9f993becb7caf4ab" class="t t">Operation</a>&lt;<b>long</b>&gt; <span id="r600 rd" class="r600 r">operation</span> = <b>await</b> <span class="r595 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#9bc9dbfe9cc4ed80" class="i method">StartCopyFromUriAsync</a>(
                <span class="r601 r">source</span>: <span class="r591 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>,
                <span class="r602 r">destinationConditions</span>: <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a> { <a href="/Azure.Storage.Blobs/A.html#49487ceff21a9309" class="i property">LeaseId</a> = <span class="r599 r">leaseResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#a71ab31c3576ef9f" class="i property">LeaseId</a> });
 
            <span class="c">// Act</span>
            <b>try</b>
            {
                <a href="/Azure.Core/A.html#ad97b1910f5ca3eb" class="t t">Response</a> <span id="r603 rd" class="r603 r">response</span> = <b>await</b> <span class="r595 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#9bddf18013cb2370" class="i method">AbortCopyFromUriAsync</a>(
                    <span class="r586 r">copyId</span>: <span class="r600 r">operation</span>.<a href="/Azure.Core/A.html#822532f351414fd3" class="i property">Id</a>,
                    <span class="r587 r">conditions</span>: <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
                    {
                        <a href="/Azure.Storage.Blobs/A.html#49487ceff21a9309" class="i property">LeaseId</a> = <span class="r599 r">leaseResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#a71ab31c3576ef9f" class="i property">LeaseId</a>
                    });
 
                <span class="c">// Assert</span>
                <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r603 r">response</span>.<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
            }
            <b>catch</b> (<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a> <span id="r604 rd" class="r604 r">e</span>) <b>when</b> (<span class="r604 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a> == <span class="s">&quot;NoPendingCopyOperation&quot;</span>)
            {
                <a href="Shared/StorageTestBase.cs.html#c549c59a59cffa04" class="i method">WarnCopyCompletedTooQuickly</a>();
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="ddb74b3d8a3ce33c" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">AbortCopyFromUriAsync_LeaseFail</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r605 rd" class="r605 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <b>await</b> <span class="r605 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#66e94da104359874" class="i method">SetAccessPolicyAsync</a>(<a href="/Azure.Storage.Blobs/A.html#674161da970857ad" class="t t">PublicAccessType</a>.<a href="/Azure.Storage.Blobs/A.html#3aadf575d812dfcc" class="i field">Blob</a>);
            <b>var</b> <span id="r606 rd" class="r606 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(8 * <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f083580f332431a9" class="i field">MB</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r607 rd" class="r607 r">srcBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r605 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r608 rd" class="r608 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r606 r">data</span>))
            {
                <b>await</b> <span class="r607 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r608 r">stream</span>);
            }
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r609 rd" class="r609 r">secondaryService</span> = <a href="BlobTestBase.cs.html#a0ccf5affc88da7d" class="i property">BlobsClientBuilder</a>.<a href="ClientBuilderExtensions.cs.html#fdafd88aa5d1c416" class="i method">GetServiceClient_SecondaryAccount_SharedKey</a>();
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r610 rd" class="r610 r">destTest</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(<span class="r181 r">service</span>: <span class="r609 r">secondaryService</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r611 rd" class="r611 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r610 r">destTest</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r612 rd" class="r612 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r606 r">data</span>))
            {
                <b>await</b> <span class="r611 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r612 r">stream</span>);
            }
 
            <a href="/Azure.Core/A.html#9f993becb7caf4ab" class="t t">Operation</a>&lt;<b>long</b>&gt; <span id="r613 rd" class="r613 r">operation</span> = <b>await</b> <span class="r611 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#9bc9dbfe9cc4ed80" class="i method">StartCopyFromUriAsync</a>(<span class="r601 r">source</span>: <span class="r607 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>);
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r614 rd" class="r614 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
 
            <span class="c">// Act</span>
            <b>try</b>
            {
                <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                    <span class="r611 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#9bddf18013cb2370" class="i method">AbortCopyFromUriAsync</a>(
                        <span class="r586 r">copyId</span>: <span class="r613 r">operation</span>.<a href="/Azure.Core/A.html#822532f351414fd3" class="i property">Id</a>,
                        <span class="r587 r">conditions</span>: <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
                        {
                            <a href="/Azure.Storage.Blobs/A.html#49487ceff21a9309" class="i property">LeaseId</a> = <span class="r614 r">leaseId</span>
                        }),
                    <span id="r615 rd" class="r615 r">e</span> =&gt;
                    {
                        <b>switch</b> (<span class="r615 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>)
                        {
                            <b>case</b> <span class="s">&quot;NoPendingCopyOperation&quot;</span>:
                                <a href="Shared/StorageTestBase.cs.html#c549c59a59cffa04" class="i method">WarnCopyCompletedTooQuickly</a>();
                                <b>break</b>;
                            <b>default</b>:
                                <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;LeaseNotPresentWithBlobOperation&quot;</span>, <span class="r615 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>);
                                <b>break</b>;
                        }
                    }
                    );
            }
            <b>catch</b> (<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a> <span id="r616 rd" class="r616 r">e</span>) <b>when</b> (<span class="r616 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a> == <span class="s">&quot;NoPendingCopyOperation&quot;</span>)
            {
                <a href="Shared/StorageTestBase.cs.html#c549c59a59cffa04" class="i method">WarnCopyCompletedTooQuickly</a>();
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="ff0d58448c283677" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">AbortCopyFromUriAsync_Error</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r617 rd" class="r617 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r618 rd" class="r618 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r617 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r619 rd" class="r619 r">copyId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r618 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#9bddf18013cb2370" class="i method">AbortCopyFromUriAsync</a>(<span class="r619 r">copyId</span>),
                <span id="r620 rd" class="r620 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;BlobNotFound&quot;</span>, <span class="r620 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="6601bb9b6fc30a9e" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SyncCopyFromUriAsync</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r621 rd" class="r621 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r622 rd" class="r622 r">srcBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r621 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r623 rd" class="r623 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r621 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5257d326eb3fef9e" class="t t">BlobCopyInfo</a>&gt; <span id="r624 rd" class="r624 r">copyResponse</span> = <b>await</b> <span class="r623 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#2e4ceb5e9062820e" class="i method">SyncCopyFromUriAsync</a>(<span class="r622 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>);
 
            <span class="c">// Check that destBlob actually exists</span>
            <b>await</b> <span class="r623 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="c">// Ensure that we grab the whole ETag value from the service without removing the quotes</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r624 r">copyResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#9fe5978f23edd98f" class="i property">ETag</a>.<a href="/Azure.Core/A.html#c02596ded366f933" class="i method">ToString</a>(), <span class="s">$&quot;</span>\&quot;{<span class="r624 r">copyResponse</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#5cb5957443570b99" class="i property">ETag</a>.<a href="@0@mscorlib/A.html#d83d2db767b43db7" class="i method">ToString</a>()}\&quot;<span class="s">&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r624 r">copyResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#3fb23bfdf5af8834" class="i property">LastModified</a>);
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r624 r">copyResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#1fb68ed3aee6d6a3" class="i property">CopyId</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#1007ad6b09a9c013" class="t t">CopyStatus</a>.<a href="/Azure.Storage.Blobs/A.html#53a4bb79f4d9530c" class="i field">Success</a>, <span class="r624 r">copyResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#99035befb12edfac" class="i property">CopyStatus</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#eac876b0bd045159" class="i field">V2020_12_06</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="2bc1f0cbd387e71c" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SyncCopyFromUriAsync_EncryptionScope</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r625 rd" class="r625 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r626 rd" class="r626 r">sourceBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r625 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r627 rd" class="r627 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r625 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <span class="r627 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r627 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#73519c629746cdda" class="i method">WithEncryptionScope</a>(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#0234405d8d5e089b" class="i property">EncryptionScope</a>));
 
            <span class="c">// Upload data to source blob</span>
            <b>byte</b>[] <span id="r628 rd" class="r628 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <b>using</b> <a href="@0@mscorlib/A.html#f956b0c07e86df64" class="t t">Stream</a> <span id="r629 rd" class="r629 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r628 r">data</span>);
 
            <b>await</b> <span class="r626 r">sourceBlob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r629 r">stream</span>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5257d326eb3fef9e" class="t t">BlobCopyInfo</a>&gt; <span id="r630 rd" class="r630 r">response</span> = <b>await</b> <span class="r627 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#2e4ceb5e9062820e" class="i method">SyncCopyFromUriAsync</a>(<span class="r626 r">sourceBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>);
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#0234405d8d5e089b" class="i property">EncryptionScope</a>, <span class="r630 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#a313e1f3e8784b3d" class="i property">EncryptionScope</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<span class="t constructor">TestCase</span>(<b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Storage.Blobs/A.html#49487ceff21a9309" class="i property">LeaseId</a>))]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="02d6fd717ce6a2f7" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SyncCopyFromUriAsync_InvalidSourceRequestConditions</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r631 rd" class="r631 r">invalidSourceCondition</span>)
        {
            <span class="c">// Arrange</span>
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r632 rd" class="r632 r">uri</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">&quot;https://www.doesntmatter.com&quot;</span>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r633 rd" class="r633 r">blobBaseClient</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(<span class="r632 r">uri</span>, <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>());
 
            <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r634 rd" class="r634 r">sourceConditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>();
 
            <b>switch</b> (<span class="r631 r">invalidSourceCondition</span>)
            {
                <b>case</b> <b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Storage.Blobs/A.html#49487ceff21a9309" class="i property">LeaseId</a>):
                    <span class="r634 r">sourceConditions</span>.<a href="/Azure.Storage.Blobs/A.html#49487ceff21a9309" class="i property">LeaseId</a> = <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@0@mscorlib/A.html#c9f70a27facb27cf" class="i field">Empty</a>;
                    <b>break</b>;
            }
 
            <a href="/Azure.Storage.Blobs/A.html#214bad0a180caa4a" class="t t">BlobCopyFromUriOptions</a> <span id="r635 rd" class="r635 r">options</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#755a79f1554e1e6a" class="t constructor">BlobCopyFromUriOptions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#13107eb91f6a5241" class="i property">SourceConditions</a> = <span class="r634 r">sourceConditions</span>
            };
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="@0@mscorlib/A.html#109b3ef6299ef9df" class="t t">ArgumentException</a>&gt;(
                <span class="r633 r">blobBaseClient</span>.<a href="/Azure.Storage.Blobs/A.html#2e4ceb5e9062820e" class="i method">SyncCopyFromUriAsync</a>(
                    <span class="r632 r">uri</span>,
                    <span class="r636 r">options</span>: <span class="r635 r">options</span>),
                <span id="r637 rd" class="r637 r">e</span> =&gt;
                {
                    <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r637 r">e</span>.<a href="@0@mscorlib/A.html#71cfcd61786aa2d8" class="i property">Message</a>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<span class="s">$&quot;</span><span class="s">SyncCopyFromUri does not support the </span>{<span class="r631 r">invalidSourceCondition</span>}<span class="s"> condition(s).</span><span class="s">&quot;</span>));
                    <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r637 r">e</span>.<a href="@0@mscorlib/A.html#71cfcd61786aa2d8" class="i property">Message</a>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<span class="s">&quot;sourceConditions&quot;</span>));
                });
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="1065fa368e0fe003" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SyncCopyFromUriAsync_Tags</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r638 rd" class="r638 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r639 rd" class="r639 r">srcBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r638 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r640 rd" class="r640 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r638 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r641 rd" class="r641 r">tags</span> = <a href="BlobTestBase.cs.html#7fec8daec2d431bb" class="i method">BuildTags</a>();
            <a href="/Azure.Storage.Blobs/A.html#214bad0a180caa4a" class="t t">BlobCopyFromUriOptions</a> <span id="r642 rd" class="r642 r">options</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#755a79f1554e1e6a" class="t constructor">BlobCopyFromUriOptions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#0633dc9bdefa6cd7" class="i property">Tags</a> = <span class="r641 r">tags</span>
            };
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5257d326eb3fef9e" class="t t">BlobCopyInfo</a>&gt; <span id="r643 rd" class="r643 r">copyResponse</span> = <b>await</b> <span class="r640 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#2e4ceb5e9062820e" class="i method">SyncCopyFromUriAsync</a>(<span class="r639 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>, <span class="r642 r">options</span>);
 
            <span class="c">// Assert</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#ef95198899ead425" class="t t">GetBlobTagResult</a>&gt; <span id="r644 rd" class="r644 r">response</span> = <b>await</b> <span class="r640 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#b7f89f805d5f0d37" class="i method">GetTagsAsync</a>();
            <a href="Shared/StorageTestBase.cs.html#d0a7dd4c7ffda95e" class="i method">AssertDictionaryEquality</a>(<span class="r641 r">tags</span>, <span class="r644 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#0dc9c594d988f55e" class="i property">Tags</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="fa19e0ed8e1abb5f" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SyncCopyFromUriAsync_Metadata</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r645 rd" class="r645 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r646 rd" class="r646 r">srcBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r645 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r647 rd" class="r647 r">metadata</span> = <a href="Shared/StorageTestBase.cs.html#9bbe73e9e1c28539" class="i method">BuildMetadata</a>();
            <a href="/Azure.Storage.Blobs/A.html#214bad0a180caa4a" class="t t">BlobCopyFromUriOptions</a> <span id="r648 rd" class="r648 r">options</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#755a79f1554e1e6a" class="t constructor">BlobCopyFromUriOptions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#b13caaa1fe534a57" class="i property">Metadata</a> = <span class="r647 r">metadata</span>
            };
 
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r649 rd" class="r649 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r645 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
 
            <span class="c">// Act</span>
            <b>await</b> <span class="r649 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#2e4ceb5e9062820e" class="i method">SyncCopyFromUriAsync</a>(
                <span class="r650 r">source</span>: <span class="r646 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>,
                <span class="r648 r">options</span>);
 
            <span class="c">// Assert</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r651 rd" class="r651 r">response</span> = <b>await</b> <span class="r649 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
            <a href="Shared/StorageTestBase.cs.html#d0a7dd4c7ffda95e" class="i method">AssertDictionaryEquality</a>(<span class="r647 r">metadata</span>, <span class="r651 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#27d37e820e0d05ba" class="i property">Metadata</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="09d75fc3c114eac6" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SyncCopyFromUriAsync_Source_AccessConditions</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r652 rd" class="r652 r">garbageLeaseId</span> = <a href="BlobTestBase.cs.html#d39dc6fab7daaa70" class="i method">GetGarbageLeaseId</a>();
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r653 rd" class="r653 r">parameters</span> <b>in</b> <a href="#94c281f351d174da" class="i property">NoLease_AccessConditions_Data</a>)
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r654 rd" class="r654 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
                <span class="c">// Arrange</span>
                <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r655 rd" class="r655 r">srcBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r654 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
                <span class="r653 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r655 r">srcBlob</span>, <span class="r653 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a>);
                <span class="r653 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#af0faf1b7c1c85bd" class="i property">LeaseId</a> = <b>await</b> <a href="BlobTestBase.cs.html#2216a728843c891e" class="i method">SetupBlobLeaseCondition</a>(<span class="r655 r">srcBlob</span>, <span class="r653 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#af0faf1b7c1c85bd" class="i property">LeaseId</a>, <span class="r652 r">garbageLeaseId</span>);
                <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r656 rd" class="r656 r">sourceAccessConditions</span> = <a href="#47a1d944fb251ee5" class="i method">BuildAccessConditions</a>(
                    <span class="r482 r">parameters</span>: <span class="r653 r">parameters</span>);
                <a href="/Azure.Storage.Blobs/A.html#214bad0a180caa4a" class="t t">BlobCopyFromUriOptions</a> <span id="r657 rd" class="r657 r">options</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#755a79f1554e1e6a" class="t constructor">BlobCopyFromUriOptions</a>
                {
                    <a href="/Azure.Storage.Blobs/A.html#13107eb91f6a5241" class="i property">SourceConditions</a> = <span class="r656 r">sourceAccessConditions</span>
                };
 
                <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r658 rd" class="r658 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r654 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
 
                <span class="c">// Act</span>
                <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5257d326eb3fef9e" class="t t">BlobCopyInfo</a>&gt; <span id="r659 rd" class="r659 r">response</span> = <b>await</b> <span class="r658 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#2e4ceb5e9062820e" class="i method">SyncCopyFromUriAsync</a>(
                    <span class="r650 r">source</span>: <span class="r655 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>,
                    <span class="r657 r">options</span>);
 
                <span class="c">// Assert</span>
                <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r659 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="0df620fbb20f2f88" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SyncCopyFromUriAsync_Source_AccessConditionsFail</a>()
        {
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r660 rd" class="r660 r">parameters</span> <b>in</b> <a href="#cd39d61d30a86c0a" class="i property">NoLease_AccessConditionsFail_Data</a>)
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r661 rd" class="r661 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
                <span class="c">// Arrange</span>
                <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r662 rd" class="r662 r">srcBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r661 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
                <span class="r660 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r662 r">srcBlob</span>, <span class="r660 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a>);
 
                <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r663 rd" class="r663 r">sourceAccessConditions</span> = <a href="#47a1d944fb251ee5" class="i method">BuildAccessConditions</a>(
                    <span class="r482 r">parameters</span>: <span class="r660 r">parameters</span>,
                    <span class="r490 r">lease</span>: <b>false</b>);
                <a href="/Azure.Storage.Blobs/A.html#214bad0a180caa4a" class="t t">BlobCopyFromUriOptions</a> <span id="r664 rd" class="r664 r">options</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#755a79f1554e1e6a" class="t constructor">BlobCopyFromUriOptions</a>
                {
                    <a href="/Azure.Storage.Blobs/A.html#13107eb91f6a5241" class="i property">SourceConditions</a> = <span class="r663 r">sourceAccessConditions</span>
                };
 
                <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r665 rd" class="r665 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r661 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
 
                <span class="c">// Act</span>
                <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                    <span class="r665 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#2e4ceb5e9062820e" class="i method">SyncCopyFromUriAsync</a>(
                        <span class="r650 r">source</span>: <span class="r662 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>,
                        <span class="r664 r">options</span>),
                    <span id="r666 rd" class="r666 r">e</span> =&gt; { });
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="2329be89e25a42c9" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SyncCopyFromUriAsync_Destination_AccessConditions</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r667 rd" class="r667 r">garbageLeaseId</span> = <a href="BlobTestBase.cs.html#d39dc6fab7daaa70" class="i method">GetGarbageLeaseId</a>();
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r668 rd" class="r668 r">parameters</span> <b>in</b> <a href="#2a798157c01985c4" class="i property">AccessConditions_Data</a>)
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r669 rd" class="r669 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
                <span class="c">// Arrange</span>
                <b>var</b> <span id="r670 rd" class="r670 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
                <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r671 rd" class="r671 r">srcBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r669 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
                <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r672 rd" class="r672 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r670 r">data</span>))
                {
                    <b>await</b> <span class="r671 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r672 r">stream</span>);
                }
                <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r673 rd" class="r673 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r669 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
 
                <span class="c">// destBlob needs to exist so we can get its lease and etag</span>
                <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r674 rd" class="r674 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r670 r">data</span>))
                {
                    <b>await</b> <span class="r673 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r674 r">stream</span>);
                }
 
                <span class="r668 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r673 r">destBlob</span>, <span class="r668 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a>);
                <span class="r668 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#af0faf1b7c1c85bd" class="i property">LeaseId</a> = <b>await</b> <a href="BlobTestBase.cs.html#2216a728843c891e" class="i method">SetupBlobLeaseCondition</a>(<span class="r673 r">destBlob</span>, <span class="r668 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#af0faf1b7c1c85bd" class="i property">LeaseId</a>, <span class="r667 r">garbageLeaseId</span>);
 
                <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r675 rd" class="r675 r">accessConditions</span> = <a href="#47a1d944fb251ee5" class="i method">BuildAccessConditions</a>(<span class="r482 r">parameters</span>: <span class="r668 r">parameters</span>);
                <a href="/Azure.Storage.Blobs/A.html#214bad0a180caa4a" class="t t">BlobCopyFromUriOptions</a> <span id="r676 rd" class="r676 r">options</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#755a79f1554e1e6a" class="t constructor">BlobCopyFromUriOptions</a>
                {
                    <a href="/Azure.Storage.Blobs/A.html#d64d34bd9edd329a" class="i property">DestinationConditions</a> = <span class="r675 r">accessConditions</span>
                };
 
                <span class="c">// Act</span>
                <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5257d326eb3fef9e" class="t t">BlobCopyInfo</a>&gt; <span id="r677 rd" class="r677 r">response</span> = <b>await</b> <span class="r673 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#2e4ceb5e9062820e" class="i method">SyncCopyFromUriAsync</a>(
                    <span class="r650 r">source</span>: <span class="r671 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>,
                    <span class="r676 r">options</span>);
 
                <span class="c">// Assert</span>
                <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r677 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="0b21a6be27e6c3d2" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SyncCopyFromUriAsync_Destination_AccessConditionsFail</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r678 rd" class="r678 r">garbageLeaseId</span> = <a href="BlobTestBase.cs.html#d39dc6fab7daaa70" class="i method">GetGarbageLeaseId</a>();
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r679 rd" class="r679 r">parameters</span> <b>in</b> <a href="#f06bf70b762b1860" class="i method">GetAccessConditionsFail_Data</a>(<span class="r678 r">garbageLeaseId</span>))
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r680 rd" class="r680 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
                <span class="c">// Arrange</span>
                <b>var</b> <span id="r681 rd" class="r681 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
                <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r682 rd" class="r682 r">srcBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r680 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
                <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r683 rd" class="r683 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r681 r">data</span>))
                {
                    <b>await</b> <span class="r682 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r683 r">stream</span>);
                }
 
                <span class="c">// destBlob needs to exist so we can get its etag</span>
                <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r684 rd" class="r684 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r680 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
                <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r685 rd" class="r685 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r681 r">data</span>))
                {
                    <b>await</b> <span class="r684 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r685 r">stream</span>);
                }
 
                <span class="r679 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r684 r">destBlob</span>, <span class="r679 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a>);
                <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r686 rd" class="r686 r">accessConditions</span> = <a href="#47a1d944fb251ee5" class="i method">BuildAccessConditions</a>(<span class="r482 r">parameters</span>: <span class="r679 r">parameters</span>);
                <a href="/Azure.Storage.Blobs/A.html#214bad0a180caa4a" class="t t">BlobCopyFromUriOptions</a> <span id="r687 rd" class="r687 r">options</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#755a79f1554e1e6a" class="t constructor">BlobCopyFromUriOptions</a>
                {
                    <a href="/Azure.Storage.Blobs/A.html#d64d34bd9edd329a" class="i property">DestinationConditions</a> = <span class="r686 r">accessConditions</span>
                };
 
                <span class="c">// Act</span>
                <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                    <span class="r684 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#2e4ceb5e9062820e" class="i method">SyncCopyFromUriAsync</a>(
                        <span class="r650 r">source</span>: <span class="r682 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>,
                        <span class="r687 r">options</span>),
                    <span id="r688 rd" class="r688 r">e</span> =&gt; { });
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="caa25b5aee06d24b" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SyncCopyFromUriAsync_IfTags</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r689 rd" class="r689 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r690 rd" class="r690 r">srcBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r689 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r691 rd" class="r691 r">destBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r689 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r692 rd" class="r692 r">tags</span> = <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;
            {
                { <span class="s">&quot;coolTag&quot;</span>, <span class="s">&quot;true&quot;</span> }
            };
            <b>await</b> <span class="r691 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r692 r">tags</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#214bad0a180caa4a" class="t t">BlobCopyFromUriOptions</a> <span id="r693 rd" class="r693 r">options</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#755a79f1554e1e6a" class="t constructor">BlobCopyFromUriOptions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#d64d34bd9edd329a" class="i property">DestinationConditions</a> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
                {
                    <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
                }
            };
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5257d326eb3fef9e" class="t t">BlobCopyInfo</a>&gt; <span id="r694 rd" class="r694 r">copyResponse</span> = <b>await</b> <span class="r691 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#2e4ceb5e9062820e" class="i method">SyncCopyFromUriAsync</a>(
                <span class="r690 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>,
                <span class="r636 r">options</span>: <span class="r693 r">options</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="99e0b53a2623499b" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SyncCopyFromUriAsync_IfTagsFailed</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r695 rd" class="r695 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r696 rd" class="r696 r">srcBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r695 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r697 rd" class="r697 r">destBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r695 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#214bad0a180caa4a" class="t t">BlobCopyFromUriOptions</a> <span id="r698 rd" class="r698 r">options</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#755a79f1554e1e6a" class="t constructor">BlobCopyFromUriOptions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#d64d34bd9edd329a" class="i property">DestinationConditions</a> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
                {
                    <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
                }
            };
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r697 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#2e4ceb5e9062820e" class="i method">SyncCopyFromUriAsync</a>(
                    <span class="r696 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>,
                    <span class="r636 r">options</span>: <span class="r698 r">options</span>),
                <span id="r699 rd" class="r699 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;ConditionNotMet&quot;</span>, <span class="r699 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<span class="t constructor">Ignore</span>(<span class="s">&quot;Inducing a 500 in the service&quot;</span>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="c3f6855f266e69e4" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SyncCopyFromUriAsync_AccessTier</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r700 rd" class="r700 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r701 rd" class="r701 r">srcBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r700 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r702 rd" class="r702 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r700 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Storage.Blobs/A.html#214bad0a180caa4a" class="t t">BlobCopyFromUriOptions</a> <span id="r703 rd" class="r703 r">options</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#755a79f1554e1e6a" class="t constructor">BlobCopyFromUriOptions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#f903ea825f26ca3d" class="i property">AccessTier</a> = <a href="/Azure.Storage.Blobs/A.html#fba68f8727fd7278" class="t t">AccessTier</a>.<a href="/Azure.Storage.Blobs/A.html#ca04e0d5eba05558" class="i property">Cool</a>
            };
 
            <span class="c">// Act</span>
            <b>await</b> <span class="r702 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#2e4ceb5e9062820e" class="i method">SyncCopyFromUriAsync</a>(
                <span class="r701 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>,
                <span class="r703 r">options</span>);
 
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r704 rd" class="r704 r">response</span> = <b>await</b> <span class="r702 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#fba68f8727fd7278" class="t t">AccessTier</a>.<a href="/Azure.Storage.Blobs/A.html#ca04e0d5eba05558" class="i property">Cool</a>, <span class="r704 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#22f45f7a8243d744" class="i property">AccessTier</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="a0c3776e6a9f692d" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SyncCopyFromUriAsync_AccessTierFail</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r705 rd" class="r705 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r706 rd" class="r706 r">srcBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r705 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r707 rd" class="r707 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r705 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Storage.Blobs/A.html#214bad0a180caa4a" class="t t">BlobCopyFromUriOptions</a> <span id="r708 rd" class="r708 r">options</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#755a79f1554e1e6a" class="t constructor">BlobCopyFromUriOptions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#f903ea825f26ca3d" class="i property">AccessTier</a> = <a href="/Azure.Storage.Blobs/A.html#fba68f8727fd7278" class="t t">AccessTier</a>.<a href="/Azure.Storage.Blobs/A.html#0422c3b977681334" class="i property">P20</a>
            };
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r707 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#2e4ceb5e9062820e" class="i method">SyncCopyFromUriAsync</a>(
                <span class="r706 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>,
                <span class="r708 r">options</span>),
                <span id="r709 rd" class="r709 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#e0d947616d6aba70" class="t t">BlobErrorCode</a>.<a href="/Azure.Storage.Blobs/A.html#c0f0cc85b2567211" class="i property">InvalidHeaderValue</a>.<a href="/Azure.Storage.Blobs/A.html#956fff1c6f30e077" class="i method">ToString</a>(), <span class="r709 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="ef026f557c1bee83" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SyncCopyFromUriAsync_Error</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r710 rd" class="r710 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r711 rd" class="r711 r">srcBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r710 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r712 rd" class="r712 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r710 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r712 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#2e4ceb5e9062820e" class="i method">SyncCopyFromUriAsync</a>(<span class="r711 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>),
                <span id="r713 rd" class="r713 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#e0d947616d6aba70" class="t t">BlobErrorCode</a>.<a href="/Azure.Storage.Blobs/A.html#46422e4bd47d9dce" class="i property">CannotVerifyCopySource</a>.<a href="/Azure.Storage.Blobs/A.html#956fff1c6f30e077" class="i method">ToString</a>(), <span class="r713 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="b50c3a3c094efd8a" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SyncCopyFromUriAsync_VersionId</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r714 rd" class="r714 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r715 rd" class="r715 r">srcBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r714 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r716 rd" class="r716 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r714 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5257d326eb3fef9e" class="t t">BlobCopyInfo</a>&gt; <span id="r717 rd" class="r717 r">response</span> = <b>await</b> <span class="r716 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#2e4ceb5e9062820e" class="i method">SyncCopyFromUriAsync</a>(<span class="r715 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>);
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r717 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#7c9ae05c74cabc37" class="i property">VersionId</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#09300745c79d161e" class="i field">V2020_10_02</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="2d58f76acf9764c9" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SyncCopyFromUri_SourceBearerToken</a>()
        {
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r718 rd" class="r718 r">serviceClient</span> = <a href="BlobTestBase.cs.html#a0ccf5affc88da7d" class="i property">BlobsClientBuilder</a>.<a href="ClientBuilderExtensions.cs.html#a816bf81da5c6a2b" class="i method">GetServiceClient_OAuth</a>();
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r719 rd" class="r719 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(
                <span class="r181 r">service</span>: <span class="r718 r">serviceClient</span>,
                <span class="r720 r">publicAccessType</span>: <a href="/Azure.Storage.Blobs/A.html#674161da970857ad" class="t t">PublicAccessType</a>.<a href="/Azure.Storage.Blobs/A.html#74dd97ac992337f6" class="i field">None</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r721 rd" class="r721 r">srcBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r719 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r722 rd" class="r722 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r719 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r723 rd" class="r723 r">sourceBearerToken</span> = <b>await</b> <a href="Shared/StorageTestBase.cs.html#1563cec55eb35f41" class="i method">GetAuthToken</a>();
 
            <a href="/Azure.Core/A.html#1814149496ba6987" class="t t">HttpAuthorization</a> <span id="r724 rd" class="r724 r">sourceAuth</span> = <b>new</b> <a href="/Azure.Core/A.html#6643480c172f3be6" class="t constructor">HttpAuthorization</a>(
                <span class="s">&quot;Bearer&quot;</span>,
                <span class="r723 r">sourceBearerToken</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#214bad0a180caa4a" class="t t">BlobCopyFromUriOptions</a> <span id="r725 rd" class="r725 r">options</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#755a79f1554e1e6a" class="t constructor">BlobCopyFromUriOptions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#ce00943bb3e1b1a5" class="i property">SourceAuthentication</a> = <span class="r724 r">sourceAuth</span>
            };
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5257d326eb3fef9e" class="t t">BlobCopyInfo</a>&gt; <span id="r726 rd" class="r726 r">copyResponse</span> = <b>await</b> <span class="r722 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#2e4ceb5e9062820e" class="i method">SyncCopyFromUriAsync</a>(
                <span class="r650 r">source</span>: <span class="r721 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>,
                <span class="r636 r">options</span>: <span class="r725 r">options</span>);
 
            <span class="c">// Check that destBlob actually exists</span>
            <b>await</b> <span class="r722 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r726 r">copyResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#9fe5978f23edd98f" class="i property">ETag</a>);
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r726 r">copyResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#3fb23bfdf5af8834" class="i property">LastModified</a>);
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r726 r">copyResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#1fb68ed3aee6d6a3" class="i property">CopyId</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#1007ad6b09a9c013" class="t t">CopyStatus</a>.<a href="/Azure.Storage.Blobs/A.html#53a4bb79f4d9530c" class="i field">Success</a>, <span class="r726 r">copyResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#99035befb12edfac" class="i property">CopyStatus</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#09300745c79d161e" class="i field">V2020_10_02</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="1132c1fe9551524a" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SyncCopyFromUri_SourceBearerTokenFail</a>()
        {
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r727 rd" class="r727 r">serviceClient</span> = <a href="BlobTestBase.cs.html#a0ccf5affc88da7d" class="i property">BlobsClientBuilder</a>.<a href="ClientBuilderExtensions.cs.html#a816bf81da5c6a2b" class="i method">GetServiceClient_OAuth</a>();
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r728 rd" class="r728 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(
                <span class="r181 r">service</span>: <span class="r727 r">serviceClient</span>,
                <span class="r720 r">publicAccessType</span>: <a href="/Azure.Storage.Blobs/A.html#674161da970857ad" class="t t">PublicAccessType</a>.<a href="/Azure.Storage.Blobs/A.html#74dd97ac992337f6" class="i field">None</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r729 rd" class="r729 r">srcBlob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r728 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r730 rd" class="r730 r">destBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r728 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r731 rd" class="r731 r">sourceTokenCredential</span> = <b>await</b> <a href="Shared/StorageTestBase.cs.html#1563cec55eb35f41" class="i method">GetAuthToken</a>();
 
            <a href="/Azure.Core/A.html#1814149496ba6987" class="t t">HttpAuthorization</a> <span id="r732 rd" class="r732 r">sourceAuth</span> = <b>new</b> <a href="/Azure.Core/A.html#6643480c172f3be6" class="t constructor">HttpAuthorization</a>(
                <span class="s">&quot;Bearer&quot;</span>,
                <span class="s">&quot;auth token&quot;</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#214bad0a180caa4a" class="t t">BlobCopyFromUriOptions</a> <span id="r733 rd" class="r733 r">options</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#755a79f1554e1e6a" class="t constructor">BlobCopyFromUriOptions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#ce00943bb3e1b1a5" class="i property">SourceAuthentication</a> = <span class="r732 r">sourceAuth</span>
            };
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r730 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#2e4ceb5e9062820e" class="i method">SyncCopyFromUriAsync</a>(
                    <span class="r650 r">source</span>: <span class="r729 r">srcBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>,
                    <span class="r636 r">options</span>: <span class="r733 r">options</span>),
                <span id="r734 rd" class="r734 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#e0d947616d6aba70" class="t t">BlobErrorCode</a>.<a href="/Azure.Storage.Blobs/A.html#46422e4bd47d9dce" class="i property">CannotVerifyCopySource</a>.<a href="/Azure.Storage.Blobs/A.html#956fff1c6f30e077" class="i method">ToString</a>(), <span class="r734 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="25f23af96e51550e" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DeleteAsync</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r735 rd" class="r735 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r736 rd" class="r736 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r735 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#ad97b1910f5ca3eb" class="t t">Response</a> <span id="r737 rd" class="r737 r">response</span> = <b>await</b> <span class="r736 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#f2250485288cca52" class="i method">DeleteAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r737 r">response</span>.<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="06b33313046993c4" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DeleteAsync_Options</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r738 rd" class="r738 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r739 rd" class="r739 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r738 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <b>await</b> <span class="r739 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#884dd1969092f87b" class="i method">CreateSnapshotAsync</a>();
 
            <span class="c">// Act</span>
            <b>await</b> <span class="r739 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#f2250485288cca52" class="i method">DeleteAsync</a>(<span class="r740 r">snapshotsOption</span>: <a href="/Azure.Storage.Blobs/A.html#3623eeacf8481443" class="t t">DeleteSnapshotsOption</a>.<a href="/Azure.Storage.Blobs/A.html#5767f650adbdcfe1" class="i field">OnlySnapshots</a>);
 
            <span class="c">// Assert</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r741 rd" class="r741 r">response</span> = <b>await</b> <span class="r739 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r741 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="cffc151cc4f97624" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DeleteAsync_AccessConditions</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r742 rd" class="r742 r">garbageLeaseId</span> = <a href="BlobTestBase.cs.html#d39dc6fab7daaa70" class="i method">GetGarbageLeaseId</a>();
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r743 rd" class="r743 r">parameters</span> <b>in</b> <a href="#2a798157c01985c4" class="i property">AccessConditions_Data</a>)
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r744 rd" class="r744 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
                <span class="c">// Arrange</span>
                <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r745 rd" class="r745 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r744 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
                <span class="r743 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r745 r">blob</span>, <span class="r743 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a>);
                <span class="r743 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#af0faf1b7c1c85bd" class="i property">LeaseId</a> = <b>await</b> <a href="BlobTestBase.cs.html#2216a728843c891e" class="i method">SetupBlobLeaseCondition</a>(<span class="r745 r">blob</span>, <span class="r743 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#af0faf1b7c1c85bd" class="i property">LeaseId</a>, <span class="r742 r">garbageLeaseId</span>);
                <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r746 rd" class="r746 r">accessConditions</span> = <a href="#47a1d944fb251ee5" class="i method">BuildAccessConditions</a>(
                    <span class="r482 r">parameters</span>: <span class="r743 r">parameters</span>,
                    <span class="r490 r">lease</span>: <b>true</b>);
 
                <span class="c">// Act</span>
                <a href="/Azure.Core/A.html#ad97b1910f5ca3eb" class="t t">Response</a> <span id="r747 rd" class="r747 r">response</span> = <b>await</b> <span class="r745 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#f2250485288cca52" class="i method">DeleteAsync</a>(<span class="r748 r">conditions</span>: <span class="r746 r">accessConditions</span>);
 
                <span class="c">// Assert</span>
                <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r747 r">response</span>.<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="9714772df11eb5e0" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DeleteAsync_AccessConditionsFail</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r749 rd" class="r749 r">garbageLeaseId</span> = <a href="BlobTestBase.cs.html#d39dc6fab7daaa70" class="i method">GetGarbageLeaseId</a>();
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r750 rd" class="r750 r">parameters</span> <b>in</b> <a href="#f06bf70b762b1860" class="i method">GetAccessConditionsFail_Data</a>(<span class="r749 r">garbageLeaseId</span>))
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r751 rd" class="r751 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
                <span class="c">// Arrange</span>
                <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r752 rd" class="r752 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r751 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
                <span class="r750 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r752 r">blob</span>, <span class="r750 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a>);
                <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r753 rd" class="r753 r">accessConditions</span> = <a href="#47a1d944fb251ee5" class="i method">BuildAccessConditions</a>(
                    <span class="r482 r">parameters</span>: <span class="r750 r">parameters</span>,
                    <span class="r490 r">lease</span>: <b>true</b>);
 
                <span class="c">// Act</span>
                <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                    <span class="r752 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#f2250485288cca52" class="i method">DeleteAsync</a>(<span class="r748 r">conditions</span>: <span class="r753 r">accessConditions</span>),
                    <span id="r754 rd" class="r754 r">e</span> =&gt; { });
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="f0dcf25c5274285d" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DeleteAsync_IfTags</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r755 rd" class="r755 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r756 rd" class="r756 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r755 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r757 rd" class="r757 r">tags</span> = <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;
            {
                { <span class="s">&quot;coolTag&quot;</span>, <span class="s">&quot;true&quot;</span> }
            };
            <b>await</b> <span class="r756 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r757 r">tags</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r758 rd" class="r758 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
            };
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#ad97b1910f5ca3eb" class="t t">Response</a> <span id="r759 rd" class="r759 r">response</span> = <b>await</b> <span class="r756 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#f2250485288cca52" class="i method">DeleteAsync</a>(<span class="r748 r">conditions</span>: <span class="r758 r">conditions</span>);
 
            <span class="c">// Assert</span>
            <b>bool</b> <span id="r760 rd" class="r760 r">exists</span> = <b>await</b> <span class="r756 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#9018aed3946a06b2" class="i method">ExistsAsync</a>();
            <span class="t t">Assert</span>.<span class="i method">IsFalse</span>(<span class="r760 r">exists</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="ab252ef5cd4b750a" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DeleteAsync_IfTags_Failed</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r761 rd" class="r761 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r762 rd" class="r762 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r761 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r763 rd" class="r763 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
            };
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r762 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#f2250485288cca52" class="i method">DeleteAsync</a>(<span class="r748 r">conditions</span>: <span class="r763 r">conditions</span>),
                <span id="r764 rd" class="r764 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;ConditionNotMet&quot;</span>, <span class="r764 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="4da57f9e1e3839b1" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DeleteAsync_Error</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r765 rd" class="r765 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r766 rd" class="r766 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r765 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r766 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#f2250485288cca52" class="i method">DeleteAsync</a>(),
                <span id="r767 rd" class="r767 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;BlobNotFound&quot;</span>, <span class="r767 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="d510dd1107684a69" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DeleteAsync_Version</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r768 rd" class="r768 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#ab2a0e921078c272" class="t t">AppendBlobClient</a> <span id="r769 rd" class="r769 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r768 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9b1458a6a968c4e1" class="i method">GetAppendBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#66a553618c3f7c72" class="t t">BlobContentInfo</a>&gt; <span id="r770 rd" class="r770 r">createResponse</span> = <b>await</b> <span class="r769 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4dc3eeb6e23e9c0f" class="i method">CreateAsync</a>();
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r771 rd" class="r771 r">metadata</span> = <a href="Shared/StorageTestBase.cs.html#9bbe73e9e1c28539" class="i method">BuildMetadata</a>();
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#6cdb754d8a522d97" class="t t">BlobInfo</a>&gt; <span id="r772 rd" class="r772 r">metadataResponse</span> = <b>await</b> <span class="r769 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#58dcaf1e6f66d2b3" class="i method">SetMetadataAsync</a>(<span class="r771 r">metadata</span>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r773 rd" class="r773 r">versionBlob</span> = <span class="r769 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#0d5ad4aca2096779" class="i method">WithVersion</a>(<span class="r770 r">createResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#d6d167cdb7477b7e" class="i property">VersionId</a>);
 
            <a href="/Azure.Core/A.html#ad97b1910f5ca3eb" class="t t">Response</a> <span id="r774 rd" class="r774 r">response</span> = <b>await</b> <span class="r773 r">versionBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f2250485288cca52" class="i method">DeleteAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<b>await</b> <span class="r769 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#9018aed3946a06b2" class="i method">ExistsAsync</a>());
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="b4c7879911474a22" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DeleteAsync_VersionSAS</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r775 rd" class="r775 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#ab2a0e921078c272" class="t t">AppendBlobClient</a> <span id="r776 rd" class="r776 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r775 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9b1458a6a968c4e1" class="i method">GetAppendBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#66a553618c3f7c72" class="t t">BlobContentInfo</a>&gt; <span id="r777 rd" class="r777 r">createResponse</span> = <b>await</b> <span class="r776 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4dc3eeb6e23e9c0f" class="i method">CreateAsync</a>();
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r778 rd" class="r778 r">metadata</span> = <a href="Shared/StorageTestBase.cs.html#9bbe73e9e1c28539" class="i method">BuildMetadata</a>();
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#6cdb754d8a522d97" class="t t">BlobInfo</a>&gt; <span id="r779 rd" class="r779 r">metadataResponse</span> = <b>await</b> <span class="r776 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#58dcaf1e6f66d2b3" class="i method">SetMetadataAsync</a>(<span class="r778 r">metadata</span>);
            <a href="/Azure.Storage.Common/A.html#6d8135d9673080f5" class="t t">SasQueryParameters</a> <span id="r780 rd" class="r780 r">sasQueryParameters</span> = <a href="BlobTestBase.cs.html#1b50c1d02f028563" class="i method">GetBlobVersionSas</a>(
                <span class="r775 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>,
                <span class="r776 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#157bb830a0c2db34" class="i property">Name</a>,
                <span class="r777 r">createResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#d6d167cdb7477b7e" class="i property">VersionId</a>,
                <a href="/Azure.Storage.Blobs/A.html#e8c1b0a4d58345d0" class="t t">BlobVersionSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#ef1c970c1572d01f" class="i field">Delete</a>,
                <span class="r781 r">sasVersion</span>: <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f6d7a68f94fda076" class="i field">DefaultSasVersion</a>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r782 rd" class="r782 r">versionBlob</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(
                <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span>{<span class="r776 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#0d5ad4aca2096779" class="i method">WithVersion</a>(<span class="r777 r">createResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#d6d167cdb7477b7e" class="i property">VersionId</a>).<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>}<span class="s">&amp;</span>{<span class="r780 r">sasQueryParameters</span>}<span class="s">&quot;</span>), <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>());
 
            <a href="/Azure.Core/A.html#ad97b1910f5ca3eb" class="t t">Response</a> <span id="r783 rd" class="r783 r">response</span> = <b>await</b> <span class="r782 r">versionBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f2250485288cca52" class="i method">DeleteAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<b>await</b> <span class="r776 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#9018aed3946a06b2" class="i method">ExistsAsync</a>());
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="57f25b86c65211d4" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DeleteAsync_InvalidVersionSAS</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r784 rd" class="r784 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#ab2a0e921078c272" class="t t">AppendBlobClient</a> <span id="r785 rd" class="r785 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r784 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9b1458a6a968c4e1" class="i method">GetAppendBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#66a553618c3f7c72" class="t t">BlobContentInfo</a>&gt; <span id="r786 rd" class="r786 r">createResponse</span> = <b>await</b> <span class="r785 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4dc3eeb6e23e9c0f" class="i method">CreateAsync</a>();
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r787 rd" class="r787 r">metadata</span> = <a href="Shared/StorageTestBase.cs.html#9bbe73e9e1c28539" class="i method">BuildMetadata</a>();
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#6cdb754d8a522d97" class="t t">BlobInfo</a>&gt; <span id="r788 rd" class="r788 r">metadataResponse</span> = <b>await</b> <span class="r785 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#58dcaf1e6f66d2b3" class="i method">SetMetadataAsync</a>(<span class="r787 r">metadata</span>);
            <a href="/Azure.Storage.Common/A.html#6d8135d9673080f5" class="t t">SasQueryParameters</a> <span id="r789 rd" class="r789 r">sasQueryParameters</span> = <a href="BlobTestBase.cs.html#f9846010b3d03f0e" class="i method">GetBlobSas</a>(
                <span class="r784 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>,
                <span class="r785 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#157bb830a0c2db34" class="i property">Name</a>,
                <a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#03fad2eff3cfb473" class="i field">Read</a>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r790 rd" class="r790 r">versionBlob</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(
                <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span>{<span class="r785 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#0d5ad4aca2096779" class="i method">WithVersion</a>(<span class="r786 r">createResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#d6d167cdb7477b7e" class="i property">VersionId</a>).<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>}<span class="s">&amp;</span>{<span class="r789 r">sasQueryParameters</span>}<span class="s">&quot;</span>), <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>());
 
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r790 r">versionBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f2250485288cca52" class="i method">DeleteAsync</a>(),
                <span id="r791 rd" class="r791 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#e0d947616d6aba70" class="t t">BlobErrorCode</a>.<a href="/Azure.Storage.Blobs/A.html#33026859481bf6d8" class="i property">AuthorizationPermissionMismatch</a>.<a href="/Azure.Storage.Blobs/A.html#956fff1c6f30e077" class="i method">ToString</a>(), <span class="r791 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="545a321c8a90f4f5" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DeleteAsync_VersionIdentitySAS</a>()
        {
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r792 rd" class="r792 r">oauthService</span> = <a href="BlobTestBase.cs.html#a0ccf5affc88da7d" class="i property">BlobsClientBuilder</a>.<a href="ClientBuilderExtensions.cs.html#a816bf81da5c6a2b" class="i method">GetServiceClient_OAuth</a>();
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r793 rd" class="r793 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(<span class="r792 r">oauthService</span>);
            <a href="/Azure.Storage.Blobs/A.html#ab2a0e921078c272" class="t t">AppendBlobClient</a> <span id="r794 rd" class="r794 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r793 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9b1458a6a968c4e1" class="i method">GetAppendBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#66a553618c3f7c72" class="t t">BlobContentInfo</a>&gt; <span id="r795 rd" class="r795 r">createResponse</span> = <b>await</b> <span class="r794 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4dc3eeb6e23e9c0f" class="i method">CreateAsync</a>();
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r796 rd" class="r796 r">metadata</span> = <a href="Shared/StorageTestBase.cs.html#9bbe73e9e1c28539" class="i method">BuildMetadata</a>();
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#6cdb754d8a522d97" class="t t">BlobInfo</a>&gt; <span id="r797 rd" class="r797 r">metadataResponse</span> = <b>await</b> <span class="r794 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#58dcaf1e6f66d2b3" class="i method">SetMetadataAsync</a>(<span class="r796 r">metadata</span>);
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#781f283857f7caf2" class="t t">UserDelegationKey</a>&gt; <span id="r798 rd" class="r798 r">userDelegationKey</span> = <b>await</b> <span class="r792 r">oauthService</span>.<a href="/Azure.Storage.Blobs/A.html#0e8108c060ec84fc" class="i method">GetUserDelegationKeyAsync</a>(
                <span class="r53 r">startsOn</span>: <b>null</b>,
                <span class="r54 r">expiresOn</span>: <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(1));
            <a href="/Azure.Storage.Common/A.html#6d8135d9673080f5" class="t t">SasQueryParameters</a> <span id="r799 rd" class="r799 r">sasQueryParameters</span> = <a href="BlobTestBase.cs.html#5712f54465a8db04" class="i method">GetBlobVersionIdentitySas</a>(
                <span class="r793 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>,
                <span class="r794 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#157bb830a0c2db34" class="i property">Name</a>,
                <span class="r795 r">createResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#d6d167cdb7477b7e" class="i property">VersionId</a>,
                <a href="/Azure.Storage.Blobs/A.html#e8c1b0a4d58345d0" class="t t">BlobVersionSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#ef1c970c1572d01f" class="i field">Delete</a>,
                <span class="r798 r">userDelegationKey</span>,
                <span class="r792 r">oauthService</span>.<a href="/Azure.Storage.Blobs/A.html#c986470f7b7901c4" class="i property">AccountName</a>,
                <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f6d7a68f94fda076" class="i field">DefaultSasVersion</a>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r800 rd" class="r800 r">versionBlob</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(
                <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span>{<span class="r794 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#0d5ad4aca2096779" class="i method">WithVersion</a>(<span class="r795 r">createResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#d6d167cdb7477b7e" class="i property">VersionId</a>).<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>}<span class="s">&amp;</span>{<span class="r799 r">sasQueryParameters</span>}<span class="s">&quot;</span>), <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>());
 
            <a href="/Azure.Core/A.html#ad97b1910f5ca3eb" class="t t">Response</a> <span id="r801 rd" class="r801 r">response</span> = <b>await</b> <span class="r800 r">versionBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f2250485288cca52" class="i method">DeleteAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<b>await</b> <span class="r794 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#9018aed3946a06b2" class="i method">ExistsAsync</a>());
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="ca8fa12629e12a3f" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DeleteAsync_VersionInvalidSAS</a>()
        {
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r802 rd" class="r802 r">oauthService</span> = <a href="BlobTestBase.cs.html#a0ccf5affc88da7d" class="i property">BlobsClientBuilder</a>.<a href="ClientBuilderExtensions.cs.html#a816bf81da5c6a2b" class="i method">GetServiceClient_OAuth</a>();
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r803 rd" class="r803 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(<span class="r802 r">oauthService</span>);
            <a href="/Azure.Storage.Blobs/A.html#ab2a0e921078c272" class="t t">AppendBlobClient</a> <span id="r804 rd" class="r804 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r803 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9b1458a6a968c4e1" class="i method">GetAppendBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#66a553618c3f7c72" class="t t">BlobContentInfo</a>&gt; <span id="r805 rd" class="r805 r">createResponse</span> = <b>await</b> <span class="r804 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4dc3eeb6e23e9c0f" class="i method">CreateAsync</a>();
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r806 rd" class="r806 r">metadata</span> = <a href="Shared/StorageTestBase.cs.html#9bbe73e9e1c28539" class="i method">BuildMetadata</a>();
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#6cdb754d8a522d97" class="t t">BlobInfo</a>&gt; <span id="r807 rd" class="r807 r">metadataResponse</span> = <b>await</b> <span class="r804 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#58dcaf1e6f66d2b3" class="i method">SetMetadataAsync</a>(<span class="r806 r">metadata</span>);
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#781f283857f7caf2" class="t t">UserDelegationKey</a>&gt; <span id="r808 rd" class="r808 r">userDelegationKey</span> = <b>await</b> <span class="r802 r">oauthService</span>.<a href="/Azure.Storage.Blobs/A.html#0e8108c060ec84fc" class="i method">GetUserDelegationKeyAsync</a>(
                <span class="r53 r">startsOn</span>: <b>null</b>,
                <span class="r54 r">expiresOn</span>: <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(1));
            <a href="/Azure.Storage.Common/A.html#6d8135d9673080f5" class="t t">SasQueryParameters</a> <span id="r809 rd" class="r809 r">sasQueryParameters</span> = <a href="BlobTestBase.cs.html#2b706caa165290b3" class="i method">GetBlobIdentitySas</a>(
                <span class="r803 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>,
                <span class="r804 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#157bb830a0c2db34" class="i property">Name</a>,
                <a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#03fad2eff3cfb473" class="i field">Read</a>,
                <span class="r808 r">userDelegationKey</span>,
                <span class="r802 r">oauthService</span>.<a href="/Azure.Storage.Blobs/A.html#c986470f7b7901c4" class="i property">AccountName</a>,
                <span class="r810 r">sasVersion</span>: <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f6d7a68f94fda076" class="i field">DefaultSasVersion</a>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r811 rd" class="r811 r">versionBlob</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(
                <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span>{<span class="r804 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#0d5ad4aca2096779" class="i method">WithVersion</a>(<span class="r805 r">createResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#d6d167cdb7477b7e" class="i property">VersionId</a>).<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>}<span class="s">&amp;</span>{<span class="r809 r">sasQueryParameters</span>}<span class="s">&quot;</span>), <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>());
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r811 r">versionBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f2250485288cca52" class="i method">DeleteAsync</a>(),
                <span id="r812 rd" class="r812 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#e0d947616d6aba70" class="t t">BlobErrorCode</a>.<a href="/Azure.Storage.Blobs/A.html#33026859481bf6d8" class="i property">AuthorizationPermissionMismatch</a>.<a href="/Azure.Storage.Blobs/A.html#956fff1c6f30e077" class="i method">ToString</a>(), <span class="r812 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        [<span class="t constructor">TestCase</span>(<a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#7100bb08a0a30566" class="i field">DeleteBlobVersion</a>)]
        [<span class="t constructor">TestCase</span>(<a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#796b36cb23a40798" class="i field">All</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="f6a918a04a7f9895" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DeleteAsync_VersionBlobSAS</a>(<a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a> <span id="r813 rd" class="r813 r">blobSasPermissions</span>)
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r814 rd" class="r814 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#ab2a0e921078c272" class="t t">AppendBlobClient</a> <span id="r815 rd" class="r815 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r814 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9b1458a6a968c4e1" class="i method">GetAppendBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#66a553618c3f7c72" class="t t">BlobContentInfo</a>&gt; <span id="r816 rd" class="r816 r">createResponse</span> = <b>await</b> <span class="r815 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4dc3eeb6e23e9c0f" class="i method">CreateAsync</a>();
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r817 rd" class="r817 r">metadata</span> = <a href="Shared/StorageTestBase.cs.html#9bbe73e9e1c28539" class="i method">BuildMetadata</a>();
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#6cdb754d8a522d97" class="t t">BlobInfo</a>&gt; <span id="r818 rd" class="r818 r">metadataResponse</span> = <b>await</b> <span class="r815 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#58dcaf1e6f66d2b3" class="i method">SetMetadataAsync</a>(<span class="r817 r">metadata</span>);
            <a href="/Azure.Storage.Common/A.html#6d8135d9673080f5" class="t t">SasQueryParameters</a> <span id="r819 rd" class="r819 r">sasQueryParameters</span> = <a href="BlobTestBase.cs.html#f9846010b3d03f0e" class="i method">GetBlobSas</a>(
                <span class="r814 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>,
                <span class="r815 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#157bb830a0c2db34" class="i property">Name</a>,
                <span class="r813 r">blobSasPermissions</span>,
                <span class="r820 r">sasVersion</span>: <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f6d7a68f94fda076" class="i field">DefaultSasVersion</a>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r821 rd" class="r821 r">versionBlob</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(
                <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span>{<span class="r815 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#0d5ad4aca2096779" class="i method">WithVersion</a>(<span class="r816 r">createResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#d6d167cdb7477b7e" class="i property">VersionId</a>).<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>}<span class="s">&amp;</span>{<span class="r819 r">sasQueryParameters</span>}<span class="s">&quot;</span>), <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>());
 
            <a href="/Azure.Core/A.html#ad97b1910f5ca3eb" class="t t">Response</a> <span id="r822 rd" class="r822 r">response</span> = <b>await</b> <span class="r821 r">versionBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f2250485288cca52" class="i method">DeleteAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<b>await</b> <span class="r815 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#9018aed3946a06b2" class="i method">ExistsAsync</a>());
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        [<span class="t constructor">TestCase</span>(<a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#7100bb08a0a30566" class="i field">DeleteBlobVersion</a>)]
        [<span class="t constructor">TestCase</span>(<a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#796b36cb23a40798" class="i field">All</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="770f370193528e2c" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DeleteAsync_VersionBlobIdentitySAS</a>(<a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a> <span id="r823 rd" class="r823 r">blobSasPermissions</span>)
        {
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r824 rd" class="r824 r">oauthService</span> = <a href="BlobTestBase.cs.html#a0ccf5affc88da7d" class="i property">BlobsClientBuilder</a>.<a href="ClientBuilderExtensions.cs.html#a816bf81da5c6a2b" class="i method">GetServiceClient_OAuth</a>();
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r825 rd" class="r825 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(<span class="r824 r">oauthService</span>);
            <a href="/Azure.Storage.Blobs/A.html#ab2a0e921078c272" class="t t">AppendBlobClient</a> <span id="r826 rd" class="r826 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r825 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9b1458a6a968c4e1" class="i method">GetAppendBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#66a553618c3f7c72" class="t t">BlobContentInfo</a>&gt; <span id="r827 rd" class="r827 r">createResponse</span> = <b>await</b> <span class="r826 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4dc3eeb6e23e9c0f" class="i method">CreateAsync</a>();
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r828 rd" class="r828 r">metadata</span> = <a href="Shared/StorageTestBase.cs.html#9bbe73e9e1c28539" class="i method">BuildMetadata</a>();
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#6cdb754d8a522d97" class="t t">BlobInfo</a>&gt; <span id="r829 rd" class="r829 r">metadataResponse</span> = <b>await</b> <span class="r826 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#58dcaf1e6f66d2b3" class="i method">SetMetadataAsync</a>(<span class="r828 r">metadata</span>);
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#781f283857f7caf2" class="t t">UserDelegationKey</a>&gt; <span id="r830 rd" class="r830 r">userDelegationKey</span> = <b>await</b> <span class="r824 r">oauthService</span>.<a href="/Azure.Storage.Blobs/A.html#0e8108c060ec84fc" class="i method">GetUserDelegationKeyAsync</a>(
                <span class="r53 r">startsOn</span>: <b>null</b>,
                <span class="r54 r">expiresOn</span>: <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(1));
            <a href="/Azure.Storage.Common/A.html#6d8135d9673080f5" class="t t">SasQueryParameters</a> <span id="r831 rd" class="r831 r">sasQueryParameters</span> = <a href="BlobTestBase.cs.html#2b706caa165290b3" class="i method">GetBlobIdentitySas</a>(
                <span class="r825 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>,
                <span class="r826 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#157bb830a0c2db34" class="i property">Name</a>,
                <span class="r823 r">blobSasPermissions</span>,
                <span class="r830 r">userDelegationKey</span>,
                <span class="r824 r">oauthService</span>.<a href="/Azure.Storage.Blobs/A.html#c986470f7b7901c4" class="i property">AccountName</a>,
                <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f6d7a68f94fda076" class="i field">DefaultSasVersion</a>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r832 rd" class="r832 r">versionBlob</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(
                <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span>{<span class="r826 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#0d5ad4aca2096779" class="i method">WithVersion</a>(<span class="r827 r">createResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#d6d167cdb7477b7e" class="i property">VersionId</a>).<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>}<span class="s">&amp;</span>{<span class="r831 r">sasQueryParameters</span>}<span class="s">&quot;</span>), <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>());
 
            <a href="/Azure.Core/A.html#ad97b1910f5ca3eb" class="t t">Response</a> <span id="r833 rd" class="r833 r">response</span> = <b>await</b> <span class="r832 r">versionBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f2250485288cca52" class="i method">DeleteAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<b>await</b> <span class="r826 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#9018aed3946a06b2" class="i method">ExistsAsync</a>());
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        [<span class="t constructor">TestCase</span>(<a href="/Azure.Storage.Blobs/A.html#4c988bea3bd2c716" class="t t">BlobContainerSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#438bd0ef4e812f86" class="i field">DeleteBlobVersion</a>)]
        [<span class="t constructor">TestCase</span>(<a href="/Azure.Storage.Blobs/A.html#4c988bea3bd2c716" class="t t">BlobContainerSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#fa22e892a3c44ecc" class="i field">All</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="44933697a82b0f9d" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DeleteAsync_VersionContainerSAS</a>(<a href="/Azure.Storage.Blobs/A.html#4c988bea3bd2c716" class="t t">BlobContainerSasPermissions</a> <span id="r834 rd" class="r834 r">blobContainerSasPermissions</span>)
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r835 rd" class="r835 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#ab2a0e921078c272" class="t t">AppendBlobClient</a> <span id="r836 rd" class="r836 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r835 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9b1458a6a968c4e1" class="i method">GetAppendBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#66a553618c3f7c72" class="t t">BlobContentInfo</a>&gt; <span id="r837 rd" class="r837 r">createResponse</span> = <b>await</b> <span class="r836 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4dc3eeb6e23e9c0f" class="i method">CreateAsync</a>();
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r838 rd" class="r838 r">metadata</span> = <a href="Shared/StorageTestBase.cs.html#9bbe73e9e1c28539" class="i method">BuildMetadata</a>();
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#6cdb754d8a522d97" class="t t">BlobInfo</a>&gt; <span id="r839 rd" class="r839 r">metadataResponse</span> = <b>await</b> <span class="r836 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#58dcaf1e6f66d2b3" class="i method">SetMetadataAsync</a>(<span class="r838 r">metadata</span>);
            <a href="/Azure.Storage.Common/A.html#6d8135d9673080f5" class="t t">SasQueryParameters</a> <span id="r840 rd" class="r840 r">sasQueryParameters</span> = <a href="BlobTestBase.cs.html#d71f19ba1645e5f8" class="i method">GetContainerSas</a>(
                <span class="r835 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>,
                <span class="r834 r">blobContainerSasPermissions</span>,
                <span class="r841 r">sasVersion</span>: <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f6d7a68f94fda076" class="i field">DefaultSasVersion</a>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r842 rd" class="r842 r">versionBlob</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(
                <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span>{<span class="r836 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#0d5ad4aca2096779" class="i method">WithVersion</a>(<span class="r837 r">createResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#d6d167cdb7477b7e" class="i property">VersionId</a>).<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>}<span class="s">&amp;</span>{<span class="r840 r">sasQueryParameters</span>}<span class="s">&quot;</span>), <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>());
 
            <a href="/Azure.Core/A.html#ad97b1910f5ca3eb" class="t t">Response</a> <span id="r843 rd" class="r843 r">response</span> = <b>await</b> <span class="r842 r">versionBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f2250485288cca52" class="i method">DeleteAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<b>await</b> <span class="r836 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#9018aed3946a06b2" class="i method">ExistsAsync</a>());
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        [<span class="t constructor">TestCase</span>(<a href="/Azure.Storage.Blobs/A.html#4c988bea3bd2c716" class="t t">BlobContainerSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#438bd0ef4e812f86" class="i field">DeleteBlobVersion</a>)]
        [<span class="t constructor">TestCase</span>(<a href="/Azure.Storage.Blobs/A.html#4c988bea3bd2c716" class="t t">BlobContainerSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#fa22e892a3c44ecc" class="i field">All</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="21fc19bf9da5d741" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DeleteAsync_VersionContainerIdentitySAS</a>(<a href="/Azure.Storage.Blobs/A.html#4c988bea3bd2c716" class="t t">BlobContainerSasPermissions</a> <span id="r844 rd" class="r844 r">blobContainerSasPermissions</span>)
        {
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r845 rd" class="r845 r">oauthService</span> = <a href="BlobTestBase.cs.html#a0ccf5affc88da7d" class="i property">BlobsClientBuilder</a>.<a href="ClientBuilderExtensions.cs.html#a816bf81da5c6a2b" class="i method">GetServiceClient_OAuth</a>();
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r846 rd" class="r846 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(<span class="r845 r">oauthService</span>);
            <a href="/Azure.Storage.Blobs/A.html#ab2a0e921078c272" class="t t">AppendBlobClient</a> <span id="r847 rd" class="r847 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r846 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9b1458a6a968c4e1" class="i method">GetAppendBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#66a553618c3f7c72" class="t t">BlobContentInfo</a>&gt; <span id="r848 rd" class="r848 r">createResponse</span> = <b>await</b> <span class="r847 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4dc3eeb6e23e9c0f" class="i method">CreateAsync</a>();
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r849 rd" class="r849 r">metadata</span> = <a href="Shared/StorageTestBase.cs.html#9bbe73e9e1c28539" class="i method">BuildMetadata</a>();
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#6cdb754d8a522d97" class="t t">BlobInfo</a>&gt; <span id="r850 rd" class="r850 r">metadataResponse</span> = <b>await</b> <span class="r847 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#58dcaf1e6f66d2b3" class="i method">SetMetadataAsync</a>(<span class="r849 r">metadata</span>);
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#781f283857f7caf2" class="t t">UserDelegationKey</a>&gt; <span id="r851 rd" class="r851 r">userDelegationKey</span> = <b>await</b> <span class="r845 r">oauthService</span>.<a href="/Azure.Storage.Blobs/A.html#0e8108c060ec84fc" class="i method">GetUserDelegationKeyAsync</a>(
                <span class="r53 r">startsOn</span>: <b>null</b>,
                <span class="r54 r">expiresOn</span>: <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(1));
            <a href="/Azure.Storage.Common/A.html#6d8135d9673080f5" class="t t">SasQueryParameters</a> <span id="r852 rd" class="r852 r">sasQueryParameters</span> = <a href="BlobTestBase.cs.html#65588b481ab16f93" class="i method">GetContainerIdentitySas</a>(
                <span class="r846 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>,
                <span class="r844 r">blobContainerSasPermissions</span>,
                <span class="r851 r">userDelegationKey</span>,
                <span class="r845 r">oauthService</span>.<a href="/Azure.Storage.Blobs/A.html#c986470f7b7901c4" class="i property">AccountName</a>,
                <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f6d7a68f94fda076" class="i field">DefaultSasVersion</a>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r853 rd" class="r853 r">versionBlob</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(
                <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span>{<span class="r847 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#0d5ad4aca2096779" class="i method">WithVersion</a>(<span class="r848 r">createResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#d6d167cdb7477b7e" class="i property">VersionId</a>).<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>}<span class="s">&amp;</span>{<span class="r852 r">sasQueryParameters</span>}<span class="s">&quot;</span>), <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>());
 
            <a href="/Azure.Core/A.html#ad97b1910f5ca3eb" class="t t">Response</a> <span id="r854 rd" class="r854 r">response</span> = <b>await</b> <span class="r853 r">versionBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f2250485288cca52" class="i method">DeleteAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<b>await</b> <span class="r847 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#9018aed3946a06b2" class="i method">ExistsAsync</a>());
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        [<span class="t constructor">TestCase</span>(<a href="/Azure.Storage.Common/A.html#ac762c6c5829d9cc" class="t t">AccountSasPermissions</a>.<a href="/Azure.Storage.Common/A.html#66e10e98f8787a95" class="i field">DeleteVersion</a>)]
        [<span class="t constructor">TestCase</span>(<a href="/Azure.Storage.Common/A.html#ac762c6c5829d9cc" class="t t">AccountSasPermissions</a>.<a href="/Azure.Storage.Common/A.html#dec433cd96ddae14" class="i field">All</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="c09b9eaccb552232" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DeleteAsync_VersionAccountSAS</a>(<a href="/Azure.Storage.Common/A.html#ac762c6c5829d9cc" class="t t">AccountSasPermissions</a> <span id="r855 rd" class="r855 r">accountSasPermissions</span>)
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r856 rd" class="r856 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#ab2a0e921078c272" class="t t">AppendBlobClient</a> <span id="r857 rd" class="r857 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r856 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9b1458a6a968c4e1" class="i method">GetAppendBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#66a553618c3f7c72" class="t t">BlobContentInfo</a>&gt; <span id="r858 rd" class="r858 r">createResponse</span> = <b>await</b> <span class="r857 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4dc3eeb6e23e9c0f" class="i method">CreateAsync</a>();
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r859 rd" class="r859 r">metadata</span> = <a href="Shared/StorageTestBase.cs.html#9bbe73e9e1c28539" class="i method">BuildMetadata</a>();
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#6cdb754d8a522d97" class="t t">BlobInfo</a>&gt; <span id="r860 rd" class="r860 r">metadataResponse</span> = <b>await</b> <span class="r857 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#58dcaf1e6f66d2b3" class="i method">SetMetadataAsync</a>(<span class="r859 r">metadata</span>);
            <a href="/Azure.Storage.Common/A.html#6d8135d9673080f5" class="t t">SasQueryParameters</a> <span id="r861 rd" class="r861 r">sasQueryParameters</span> = <a href="BlobTestBase.cs.html#a0ccf5affc88da7d" class="i property">BlobsClientBuilder</a>.<a href="Shared/ClientBuilder.cs.html#fdc4faccd21891d5" class="i method">GetNewAccountSas</a>(
                <span class="r862 r">resourceTypes</span>: <a href="/Azure.Storage.Common/A.html#1e2952f573dd64b0" class="t t">AccountSasResourceTypes</a>.<a href="/Azure.Storage.Common/A.html#fb06b0ba251e75ec" class="i field">All</a>,
                <span class="r863 r">permissions</span>: <a href="/Azure.Storage.Common/A.html#ac762c6c5829d9cc" class="t t">AccountSasPermissions</a>.<a href="/Azure.Storage.Common/A.html#dec433cd96ddae14" class="i field">All</a>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r864 rd" class="r864 r">versionBlob</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(
                <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span>{<span class="r857 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#0d5ad4aca2096779" class="i method">WithVersion</a>(<span class="r858 r">createResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#d6d167cdb7477b7e" class="i property">VersionId</a>).<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>}<span class="s">&amp;</span>{<span class="r861 r">sasQueryParameters</span>}<span class="s">&quot;</span>), <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>());
 
            <a href="/Azure.Core/A.html#ad97b1910f5ca3eb" class="t t">Response</a> <span id="r865 rd" class="r865 r">response</span> = <b>await</b> <span class="r864 r">versionBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f2250485288cca52" class="i method">DeleteAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<b>await</b> <span class="r857 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#9018aed3946a06b2" class="i method">ExistsAsync</a>());
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="ac57e075c56f2820" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DeleteAsync_InvalidSAS</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r866 rd" class="r866 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#ab2a0e921078c272" class="t t">AppendBlobClient</a> <span id="r867 rd" class="r867 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r866 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9b1458a6a968c4e1" class="i method">GetAppendBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#66a553618c3f7c72" class="t t">BlobContentInfo</a>&gt; <span id="r868 rd" class="r868 r">createResponse</span> = <b>await</b> <span class="r867 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4dc3eeb6e23e9c0f" class="i method">CreateAsync</a>();
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r869 rd" class="r869 r">metadata</span> = <a href="Shared/StorageTestBase.cs.html#9bbe73e9e1c28539" class="i method">BuildMetadata</a>();
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#6cdb754d8a522d97" class="t t">BlobInfo</a>&gt; <span id="r870 rd" class="r870 r">metadataResponse</span> = <b>await</b> <span class="r867 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#58dcaf1e6f66d2b3" class="i method">SetMetadataAsync</a>(<span class="r869 r">metadata</span>);
            <a href="/Azure.Storage.Common/A.html#6d8135d9673080f5" class="t t">SasQueryParameters</a> <span id="r871 rd" class="r871 r">sasQueryParameters</span> = <a href="BlobTestBase.cs.html#f9846010b3d03f0e" class="i method">GetBlobSas</a>(<span class="r866 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>, <span class="r867 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#157bb830a0c2db34" class="i property">Name</a>, <a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#03fad2eff3cfb473" class="i field">Read</a>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r872 rd" class="r872 r">versionBlob</span> = <span class="r867 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#0d5ad4aca2096779" class="i method">WithVersion</a>(<span class="r868 r">createResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#d6d167cdb7477b7e" class="i property">VersionId</a>);
 
            <a href="/Azure.Core/A.html#ad97b1910f5ca3eb" class="t t">Response</a> <span id="r873 rd" class="r873 r">response</span> = <b>await</b> <span class="r872 r">versionBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f2250485288cca52" class="i method">DeleteAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<b>await</b> <span class="r867 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#9018aed3946a06b2" class="i method">ExistsAsync</a>());
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="404d0d95d62aceb7" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DeleteIfExistsAsync</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r874 rd" class="r874 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r875 rd" class="r875 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r874 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<b>bool</b>&gt; <span id="r876 rd" class="r876 r">response</span> = <b>await</b> <span class="r875 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#b08c15dee0aebf43" class="i method">DeleteIfExistsAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r876 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>);
            <span class="t t">Assert</span>.<span class="i method">ThrowsAsync</span>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <b>async</b> () =&gt; <b>await</b> <span class="r875 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>());
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="451d0010b9db00d6" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DeleteIfExistsAsync_NotExists</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r877 rd" class="r877 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r878 rd" class="r878 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r877 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<b>bool</b>&gt; <span id="r879 rd" class="r879 r">response</span> = <b>await</b> <span class="r878 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#b08c15dee0aebf43" class="i method">DeleteIfExistsAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsFalse</span>(<span class="r879 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>);
            <span class="t t">Assert</span>.<span class="i method">ThrowsAsync</span>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <b>async</b> () =&gt; <b>await</b> <span class="r878 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>());
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="8f313216baa9fa2e" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DeleteIfExistsAsync_ContainerNotExists</a>()
        {
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r880 rd" class="r880 r">service</span> = <a href="BlobTestBase.cs.html#a0ccf5affc88da7d" class="i property">BlobsClientBuilder</a>.<a href="ClientBuilderExtensions.cs.html#6aefc2d0167a3d3f" class="i method">GetServiceClient_SharedKey</a>();
            <a href="/Azure.Storage.Blobs/A.html#6bb2c165ee95c7d4" class="t t">BlobContainerClient</a> <span id="r881 rd" class="r881 r">container</span> = <span class="r880 r">service</span>.<a href="/Azure.Storage.Blobs/A.html#e3b6b5726874c210" class="i method">GetBlobContainerClient</a>(<a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>());
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r882 rd" class="r882 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r881 r">container</span>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<b>bool</b>&gt; <span id="r883 rd" class="r883 r">response</span> = <b>await</b> <span class="r882 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#b08c15dee0aebf43" class="i method">DeleteIfExistsAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsFalse</span>(<span class="r883 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>);
            <span class="t t">Assert</span>.<span class="i method">ThrowsAsync</span>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <b>async</b> () =&gt; <b>await</b> <span class="r882 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>());
        }
 
        <span class="c">//[Test]</span>
        <span class="c">//public async Task DeleteAsync_Batch()</span>
        <span class="c">//{</span>
        <span class="c">//    using (this.GetNewContainer(out var container, serviceUri: this.GetServiceUri_PreviewAccount_SharedKey()))</span>
        <span class="c">//    {</span>
        <span class="c">//        const int blobSize = Constants.KB;</span>
        <span class="c">//        var data = this.GetRandomBuffer(blobSize);</span>
 
        <span class="c">//        var blob1 = this.InstrumentClient(container.GetBlockBlobClient(this.GetNewBlobName()));</span>
        <span class="c">//        using (var stream = new MemoryStream(data))</span>
        <span class="c">//        {</span>
        <span class="c">//            await blob1.UploadAsync(stream);</span>
        <span class="c">//        }</span>
 
        <span class="c">//        var blob2 = this.InstrumentClient(container.GetBlockBlobClient(this.GetNewBlobName()));</span>
        <span class="c">//        using (var stream = new MemoryStream(data))</span>
        <span class="c">//        {</span>
        <span class="c">//            await blob2.UploadAsync(stream);</span>
        <span class="c">//        }</span>
 
        <span class="c">//        var batch =</span>
        <span class="c">//            blob1.DeleteAsync()</span>
        <span class="c">//            .And(blob2.DeleteAsync())</span>
        <span class="c">//            ;</span>
 
        <span class="c">//        var result = await batch;</span>
 
        <span class="c">//        Assert.IsNotNull(result);</span>
        <span class="c">//        Assert.AreEqual(2, result.Length);</span>
        <span class="c">//        Assert.IsNotNull(result[0].RequestId);</span>
        <span class="c">//        Assert.IsNotNull(result[1].RequestId);</span>
        <span class="c">//    }</span>
        <span class="c">//}</span>
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<span class="t constructor">NonParallelizable</span>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="53651051106dfd52" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">UndeleteAsync</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r884 rd" class="r884 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <b>await</b> <a href="BlobTestBase.cs.html#63e32b632674a62e" class="i method">EnableSoftDelete</a>();
            <b>try</b>
            {
                <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r885 rd" class="r885 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r884 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
                <b>await</b> <span class="r885 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#b08c15dee0aebf43" class="i method">DeleteIfExistsAsync</a>();
 
                <span class="c">// Act</span>
                <a href="/Azure.Core/A.html#ad97b1910f5ca3eb" class="t t">Response</a> <span id="r886 rd" class="r886 r">response</span> = <b>await</b> <span class="r885 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#c680eef8042b4b57" class="i method">UndeleteAsync</a>();
 
                <span class="c">// Assert</span>
                <span class="r886 r">response</span>.<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#b9e2782d1af92ede" class="i method">TryGetValue</a>(<span class="s">&quot;x-ms-version&quot;</span>, <b>out</b> <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r887 rd" class="r887 r">version</span>);
                <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r887 r">version</span>);
            }
            <b>catch</b> (<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a> <span id="r888 rd" class="r888 r">ex</span>) <b>when</b> (<span class="r888 r">ex</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a> == <a href="/Azure.Storage.Blobs/A.html#e0d947616d6aba70" class="t t">BlobErrorCode</a>.<a href="/Azure.Storage.Blobs/A.html#d09680c97545ffc1" class="i property">BlobNotFound</a>)
            {
                <span class="t t">Assert</span>.<span class="i method">Inconclusive</span>(<span class="s">&quot;Delete may have happened before soft delete was fully enabled!&quot;</span>);
            }
            <b>finally</b>
            {
                <span class="c">// Cleanup</span>
                <b>await</b> <a href="BlobTestBase.cs.html#fcf6eb3568b4683c" class="i method">DisableSoftDelete</a>();
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="a1b2efd1010091ca" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">UndeleteAsync_Error</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r889 rd" class="r889 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r890 rd" class="r890 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r889 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r890 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#c680eef8042b4b57" class="i method">UndeleteAsync</a>(),
                <span id="r891 rd" class="r891 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;BlobNotFound&quot;</span>, <span class="r891 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="c454a0035958806b" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ExistsAsync_Exists</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r892 rd" class="r892 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r893 rd" class="r893 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r892 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<b>bool</b>&gt; <span id="r894 rd" class="r894 r">response</span> = <b>await</b> <span class="r893 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#9018aed3946a06b2" class="i method">ExistsAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r894 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="044d5912cd1ae1ee" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ExistsAsync_NotExists</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r895 rd" class="r895 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r896 rd" class="r896 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r895 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#e796fb2e7b99a23b" class="i method">GetBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<b>bool</b>&gt; <span id="r897 rd" class="r897 r">response</span> = <b>await</b> <span class="r896 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#9018aed3946a06b2" class="i method">ExistsAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsFalse</span>(<span class="r897 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="636e6cfe24404376" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ExistsAsync_Exists_CPK</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r898 rd" class="r898 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#ab2a0e921078c272" class="t t">AppendBlobClient</a> <span id="r899 rd" class="r899 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r898 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9b1458a6a968c4e1" class="i method">GetAppendBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Storage.Blobs/A.html#f11bcd56fc9ad22a" class="t t">CustomerProvidedKey</a> <span id="r900 rd" class="r900 r">customerProvidedKey</span> = <a href="BlobTestBase.cs.html#b481ac8680ce4d57" class="i method">GetCustomerProvidedKey</a>();
            <span class="r899 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r899 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#8e1bd03b8af7ac88" class="i method">WithCustomerProvidedKey</a>(<span class="r900 r">customerProvidedKey</span>));
            <b>await</b> <span class="r899 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#515fedd76dafac5e" class="i method">CreateIfNotExistsAsync</a>();
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<b>bool</b>&gt; <span id="r901 rd" class="r901 r">response</span> = <b>await</b> <span class="r899 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#9018aed3946a06b2" class="i method">ExistsAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r901 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="dfce38b7544e1332" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ExistsAsync_Exists_CPK_NoKey</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r902 rd" class="r902 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r903 rd" class="r903 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
            <a href="/Azure.Storage.Blobs/A.html#ab2a0e921078c272" class="t t">AppendBlobClient</a> <span id="r904 rd" class="r904 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r902 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9b1458a6a968c4e1" class="i method">GetAppendBlobClient</a>(<span class="r903 r">blobName</span>));
            <a href="/Azure.Storage.Blobs/A.html#f11bcd56fc9ad22a" class="t t">CustomerProvidedKey</a> <span id="r905 rd" class="r905 r">customerProvidedKey</span> = <a href="BlobTestBase.cs.html#b481ac8680ce4d57" class="i method">GetCustomerProvidedKey</a>();
            <span class="r904 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r904 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#8e1bd03b8af7ac88" class="i method">WithCustomerProvidedKey</a>(<span class="r905 r">customerProvidedKey</span>));
            <b>await</b> <span class="r904 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#515fedd76dafac5e" class="i method">CreateIfNotExistsAsync</a>();
 
            <a href="/Azure.Storage.Blobs/A.html#ab2a0e921078c272" class="t t">AppendBlobClient</a> <span id="r906 rd" class="r906 r">blobClientNoKey</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r902 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9b1458a6a968c4e1" class="i method">GetAppendBlobClient</a>(<span class="r903 r">blobName</span>));
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<b>bool</b>&gt; <span id="r907 rd" class="r907 r">response</span> = <b>await</b> <span class="r906 r">blobClientNoKey</span>.<a href="/Azure.Storage.Blobs/A.html#9018aed3946a06b2" class="i method">ExistsAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r907 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#6de5212dacb3a5ca" class="i field">V2019_07_07</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="9dea880753dc812d" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ExistsAsync_Exists_EncryptionScope</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r908 rd" class="r908 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#ab2a0e921078c272" class="t t">AppendBlobClient</a> <span id="r909 rd" class="r909 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r908 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9b1458a6a968c4e1" class="i method">GetAppendBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <span class="r909 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r909 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#b9c9227fdf0ffb60" class="i method">WithEncryptionScope</a>(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#0234405d8d5e089b" class="i property">EncryptionScope</a>));
            <b>await</b> <span class="r909 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#515fedd76dafac5e" class="i method">CreateIfNotExistsAsync</a>();
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<b>bool</b>&gt; <span id="r910 rd" class="r910 r">response</span> = <b>await</b> <span class="r909 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#9018aed3946a06b2" class="i method">ExistsAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r910 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="97ea586ca1a83fae" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ExistsAsync_ContainerNotExists</a>()
        {
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r911 rd" class="r911 r">service</span> = <a href="BlobTestBase.cs.html#a0ccf5affc88da7d" class="i property">BlobsClientBuilder</a>.<a href="ClientBuilderExtensions.cs.html#6aefc2d0167a3d3f" class="i method">GetServiceClient_SharedKey</a>();
            <a href="/Azure.Storage.Blobs/A.html#6bb2c165ee95c7d4" class="t t">BlobContainerClient</a> <span id="r912 rd" class="r912 r">container</span> = <span class="r911 r">service</span>.<a href="/Azure.Storage.Blobs/A.html#e3b6b5726874c210" class="i method">GetBlobContainerClient</a>(<a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>());
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r913 rd" class="r913 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r912 r">container</span>.<a href="/Azure.Storage.Blobs/A.html#e796fb2e7b99a23b" class="i method">GetBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<b>bool</b>&gt; <span id="r914 rd" class="r914 r">response</span> = <b>await</b> <span class="r913 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#9018aed3946a06b2" class="i method">ExistsAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsFalse</span>(<span class="r914 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="b27f944b9007f0c0" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ExistsAsync_Error</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r915 rd" class="r915 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(<span class="r720 r">publicAccessType</span>: <a href="/Azure.Storage.Blobs/A.html#674161da970857ad" class="t t">PublicAccessType</a>.<a href="/Azure.Storage.Blobs/A.html#74dd97ac992337f6" class="i field">None</a>);
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r916 rd" class="r916 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r915 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r917 rd" class="r917 r">unauthorizedBlobClient</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(<span class="r916 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>, <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>()));
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r917 r">unauthorizedBlobClient</span>.<a href="/Azure.Storage.Blobs/A.html#9018aed3946a06b2" class="i method">ExistsAsync</a>(),
                <span id="r918 rd" class="r918 r">e</span> =&gt; { });
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="478e40171634dfe6" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetPropertiesAsync</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r919 rd" class="r919 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r920 rd" class="r920 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r919 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r921 rd" class="r921 r">response</span> = <b>await</b> <span class="r920 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r921 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
            <span class="c">// Ensure that we grab the whole ETag value from the service without removing the quotes</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r921 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#8491b5521f600f18" class="i property">ETag</a>.<a href="/Azure.Core/A.html#c02596ded366f933" class="i method">ToString</a>(), <span class="s">$&quot;</span>\&quot;{<span class="r921 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#5cb5957443570b99" class="i property">ETag</a>}\&quot;<span class="s">&quot;</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="67bcd5c12652fff4" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetPropertiesAsync_Tags</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r922 rd" class="r922 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r923 rd" class="r923 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r922 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r924 rd" class="r924 r">tags</span> = <a href="BlobTestBase.cs.html#7fec8daec2d431bb" class="i method">BuildTags</a>();
            <b>await</b> <span class="r923 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r924 r">tags</span>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r925 rd" class="r925 r">response</span> = <b>await</b> <span class="r923 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r924 r">tags</span>.<a href="@0@mscorlib/A.html#3d6c21c4e9bd5f63" class="i property">Count</a>, <span class="r925 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#d8b2bc67231979fe" class="i property">TagCount</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        [<span class="t constructor">TestCase</span>(<b>null</b>)]
        [<span class="t constructor">TestCase</span>(<a href="/Azure.Storage.Blobs/A.html#24706b1eae49d67f" class="t t">RehydratePriority</a>.<a href="/Azure.Storage.Blobs/A.html#d694cca3d803e2e3" class="i field">Standard</a>)]
        [<span class="t constructor">TestCase</span>(<a href="/Azure.Storage.Blobs/A.html#24706b1eae49d67f" class="t t">RehydratePriority</a>.<a href="/Azure.Storage.Blobs/A.html#a4fa13cea0b00cfe" class="i field">High</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="c52ccd629ac321e6" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetPropertiesAsync_RehydratePriority</a>(<a href="/Azure.Storage.Blobs/A.html#24706b1eae49d67f" class="t t">RehydratePriority</a>? <span id="r926 rd" class="r926 r">rehydratePriority</span>)
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r927 rd" class="r927 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r928 rd" class="r928 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r927 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <b>if</b> (<span class="r926 r">rehydratePriority</span>.<a href="@0@mscorlib/A.html#7bbe60e33e857298" class="i property">HasValue</a>)
            {
                <b>await</b> <span class="r928 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#326b7b743ac09161" class="i method">SetAccessTierAsync</a>(
                    <a href="/Azure.Storage.Blobs/A.html#fba68f8727fd7278" class="t t">AccessTier</a>.<a href="/Azure.Storage.Blobs/A.html#a8a54fd366606d43" class="i property">Archive</a>);
 
                <b>await</b> <span class="r928 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#326b7b743ac09161" class="i method">SetAccessTierAsync</a>(
                    <a href="/Azure.Storage.Blobs/A.html#fba68f8727fd7278" class="t t">AccessTier</a>.<a href="/Azure.Storage.Blobs/A.html#359527ed0d745045" class="i property">Hot</a>,
                    <span class="r929 r">rehydratePriority</span>: <span class="r926 r">rehydratePriority</span>.<a href="@0@mscorlib/A.html#7b38d1fa76071c95" class="i property">Value</a>);
            }
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r930 rd" class="r930 r">propertiesResponse</span> = <b>await</b> <span class="r928 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r926 r">rehydratePriority</span>.<a href="@0@mscorlib/A.html#7bbe60e33e857298" class="i property">HasValue</a> ? <span class="r926 r">rehydratePriority</span>.<a href="@0@mscorlib/A.html#7b38d1fa76071c95" class="i property">Value</a>.<a href="@0@mscorlib/A.html#1365cfeffd45409d" class="i method">ToString</a>() : <b>null</b>, <span class="r930 r">propertiesResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#421e8b7b0bf18447" class="i property">RehydratePriority</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="07f3176cc7045579" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetPropertiesAsync_CPK</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r931 rd" class="r931 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#ab2a0e921078c272" class="t t">AppendBlobClient</a> <span id="r932 rd" class="r932 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r931 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9b1458a6a968c4e1" class="i method">GetAppendBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Storage.Blobs/A.html#f11bcd56fc9ad22a" class="t t">CustomerProvidedKey</a> <span id="r933 rd" class="r933 r">customerProvidedKey</span> = <a href="BlobTestBase.cs.html#b481ac8680ce4d57" class="i method">GetCustomerProvidedKey</a>();
            <span class="r932 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r932 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#8e1bd03b8af7ac88" class="i method">WithCustomerProvidedKey</a>(<span class="r933 r">customerProvidedKey</span>));
            <b>await</b> <span class="r932 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#515fedd76dafac5e" class="i method">CreateIfNotExistsAsync</a>();
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r934 rd" class="r934 r">response</span> = <b>await</b> <span class="r932 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r933 r">customerProvidedKey</span>.<a href="/Azure.Storage.Blobs/A.html#7af1811ae000bcba" class="i property">EncryptionKeyHash</a>, <span class="r934 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#b43ad5c81853e347" class="i property">EncryptionKeySha256</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#6de5212dacb3a5ca" class="i field">V2019_07_07</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="add4bf8075a32e19" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetPropertiesAsync_EncryptionScope</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r935 rd" class="r935 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#ab2a0e921078c272" class="t t">AppendBlobClient</a> <span id="r936 rd" class="r936 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r935 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9b1458a6a968c4e1" class="i method">GetAppendBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <span class="r936 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r936 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#b9c9227fdf0ffb60" class="i method">WithEncryptionScope</a>(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#0234405d8d5e089b" class="i property">EncryptionScope</a>));
            <b>await</b> <span class="r936 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#515fedd76dafac5e" class="i method">CreateIfNotExistsAsync</a>();
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r937 rd" class="r937 r">response</span> = <b>await</b> <span class="r936 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#0234405d8d5e089b" class="i property">EncryptionScope</a>, <span class="r937 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#f3c3a67d0c6a1bd4" class="i property">EncryptionScope</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="8c269e66716f6cec" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetPropertiesAsync_ContainerSAS</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r938 rd" class="r938 r">containerName</span> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r939 rd" class="r939 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r940 rd" class="r940 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(<span class="r208 r">containerName</span>: <span class="r938 r">containerName</span>);
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r941 rd" class="r941 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r940 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>, <span class="r939 r">blobName</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#35fd4cc2c01515be" class="t t">BlobSasQueryParameters</a> <span id="r942 rd" class="r942 r">blobSasQueryParameters</span> = <a href="BlobTestBase.cs.html#d71f19ba1645e5f8" class="i method">GetContainerSas</a>(
                <span class="r943 r">containerName</span>: <span class="r940 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>,
                <span class="r944 r">permissions</span>: <a href="/Azure.Storage.Blobs/A.html#4c988bea3bd2c716" class="t t">BlobContainerSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#c5ad4d0c7bdde857" class="i field">Read</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#9147ea6881bb009b" class="t t">BlobUriBuilder</a> <span id="r945 rd" class="r945 r">blobUriBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<span class="r941 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>)
            {
                <a href="/Azure.Storage.Blobs/A.html#f246aac4010f2c45" class="i property">Sas</a> = <span class="r942 r">blobSasQueryParameters</span>
            };
 
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r946 rd" class="r946 r">sasBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#d3076260c1ec1edd" class="t constructor">BlockBlobClient</a>(<span class="r945 r">blobUriBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#65043f17a7dc36dc" class="i method">ToUri</a>(), <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>()));
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r947 rd" class="r947 r">response</span> = <b>await</b> <span class="r946 r">sasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r947 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r948 rd" class="r948 r">accountName</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<span class="r940 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#55807e0b811c3dd8" class="i property">Uri</a>).<a href="/Azure.Storage.Blobs/A.html#a4106776a1aa6850" class="i property">AccountName</a>;
            <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#717ca6fe9aa5647e" class="i method">AssertCacheableProperty</a>(<span class="r948 r">accountName</span>, () =&gt; <span class="r941 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#0ec0e7af4edc605e" class="i property">AccountName</a>);
            <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#717ca6fe9aa5647e" class="i method">AssertCacheableProperty</a>(<span class="r938 r">containerName</span>, () =&gt; <span class="r941 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#8125465144699fdb" class="i property">BlobContainerName</a>);
            <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#717ca6fe9aa5647e" class="i method">AssertCacheableProperty</a>(<span class="r939 r">blobName</span>, () =&gt; <span class="r941 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#157bb830a0c2db34" class="i property">Name</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="94706fd009bdb537" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetPropertiesAsync_ContainerIdentitySAS</a>()
        {
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r949 rd" class="r949 r">oauthService</span> = <a href="BlobTestBase.cs.html#a0ccf5affc88da7d" class="i property">BlobsClientBuilder</a>.<a href="ClientBuilderExtensions.cs.html#a816bf81da5c6a2b" class="i method">GetServiceClient_OAuth</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r950 rd" class="r950 r">containerName</span> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r951 rd" class="r951 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r952 rd" class="r952 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(<span class="r208 r">containerName</span>: <span class="r950 r">containerName</span>, <span class="r181 r">service</span>: <span class="r949 r">oauthService</span>);
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r953 rd" class="r953 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r952 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>, <span class="r951 r">blobName</span>);
 
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#781f283857f7caf2" class="t t">UserDelegationKey</a>&gt; <span id="r954 rd" class="r954 r">userDelegationKey</span> = <b>await</b> <span class="r949 r">oauthService</span>.<a href="/Azure.Storage.Blobs/A.html#0e8108c060ec84fc" class="i method">GetUserDelegationKeyAsync</a>(
                <span class="r53 r">startsOn</span>: <b>null</b>,
                <span class="r54 r">expiresOn</span>: <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(1));
 
            <a href="/Azure.Storage.Blobs/A.html#35fd4cc2c01515be" class="t t">BlobSasQueryParameters</a> <span id="r955 rd" class="r955 r">blobSasQueryParameters</span> = <a href="BlobTestBase.cs.html#65588b481ab16f93" class="i method">GetContainerIdentitySas</a>(
                <span class="r956 r">containerName</span>: <span class="r952 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>,
                <a href="/Azure.Storage.Blobs/A.html#4c988bea3bd2c716" class="t t">BlobContainerSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#c5ad4d0c7bdde857" class="i field">Read</a>,
                <span class="r957 r">userDelegationKey</span>: <span class="r954 r">userDelegationKey</span>,
                <a href="Shared/StorageTestBase.cs.html#014ad718b41f3c72" class="i field">Tenants</a>.<a href="Shared/TenantConfigurationBuilder.cs.html#e30a3a081b015e88" class="i property">TestConfigOAuth</a>.<a href="Shared/TenantConfiguration.cs.html#774d8fba75d6b5dd" class="i property">AccountName</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#9147ea6881bb009b" class="t t">BlobUriBuilder</a> <span id="r958 rd" class="r958 r">blobUriBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<span class="r953 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>)
            {
                <a href="/Azure.Storage.Blobs/A.html#f246aac4010f2c45" class="i property">Sas</a> = <span class="r955 r">blobSasQueryParameters</span>
            };
 
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r959 rd" class="r959 r">identitySasBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#d3076260c1ec1edd" class="t constructor">BlockBlobClient</a>(<span class="r958 r">blobUriBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#65043f17a7dc36dc" class="i method">ToUri</a>(), <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>()));
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r960 rd" class="r960 r">response</span> = <b>await</b> <span class="r959 r">identitySasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
            <a href="#8bd9e1865dc3bf99" class="i method">AssertSasUserDelegationKey</a>(<span class="r959 r">identitySasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>, <span class="r954 r">userDelegationKey</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>);
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r960 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="b930da3b5bdf8635" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetPropertiesAsync_BlobSAS</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r961 rd" class="r961 r">containerName</span> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r962 rd" class="r962 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r963 rd" class="r963 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(<span class="r208 r">containerName</span>: <span class="r961 r">containerName</span>);
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r964 rd" class="r964 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r963 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>, <span class="r962 r">blobName</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r965 rd" class="r965 r">sasBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(
                <a href="BlobTestBase.cs.html#7b3d7ba8bf1d919e" class="i method">GetServiceClient_BlobServiceSas_Blob</a>(
                    <span class="r24 r">containerName</span>: <span class="r961 r">containerName</span>,
                    <span class="r25 r">blobName</span>: <span class="r962 r">blobName</span>)
                .<a href="/Azure.Storage.Blobs/A.html#e3b6b5726874c210" class="i method">GetBlobContainerClient</a>(<span class="r961 r">containerName</span>)
                .<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<span class="r962 r">blobName</span>));
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r966 rd" class="r966 r">response</span> = <b>await</b> <span class="r965 r">sasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r966 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="a5538090a1711dbd" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetPropertiesAsync_BlobSasWithIdentifier</a>()
        {
            <span class="c">// Arrange</span>
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r967 rd" class="r967 r">containerName</span> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r968 rd" class="r968 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r969 rd" class="r969 r">signedIdentifierId</span> = <a href="Shared/StorageTestBase.cs.html#afa2e83b31a1aec6" class="i method">GetNewString</a>();
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r970 rd" class="r970 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(<span class="r208 r">containerName</span>: <span class="r967 r">containerName</span>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r971 rd" class="r971 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r970 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>, <span class="r968 r">blobName</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#c2df4a8ebad8b290" class="t t">BlobSignedIdentifier</a> <span id="r972 rd" class="r972 r">identifier</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#ac0bc447c941bc87" class="t constructor">BlobSignedIdentifier</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#9148aa372d836f1e" class="i property">Id</a> = <span class="r969 r">signedIdentifierId</span>,
                <a href="/Azure.Storage.Blobs/A.html#e087106230e42d2f" class="i property">AccessPolicy</a> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#a0129d89993487f9" class="t constructor">BlobAccessPolicy</a>
                {
                    <a href="/Azure.Storage.Blobs/A.html#368c81fb0510f3e5" class="i property">PolicyStartsOn</a> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(-1),
                    <a href="/Azure.Storage.Blobs/A.html#8059052ee6a4527c" class="i property">PolicyExpiresOn</a> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(1),
                    <a href="/Azure.Storage.Blobs/A.html#f166c2a15bd9aae1" class="i property">Permissions</a> = <span class="s">&quot;rw&quot;</span>
                }
            };
            <b>await</b> <span class="r970 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#66e94da104359874" class="i method">SetAccessPolicyAsync</a>(<span class="r973 r">permissions</span>: <b>new</b> <a href="/Azure.Storage.Blobs/A.html#c2df4a8ebad8b290" class="t t">BlobSignedIdentifier</a>[] { <span class="r972 r">identifier</span> });
 
            <a href="/Azure.Storage.Blobs/A.html#494fcdf61457bd9e" class="t t">BlobSasBuilder</a> <span id="r974 rd" class="r974 r">sasBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#309ae3b402d7e74b" class="t constructor">BlobSasBuilder</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#ce07251198338797" class="i property">BlobContainerName</a> = <span class="r967 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#5faddb946ddd32e7" class="i property">BlobName</a> = <span class="r968 r">blobName</span>,
                <a href="/Azure.Storage.Blobs/A.html#678b20d2a638f7d6" class="i property">Identifier</a> = <span class="r969 r">signedIdentifierId</span>
            };
            <a href="/Azure.Storage.Blobs/A.html#35fd4cc2c01515be" class="t t">BlobSasQueryParameters</a> <span id="r975 rd" class="r975 r">sasQueryParameters</span> = <span class="r974 r">sasBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#92d3ef6936d31322" class="i method">ToSasQueryParameters</a>(<a href="Shared/StorageTestBase.cs.html#014ad718b41f3c72" class="i field">Tenants</a>.<a href="Shared/TenantConfigurationBuilder.cs.html#7ff0ecb1cb4d01b3" class="i method">GetNewSharedKeyCredentials</a>());
 
            <a href="/Azure.Storage.Blobs/A.html#9147ea6881bb009b" class="t t">BlobUriBuilder</a> <span id="r976 rd" class="r976 r">uriBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<span class="r971 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>)
            {
                <a href="/Azure.Storage.Blobs/A.html#f246aac4010f2c45" class="i property">Sas</a> = <span class="r975 r">sasQueryParameters</span>
            };
 
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r977 rd" class="r977 r">sasBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#d3076260c1ec1edd" class="t constructor">BlockBlobClient</a>(
                <span class="r976 r">uriBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#65043f17a7dc36dc" class="i method">ToUri</a>(),
                <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>()));
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r978 rd" class="r978 r">response</span> = <b>await</b> <span class="r977 r">sasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r978 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="81fdd274a624ea3c" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetPropertiesAsync_BlobSasWithContentHeaders</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r979 rd" class="r979 r">containerName</span> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r980 rd" class="r980 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r981 rd" class="r981 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(<span class="r208 r">containerName</span>: <span class="r979 r">containerName</span>);
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r982 rd" class="r982 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r981 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>, <span class="r980 r">blobName</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#494fcdf61457bd9e" class="t t">BlobSasBuilder</a> <span id="r983 rd" class="r983 r">blobSasBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#309ae3b402d7e74b" class="t constructor">BlobSasBuilder</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#ce07251198338797" class="i property">BlobContainerName</a> = <span class="r979 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#5faddb946ddd32e7" class="i property">BlobName</a> = <span class="r980 r">blobName</span>,
                <a href="/Azure.Storage.Blobs/A.html#39e9c6b3c06408ec" class="i property">Protocol</a> = <a href="/Azure.Storage.Common/A.html#0acd3b9b8aa8ffc2" class="t t">SasProtocol</a>.<a href="/Azure.Storage.Common/A.html#848f533f51ab1184" class="i field">None</a>,
                <a href="/Azure.Storage.Blobs/A.html#8b95d8dba4910956" class="i property">StartsOn</a> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(-1),
                <a href="/Azure.Storage.Blobs/A.html#7c95b83bce66d14b" class="i property">ExpiresOn</a> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(1),
                <a href="/Azure.Storage.Blobs/A.html#d5d343a3eb61491f" class="i property">IPRange</a> = <b>new</b> <a href="/Azure.Storage.Common/A.html#6c3b5693020cf6b5" class="t constructor">SasIPRange</a>(<a href="@0@System/A.html#966bd1c3b2dc55c7" class="t t">IPAddress</a>.<a href="@0@System/A.html#eb12009d0f65f719" class="i field">None</a>, <a href="@0@System/A.html#966bd1c3b2dc55c7" class="t t">IPAddress</a>.<a href="@0@System/A.html#eb12009d0f65f719" class="i field">None</a>),
                <a href="/Azure.Storage.Blobs/A.html#e76f767f2492eae0" class="i property">CacheControl</a> = <span class="s">&quot;\\cache control?&quot;</span>,
                <a href="/Azure.Storage.Blobs/A.html#29d884305f59a6e6" class="i property">ContentDisposition</a> = <span class="s">&quot;\\content disposition?&quot;</span>,
                <a href="/Azure.Storage.Blobs/A.html#17d4268756bdd3b0" class="i property">ContentEncoding</a> = <span class="s">&quot;\\content encoding?&quot;</span>,
                <a href="/Azure.Storage.Blobs/A.html#88f05d50d4a8cc2c" class="i property">ContentLanguage</a> = <span class="s">&quot;\\content language?&quot;</span>,
                <a href="/Azure.Storage.Blobs/A.html#ebfa548a8e9b5ddb" class="i property">ContentType</a> = <span class="s">&quot;\\content type?&quot;</span>
            };
            <span class="r983 r">blobSasBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#22e0911de6a2b628" class="i method">SetPermissions</a>(
                <a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#796b36cb23a40798" class="i field">All</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#35fd4cc2c01515be" class="t t">BlobSasQueryParameters</a> <span id="r984 rd" class="r984 r">blobSasQueryParameters</span> = <span class="r983 r">blobSasBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#92d3ef6936d31322" class="i method">ToSasQueryParameters</a>(<a href="Shared/StorageTestBase.cs.html#014ad718b41f3c72" class="i field">Tenants</a>.<a href="Shared/TenantConfigurationBuilder.cs.html#7ff0ecb1cb4d01b3" class="i method">GetNewSharedKeyCredentials</a>());
 
            <span class="c">// Act</span>
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r985 rd" class="r985 r">queryParametersString</span> = <span class="r984 r">blobSasQueryParameters</span>.<a href="/Azure.Storage.Blobs/A.html#ea915fd6ac1b7fb0" class="i method">ToString</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r985 r">queryParametersString</span>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<span class="s">&quot;rscc=%5Ccache+control%3F&quot;</span>));
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r985 r">queryParametersString</span>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<span class="s">&quot;rscd=%5Ccontent+disposition%3F&quot;</span>));
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r985 r">queryParametersString</span>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<span class="s">&quot;rsce=%5Ccontent+encoding%3F&quot;</span>));
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r985 r">queryParametersString</span>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<span class="s">&quot;rscl=%5Ccontent+language%3F&quot;</span>));
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r985 r">queryParametersString</span>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<span class="s">&quot;rsct=%5Ccontent+type%3F&quot;</span>));
 
            <a href="/Azure.Storage.Blobs/A.html#9147ea6881bb009b" class="t t">BlobUriBuilder</a> <span id="r986 rd" class="r986 r">blobUriBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#9c094343c57a64fb" class="i property">BlobServiceEndpoint</a>));
            <span class="r986 r">blobUriBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#66d0888b29b9df5c" class="i property">BlobName</a> = <span class="r980 r">blobName</span>;
            <span class="r986 r">blobUriBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#4093b9ec449e05da" class="i property">BlobContainerName</a> = <span class="r979 r">containerName</span>;
            <span class="r986 r">blobUriBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#f246aac4010f2c45" class="i property">Sas</a> = <span class="r984 r">blobSasQueryParameters</span>;
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r987 rd" class="r987 r">sasBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#d3076260c1ec1edd" class="t constructor">BlockBlobClient</a>(<span class="r986 r">blobUriBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#65043f17a7dc36dc" class="i method">ToUri</a>(), <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>()));
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r988 rd" class="r988 r">response</span> = <b>await</b> <span class="r987 r">sasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r988 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
 
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r987 r">sasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>.<a href="@0@System/A.html#5177e12380d8e70d" class="i property">Query</a>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<span class="s">&quot;rscc=%5Ccache+control%3F&quot;</span>));
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r987 r">sasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>.<a href="@0@System/A.html#5177e12380d8e70d" class="i property">Query</a>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<span class="s">&quot;rscd=%5Ccontent+disposition%3F&quot;</span>));
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r987 r">sasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>.<a href="@0@System/A.html#5177e12380d8e70d" class="i property">Query</a>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<span class="s">&quot;rsce=%5Ccontent+encoding%3F&quot;</span>));
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r987 r">sasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>.<a href="@0@System/A.html#5177e12380d8e70d" class="i property">Query</a>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<span class="s">&quot;rscl=%5Ccontent+language%3F&quot;</span>));
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r987 r">sasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>.<a href="@0@System/A.html#5177e12380d8e70d" class="i property">Query</a>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<span class="s">&quot;rsct=%5Ccontent+type%3F&quot;</span>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="cb4cee208fdf6d18" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetPropertiesAsync_BlobIdentitySAS</a>()
        {
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r989 rd" class="r989 r">oauthService</span> = <a href="BlobTestBase.cs.html#a0ccf5affc88da7d" class="i property">BlobsClientBuilder</a>.<a href="ClientBuilderExtensions.cs.html#a816bf81da5c6a2b" class="i method">GetServiceClient_OAuth</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r990 rd" class="r990 r">containerName</span> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r991 rd" class="r991 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
 
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r992 rd" class="r992 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(<span class="r208 r">containerName</span>: <span class="r990 r">containerName</span>, <span class="r181 r">service</span>: <span class="r989 r">oauthService</span>);
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r993 rd" class="r993 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r992 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>, <span class="r991 r">blobName</span>);
 
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#781f283857f7caf2" class="t t">UserDelegationKey</a>&gt; <span id="r994 rd" class="r994 r">userDelegationKey</span> = <b>await</b> <span class="r989 r">oauthService</span>.<a href="/Azure.Storage.Blobs/A.html#0e8108c060ec84fc" class="i method">GetUserDelegationKeyAsync</a>(
                <span class="r53 r">startsOn</span>: <b>null</b>,
                <span class="r54 r">expiresOn</span>: <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(1));
 
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r995 rd" class="r995 r">identitySasBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(
                <a href="BlobTestBase.cs.html#c522c3cd10a9eda8" class="i method">GetServiceClient_BlobServiceIdentitySas_Blob</a>(
                    <span class="r996 r">containerName</span>: <span class="r990 r">containerName</span>,
                    <span class="r997 r">blobName</span>: <span class="r991 r">blobName</span>,
                    <span class="r998 r">userDelegationKey</span>: <span class="r994 r">userDelegationKey</span>)
                .<a href="/Azure.Storage.Blobs/A.html#e3b6b5726874c210" class="i method">GetBlobContainerClient</a>(<span class="r990 r">containerName</span>)
                .<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<span class="r991 r">blobName</span>));
 
            <a href="#8bd9e1865dc3bf99" class="i method">AssertSasUserDelegationKey</a>(<span class="r995 r">identitySasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>, <span class="r994 r">userDelegationKey</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r999 rd" class="r999 r">response</span> = <b>await</b> <span class="r995 r">identitySasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r999 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="062887782431f490" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetPropertiesAsync_Version</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1000 rd" class="r1000 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#ab2a0e921078c272" class="t t">AppendBlobClient</a> <span id="r1001 rd" class="r1001 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1000 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9b1458a6a968c4e1" class="i method">GetAppendBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#66a553618c3f7c72" class="t t">BlobContentInfo</a>&gt; <span id="r1002 rd" class="r1002 r">createResponse</span> = <b>await</b> <span class="r1001 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4dc3eeb6e23e9c0f" class="i method">CreateAsync</a>();
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1003 rd" class="r1003 r">metadata</span> = <a href="Shared/StorageTestBase.cs.html#9bbe73e9e1c28539" class="i method">BuildMetadata</a>();
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#6cdb754d8a522d97" class="t t">BlobInfo</a>&gt; <span id="r1004 rd" class="r1004 r">metadataResponse</span> = <b>await</b> <span class="r1001 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#58dcaf1e6f66d2b3" class="i method">SetMetadataAsync</a>(<span class="r1003 r">metadata</span>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1005 rd" class="r1005 r">versionBlob</span> = <span class="r1001 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#0d5ad4aca2096779" class="i method">WithVersion</a>(<span class="r1002 r">createResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#d6d167cdb7477b7e" class="i property">VersionId</a>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r1006 rd" class="r1006 r">oldVersionResponse</span> = <b>await</b> <span class="r1005 r">versionBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r1007 rd" class="r1007 r">latestVersionResponse</span> = <b>await</b> <span class="r1001 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1006 r">oldVersionResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#6c1f659ccaff3d13" class="i property">VersionId</a>);
            <span class="t t">Assert</span>.<span class="i method">IsFalse</span>(<span class="r1006 r">oldVersionResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#816dc616a5de54b5" class="i property">IsLatestVersion</a>);
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1006 r">oldVersionResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#6c1f659ccaff3d13" class="i property">VersionId</a>);
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r1007 r">latestVersionResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#816dc616a5de54b5" class="i property">IsLatestVersion</a>);
        }
 
        <b>private void</b> <a id="8bd9e1865dc3bf99" href="R/8bd9e1865dc3bf99.html" target="n" data-glyph="76,1" class="i method">AssertSasUserDelegationKey</a>(<a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r1008 rd" class="r1008 r">uri</span>, <a href="/Azure.Storage.Blobs/A.html#781f283857f7caf2" class="t t">UserDelegationKey</a> <span id="r1009 rd" class="r1009 r">key</span>)
        {
            <a href="/Azure.Storage.Blobs/A.html#35fd4cc2c01515be" class="t t">BlobSasQueryParameters</a> <span id="r1010 rd" class="r1010 r">sas</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<span class="r1008 r">uri</span>).<a href="/Azure.Storage.Blobs/A.html#f246aac4010f2c45" class="i property">Sas</a>;
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1009 r">key</span>.<a href="/Azure.Storage.Blobs/A.html#11f7162b1c78be50" class="i property">SignedObjectId</a>, <span class="r1010 r">sas</span>.<a href="/Azure.Storage.Blobs/A.html#4d4e58869ad8a83c" class="i property">KeyObjectId</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1009 r">key</span>.<a href="/Azure.Storage.Blobs/A.html#5bc9084646614562" class="i property">SignedExpiresOn</a>, <span class="r1010 r">sas</span>.<a href="/Azure.Storage.Blobs/A.html#1bbd6930ef9cccbc" class="i property">KeyExpiresOn</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1009 r">key</span>.<a href="/Azure.Storage.Blobs/A.html#e7d291d4b06cdc80" class="i property">SignedService</a>, <span class="r1010 r">sas</span>.<a href="/Azure.Storage.Blobs/A.html#443537f0b4bf0c98" class="i property">KeyService</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1009 r">key</span>.<a href="/Azure.Storage.Blobs/A.html#73ebae52c55d5f31" class="i property">SignedStartsOn</a>, <span class="r1010 r">sas</span>.<a href="/Azure.Storage.Blobs/A.html#99aa68244f167560" class="i property">KeyStartsOn</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1009 r">key</span>.<a href="/Azure.Storage.Blobs/A.html#8e1b55da040f28d8" class="i property">SignedTenantId</a>, <span class="r1010 r">sas</span>.<a href="/Azure.Storage.Blobs/A.html#009d9093f1a8f843" class="i property">KeyTenantId</a>);
            <span class="c">//Assert.AreEqual(key.SignedVersion, sas.Version);</span>
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="0a921860c74b87ce" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetPropertiesAsync_SnapshotSAS</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1011 rd" class="r1011 r">containerName</span> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1012 rd" class="r1012 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1013 rd" class="r1013 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(<span class="r208 r">containerName</span>: <span class="r1011 r">containerName</span>);
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1014 rd" class="r1014 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1013 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>, <span class="r1012 r">blobName</span>);
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#f34089dd356582b9" class="t t">BlobSnapshotInfo</a>&gt; <span id="r1015 rd" class="r1015 r">snapshotResponse</span> = <b>await</b> <span class="r1014 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#884dd1969092f87b" class="i method">CreateSnapshotAsync</a>();
 
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r1016 rd" class="r1016 r">sasBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(
                <a href="BlobTestBase.cs.html#2ee60a29577fbf1e" class="i method">GetServiceClient_BlobServiceSas_Snapshot</a>(
                    <span class="r1017 r">containerName</span>: <span class="r1011 r">containerName</span>,
                    <span class="r1018 r">blobName</span>: <span class="r1012 r">blobName</span>,
                    <span class="r1019 r">snapshot</span>: <span class="r1015 r">snapshotResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#6de85189f89b695f" class="i property">Snapshot</a>)
                .<a href="/Azure.Storage.Blobs/A.html#e3b6b5726874c210" class="i method">GetBlobContainerClient</a>(<span class="r1011 r">containerName</span>)
                .<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<span class="r1012 r">blobName</span>)
                .<a href="/Azure.Storage.Blobs/A.html#e0007a3528e28220" class="i method">WithSnapshot</a>(<span class="r1015 r">snapshotResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#6de85189f89b695f" class="i property">Snapshot</a>));
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r1020 rd" class="r1020 r">response</span> = <b>await</b> <span class="r1016 r">sasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1020 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="7580d12cb82536c5" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetPropertiesAsync_SnapshotSAS_Using_BlobClient</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1021 rd" class="r1021 r">containerName</span> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1022 rd" class="r1022 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1023 rd" class="r1023 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(<span class="r208 r">containerName</span>: <span class="r1021 r">containerName</span>);
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1024 rd" class="r1024 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1023 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>, <span class="r1022 r">blobName</span>);
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#f34089dd356582b9" class="t t">BlobSnapshotInfo</a>&gt; <span id="r1025 rd" class="r1025 r">snapshotResponse</span> = <b>await</b> <span class="r1024 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#884dd1969092f87b" class="i method">CreateSnapshotAsync</a>();
 
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1026 rd" class="r1026 r">sasBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(
                <a href="BlobTestBase.cs.html#2ee60a29577fbf1e" class="i method">GetServiceClient_BlobServiceSas_Snapshot</a>(
                    <span class="r1017 r">containerName</span>: <span class="r1021 r">containerName</span>,
                    <span class="r1018 r">blobName</span>: <span class="r1022 r">blobName</span>,
                    <span class="r1019 r">snapshot</span>: <span class="r1025 r">snapshotResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#6de85189f89b695f" class="i property">Snapshot</a>)
                .<a href="/Azure.Storage.Blobs/A.html#e3b6b5726874c210" class="i method">GetBlobContainerClient</a>(<span class="r1021 r">containerName</span>)
                .<a href="/Azure.Storage.Blobs/A.html#e796fb2e7b99a23b" class="i method">GetBlobClient</a>(<span class="r1022 r">blobName</span>)
                .<a href="/Azure.Storage.Blobs/A.html#c52a8e374991ed02" class="i method">WithSnapshot</a>(<span class="r1025 r">snapshotResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#6de85189f89b695f" class="i property">Snapshot</a>));
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r1027 rd" class="r1027 r">response</span> = <b>await</b> <span class="r1026 r">sasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1027 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="6e269a31299b5cb0" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetPropertiesAsync_SnapshotIdentitySAS</a>()
        {
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r1028 rd" class="r1028 r">oauthService</span> = <a href="BlobTestBase.cs.html#a0ccf5affc88da7d" class="i property">BlobsClientBuilder</a>.<a href="ClientBuilderExtensions.cs.html#a816bf81da5c6a2b" class="i method">GetServiceClient_OAuth</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1029 rd" class="r1029 r">containerName</span> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1030 rd" class="r1030 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1031 rd" class="r1031 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(<span class="r208 r">containerName</span>: <span class="r1029 r">containerName</span>, <span class="r181 r">service</span>: <span class="r1028 r">oauthService</span>);
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1032 rd" class="r1032 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1031 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>, <span class="r1030 r">blobName</span>);
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#f34089dd356582b9" class="t t">BlobSnapshotInfo</a>&gt; <span id="r1033 rd" class="r1033 r">snapshotResponse</span> = <b>await</b> <span class="r1032 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#884dd1969092f87b" class="i method">CreateSnapshotAsync</a>();
 
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#781f283857f7caf2" class="t t">UserDelegationKey</a>&gt; <span id="r1034 rd" class="r1034 r">userDelegationKey</span> = <b>await</b> <span class="r1028 r">oauthService</span>.<a href="/Azure.Storage.Blobs/A.html#0e8108c060ec84fc" class="i method">GetUserDelegationKeyAsync</a>(
                <span class="r53 r">startsOn</span>: <b>null</b>,
                <span class="r54 r">expiresOn</span>: <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(1));
 
            <a href="/Azure.Storage.Blobs/A.html#35fd4cc2c01515be" class="t t">BlobSasQueryParameters</a> <span id="r1035 rd" class="r1035 r">blobSasQueryParameters</span> = <a href="BlobTestBase.cs.html#b002c197e38c8ac5" class="i method">GetSnapshotIdentitySas</a>(
                <span class="r1036 r">containerName</span>: <span class="r1031 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>,
                <span class="r1037 r">blobName</span>: <span class="r1032 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#157bb830a0c2db34" class="i property">Name</a>,
                <span class="r1038 r">snapshot</span>: <span class="r1033 r">snapshotResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#6de85189f89b695f" class="i property">Snapshot</a>,
                <span class="r1039 r">permissions</span>: <a href="/Azure.Storage.Blobs/A.html#33a9a88ecb0b0734" class="t t">SnapshotSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#2fde7d89ba3b3085" class="i field">Read</a>,
                <span class="r1040 r">userDelegationKey</span>: <span class="r1034 r">userDelegationKey</span>,
                <span class="r1041 r">accountName</span>: <a href="Shared/StorageTestBase.cs.html#014ad718b41f3c72" class="i field">Tenants</a>.<a href="Shared/TenantConfigurationBuilder.cs.html#e30a3a081b015e88" class="i property">TestConfigOAuth</a>.<a href="Shared/TenantConfiguration.cs.html#774d8fba75d6b5dd" class="i property">AccountName</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#9147ea6881bb009b" class="t t">BlobUriBuilder</a> <span id="r1042 rd" class="r1042 r">blobUriBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<span class="r1032 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>)
            {
                <a href="/Azure.Storage.Blobs/A.html#f246aac4010f2c45" class="i property">Sas</a> = <span class="r1035 r">blobSasQueryParameters</span>
            };
 
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r1043 rd" class="r1043 r">identitySasBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#d3076260c1ec1edd" class="t constructor">BlockBlobClient</a>(<span class="r1042 r">blobUriBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#65043f17a7dc36dc" class="i method">ToUri</a>(), <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>())).<a href="/Azure.Storage.Blobs/A.html#e0007a3528e28220" class="i method">WithSnapshot</a>(<span class="r1033 r">snapshotResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#6de85189f89b695f" class="i property">Snapshot</a>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r1044 rd" class="r1044 r">response</span> = <b>await</b> <span class="r1043 r">identitySasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1044 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
            <a href="#8bd9e1865dc3bf99" class="i method">AssertSasUserDelegationKey</a>(<span class="r1043 r">identitySasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>, <span class="r1034 r">userDelegationKey</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="e7a0ec20089c3745" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetPropertiesAsync_AccessConditions</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1045 rd" class="r1045 r">garbageLeaseId</span> = <a href="BlobTestBase.cs.html#d39dc6fab7daaa70" class="i method">GetGarbageLeaseId</a>();
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r1046 rd" class="r1046 r">parameters</span> <b>in</b> <a href="#2a798157c01985c4" class="i property">AccessConditions_Data</a>)
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1047 rd" class="r1047 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
                <span class="c">// Arrange</span>
                <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1048 rd" class="r1048 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1047 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
                <span class="r1046 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r1048 r">blob</span>, <span class="r1046 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a>);
                <span class="r1046 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#af0faf1b7c1c85bd" class="i property">LeaseId</a> = <b>await</b> <a href="BlobTestBase.cs.html#2216a728843c891e" class="i method">SetupBlobLeaseCondition</a>(<span class="r1048 r">blob</span>, <span class="r1046 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#af0faf1b7c1c85bd" class="i property">LeaseId</a>, <span class="r1045 r">garbageLeaseId</span>);
                <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r1049 rd" class="r1049 r">accessConditions</span> = <a href="#47a1d944fb251ee5" class="i method">BuildAccessConditions</a>(
                    <span class="r482 r">parameters</span>: <span class="r1046 r">parameters</span>,
                    <span class="r490 r">lease</span>: <b>true</b>);
 
                <span class="c">// Act</span>
                <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r1050 rd" class="r1050 r">response</span> = <b>await</b> <span class="r1048 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>(<span class="r1051 r">conditions</span>: <span class="r1049 r">accessConditions</span>);
 
                <span class="c">// Assert</span>
                <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1050 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="c38034dcae3718e9" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetPropertiesAsync_AccessConditionsFail</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1052 rd" class="r1052 r">garbageLeaseId</span> = <a href="BlobTestBase.cs.html#d39dc6fab7daaa70" class="i method">GetGarbageLeaseId</a>();
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r1053 rd" class="r1053 r">parameters</span> <b>in</b> <a href="#f06bf70b762b1860" class="i method">GetAccessConditionsFail_Data</a>(<span class="r1052 r">garbageLeaseId</span>))
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1054 rd" class="r1054 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
                <span class="c">// Arrange</span>
                <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1055 rd" class="r1055 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1054 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
                <span class="r1053 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r1055 r">blob</span>, <span class="r1053 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a>);
                <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r1056 rd" class="r1056 r">accessConditions</span> = <a href="#47a1d944fb251ee5" class="i method">BuildAccessConditions</a>(<span class="r1053 r">parameters</span>);
 
                <span class="c">// Act</span>
                <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#4c635e211835e989" class="i method">CatchAsync</a>&lt;<a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a>&gt;(
                    <b>async</b> () =&gt;
                    {
                        <a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="k">var</a> <span id="r1057 rd" class="r1057 r">_</span> = (<b>await</b> <span class="r1055 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>(
                            <span class="r1051 r">conditions</span>: <span class="r1056 r">accessConditions</span>)).<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>;
                    });
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="b0e156d60a173750" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetPropertiesAsync_IfTags</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1058 rd" class="r1058 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1059 rd" class="r1059 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1058 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1060 rd" class="r1060 r">tags</span> = <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;
            {
                { <span class="s">&quot;coolTag&quot;</span>, <span class="s">&quot;true&quot;</span> }
            };
            <b>await</b> <span class="r1059 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r1060 r">tags</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r1061 rd" class="r1061 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
            };
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r1062 rd" class="r1062 r">response</span> = <b>await</b> <span class="r1059 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>(<span class="r1051 r">conditions</span>: <span class="r1061 r">conditions</span>);
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1062 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#8491b5521f600f18" class="i property">ETag</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="7d753cedf032194a" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetPropertiesAsync_IfTags_Failed</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1063 rd" class="r1063 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1064 rd" class="r1064 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1063 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r1065 rd" class="r1065 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
            };
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1064 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>(<span class="r1051 r">conditions</span>: <span class="r1065 r">conditions</span>),
                <span id="r1066 rd" class="r1066 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;ConditionNotMet&quot;</span>, <span class="r1066 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#3877171c1b02b2a6" class="t constructor">PlaybackOnly</a>(<span class="s">&quot;Object Replication policies is only enabled on certain storage accounts&quot;</span>)]
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="d7550b1e2a7a48a9" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetPropertiesAsync_ObjectReplication</a>()
        {
            <span class="c">// TODO: The tests will temporarily use designated account, containers and blobs to check the</span>
            <span class="c">// existence of OR headers</span>
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r1067 rd" class="r1067 r">sourceServiceClient</span> = <a href="BlobTestBase.cs.html#a0ccf5affc88da7d" class="i property">BlobsClientBuilder</a>.<a href="ClientBuilderExtensions.cs.html#6aefc2d0167a3d3f" class="i method">GetServiceClient_SharedKey</a>();
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r1068 rd" class="r1068 r">destinationServiceClient</span> = <a href="BlobTestBase.cs.html#a0ccf5affc88da7d" class="i property">BlobsClientBuilder</a>.<a href="ClientBuilderExtensions.cs.html#fdafd88aa5d1c416" class="i method">GetServiceClient_SecondaryAccount_SharedKey</a>();
 
            <span class="c">// This is a PLAYBACK ONLY test with a special container we previously setup, as we can&#39;t auto setup policies yet</span>
            <a href="/Azure.Storage.Blobs/A.html#6bb2c165ee95c7d4" class="t t">BlobContainerClient</a> <span id="r1069 rd" class="r1069 r">sourceContainer</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1067 r">sourceServiceClient</span>.<a href="/Azure.Storage.Blobs/A.html#e3b6b5726874c210" class="i method">GetBlobContainerClient</a>(<span class="s">&quot;test1&quot;</span>));
            <a href="/Azure.Storage.Blobs/A.html#6bb2c165ee95c7d4" class="t t">BlobContainerClient</a> <span id="r1070 rd" class="r1070 r">destinationContainer</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1068 r">destinationServiceClient</span>.<a href="/Azure.Storage.Blobs/A.html#e3b6b5726874c210" class="i method">GetBlobContainerClient</a>(<span class="s">&quot;test2&quot;</span>));
 
            <span class="c">// Arrange</span>
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1071 rd" class="r1071 r">blob_name</span> = <span class="s">&quot;netgetpropertiesors2blobapitestgetpropertiesors&quot;</span>;
            <a href="/Azure.Storage.Blobs/A.html#f0665d15d63242b1" class="t t">BlobClient</a> <span id="r1072 rd" class="r1072 r">sourceBlob</span> = <span class="r1069 r">sourceContainer</span>.<a href="/Azure.Storage.Blobs/A.html#e796fb2e7b99a23b" class="i method">GetBlobClient</a>(<span class="r1071 r">blob_name</span>);
            <a href="/Azure.Storage.Blobs/A.html#f0665d15d63242b1" class="t t">BlobClient</a> <span id="r1073 rd" class="r1073 r">destBlob</span> = <span class="r1070 r">destinationContainer</span>.<a href="/Azure.Storage.Blobs/A.html#e796fb2e7b99a23b" class="i method">GetBlobClient</a>(<span class="r1071 r">blob_name</span>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r1074 rd" class="r1074 r">source_response</span> = <b>await</b> <span class="r1072 r">sourceBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r1075 rd" class="r1075 r">dest_response</span> = <b>await</b> <span class="r1073 r">destBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(1, <span class="r1074 r">source_response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#1b13853ec92f635d" class="i property">ObjectReplicationSourceProperties</a>.<a href="@0@mscorlib/A.html#3d6c21c4e9bd5f63" class="i property">Count</a>);
            <span class="t t">Assert</span>.<span class="i method">IsNull</span>(<span class="r1074 r">source_response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#685b6caa20845992" class="i property">ObjectReplicationDestinationPolicyId</a>);
            <span class="t t">Assert</span>.<span class="i method">IsNotEmpty</span>(<span class="r1075 r">dest_response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#685b6caa20845992" class="i property">ObjectReplicationDestinationPolicyId</a>);
            <span class="t t">Assert</span>.<span class="i method">IsNull</span>(<span class="r1075 r">dest_response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#1b13853ec92f635d" class="i property">ObjectReplicationSourceProperties</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="18e1174173148640" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetPropertiesAsync_Error</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1076 rd" class="r1076 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r1077 rd" class="r1077 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1076 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1077 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>(),
                <span id="r1078 rd" class="r1078 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;BlobNotFound&quot;</span>, <span class="r1078 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#27df0a26b8a4fbfb" class="i field">V2020_02_10</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="13ac9d88958bf0a7" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetPropertiesAsync_LastAccessed</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1079 rd" class="r1079 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1080 rd" class="r1080 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1079 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r1081 rd" class="r1081 r">response</span> = <b>await</b> <span class="r1080 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreNotEqual</span>(<a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a>.<a href="@0@mscorlib/A.html#027622e417a4d206" class="i field">MinValue</a>, <span class="r1081 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#028720b5c7df755f" class="i property">LastAccessed</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="70e8a49d0fd945d8" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetHttpHeadersAsync</a>()
        {
            <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="k">var</a> <span id="r1082 rd" class="r1082 r">constants</span> = <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a>.<a href="Shared/TestConstants.cs.html#203c7c99dba2deba" class="i method">Create</a>(<a href="#6047b3fd44e291e9" class="k">this</a>);
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1083 rd" class="r1083 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1084 rd" class="r1084 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1083 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#6cdb754d8a522d97" class="t t">BlobInfo</a>&gt; <span id="r1085 rd" class="r1085 r">response</span> = <b>await</b> <span class="r1084 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#6ad86b0092dc826a" class="i method">SetHttpHeadersAsync</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#eff8cd4c216b756e" class="t constructor">BlobHttpHeaders</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#c18900924abae32f" class="i property">CacheControl</a> = <span class="r1082 r">constants</span>.<a href="Shared/TestConstants.cs.html#841dc2869d99070b" class="i property">CacheControl</a>,
                <a href="/Azure.Storage.Blobs/A.html#ea88665e95c0bc07" class="i property">ContentDisposition</a> = <span class="r1082 r">constants</span>.<a href="Shared/TestConstants.cs.html#261a494a02bcd13b" class="i property">ContentDisposition</a>,
                <a href="/Azure.Storage.Blobs/A.html#72c90263bf66e50c" class="i property">ContentEncoding</a> = <span class="r1082 r">constants</span>.<a href="Shared/TestConstants.cs.html#04342377f0c3354e" class="i property">ContentEncoding</a>,
                <a href="/Azure.Storage.Blobs/A.html#20d78041b7fc0531" class="i property">ContentLanguage</a> = <span class="r1082 r">constants</span>.<a href="Shared/TestConstants.cs.html#ba49dd23291a6b81" class="i property">ContentLanguage</a>,
                <a href="/Azure.Storage.Blobs/A.html#cd222ea957fd8819" class="i property">ContentHash</a> = <span class="r1082 r">constants</span>.<a href="Shared/TestConstants.cs.html#97b36e53abd065d1" class="i property">ContentMD5</a>,
                <a href="/Azure.Storage.Blobs/A.html#d29fc45d857f9449" class="i property">ContentType</a> = <span class="r1082 r">constants</span>.<a href="Shared/TestConstants.cs.html#dd1171f4053d0132" class="i property">ContentType</a>
            });
 
            <span class="c">// Assert</span>
 
            <span class="c">// Ensure that we grab the whole ETag value from the service without removing the quotes</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1085 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#f22c6583e9d9cac2" class="i property">ETag</a>.<a href="/Azure.Core/A.html#c02596ded366f933" class="i method">ToString</a>(), <span class="s">$&quot;</span>\&quot;{<span class="r1085 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#5cb5957443570b99" class="i property">ETag</a>}\&quot;<span class="s">&quot;</span>);
 
            <span class="c">// Ensure the values has been correctly set by doing a GetProperties call</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r1086 rd" class="r1086 r">propertiesResponse</span> = <b>await</b> <span class="r1084 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1082 r">constants</span>.<a href="Shared/TestConstants.cs.html#dd1171f4053d0132" class="i property">ContentType</a>, <span class="r1086 r">propertiesResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#c952029ff82e9e30" class="i property">ContentType</a>);
            <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#59794893533f4fba" class="i method">AssertSequenceEqual</a>(<span class="r1082 r">constants</span>.<a href="Shared/TestConstants.cs.html#97b36e53abd065d1" class="i property">ContentMD5</a>, <span class="r1086 r">propertiesResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#5243435ad4fc2277" class="i property">ContentHash</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1082 r">constants</span>.<a href="Shared/TestConstants.cs.html#04342377f0c3354e" class="i property">ContentEncoding</a>, <span class="r1086 r">propertiesResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#bfef89f6c0954a94" class="i property">ContentEncoding</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1082 r">constants</span>.<a href="Shared/TestConstants.cs.html#ba49dd23291a6b81" class="i property">ContentLanguage</a>, <span class="r1086 r">propertiesResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#f5c81497ba489659" class="i property">ContentLanguage</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1082 r">constants</span>.<a href="Shared/TestConstants.cs.html#261a494a02bcd13b" class="i property">ContentDisposition</a>, <span class="r1086 r">propertiesResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#9facc031d9308e6d" class="i property">ContentDisposition</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1082 r">constants</span>.<a href="Shared/TestConstants.cs.html#841dc2869d99070b" class="i property">CacheControl</a>, <span class="r1086 r">propertiesResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#d175ba9cb363e373" class="i property">CacheControl</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="cabc9ed4a66a0537" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetHttpHeadersAsync_MultipleHeaders</a>()
        {
            <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="k">var</a> <span id="r1087 rd" class="r1087 r">constants</span> = <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a>.<a href="Shared/TestConstants.cs.html#203c7c99dba2deba" class="i method">Create</a>(<a href="#6047b3fd44e291e9" class="k">this</a>);
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1088 rd" class="r1088 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1089 rd" class="r1089 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1088 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <span class="c">// Act</span>
            <b>await</b> <span class="r1089 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#6ad86b0092dc826a" class="i method">SetHttpHeadersAsync</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#eff8cd4c216b756e" class="t constructor">BlobHttpHeaders</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#72c90263bf66e50c" class="i property">ContentEncoding</a> = <span class="s">&quot;deflate,gzip&quot;</span>,
                <a href="/Azure.Storage.Blobs/A.html#20d78041b7fc0531" class="i property">ContentLanguage</a> = <span class="s">&quot;de-DE,en-CA&quot;</span>,
            });
 
            <span class="c">// Assert</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r1090 rd" class="r1090 r">response</span> = <b>await</b> <span class="r1089 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;deflate,gzip&quot;</span>, <span class="r1090 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#bfef89f6c0954a94" class="i property">ContentEncoding</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;de-DE,en-CA&quot;</span>, <span class="r1090 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#f5c81497ba489659" class="i property">ContentLanguage</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="df6ae7acd001263e" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetHttpHeadersAsync_AccessConditions</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1091 rd" class="r1091 r">garbageLeaseId</span> = <a href="BlobTestBase.cs.html#d39dc6fab7daaa70" class="i method">GetGarbageLeaseId</a>();
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r1092 rd" class="r1092 r">parameters</span> <b>in</b> <a href="#2a798157c01985c4" class="i property">AccessConditions_Data</a>)
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1093 rd" class="r1093 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
                <span class="c">// Arrange</span>
                <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1094 rd" class="r1094 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1093 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
                <span class="r1092 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r1094 r">blob</span>, <span class="r1092 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a>);
                <span class="r1092 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#af0faf1b7c1c85bd" class="i property">LeaseId</a> = <b>await</b> <a href="BlobTestBase.cs.html#2216a728843c891e" class="i method">SetupBlobLeaseCondition</a>(<span class="r1094 r">blob</span>, <span class="r1092 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#af0faf1b7c1c85bd" class="i property">LeaseId</a>, <span class="r1091 r">garbageLeaseId</span>);
                <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r1095 rd" class="r1095 r">accessConditions</span> = <a href="#47a1d944fb251ee5" class="i method">BuildAccessConditions</a>(
                    <span class="r482 r">parameters</span>: <span class="r1092 r">parameters</span>,
                    <span class="r490 r">lease</span>: <b>true</b>);
 
                <span class="c">// Act</span>
                <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#6cdb754d8a522d97" class="t t">BlobInfo</a>&gt; <span id="r1096 rd" class="r1096 r">response</span> = <b>await</b> <span class="r1094 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#6ad86b0092dc826a" class="i method">SetHttpHeadersAsync</a>(
                    <span class="r1097 r">httpHeaders</span>: <b>new</b> <a href="/Azure.Storage.Blobs/A.html#eff8cd4c216b756e" class="t constructor">BlobHttpHeaders</a>(),
                    <span class="r1098 r">conditions</span>: <span class="r1095 r">accessConditions</span>);
 
                <span class="c">// Assert</span>
                <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1096 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="58f9c4ca8375120a" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetHttpHeadersAsync_AccessConditionsFail</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1099 rd" class="r1099 r">garbageLeaseId</span> = <a href="BlobTestBase.cs.html#d39dc6fab7daaa70" class="i method">GetGarbageLeaseId</a>();
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r1100 rd" class="r1100 r">parameters</span> <b>in</b> <a href="#f06bf70b762b1860" class="i method">GetAccessConditionsFail_Data</a>(<span class="r1099 r">garbageLeaseId</span>))
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1101 rd" class="r1101 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
                <span class="c">// Arrange</span>
                <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1102 rd" class="r1102 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1101 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
                <span class="r1100 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r1102 r">blob</span>, <span class="r1100 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a>);
                <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r1103 rd" class="r1103 r">accessConditions</span> = <a href="#47a1d944fb251ee5" class="i method">BuildAccessConditions</a>(<span class="r1100 r">parameters</span>);
 
                <span class="c">// Act</span>
                <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                    <span class="r1102 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#6ad86b0092dc826a" class="i method">SetHttpHeadersAsync</a>(
                        <span class="r1097 r">httpHeaders</span>: <b>new</b> <a href="/Azure.Storage.Blobs/A.html#eff8cd4c216b756e" class="t constructor">BlobHttpHeaders</a>(),
                        <span class="r1098 r">conditions</span>: <span class="r1103 r">accessConditions</span>),
                    <span id="r1104 rd" class="r1104 r">e</span> =&gt; { });
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="24d9316dffe65651" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetHttpHeadersAsync_IfTags</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1105 rd" class="r1105 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1106 rd" class="r1106 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1105 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1107 rd" class="r1107 r">tags</span> = <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;
            {
                { <span class="s">&quot;coolTag&quot;</span>, <span class="s">&quot;true&quot;</span> }
            };
            <b>await</b> <span class="r1106 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r1107 r">tags</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r1108 rd" class="r1108 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
            };
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#6cdb754d8a522d97" class="t t">BlobInfo</a>&gt; <span id="r1109 rd" class="r1109 r">response</span> = <b>await</b> <span class="r1106 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#6ad86b0092dc826a" class="i method">SetHttpHeadersAsync</a>(
                <b>new</b> <a href="/Azure.Storage.Blobs/A.html#eff8cd4c216b756e" class="t constructor">BlobHttpHeaders</a>
                {
                    <a href="/Azure.Storage.Blobs/A.html#72c90263bf66e50c" class="i property">ContentEncoding</a> = <span class="s">&quot;deflate, gzip&quot;</span>,
                    <a href="/Azure.Storage.Blobs/A.html#20d78041b7fc0531" class="i property">ContentLanguage</a> = <span class="s">&quot;de-DE, en-CA&quot;</span>,
                },
                <span class="r1098 r">conditions</span>: <span class="r1108 r">conditions</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="000a2de731acd2db" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetHttpHeadersAsync_IfTags_Failed</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1110 rd" class="r1110 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1111 rd" class="r1111 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1110 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r1112 rd" class="r1112 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
            };
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1111 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#6ad86b0092dc826a" class="i method">SetHttpHeadersAsync</a>(
                    <b>new</b> <a href="/Azure.Storage.Blobs/A.html#eff8cd4c216b756e" class="t constructor">BlobHttpHeaders</a>
                    {
                        <a href="/Azure.Storage.Blobs/A.html#72c90263bf66e50c" class="i property">ContentEncoding</a> = <span class="s">&quot;deflate, gzip&quot;</span>,
                        <a href="/Azure.Storage.Blobs/A.html#20d78041b7fc0531" class="i property">ContentLanguage</a> = <span class="s">&quot;de-DE, en-CA&quot;</span>,
                    },
                    <span class="r1098 r">conditions</span>: <span class="r1112 r">conditions</span>),
                <span id="r1113 rd" class="r1113 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;ConditionNotMet&quot;</span>, <span class="r1113 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="a7a5e931250235d1" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetHttpHeadersAsync_Error</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1114 rd" class="r1114 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r1115 rd" class="r1115 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1114 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1115 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#6ad86b0092dc826a" class="i method">SetHttpHeadersAsync</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#eff8cd4c216b756e" class="t constructor">BlobHttpHeaders</a>()),
                <span id="r1116 rd" class="r1116 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;BlobNotFound&quot;</span>, <span class="r1116 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="192b0b8dfbc5e200" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetMetadataAsync</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1117 rd" class="r1117 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1118 rd" class="r1118 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1117 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1119 rd" class="r1119 r">metadata</span> = <a href="Shared/StorageTestBase.cs.html#9bbe73e9e1c28539" class="i method">BuildMetadata</a>();
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#6cdb754d8a522d97" class="t t">BlobInfo</a>&gt; <span id="r1120 rd" class="r1120 r">response</span> = <b>await</b> <span class="r1118 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#58dcaf1e6f66d2b3" class="i method">SetMetadataAsync</a>(<span class="r1119 r">metadata</span>);
 
            <span class="c">// Assert</span>
 
            <span class="c">// Ensure that we grab the whole ETag value from the service without removing the quotes</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1120 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#f22c6583e9d9cac2" class="i property">ETag</a>.<a href="/Azure.Core/A.html#c02596ded366f933" class="i method">ToString</a>(), <span class="s">$&quot;</span>\&quot;{<span class="r1120 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#5cb5957443570b99" class="i property">ETag</a>}\&quot;<span class="s">&quot;</span>);
 
            <span class="c">// Ensure the value has been correctly set by doing a GetProperties call</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r1121 rd" class="r1121 r">getPropertiesResponse</span> = <b>await</b> <span class="r1118 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
            <a href="Shared/StorageTestBase.cs.html#d0a7dd4c7ffda95e" class="i method">AssertDictionaryEquality</a>(<span class="r1119 r">metadata</span>, <span class="r1121 r">getPropertiesResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#27d37e820e0d05ba" class="i property">Metadata</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="106b776c223a3c98" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetMetadataAsync_VersionId</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1122 rd" class="r1122 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1123 rd" class="r1123 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1122 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1124 rd" class="r1124 r">metadata</span> = <a href="Shared/StorageTestBase.cs.html#9bbe73e9e1c28539" class="i method">BuildMetadata</a>();
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#6cdb754d8a522d97" class="t t">BlobInfo</a>&gt; <span id="r1125 rd" class="r1125 r">response</span> = <b>await</b> <span class="r1123 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#58dcaf1e6f66d2b3" class="i method">SetMetadataAsync</a>(<span class="r1124 r">metadata</span>);
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1125 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#af9fa0c54a2fe595" class="i property">VersionId</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="2ebf323f25b4b506" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetMetadataAsync_CPK</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1126 rd" class="r1126 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#ab2a0e921078c272" class="t t">AppendBlobClient</a> <span id="r1127 rd" class="r1127 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1126 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9b1458a6a968c4e1" class="i method">GetAppendBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Storage.Blobs/A.html#f11bcd56fc9ad22a" class="t t">CustomerProvidedKey</a> <span id="r1128 rd" class="r1128 r">customerProvidedKey</span> = <a href="BlobTestBase.cs.html#b481ac8680ce4d57" class="i method">GetCustomerProvidedKey</a>();
            <span class="r1127 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1127 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#8e1bd03b8af7ac88" class="i method">WithCustomerProvidedKey</a>(<span class="r1128 r">customerProvidedKey</span>));
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1129 rd" class="r1129 r">metadata</span> = <a href="Shared/StorageTestBase.cs.html#9bbe73e9e1c28539" class="i method">BuildMetadata</a>();
            <b>await</b> <span class="r1127 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#515fedd76dafac5e" class="i method">CreateIfNotExistsAsync</a>();
 
            <span class="c">// Act</span>
            <b>await</b> <span class="r1127 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#58dcaf1e6f66d2b3" class="i method">SetMetadataAsync</a>(<span class="r1129 r">metadata</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#6de5212dacb3a5ca" class="i field">V2019_07_07</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="f117d4fbcf2d16d0" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetMetadataAsync_EncryptionScope</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1130 rd" class="r1130 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#ab2a0e921078c272" class="t t">AppendBlobClient</a> <span id="r1131 rd" class="r1131 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1130 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9b1458a6a968c4e1" class="i method">GetAppendBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <span class="r1131 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1131 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#b9c9227fdf0ffb60" class="i method">WithEncryptionScope</a>(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#0234405d8d5e089b" class="i property">EncryptionScope</a>));
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1132 rd" class="r1132 r">metadata</span> = <a href="Shared/StorageTestBase.cs.html#9bbe73e9e1c28539" class="i method">BuildMetadata</a>();
            <b>await</b> <span class="r1131 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#515fedd76dafac5e" class="i method">CreateIfNotExistsAsync</a>();
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#6cdb754d8a522d97" class="t t">BlobInfo</a>&gt; <span id="r1133 rd" class="r1133 r">response</span> = <b>await</b> <span class="r1131 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#58dcaf1e6f66d2b3" class="i method">SetMetadataAsync</a>(<span class="r1132 r">metadata</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="a3b5789b65625d57" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetMetadataAsync_AccessConditions</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1134 rd" class="r1134 r">garbageLeaseId</span> = <a href="BlobTestBase.cs.html#d39dc6fab7daaa70" class="i method">GetGarbageLeaseId</a>();
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r1135 rd" class="r1135 r">parameters</span> <b>in</b> <a href="#2a798157c01985c4" class="i property">AccessConditions_Data</a>)
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1136 rd" class="r1136 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
                <span class="c">// Arrange</span>
                <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1137 rd" class="r1137 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1136 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
                <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1138 rd" class="r1138 r">metadata</span> = <a href="Shared/StorageTestBase.cs.html#9bbe73e9e1c28539" class="i method">BuildMetadata</a>();
 
                <span class="r1135 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r1137 r">blob</span>, <span class="r1135 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a>);
                <span class="r1135 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#af0faf1b7c1c85bd" class="i property">LeaseId</a> = <b>await</b> <a href="BlobTestBase.cs.html#2216a728843c891e" class="i method">SetupBlobLeaseCondition</a>(<span class="r1137 r">blob</span>, <span class="r1135 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#af0faf1b7c1c85bd" class="i property">LeaseId</a>, <span class="r1134 r">garbageLeaseId</span>);
                <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r1139 rd" class="r1139 r">accessConditions</span> = <a href="#47a1d944fb251ee5" class="i method">BuildAccessConditions</a>(
                    <span class="r482 r">parameters</span>: <span class="r1135 r">parameters</span>,
                    <span class="r490 r">lease</span>: <b>true</b>);
 
                <span class="c">// Act</span>
                <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#6cdb754d8a522d97" class="t t">BlobInfo</a>&gt; <span id="r1140 rd" class="r1140 r">response</span> = <b>await</b> <span class="r1137 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#58dcaf1e6f66d2b3" class="i method">SetMetadataAsync</a>(
                    <span class="r1141 r">metadata</span>: <span class="r1138 r">metadata</span>,
                    <span class="r1142 r">conditions</span>: <span class="r1139 r">accessConditions</span>);
 
                <span class="c">// Assert</span>
                <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1140 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="3369e2b4c4251c22" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetMetadataAsync_AccessConditionsFail</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1143 rd" class="r1143 r">garbageLeaseId</span> = <a href="BlobTestBase.cs.html#d39dc6fab7daaa70" class="i method">GetGarbageLeaseId</a>();
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r1144 rd" class="r1144 r">parameters</span> <b>in</b> <a href="#f06bf70b762b1860" class="i method">GetAccessConditionsFail_Data</a>(<span class="r1143 r">garbageLeaseId</span>))
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1145 rd" class="r1145 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
                <span class="c">// Arrange</span>
                <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1146 rd" class="r1146 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1145 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
                <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1147 rd" class="r1147 r">metadata</span> = <a href="Shared/StorageTestBase.cs.html#9bbe73e9e1c28539" class="i method">BuildMetadata</a>();
 
                <span class="r1144 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r1146 r">blob</span>, <span class="r1144 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a>);
                <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r1148 rd" class="r1148 r">accessConditions</span> = <a href="#47a1d944fb251ee5" class="i method">BuildAccessConditions</a>(<span class="r1144 r">parameters</span>);
 
                <span class="c">// Act</span>
                <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                    <span class="r1146 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#58dcaf1e6f66d2b3" class="i method">SetMetadataAsync</a>(
                        <span class="r1141 r">metadata</span>: <span class="r1147 r">metadata</span>,
                        <span class="r1142 r">conditions</span>: <span class="r1148 r">accessConditions</span>),
                    <span id="r1149 rd" class="r1149 r">e</span> =&gt; { });
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="ef5d0587c004f888" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetMetadataAsync_IfTags</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1150 rd" class="r1150 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1151 rd" class="r1151 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1150 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1152 rd" class="r1152 r">tags</span> = <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;
            {
                { <span class="s">&quot;coolTag&quot;</span>, <span class="s">&quot;true&quot;</span> }
            };
            <b>await</b> <span class="r1151 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r1152 r">tags</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r1153 rd" class="r1153 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
            };
 
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1154 rd" class="r1154 r">metadata</span> = <a href="Shared/StorageTestBase.cs.html#9bbe73e9e1c28539" class="i method">BuildMetadata</a>();
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#6cdb754d8a522d97" class="t t">BlobInfo</a>&gt; <span id="r1155 rd" class="r1155 r">response</span> = <b>await</b> <span class="r1151 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#58dcaf1e6f66d2b3" class="i method">SetMetadataAsync</a>(
                <span class="r1141 r">metadata</span>: <span class="r1154 r">metadata</span>,
                <span class="r1142 r">conditions</span>: <span class="r1153 r">conditions</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="bd229258ceb468e1" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetMetadataAsync_IfTags_Failed</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1156 rd" class="r1156 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1157 rd" class="r1157 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1156 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r1158 rd" class="r1158 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
            };
 
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1159 rd" class="r1159 r">metadata</span> = <a href="Shared/StorageTestBase.cs.html#9bbe73e9e1c28539" class="i method">BuildMetadata</a>();
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1157 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#58dcaf1e6f66d2b3" class="i method">SetMetadataAsync</a>(
                    <span class="r1141 r">metadata</span>: <span class="r1159 r">metadata</span>,
                    <span class="r1142 r">conditions</span>: <span class="r1158 r">conditions</span>),
                <span id="r1160 rd" class="r1160 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;ConditionNotMet&quot;</span>, <span class="r1160 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="48fda47549ddd68a" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetMetadataAsync_Error</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1161 rd" class="r1161 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r1162 rd" class="r1162 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1161 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="@0@mscorlib/A.html#20343df0c96b629b" class="t t">IDictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1163 rd" class="r1163 r">metadata</span> = <a href="Shared/StorageTestBase.cs.html#9bbe73e9e1c28539" class="i method">BuildMetadata</a>();
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1162 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#58dcaf1e6f66d2b3" class="i method">SetMetadataAsync</a>(<span class="r1163 r">metadata</span>),
                <span id="r1164 rd" class="r1164 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;BlobNotFound&quot;</span>, <span class="r1164 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="4f2be64e6bc7a28b" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CreateSnapshotAsync</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1165 rd" class="r1165 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1166 rd" class="r1166 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1165 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#f34089dd356582b9" class="t t">BlobSnapshotInfo</a>&gt; <span id="r1167 rd" class="r1167 r">response</span> = <b>await</b> <span class="r1166 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#884dd1969092f87b" class="i method">CreateSnapshotAsync</a>();
 
            <span class="c">// Assert</span>
 
            <span class="c">// Ensure that we grab the whole ETag value from the service without removing the quotes</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1167 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#43171ea86b5bcadc" class="i property">ETag</a>.<a href="/Azure.Core/A.html#c02596ded366f933" class="i method">ToString</a>(), <span class="s">$&quot;</span>\&quot;{<span class="r1167 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#5cb5957443570b99" class="i property">ETag</a>}\&quot;<span class="s">&quot;</span>);
 
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1167 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="3b3325bada072fb1" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CreateSnapshotAsync_CPK</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1168 rd" class="r1168 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#ab2a0e921078c272" class="t t">AppendBlobClient</a> <span id="r1169 rd" class="r1169 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1168 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9b1458a6a968c4e1" class="i method">GetAppendBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Storage.Blobs/A.html#f11bcd56fc9ad22a" class="t t">CustomerProvidedKey</a> <span id="r1170 rd" class="r1170 r">customerProvidedKey</span> = <a href="BlobTestBase.cs.html#b481ac8680ce4d57" class="i method">GetCustomerProvidedKey</a>();
            <span class="r1169 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1169 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#8e1bd03b8af7ac88" class="i method">WithCustomerProvidedKey</a>(<span class="r1170 r">customerProvidedKey</span>));
            <b>await</b> <span class="r1169 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#515fedd76dafac5e" class="i method">CreateIfNotExistsAsync</a>();
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#f34089dd356582b9" class="t t">BlobSnapshotInfo</a>&gt; <span id="r1171 rd" class="r1171 r">response</span> = <b>await</b> <span class="r1169 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#884dd1969092f87b" class="i method">CreateSnapshotAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1171 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#6de5212dacb3a5ca" class="i field">V2019_07_07</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="a191ef7eb37f276f" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CreateSnapshotAsync_EncryptionScope</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1172 rd" class="r1172 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#ab2a0e921078c272" class="t t">AppendBlobClient</a> <span id="r1173 rd" class="r1173 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1172 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9b1458a6a968c4e1" class="i method">GetAppendBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <span class="r1173 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1173 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#b9c9227fdf0ffb60" class="i method">WithEncryptionScope</a>(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#0234405d8d5e089b" class="i property">EncryptionScope</a>));
            <b>await</b> <span class="r1173 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#515fedd76dafac5e" class="i method">CreateIfNotExistsAsync</a>();
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#f34089dd356582b9" class="t t">BlobSnapshotInfo</a>&gt; <span id="r1174 rd" class="r1174 r">response</span> = <b>await</b> <span class="r1173 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#884dd1969092f87b" class="i method">CreateSnapshotAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1174 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="d7b92507c68e82ed" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CreateSnapshotAsync_AccessConditions</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1175 rd" class="r1175 r">garbageLeaseId</span> = <a href="BlobTestBase.cs.html#d39dc6fab7daaa70" class="i method">GetGarbageLeaseId</a>();
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r1176 rd" class="r1176 r">parameters</span> <b>in</b> <a href="#2a798157c01985c4" class="i property">AccessConditions_Data</a>)
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1177 rd" class="r1177 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
                <span class="c">// Arrange</span>
                <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1178 rd" class="r1178 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1177 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
                <span class="r1176 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r1178 r">blob</span>, <span class="r1176 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a>);
                <span class="r1176 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#af0faf1b7c1c85bd" class="i property">LeaseId</a> = <b>await</b> <a href="BlobTestBase.cs.html#2216a728843c891e" class="i method">SetupBlobLeaseCondition</a>(<span class="r1178 r">blob</span>, <span class="r1176 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#af0faf1b7c1c85bd" class="i property">LeaseId</a>, <span class="r1175 r">garbageLeaseId</span>);
                <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r1179 rd" class="r1179 r">accessConditions</span> = <a href="#47a1d944fb251ee5" class="i method">BuildAccessConditions</a>(
                    <span class="r482 r">parameters</span>: <span class="r1176 r">parameters</span>,
                    <span class="r490 r">lease</span>: <b>true</b>);
 
                <span class="c">// Act</span>
                <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#f34089dd356582b9" class="t t">BlobSnapshotInfo</a>&gt; <span id="r1180 rd" class="r1180 r">response</span> = <b>await</b> <span class="r1178 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#884dd1969092f87b" class="i method">CreateSnapshotAsync</a>(<span class="r1181 r">conditions</span>: <span class="r1179 r">accessConditions</span>);
 
                <span class="c">// Assert</span>
                <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1180 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="1697f06c6f6dd0e9" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CreateSnapshotAsync_AccessConditionsFail</a>()
        {
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1182 rd" class="r1182 r">garbageLeaseId</span> = <a href="BlobTestBase.cs.html#d39dc6fab7daaa70" class="i method">GetGarbageLeaseId</a>();
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r1183 rd" class="r1183 r">parameters</span> <b>in</b> <a href="#f06bf70b762b1860" class="i method">GetAccessConditionsFail_Data</a>(<span class="r1182 r">garbageLeaseId</span>))
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1184 rd" class="r1184 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
                <span class="c">// Arrange</span>
                <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1185 rd" class="r1185 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1184 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
                <span class="r1183 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r1185 r">blob</span>, <span class="r1183 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a>);
                <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r1186 rd" class="r1186 r">accessConditions</span> = <a href="#47a1d944fb251ee5" class="i method">BuildAccessConditions</a>(<span class="r1183 r">parameters</span>);
 
                <span class="c">// Act</span>
                <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                    <span class="r1185 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#884dd1969092f87b" class="i method">CreateSnapshotAsync</a>(<span class="r1181 r">conditions</span>: <span class="r1186 r">accessConditions</span>),
                    <span id="r1187 rd" class="r1187 r">e</span> =&gt; { });
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="cf3b4d99a155219b" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CreateSnapshotAsync_IfTags</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1188 rd" class="r1188 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1189 rd" class="r1189 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1188 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1190 rd" class="r1190 r">tags</span> = <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;
            {
                { <span class="s">&quot;coolTag&quot;</span>, <span class="s">&quot;true&quot;</span> }
            };
            <b>await</b> <span class="r1189 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r1190 r">tags</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r1191 rd" class="r1191 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
            };
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#f34089dd356582b9" class="t t">BlobSnapshotInfo</a>&gt; <span id="r1192 rd" class="r1192 r">response</span> = <b>await</b> <span class="r1189 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#884dd1969092f87b" class="i method">CreateSnapshotAsync</a>(<span class="r1181 r">conditions</span>: <span class="r1191 r">conditions</span>);
 
            <span class="c">// Assert</span>
            <b>bool</b> <span id="r1193 rd" class="r1193 r">exists</span> = <b>await</b> <span class="r1189 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#e456724c864c2308" class="i method">WithSnapshot</a>(<span class="r1192 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#6de85189f89b695f" class="i property">Snapshot</a>).<a href="/Azure.Storage.Blobs/A.html#9018aed3946a06b2" class="i method">ExistsAsync</a>();
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r1193 r">exists</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="819c0138a740abdd" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CreateSnapshotAsync_IfTags_Failed</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1194 rd" class="r1194 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1195 rd" class="r1195 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1194 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r1196 rd" class="r1196 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
            };
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1195 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#884dd1969092f87b" class="i method">CreateSnapshotAsync</a>(<span class="r1181 r">conditions</span>: <span class="r1196 r">conditions</span>),
                <span id="r1197 rd" class="r1197 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;ConditionNotMet&quot;</span>, <span class="r1197 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="9fa043f7a633c191" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CreateSnapshotAsync_Error</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1198 rd" class="r1198 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r1199 rd" class="r1199 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1198 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1199 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#884dd1969092f87b" class="i method">CreateSnapshotAsync</a>(),
                <span id="r1200 rd" class="r1200 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;BlobNotFound&quot;</span>, <span class="r1200 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="bb4c755e7b82ef55" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CreateSnapshotAsync_Version</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1201 rd" class="r1201 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1202 rd" class="r1202 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1201 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#f34089dd356582b9" class="t t">BlobSnapshotInfo</a>&gt; <span id="r1203 rd" class="r1203 r">response</span> = <b>await</b> <span class="r1202 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#884dd1969092f87b" class="i method">CreateSnapshotAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1203 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#a22562255bc646b2" class="i property">VersionId</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="74d1ade8b6d05787" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">AcquireLeaseAsync</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1204 rd" class="r1204 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1205 rd" class="r1205 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1204 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1206 rd" class="r1206 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r1207 rd" class="r1207 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
            <a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="k">var</a> <span id="r1208 rd" class="r1208 r">leaseClient</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1205 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1206 r">leaseId</span>));
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#91e6307d565054a8" class="t t">BlobLease</a>&gt; <span id="r1209 rd" class="r1209 r">response</span> = <b>await</b> <span class="r1208 r">leaseClient</span>.<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(<span class="r1207 r">duration</span>);
 
            <span class="c">// Assert</span>
            <span class="c">// Ensure that we grab the whole ETag value from the service without removing the quotes</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1209 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#c0d132bd7431733d" class="i property">ETag</a>.<a href="/Azure.Core/A.html#c02596ded366f933" class="i method">ToString</a>(), <span class="s">$&quot;</span>\&quot;{<span class="r1209 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#5cb5957443570b99" class="i property">ETag</a>}\&quot;<span class="s">&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1209 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1209 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#a71ab31c3576ef9f" class="i property">LeaseId</a>, <span class="r1208 r">leaseClient</span>.<a href="/Azure.Storage.Blobs/A.html#087613384db92b69" class="i property">LeaseId</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="cddc0ddc63fc9e95" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">AcquireLeaseAsync_AccessConditions</a>()
        {
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r1210 rd" class="r1210 r">parameters</span> <b>in</b> <a href="#94c281f351d174da" class="i property">NoLease_AccessConditions_Data</a>)
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1211 rd" class="r1211 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
                <span class="c">// Arrange</span>
                <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1212 rd" class="r1212 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1211 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1213 rd" class="r1213 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
                <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r1214 rd" class="r1214 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
 
                <span class="r1210 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r1212 r">blob</span>, <span class="r1210 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a>);
                <a href="/Azure.Core/A.html#b798d4499ab9e5ea" class="t t">RequestConditions</a> <span id="r1215 rd" class="r1215 r">accessConditions</span> = <a href="#542bf1557de0101a" class="i method">BuildRequestConditions</a>(
                    <span class="r1216 r">parameters</span>: <span class="r1210 r">parameters</span>);
 
                <span class="c">// Act</span>
                <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#91e6307d565054a8" class="t t">BlobLease</a>&gt; <span id="r1217 rd" class="r1217 r">response</span> = <b>await</b> <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1212 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1213 r">leaseId</span>)).<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(
                    <span class="r1218 r">duration</span>: <span class="r1214 r">duration</span>,
                    <span class="r1219 r">conditions</span>: <span class="r1215 r">accessConditions</span>);
 
                <span class="c">// Assert</span>
                <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1217 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="c81d6959c5560787" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">AcquireLeaseAsync_AccessConditionsFail</a>()
        {
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r1220 rd" class="r1220 r">parameters</span> <b>in</b> <a href="#cd39d61d30a86c0a" class="i property">NoLease_AccessConditionsFail_Data</a>)
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1221 rd" class="r1221 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
                <span class="c">// Arrange</span>
                <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1222 rd" class="r1222 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1221 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1223 rd" class="r1223 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
                <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r1224 rd" class="r1224 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
 
                <span class="r1220 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r1222 r">blob</span>, <span class="r1220 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a>);
                <a href="/Azure.Core/A.html#b798d4499ab9e5ea" class="t t">RequestConditions</a> <span id="r1225 rd" class="r1225 r">accessConditions</span> = <a href="#542bf1557de0101a" class="i method">BuildRequestConditions</a>(<span class="r1220 r">parameters</span>);
 
                <span class="c">// Act</span>
                <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                    <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1222 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1223 r">leaseId</span>)).<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(
                        <span class="r1218 r">duration</span>: <span class="r1224 r">duration</span>,
                        <span class="r1219 r">conditions</span>: <span class="r1225 r">accessConditions</span>),
                    <span id="r1226 rd" class="r1226 r">e</span> =&gt; { });
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="ff27805905aac965" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">AcquireLeaseAsync_IfTags</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1227 rd" class="r1227 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1228 rd" class="r1228 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1227 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1229 rd" class="r1229 r">tags</span> = <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;
            {
                { <span class="s">&quot;coolTag&quot;</span>, <span class="s">&quot;true&quot;</span> }
            };
 
            <b>await</b> <span class="r1228 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r1229 r">tags</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#419bdad1aa375066" class="t t">BlobLeaseRequestConditions</a> <span id="r1230 rd" class="r1230 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#50b61a1e35973e2d" class="t constructor">BlobLeaseRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
            };
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1231 rd" class="r1231 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r1232 rd" class="r1232 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
 
            <span class="c">// Act</span>
            <b>await</b> <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1228 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1231 r">leaseId</span>)).<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(
                <span class="r1232 r">duration</span>,
                <span class="r1219 r">conditions</span>: <span class="r1230 r">conditions</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="e88855a58c2a2025" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">AcquireLeaseAsync_IfTagsFailed</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1233 rd" class="r1233 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1234 rd" class="r1234 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1233 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1235 rd" class="r1235 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r1236 rd" class="r1236 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
 
            <a href="/Azure.Storage.Blobs/A.html#419bdad1aa375066" class="t t">BlobLeaseRequestConditions</a> <span id="r1237 rd" class="r1237 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#50b61a1e35973e2d" class="t constructor">BlobLeaseRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
            };
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1234 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1235 r">leaseId</span>)).<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(
                    <span class="r1236 r">duration</span>,
                    <span class="r1219 r">conditions</span>: <span class="r1237 r">conditions</span>),
                <span id="r1238 rd" class="r1238 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;ConditionNotMet&quot;</span>, <span class="r1238 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="8ee074e9173751f0" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">AcquireLeaseAsync_Error</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1239 rd" class="r1239 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r1240 rd" class="r1240 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1239 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1241 rd" class="r1241 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r1242 rd" class="r1242 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1240 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1241 r">leaseId</span>)).<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(<span class="r1242 r">duration</span>),
                <span id="r1243 rd" class="r1243 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;BlobNotFound&quot;</span>, <span class="r1243 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="7d7d5651c85bf942" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">AcquireLeaseAsync_ExtendedExceptionMessage</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1244 rd" class="r1244 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1245 rd" class="r1245 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1244 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1246 rd" class="r1246 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a> <span id="r1247 rd" class="r1247 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(10);
            <a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="t t">BlobLeaseClient</a> <span id="r1248 rd" class="r1248 r">blobLeaseClient</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1245 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1246 r">leaseId</span>));
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1248 r">blobLeaseClient</span>.<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(<span class="r1247 r">duration</span>),
                <span id="r1249 rd" class="r1249 r">e</span> =&gt;
                {
                    <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#e0d947616d6aba70" class="t t">BlobErrorCode</a>.<a href="/Azure.Storage.Blobs/A.html#c0f0cc85b2567211" class="i property">InvalidHeaderValue</a>.<a href="/Azure.Storage.Blobs/A.html#956fff1c6f30e077" class="i method">ToString</a>(), <span class="r1249 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>);
                    <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r1249 r">e</span>.<a href="@0@mscorlib/A.html#5fba0e16215b42a3" class="i property">Message</a>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<span class="s">$&quot;</span><span class="s">Additional Information:</span>{<a href="@0@mscorlib/A.html#7d2f1469d916fc63" class="t t">Environment</a>.<a href="@0@mscorlib/A.html#63a04833d43dd9d3" class="i property">NewLine</a>}<span class="s">HeaderName: x-ms-lease-duration</span>{<a href="@0@mscorlib/A.html#7d2f1469d916fc63" class="t t">Environment</a>.<a href="@0@mscorlib/A.html#63a04833d43dd9d3" class="i property">NewLine</a>}<span class="s">HeaderValue: 10</span><span class="s">&quot;</span>));
                });
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="3769e52d8fe1bff5" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">RenewLeaseAsync</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1250 rd" class="r1250 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1251 rd" class="r1251 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1250 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1252 rd" class="r1252 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r1253 rd" class="r1253 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
 
            <a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="t t">BlobLeaseClient</a> <span id="r1254 rd" class="r1254 r">lease</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1251 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1252 r">leaseId</span>));
            <b>await</b> <span class="r1254 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(<span class="r1253 r">duration</span>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#91e6307d565054a8" class="t t">BlobLease</a>&gt; <span id="r1255 rd" class="r1255 r">response</span> = <b>await</b> <span class="r1254 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#522076cb9ea83527" class="i method">RenewAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1255 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1255 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#a71ab31c3576ef9f" class="i property">LeaseId</a>, <span class="r1254 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#087613384db92b69" class="i property">LeaseId</a>);
 
            <span class="c">// Ensure that we grab the whole ETag value from the service without removing the quotes</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1255 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#c0d132bd7431733d" class="i property">ETag</a>.<a href="/Azure.Core/A.html#c02596ded366f933" class="i method">ToString</a>(), <span class="s">$&quot;</span>\&quot;{<span class="r1255 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#5cb5957443570b99" class="i property">ETag</a>}\&quot;<span class="s">&quot;</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="757365310a9e75db" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">RenewLeaseAsync_AccessConditions</a>()
        {
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r1256 rd" class="r1256 r">parameters</span> <b>in</b> <a href="#94c281f351d174da" class="i property">NoLease_AccessConditions_Data</a>)
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1257 rd" class="r1257 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
                <span class="c">// Arrange</span>
                <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1258 rd" class="r1258 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1257 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1259 rd" class="r1259 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
                <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r1260 rd" class="r1260 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
 
                <span class="r1256 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r1258 r">blob</span>, <span class="r1256 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a>);
                <a href="/Azure.Core/A.html#b798d4499ab9e5ea" class="t t">RequestConditions</a> <span id="r1261 rd" class="r1261 r">accessConditions</span> = <a href="#542bf1557de0101a" class="i method">BuildRequestConditions</a>(
                    <span class="r1216 r">parameters</span>: <span class="r1256 r">parameters</span>);
 
                <a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="t t">BlobLeaseClient</a> <span id="r1262 rd" class="r1262 r">lease</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1258 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1259 r">leaseId</span>));
                <b>await</b> <span class="r1262 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(<span class="r1218 r">duration</span>: <span class="r1260 r">duration</span>);
 
                <span class="c">// Act</span>
                <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#91e6307d565054a8" class="t t">BlobLease</a>&gt; <span id="r1263 rd" class="r1263 r">response</span> = <b>await</b> <span class="r1262 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#522076cb9ea83527" class="i method">RenewAsync</a>(<span class="r1264 r">conditions</span>: <span class="r1261 r">accessConditions</span>);
 
                <span class="c">// Assert</span>
                <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1263 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="79562336d0f4fb64" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">RenewLeaseAsync_AccessConditionsFail</a>()
        {
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r1265 rd" class="r1265 r">parameters</span> <b>in</b> <a href="#cd39d61d30a86c0a" class="i property">NoLease_AccessConditionsFail_Data</a>)
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1266 rd" class="r1266 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
                <span class="c">// Arrange</span>
                <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1267 rd" class="r1267 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1266 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1268 rd" class="r1268 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
                <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r1269 rd" class="r1269 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
 
                <span class="r1265 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r1267 r">blob</span>, <span class="r1265 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a>);
                <a href="/Azure.Core/A.html#b798d4499ab9e5ea" class="t t">RequestConditions</a> <span id="r1270 rd" class="r1270 r">accessConditions</span> = <a href="#542bf1557de0101a" class="i method">BuildRequestConditions</a>(<span class="r1265 r">parameters</span>);
 
                <a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="t t">BlobLeaseClient</a> <span id="r1271 rd" class="r1271 r">lease</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1267 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1268 r">leaseId</span>));
                <b>await</b> <span class="r1271 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(<span class="r1218 r">duration</span>: <span class="r1269 r">duration</span>);
 
                <span class="c">// Act</span>
                <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                    <span class="r1271 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#522076cb9ea83527" class="i method">RenewAsync</a>(<span class="r1264 r">conditions</span>: <span class="r1270 r">accessConditions</span>),
                    <span id="r1272 rd" class="r1272 r">e</span> =&gt; { });
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="89fae4e5545b20b4" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">RenewLeaseAsync_IfTags</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1273 rd" class="r1273 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1274 rd" class="r1274 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1273 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1275 rd" class="r1275 r">tags</span> = <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;
            {
                { <span class="s">&quot;coolTag&quot;</span>, <span class="s">&quot;true&quot;</span> }
            };
 
            <b>await</b> <span class="r1274 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r1275 r">tags</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#419bdad1aa375066" class="t t">BlobLeaseRequestConditions</a> <span id="r1276 rd" class="r1276 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#50b61a1e35973e2d" class="t constructor">BlobLeaseRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
            };
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1277 rd" class="r1277 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r1278 rd" class="r1278 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
 
            <a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="t t">BlobLeaseClient</a> <span id="r1279 rd" class="r1279 r">lease</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1274 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1277 r">leaseId</span>));
            <b>await</b> <span class="r1279 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(<span class="r1278 r">duration</span>);
 
            <span class="c">// Act</span>
            <b>await</b> <span class="r1279 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#522076cb9ea83527" class="i method">RenewAsync</a>(<span class="r1264 r">conditions</span>: <span class="r1276 r">conditions</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="a1241ae516a89a1c" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">RenewLeaseAsync_IfTagsFailed</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1280 rd" class="r1280 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1281 rd" class="r1281 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1280 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#419bdad1aa375066" class="t t">BlobLeaseRequestConditions</a> <span id="r1282 rd" class="r1282 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#50b61a1e35973e2d" class="t constructor">BlobLeaseRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
            };
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1283 rd" class="r1283 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r1284 rd" class="r1284 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
 
            <a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="t t">BlobLeaseClient</a> <span id="r1285 rd" class="r1285 r">lease</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1281 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1283 r">leaseId</span>));
            <b>await</b> <span class="r1285 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(<span class="r1284 r">duration</span>);
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1285 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#522076cb9ea83527" class="i method">RenewAsync</a>(<span class="r1264 r">conditions</span>: <span class="r1282 r">conditions</span>),
                <span id="r1286 rd" class="r1286 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;ConditionNotMet&quot;</span>, <span class="r1286 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="510d2fb8ac47af76" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">RenewLeaseAsync_Error</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1287 rd" class="r1287 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r1288 rd" class="r1288 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1287 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1289 rd" class="r1289 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1288 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1289 r">leaseId</span>)).<a href="/Azure.Storage.Blobs/A.html#3acd57bb1880b17e" class="i method">ReleaseAsync</a>(),
                <span id="r1290 rd" class="r1290 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;BlobNotFound&quot;</span>, <span class="r1290 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="2c246296851298fb" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ReleaseLeaseAsync</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1291 rd" class="r1291 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1292 rd" class="r1292 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1291 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1293 rd" class="r1293 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r1294 rd" class="r1294 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
 
            <a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="t t">BlobLeaseClient</a> <span id="r1295 rd" class="r1295 r">lease</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1292 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1293 r">leaseId</span>));
            <b>await</b> <span class="r1295 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(<span class="r1294 r">duration</span>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#96ff29a24be380d4" class="t t">ReleasedObjectInfo</a>&gt; <span id="r1296 rd" class="r1296 r">response</span> = <b>await</b> <span class="r1295 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#3acd57bb1880b17e" class="i method">ReleaseAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1296 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
            <span class="c">// Ensure that we grab the whole ETag value from the service without removing the quotes</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1296 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#e63b9e5c40e52d49" class="i property">ETag</a>.<a href="/Azure.Core/A.html#c02596ded366f933" class="i method">ToString</a>(), <span class="s">$&quot;</span>\&quot;{<span class="r1296 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#5cb5957443570b99" class="i property">ETag</a>}\&quot;<span class="s">&quot;</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="414b8cdf4765463d" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ReleaseLeaseAsync_AccessConditions</a>()
        {
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r1297 rd" class="r1297 r">parameters</span> <b>in</b> <a href="#94c281f351d174da" class="i property">NoLease_AccessConditions_Data</a>)
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1298 rd" class="r1298 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
                <span class="c">// Arrange</span>
                <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1299 rd" class="r1299 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1298 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1300 rd" class="r1300 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
                <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r1301 rd" class="r1301 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
 
                <span class="r1297 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r1299 r">blob</span>, <span class="r1297 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a>);
                <a href="/Azure.Core/A.html#b798d4499ab9e5ea" class="t t">RequestConditions</a> <span id="r1302 rd" class="r1302 r">accessConditions</span> = <a href="#542bf1557de0101a" class="i method">BuildRequestConditions</a>(
                    <span class="r1216 r">parameters</span>: <span class="r1297 r">parameters</span>);
 
                <a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="t t">BlobLeaseClient</a> <span id="r1303 rd" class="r1303 r">lease</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1299 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1300 r">leaseId</span>));
                <b>await</b> <span class="r1303 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(<span class="r1218 r">duration</span>: <span class="r1301 r">duration</span>);
 
                <span class="c">// Act</span>
                <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#96ff29a24be380d4" class="t t">ReleasedObjectInfo</a>&gt; <span id="r1304 rd" class="r1304 r">response</span> = <b>await</b> <span class="r1303 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#3acd57bb1880b17e" class="i method">ReleaseAsync</a>(<span class="r1305 r">conditions</span>: <span class="r1302 r">accessConditions</span>);
 
                <span class="c">// Assert</span>
                <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1304 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="540a9d8ed7a10f6a" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ReleaseLeaseAsync_AccessConditionsFail</a>()
        {
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r1306 rd" class="r1306 r">parameters</span> <b>in</b> <a href="#cd39d61d30a86c0a" class="i property">NoLease_AccessConditionsFail_Data</a>)
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1307 rd" class="r1307 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
                <span class="c">// Arrange</span>
                <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1308 rd" class="r1308 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1307 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1309 rd" class="r1309 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
                <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r1310 rd" class="r1310 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
 
                <span class="r1306 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r1308 r">blob</span>, <span class="r1306 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a>);
                <a href="/Azure.Core/A.html#b798d4499ab9e5ea" class="t t">RequestConditions</a> <span id="r1311 rd" class="r1311 r">accessConditions</span> = <a href="#542bf1557de0101a" class="i method">BuildRequestConditions</a>(<span class="r1306 r">parameters</span>);
 
                <a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="t t">BlobLeaseClient</a> <span id="r1312 rd" class="r1312 r">lease</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1308 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1309 r">leaseId</span>));
                <b>await</b> <span class="r1312 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(<span class="r1218 r">duration</span>: <span class="r1310 r">duration</span>);
 
                <span class="c">// Act</span>
                <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                    <span class="r1312 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#3acd57bb1880b17e" class="i method">ReleaseAsync</a>(<span class="r1305 r">conditions</span>: <span class="r1311 r">accessConditions</span>),
                    <span id="r1313 rd" class="r1313 r">e</span> =&gt; { });
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="cacb73eb04996a68" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ReleaseLeaseAsync_IfTags</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1314 rd" class="r1314 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1315 rd" class="r1315 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1314 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1316 rd" class="r1316 r">tags</span> = <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;
            {
                { <span class="s">&quot;coolTag&quot;</span>, <span class="s">&quot;true&quot;</span> }
            };
 
            <b>await</b> <span class="r1315 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r1316 r">tags</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#419bdad1aa375066" class="t t">BlobLeaseRequestConditions</a> <span id="r1317 rd" class="r1317 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#50b61a1e35973e2d" class="t constructor">BlobLeaseRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
            };
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1318 rd" class="r1318 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r1319 rd" class="r1319 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
 
            <a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="t t">BlobLeaseClient</a> <span id="r1320 rd" class="r1320 r">lease</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1315 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1318 r">leaseId</span>));
            <b>await</b> <span class="r1320 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(<span class="r1319 r">duration</span>);
 
            <span class="c">// Act</span>
            <b>await</b> <span class="r1320 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#3acd57bb1880b17e" class="i method">ReleaseAsync</a>(<span class="r1305 r">conditions</span>: <span class="r1317 r">conditions</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="62d76e2bc5bd433d" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ReleaseLeaseAsync_IfTagsFailed</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1321 rd" class="r1321 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1322 rd" class="r1322 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1321 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#419bdad1aa375066" class="t t">BlobLeaseRequestConditions</a> <span id="r1323 rd" class="r1323 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#50b61a1e35973e2d" class="t constructor">BlobLeaseRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
            };
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1324 rd" class="r1324 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r1325 rd" class="r1325 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
 
            <a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="t t">BlobLeaseClient</a> <span id="r1326 rd" class="r1326 r">lease</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1322 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1324 r">leaseId</span>));
            <b>await</b> <span class="r1326 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(<span class="r1325 r">duration</span>);
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1326 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#3acd57bb1880b17e" class="i method">ReleaseAsync</a>(<span class="r1305 r">conditions</span>: <span class="r1323 r">conditions</span>),
                <span id="r1327 rd" class="r1327 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;ConditionNotMet&quot;</span>, <span class="r1327 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="abb10deb20a20ae7" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ReleaseLeaseAsync_Error</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1328 rd" class="r1328 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r1329 rd" class="r1329 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1328 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1330 rd" class="r1330 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1329 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1330 r">leaseId</span>)).<a href="/Azure.Storage.Blobs/A.html#522076cb9ea83527" class="i method">RenewAsync</a>(),
                <span id="r1331 rd" class="r1331 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;BlobNotFound&quot;</span>, <span class="r1331 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="e5ee1097d43e98cf" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">BreakLeaseAsync</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1332 rd" class="r1332 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1333 rd" class="r1333 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1332 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1334 rd" class="r1334 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r1335 rd" class="r1335 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
 
            <a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="t t">BlobLeaseClient</a> <span id="r1336 rd" class="r1336 r">lease</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1333 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1334 r">leaseId</span>));
            <b>await</b> <span class="r1336 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(<span class="r1335 r">duration</span>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#91e6307d565054a8" class="t t">BlobLease</a>&gt; <span id="r1337 rd" class="r1337 r">response</span> = <b>await</b> <span class="r1336 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#8f28cb81b1eb9c3c" class="i method">BreakAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1337 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="5630b5644cb45c96" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">BreakLeaseAsync_BreakPeriod</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1338 rd" class="r1338 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1339 rd" class="r1339 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1338 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1340 rd" class="r1340 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r1341 rd" class="r1341 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
            <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a> <span id="r1342 rd" class="r1342 r">breakPeriod</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(5);
 
            <a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="t t">BlobLeaseClient</a> <span id="r1343 rd" class="r1343 r">lease</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1339 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1340 r">leaseId</span>));
            <b>await</b> <span class="r1343 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(<span class="r1341 r">duration</span>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#91e6307d565054a8" class="t t">BlobLease</a>&gt; <span id="r1344 rd" class="r1344 r">response</span> = <b>await</b> <span class="r1343 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#8f28cb81b1eb9c3c" class="i method">BreakAsync</a>(<span class="r1345 r">breakPeriod</span>: <span class="r1342 r">breakPeriod</span>);
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1344 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="017bcf433ff9f0cb" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">BreakLeaseAsync_AccessConditions</a>()
        {
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r1346 rd" class="r1346 r">parameters</span> <b>in</b> <a href="#94c281f351d174da" class="i property">NoLease_AccessConditions_Data</a>)
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1347 rd" class="r1347 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
                <span class="c">// Arrange</span>
                <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1348 rd" class="r1348 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1347 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1349 rd" class="r1349 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
                <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r1350 rd" class="r1350 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
 
                <span class="r1346 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r1348 r">blob</span>, <span class="r1346 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a>);
                <a href="/Azure.Core/A.html#b798d4499ab9e5ea" class="t t">RequestConditions</a> <span id="r1351 rd" class="r1351 r">accessConditions</span> = <a href="#542bf1557de0101a" class="i method">BuildRequestConditions</a>(
                    <span class="r1216 r">parameters</span>: <span class="r1346 r">parameters</span>);
 
                <a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="t t">BlobLeaseClient</a> <span id="r1352 rd" class="r1352 r">lease</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1348 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1349 r">leaseId</span>));
                <b>await</b> <span class="r1352 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(<span class="r1218 r">duration</span>: <span class="r1350 r">duration</span>);
 
                <span class="c">// Act</span>
                <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#91e6307d565054a8" class="t t">BlobLease</a>&gt; <span id="r1353 rd" class="r1353 r">response</span> = <b>await</b> <span class="r1352 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#8f28cb81b1eb9c3c" class="i method">BreakAsync</a>(<span class="r1354 r">conditions</span>: <span class="r1351 r">accessConditions</span>);
 
                <span class="c">// Assert</span>
                <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1353 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="95c1b29ea6a1b829" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">BreakLeaseAsync_AccessConditionsFail</a>()
        {
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r1355 rd" class="r1355 r">parameters</span> <b>in</b> <a href="#cd39d61d30a86c0a" class="i property">NoLease_AccessConditionsFail_Data</a>)
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1356 rd" class="r1356 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
                <span class="c">// Arrange</span>
                <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1357 rd" class="r1357 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1356 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1358 rd" class="r1358 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
                <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r1359 rd" class="r1359 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
 
                <span class="r1355 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r1357 r">blob</span>, <span class="r1355 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a>);
                <a href="/Azure.Core/A.html#b798d4499ab9e5ea" class="t t">RequestConditions</a> <span id="r1360 rd" class="r1360 r">accessConditions</span> = <a href="#542bf1557de0101a" class="i method">BuildRequestConditions</a>(<span class="r1355 r">parameters</span>);
 
                <a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="t t">BlobLeaseClient</a> <span id="r1361 rd" class="r1361 r">lease</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1357 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1358 r">leaseId</span>));
                <b>await</b> <span class="r1361 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(<span class="r1218 r">duration</span>: <span class="r1359 r">duration</span>);
 
                <span class="c">// Act</span>
                <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                    <span class="r1361 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#8f28cb81b1eb9c3c" class="i method">BreakAsync</a>(<span class="r1354 r">conditions</span>: <span class="r1360 r">accessConditions</span>),
                    <span id="r1362 rd" class="r1362 r">e</span> =&gt; { });
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="60b9a9ff25464214" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">BreakLeaseAsync_IfTag</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1363 rd" class="r1363 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1364 rd" class="r1364 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1363 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1365 rd" class="r1365 r">tags</span> = <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;
            {
                { <span class="s">&quot;coolTag&quot;</span>, <span class="s">&quot;true&quot;</span> }
            };
 
            <b>await</b> <span class="r1364 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r1365 r">tags</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#419bdad1aa375066" class="t t">BlobLeaseRequestConditions</a> <span id="r1366 rd" class="r1366 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#50b61a1e35973e2d" class="t constructor">BlobLeaseRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
            };
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1367 rd" class="r1367 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r1368 rd" class="r1368 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
 
            <a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="t t">BlobLeaseClient</a> <span id="r1369 rd" class="r1369 r">lease</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1364 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1367 r">leaseId</span>));
            <b>await</b> <span class="r1369 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(<span class="r1368 r">duration</span>);
 
            <span class="c">// Act</span>
            <b>await</b> <span class="r1369 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#8f28cb81b1eb9c3c" class="i method">BreakAsync</a>(<span class="r1354 r">conditions</span>: <span class="r1366 r">conditions</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="93b88f5ba1ce9bac" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">BreakLeaseAsync_IfTagFailed</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1370 rd" class="r1370 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1371 rd" class="r1371 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1370 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#419bdad1aa375066" class="t t">BlobLeaseRequestConditions</a> <span id="r1372 rd" class="r1372 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#50b61a1e35973e2d" class="t constructor">BlobLeaseRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
            };
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1373 rd" class="r1373 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r1374 rd" class="r1374 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
 
            <a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="t t">BlobLeaseClient</a> <span id="r1375 rd" class="r1375 r">lease</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1371 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1373 r">leaseId</span>));
            <b>await</b> <span class="r1375 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(<span class="r1374 r">duration</span>);
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1375 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#8f28cb81b1eb9c3c" class="i method">BreakAsync</a>(<span class="r1354 r">conditions</span>: <span class="r1372 r">conditions</span>),
                <span id="r1376 rd" class="r1376 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;ConditionNotMet&quot;</span>, <span class="r1376 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="a123c2132b83ea29" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">BreakLeaseAsync_Error</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1377 rd" class="r1377 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r1378 rd" class="r1378 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1377 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1378 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>()).<a href="/Azure.Storage.Blobs/A.html#8f28cb81b1eb9c3c" class="i method">BreakAsync</a>(),
                <span id="r1379 rd" class="r1379 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;BlobNotFound&quot;</span>, <span class="r1379 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="cc6c5a8b492902a2" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ChangeLeaseAsync</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1380 rd" class="r1380 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1381 rd" class="r1381 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1380 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1382 rd" class="r1382 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1383 rd" class="r1383 r">newLeaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r1384 rd" class="r1384 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
 
            <a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="t t">BlobLeaseClient</a> <span id="r1385 rd" class="r1385 r">lease</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1381 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1382 r">leaseId</span>));
            <b>await</b> <span class="r1385 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(<span class="r1384 r">duration</span>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#91e6307d565054a8" class="t t">BlobLease</a>&gt; <span id="r1386 rd" class="r1386 r">response</span> = <b>await</b> <span class="r1385 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#cb2790b99deebaeb" class="i method">ChangeAsync</a>(<span class="r1383 r">newLeaseId</span>);
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1386 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1383 r">newLeaseId</span>, <span class="r1386 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#a71ab31c3576ef9f" class="i property">LeaseId</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1386 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#a71ab31c3576ef9f" class="i property">LeaseId</a>, <span class="r1385 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#087613384db92b69" class="i property">LeaseId</a>);
 
            <span class="c">// Ensure that we grab the whole ETag value from the service without removing the quotes</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1386 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#c0d132bd7431733d" class="i property">ETag</a>.<a href="/Azure.Core/A.html#c02596ded366f933" class="i method">ToString</a>(), <span class="s">$&quot;</span>\&quot;{<span class="r1386 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#5cb5957443570b99" class="i property">ETag</a>}\&quot;<span class="s">&quot;</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="9883870fda9bf70f" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ChangeLeaseAsync_AccessConditions</a>()
        {
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r1387 rd" class="r1387 r">parameters</span> <b>in</b> <a href="#94c281f351d174da" class="i property">NoLease_AccessConditions_Data</a>)
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1388 rd" class="r1388 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
                <span class="c">// Arrange</span>
                <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1389 rd" class="r1389 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1388 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1390 rd" class="r1390 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1391 rd" class="r1391 r">newLeaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
                <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r1392 rd" class="r1392 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
 
                <span class="r1387 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r1389 r">blob</span>, <span class="r1387 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a>);
                <a href="/Azure.Core/A.html#b798d4499ab9e5ea" class="t t">RequestConditions</a> <span id="r1393 rd" class="r1393 r">accessConditions</span> = <a href="#542bf1557de0101a" class="i method">BuildRequestConditions</a>(
                    <span class="r1216 r">parameters</span>: <span class="r1387 r">parameters</span>);
 
                <a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="t t">BlobLeaseClient</a> <span id="r1394 rd" class="r1394 r">lease</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1389 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1390 r">leaseId</span>));
                <b>await</b> <span class="r1394 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(<span class="r1218 r">duration</span>: <span class="r1392 r">duration</span>);
 
                <span class="c">// Act</span>
                <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#91e6307d565054a8" class="t t">BlobLease</a>&gt; <span id="r1395 rd" class="r1395 r">response</span> = <b>await</b> <span class="r1394 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#cb2790b99deebaeb" class="i method">ChangeAsync</a>(
                    <span class="r1396 r">proposedId</span>: <span class="r1391 r">newLeaseId</span>,
                    <span class="r1397 r">conditions</span>: <span class="r1393 r">accessConditions</span>);
 
                <span class="c">// Assert</span>
                <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1395 r">response</span>.<a href="/Azure.Core/A.html#959994a72d6ef38a" class="i method">GetRawResponse</a>().<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="0497eac133ef7f5f" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ChangeLeaseAsync_AccessConditionsFail</a>()
        {
            <b>foreach</b> (<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r1398 rd" class="r1398 r">parameters</span> <b>in</b> <a href="#cd39d61d30a86c0a" class="i property">NoLease_AccessConditionsFail_Data</a>)
            {
                <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1399 rd" class="r1399 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
                <span class="c">// Arrange</span>
                <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1400 rd" class="r1400 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1399 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1401 rd" class="r1401 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
                <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1402 rd" class="r1402 r">newLeaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
                <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r1403 rd" class="r1403 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
 
                <span class="r1398 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a> = <b>await</b> <a href="BlobTestBase.cs.html#7516e132be78cc93" class="i method">SetupBlobMatchCondition</a>(<span class="r1400 r">blob</span>, <span class="r1398 r">parameters</span>.<a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a>);
                <a href="/Azure.Core/A.html#b798d4499ab9e5ea" class="t t">RequestConditions</a> <span id="r1404 rd" class="r1404 r">accessConditions</span> = <a href="#542bf1557de0101a" class="i method">BuildRequestConditions</a>(<span class="r1398 r">parameters</span>);
 
                <a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="t t">BlobLeaseClient</a> <span id="r1405 rd" class="r1405 r">lease</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1400 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1401 r">leaseId</span>));
                <b>await</b> <span class="r1405 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(<span class="r1218 r">duration</span>: <span class="r1403 r">duration</span>);
 
                <span class="c">// Act</span>
                <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                    <span class="r1405 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#cb2790b99deebaeb" class="i method">ChangeAsync</a>(
                        <span class="r1396 r">proposedId</span>: <span class="r1402 r">newLeaseId</span>,
                        <span class="r1397 r">conditions</span>: <span class="r1404 r">accessConditions</span>),
                    <span id="r1406 rd" class="r1406 r">e</span> =&gt; { });
            }
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="45cf19d2f502f241" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ChangeLeaseAsync_IfTags</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1407 rd" class="r1407 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1408 rd" class="r1408 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1407 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1409 rd" class="r1409 r">tags</span> = <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;
            {
                { <span class="s">&quot;coolTag&quot;</span>, <span class="s">&quot;true&quot;</span> }
            };
 
            <b>await</b> <span class="r1408 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r1409 r">tags</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#419bdad1aa375066" class="t t">BlobLeaseRequestConditions</a> <span id="r1410 rd" class="r1410 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#50b61a1e35973e2d" class="t constructor">BlobLeaseRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
            };
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1411 rd" class="r1411 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1412 rd" class="r1412 r">newLeaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r1413 rd" class="r1413 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
 
            <a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="t t">BlobLeaseClient</a> <span id="r1414 rd" class="r1414 r">lease</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1408 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1411 r">leaseId</span>));
            <b>await</b> <span class="r1414 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(<span class="r1413 r">duration</span>);
 
            <span class="c">// Act</span>
            <b>await</b> <span class="r1414 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#cb2790b99deebaeb" class="i method">ChangeAsync</a>(
                <span class="r1412 r">newLeaseId</span>,
                <span class="r1397 r">conditions</span>: <span class="r1410 r">conditions</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="47a756efc6460768" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ChangeLeaseAsync_IfTagsFailed</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1415 rd" class="r1415 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1416 rd" class="r1416 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1415 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#419bdad1aa375066" class="t t">BlobLeaseRequestConditions</a> <span id="r1417 rd" class="r1417 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#50b61a1e35973e2d" class="t constructor">BlobLeaseRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
            };
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1418 rd" class="r1418 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1419 rd" class="r1419 r">newLeaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r1420 rd" class="r1420 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
 
            <a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="t t">BlobLeaseClient</a> <span id="r1421 rd" class="r1421 r">lease</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1416 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1418 r">leaseId</span>));
            <b>await</b> <span class="r1421 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(<span class="r1420 r">duration</span>);
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1421 r">lease</span>.<a href="/Azure.Storage.Blobs/A.html#cb2790b99deebaeb" class="i method">ChangeAsync</a>(
                <span class="r1419 r">newLeaseId</span>,
                <span class="r1397 r">conditions</span>: <span class="r1417 r">conditions</span>),
                <span id="r1422 rd" class="r1422 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;ConditionNotMet&quot;</span>, <span class="r1422 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="d3b8fb8d42e83349" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ChangeLeaseAsync_Error</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1423 rd" class="r1423 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r1424 rd" class="r1424 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1423 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1425 rd" class="r1425 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1426 rd" class="r1426 r">newLeaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1424 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1425 r">leaseId</span>)).<a href="/Azure.Storage.Blobs/A.html#cb2790b99deebaeb" class="i method">ChangeAsync</a>(<span class="r1396 r">proposedId</span>: <span class="r1426 r">newLeaseId</span>),
                <span id="r1427 rd" class="r1427 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;BlobNotFound&quot;</span>, <span class="r1427 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="29d51192be81067c" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetTierAsync</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1428 rd" class="r1428 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1429 rd" class="r1429 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1428 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#ad97b1910f5ca3eb" class="t t">Response</a> <span id="r1430 rd" class="r1430 r">response</span> = <b>await</b> <span class="r1429 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#326b7b743ac09161" class="i method">SetAccessTierAsync</a>(<a href="/Azure.Storage.Blobs/A.html#fba68f8727fd7278" class="t t">AccessTier</a>.<a href="/Azure.Storage.Blobs/A.html#ca04e0d5eba05558" class="i property">Cool</a>);
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1430 r">response</span>.<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<span class="t constructor">TestCase</span>(<b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#4e2106a4ce43d036" class="i property">IfModifiedSince</a>))]
        [<span class="t constructor">TestCase</span>(<b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#ef1f2b8d0f0fd9ea" class="i property">IfUnmodifiedSince</a>))]
        [<span class="t constructor">TestCase</span>(<b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#c0640f9cb69488b5" class="i property">IfMatch</a>))]
        [<span class="t constructor">TestCase</span>(<b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#9dcd4da0df2d88c2" class="i property">IfNoneMatch</a>))]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="d9f3d975d15e73b1" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetAccessTierAsync_InvalidRequestConditions</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1431 rd" class="r1431 r">invalidCondition</span>)
        {
            <span class="c">// Arrange</span>
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r1432 rd" class="r1432 r">uri</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">&quot;https://www.doesntmatter.com&quot;</span>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1433 rd" class="r1433 r">blobBaseClient</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(<span class="r1432 r">uri</span>, <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>());
 
            <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r1434 rd" class="r1434 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>();
 
            <b>switch</b> (<span class="r1431 r">invalidCondition</span>)
            {
                <b>case</b> <b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#4e2106a4ce43d036" class="i property">IfModifiedSince</a>):
                    <span class="r1434 r">conditions</span>.<a href="/Azure.Core/A.html#4e2106a4ce43d036" class="i property">IfModifiedSince</a> = <b>new</b> <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t constructor">DateTimeOffset</a>();
                    <b>break</b>;
                <b>case</b> <b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#ef1f2b8d0f0fd9ea" class="i property">IfUnmodifiedSince</a>):
                    <span class="r1434 r">conditions</span>.<a href="/Azure.Core/A.html#ef1f2b8d0f0fd9ea" class="i property">IfUnmodifiedSince</a> = <b>new</b> <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t constructor">DateTimeOffset</a>();
                    <b>break</b>;
                <b>case</b> <b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#c0640f9cb69488b5" class="i property">IfMatch</a>):
                    <span class="r1434 r">conditions</span>.<a href="/Azure.Core/A.html#c0640f9cb69488b5" class="i property">IfMatch</a> = <b>new</b> <a href="/Azure.Core/A.html#69017d8593c3f0de" class="t constructor">ETag</a>();
                    <b>break</b>;
                <b>case</b> <b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#9dcd4da0df2d88c2" class="i property">IfNoneMatch</a>):
                    <span class="r1434 r">conditions</span>.<a href="/Azure.Core/A.html#9dcd4da0df2d88c2" class="i property">IfNoneMatch</a> = <b>new</b> <a href="/Azure.Core/A.html#69017d8593c3f0de" class="t constructor">ETag</a>();
                    <b>break</b>;
            }
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="@0@mscorlib/A.html#109b3ef6299ef9df" class="t t">ArgumentException</a>&gt;(
                <span class="r1433 r">blobBaseClient</span>.<a href="/Azure.Storage.Blobs/A.html#326b7b743ac09161" class="i method">SetAccessTierAsync</a>(
                    <a href="/Azure.Storage.Blobs/A.html#fba68f8727fd7278" class="t t">AccessTier</a>.<a href="/Azure.Storage.Blobs/A.html#a8a54fd366606d43" class="i property">Archive</a>,
                    <span class="r1435 r">conditions</span>: <span class="r1434 r">conditions</span>),
                <span id="r1436 rd" class="r1436 r">e</span> =&gt;
                {
                    <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r1436 r">e</span>.<a href="@0@mscorlib/A.html#71cfcd61786aa2d8" class="i property">Message</a>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<span class="s">$&quot;</span><span class="s">SetAccessTier does not support the </span>{<span class="r1431 r">invalidCondition</span>}<span class="s"> condition(s).</span><span class="s">&quot;</span>));
                    <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r1436 r">e</span>.<a href="@0@mscorlib/A.html#71cfcd61786aa2d8" class="i property">Message</a>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<span class="s">&quot;conditions&quot;</span>));
                });
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="a774aee9ba9c834f" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetTierAsync_Lease</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1437 rd" class="r1437 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1438 rd" class="r1438 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1437 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1439 rd" class="r1439 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="k">var</a> <span id="r1440 rd" class="r1440 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
 
            <b>await</b> <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1438 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1439 r">leaseId</span>)).<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(<span class="r1440 r">duration</span>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#ad97b1910f5ca3eb" class="t t">Response</a> <span id="r1441 rd" class="r1441 r">response</span> = <b>await</b> <span class="r1438 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#326b7b743ac09161" class="i method">SetAccessTierAsync</a>(
                <span class="r1442 r">accessTier</span>: <a href="/Azure.Storage.Blobs/A.html#fba68f8727fd7278" class="t t">AccessTier</a>.<a href="/Azure.Storage.Blobs/A.html#ca04e0d5eba05558" class="i property">Cool</a>,
                <span class="r1435 r">conditions</span>: <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
                {
                    <a href="/Azure.Storage.Blobs/A.html#49487ceff21a9309" class="i property">LeaseId</a> = <span class="r1439 r">leaseId</span>
                });
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1441 r">response</span>.<a href="/Azure.Core/A.html#9f6adbd7e81f8000" class="i property">Headers</a>.<a href="/Azure.Core/A.html#aba3f088b3595483" class="i property">RequestId</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="e2ae2423314da9be" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetTierAsync_LeaseFail</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1443 rd" class="r1443 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <b>var</b> <span id="r1444 rd" class="r1444 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r1445 rd" class="r1445 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1443 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r1446 rd" class="r1446 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r1444 r">data</span>))
            {
                <b>await</b> <span class="r1445 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r1446 r">stream</span>);
            }
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1447 rd" class="r1447 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1445 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#326b7b743ac09161" class="i method">SetAccessTierAsync</a>(
                    <span class="r1442 r">accessTier</span>: <a href="/Azure.Storage.Blobs/A.html#fba68f8727fd7278" class="t t">AccessTier</a>.<a href="/Azure.Storage.Blobs/A.html#ca04e0d5eba05558" class="i property">Cool</a>,
                    <span class="r1435 r">conditions</span>: <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
                    {
                        <a href="/Azure.Storage.Blobs/A.html#49487ceff21a9309" class="i property">LeaseId</a> = <span class="r1447 r">leaseId</span>
                    }),
                <span id="r1448 rd" class="r1448 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;LeaseNotPresentWithBlobOperation&quot;</span>, <span class="r1448 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="0f01c6cc72f21a3e" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetTierAsync_IfTags</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1449 rd" class="r1449 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1450 rd" class="r1450 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1449 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1451 rd" class="r1451 r">tags</span> = <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;
            {
                { <span class="s">&quot;coolTag&quot;</span>, <span class="s">&quot;true&quot;</span> }
            };
            <b>await</b> <span class="r1450 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r1451 r">tags</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r1452 rd" class="r1452 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
            };
 
            <span class="c">// Act</span>
            <b>await</b> <span class="r1450 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#326b7b743ac09161" class="i method">SetAccessTierAsync</a>(
                <span class="r1442 r">accessTier</span>: <a href="/Azure.Storage.Blobs/A.html#fba68f8727fd7278" class="t t">AccessTier</a>.<a href="/Azure.Storage.Blobs/A.html#ca04e0d5eba05558" class="i property">Cool</a>,
                <span class="r1435 r">conditions</span>: <span class="r1452 r">conditions</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="8ce06e06ea512892" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetTierAsync_IfTags_Failed</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1453 rd" class="r1453 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1454 rd" class="r1454 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1453 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r1455 rd" class="r1455 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
            };
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1454 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#326b7b743ac09161" class="i method">SetAccessTierAsync</a>(
                    <span class="r1442 r">accessTier</span>: <a href="/Azure.Storage.Blobs/A.html#fba68f8727fd7278" class="t t">AccessTier</a>.<a href="/Azure.Storage.Blobs/A.html#ca04e0d5eba05558" class="i property">Cool</a>,
                    <span class="r1435 r">conditions</span>: <span class="r1455 r">conditions</span>),
                <span id="r1456 rd" class="r1456 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#e0d947616d6aba70" class="t t">BlobErrorCode</a>.<a href="/Azure.Storage.Blobs/A.html#e12b0b7714ae7485" class="i property">ConditionNotMet</a>.<a href="/Azure.Storage.Blobs/A.html#956fff1c6f30e077" class="i method">ToString</a>(), <span class="r1456 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="33367c5f51c16f9b" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetTierAsync_Error</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1457 rd" class="r1457 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r1458 rd" class="r1458 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1457 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1459 rd" class="r1459 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1460 rd" class="r1460 r">newLeaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1458 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#326b7b743ac09161" class="i method">SetAccessTierAsync</a>(<a href="/Azure.Storage.Blobs/A.html#fba68f8727fd7278" class="t t">AccessTier</a>.<a href="/Azure.Storage.Blobs/A.html#ca04e0d5eba05558" class="i property">Cool</a>),
                <span id="r1461 rd" class="r1461 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;BlobNotFound&quot;</span>, <span class="r1461 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="77a9884045513bd1" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetTierAsync_Rehydrate</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1462 rd" class="r1462 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <span class="c">// arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1463 rd" class="r1463 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1462 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <b>await</b> <span class="r1463 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#326b7b743ac09161" class="i method">SetAccessTierAsync</a>(<a href="/Azure.Storage.Blobs/A.html#fba68f8727fd7278" class="t t">AccessTier</a>.<a href="/Azure.Storage.Blobs/A.html#a8a54fd366606d43" class="i property">Archive</a>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#ad97b1910f5ca3eb" class="t t">Response</a> <span id="r1464 rd" class="r1464 r">setTierResponse</span> = <b>await</b> <span class="r1463 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#326b7b743ac09161" class="i method">SetAccessTierAsync</a>(
                <span class="r1442 r">accessTier</span>: <a href="/Azure.Storage.Blobs/A.html#fba68f8727fd7278" class="t t">AccessTier</a>.<a href="/Azure.Storage.Blobs/A.html#ca04e0d5eba05558" class="i property">Cool</a>,
                <span class="r929 r">rehydratePriority</span>: <a href="/Azure.Storage.Blobs/A.html#24706b1eae49d67f" class="t t">RehydratePriority</a>.<a href="/Azure.Storage.Blobs/A.html#a4fa13cea0b00cfe" class="i field">High</a>);
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r1465 rd" class="r1465 r">propertiesResponse</span> = <b>await</b> <span class="r1463 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;rehydrate-pending-to-cool&quot;</span>, <span class="r1465 r">propertiesResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#05583bc6988f5d97" class="i property">ArchiveStatus</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="bb845304d9652b3b" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetTierAsync_Snapshot</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1466 rd" class="r1466 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1467 rd" class="r1467 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1466 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#f34089dd356582b9" class="t t">BlobSnapshotInfo</a>&gt; <span id="r1468 rd" class="r1468 r">snapshotResponse</span> = <b>await</b> <span class="r1467 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#884dd1969092f87b" class="i method">CreateSnapshotAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1469 rd" class="r1469 r">snapshotBlob</span> = <span class="r1467 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#e456724c864c2308" class="i method">WithSnapshot</a>(<span class="r1468 r">snapshotResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#6de85189f89b695f" class="i property">Snapshot</a>);
 
            <span class="c">// Act</span>
            <b>await</b> <span class="r1469 r">snapshotBlob</span>.<a href="/Azure.Storage.Blobs/A.html#326b7b743ac09161" class="i method">SetAccessTierAsync</a>(<a href="/Azure.Storage.Blobs/A.html#fba68f8727fd7278" class="t t">AccessTier</a>.<a href="/Azure.Storage.Blobs/A.html#ca04e0d5eba05558" class="i property">Cool</a>);
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r1470 rd" class="r1470 r">propertiesResponse</span> = <b>await</b> <span class="r1469 r">snapshotBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#fba68f8727fd7278" class="t t">AccessTier</a>.<a href="/Azure.Storage.Blobs/A.html#ca04e0d5eba05558" class="i property">Cool</a>.<a href="/Azure.Storage.Blobs/A.html#8b464bffeb6e9543" class="i method">ToString</a>(), <span class="r1470 r">propertiesResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#22f45f7a8243d744" class="i property">AccessTier</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="200a7ce63efad977" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetTierAsync_SnapshotError</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1471 rd" class="r1471 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1472 rd" class="r1472 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1471 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1473 rd" class="r1473 r">fakeVersion</span> = <span class="s">&quot;2020-04-17T20:37:16.5129130Z&quot;</span>;
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1474 rd" class="r1474 r">snapshotBlob</span> = <span class="r1472 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#e456724c864c2308" class="i method">WithSnapshot</a>(<span class="r1473 r">fakeVersion</span>);
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1474 r">snapshotBlob</span>.<a href="/Azure.Storage.Blobs/A.html#326b7b743ac09161" class="i method">SetAccessTierAsync</a>(<a href="/Azure.Storage.Blobs/A.html#fba68f8727fd7278" class="t t">AccessTier</a>.<a href="/Azure.Storage.Blobs/A.html#ca04e0d5eba05558" class="i property">Cool</a>),
                <span id="r1475 rd" class="r1475 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#e0d947616d6aba70" class="t t">BlobErrorCode</a>.<a href="/Azure.Storage.Blobs/A.html#d09680c97545ffc1" class="i property">BlobNotFound</a>.<a href="/Azure.Storage.Blobs/A.html#956fff1c6f30e077" class="i method">ToString</a>(), <span class="r1475 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="2be0b709f3633b13" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetTierAsync_Version</a>()
        {
            <span class="c">// Arrange</span>
            <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="k">var</a> <span id="r1476 rd" class="r1476 r">constants</span> = <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a>.<a href="Shared/TestConstants.cs.html#203c7c99dba2deba" class="i method">Create</a>(<a href="#6047b3fd44e291e9" class="k">this</a>);
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1477 rd" class="r1477 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <b>var</b> <span id="r1478 rd" class="r1478 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r1479 rd" class="r1479 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1477 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#66a553618c3f7c72" class="t t">BlobContentInfo</a>&gt; <span id="r1480 rd" class="r1480 r">uploadResponse</span>;
            <b>using</b> (<a href="@0@mscorlib/A.html#1a4dcb744a23ba6f" class="k">var</a> <span id="r1481 rd" class="r1481 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r1478 r">data</span>))
            {
                <span class="r1480 r">uploadResponse</span> = <b>await</b> <span class="r1479 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r1481 r">stream</span>);
            }
 
            <span class="c">// Act</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1482 rd" class="r1482 r">versionBlob</span> = <span class="r1479 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#160553f40f2ac074" class="i method">WithVersion</a>(<span class="r1480 r">uploadResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#d6d167cdb7477b7e" class="i property">VersionId</a>);
 
            <span class="c">// Act</span>
            <b>await</b> <span class="r1482 r">versionBlob</span>.<a href="/Azure.Storage.Blobs/A.html#326b7b743ac09161" class="i method">SetAccessTierAsync</a>(<a href="/Azure.Storage.Blobs/A.html#fba68f8727fd7278" class="t t">AccessTier</a>.<a href="/Azure.Storage.Blobs/A.html#ca04e0d5eba05558" class="i property">Cool</a>);
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#5eac1727e6cdaafb" class="t t">BlobProperties</a>&gt; <span id="r1483 rd" class="r1483 r">propertiesResponse</span> = <b>await</b> <span class="r1482 r">versionBlob</span>.<a href="/Azure.Storage.Blobs/A.html#f0505a8f6a46fa3e" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#fba68f8727fd7278" class="t t">AccessTier</a>.<a href="/Azure.Storage.Blobs/A.html#ca04e0d5eba05558" class="i property">Cool</a>.<a href="/Azure.Storage.Blobs/A.html#8b464bffeb6e9543" class="i method">ToString</a>(), <span class="r1483 r">propertiesResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#22f45f7a8243d744" class="i property">AccessTier</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="84aa75d4ad480ead" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetTierAsync_VersionError</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1484 rd" class="r1484 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1485 rd" class="r1485 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1484 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1486 rd" class="r1486 r">fakeVersion</span> = <span class="s">&quot;2020-04-17T20:37:16.5129130Z&quot;</span>;
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1487 rd" class="r1487 r">versionBlob</span> = <span class="r1485 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#0c0c41d22044da57" class="i method">WithVersion</a>(<span class="r1486 r">fakeVersion</span>);
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1487 r">versionBlob</span>.<a href="/Azure.Storage.Blobs/A.html#326b7b743ac09161" class="i method">SetAccessTierAsync</a>(<a href="/Azure.Storage.Blobs/A.html#fba68f8727fd7278" class="t t">AccessTier</a>.<a href="/Azure.Storage.Blobs/A.html#ca04e0d5eba05558" class="i property">Cool</a>),
                <span id="r1488 rd" class="r1488 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#e0d947616d6aba70" class="t t">BlobErrorCode</a>.<a href="/Azure.Storage.Blobs/A.html#d09680c97545ffc1" class="i property">BlobNotFound</a>.<a href="/Azure.Storage.Blobs/A.html#956fff1c6f30e077" class="i method">ToString</a>(), <span class="r1488 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="f88eeb7bc8b0deb4" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetSetTagsAsync</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1489 rd" class="r1489 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1490 rd" class="r1490 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1489 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1491 rd" class="r1491 r">tags</span> = <a href="BlobTestBase.cs.html#7fec8daec2d431bb" class="i method">BuildTags</a>();
 
            <span class="c">// Act</span>
            <b>await</b> <span class="r1490 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r1491 r">tags</span>);
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#ef95198899ead425" class="t t">GetBlobTagResult</a>&gt; <span id="r1492 rd" class="r1492 r">getTagsResponse</span> = <b>await</b> <span class="r1490 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#b7f89f805d5f0d37" class="i method">GetTagsAsync</a>();
 
            <span class="c">// Assert</span>
            <a href="Shared/StorageTestBase.cs.html#d0a7dd4c7ffda95e" class="i method">AssertDictionaryEquality</a>(<span class="r1491 r">tags</span>, <span class="r1492 r">getTagsResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#0dc9c594d988f55e" class="i property">Tags</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<span class="t constructor">TestCase</span>(<b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#4e2106a4ce43d036" class="i property">IfModifiedSince</a>))]
        [<span class="t constructor">TestCase</span>(<b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#ef1f2b8d0f0fd9ea" class="i property">IfUnmodifiedSince</a>))]
        [<span class="t constructor">TestCase</span>(<b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#c0640f9cb69488b5" class="i property">IfMatch</a>))]
        [<span class="t constructor">TestCase</span>(<b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#9dcd4da0df2d88c2" class="i property">IfNoneMatch</a>))]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="c74233e6fc741eb8" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetTagsAsync_InvalidRequestConditions</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1493 rd" class="r1493 r">invalidCondition</span>)
        {
            <span class="c">// Arrange</span>
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r1494 rd" class="r1494 r">uri</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">&quot;https://www.doesntmatter.com&quot;</span>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1495 rd" class="r1495 r">blobBaseClient</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(<span class="r1494 r">uri</span>, <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>());
 
            <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r1496 rd" class="r1496 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>();
 
            <b>switch</b> (<span class="r1493 r">invalidCondition</span>)
            {
                <b>case</b> <b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#4e2106a4ce43d036" class="i property">IfModifiedSince</a>):
                    <span class="r1496 r">conditions</span>.<a href="/Azure.Core/A.html#4e2106a4ce43d036" class="i property">IfModifiedSince</a> = <b>new</b> <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t constructor">DateTimeOffset</a>();
                    <b>break</b>;
                <b>case</b> <b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#ef1f2b8d0f0fd9ea" class="i property">IfUnmodifiedSince</a>):
                    <span class="r1496 r">conditions</span>.<a href="/Azure.Core/A.html#ef1f2b8d0f0fd9ea" class="i property">IfUnmodifiedSince</a> = <b>new</b> <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t constructor">DateTimeOffset</a>();
                    <b>break</b>;
                <b>case</b> <b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#c0640f9cb69488b5" class="i property">IfMatch</a>):
                    <span class="r1496 r">conditions</span>.<a href="/Azure.Core/A.html#c0640f9cb69488b5" class="i property">IfMatch</a> = <b>new</b> <a href="/Azure.Core/A.html#69017d8593c3f0de" class="t constructor">ETag</a>();
                    <b>break</b>;
                <b>case</b> <b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#9dcd4da0df2d88c2" class="i property">IfNoneMatch</a>):
                    <span class="r1496 r">conditions</span>.<a href="/Azure.Core/A.html#9dcd4da0df2d88c2" class="i property">IfNoneMatch</a> = <b>new</b> <a href="/Azure.Core/A.html#69017d8593c3f0de" class="t constructor">ETag</a>();
                    <b>break</b>;
            }
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="@0@mscorlib/A.html#109b3ef6299ef9df" class="t t">ArgumentException</a>&gt;(
                <span class="r1495 r">blobBaseClient</span>.<a href="/Azure.Storage.Blobs/A.html#b7f89f805d5f0d37" class="i method">GetTagsAsync</a>(
                    <span class="r1497 r">conditions</span>: <span class="r1496 r">conditions</span>),
                <span id="r1498 rd" class="r1498 r">e</span> =&gt;
                {
                    <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r1498 r">e</span>.<a href="@0@mscorlib/A.html#71cfcd61786aa2d8" class="i property">Message</a>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<span class="s">$&quot;</span><span class="s">GetTags does not support the </span>{<span class="r1493 r">invalidCondition</span>}<span class="s"> condition(s).</span><span class="s">&quot;</span>));
                    <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r1498 r">e</span>.<a href="@0@mscorlib/A.html#71cfcd61786aa2d8" class="i property">Message</a>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<span class="s">&quot;conditions&quot;</span>));
                });
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="acd04d6de64011ff" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetSetTagsAsync_BlobTagSas</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1499 rd" class="r1499 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1500 rd" class="r1500 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1499 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="/Azure.Storage.Common/A.html#6d8135d9673080f5" class="t t">SasQueryParameters</a> <span id="r1501 rd" class="r1501 r">sasQueryParameters</span> = <a href="BlobTestBase.cs.html#f9846010b3d03f0e" class="i method">GetBlobSas</a>(
                <span class="r1499 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>,
                <span class="r1500 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#157bb830a0c2db34" class="i property">Name</a>,
                <a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#67f84b61e6dc7eed" class="i field">Tag</a>,
                <span class="r820 r">sasVersion</span>: <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f6d7a68f94fda076" class="i field">DefaultSasVersion</a>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1502 rd" class="r1502 r">sasBlob</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(<b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span>{<span class="r1500 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>}<span class="s">?</span>{<span class="r1501 r">sasQueryParameters</span>}<span class="s">&quot;</span>), <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>());
 
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1503 rd" class="r1503 r">tags</span> = <a href="BlobTestBase.cs.html#7fec8daec2d431bb" class="i method">BuildTags</a>();
 
            <span class="c">// Act</span>
            <b>await</b> <span class="r1502 r">sasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r1503 r">tags</span>);
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#ef95198899ead425" class="t t">GetBlobTagResult</a>&gt; <span id="r1504 rd" class="r1504 r">getTagsResponse</span> = <b>await</b> <span class="r1502 r">sasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#b7f89f805d5f0d37" class="i method">GetTagsAsync</a>();
 
            <span class="c">// Assert</span>
            <a href="Shared/StorageTestBase.cs.html#d0a7dd4c7ffda95e" class="i method">AssertDictionaryEquality</a>(<span class="r1503 r">tags</span>, <span class="r1504 r">getTagsResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#0dc9c594d988f55e" class="i property">Tags</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="34e9b0e7211383a8" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetSetTagsAsync_InvalidBlobSas</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1505 rd" class="r1505 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1506 rd" class="r1506 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1505 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="/Azure.Storage.Common/A.html#6d8135d9673080f5" class="t t">SasQueryParameters</a> <span id="r1507 rd" class="r1507 r">sasQueryParameters</span> = <a href="BlobTestBase.cs.html#f9846010b3d03f0e" class="i method">GetBlobSas</a>(
                <span class="r1505 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>, <span class="r1506 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#157bb830a0c2db34" class="i property">Name</a>,
                <a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#03fad2eff3cfb473" class="i field">Read</a>,
                <span class="r820 r">sasVersion</span>: <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f6d7a68f94fda076" class="i field">DefaultSasVersion</a>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1508 rd" class="r1508 r">sasBlob</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(<b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span>{<span class="r1506 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>}<span class="s">?</span>{<span class="r1507 r">sasQueryParameters</span>}<span class="s">&quot;</span>), <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>());
 
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1509 rd" class="r1509 r">tags</span> = <a href="BlobTestBase.cs.html#7fec8daec2d431bb" class="i method">BuildTags</a>();
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1508 r">sasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r1509 r">tags</span>),
                <span id="r1510 rd" class="r1510 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#e0d947616d6aba70" class="t t">BlobErrorCode</a>.<a href="/Azure.Storage.Blobs/A.html#33026859481bf6d8" class="i property">AuthorizationPermissionMismatch</a>.<a href="/Azure.Storage.Blobs/A.html#956fff1c6f30e077" class="i method">ToString</a>(), <span class="r1510 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="d7f14683e7717422" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetSetTagsAsync_BlobIdentityTagSas</a>()
        {
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r1511 rd" class="r1511 r">oauthService</span> = <a href="BlobTestBase.cs.html#a0ccf5affc88da7d" class="i property">BlobsClientBuilder</a>.<a href="ClientBuilderExtensions.cs.html#a816bf81da5c6a2b" class="i method">GetServiceClient_OAuth</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1512 rd" class="r1512 r">containerName</span> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1513 rd" class="r1513 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1514 rd" class="r1514 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(<span class="r208 r">containerName</span>: <span class="r1512 r">containerName</span>, <span class="r181 r">service</span>: <span class="r1511 r">oauthService</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1515 rd" class="r1515 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1514 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#781f283857f7caf2" class="t t">UserDelegationKey</a>&gt; <span id="r1516 rd" class="r1516 r">userDelegationKey</span> = <b>await</b> <span class="r1511 r">oauthService</span>.<a href="/Azure.Storage.Blobs/A.html#0e8108c060ec84fc" class="i method">GetUserDelegationKeyAsync</a>(
                <span class="r53 r">startsOn</span>: <b>null</b>,
                <span class="r54 r">expiresOn</span>: <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(1));
 
            <a href="/Azure.Storage.Common/A.html#6d8135d9673080f5" class="t t">SasQueryParameters</a> <span id="r1517 rd" class="r1517 r">sasQueryParameters</span> = <a href="BlobTestBase.cs.html#2b706caa165290b3" class="i method">GetBlobIdentitySas</a>(
                <span class="r1514 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>,
                <span class="r1515 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#157bb830a0c2db34" class="i property">Name</a>,
                <a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#67f84b61e6dc7eed" class="i field">Tag</a>,
                <span class="r1516 r">userDelegationKey</span>,
                <span class="r1511 r">oauthService</span>.<a href="/Azure.Storage.Blobs/A.html#c986470f7b7901c4" class="i property">AccountName</a>,
                <span class="r810 r">sasVersion</span>: <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f6d7a68f94fda076" class="i field">DefaultSasVersion</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1518 rd" class="r1518 r">identitySasBlob</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(<b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span>{<span class="r1515 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>}<span class="s">?</span>{<span class="r1517 r">sasQueryParameters</span>}<span class="s">&quot;</span>), <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>());
 
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1519 rd" class="r1519 r">tags</span> = <a href="BlobTestBase.cs.html#7fec8daec2d431bb" class="i method">BuildTags</a>();
 
            <span class="c">// Act</span>
            <b>await</b> <span class="r1518 r">identitySasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r1519 r">tags</span>);
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#ef95198899ead425" class="t t">GetBlobTagResult</a>&gt; <span id="r1520 rd" class="r1520 r">getTagsResponse</span> = <b>await</b> <span class="r1518 r">identitySasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#b7f89f805d5f0d37" class="i method">GetTagsAsync</a>();
 
            <span class="c">// Assert</span>
            <a href="Shared/StorageTestBase.cs.html#d0a7dd4c7ffda95e" class="i method">AssertDictionaryEquality</a>(<span class="r1519 r">tags</span>, <span class="r1520 r">getTagsResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#0dc9c594d988f55e" class="i property">Tags</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="1489629c1332db4a" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetSetTagsAsync_InvalidBlobIdentitySas</a>()
        {
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r1521 rd" class="r1521 r">oauthService</span> = <a href="BlobTestBase.cs.html#a0ccf5affc88da7d" class="i property">BlobsClientBuilder</a>.<a href="ClientBuilderExtensions.cs.html#a816bf81da5c6a2b" class="i method">GetServiceClient_OAuth</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1522 rd" class="r1522 r">containerName</span> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1523 rd" class="r1523 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1524 rd" class="r1524 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(<span class="r208 r">containerName</span>: <span class="r1522 r">containerName</span>, <span class="r181 r">service</span>: <span class="r1521 r">oauthService</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1525 rd" class="r1525 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1524 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#781f283857f7caf2" class="t t">UserDelegationKey</a>&gt; <span id="r1526 rd" class="r1526 r">userDelegationKey</span> = <b>await</b> <span class="r1521 r">oauthService</span>.<a href="/Azure.Storage.Blobs/A.html#0e8108c060ec84fc" class="i method">GetUserDelegationKeyAsync</a>(
                <span class="r53 r">startsOn</span>: <b>null</b>,
                <span class="r54 r">expiresOn</span>: <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(1));
 
            <a href="/Azure.Storage.Common/A.html#6d8135d9673080f5" class="t t">SasQueryParameters</a> <span id="r1527 rd" class="r1527 r">sasQueryParameters</span> = <a href="BlobTestBase.cs.html#2b706caa165290b3" class="i method">GetBlobIdentitySas</a>(
                <span class="r1524 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>,
                <span class="r1525 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#157bb830a0c2db34" class="i property">Name</a>,
                <a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#03fad2eff3cfb473" class="i field">Read</a>,
                <span class="r1526 r">userDelegationKey</span>,
                <span class="r1521 r">oauthService</span>.<a href="/Azure.Storage.Blobs/A.html#c986470f7b7901c4" class="i property">AccountName</a>,
                <span class="r810 r">sasVersion</span>: <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f6d7a68f94fda076" class="i field">DefaultSasVersion</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1528 rd" class="r1528 r">identitySasBlob</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(<b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span>{<span class="r1525 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>}<span class="s">?</span>{<span class="r1527 r">sasQueryParameters</span>}<span class="s">&quot;</span>), <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>());
 
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1529 rd" class="r1529 r">tags</span> = <a href="BlobTestBase.cs.html#7fec8daec2d431bb" class="i method">BuildTags</a>();
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1528 r">identitySasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r1529 r">tags</span>),
                <span id="r1530 rd" class="r1530 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#e0d947616d6aba70" class="t t">BlobErrorCode</a>.<a href="/Azure.Storage.Blobs/A.html#33026859481bf6d8" class="i property">AuthorizationPermissionMismatch</a>.<a href="/Azure.Storage.Blobs/A.html#956fff1c6f30e077" class="i method">ToString</a>(), <span class="r1530 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="f77a10fef5ebe25f" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetSetTagsAsync_ContainerTagSas</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1531 rd" class="r1531 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1532 rd" class="r1532 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1531 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="/Azure.Storage.Common/A.html#6d8135d9673080f5" class="t t">SasQueryParameters</a> <span id="r1533 rd" class="r1533 r">sasQueryParameters</span> = <a href="BlobTestBase.cs.html#d71f19ba1645e5f8" class="i method">GetContainerSas</a>(
                <span class="r1531 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>,
                <a href="/Azure.Storage.Blobs/A.html#4c988bea3bd2c716" class="t t">BlobContainerSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#75e029cdc1d10f3e" class="i field">Tag</a>,
                <span class="r841 r">sasVersion</span>: <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f6d7a68f94fda076" class="i field">DefaultSasVersion</a>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1534 rd" class="r1534 r">sasBlob</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(<b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span>{<span class="r1532 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>}<span class="s">?</span>{<span class="r1533 r">sasQueryParameters</span>}<span class="s">&quot;</span>), <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>());
 
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1535 rd" class="r1535 r">tags</span> = <a href="BlobTestBase.cs.html#7fec8daec2d431bb" class="i method">BuildTags</a>();
 
            <span class="c">// Act</span>
            <b>await</b> <span class="r1534 r">sasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r1535 r">tags</span>);
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#ef95198899ead425" class="t t">GetBlobTagResult</a>&gt; <span id="r1536 rd" class="r1536 r">getTagsResponse</span> = <b>await</b> <span class="r1534 r">sasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#b7f89f805d5f0d37" class="i method">GetTagsAsync</a>();
 
            <span class="c">// Assert</span>
            <a href="Shared/StorageTestBase.cs.html#d0a7dd4c7ffda95e" class="i method">AssertDictionaryEquality</a>(<span class="r1535 r">tags</span>, <span class="r1536 r">getTagsResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#0dc9c594d988f55e" class="i property">Tags</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="91cf9a70445b98dd" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetSetTagsAsync_InvalidContainerSas</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1537 rd" class="r1537 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1538 rd" class="r1538 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1537 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="/Azure.Storage.Common/A.html#6d8135d9673080f5" class="t t">SasQueryParameters</a> <span id="r1539 rd" class="r1539 r">sasQueryParameters</span> = <a href="BlobTestBase.cs.html#d71f19ba1645e5f8" class="i method">GetContainerSas</a>(
                <span class="r1537 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>,
                <a href="/Azure.Storage.Blobs/A.html#4c988bea3bd2c716" class="t t">BlobContainerSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#c5ad4d0c7bdde857" class="i field">Read</a>,
                <span class="r841 r">sasVersion</span>: <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f6d7a68f94fda076" class="i field">DefaultSasVersion</a>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1540 rd" class="r1540 r">sasBlob</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(<b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span>{<span class="r1538 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>}<span class="s">?</span>{<span class="r1539 r">sasQueryParameters</span>}<span class="s">&quot;</span>), <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>());
 
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1541 rd" class="r1541 r">tags</span> = <a href="BlobTestBase.cs.html#7fec8daec2d431bb" class="i method">BuildTags</a>();
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1540 r">sasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r1541 r">tags</span>),
                <span id="r1542 rd" class="r1542 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#e0d947616d6aba70" class="t t">BlobErrorCode</a>.<a href="/Azure.Storage.Blobs/A.html#33026859481bf6d8" class="i property">AuthorizationPermissionMismatch</a>.<a href="/Azure.Storage.Blobs/A.html#956fff1c6f30e077" class="i method">ToString</a>(), <span class="r1542 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="add95928e0b27eaa" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetSetTagsAsync_ContainerIdentityTagSas</a>()
        {
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r1543 rd" class="r1543 r">oauthService</span> = <a href="BlobTestBase.cs.html#a0ccf5affc88da7d" class="i property">BlobsClientBuilder</a>.<a href="ClientBuilderExtensions.cs.html#a816bf81da5c6a2b" class="i method">GetServiceClient_OAuth</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1544 rd" class="r1544 r">containerName</span> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1545 rd" class="r1545 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1546 rd" class="r1546 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(<span class="r208 r">containerName</span>: <span class="r1544 r">containerName</span>, <span class="r181 r">service</span>: <span class="r1543 r">oauthService</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1547 rd" class="r1547 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1546 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#781f283857f7caf2" class="t t">UserDelegationKey</a>&gt; <span id="r1548 rd" class="r1548 r">userDelegationKey</span> = <b>await</b> <span class="r1543 r">oauthService</span>.<a href="/Azure.Storage.Blobs/A.html#0e8108c060ec84fc" class="i method">GetUserDelegationKeyAsync</a>(
                <span class="r53 r">startsOn</span>: <b>null</b>,
                <span class="r54 r">expiresOn</span>: <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(1));
 
            <a href="/Azure.Storage.Common/A.html#6d8135d9673080f5" class="t t">SasQueryParameters</a> <span id="r1549 rd" class="r1549 r">sasQueryParameters</span> = <a href="BlobTestBase.cs.html#65588b481ab16f93" class="i method">GetContainerIdentitySas</a>(
                <span class="r1546 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>,
                <a href="/Azure.Storage.Blobs/A.html#4c988bea3bd2c716" class="t t">BlobContainerSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#75e029cdc1d10f3e" class="i field">Tag</a>,
                <span class="r1548 r">userDelegationKey</span>,
                <span class="r1543 r">oauthService</span>.<a href="/Azure.Storage.Blobs/A.html#c986470f7b7901c4" class="i property">AccountName</a>,
                <span class="r1550 r">sasVersion</span>: <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f6d7a68f94fda076" class="i field">DefaultSasVersion</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1551 rd" class="r1551 r">identitySasBlob</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(<b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span>{<span class="r1547 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>}<span class="s">?</span>{<span class="r1549 r">sasQueryParameters</span>}<span class="s">&quot;</span>), <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>());
 
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1552 rd" class="r1552 r">tags</span> = <a href="BlobTestBase.cs.html#7fec8daec2d431bb" class="i method">BuildTags</a>();
 
            <span class="c">// Act</span>
            <b>await</b> <span class="r1551 r">identitySasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r1552 r">tags</span>);
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#ef95198899ead425" class="t t">GetBlobTagResult</a>&gt; <span id="r1553 rd" class="r1553 r">getTagsResponse</span> = <b>await</b> <span class="r1551 r">identitySasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#b7f89f805d5f0d37" class="i method">GetTagsAsync</a>();
 
            <span class="c">// Assert</span>
            <a href="Shared/StorageTestBase.cs.html#d0a7dd4c7ffda95e" class="i method">AssertDictionaryEquality</a>(<span class="r1552 r">tags</span>, <span class="r1553 r">getTagsResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#0dc9c594d988f55e" class="i property">Tags</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="7f9cd1cd37a93b9f" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetSetTagsAsync_InvalidContainerIdentitySas</a>()
        {
            <a href="/Azure.Storage.Blobs/A.html#5c3c4fe54cdb5868" class="t t">BlobServiceClient</a> <span id="r1554 rd" class="r1554 r">oauthService</span> = <a href="BlobTestBase.cs.html#a0ccf5affc88da7d" class="i property">BlobsClientBuilder</a>.<a href="ClientBuilderExtensions.cs.html#a816bf81da5c6a2b" class="i method">GetServiceClient_OAuth</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1555 rd" class="r1555 r">containerName</span> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1556 rd" class="r1556 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1557 rd" class="r1557 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>(<span class="r208 r">containerName</span>: <span class="r1555 r">containerName</span>, <span class="r181 r">service</span>: <span class="r1554 r">oauthService</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1558 rd" class="r1558 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1557 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#781f283857f7caf2" class="t t">UserDelegationKey</a>&gt; <span id="r1559 rd" class="r1559 r">userDelegationKey</span> = <b>await</b> <span class="r1554 r">oauthService</span>.<a href="/Azure.Storage.Blobs/A.html#0e8108c060ec84fc" class="i method">GetUserDelegationKeyAsync</a>(
                <span class="r53 r">startsOn</span>: <b>null</b>,
                <span class="r54 r">expiresOn</span>: <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(1));
 
            <a href="/Azure.Storage.Common/A.html#6d8135d9673080f5" class="t t">SasQueryParameters</a> <span id="r1560 rd" class="r1560 r">sasQueryParameters</span> = <a href="BlobTestBase.cs.html#65588b481ab16f93" class="i method">GetContainerIdentitySas</a>(
                <span class="r1557 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>,
                <a href="/Azure.Storage.Blobs/A.html#4c988bea3bd2c716" class="t t">BlobContainerSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#c5ad4d0c7bdde857" class="i field">Read</a>,
                <span class="r1559 r">userDelegationKey</span>,
                <span class="r1554 r">oauthService</span>.<a href="/Azure.Storage.Blobs/A.html#c986470f7b7901c4" class="i property">AccountName</a>,
                <span class="r1550 r">sasVersion</span>: <a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#f6d7a68f94fda076" class="i field">DefaultSasVersion</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1561 rd" class="r1561 r">identitySasBlob</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(<b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span>{<span class="r1558 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>}<span class="s">?</span>{<span class="r1560 r">sasQueryParameters</span>}<span class="s">&quot;</span>), <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>());
 
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1562 rd" class="r1562 r">tags</span> = <a href="BlobTestBase.cs.html#7fec8daec2d431bb" class="i method">BuildTags</a>();
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1561 r">identitySasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r1562 r">tags</span>),
                <span id="r1563 rd" class="r1563 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#e0d947616d6aba70" class="t t">BlobErrorCode</a>.<a href="/Azure.Storage.Blobs/A.html#33026859481bf6d8" class="i property">AuthorizationPermissionMismatch</a>.<a href="/Azure.Storage.Blobs/A.html#956fff1c6f30e077" class="i method">ToString</a>(), <span class="r1563 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        [<span class="t constructor">TestCase</span>(<a href="/Azure.Storage.Common/A.html#ac762c6c5829d9cc" class="t t">AccountSasPermissions</a>.<a href="/Azure.Storage.Common/A.html#8b50232c883692f0" class="i field">Tag</a>)]
        [<span class="t constructor">TestCase</span>(<a href="/Azure.Storage.Common/A.html#ac762c6c5829d9cc" class="t t">AccountSasPermissions</a>.<a href="/Azure.Storage.Common/A.html#dec433cd96ddae14" class="i field">All</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="3c32c0a884cde714" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetSetTagsAsync_AccountSas</a>(<a href="/Azure.Storage.Common/A.html#ac762c6c5829d9cc" class="t t">AccountSasPermissions</a> <span id="r1564 rd" class="r1564 r">accountSasPermissions</span>)
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1565 rd" class="r1565 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1566 rd" class="r1566 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1565 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="/Azure.Storage.Common/A.html#6d8135d9673080f5" class="t t">SasQueryParameters</a> <span id="r1567 rd" class="r1567 r">sasQueryParameters</span> = <a href="BlobTestBase.cs.html#a0ccf5affc88da7d" class="i property">BlobsClientBuilder</a>.<a href="Shared/ClientBuilder.cs.html#fdc4faccd21891d5" class="i method">GetNewAccountSas</a>(<span class="r863 r">permissions</span>: <span class="r1564 r">accountSasPermissions</span>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1568 rd" class="r1568 r">sasBlob</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(<b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span>{<span class="r1566 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>}<span class="s">?</span>{<span class="r1567 r">sasQueryParameters</span>}<span class="s">&quot;</span>), <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>());
 
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1569 rd" class="r1569 r">tags</span> = <a href="BlobTestBase.cs.html#7fec8daec2d431bb" class="i method">BuildTags</a>();
 
            <span class="c">// Act</span>
            <b>await</b> <span class="r1568 r">sasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r1569 r">tags</span>);
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#ef95198899ead425" class="t t">GetBlobTagResult</a>&gt; <span id="r1570 rd" class="r1570 r">getTagsResponse</span> = <b>await</b> <span class="r1568 r">sasBlob</span>.<a href="/Azure.Storage.Blobs/A.html#b7f89f805d5f0d37" class="i method">GetTagsAsync</a>();
 
            <span class="c">// Assert</span>
            <a href="Shared/StorageTestBase.cs.html#d0a7dd4c7ffda95e" class="i method">AssertDictionaryEquality</a>(<span class="r1569 r">tags</span>, <span class="r1570 r">getTagsResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#0dc9c594d988f55e" class="i property">Tags</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="01a1df48e8fc46f7" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetSetTagsAsync_IfTags</a>()
        {
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1571 rd" class="r1571 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1572 rd" class="r1572 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1571 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1573 rd" class="r1573 r">tags</span> = <b>new</b> <a href="@0@mscorlib/A.html#bf6849e410b43c4c" class="t constructor">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt;
            {
                { <span class="s">&quot;coolTag&quot;</span>, <span class="s">&quot;true&quot;</span> }
            };
 
            <b>await</b> <span class="r1572 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r1573 r">tags</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r1574 rd" class="r1574 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
            };
 
            <span class="r1573 r">tags</span>.<a href="@0@mscorlib/A.html#a7861da7aaa500fe" class="i method">Add</a>(<span class="s">&quot;anotherTag&quot;</span>, <span class="s">&quot;anotherValue&quot;</span>);
 
            <span class="c">// Act</span>
            <b>await</b> <span class="r1572 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(
                <span class="r1573 r">tags</span>,
                <span class="r1575 r">conditions</span>: <span class="r1574 r">conditions</span>);
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#ef95198899ead425" class="t t">GetBlobTagResult</a>&gt; <span id="r1576 rd" class="r1576 r">getTagsResponse</span> = <b>await</b> <span class="r1572 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#b7f89f805d5f0d37" class="i method">GetTagsAsync</a>(
                <span class="r1497 r">conditions</span>: <span class="r1574 r">conditions</span>);
 
            <span class="c">// Assert</span>
            <a href="Shared/StorageTestBase.cs.html#d0a7dd4c7ffda95e" class="i method">AssertDictionaryEquality</a>(<span class="r1573 r">tags</span>, <span class="r1576 r">getTagsResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#0dc9c594d988f55e" class="i property">Tags</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="e8680e1a52c1dfef" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetTagsAsync_IfTagsFailed</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1577 rd" class="r1577 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1578 rd" class="r1578 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1577 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r1579 rd" class="r1579 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
            };
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1578 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#b7f89f805d5f0d37" class="i method">GetTagsAsync</a>(
                <span class="r1497 r">conditions</span>: <span class="r1579 r">conditions</span>),
                <span id="r1580 rd" class="r1580 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;ConditionNotMet&quot;</span>, <span class="r1580 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="ce5dab413ed0b385" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetTagsAsync_IfTagsFailed</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1581 rd" class="r1581 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1582 rd" class="r1582 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1581 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r1583 rd" class="r1583 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#3a2f7c22d584c9a1" class="i property">TagConditions</a> = <span class="s">&quot;\&quot;coolTag\&quot; = &#39;true&#39;&quot;</span>
            };
 
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1584 rd" class="r1584 r">tags</span> = <a href="BlobTestBase.cs.html#7fec8daec2d431bb" class="i method">BuildTags</a>();
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1582 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(
                    <span class="r1584 r">tags</span>,
                <span class="r1575 r">conditions</span>: <span class="r1583 r">conditions</span>),
                <span id="r1585 rd" class="r1585 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="s">&quot;ConditionNotMet&quot;</span>, <span class="r1585 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="285214012120548a" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetSetTagsAsync_Version</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1586 rd" class="r1586 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1587 rd" class="r1587 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1586 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#6cdb754d8a522d97" class="t t">BlobInfo</a>&gt; <span id="r1588 rd" class="r1588 r">metadataResponse</span> = <b>await</b> <span class="r1587 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#58dcaf1e6f66d2b3" class="i method">SetMetadataAsync</a>(<a href="Shared/StorageTestBase.cs.html#9bbe73e9e1c28539" class="i method">BuildMetadata</a>());
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1589 rd" class="r1589 r">versionBlob</span> = <span class="r1587 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#0c0c41d22044da57" class="i method">WithVersion</a>(<span class="r1588 r">metadataResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#af9fa0c54a2fe595" class="i property">VersionId</a>);
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1590 rd" class="r1590 r">tags</span> = <a href="BlobTestBase.cs.html#7fec8daec2d431bb" class="i method">BuildTags</a>();
 
            <span class="c">// Act</span>
            <b>await</b> <span class="r1589 r">versionBlob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r1590 r">tags</span>);
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#ef95198899ead425" class="t t">GetBlobTagResult</a>&gt; <span id="r1591 rd" class="r1591 r">getVersionTagsResponse</span> = <b>await</b> <span class="r1589 r">versionBlob</span>.<a href="/Azure.Storage.Blobs/A.html#b7f89f805d5f0d37" class="i method">GetTagsAsync</a>();
 
            <span class="c">// Assert</span>
            <a href="Shared/StorageTestBase.cs.html#d0a7dd4c7ffda95e" class="i method">AssertDictionaryEquality</a>(<span class="r1590 r">tags</span>, <span class="r1591 r">getVersionTagsResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#0dc9c594d988f55e" class="i property">Tags</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="5f71d415f0ee7cb7" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetSetTagsAsync_VersionError</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1592 rd" class="r1592 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1593 rd" class="r1593 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1592 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1594 rd" class="r1594 r">fakeVersion</span> = <span class="s">&quot;2020-04-17T21:55:48.6692074Z&quot;</span>;
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1595 rd" class="r1595 r">versionBlob</span> = <span class="r1593 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#0c0c41d22044da57" class="i method">WithVersion</a>(<span class="r1594 r">fakeVersion</span>);
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1596 rd" class="r1596 r">tags</span> = <a href="BlobTestBase.cs.html#7fec8daec2d431bb" class="i method">BuildTags</a>();
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1595 r">versionBlob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r1596 r">tags</span>),
                <span id="r1597 rd" class="r1597 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#e0d947616d6aba70" class="t t">BlobErrorCode</a>.<a href="/Azure.Storage.Blobs/A.html#d09680c97545ffc1" class="i property">BlobNotFound</a>.<a href="/Azure.Storage.Blobs/A.html#956fff1c6f30e077" class="i method">ToString</a>(), <span class="r1597 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
 
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1595 r">versionBlob</span>.<a href="/Azure.Storage.Blobs/A.html#b7f89f805d5f0d37" class="i method">GetTagsAsync</a>(),
                <span id="r1598 rd" class="r1598 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#e0d947616d6aba70" class="t t">BlobErrorCode</a>.<a href="/Azure.Storage.Blobs/A.html#d09680c97545ffc1" class="i property">BlobNotFound</a>.<a href="/Azure.Storage.Blobs/A.html#956fff1c6f30e077" class="i method">ToString</a>(), <span class="r1598 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="11fb4d8be54451c8" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetTagsAsync_Error</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1599 rd" class="r1599 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1600 rd" class="r1600 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1599 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#54038cd6848b9aae" class="i method">GetBlobBaseClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1600 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#b7f89f805d5f0d37" class="i method">GetTagsAsync</a>(),
                <span id="r1601 rd" class="r1601 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#e0d947616d6aba70" class="t t">BlobErrorCode</a>.<a href="/Azure.Storage.Blobs/A.html#d09680c97545ffc1" class="i property">BlobNotFound</a>.<a href="/Azure.Storage.Blobs/A.html#956fff1c6f30e077" class="i method">ToString</a>(), <span class="r1601 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<span class="t constructor">TestCase</span>(<b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#4e2106a4ce43d036" class="i property">IfModifiedSince</a>))]
        [<span class="t constructor">TestCase</span>(<b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#ef1f2b8d0f0fd9ea" class="i property">IfUnmodifiedSince</a>))]
        [<span class="t constructor">TestCase</span>(<b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#c0640f9cb69488b5" class="i property">IfMatch</a>))]
        [<span class="t constructor">TestCase</span>(<b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#9dcd4da0df2d88c2" class="i property">IfNoneMatch</a>))]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="25b03985baef4e92" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetTagsAsync_InvalidRequestConditions</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1602 rd" class="r1602 r">invalidCondition</span>)
        {
            <span class="c">// Arrange</span>
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r1603 rd" class="r1603 r">uri</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">&quot;https://www.doesntmatter.com&quot;</span>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1604 rd" class="r1604 r">blobBaseClient</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(<span class="r1603 r">uri</span>, <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>());
 
            <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r1605 rd" class="r1605 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>();
 
            <b>switch</b> (<span class="r1602 r">invalidCondition</span>)
            {
                <b>case</b> <b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#4e2106a4ce43d036" class="i property">IfModifiedSince</a>):
                    <span class="r1605 r">conditions</span>.<a href="/Azure.Core/A.html#4e2106a4ce43d036" class="i property">IfModifiedSince</a> = <b>new</b> <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t constructor">DateTimeOffset</a>();
                    <b>break</b>;
                <b>case</b> <b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#ef1f2b8d0f0fd9ea" class="i property">IfUnmodifiedSince</a>):
                    <span class="r1605 r">conditions</span>.<a href="/Azure.Core/A.html#ef1f2b8d0f0fd9ea" class="i property">IfUnmodifiedSince</a> = <b>new</b> <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t constructor">DateTimeOffset</a>();
                    <b>break</b>;
                <b>case</b> <b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#c0640f9cb69488b5" class="i property">IfMatch</a>):
                    <span class="r1605 r">conditions</span>.<a href="/Azure.Core/A.html#c0640f9cb69488b5" class="i property">IfMatch</a> = <b>new</b> <a href="/Azure.Core/A.html#69017d8593c3f0de" class="t constructor">ETag</a>();
                    <b>break</b>;
                <b>case</b> <b>nameof</b>(<a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a>.<a href="/Azure.Core/A.html#9dcd4da0df2d88c2" class="i property">IfNoneMatch</a>):
                    <span class="r1605 r">conditions</span>.<a href="/Azure.Core/A.html#9dcd4da0df2d88c2" class="i property">IfNoneMatch</a> = <b>new</b> <a href="/Azure.Core/A.html#69017d8593c3f0de" class="t constructor">ETag</a>();
                    <b>break</b>;
            }
 
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1606 rd" class="r1606 r">tags</span> = <a href="BlobTestBase.cs.html#7fec8daec2d431bb" class="i method">BuildTags</a>();
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="@0@mscorlib/A.html#109b3ef6299ef9df" class="t t">ArgumentException</a>&gt;(
                <span class="r1604 r">blobBaseClient</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(
                    <span class="r1606 r">tags</span>,
                    <span class="r1575 r">conditions</span>: <span class="r1605 r">conditions</span>),
                <span id="r1607 rd" class="r1607 r">e</span> =&gt;
                {
                    <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r1607 r">e</span>.<a href="@0@mscorlib/A.html#71cfcd61786aa2d8" class="i property">Message</a>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<span class="s">$&quot;</span><span class="s">SetTags does not support the </span>{<span class="r1602 r">invalidCondition</span>}<span class="s"> condition(s).</span><span class="s">&quot;</span>));
                    <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r1607 r">e</span>.<a href="@0@mscorlib/A.html#71cfcd61786aa2d8" class="i property">Message</a>.<a href="@0@mscorlib/A.html#428c5c9954dea844" class="i method">Contains</a>(<span class="s">&quot;conditions&quot;</span>));
                });
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="59c1edb8af9f3f59" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetTagsAsync_Error</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1608 rd" class="r1608 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1609 rd" class="r1609 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1608 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#54038cd6848b9aae" class="i method">GetBlobBaseClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1610 rd" class="r1610 r">tags</span> = <a href="BlobTestBase.cs.html#7fec8daec2d431bb" class="i method">BuildTags</a>();
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1609 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r1610 r">tags</span>),
                <span id="r1611 rd" class="r1611 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#e0d947616d6aba70" class="t t">BlobErrorCode</a>.<a href="/Azure.Storage.Blobs/A.html#d09680c97545ffc1" class="i property">BlobNotFound</a>.<a href="/Azure.Storage.Blobs/A.html#956fff1c6f30e077" class="i method">ToString</a>(), <span class="r1611 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#852945a1a2a1929b" class="i field">V2020_04_08</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="5561b0cc7d8ecdd7" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetSetTagsAsync_Lease</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1612 rd" class="r1612 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1613 rd" class="r1613 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1612 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
 
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1614 rd" class="r1614 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a> <span id="r1615 rd" class="r1615 r">duration</span> = <a href="@0@mscorlib/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@0@mscorlib/A.html#c24437e069f958f9" class="i method">FromSeconds</a>(15);
            <b>await</b> <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1613 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1614 r">leaseId</span>)).<a href="/Azure.Storage.Blobs/A.html#fdd6bc2065a6d20f" class="i method">AcquireAsync</a>(<span class="r1615 r">duration</span>);
 
            <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r1616 rd" class="r1616 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#49487ceff21a9309" class="i property">LeaseId</a> = <span class="r1614 r">leaseId</span>
            };
 
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1617 rd" class="r1617 r">tags</span> = <a href="BlobTestBase.cs.html#7fec8daec2d431bb" class="i method">BuildTags</a>();
            <b>await</b> <span class="r1613 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r1617 r">tags</span>, <span class="r1616 r">conditions</span>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#ef95198899ead425" class="t t">GetBlobTagResult</a>&gt; <span id="r1618 rd" class="r1618 r">response</span> = <b>await</b> <span class="r1613 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#b7f89f805d5f0d37" class="i method">GetTagsAsync</a>(<span class="r1616 r">conditions</span>);
 
            <span class="c">// Assert</span>
            <a href="Shared/StorageTestBase.cs.html#d0a7dd4c7ffda95e" class="i method">AssertDictionaryEquality</a>(<span class="r1617 r">tags</span>, <span class="r1618 r">response</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#0dc9c594d988f55e" class="i property">Tags</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#852945a1a2a1929b" class="i field">V2020_04_08</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="f142b3ca510e8356" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GetTagsAsync_LeaseFailed</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1619 rd" class="r1619 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1620 rd" class="r1620 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1619 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1621 rd" class="r1621 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
 
            <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r1622 rd" class="r1622 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#49487ceff21a9309" class="i property">LeaseId</a> = <span class="r1621 r">leaseId</span>
            };
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1620 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#b7f89f805d5f0d37" class="i method">GetTagsAsync</a>(<span class="r1622 r">conditions</span>),
                <span id="r1623 rd" class="r1623 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#e0d947616d6aba70" class="t t">BlobErrorCode</a>.<a href="/Azure.Storage.Blobs/A.html#9c70bc822da0f2cd" class="i property">LeaseNotPresentWithBlobOperation</a>.<a href="/Azure.Storage.Blobs/A.html#956fff1c6f30e077" class="i method">ToString</a>(), <span class="r1623 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#852945a1a2a1929b" class="i field">V2020_04_08</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="5006f01362852379" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetTagsAsync_LeaseFailed</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1624 rd" class="r1624 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1625 rd" class="r1625 r">blob</span> = <b>await</b> <a href="BlobTestBase.cs.html#9e4c584bacdcd462" class="i method">GetNewBlobClient</a>(<span class="r1624 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1626 rd" class="r1626 r">leaseId</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>();
 
            <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <span id="r1627 rd" class="r1627 r">conditions</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5fe01134b7f5b183" class="t constructor">BlobRequestConditions</a>
            {
                <a href="/Azure.Storage.Blobs/A.html#49487ceff21a9309" class="i property">LeaseId</a> = <span class="r1626 r">leaseId</span>
            };
 
            <a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <span id="r1628 rd" class="r1628 r">tags</span> = <a href="BlobTestBase.cs.html#7fec8daec2d431bb" class="i method">BuildTags</a>();
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1625 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#322155eb5c359879" class="i method">SetTagsAsync</a>(<span class="r1628 r">tags</span>, <span class="r1627 r">conditions</span>),
                <span id="r1629 rd" class="r1629 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#e0d947616d6aba70" class="t t">BlobErrorCode</a>.<a href="/Azure.Storage.Blobs/A.html#9c70bc822da0f2cd" class="i property">LeaseNotPresentWithBlobOperation</a>.<a href="/Azure.Storage.Blobs/A.html#956fff1c6f30e077" class="i method">ToString</a>(), <span class="r1629 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        <span class="k preprocess">#</span><span class="k preprocess">region</span> GenerateSasTests
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public void</b> <a id="1cbc122f0dab6a35" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanGenerateSas_ClientConstructors</a>()
        {
            <span class="c">// Arrange</span>
            <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="k">var</a> <span id="r1630 rd" class="r1630 r">constants</span> = <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a>.<a href="Shared/TestConstants.cs.html#203c7c99dba2deba" class="i method">Create</a>(<a href="#6047b3fd44e291e9" class="k">this</a>);
            <a href="@0@System/A.html#991565dd25f47c90" class="k">var</a> <span id="r1631 rd" class="r1631 r">blobEndpoint</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">&quot;https://127.0.0.1/&quot;</span> + <span class="r1630 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#734b131b05a1072a" class="i property">Account</a>);
            <a href="@0@System/A.html#991565dd25f47c90" class="k">var</a> <span id="r1632 rd" class="r1632 r">blobSecondaryEndpoint</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">&quot;https://127.0.0.1/&quot;</span> + <span class="r1630 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#734b131b05a1072a" class="i property">Account</a> + <span class="s">&quot;-secondary&quot;</span>);
            <a href="/Azure.Storage.Blobs/A.html#7ccfb159d18cf63e" class="k">var</a> <span id="r1633 rd" class="r1633 r">storageConnectionString</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4eec574b9d8c7b03" class="t constructor">StorageConnectionString</a>(<span class="r1630 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#5e7d6f6cb2ad8ffd" class="i property">SharedKeyCredential</a>, <span class="r8 r">blobStorageUri</span>: (<span class="r1631 r">blobEndpoint</span>, <span class="r1632 r">blobSecondaryEndpoint</span>));
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1634 rd" class="r1634 r">connectionString</span> = <span class="r1633 r">storageConnectionString</span>.<a href="Shared/TestExtensions.cs.html#87d23cce92a2a26b" class="i method">ToString</a>(<b>true</b>);
 
            <span class="c">// Act - BlobBaseClient(string connectionString, string blobContainerName, string blobName)</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1635 rd" class="r1635 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#9f3e9c661ef21b9f" class="t constructor">BlobBaseClient</a>(
                <span class="r1634 r">connectionString</span>,
                <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>(),
                <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r1635 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#2dbc44d678220b52" class="i property">CanGenerateSasUri</a>);
 
            <span class="c">// Act - BlobBaseClient(string connectionString, string blobContainerName, string blobName, BlobClientOptions options)</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1636 rd" class="r1636 r">blob2</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#1dd5a2f2a12f75b4" class="t constructor">BlobBaseClient</a>(
                <span class="r1634 r">connectionString</span>,
                <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>(),
                <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>(),
                <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>()));
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r1636 r">blob2</span>.<a href="/Azure.Storage.Blobs/A.html#2dbc44d678220b52" class="i property">CanGenerateSasUri</a>);
 
            <span class="c">// Act - BlobBaseClient(Uri blobContainerUri, BlobClientOptions options = default)</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1637 rd" class="r1637 r">blob3</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(
                <span class="r1631 r">blobEndpoint</span>,
                <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>()));
            <span class="t t">Assert</span>.<span class="i method">IsFalse</span>(<span class="r1637 r">blob3</span>.<a href="/Azure.Storage.Blobs/A.html#2dbc44d678220b52" class="i property">CanGenerateSasUri</a>);
 
            <span class="c">// Act - BlobBaseClient(Uri blobContainerUri, StorageSharedKeyCredential credential, BlobClientOptions options = default)</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1638 rd" class="r1638 r">blob4</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#ccb19a557e706fd3" class="t constructor">BlobBaseClient</a>(
                <span class="r1631 r">blobEndpoint</span>,
                <span class="r1630 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#5e7d6f6cb2ad8ffd" class="i property">SharedKeyCredential</a>,
                <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>()));
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r1638 r">blob4</span>.<a href="/Azure.Storage.Blobs/A.html#2dbc44d678220b52" class="i property">CanGenerateSasUri</a>);
 
            <span class="c">// Act - BlobBaseClient(Uri blobContainerUri, TokenCredential credential, BlobClientOptions options = default)</span>
            <a href="/Azure.Identity/A.html#636a819641215bd9" class="k">var</a> <span id="r1639 rd" class="r1639 r">tokenCredentials</span> = <b>new</b> <a href="/Azure.Identity/A.html#ebe3cac3c2be1903" class="t constructor">DefaultAzureCredential</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1640 rd" class="r1640 r">blob5</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#186ca8efbece6dea" class="t constructor">BlobBaseClient</a>(
                <span class="r1631 r">blobEndpoint</span>,
                <span class="r1639 r">tokenCredentials</span>,
                <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>()));
            <span class="t t">Assert</span>.<span class="i method">IsFalse</span>(<span class="r1640 r">blob5</span>.<a href="/Azure.Storage.Blobs/A.html#2dbc44d678220b52" class="i property">CanGenerateSasUri</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public void</b> <a id="7ce5c0a14a7e2a10" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanGenerateSas_GetParentBlobContainerClient</a>()
        {
            <span class="c">// Arrange</span>
            <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="k">var</a> <span id="r1641 rd" class="r1641 r">constants</span> = <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a>.<a href="Shared/TestConstants.cs.html#203c7c99dba2deba" class="i method">Create</a>(<a href="#6047b3fd44e291e9" class="k">this</a>);
            <a href="@0@System/A.html#991565dd25f47c90" class="k">var</a> <span id="r1642 rd" class="r1642 r">blobEndpoint</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">&quot;https://127.0.0.1/&quot;</span> + <span class="r1641 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#734b131b05a1072a" class="i property">Account</a>);
            <a href="@0@System/A.html#991565dd25f47c90" class="k">var</a> <span id="r1643 rd" class="r1643 r">blobSecondaryEndpoint</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">&quot;https://127.0.0.1/&quot;</span> + <span class="r1641 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#734b131b05a1072a" class="i property">Account</a> + <span class="s">&quot;-secondary&quot;</span>);
            <a href="/Azure.Storage.Blobs/A.html#7ccfb159d18cf63e" class="k">var</a> <span id="r1644 rd" class="r1644 r">storageConnectionString</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4eec574b9d8c7b03" class="t constructor">StorageConnectionString</a>(<span class="r1641 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#5e7d6f6cb2ad8ffd" class="i property">SharedKeyCredential</a>, <span class="r8 r">blobStorageUri</span>: (<span class="r1642 r">blobEndpoint</span>, <span class="r1643 r">blobSecondaryEndpoint</span>));
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1645 rd" class="r1645 r">connectionString</span> = <span class="r1644 r">storageConnectionString</span>.<a href="Shared/TestExtensions.cs.html#87d23cce92a2a26b" class="i method">ToString</a>(<b>true</b>);
 
            <span class="c">// Act - BlobBaseClient(string connectionString, string blobContainerName, string blobName)</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1646 rd" class="r1646 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#9f3e9c661ef21b9f" class="t constructor">BlobBaseClient</a>(
                <span class="r1645 r">connectionString</span>,
                <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>(),
                <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <a href="/Azure.Storage.Blobs/A.html#6bb2c165ee95c7d4" class="t t">BlobContainerClient</a> <span id="r1647 rd" class="r1647 r">container</span> = <span class="r1646 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#47529370e2f9875a" class="i method">GetParentBlobContainerClient</a>();
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r1647 r">container</span>.<a href="/Azure.Storage.Blobs/A.html#8b36175034bcb753" class="i property">CanGenerateSasUri</a>);
 
            <span class="c">// Act - BlobBaseClient(string connectionString, string blobContainerName, string blobName, BlobClientOptions options)</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1648 rd" class="r1648 r">blob2</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#1dd5a2f2a12f75b4" class="t constructor">BlobBaseClient</a>(
                <span class="r1645 r">connectionString</span>,
                <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>(),
                <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>(),
                <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>()));
            <a href="/Azure.Storage.Blobs/A.html#6bb2c165ee95c7d4" class="t t">BlobContainerClient</a> <span id="r1649 rd" class="r1649 r">container2</span> = <span class="r1648 r">blob2</span>.<a href="/Azure.Storage.Blobs/A.html#47529370e2f9875a" class="i method">GetParentBlobContainerClient</a>();
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r1649 r">container2</span>.<a href="/Azure.Storage.Blobs/A.html#8b36175034bcb753" class="i property">CanGenerateSasUri</a>);
 
            <span class="c">// Act - BlobBaseClient(Uri blobContainerUri, BlobClientOptions options = default)</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1650 rd" class="r1650 r">blob3</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(
                <span class="r1642 r">blobEndpoint</span>,
                <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>()));
            <a href="/Azure.Storage.Blobs/A.html#6bb2c165ee95c7d4" class="t t">BlobContainerClient</a> <span id="r1651 rd" class="r1651 r">container3</span> = <span class="r1650 r">blob3</span>.<a href="/Azure.Storage.Blobs/A.html#47529370e2f9875a" class="i method">GetParentBlobContainerClient</a>();
            <span class="t t">Assert</span>.<span class="i method">IsFalse</span>(<span class="r1651 r">container3</span>.<a href="/Azure.Storage.Blobs/A.html#8b36175034bcb753" class="i property">CanGenerateSasUri</a>);
 
            <span class="c">// Act - BlobBaseClient(Uri blobContainerUri, StorageSharedKeyCredential credential, BlobClientOptions options = default)</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1652 rd" class="r1652 r">blob4</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#ccb19a557e706fd3" class="t constructor">BlobBaseClient</a>(
                <span class="r1642 r">blobEndpoint</span>,
                <span class="r1641 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#5e7d6f6cb2ad8ffd" class="i property">SharedKeyCredential</a>,
                <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>()));
            <a href="/Azure.Storage.Blobs/A.html#6bb2c165ee95c7d4" class="t t">BlobContainerClient</a> <span id="r1653 rd" class="r1653 r">container4</span> = <span class="r1652 r">blob4</span>.<a href="/Azure.Storage.Blobs/A.html#47529370e2f9875a" class="i method">GetParentBlobContainerClient</a>();
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r1653 r">container4</span>.<a href="/Azure.Storage.Blobs/A.html#8b36175034bcb753" class="i property">CanGenerateSasUri</a>);
 
            <span class="c">// Act - BlobBaseClient(Uri blobContainerUri, TokenCredential credential, BlobClientOptions options = default)</span>
            <a href="/Azure.Identity/A.html#636a819641215bd9" class="k">var</a> <span id="r1654 rd" class="r1654 r">tokenCredentials</span> = <b>new</b> <a href="/Azure.Identity/A.html#ebe3cac3c2be1903" class="t constructor">DefaultAzureCredential</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1655 rd" class="r1655 r">blob5</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#186ca8efbece6dea" class="t constructor">BlobBaseClient</a>(
                <span class="r1642 r">blobEndpoint</span>,
                <span class="r1654 r">tokenCredentials</span>,
                <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>()));
            <a href="/Azure.Storage.Blobs/A.html#6bb2c165ee95c7d4" class="t t">BlobContainerClient</a> <span id="r1656 rd" class="r1656 r">container5</span> = <span class="r1655 r">blob5</span>.<a href="/Azure.Storage.Blobs/A.html#47529370e2f9875a" class="i method">GetParentBlobContainerClient</a>();
            <span class="t t">Assert</span>.<span class="i method">IsFalse</span>(<span class="r1656 r">container5</span>.<a href="/Azure.Storage.Blobs/A.html#8b36175034bcb753" class="i property">CanGenerateSasUri</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public void</b> <a id="149e2f33759f9fe7" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanGenerateSas_WithSnapshot_True</a>()
        {
            <span class="c">// Arrange</span>
            <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="k">var</a> <span id="r1657 rd" class="r1657 r">constants</span> = <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a>.<a href="Shared/TestConstants.cs.html#203c7c99dba2deba" class="i method">Create</a>(<a href="#6047b3fd44e291e9" class="k">this</a>);
            <a href="@0@System/A.html#991565dd25f47c90" class="k">var</a> <span id="r1658 rd" class="r1658 r">blobEndpoint</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">&quot;https://127.0.0.1/&quot;</span> + <span class="r1657 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#734b131b05a1072a" class="i property">Account</a>);
            <a href="@0@System/A.html#991565dd25f47c90" class="k">var</a> <span id="r1659 rd" class="r1659 r">blobSecondaryEndpoint</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">&quot;https://127.0.0.1/&quot;</span> + <span class="r1657 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#734b131b05a1072a" class="i property">Account</a> + <span class="s">&quot;-secondary&quot;</span>);
            <a href="/Azure.Storage.Blobs/A.html#7ccfb159d18cf63e" class="k">var</a> <span id="r1660 rd" class="r1660 r">storageConnectionString</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4eec574b9d8c7b03" class="t constructor">StorageConnectionString</a>(<span class="r1657 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#5e7d6f6cb2ad8ffd" class="i property">SharedKeyCredential</a>, <span class="r8 r">blobStorageUri</span>: (<span class="r1658 r">blobEndpoint</span>, <span class="r1659 r">blobSecondaryEndpoint</span>));
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1661 rd" class="r1661 r">connectionString</span> = <span class="r1660 r">storageConnectionString</span>.<a href="Shared/TestExtensions.cs.html#87d23cce92a2a26b" class="i method">ToString</a>(<b>true</b>);
 
            <span class="c">// Create blob</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1662 rd" class="r1662 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#9f3e9c661ef21b9f" class="t constructor">BlobBaseClient</a>(
                <span class="r1661 r">connectionString</span>,
                <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>(),
                <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r1662 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#2dbc44d678220b52" class="i property">CanGenerateSasUri</a>);
 
            <span class="c">// Act</span>
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1663 rd" class="r1663 r">snapshot</span> = <span class="s">&quot;2020-04-17T20:37:16.5129130Z&quot;</span>;
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1664 rd" class="r1664 r">snapshotBlob</span> = <span class="r1662 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#e456724c864c2308" class="i method">WithSnapshot</a>(<span class="r1663 r">snapshot</span>);
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r1664 r">snapshotBlob</span>.<a href="/Azure.Storage.Blobs/A.html#2dbc44d678220b52" class="i property">CanGenerateSasUri</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public void</b> <a id="d1ba88104f9a80a4" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanGenerateSas_WithSnapshot_False</a>()
        {
            <span class="c">// Arrange</span>
            <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="k">var</a> <span id="r1665 rd" class="r1665 r">constants</span> = <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a>.<a href="Shared/TestConstants.cs.html#203c7c99dba2deba" class="i method">Create</a>(<a href="#6047b3fd44e291e9" class="k">this</a>);
            <a href="@0@System/A.html#991565dd25f47c90" class="k">var</a> <span id="r1666 rd" class="r1666 r">blobEndpoint</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">&quot;https://127.0.0.1/&quot;</span> + <span class="r1665 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#734b131b05a1072a" class="i property">Account</a>);
 
            <span class="c">// Create blob</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1667 rd" class="r1667 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(
                <span class="r1666 r">blobEndpoint</span>,
                <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>()));
            <span class="t t">Assert</span>.<span class="i method">IsFalse</span>(<span class="r1667 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#2dbc44d678220b52" class="i property">CanGenerateSasUri</a>);
 
            <span class="c">// Act</span>
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1668 rd" class="r1668 r">snapshot</span> = <span class="s">&quot;2020-04-17T20:37:16.5129130Z&quot;</span>;
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1669 rd" class="r1669 r">snapshotBlob</span> = <span class="r1667 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#e456724c864c2308" class="i method">WithSnapshot</a>(<span class="r1668 r">snapshot</span>);
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsFalse</span>(<span class="r1669 r">snapshotBlob</span>.<a href="/Azure.Storage.Blobs/A.html#2dbc44d678220b52" class="i property">CanGenerateSasUri</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public void</b> <a id="32c35b183d19c82b" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanGenerateSas_WithVersion_True</a>()
        {
            <span class="c">// Arrange</span>
            <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="k">var</a> <span id="r1670 rd" class="r1670 r">constants</span> = <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a>.<a href="Shared/TestConstants.cs.html#203c7c99dba2deba" class="i method">Create</a>(<a href="#6047b3fd44e291e9" class="k">this</a>);
            <a href="@0@System/A.html#991565dd25f47c90" class="k">var</a> <span id="r1671 rd" class="r1671 r">blobEndpoint</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">&quot;https://127.0.0.1/&quot;</span> + <span class="r1670 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#734b131b05a1072a" class="i property">Account</a>);
            <a href="@0@System/A.html#991565dd25f47c90" class="k">var</a> <span id="r1672 rd" class="r1672 r">blobSecondaryEndpoint</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">&quot;https://127.0.0.1/&quot;</span> + <span class="r1670 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#734b131b05a1072a" class="i property">Account</a> + <span class="s">&quot;-secondary&quot;</span>);
            <a href="/Azure.Storage.Blobs/A.html#7ccfb159d18cf63e" class="k">var</a> <span id="r1673 rd" class="r1673 r">storageConnectionString</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4eec574b9d8c7b03" class="t constructor">StorageConnectionString</a>(<span class="r1670 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#5e7d6f6cb2ad8ffd" class="i property">SharedKeyCredential</a>, <span class="r8 r">blobStorageUri</span>: (<span class="r1671 r">blobEndpoint</span>, <span class="r1672 r">blobSecondaryEndpoint</span>));
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1674 rd" class="r1674 r">connectionString</span> = <span class="r1673 r">storageConnectionString</span>.<a href="Shared/TestExtensions.cs.html#87d23cce92a2a26b" class="i method">ToString</a>(<b>true</b>);
 
            <span class="c">// Create blob</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1675 rd" class="r1675 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#9f3e9c661ef21b9f" class="t constructor">BlobBaseClient</a>(
                <span class="r1674 r">connectionString</span>,
                <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>(),
                <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r1675 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#2dbc44d678220b52" class="i property">CanGenerateSasUri</a>);
 
            <span class="c">// Act</span>
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1676 rd" class="r1676 r">version</span> = <span class="s">&quot;2020-04-17T21:55:48.6692074Z&quot;</span>;
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1677 rd" class="r1677 r">versionBlob</span> = <span class="r1675 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#0c0c41d22044da57" class="i method">WithVersion</a>(<span class="r1676 r">version</span>);
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r1677 r">versionBlob</span>.<a href="/Azure.Storage.Blobs/A.html#2dbc44d678220b52" class="i property">CanGenerateSasUri</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public void</b> <a id="05fbfec20880993e" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanGenerateSas_WithVersion_False</a>()
        {
            <span class="c">// Arrange</span>
            <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="k">var</a> <span id="r1678 rd" class="r1678 r">constants</span> = <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a>.<a href="Shared/TestConstants.cs.html#203c7c99dba2deba" class="i method">Create</a>(<a href="#6047b3fd44e291e9" class="k">this</a>);
            <a href="@0@System/A.html#991565dd25f47c90" class="k">var</a> <span id="r1679 rd" class="r1679 r">blobEndpoint</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">&quot;https://127.0.0.1/&quot;</span> + <span class="r1678 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#734b131b05a1072a" class="i property">Account</a>);
 
            <span class="c">// Create blob</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1680 rd" class="r1680 r">blob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(
                <span class="r1679 r">blobEndpoint</span>,
                <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>()));
            <span class="t t">Assert</span>.<span class="i method">IsFalse</span>(<span class="r1680 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#2dbc44d678220b52" class="i property">CanGenerateSasUri</a>);
 
            <span class="c">// Act</span>
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1681 rd" class="r1681 r">version</span> = <span class="s">&quot;2020-04-17T21:55:48.6692074Z&quot;</span>;
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1682 rd" class="r1682 r">versionBlob</span> = <span class="r1680 r">blob</span>.<a href="/Azure.Storage.Blobs/A.html#0c0c41d22044da57" class="i method">WithVersion</a>(<span class="r1681 r">version</span>);
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsFalse</span>(<span class="r1682 r">versionBlob</span>.<a href="/Azure.Storage.Blobs/A.html#2dbc44d678220b52" class="i property">CanGenerateSasUri</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public void</b> <a id="61113a043f7a15b9" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanGenerateSas_Mockable</a>()
        {
            <span class="c">// Act</span>
            <b>var</b> <span id="r1683 rd" class="r1683 r">blob</span> = <b>new</b> <span class="t constructor">Mock</span>&lt;<a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a>&gt;();
            <span class="r1683 r">blob</span>.<span class="i method">Setup</span>(<span id="r1684 rd" class="r1684 r">x</span> =&gt; <span class="r1684 r">x</span>.<a href="/Azure.Storage.Blobs/A.html#2dbc44d678220b52" class="i property">CanGenerateSasUri</a>).<span class="i method">Returns</span>(<b>false</b>);
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsFalse</span>(<span class="r1683 r">blob</span>.<span class="i property">Object</span>.<a href="/Azure.Storage.Blobs/A.html#2dbc44d678220b52" class="i property">CanGenerateSasUri</a>);
 
            <span class="c">// Act</span>
            <span class="r1683 r">blob</span>.<span class="i method">Setup</span>(<span id="r1685 rd" class="r1685 r">x</span> =&gt; <span class="r1685 r">x</span>.<a href="/Azure.Storage.Blobs/A.html#2dbc44d678220b52" class="i property">CanGenerateSasUri</a>).<span class="i method">Returns</span>(<b>true</b>);
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsTrue</span>(<span class="r1683 r">blob</span>.<span class="i property">Object</span>.<a href="/Azure.Storage.Blobs/A.html#2dbc44d678220b52" class="i property">CanGenerateSasUri</a>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public void</b> <a id="01ffbfae2d3c94e8" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GenerateSas_RequiredParameters</a>()
        {
            <span class="c">// Arrange</span>
            <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a> <span id="r1686 rd" class="r1686 r">constants</span> = <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a>.<a href="Shared/TestConstants.cs.html#203c7c99dba2deba" class="i method">Create</a>(<a href="#6047b3fd44e291e9" class="k">this</a>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1687 rd" class="r1687 r">containerName</span> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1688 rd" class="r1688 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r1689 rd" class="r1689 r">serviceUri</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span><span class="s">https://</span>{<span class="r1686 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#734b131b05a1072a" class="i property">Account</a>}<span class="s">.blob.core.windows.net</span><span class="s">&quot;</span>);
            <a href="/Azure.Storage.Blobs/A.html#9147ea6881bb009b" class="t t">BlobUriBuilder</a> <span id="r1690 rd" class="r1690 r">blobUriBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<span class="r1689 r">serviceUri</span>)
            {
                <a href="/Azure.Storage.Blobs/A.html#4093b9ec449e05da" class="i property">BlobContainerName</a> = <span class="r1687 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#66d0888b29b9df5c" class="i property">BlobName</a> = <span class="r1688 r">blobName</span>,
            };
            <a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a> <span id="r1691 rd" class="r1691 r">permissions</span> = <a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#03fad2eff3cfb473" class="i field">Read</a>;
            <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a> <span id="r1692 rd" class="r1692 r">expiresOn</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(+1);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1693 rd" class="r1693 r">blobClient</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#ccb19a557e706fd3" class="t constructor">BlobBaseClient</a>(
                <span class="r1690 r">blobUriBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#65043f17a7dc36dc" class="i method">ToUri</a>(),
                <span class="r1686 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#5e7d6f6cb2ad8ffd" class="i property">SharedKeyCredential</a>,
                <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>()));
 
            <span class="c">//Act</span>
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r1694 rd" class="r1694 r">sasUri</span> = <span class="r1693 r">blobClient</span>.<a href="/Azure.Storage.Blobs/A.html#4e1d96021d602e44" class="i method">GenerateSasUri</a>(<span class="r1691 r">permissions</span>, <span class="r1692 r">expiresOn</span>);
 
            <span class="c">// Assert</span>
            <a href="/Azure.Storage.Blobs/A.html#494fcdf61457bd9e" class="t t">BlobSasBuilder</a> <span id="r1695 rd" class="r1695 r">sasBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#0fa8cbdfa7613015" class="t constructor">BlobSasBuilder</a>(<span class="r1691 r">permissions</span>, <span class="r1692 r">expiresOn</span>)
            {
                <a href="/Azure.Storage.Blobs/A.html#ce07251198338797" class="i property">BlobContainerName</a> = <span class="r1687 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#5faddb946ddd32e7" class="i property">BlobName</a> = <span class="r1688 r">blobName</span>
            };
            <a href="/Azure.Storage.Blobs/A.html#9147ea6881bb009b" class="t t">BlobUriBuilder</a> <span id="r1696 rd" class="r1696 r">expectedUri</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<span class="r1689 r">serviceUri</span>)
            {
                <a href="/Azure.Storage.Blobs/A.html#4093b9ec449e05da" class="i property">BlobContainerName</a> = <span class="r1687 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#66d0888b29b9df5c" class="i property">BlobName</a> = <span class="r1688 r">blobName</span>,
                <a href="/Azure.Storage.Blobs/A.html#f246aac4010f2c45" class="i property">Sas</a> = <span class="r1695 r">sasBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#92d3ef6936d31322" class="i method">ToSasQueryParameters</a>(<span class="r1686 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#5e7d6f6cb2ad8ffd" class="i property">SharedKeyCredential</a>)
            };
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1696 r">expectedUri</span>.<a href="/Azure.Storage.Blobs/A.html#65043f17a7dc36dc" class="i method">ToUri</a>(), <span class="r1694 r">sasUri</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public void</b> <a id="c511605468bb69c3" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GenerateSas_Builder</a>()
        {
            <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a> <span id="r1697 rd" class="r1697 r">constants</span> = <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a>.<a href="Shared/TestConstants.cs.html#203c7c99dba2deba" class="i method">Create</a>(<a href="#6047b3fd44e291e9" class="k">this</a>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1698 rd" class="r1698 r">containerName</span> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1699 rd" class="r1699 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r1700 rd" class="r1700 r">serviceUri</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span><span class="s">https://</span>{<span class="r1697 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#734b131b05a1072a" class="i property">Account</a>}<span class="s">.blob.core.windows.net</span><span class="s">&quot;</span>);
            <a href="/Azure.Storage.Blobs/A.html#9147ea6881bb009b" class="t t">BlobUriBuilder</a> <span id="r1701 rd" class="r1701 r">blobUriBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<span class="r1700 r">serviceUri</span>)
            {
                <a href="/Azure.Storage.Blobs/A.html#4093b9ec449e05da" class="i property">BlobContainerName</a> = <span class="r1698 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#66d0888b29b9df5c" class="i property">BlobName</a> = <span class="r1699 r">blobName</span>,
            };
            <a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a> <span id="r1702 rd" class="r1702 r">permissions</span> = <a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#03fad2eff3cfb473" class="i field">Read</a>;
            <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a> <span id="r1703 rd" class="r1703 r">expiresOn</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(+1);
            <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a> <span id="r1704 rd" class="r1704 r">startsOn</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(-1);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1705 rd" class="r1705 r">blobClient</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#ccb19a557e706fd3" class="t constructor">BlobBaseClient</a>(
                <span class="r1701 r">blobUriBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#65043f17a7dc36dc" class="i method">ToUri</a>(),
                <span class="r1697 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#5e7d6f6cb2ad8ffd" class="i property">SharedKeyCredential</a>,
                <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>()));
 
            <a href="/Azure.Storage.Blobs/A.html#494fcdf61457bd9e" class="t t">BlobSasBuilder</a> <span id="r1706 rd" class="r1706 r">sasBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#0fa8cbdfa7613015" class="t constructor">BlobSasBuilder</a>(<span class="r1702 r">permissions</span>, <span class="r1703 r">expiresOn</span>)
            {
                <a href="/Azure.Storage.Blobs/A.html#ce07251198338797" class="i property">BlobContainerName</a> = <span class="r1698 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#5faddb946ddd32e7" class="i property">BlobName</a> = <span class="r1699 r">blobName</span>,
                <a href="/Azure.Storage.Blobs/A.html#8b95d8dba4910956" class="i property">StartsOn</a> = <span class="r1704 r">startsOn</span>
            };
 
            <span class="c">// Act</span>
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r1707 rd" class="r1707 r">sasUri</span> = <span class="r1705 r">blobClient</span>.<a href="/Azure.Storage.Blobs/A.html#4b2cec23f17daf75" class="i method">GenerateSasUri</a>(<span class="r1706 r">sasBuilder</span>);
 
            <span class="c">// Assert</span>
            <a href="/Azure.Storage.Blobs/A.html#494fcdf61457bd9e" class="t t">BlobSasBuilder</a> <span id="r1708 rd" class="r1708 r">sasBuilder2</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#0fa8cbdfa7613015" class="t constructor">BlobSasBuilder</a>(<span class="r1702 r">permissions</span>, <span class="r1703 r">expiresOn</span>)
            {
                <a href="/Azure.Storage.Blobs/A.html#ce07251198338797" class="i property">BlobContainerName</a> = <span class="r1698 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#5faddb946ddd32e7" class="i property">BlobName</a> = <span class="r1699 r">blobName</span>,
                <a href="/Azure.Storage.Blobs/A.html#8b95d8dba4910956" class="i property">StartsOn</a> = <span class="r1704 r">startsOn</span>
            };
            <a href="/Azure.Storage.Blobs/A.html#9147ea6881bb009b" class="t t">BlobUriBuilder</a> <span id="r1709 rd" class="r1709 r">expectedUri</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<span class="r1700 r">serviceUri</span>)
            {
                <a href="/Azure.Storage.Blobs/A.html#4093b9ec449e05da" class="i property">BlobContainerName</a> = <span class="r1698 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#66d0888b29b9df5c" class="i property">BlobName</a> = <span class="r1699 r">blobName</span>,
                <a href="/Azure.Storage.Blobs/A.html#f246aac4010f2c45" class="i property">Sas</a> = <span class="r1708 r">sasBuilder2</span>.<a href="/Azure.Storage.Blobs/A.html#92d3ef6936d31322" class="i method">ToSasQueryParameters</a>(<span class="r1697 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#5e7d6f6cb2ad8ffd" class="i property">SharedKeyCredential</a>)
            };
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1709 r">expectedUri</span>.<a href="/Azure.Storage.Blobs/A.html#65043f17a7dc36dc" class="i method">ToUri</a>(), <span class="r1707 r">sasUri</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public void</b> <a id="af536e73991a618e" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GenerateSas_BuilderNullContainerName</a>()
        {
            <span class="c">// Arrange</span>
            <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a> <span id="r1710 rd" class="r1710 r">constants</span> = <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a>.<a href="Shared/TestConstants.cs.html#203c7c99dba2deba" class="i method">Create</a>(<a href="#6047b3fd44e291e9" class="k">this</a>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1711 rd" class="r1711 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1712 rd" class="r1712 r">containerName</span> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>();
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r1713 rd" class="r1713 r">serviceUri</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span><span class="s">https://</span>{<span class="r1710 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#734b131b05a1072a" class="i property">Account</a>}<span class="s">.blob.core.windows.net</span><span class="s">&quot;</span>);
            <a href="/Azure.Storage.Blobs/A.html#9147ea6881bb009b" class="t t">BlobUriBuilder</a> <span id="r1714 rd" class="r1714 r">blobUriBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<span class="r1713 r">serviceUri</span>)
            {
                <a href="/Azure.Storage.Blobs/A.html#4093b9ec449e05da" class="i property">BlobContainerName</a> = <span class="r1712 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#66d0888b29b9df5c" class="i property">BlobName</a> = <span class="r1711 r">blobName</span>,
            };
            <a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a> <span id="r1715 rd" class="r1715 r">permissions</span> = <a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#03fad2eff3cfb473" class="i field">Read</a>;
            <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a> <span id="r1716 rd" class="r1716 r">expiresOn</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(+1);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1717 rd" class="r1717 r">blobClient</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#ccb19a557e706fd3" class="t constructor">BlobBaseClient</a>(
                <span class="r1714 r">blobUriBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#65043f17a7dc36dc" class="i method">ToUri</a>(),
                <span class="r1710 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#5e7d6f6cb2ad8ffd" class="i property">SharedKeyCredential</a>,
                <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>()));
 
            <a href="/Azure.Storage.Blobs/A.html#494fcdf61457bd9e" class="t t">BlobSasBuilder</a> <span id="r1718 rd" class="r1718 r">sasBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#0fa8cbdfa7613015" class="t constructor">BlobSasBuilder</a>(<span class="r1715 r">permissions</span>, <span class="r1716 r">expiresOn</span>)
            {
                <a href="/Azure.Storage.Blobs/A.html#ce07251198338797" class="i property">BlobContainerName</a> = <b>null</b>,
                <a href="/Azure.Storage.Blobs/A.html#5faddb946ddd32e7" class="i property">BlobName</a> = <span class="r1711 r">blobName</span>,
                <a href="/Azure.Storage.Blobs/A.html#284eb4318320734c" class="i property">Resource</a> = <span class="s">&quot;b&quot;</span>
            };
 
            <span class="c">// Act</span>
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r1719 rd" class="r1719 r">sasUri</span> = <span class="r1717 r">blobClient</span>.<a href="/Azure.Storage.Blobs/A.html#4b2cec23f17daf75" class="i method">GenerateSasUri</a>(<span class="r1718 r">sasBuilder</span>);
 
            <span class="c">// Assert</span>
            <a href="/Azure.Storage.Blobs/A.html#494fcdf61457bd9e" class="t t">BlobSasBuilder</a> <span id="r1720 rd" class="r1720 r">sasBuilder2</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#0fa8cbdfa7613015" class="t constructor">BlobSasBuilder</a>(<span class="r1715 r">permissions</span>, <span class="r1716 r">expiresOn</span>)
            {
                <a href="/Azure.Storage.Blobs/A.html#ce07251198338797" class="i property">BlobContainerName</a> = <span class="r1712 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#5faddb946ddd32e7" class="i property">BlobName</a> = <span class="r1711 r">blobName</span>,
            };
            <a href="/Azure.Storage.Blobs/A.html#9147ea6881bb009b" class="t t">BlobUriBuilder</a> <span id="r1721 rd" class="r1721 r">expectedUri</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<span class="r1713 r">serviceUri</span>)
            {
                <a href="/Azure.Storage.Blobs/A.html#4093b9ec449e05da" class="i property">BlobContainerName</a> = <span class="r1712 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#66d0888b29b9df5c" class="i property">BlobName</a> = <span class="r1711 r">blobName</span>,
                <a href="/Azure.Storage.Blobs/A.html#f246aac4010f2c45" class="i property">Sas</a> = <span class="r1720 r">sasBuilder2</span>.<a href="/Azure.Storage.Blobs/A.html#92d3ef6936d31322" class="i method">ToSasQueryParameters</a>(<span class="r1710 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#5e7d6f6cb2ad8ffd" class="i property">SharedKeyCredential</a>)
            };
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1721 r">expectedUri</span>.<a href="/Azure.Storage.Blobs/A.html#65043f17a7dc36dc" class="i method">ToUri</a>(), <span class="r1719 r">sasUri</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public void</b> <a id="5896d3de59dae525" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GenerateSas_BuilderWrongContainerName</a>()
        {
            <span class="c">// Arrange</span>
            <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a> <span id="r1722 rd" class="r1722 r">constants</span> = <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a>.<a href="Shared/TestConstants.cs.html#203c7c99dba2deba" class="i method">Create</a>(<a href="#6047b3fd44e291e9" class="k">this</a>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1723 rd" class="r1723 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1724 rd" class="r1724 r">containerName</span> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>();
            <a href="/Azure.Storage.Blobs/A.html#9147ea6881bb009b" class="t t">BlobUriBuilder</a> <span id="r1725 rd" class="r1725 r">blobUriBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span><span class="s">https://</span>{<span class="r1722 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#734b131b05a1072a" class="i property">Account</a>}<span class="s">.blob.core.windows.net</span><span class="s">&quot;</span>))
            {
                <a href="/Azure.Storage.Blobs/A.html#4093b9ec449e05da" class="i property">BlobContainerName</a> = <span class="r1724 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#66d0888b29b9df5c" class="i property">BlobName</a> = <span class="r1723 r">blobName</span>,
            };
            <a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a> <span id="r1726 rd" class="r1726 r">permissions</span> = <a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#03fad2eff3cfb473" class="i field">Read</a>;
            <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a> <span id="r1727 rd" class="r1727 r">expiresOn</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(+1);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1728 rd" class="r1728 r">blobClient</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#ccb19a557e706fd3" class="t constructor">BlobBaseClient</a>(
                <span class="r1725 r">blobUriBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#65043f17a7dc36dc" class="i method">ToUri</a>(),
                <span class="r1722 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#5e7d6f6cb2ad8ffd" class="i property">SharedKeyCredential</a>,
                <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>()));
 
            <a href="/Azure.Storage.Blobs/A.html#494fcdf61457bd9e" class="t t">BlobSasBuilder</a> <span id="r1729 rd" class="r1729 r">sasBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#0fa8cbdfa7613015" class="t constructor">BlobSasBuilder</a>(<span class="r1726 r">permissions</span>, <span class="r1727 r">expiresOn</span>)
            {
                <a href="/Azure.Storage.Blobs/A.html#ce07251198338797" class="i property">BlobContainerName</a> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>(), <span class="c">// set a different containerName</span>
                <a href="/Azure.Storage.Blobs/A.html#5faddb946ddd32e7" class="i property">BlobName</a> = <span class="r1723 r">blobName</span>,
                <a href="/Azure.Storage.Blobs/A.html#284eb4318320734c" class="i property">Resource</a> = <span class="s">&quot;b&quot;</span>
            };
 
            <span class="c">// Act</span>
            <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#631bb3deb06304ab" class="i method">AssertExpectedException</a>(
                () =&gt; <span class="r1728 r">blobClient</span>.<a href="/Azure.Storage.Blobs/A.html#4b2cec23f17daf75" class="i method">GenerateSasUri</a>(<span class="r1729 r">sasBuilder</span>),
                 <b>new</b> <a href="@0@mscorlib/A.html#265d72f49e915224" class="t constructor">InvalidOperationException</a>(<span class="s">&quot;SAS Uri cannot be generated. BlobSasBuilder.BlobContainerName does not match BlobContainerName in the Client. BlobSasBuilder.BlobContainerName must either be left empty or match the BlobContainerName in the Client&quot;</span>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public void</b> <a id="602cadc4267cd8f7" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GenerateSas_BuilderNullBlobName</a>()
        {
            <span class="c">// Arrange</span>
            <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a> <span id="r1730 rd" class="r1730 r">constants</span> = <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a>.<a href="Shared/TestConstants.cs.html#203c7c99dba2deba" class="i method">Create</a>(<a href="#6047b3fd44e291e9" class="k">this</a>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1731 rd" class="r1731 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1732 rd" class="r1732 r">containerName</span> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>();
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r1733 rd" class="r1733 r">serviceUri</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span><span class="s">https://</span>{<span class="r1730 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#734b131b05a1072a" class="i property">Account</a>}<span class="s">.blob.core.windows.net</span><span class="s">&quot;</span>);
            <a href="/Azure.Storage.Blobs/A.html#9147ea6881bb009b" class="t t">BlobUriBuilder</a> <span id="r1734 rd" class="r1734 r">blobUriBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<span class="r1733 r">serviceUri</span>)
            {
                <a href="/Azure.Storage.Blobs/A.html#4093b9ec449e05da" class="i property">BlobContainerName</a> = <span class="r1732 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#66d0888b29b9df5c" class="i property">BlobName</a> = <span class="r1731 r">blobName</span>,
            };
            <a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a> <span id="r1735 rd" class="r1735 r">permissions</span> = <a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#03fad2eff3cfb473" class="i field">Read</a>;
            <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a> <span id="r1736 rd" class="r1736 r">expiresOn</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(+1);
            <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a> <span id="r1737 rd" class="r1737 r">startsOn</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(-1);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1738 rd" class="r1738 r">blobClient</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#ccb19a557e706fd3" class="t constructor">BlobBaseClient</a>(
                <span class="r1734 r">blobUriBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#65043f17a7dc36dc" class="i method">ToUri</a>(),
                <span class="r1730 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#5e7d6f6cb2ad8ffd" class="i property">SharedKeyCredential</a>,
                <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>()));
 
            <a href="/Azure.Storage.Blobs/A.html#494fcdf61457bd9e" class="t t">BlobSasBuilder</a> <span id="r1739 rd" class="r1739 r">sasBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#0fa8cbdfa7613015" class="t constructor">BlobSasBuilder</a>(<span class="r1735 r">permissions</span>, <span class="r1736 r">expiresOn</span>)
            {
                <a href="/Azure.Storage.Blobs/A.html#ce07251198338797" class="i property">BlobContainerName</a> = <span class="r1732 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#5faddb946ddd32e7" class="i property">BlobName</a> = <b>null</b>,
                <a href="/Azure.Storage.Blobs/A.html#284eb4318320734c" class="i property">Resource</a> = <span class="s">&quot;b&quot;</span>,
                <a href="/Azure.Storage.Blobs/A.html#8b95d8dba4910956" class="i property">StartsOn</a> = <span class="r1737 r">startsOn</span>
            };
 
            <span class="c">// Act</span>
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r1740 rd" class="r1740 r">sasUri</span> = <span class="r1738 r">blobClient</span>.<a href="/Azure.Storage.Blobs/A.html#4b2cec23f17daf75" class="i method">GenerateSasUri</a>(<span class="r1739 r">sasBuilder</span>);
 
            <span class="c">// Assert</span>
            <a href="/Azure.Storage.Blobs/A.html#494fcdf61457bd9e" class="t t">BlobSasBuilder</a> <span id="r1741 rd" class="r1741 r">sasBuilder2</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#0fa8cbdfa7613015" class="t constructor">BlobSasBuilder</a>(<span class="r1735 r">permissions</span>, <span class="r1736 r">expiresOn</span>)
            {
                <a href="/Azure.Storage.Blobs/A.html#ce07251198338797" class="i property">BlobContainerName</a> = <span class="r1732 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#5faddb946ddd32e7" class="i property">BlobName</a> = <span class="r1731 r">blobName</span>,
                <a href="/Azure.Storage.Blobs/A.html#8b95d8dba4910956" class="i property">StartsOn</a> = <span class="r1737 r">startsOn</span>
            };
            <a href="/Azure.Storage.Blobs/A.html#9147ea6881bb009b" class="t t">BlobUriBuilder</a> <span id="r1742 rd" class="r1742 r">expectedUri</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<span class="r1733 r">serviceUri</span>)
            {
                <a href="/Azure.Storage.Blobs/A.html#4093b9ec449e05da" class="i property">BlobContainerName</a> = <span class="r1732 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#66d0888b29b9df5c" class="i property">BlobName</a> = <span class="r1731 r">blobName</span>,
                <a href="/Azure.Storage.Blobs/A.html#f246aac4010f2c45" class="i property">Sas</a> = <span class="r1741 r">sasBuilder2</span>.<a href="/Azure.Storage.Blobs/A.html#92d3ef6936d31322" class="i method">ToSasQueryParameters</a>(<span class="r1730 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#5e7d6f6cb2ad8ffd" class="i property">SharedKeyCredential</a>)
            };
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1742 r">expectedUri</span>.<a href="/Azure.Storage.Blobs/A.html#65043f17a7dc36dc" class="i method">ToUri</a>(), <span class="r1740 r">sasUri</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public void</b> <a id="6621401ad8bfd249" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GenerateSas_BuilderWrongBlobName</a>()
        {
            <span class="c">// Arrange</span>
            <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a> <span id="r1743 rd" class="r1743 r">constants</span> = <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a>.<a href="Shared/TestConstants.cs.html#203c7c99dba2deba" class="i method">Create</a>(<a href="#6047b3fd44e291e9" class="k">this</a>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1744 rd" class="r1744 r">containerName</span> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>();
            <a href="/Azure.Storage.Blobs/A.html#9147ea6881bb009b" class="t t">BlobUriBuilder</a> <span id="r1745 rd" class="r1745 r">blobUriBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span><span class="s">https://</span>{<span class="r1743 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#734b131b05a1072a" class="i property">Account</a>}<span class="s">.blob.core.windows.net</span><span class="s">&quot;</span>))
            {
                <a href="/Azure.Storage.Blobs/A.html#4093b9ec449e05da" class="i property">BlobContainerName</a> = <span class="r1744 r">containerName</span>,
            };
            <a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a> <span id="r1746 rd" class="r1746 r">permissions</span> = <a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#03fad2eff3cfb473" class="i field">Read</a>;
            <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a> <span id="r1747 rd" class="r1747 r">expiresOn</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(+1);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1748 rd" class="r1748 r">blobClient</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#ccb19a557e706fd3" class="t constructor">BlobBaseClient</a>(
                <span class="r1745 r">blobUriBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#65043f17a7dc36dc" class="i method">ToUri</a>(),
                <span class="r1743 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#5e7d6f6cb2ad8ffd" class="i property">SharedKeyCredential</a>,
                <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>()));
 
            <a href="/Azure.Storage.Blobs/A.html#494fcdf61457bd9e" class="t t">BlobSasBuilder</a> <span id="r1749 rd" class="r1749 r">sasBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#0fa8cbdfa7613015" class="t constructor">BlobSasBuilder</a>(<span class="r1746 r">permissions</span>, <span class="r1747 r">expiresOn</span>)
            {
                <a href="/Azure.Storage.Blobs/A.html#ce07251198338797" class="i property">BlobContainerName</a> = <span class="r1744 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#5faddb946ddd32e7" class="i property">BlobName</a> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>(), <span class="c">// set a different blobName</span>
                <a href="/Azure.Storage.Blobs/A.html#284eb4318320734c" class="i property">Resource</a> = <span class="s">&quot;b&quot;</span>
            };
 
            <span class="c">// Act</span>
            <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#631bb3deb06304ab" class="i method">AssertExpectedException</a>(
                () =&gt; <span class="r1748 r">blobClient</span>.<a href="/Azure.Storage.Blobs/A.html#4b2cec23f17daf75" class="i method">GenerateSasUri</a>(<span class="r1749 r">sasBuilder</span>),
                 <b>new</b> <a href="@0@mscorlib/A.html#265d72f49e915224" class="t constructor">InvalidOperationException</a>(<span class="s">&quot;SAS Uri cannot be generated. BlobSasBuilder.BlobName does not match Name in the Client. BlobSasBuilder.BlobName must either be left empty or match the Name in the Client&quot;</span>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public void</b> <a id="41af92efd5e4b5a2" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GenerateSas_BuilderNullSnapshot</a>()
        {
            <span class="c">// Arrange</span>
            <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a> <span id="r1750 rd" class="r1750 r">constants</span> = <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a>.<a href="Shared/TestConstants.cs.html#203c7c99dba2deba" class="i method">Create</a>(<a href="#6047b3fd44e291e9" class="k">this</a>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1751 rd" class="r1751 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1752 rd" class="r1752 r">containerName</span> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1753 rd" class="r1753 r">snapshot</span> = <span class="s">&quot;2020-07-03T12:45:46.1234567Z&quot;</span>;
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r1754 rd" class="r1754 r">serviceUri</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span><span class="s">https://</span>{<span class="r1750 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#734b131b05a1072a" class="i property">Account</a>}<span class="s">.blob.core.windows.net</span><span class="s">&quot;</span>);
            <a href="/Azure.Storage.Blobs/A.html#9147ea6881bb009b" class="t t">BlobUriBuilder</a> <span id="r1755 rd" class="r1755 r">blobUriBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<span class="r1754 r">serviceUri</span>)
            {
                <a href="/Azure.Storage.Blobs/A.html#4093b9ec449e05da" class="i property">BlobContainerName</a> = <span class="r1752 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#66d0888b29b9df5c" class="i property">BlobName</a> = <span class="r1751 r">blobName</span>,
                <a href="/Azure.Storage.Blobs/A.html#ea93c79a4f833907" class="i property">Snapshot</a> = <span class="r1753 r">snapshot</span>
            };
            <a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a> <span id="r1756 rd" class="r1756 r">permissions</span> = <a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#03fad2eff3cfb473" class="i field">Read</a>;
            <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a> <span id="r1757 rd" class="r1757 r">expiresOn</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(+1);
            <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a> <span id="r1758 rd" class="r1758 r">startsOn</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(-1);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1759 rd" class="r1759 r">blobClient</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#ccb19a557e706fd3" class="t constructor">BlobBaseClient</a>(
                <span class="r1755 r">blobUriBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#65043f17a7dc36dc" class="i method">ToUri</a>(),
                <span class="r1750 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#5e7d6f6cb2ad8ffd" class="i property">SharedKeyCredential</a>,
                <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>()));
 
            <a href="/Azure.Storage.Blobs/A.html#494fcdf61457bd9e" class="t t">BlobSasBuilder</a> <span id="r1760 rd" class="r1760 r">sasBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#0fa8cbdfa7613015" class="t constructor">BlobSasBuilder</a>(<span class="r1756 r">permissions</span>, <span class="r1757 r">expiresOn</span>)
            {
                <a href="/Azure.Storage.Blobs/A.html#ce07251198338797" class="i property">BlobContainerName</a> = <span class="r1752 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#5faddb946ddd32e7" class="i property">BlobName</a> = <span class="r1751 r">blobName</span>,
                <a href="/Azure.Storage.Blobs/A.html#e2be225cd2de4de2" class="i property">Snapshot</a> = <b>null</b>,
                <a href="/Azure.Storage.Blobs/A.html#284eb4318320734c" class="i property">Resource</a> = <span class="s">&quot;b&quot;</span>,
                <a href="/Azure.Storage.Blobs/A.html#8b95d8dba4910956" class="i property">StartsOn</a> = <span class="r1758 r">startsOn</span>
            };
 
            <span class="c">// Act</span>
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r1761 rd" class="r1761 r">sasUri</span> = <span class="r1759 r">blobClient</span>.<a href="/Azure.Storage.Blobs/A.html#4b2cec23f17daf75" class="i method">GenerateSasUri</a>(<span class="r1760 r">sasBuilder</span>);
 
            <span class="c">// Assert</span>
            <a href="/Azure.Storage.Blobs/A.html#494fcdf61457bd9e" class="t t">BlobSasBuilder</a> <span id="r1762 rd" class="r1762 r">sasBuilder2</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#0fa8cbdfa7613015" class="t constructor">BlobSasBuilder</a>(<span class="r1756 r">permissions</span>, <span class="r1757 r">expiresOn</span>)
            {
                <a href="/Azure.Storage.Blobs/A.html#ce07251198338797" class="i property">BlobContainerName</a> = <span class="r1752 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#5faddb946ddd32e7" class="i property">BlobName</a> = <span class="r1751 r">blobName</span>,
                <a href="/Azure.Storage.Blobs/A.html#e2be225cd2de4de2" class="i property">Snapshot</a> = <span class="r1753 r">snapshot</span>,
                <a href="/Azure.Storage.Blobs/A.html#8b95d8dba4910956" class="i property">StartsOn</a> = <span class="r1758 r">startsOn</span>
            };
            <a href="/Azure.Storage.Blobs/A.html#9147ea6881bb009b" class="t t">BlobUriBuilder</a> <span id="r1763 rd" class="r1763 r">expectedUri</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<span class="r1754 r">serviceUri</span>)
            {
                <a href="/Azure.Storage.Blobs/A.html#4093b9ec449e05da" class="i property">BlobContainerName</a> = <span class="r1752 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#66d0888b29b9df5c" class="i property">BlobName</a> = <span class="r1751 r">blobName</span>,
                <a href="/Azure.Storage.Blobs/A.html#ea93c79a4f833907" class="i property">Snapshot</a> = <span class="r1753 r">snapshot</span>,
                <a href="/Azure.Storage.Blobs/A.html#f246aac4010f2c45" class="i property">Sas</a> = <span class="r1762 r">sasBuilder2</span>.<a href="/Azure.Storage.Blobs/A.html#92d3ef6936d31322" class="i method">ToSasQueryParameters</a>(<span class="r1750 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#5e7d6f6cb2ad8ffd" class="i property">SharedKeyCredential</a>)
            };
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1763 r">expectedUri</span>.<a href="/Azure.Storage.Blobs/A.html#65043f17a7dc36dc" class="i method">ToUri</a>(), <span class="r1761 r">sasUri</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public void</b> <a id="6c95048591ee44f0" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GenerateSas_BuilderWrongSnapshot</a>()
        {
            <span class="c">// Arrange</span>
            <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a> <span id="r1764 rd" class="r1764 r">constants</span> = <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a>.<a href="Shared/TestConstants.cs.html#203c7c99dba2deba" class="i method">Create</a>(<a href="#6047b3fd44e291e9" class="k">this</a>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1765 rd" class="r1765 r">snapshot</span> = <span class="s">&quot;2020-07-03T12:45:46.1234567Z&quot;</span>;
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1766 rd" class="r1766 r">differentSnapshot</span> = <span class="s">&quot;2019-07-03T12:45:46.1234567Z&quot;</span>;
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1767 rd" class="r1767 r">containerName</span> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1768 rd" class="r1768 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
            <a href="/Azure.Storage.Blobs/A.html#9147ea6881bb009b" class="t t">BlobUriBuilder</a> <span id="r1769 rd" class="r1769 r">blobUriBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span><span class="s">https://</span>{<span class="r1764 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#734b131b05a1072a" class="i property">Account</a>}<span class="s">.blob.core.windows.net</span><span class="s">&quot;</span>))
            {
                <a href="/Azure.Storage.Blobs/A.html#4093b9ec449e05da" class="i property">BlobContainerName</a> = <span class="r1767 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#66d0888b29b9df5c" class="i property">BlobName</a> = <span class="r1768 r">blobName</span>,
                <a href="/Azure.Storage.Blobs/A.html#ea93c79a4f833907" class="i property">Snapshot</a> = <span class="r1765 r">snapshot</span>
            };
            <a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a> <span id="r1770 rd" class="r1770 r">permissions</span> = <a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#03fad2eff3cfb473" class="i field">Read</a>;
            <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a> <span id="r1771 rd" class="r1771 r">expiresOn</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(+1);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1772 rd" class="r1772 r">blobClient</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#ccb19a557e706fd3" class="t constructor">BlobBaseClient</a>(
                <span class="r1769 r">blobUriBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#65043f17a7dc36dc" class="i method">ToUri</a>(),
                <span class="r1764 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#5e7d6f6cb2ad8ffd" class="i property">SharedKeyCredential</a>,
                <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>()));
 
            <a href="/Azure.Storage.Blobs/A.html#494fcdf61457bd9e" class="t t">BlobSasBuilder</a> <span id="r1773 rd" class="r1773 r">sasBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#0fa8cbdfa7613015" class="t constructor">BlobSasBuilder</a>(<span class="r1770 r">permissions</span>, <span class="r1771 r">expiresOn</span>)
            {
                <a href="/Azure.Storage.Blobs/A.html#ce07251198338797" class="i property">BlobContainerName</a> = <span class="r1767 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#5faddb946ddd32e7" class="i property">BlobName</a> = <span class="r1768 r">blobName</span>,
                <a href="/Azure.Storage.Blobs/A.html#284eb4318320734c" class="i property">Resource</a> = <span class="s">&quot;bs&quot;</span>,
                <a href="/Azure.Storage.Blobs/A.html#e2be225cd2de4de2" class="i property">Snapshot</a> = <span class="r1766 r">differentSnapshot</span>
            };
 
            <span class="c">// Act</span>
            <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#631bb3deb06304ab" class="i method">AssertExpectedException</a>(
                () =&gt; <span class="r1772 r">blobClient</span>.<a href="/Azure.Storage.Blobs/A.html#4b2cec23f17daf75" class="i method">GenerateSasUri</a>(<span class="r1773 r">sasBuilder</span>),
                 <b>new</b> <a href="@0@mscorlib/A.html#265d72f49e915224" class="t constructor">InvalidOperationException</a>(<span class="s">&quot;SAS Uri cannot be generated. BlobSasBuilder.Snapshot does not match snapshot value in the URI in the Client. BlobSasBuilder.Snapshot must either be left empty or match the snapshot value in the URI in the Client&quot;</span>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public void</b> <a id="70957ba5b0aaaaaf" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GenerateSas_BuilderNullVersion</a>()
        {
            <span class="c">// Arrange</span>
            <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a> <span id="r1774 rd" class="r1774 r">constants</span> = <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a>.<a href="Shared/TestConstants.cs.html#203c7c99dba2deba" class="i method">Create</a>(<a href="#6047b3fd44e291e9" class="k">this</a>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1775 rd" class="r1775 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1776 rd" class="r1776 r">containerName</span> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1777 rd" class="r1777 r">versionId</span> = <span class="s">&quot;2020-07-03T12:45:46.1234567Z&quot;</span>;
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r1778 rd" class="r1778 r">serviceUri</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span><span class="s">https://</span>{<span class="r1774 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#734b131b05a1072a" class="i property">Account</a>}<span class="s">.blob.core.windows.net</span><span class="s">&quot;</span>);
            <a href="/Azure.Storage.Blobs/A.html#9147ea6881bb009b" class="t t">BlobUriBuilder</a> <span id="r1779 rd" class="r1779 r">blobUriBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<span class="r1778 r">serviceUri</span>)
            {
                <a href="/Azure.Storage.Blobs/A.html#4093b9ec449e05da" class="i property">BlobContainerName</a> = <span class="r1776 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#66d0888b29b9df5c" class="i property">BlobName</a> = <span class="r1775 r">blobName</span>,
                <a href="/Azure.Storage.Blobs/A.html#966ee7862d048377" class="i property">VersionId</a> = <span class="r1777 r">versionId</span>
            };
            <a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a> <span id="r1780 rd" class="r1780 r">permissions</span> = <a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#03fad2eff3cfb473" class="i field">Read</a>;
            <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a> <span id="r1781 rd" class="r1781 r">expiresOn</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(+1);
            <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a> <span id="r1782 rd" class="r1782 r">startsOn</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(-1);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1783 rd" class="r1783 r">blobClient</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#ccb19a557e706fd3" class="t constructor">BlobBaseClient</a>(
                <span class="r1779 r">blobUriBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#65043f17a7dc36dc" class="i method">ToUri</a>(),
                <span class="r1774 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#5e7d6f6cb2ad8ffd" class="i property">SharedKeyCredential</a>,
                <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>()));
 
            <a href="/Azure.Storage.Blobs/A.html#494fcdf61457bd9e" class="t t">BlobSasBuilder</a> <span id="r1784 rd" class="r1784 r">sasBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#0fa8cbdfa7613015" class="t constructor">BlobSasBuilder</a>(<span class="r1780 r">permissions</span>, <span class="r1781 r">expiresOn</span>)
            {
                <a href="/Azure.Storage.Blobs/A.html#ce07251198338797" class="i property">BlobContainerName</a> = <span class="r1776 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#5faddb946ddd32e7" class="i property">BlobName</a> = <span class="r1775 r">blobName</span>,
                <a href="/Azure.Storage.Blobs/A.html#13b5a916f6e7b236" class="i property">BlobVersionId</a> = <b>null</b>,
                <a href="/Azure.Storage.Blobs/A.html#284eb4318320734c" class="i property">Resource</a> = <span class="s">&quot;b&quot;</span>,
                <a href="/Azure.Storage.Blobs/A.html#8b95d8dba4910956" class="i property">StartsOn</a> = <span class="r1782 r">startsOn</span>
            };
 
            <span class="c">// Act</span>
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r1785 rd" class="r1785 r">sasUri</span> = <span class="r1783 r">blobClient</span>.<a href="/Azure.Storage.Blobs/A.html#4b2cec23f17daf75" class="i method">GenerateSasUri</a>(<span class="r1784 r">sasBuilder</span>);
 
            <span class="c">// Assert</span>
            <a href="/Azure.Storage.Blobs/A.html#494fcdf61457bd9e" class="t t">BlobSasBuilder</a> <span id="r1786 rd" class="r1786 r">sasBuilder2</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#0fa8cbdfa7613015" class="t constructor">BlobSasBuilder</a>(<span class="r1780 r">permissions</span>, <span class="r1781 r">expiresOn</span>)
            {
                <a href="/Azure.Storage.Blobs/A.html#ce07251198338797" class="i property">BlobContainerName</a> = <span class="r1776 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#5faddb946ddd32e7" class="i property">BlobName</a> = <span class="r1775 r">blobName</span>,
                <a href="/Azure.Storage.Blobs/A.html#13b5a916f6e7b236" class="i property">BlobVersionId</a> = <span class="r1777 r">versionId</span>,
                <a href="/Azure.Storage.Blobs/A.html#8b95d8dba4910956" class="i property">StartsOn</a> = <span class="r1782 r">startsOn</span>
            };
            <a href="/Azure.Storage.Blobs/A.html#9147ea6881bb009b" class="t t">BlobUriBuilder</a> <span id="r1787 rd" class="r1787 r">expectedUri</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<span class="r1778 r">serviceUri</span>)
            {
                <a href="/Azure.Storage.Blobs/A.html#4093b9ec449e05da" class="i property">BlobContainerName</a> = <span class="r1776 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#66d0888b29b9df5c" class="i property">BlobName</a> = <span class="r1775 r">blobName</span>,
                <a href="/Azure.Storage.Blobs/A.html#966ee7862d048377" class="i property">VersionId</a> = <span class="r1777 r">versionId</span>,
                <a href="/Azure.Storage.Blobs/A.html#f246aac4010f2c45" class="i property">Sas</a> = <span class="r1786 r">sasBuilder2</span>.<a href="/Azure.Storage.Blobs/A.html#92d3ef6936d31322" class="i method">ToSasQueryParameters</a>(<span class="r1774 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#5e7d6f6cb2ad8ffd" class="i property">SharedKeyCredential</a>)
            };
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1787 r">expectedUri</span>.<a href="/Azure.Storage.Blobs/A.html#65043f17a7dc36dc" class="i method">ToUri</a>(), <span class="r1785 r">sasUri</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public void</b> <a id="d9dcbf6ab8b2f513" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">GenerateSas_BuilderWrongVersion</a>()
        {
            <span class="c">// Arrange</span>
            <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a> <span id="r1788 rd" class="r1788 r">constants</span> = <a href="Shared/TestConstants.cs.html#9775587e7faf076b" class="t t">TestConstants</a>.<a href="Shared/TestConstants.cs.html#203c7c99dba2deba" class="i method">Create</a>(<a href="#6047b3fd44e291e9" class="k">this</a>);
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1789 rd" class="r1789 r">blobVersionId</span> = <span class="s">&quot;2020-07-03T12:45:46.1234567Z&quot;</span>;
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1790 rd" class="r1790 r">diffBlobVersionId</span> = <span class="s">&quot;2019-07-03T12:45:46.1234567Z&quot;</span>;
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1791 rd" class="r1791 r">containerName</span> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1792 rd" class="r1792 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r1793 rd" class="r1793 r">blobEndpoint</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span><span class="s">https://</span>{<span class="r1788 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#734b131b05a1072a" class="i property">Account</a>}<span class="s">.blob.core.windows.net</span><span class="s">&quot;</span>);
            <a href="/Azure.Storage.Blobs/A.html#9147ea6881bb009b" class="t t">BlobUriBuilder</a> <span id="r1794 rd" class="r1794 r">blobUriBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<span class="r1793 r">blobEndpoint</span>)
            {
                <a href="/Azure.Storage.Blobs/A.html#4093b9ec449e05da" class="i property">BlobContainerName</a> = <span class="r1791 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#66d0888b29b9df5c" class="i property">BlobName</a> = <span class="r1792 r">blobName</span>,
                <a href="/Azure.Storage.Blobs/A.html#966ee7862d048377" class="i property">VersionId</a> = <span class="r1789 r">blobVersionId</span>
            };
 
            <a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a> <span id="r1795 rd" class="r1795 r">permissions</span> = <a href="/Azure.Storage.Blobs/A.html#5722417b7d1ec193" class="t t">BlobSasPermissions</a>.<a href="/Azure.Storage.Blobs/A.html#03fad2eff3cfb473" class="i field">Read</a>;
            <a href="@0@mscorlib/A.html#68b4bb83ce8d1c31" class="t t">DateTimeOffset</a> <span id="r1796 rd" class="r1796 r">expiresOn</span> = <a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#121ddf7990f13459" class="i property">UtcNow</a>.<a href="@0@mscorlib/A.html#f349aa0ae92c3ec6" class="i method">AddHours</a>(+1);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1797 rd" class="r1797 r">blobClient</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<b>new</b> <a href="/Azure.Storage.Blobs/A.html#ccb19a557e706fd3" class="t constructor">BlobBaseClient</a>(
                <span class="r1794 r">blobUriBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#65043f17a7dc36dc" class="i method">ToUri</a>(),
                <span class="r1788 r">constants</span>.<a href="Shared/TestConstants.cs.html#268d664916096044" class="i property">Sas</a>.<a href="Shared/TestConstants.cs.html#5e7d6f6cb2ad8ffd" class="i property">SharedKeyCredential</a>,
                <a href="BlobTestBase.cs.html#f8370dc6f509ea66" class="i method">GetOptions</a>()));
 
            <a href="/Azure.Storage.Blobs/A.html#494fcdf61457bd9e" class="t t">BlobSasBuilder</a> <span id="r1798 rd" class="r1798 r">sasBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#0fa8cbdfa7613015" class="t constructor">BlobSasBuilder</a>(<span class="r1795 r">permissions</span>, <span class="r1796 r">expiresOn</span>)
            {
                <a href="/Azure.Storage.Blobs/A.html#ce07251198338797" class="i property">BlobContainerName</a> = <span class="r1791 r">containerName</span>,
                <a href="/Azure.Storage.Blobs/A.html#5faddb946ddd32e7" class="i property">BlobName</a> = <span class="r1792 r">blobName</span>,
                <a href="/Azure.Storage.Blobs/A.html#284eb4318320734c" class="i property">Resource</a> = <span class="s">&quot;bs&quot;</span>,
                <a href="/Azure.Storage.Blobs/A.html#13b5a916f6e7b236" class="i property">BlobVersionId</a> = <span class="r1790 r">diffBlobVersionId</span>,
            };
 
            <span class="c">// Act</span>
            <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#631bb3deb06304ab" class="i method">AssertExpectedException</a>(
                () =&gt; <span class="r1797 r">blobClient</span>.<a href="/Azure.Storage.Blobs/A.html#4b2cec23f17daf75" class="i method">GenerateSasUri</a>(<span class="r1798 r">sasBuilder</span>),
                 <b>new</b> <a href="@0@mscorlib/A.html#265d72f49e915224" class="t constructor">InvalidOperationException</a>(<span class="s">&quot;SAS Uri cannot be generated. BlobSasBuilder.BlobVersionId does not match snapshot value in the URI in the Client. BlobSasBuilder.BlobVersionId must either be left empty or match the snapshot value in the URI in the Client&quot;</span>));
        }
        <span class="k preprocess">#</span><span class="k preprocess">endregion</span>
 
        <span class="c">//[Test]</span>
        <span class="c">//public async Task SetTierAsync_Batch()</span>
        <span class="c">//{</span>
        <span class="c">//    using (this.GetNewContainer(out var container, service: this.GetServiceClient_PreviewAccount_SharedKey()))</span>
        <span class="c">//    {</span>
        <span class="c">//        const int blobSize = Constants.KB;</span>
        <span class="c">//        var data = this.GetRandomBuffer(blobSize);</span>
 
        <span class="c">//        var blob1 = this.InstrumentClient(container.CreateBlockBlobClient(this.GetNewBlobName()));</span>
        <span class="c">//        using (var stream = new MemoryStream(data))</span>
        <span class="c">//        {</span>
        <span class="c">//            await blob1.UploadAsync(stream);</span>
        <span class="c">//        }</span>
 
        <span class="c">//        var blob2 = this.InstrumentClient(container.CreateBlockBlobClient(this.GetNewBlobName()));</span>
        <span class="c">//        using (var stream = new MemoryStream(data))</span>
        <span class="c">//        {</span>
        <span class="c">//            await blob2.UploadAsync(stream);</span>
        <span class="c">//        }</span>
 
        <span class="c">//        var batch =</span>
        <span class="c">//            blob1.SetTierAsync(AccessTier.Cool)</span>
        <span class="c">//            .And(blob2.SetTierAsync(AccessTier.Cool))</span>
        <span class="c">//            ;</span>
 
        <span class="c">//        var result = await batch;</span>
 
        <span class="c">//        Assert.IsNotNull(result);</span>
        <span class="c">//        Assert.AreEqual(2, result.Length);</span>
        <span class="c">//        Assert.IsNotNull(result[0].RequestId);</span>
        <span class="c">//        Assert.IsNotNull(result[1].RequestId);</span>
        <span class="c">//    }</span>
        <span class="c">//}</span>
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public void</b> <a id="43eaffd927c31b6a" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">WithSnapshot</a>()
        {
            <span class="c">// Arrange</span>
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1799 rd" class="r1799 r">accountName</span> = <span class="s">&quot;accountname&quot;</span>;
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1800 rd" class="r1800 r">containerName</span> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1801 rd" class="r1801 r">blobName</span> = <span class="s">&quot;my/blob/name&quot;</span>;
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1802 rd" class="r1802 r">snapshot</span> = <span class="s">&quot;2020-07-03T12:45:46.1234567Z&quot;</span>;
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r1803 rd" class="r1803 r">uri</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span><span class="s">https://</span>{<span class="r1799 r">accountName</span>}<span class="s">.blob.core.windows.net/</span>{<span class="r1800 r">containerName</span>}<span class="s">/</span>{<span class="r1801 r">blobName</span>.<a href="/Azure.Storage.Blobs/A.html#9af47b9266e14699" class="i method">EscapePath</a>()}<span class="s">&quot;</span>);
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r1804 rd" class="r1804 r">snapshotUri</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span><span class="s">https://</span>{<span class="r1799 r">accountName</span>}<span class="s">.blob.core.windows.net/</span>{<span class="r1800 r">containerName</span>}<span class="s">/</span>{<span class="r1801 r">blobName</span>.<a href="/Azure.Storage.Blobs/A.html#9af47b9266e14699" class="i method">EscapePath</a>()}<span class="s">?snapshot=</span>{<span class="r1802 r">snapshot</span>}<span class="s">&quot;</span>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1805 rd" class="r1805 r">blobBaseClient</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(<span class="r1803 r">uri</span>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1806 rd" class="r1806 r">snapshotBlobBaseClient</span> = <span class="r1805 r">blobBaseClient</span>.<a href="/Azure.Storage.Blobs/A.html#e456724c864c2308" class="i method">WithSnapshot</a>(<span class="r1802 r">snapshot</span>);
            <a href="/Azure.Storage.Blobs/A.html#9147ea6881bb009b" class="t t">BlobUriBuilder</a> <span id="r1807 rd" class="r1807 r">blobUriBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<span class="r1806 r">snapshotBlobBaseClient</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>);
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1799 r">accountName</span>, <span class="r1806 r">snapshotBlobBaseClient</span>.<a href="/Azure.Storage.Blobs/A.html#0ec0e7af4edc605e" class="i property">AccountName</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1800 r">containerName</span>, <span class="r1806 r">snapshotBlobBaseClient</span>.<a href="/Azure.Storage.Blobs/A.html#8125465144699fdb" class="i property">BlobContainerName</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1801 r">blobName</span>, <span class="r1806 r">snapshotBlobBaseClient</span>.<a href="/Azure.Storage.Blobs/A.html#157bb830a0c2db34" class="i property">Name</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1804 r">snapshotUri</span>, <span class="r1806 r">snapshotBlobBaseClient</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>);
 
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1799 r">accountName</span>, <span class="r1807 r">blobUriBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#a4106776a1aa6850" class="i property">AccountName</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1800 r">containerName</span>, <span class="r1807 r">blobUriBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#4093b9ec449e05da" class="i property">BlobContainerName</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1801 r">blobName</span>, <span class="r1807 r">blobUriBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#66d0888b29b9df5c" class="i property">BlobName</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1802 r">snapshot</span>, <span class="r1807 r">blobUriBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#ea93c79a4f833907" class="i property">Snapshot</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1804 r">snapshotUri</span>, <span class="r1807 r">blobUriBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#65043f17a7dc36dc" class="i method">ToUri</a>());
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public void</b> <a id="ed26f2feedc9c647" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">WithVersion</a>()
        {
            <span class="c">// Arrange</span>
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1808 rd" class="r1808 r">accountName</span> = <span class="s">&quot;accountname&quot;</span>;
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1809 rd" class="r1809 r">containerName</span> = <a href="BlobTestBase.cs.html#53942d1c1a7ceb43" class="i method">GetNewContainerName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1810 rd" class="r1810 r">blobName</span> = <span class="s">&quot;my/blob/name&quot;</span>;
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1811 rd" class="r1811 r">versionId</span> = <span class="s">&quot;2020-07-03T12:45:46.1234567Z&quot;</span>;
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r1812 rd" class="r1812 r">uri</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span><span class="s">https://</span>{<span class="r1808 r">accountName</span>}<span class="s">.blob.core.windows.net/</span>{<span class="r1809 r">containerName</span>}<span class="s">/</span>{<span class="r1810 r">blobName</span>.<a href="/Azure.Storage.Blobs/A.html#9af47b9266e14699" class="i method">EscapePath</a>()}<span class="s">&quot;</span>);
            <a href="@0@System/A.html#991565dd25f47c90" class="t t">Uri</a> <span id="r1813 rd" class="r1813 r">versionUri</span> = <b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">$&quot;</span><span class="s">https://</span>{<span class="r1808 r">accountName</span>}<span class="s">.blob.core.windows.net/</span>{<span class="r1809 r">containerName</span>}<span class="s">/</span>{<span class="r1810 r">blobName</span>.<a href="/Azure.Storage.Blobs/A.html#9af47b9266e14699" class="i method">EscapePath</a>()}<span class="s">?versionid=</span>{<span class="r1811 r">versionId</span>}<span class="s">&quot;</span>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1814 rd" class="r1814 r">blobBaseClient</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#4c748802a16285ef" class="t constructor">BlobBaseClient</a>(<span class="r1812 r">uri</span>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1815 rd" class="r1815 r">versionBlobBaseClient</span> = <span class="r1814 r">blobBaseClient</span>.<a href="/Azure.Storage.Blobs/A.html#0c0c41d22044da57" class="i method">WithVersion</a>(<span class="r1811 r">versionId</span>);
            <a href="/Azure.Storage.Blobs/A.html#9147ea6881bb009b" class="t t">BlobUriBuilder</a> <span id="r1816 rd" class="r1816 r">blobUriBuilder</span> = <b>new</b> <a href="/Azure.Storage.Blobs/A.html#94696beb18688001" class="t constructor">BlobUriBuilder</a>(<span class="r1815 r">versionBlobBaseClient</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>);
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1808 r">accountName</span>, <span class="r1815 r">versionBlobBaseClient</span>.<a href="/Azure.Storage.Blobs/A.html#0ec0e7af4edc605e" class="i property">AccountName</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1809 r">containerName</span>, <span class="r1815 r">versionBlobBaseClient</span>.<a href="/Azure.Storage.Blobs/A.html#8125465144699fdb" class="i property">BlobContainerName</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1810 r">blobName</span>, <span class="r1815 r">versionBlobBaseClient</span>.<a href="/Azure.Storage.Blobs/A.html#157bb830a0c2db34" class="i property">Name</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1813 r">versionUri</span>, <span class="r1815 r">versionBlobBaseClient</span>.<a href="/Azure.Storage.Blobs/A.html#ae31d23a19240d50" class="i property">Uri</a>);
 
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1808 r">accountName</span>, <span class="r1816 r">blobUriBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#a4106776a1aa6850" class="i property">AccountName</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1809 r">containerName</span>, <span class="r1816 r">blobUriBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#4093b9ec449e05da" class="i property">BlobContainerName</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1810 r">blobName</span>, <span class="r1816 r">blobUriBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#66d0888b29b9df5c" class="i property">BlobName</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1811 r">versionId</span>, <span class="r1816 r">blobUriBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#966ee7862d048377" class="i property">VersionId</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1813 r">versionUri</span>, <span class="r1816 r">blobUriBuilder</span>.<a href="/Azure.Storage.Blobs/A.html#65043f17a7dc36dc" class="i method">ToUri</a>());
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="e11825ad40e74eca" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">WithCustomerProvidedKey</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1817 rd" class="r1817 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1818 rd" class="r1818 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
            <a href="/Azure.Storage.Blobs/A.html#f11bcd56fc9ad22a" class="t t">CustomerProvidedKey</a> <span id="r1819 rd" class="r1819 r">customerProvidedKey</span> = <a href="BlobTestBase.cs.html#b481ac8680ce4d57" class="i method">GetCustomerProvidedKey</a>();
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r1820 rd" class="r1820 r">blockBlobClient</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1817 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<span class="r1818 r">blobName</span>).<a href="/Azure.Storage.Blobs/A.html#a29450bfddd3d355" class="i method">WithCustomerProvidedKey</a>(<span class="r1819 r">customerProvidedKey</span>));
            <b>byte</b>[] <span id="r1821 rd" class="r1821 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="@0@mscorlib/A.html#f956b0c07e86df64" class="t t">Stream</a> <span id="r1822 rd" class="r1822 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r1821 r">data</span>);
            <b>await</b> <span class="r1820 r">blockBlobClient</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r1822 r">stream</span>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1823 rd" class="r1823 r">cpkBlobClient</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1817 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#54038cd6848b9aae" class="i method">GetBlobBaseClient</a>(<span class="r1818 r">blobName</span>).<a href="/Azure.Storage.Blobs/A.html#759ee281428ec3fd" class="i method">WithCustomerProvidedKey</a>(<span class="r1819 r">customerProvidedKey</span>));
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#3ce0c298c6f02684" class="t t">BlobDownloadInfo</a>&gt; <span id="r1824 rd" class="r1824 r">downloadResponse</span> = <b>await</b> <span class="r1823 r">cpkBlobClient</span>.<a href="/Azure.Storage.Blobs/A.html#3d24e9ffd423b49e" class="i method">DownloadAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1819 r">customerProvidedKey</span>.<a href="/Azure.Storage.Blobs/A.html#7af1811ae000bcba" class="i property">EncryptionKeyHash</a>, <span class="r1824 r">downloadResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#e967990c9b1e7bf1" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#31af33edca26a19e" class="i property">EncryptionKeySha256</a>);
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1825 rd" class="r1825 r">noCpkBlobClient</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1823 r">cpkBlobClient</span>.<a href="/Azure.Storage.Blobs/A.html#759ee281428ec3fd" class="i method">WithCustomerProvidedKey</a>(<b>null</b>));
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1825 r">noCpkBlobClient</span>.<a href="/Azure.Storage.Blobs/A.html#3d24e9ffd423b49e" class="i method">DownloadAsync</a>(),
                <span id="r1826 rd" class="r1826 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#e0d947616d6aba70" class="t t">BlobErrorCode</a>.<a href="/Azure.Storage.Blobs/A.html#ea2cd36dd434d8bd" class="i property">BlobUsesCustomerSpecifiedEncryption</a>.<a href="/Azure.Storage.Blobs/A.html#956fff1c6f30e077" class="i method">ToString</a>(), <span class="r1826 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#6de5212dacb3a5ca" class="i field">V2019_07_07</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="241ffb1ec7a442db" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">WithEncryptionScope</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1827 rd" class="r1827 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1828 rd" class="r1828 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1829 rd" class="r1829 r">encryptionScope</span> = <a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#0234405d8d5e089b" class="i property">EncryptionScope</a>;
            <a href="/Azure.Storage.Blobs/A.html#a021487ec216e15d" class="t t">BlockBlobClient</a> <span id="r1830 rd" class="r1830 r">blockBlobClient</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1827 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#9212d86e1f5d0a57" class="i method">GetBlockBlobClient</a>(<span class="r1828 r">blobName</span>).<a href="/Azure.Storage.Blobs/A.html#73519c629746cdda" class="i method">WithEncryptionScope</a>(<span class="r1829 r">encryptionScope</span>));
            <b>byte</b>[] <span id="r1831 rd" class="r1831 r">data</span> = <a href="Shared/StorageTestBase.cs.html#0e277537c03074a3" class="i method">GetRandomBuffer</a>(<a href="/Azure.Storage.Blobs/A.html#732c01506b3b1b85" class="t t">Constants</a>.<a href="/Azure.Storage.Blobs/A.html#4240fd6a2382c38e" class="i field">KB</a>);
            <a href="@0@mscorlib/A.html#f956b0c07e86df64" class="t t">Stream</a> <span id="r1832 rd" class="r1832 r">stream</span> = <b>new</b> <a href="@0@mscorlib/A.html#f92fa270fda9a82b" class="t constructor">MemoryStream</a>(<span class="r1831 r">data</span>);
            <b>await</b> <span class="r1830 r">blockBlobClient</span>.<a href="/Azure.Storage.Blobs/A.html#4e2ff04a6b8d1af0" class="i method">UploadAsync</a>(<span class="r1832 r">stream</span>);
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1833 rd" class="r1833 r">encryptionScopeBlob</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1827 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#54038cd6848b9aae" class="i method">GetBlobBaseClient</a>(<span class="r1828 r">blobName</span>).<a href="/Azure.Storage.Blobs/A.html#89192359a13d65bf" class="i method">WithEncryptionScope</a>(<span class="r1829 r">encryptionScope</span>));
 
            <span class="c">// Act</span>
            <a href="/Azure.Core/A.html#f0acdd38dd24ccb7" class="t t">Response</a>&lt;<a href="/Azure.Storage.Blobs/A.html#3ce0c298c6f02684" class="t t">BlobDownloadInfo</a>&gt; <span id="r1834 rd" class="r1834 r">downloadResponse</span> = <b>await</b> <span class="r1833 r">encryptionScopeBlob</span>.<a href="/Azure.Storage.Blobs/A.html#3d24e9ffd423b49e" class="i method">DownloadAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1829 r">encryptionScope</span>, <span class="r1834 r">downloadResponse</span>.<a href="/Azure.Core/A.html#26af68e791f2f80a" class="i property">Value</a>.<a href="/Azure.Storage.Blobs/A.html#e967990c9b1e7bf1" class="i property">Details</a>.<a href="/Azure.Storage.Blobs/A.html#70a56a1ac683ee41" class="i property">EncryptionScope</a>);
 
            <span class="c">// Arrange</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1835 rd" class="r1835 r">noEncryptionScopeBlobClient</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1833 r">encryptionScopeBlob</span>.<a href="/Azure.Storage.Blobs/A.html#89192359a13d65bf" class="i method">WithEncryptionScope</a>(<b>null</b>));
 
            <span class="c">// Act</span>
            <b>await</b> <a href="Shared/TestHelper.cs.html#1425737f2a386c6e" class="t t">TestHelper</a>.<a href="Shared/TestHelper.cs.html#7820952ec9aec2d6" class="i method">AssertExpectedExceptionAsync</a>&lt;<a href="/Azure.Core/A.html#253c51f73f5cd67d" class="t t">RequestFailedException</a>&gt;(
                <span class="r1835 r">noEncryptionScopeBlobClient</span>.<a href="/Azure.Storage.Blobs/A.html#58dcaf1e6f66d2b3" class="i method">SetMetadataAsync</a>(<a href="Shared/StorageTestBase.cs.html#9bbe73e9e1c28539" class="i method">BuildMetadata</a>()),
                <span id="r1836 rd" class="r1836 r">e</span> =&gt; <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<a href="/Azure.Storage.Blobs/A.html#e0d947616d6aba70" class="t t">BlobErrorCode</a>.<a href="/Azure.Storage.Blobs/A.html#ea2cd36dd434d8bd" class="i property">BlobUsesCustomerSpecifiedEncryption</a>.<a href="/Azure.Storage.Blobs/A.html#956fff1c6f30e077" class="i method">ToString</a>(), <span class="r1836 r">e</span>.<a href="/Azure.Core/A.html#0f8d8760e8ec9460" class="i property">ErrorCode</a>));
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public void</b> <a id="eb2369883e2cb882" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanMockBlobLeaseClientRetrieval</a>()
        {
            <span class="c">// Arrange</span>
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1837 rd" class="r1837 r">leaseId</span> = <span class="s">&quot;leaseId&quot;</span>;
            <span class="t t">Mock</span>&lt;<a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a>&gt; <span id="r1838 rd" class="r1838 r">blobBaseClientMock</span> = <b>new</b> <span class="t constructor">Mock</span>&lt;<a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a>&gt;();
            <span class="t t">Mock</span>&lt;<a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="t t">BlobLeaseClient</a>&gt; <span id="r1839 rd" class="r1839 r">blobLeaseClientMock</span> = <b>new</b> <span class="t constructor">Mock</span>&lt;<a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="t t">BlobLeaseClient</a>&gt;();
            <span class="r1838 r">blobBaseClientMock</span>.<span class="i method">Protected</span>().<span class="i method">Setup</span>&lt;<a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="t t">BlobLeaseClient</a>&gt;(<span class="s">&quot;GetBlobLeaseClientCore&quot;</span>, <span class="r1837 r">leaseId</span>).<span class="i method">Returns</span>(<span class="r1839 r">blobLeaseClientMock</span>.<span class="i property">Object</span>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Storage.Blobs/A.html#b4c608062fc1b9e9" class="k">var</a> <span id="r1840 rd" class="r1840 r">blobLeaseClient</span> = <span class="r1838 r">blobBaseClientMock</span>.<span class="i property">Object</span>.<a href="/Azure.Storage.Blobs/A.html#a3118892e61ea4fc" class="i method">GetBlobLeaseClient</a>(<span class="r1837 r">leaseId</span>);
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1840 r">blobLeaseClient</span>);
            <span class="t t">Assert</span>.<span class="i method">AreSame</span>(<span class="r1839 r">blobLeaseClientMock</span>.<span class="i property">Object</span>, <span class="r1840 r">blobLeaseClient</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="8551aec7b2cda8e3" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanGetParentContainerClient</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1841 rd" class="r1841 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#f0665d15d63242b1" class="t t">BlobClient</a> <span id="r1842 rd" class="r1842 r">blobClient</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1841 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#e796fb2e7b99a23b" class="i method">GetBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>()));
 
            <span class="c">// Act</span>
            <a href="/Azure.Storage.Blobs/A.html#6bb2c165ee95c7d4" class="k">var</a> <span id="r1843 rd" class="r1843 r">containerClient</span> = <span class="r1842 r">blobClient</span>.<a href="/Azure.Storage.Blobs/A.html#47529370e2f9875a" class="i method">GetParentBlobContainerClient</a>();
            <span class="c">// make sure that client is functional</span>
            <a href="/Azure.Storage.Blobs/A.html#4036fd57d8babf0c" class="t t">BlobContainerProperties</a> <span id="r1844 rd" class="r1844 r">containerProperties</span> = <b>await</b> <span class="r1843 r">containerClient</span>.<a href="/Azure.Storage.Blobs/A.html#78a1f68312f5203b" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1842 r">blobClient</span>.<a href="/Azure.Storage.Blobs/A.html#8125465144699fdb" class="i property">BlobContainerName</a>, <span class="r1843 r">containerClient</span>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1842 r">blobClient</span>.<a href="/Azure.Storage.Blobs/A.html#0ec0e7af4edc605e" class="i property">AccountName</a>, <span class="r1843 r">containerClient</span>.<a href="/Azure.Storage.Blobs/A.html#52f2ab122a2623c4" class="i property">AccountName</a>);
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1844 r">containerProperties</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="532a2d503794a52d" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanGetParentContainerClient_FromBlobClientThatHasExtraQueryParameters</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1845 rd" class="r1845 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="/Azure.Storage.Blobs/A.html#f0665d15d63242b1" class="t t">BlobClient</a> <span id="r1846 rd" class="r1846 r">blobClient</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(<span class="r1845 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#e796fb2e7b99a23b" class="i method">GetBlobClient</a>(<a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>())).<a href="/Azure.Storage.Blobs/A.html#0397ab6436a17126" class="i method">WithVersion</a>(<a href="/Azure.Core.TestFramework/A.html#9fc34d8f596ca70c" class="i property">Recording</a>.<a href="/Azure.Core.TestFramework/A.html#b9828ff8817e7824" class="i property">Random</a>.<a href="/Azure.Core.TestFramework/A.html#d4b1f5d1badb844e" class="i method">NewGuid</a>().<a href="@0@mscorlib/A.html#a6547a472def7796" class="i method">ToString</a>());
 
            <span class="c">// Act</span>
            <a href="/Azure.Storage.Blobs/A.html#6bb2c165ee95c7d4" class="k">var</a> <span id="r1847 rd" class="r1847 r">containerClient</span> = <span class="r1846 r">blobClient</span>.<a href="/Azure.Storage.Blobs/A.html#47529370e2f9875a" class="i method">GetParentBlobContainerClient</a>();
            <span class="c">// make sure that client is functional</span>
            <a href="/Azure.Storage.Blobs/A.html#4036fd57d8babf0c" class="t t">BlobContainerProperties</a> <span id="r1848 rd" class="r1848 r">containerProperties</span> = <b>await</b> <span class="r1847 r">containerClient</span>.<a href="/Azure.Storage.Blobs/A.html#78a1f68312f5203b" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1846 r">blobClient</span>.<a href="/Azure.Storage.Blobs/A.html#8125465144699fdb" class="i property">BlobContainerName</a>, <span class="r1847 r">containerClient</span>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1846 r">blobClient</span>.<a href="/Azure.Storage.Blobs/A.html#0ec0e7af4edc605e" class="i property">AccountName</a>, <span class="r1847 r">containerClient</span>.<a href="/Azure.Storage.Blobs/A.html#52f2ab122a2623c4" class="i property">AccountName</a>);
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1848 r">containerProperties</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        [<a href="/Azure.Core.TestFramework/A.html#345a6ea4886b1205" class="t constructor">ServiceVersion</a>(<a href="/Azure.Core.TestFramework/A.html#74fe2facc5c52b45" class="i property">Min</a> = <a href="/Azure.Storage.Blobs/A.html#2a694af9228b837c" class="t t">BlobClientOptions</a>.<a href="/Azure.Storage.Blobs/A.html#2ee6d57a3e93d0a9" class="t t">ServiceVersion</a>.<a href="/Azure.Storage.Blobs/A.html#087fc2f4fcf8c013" class="i field">V2019_12_12</a>)]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="8269598d96cee380" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanGetParentContainerClient_WithAccountSAS</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1849 rd" class="r1849 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1850 rd" class="r1850 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1851 rd" class="r1851 r">blobClient</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(
                <a href="BlobTestBase.cs.html#be395ae7315d4a5a" class="i method">GetServiceClient_AccountSas</a>()
                .<a href="/Azure.Storage.Blobs/A.html#e3b6b5726874c210" class="i method">GetBlobContainerClient</a>(<span class="r1849 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>)
                .<a href="/Azure.Storage.Blobs/A.html#e796fb2e7b99a23b" class="i method">GetBlobClient</a>(<span class="r1850 r">blobName</span>));
 
            <span class="c">// Act</span>
            <a href="/Azure.Storage.Blobs/A.html#6bb2c165ee95c7d4" class="k">var</a> <span id="r1852 rd" class="r1852 r">containerClient</span> = <span class="r1851 r">blobClient</span>.<a href="/Azure.Storage.Blobs/A.html#47529370e2f9875a" class="i method">GetParentBlobContainerClient</a>();
            <span class="c">// make sure that client is functional</span>
            <a href="/Azure.Storage.Blobs/A.html#4036fd57d8babf0c" class="t t">BlobContainerProperties</a> <span id="r1853 rd" class="r1853 r">containerProperties</span> = <b>await</b> <span class="r1852 r">containerClient</span>.<a href="/Azure.Storage.Blobs/A.html#78a1f68312f5203b" class="i method">GetPropertiesAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1851 r">blobClient</span>.<a href="/Azure.Storage.Blobs/A.html#8125465144699fdb" class="i property">BlobContainerName</a>, <span class="r1852 r">containerClient</span>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1851 r">blobClient</span>.<a href="/Azure.Storage.Blobs/A.html#0ec0e7af4edc605e" class="i property">AccountName</a>, <span class="r1852 r">containerClient</span>.<a href="/Azure.Storage.Blobs/A.html#52f2ab122a2623c4" class="i property">AccountName</a>);
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1853 r">containerProperties</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public async</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a> <a id="f031bbe691b1b74f" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanGetParentContainerClient_WithContainerSAS</a>()
        {
            <span class="c">// Arrange</span>
            <b>await using</b> <a href="DisposingContainer.cs.html#72577c243e7b112e" class="t t">DisposingContainer</a> <span id="r1854 rd" class="r1854 r">test</span> = <b>await</b> <a href="BlobTestBase.cs.html#dd3183cadd319ff5" class="i method">GetTestContainerAsync</a>();
            <a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r1855 rd" class="r1855 r">blobName</span> = <a href="BlobTestBase.cs.html#3f238fe7b62cbaf1" class="i method">GetNewBlobName</a>();
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a> <span id="r1856 rd" class="r1856 r">blobClient</span> = <a href="/Azure.Core.TestFramework/A.html#11829fdeef1b6d51" class="i method">InstrumentClient</a>(
                <a href="BlobTestBase.cs.html#1625e8587d316c60" class="i method">GetServiceClient_BlobServiceSas_Container</a>(<span class="r1854 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>)
                .<a href="/Azure.Storage.Blobs/A.html#e3b6b5726874c210" class="i method">GetBlobContainerClient</a>(<span class="r1854 r">test</span>.<a href="DisposingContainer.cs.html#3ce280c5bf3a821d" class="i property">Container</a>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>)
                .<a href="/Azure.Storage.Blobs/A.html#e796fb2e7b99a23b" class="i method">GetBlobClient</a>(<span class="r1855 r">blobName</span>));
 
            <span class="c">// Act</span>
            <a href="/Azure.Storage.Blobs/A.html#6bb2c165ee95c7d4" class="k">var</a> <span id="r1857 rd" class="r1857 r">containerClient</span> = <span class="r1856 r">blobClient</span>.<a href="/Azure.Storage.Blobs/A.html#47529370e2f9875a" class="i method">GetParentBlobContainerClient</a>();
            <span class="c">// make sure that client is functional</span>
            <a href="@0@mscorlib/A.html#b19f71a84062554b" class="k">var</a> <span id="r1858 rd" class="r1858 r">blobItems</span> = <b>await</b> <span class="r1857 r">containerClient</span>.<a href="/Azure.Storage.Blobs/A.html#d613ebb8de300b97" class="i method">GetBlobsAsync</a>().<a href="Shared/TestExtensions.cs.html#09db9c2c6230c153" class="i method">ToListAsync</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1856 r">blobClient</span>.<a href="/Azure.Storage.Blobs/A.html#8125465144699fdb" class="i property">BlobContainerName</a>, <span class="r1857 r">containerClient</span>.<a href="/Azure.Storage.Blobs/A.html#a2b6be6038e393b3" class="i property">Name</a>);
            <span class="t t">Assert</span>.<span class="i method">AreEqual</span>(<span class="r1856 r">blobClient</span>.<a href="/Azure.Storage.Blobs/A.html#0ec0e7af4edc605e" class="i property">AccountName</a>, <span class="r1857 r">containerClient</span>.<a href="/Azure.Storage.Blobs/A.html#52f2ab122a2623c4" class="i property">AccountName</a>);
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1858 r">blobItems</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public void</b> <a id="3a9de6bd250b90ce" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanMockParentContainerClientRetrieval</a>()
        {
            <span class="c">// Arrange</span>
            <span class="t t">Mock</span>&lt;<a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a>&gt; <span id="r1859 rd" class="r1859 r">blobBaseClientMock</span> = <b>new</b> <span class="t constructor">Mock</span>&lt;<a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a>&gt;();
            <span class="t t">Mock</span>&lt;<a href="/Azure.Storage.Blobs/A.html#6bb2c165ee95c7d4" class="t t">BlobContainerClient</a>&gt; <span id="r1860 rd" class="r1860 r">blobContainerClientMock</span> = <b>new</b> <span class="t constructor">Mock</span>&lt;<a href="/Azure.Storage.Blobs/A.html#6bb2c165ee95c7d4" class="t t">BlobContainerClient</a>&gt;();
            <span class="r1859 r">blobBaseClientMock</span>.<span class="i method">Protected</span>().<span class="i method">Setup</span>&lt;<a href="/Azure.Storage.Blobs/A.html#6bb2c165ee95c7d4" class="t t">BlobContainerClient</a>&gt;(<span class="s">&quot;GetParentBlobContainerClientCore&quot;</span>).<span class="i method">Returns</span>(<span class="r1860 r">blobContainerClientMock</span>.<span class="i property">Object</span>);
 
            <span class="c">// Act</span>
            <a href="/Azure.Storage.Blobs/A.html#6bb2c165ee95c7d4" class="k">var</a> <span id="r1861 rd" class="r1861 r">blobContainerClient</span> = <span class="r1859 r">blobBaseClientMock</span>.<span class="i property">Object</span>.<a href="/Azure.Storage.Blobs/A.html#47529370e2f9875a" class="i method">GetParentBlobContainerClient</a>();
 
            <span class="c">// Assert</span>
            <span class="t t">Assert</span>.<span class="i method">IsNotNull</span>(<span class="r1861 r">blobContainerClient</span>);
            <span class="t t">Assert</span>.<span class="i method">AreSame</span>(<span class="r1860 r">blobContainerClientMock</span>.<span class="i property">Object</span>, <span class="r1861 r">blobContainerClient</span>);
        }
 
        [<a href="/Azure.Core.TestFramework/A.html#6f14c3950ca7dafb" class="t constructor">RecordedTest</a>]
        <b>public void</b> <a id="4491960479901803" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">CanMockClientConstructors</a>()
        {
            <span class="c">// One has to call .Object to trigger constructor. It&#39;s lazy.</span>
            <a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="k">var</a> <span id="r1862 rd" class="r1862 r">mock</span> = <b>new</b> <span class="t constructor">Mock</span>&lt;<a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a>&gt;(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#c138650c6d983a3c" class="i property">ConnectionString</a>, <span class="s">&quot;name&quot;</span>, <span class="s">&quot;name&quot;</span>, <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5d4c62c639f0fccb" class="t constructor">BlobClientOptions</a>()).<span class="i property">Object</span>;
            <span class="r1862 r">mock</span> = <b>new</b> <span class="t constructor">Mock</span>&lt;<a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a>&gt;(<a href="Shared/StorageTestBase.cs.html#407034e8b138a893" class="i property">TestConfigDefault</a>.<a href="Shared/TenantConfiguration.cs.html#c138650c6d983a3c" class="i property">ConnectionString</a>, <span class="s">&quot;name&quot;</span>, <span class="s">&quot;name&quot;</span>).<span class="i property">Object</span>;
            <span class="r1862 r">mock</span> = <b>new</b> <span class="t constructor">Mock</span>&lt;<a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a>&gt;(<b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">&quot;https://test/test&quot;</span>), <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5d4c62c639f0fccb" class="t constructor">BlobClientOptions</a>()).<span class="i property">Object</span>;
            <span class="r1862 r">mock</span> = <b>new</b> <span class="t constructor">Mock</span>&lt;<a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a>&gt;(<b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">&quot;https://test/test&quot;</span>), <a href="Shared/StorageTestBase.cs.html#014ad718b41f3c72" class="i field">Tenants</a>.<a href="Shared/TenantConfigurationBuilder.cs.html#7ff0ecb1cb4d01b3" class="i method">GetNewSharedKeyCredentials</a>(), <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5d4c62c639f0fccb" class="t constructor">BlobClientOptions</a>()).<span class="i property">Object</span>;
            <span class="r1862 r">mock</span> = <b>new</b> <span class="t constructor">Mock</span>&lt;<a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a>&gt;(<b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">&quot;https://test/test&quot;</span>), <b>new</b> <a href="/Azure.Core/A.html#7c49a23f7592174a" class="t constructor">AzureSasCredential</a>(<span class="s">&quot;foo&quot;</span>), <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5d4c62c639f0fccb" class="t constructor">BlobClientOptions</a>()).<span class="i property">Object</span>;
            <span class="r1862 r">mock</span> = <b>new</b> <span class="t constructor">Mock</span>&lt;<a href="/Azure.Storage.Blobs/A.html#853236f95f48385e" class="t t">BlobBaseClient</a>&gt;(<b>new</b> <a href="@0@System/A.html#9e1bb2fef0d1159b" class="t constructor">Uri</a>(<span class="s">&quot;https://test/test&quot;</span>), <a href="Shared/StorageTestBase.cs.html#014ad718b41f3c72" class="i field">Tenants</a>.<a href="Shared/TenantConfigurationBuilder.cs.html#ee5e57706196bcae" class="i method">GetOAuthCredential</a>(<a href="Shared/StorageTestBase.cs.html#014ad718b41f3c72" class="i field">Tenants</a>.<a href="Shared/TenantConfigurationBuilder.cs.html#7e65a05877331a35" class="i property">TestConfigHierarchicalNamespace</a>), <b>new</b> <a href="/Azure.Storage.Blobs/A.html#5d4c62c639f0fccb" class="t constructor">BlobClientOptions</a>()).<span class="i property">Object</span>;
        }
 
        <b>public</b> <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a>&gt; <a id="2a798157c01985c4" href="R/2a798157c01985c4.html" target="n" data-glyph="102,1" class="i property">AccessConditions_Data</a>
            =&gt; <b>new</b>[]
            {
                <b>new</b> <a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t constructor">AccessConditionParameters</a>(),
                <b>new</b> <a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t constructor">AccessConditionParameters</a> { <a href="Shared/AccessConditionParameters.cs.html#4a83f2c383a0c73f" class="i property">IfModifiedSince</a> = <a href="BlobTestBase.cs.html#e9911a9548f25e65" class="i property">OldDate</a> },
                <b>new</b> <a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t constructor">AccessConditionParameters</a> { <a href="Shared/AccessConditionParameters.cs.html#fa6b7151781f82eb" class="i property">IfUnmodifiedSince</a> = <a href="BlobTestBase.cs.html#2fbbec11a30e744c" class="i property">NewDate</a> },
                <b>new</b> <a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t constructor">AccessConditionParameters</a> { <a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a> = <a href="BlobTestBase.cs.html#13e3be366a1fa28f" class="i field">ReceivedETag</a> },
                <b>new</b> <a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t constructor">AccessConditionParameters</a> { <a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a> = <a href="BlobTestBase.cs.html#b1968ca6fd0467f0" class="i field">GarbageETag</a> },
                <b>new</b> <a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t constructor">AccessConditionParameters</a> { <a href="Shared/AccessConditionParameters.cs.html#af0faf1b7c1c85bd" class="i property">LeaseId</a> = <a href="BlobTestBase.cs.html#0804b554114615a2" class="i field">ReceivedLeaseId</a> }
            };
 
        <b>public</b> <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a>&gt; <a id="f06bf70b762b1860" href="R/f06bf70b762b1860.html" target="n" data-glyph="72,1" class="i method">GetAccessConditionsFail_Data</a>(<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1863 rd" class="r1863 r">garbageLeaseId</span>)
            =&gt; <b>new</b>[]
            {
                <b>new</b> <a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t constructor">AccessConditionParameters</a> { <a href="Shared/AccessConditionParameters.cs.html#4a83f2c383a0c73f" class="i property">IfModifiedSince</a> = <a href="BlobTestBase.cs.html#2fbbec11a30e744c" class="i property">NewDate</a> },
                <b>new</b> <a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t constructor">AccessConditionParameters</a> { <a href="Shared/AccessConditionParameters.cs.html#fa6b7151781f82eb" class="i property">IfUnmodifiedSince</a> = <a href="BlobTestBase.cs.html#e9911a9548f25e65" class="i property">OldDate</a> },
                <b>new</b> <a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t constructor">AccessConditionParameters</a> { <a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a> = <a href="BlobTestBase.cs.html#b1968ca6fd0467f0" class="i field">GarbageETag</a> },
                <b>new</b> <a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t constructor">AccessConditionParameters</a> { <a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a> = <a href="BlobTestBase.cs.html#13e3be366a1fa28f" class="i field">ReceivedETag</a> },
                <b>new</b> <a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t constructor">AccessConditionParameters</a> { <a href="Shared/AccessConditionParameters.cs.html#af0faf1b7c1c85bd" class="i property">LeaseId</a> = <span class="r1863 r">garbageLeaseId</span> },
             };
 
        <b>public</b> <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a>&gt; <a id="94c281f351d174da" href="R/94c281f351d174da.html" target="n" data-glyph="102,1" class="i property">NoLease_AccessConditions_Data</a>
            =&gt; <b>new</b>[]
            {
                <b>new</b> <a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t constructor">AccessConditionParameters</a>(),
                <b>new</b> <a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t constructor">AccessConditionParameters</a> { <a href="Shared/AccessConditionParameters.cs.html#4a83f2c383a0c73f" class="i property">IfModifiedSince</a> = <a href="BlobTestBase.cs.html#e9911a9548f25e65" class="i property">OldDate</a> },
                <b>new</b> <a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t constructor">AccessConditionParameters</a> { <a href="Shared/AccessConditionParameters.cs.html#fa6b7151781f82eb" class="i property">IfUnmodifiedSince</a> = <a href="BlobTestBase.cs.html#2fbbec11a30e744c" class="i property">NewDate</a> },
                <b>new</b> <a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t constructor">AccessConditionParameters</a> { <a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a> = <a href="BlobTestBase.cs.html#13e3be366a1fa28f" class="i field">ReceivedETag</a> },
                <b>new</b> <a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t constructor">AccessConditionParameters</a> { <a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a> = <a href="BlobTestBase.cs.html#b1968ca6fd0467f0" class="i field">GarbageETag</a> },
            };
 
        <b>public</b> <a href="@0@mscorlib/A.html#3acf01620172c7f0" class="t t">IEnumerable</a>&lt;<a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a>&gt; <a id="cd39d61d30a86c0a" href="R/cd39d61d30a86c0a.html" target="n" data-glyph="102,1" class="i property">NoLease_AccessConditionsFail_Data</a>
            =&gt; <b>new</b>[]
            {
                <b>new</b> <a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t constructor">AccessConditionParameters</a> { <a href="Shared/AccessConditionParameters.cs.html#4a83f2c383a0c73f" class="i property">IfModifiedSince</a> = <a href="BlobTestBase.cs.html#2fbbec11a30e744c" class="i property">NewDate</a> },
                <b>new</b> <a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t constructor">AccessConditionParameters</a> { <a href="Shared/AccessConditionParameters.cs.html#fa6b7151781f82eb" class="i property">IfUnmodifiedSince</a> = <a href="BlobTestBase.cs.html#e9911a9548f25e65" class="i property">OldDate</a> },
                <b>new</b> <a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t constructor">AccessConditionParameters</a> { <a href="Shared/AccessConditionParameters.cs.html#97e54c519678e441" class="i property">Match</a> = <a href="BlobTestBase.cs.html#b1968ca6fd0467f0" class="i field">GarbageETag</a> },
                <b>new</b> <a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t constructor">AccessConditionParameters</a> { <a href="Shared/AccessConditionParameters.cs.html#146a11fcf54e2877" class="i property">NoneMatch</a> = <a href="BlobTestBase.cs.html#13e3be366a1fa28f" class="i field">ReceivedETag</a> },
            };
 
        <b>private</b> <a href="/Azure.Core/A.html#b798d4499ab9e5ea" class="t t">RequestConditions</a> <a id="542bf1557de0101a" href="R/542bf1557de0101a.html" target="n" data-glyph="76,1" class="i method">BuildRequestConditions</a>(
            <a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r1216 rd" class="r1216 r">parameters</span>)
            =&gt; <a href="#c6fe4665c9650047" class="i property">BlobConditions</a>.<a href="Shared/AccessConditionConfigs.cs.html#f394d91df959c8ac" class="i method">BuildRequestConditions</a>(<span class="r1216 r">parameters</span>);
 
        <b>private</b> <a href="/Azure.Storage.Blobs/A.html#340adb54d55c6c34" class="t t">BlobRequestConditions</a> <a id="47a1d944fb251ee5" href="R/47a1d944fb251ee5.html" target="n" data-glyph="76,1" class="i method">BuildAccessConditions</a>(
            <a href="Shared/AccessConditionParameters.cs.html#892df7d423a148bc" class="t t">AccessConditionParameters</a> <span id="r482 rd" class="r482 r">parameters</span>,
            <b>bool</b> <span id="r490 rd" class="r490 r">lease</span> = <b>true</b>)
            =&gt; <a href="#c6fe4665c9650047" class="i property">BlobConditions</a>.<a href="BlobAccessConditionConfigs.cs.html#649bdbe934ede531" class="i method">BuildAccessConditions</a>(<span class="r482 r">parameters</span>, <span class="r490 r">lease</span>);
    }
}
</pre></td></tr></table></div></body></html>

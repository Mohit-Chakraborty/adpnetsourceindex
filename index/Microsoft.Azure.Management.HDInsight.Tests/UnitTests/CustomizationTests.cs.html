<!DOCTYPE html>
<html><head><title>CustomizationTests.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(184);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Microsoft.Azure.Management.HDInsight.Tests/UnitTests/CustomizationTests.cs" target="_top">UnitTests\CustomizationTests.cs</a><br/></td><td><a class="blueLink" href="https://github.com/Azure/azure-sdk-for-net/tree/master/sdk/hdinsight/Microsoft.Azure.Management.HDInsight/tests/UnitTests/CustomizationTests.cs" target="_blank">View on GitHub</a></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Microsoft.Azure.Management.HDInsight.Tests" target="_top">Microsoft.Azure.Management.HDInsight.Tests.csproj</a> (Microsoft.Azure.Management.HDInsight.Tests)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License. See License.txt in the project root for</span>
<span class="c">// license information.</span>
<span class="c">//</span>
<span class="c">// Code generated by Microsoft (R) AutoRest Code Generator 1.0.1.0</span>
<span class="c">// Changes may cause incorrect behavior and will be lost if the code is</span>
<span class="c">// regenerated.</span>
 
<b>namespace</b> <span class="i n">Management</span>.<span class="i n">HDInsight</span>.<span class="i n">Tests</span>.<span class="i n">UnitTests</span>
{
    <b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i n">HDInsight</span>;
    <b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i n">HDInsight</span>.<span class="i n">Models</span>;
    <b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Test</span>.<span class="i n">HttpRecorder</span>;
    <b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Rest</span>;
    <b>using</b> <span class="i n">System</span>;
    <b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
    <b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
    <b>using</b> <span class="i n">System</span>.<span class="i n">Net</span>.<span class="i n">Http</span>;
    <b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>;
    <b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>.<span class="i n">Tasks</span>;
    <b>using</b> <span class="i n">Xunit</span>;
 
    <b>public class</b> <a id="8d487bd6c214baea" href="../R/../../0000000000.html" target="n" data-glyph="0,0" class="t t"><span id="3f6de52db62f3c2d">CustomizationTests</span></a>
    {
        <b>private string</b> <a id="09fb40c5daf8807b" href="../R/09fb40c5daf8807b.html" target="n" data-glyph="46,1" class="i field">ResourceGroupName</a> = <span class="s">&quot;rg1&quot;</span>;
        <b>private string</b> <a id="c90e0dafb4c42379" href="../R/c90e0dafb4c42379.html" target="n" data-glyph="46,1" class="i field">ClusterName</a> = <span class="s">&quot;cluster&quot;</span>;
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="cd67552ae9ba4b53" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestCreateCustomization</a>()
        {
            <a href="/Microsoft.Azure.Test.HttpRecorder/A.html#ba41c0be28bfd60b" class="k">var</a> <span id="r0 rd" class="r0 r">currentMode</span> = <a href="/Microsoft.Azure.Test.HttpRecorder/A.html#348d97248a265d2f" class="t t">HttpMockServer</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#a74d951f775be518" class="i property">Mode</a>;
            <a href="/Microsoft.Azure.Test.HttpRecorder/A.html#348d97248a265d2f" class="t t">HttpMockServer</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#a74d951f775be518" class="i property">Mode</a> = <a href="/Microsoft.Azure.Test.HttpRecorder/A.html#ba41c0be28bfd60b" class="t t">HttpRecorderMode</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#ea7a54781beb409c" class="i field">None</a>;
 
            <b>try</b>
            {
                <a href="../TestHelpers/CommonTestsFixture.cs.html#553cd16bb195d8a0" class="k">var</a> <span id="r1 rd" class="r1 r">commonData</span> = <b>new</b> <a href="../TestHelpers/CommonTestsFixture.cs.html#cc211382b28857a5" class="t constructor">CommonTestFixture</a>();
                <a href="#3fdd7baa8ef4c561" class="t t">TestDelegatingHandler</a> <span id="r2 rd" class="r2 r">handler</span> = <b>new</b> <a href="#35d7c07e7387203b" class="t constructor">TestDelegatingHandler</a>();
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#1c044629d789bf7c" class="t t">HDInsightManagementClient</a> <span id="r3 rd" class="r3 r">client</span> = <a href="#ff10d26cf908bf8c" class="i method">GetHDInsightUnitTestingClient</a>(<span class="r2 r">handler</span>);
 
                <span class="r3 r">client</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#1dad0def9e64ab7a" class="i method">BeginCreate</a>(<a href="#09fb40c5daf8807b" class="i field">ResourceGroupName</a>, <a href="#c90e0dafb4c42379" class="i field">ClusterName</a>, <a href="#6e8392b2a6df5018" class="i method">PrepareClusterCreateParamsForWasb</a>(<span class="r1 r">commonData</span>));
                <span class="r3 r">client</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bf6f9a6bfc2e7152" class="i method">BeginCreating</a>(<a href="#09fb40c5daf8807b" class="i field">ResourceGroupName</a>, <a href="#c90e0dafb4c42379" class="i field">ClusterName</a>, <a href="#9078d4b16af11899" class="i method">PrepareCustomClusterCreateParamsForWasb</a>(<span class="r1 r">commonData</span>));
 
                <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r2 r">handler</span>.<a href="#288f61c544a45e11" class="i property">Requests</a>[0], <span class="r2 r">handler</span>.<a href="#288f61c544a45e11" class="i property">Requests</a>[1]);
            }
            <b>finally</b>
            {
                <a href="/Microsoft.Azure.Test.HttpRecorder/A.html#348d97248a265d2f" class="t t">HttpMockServer</a>.<a href="/Microsoft.Azure.Test.HttpRecorder/A.html#a74d951f775be518" class="i property">Mode</a> = <span class="r0 r">currentMode</span>;
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="aef413905bde93d7" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestResizeCustomization</a>()
        {
            <a href="#3fdd7baa8ef4c561" class="t t">TestDelegatingHandler</a> <span id="r4 rd" class="r4 r">handler</span> = <b>new</b> <a href="#35d7c07e7387203b" class="t constructor">TestDelegatingHandler</a>();
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1c044629d789bf7c" class="t t">HDInsightManagementClient</a> <span id="r5 rd" class="r5 r">client</span> = <a href="#ff10d26cf908bf8c" class="i method">GetHDInsightUnitTestingClient</a>(<span class="r4 r">handler</span>);
 
            <b>int</b> <span id="r6 rd" class="r6 r">newSize</span> = 5;
            <span class="r5 r">client</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#9b6205c3dcebc32c" class="i method">BeginResizing</a>(<a href="#09fb40c5daf8807b" class="i field">ResourceGroupName</a>, <a href="#c90e0dafb4c42379" class="i field">ClusterName</a>, <span class="r6 r">newSize</span>);
            <span class="r5 r">client</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#5ab4ac56932ebd69" class="i method">BeginResize</a>(<a href="#09fb40c5daf8807b" class="i field">ResourceGroupName</a>, <a href="#c90e0dafb4c42379" class="i field">ClusterName</a>, <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#b69c47a55b06e5af" class="t constructor">ClusterResizeParameters</a>
            {
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#31fb0fd02af5e6f1" class="i property">TargetInstanceCount</a> = <span class="r6 r">newSize</span>
            });
 
            <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r4 r">handler</span>.<a href="#288f61c544a45e11" class="i property">Requests</a>[0], <span class="r4 r">handler</span>.<a href="#288f61c544a45e11" class="i property">Requests</a>[1]);
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="7026f643ffe3316a" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestExecuteScriptActionsCustomizations</a>()
        {
            <a href="#3fdd7baa8ef4c561" class="t t">TestDelegatingHandler</a> <span id="r7 rd" class="r7 r">handler</span> = <b>new</b> <a href="#35d7c07e7387203b" class="t constructor">TestDelegatingHandler</a>();
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1c044629d789bf7c" class="t t">HDInsightManagementClient</a> <span id="r8 rd" class="r8 r">client</span> = <a href="#ff10d26cf908bf8c" class="i method">GetHDInsightUnitTestingClient</a>(<span class="r7 r">handler</span>);
 
            <span class="t t">List</span>&lt;<a href="/Microsoft.Azure.Management.HDInsight/A.html#f65eab780d5696fc" class="t t">RuntimeScriptAction</a>&gt; <span id="r9 rd" class="r9 r">scriptActions</span> = <b>new</b> <span class="t constructor">List</span>&lt;<a href="/Microsoft.Azure.Management.HDInsight/A.html#f65eab780d5696fc" class="t t">RuntimeScriptAction</a>&gt;
            {
                <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#bdbf6e70b7b4155e" class="t constructor">RuntimeScriptAction</a>
                {
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#9867be2a40a23cf6" class="i property">Name</a> = <span class="s">&quot;name&quot;</span>,
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#63dcb9eb4a19188a" class="i property">Parameters</a> = <span class="s">&quot;params&quot;</span>,
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#47e88de5619b9b1b" class="i property">Roles</a> = <b>new</b> <span class="t constructor">List</span>&lt;<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>&gt;{<span class="s">&quot;headnode&quot;</span>, <span class="s">&quot;workernode&quot;</span>},
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#6bf5b76131b90309" class="i property">Uri</a> = <span class="s">&quot;http://foo.bar&quot;</span>
                }
            };
            <span class="r8 r">client</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#d890e7ded1afb176" class="i method">BeginExecuteScriptActions</a>(<a href="#09fb40c5daf8807b" class="i field">ResourceGroupName</a>, <a href="#c90e0dafb4c42379" class="i field">ClusterName</a>, <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#ebefebfdc6bbdc25" class="t constructor">ExecuteScriptActionParameters</a>
            {
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#8d9ae47c494af5f2" class="i property">PersistOnSuccess</a> = <b>true</b>,
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#5f992ed3a641a18a" class="i property">ScriptActions</a> = <span class="r9 r">scriptActions</span>
            });
            <span class="r8 r">client</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#a46696bf3fa3b065" class="i method">BeginExecuteScriptActions</a>(<a href="#09fb40c5daf8807b" class="i field">ResourceGroupName</a>, <a href="#c90e0dafb4c42379" class="i field">ClusterName</a>, <span class="r9 r">scriptActions</span>, <b>true</b>);
 
            <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r7 r">handler</span>.<a href="#288f61c544a45e11" class="i property">Requests</a>[0], <span class="r7 r">handler</span>.<a href="#288f61c544a45e11" class="i property">Requests</a>[1]);
        }
 
        <b>private</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#1c044629d789bf7c" class="t t">HDInsightManagementClient</a> <a id="ff10d26cf908bf8c" href="../R/ff10d26cf908bf8c.html" target="n" data-glyph="76,1" class="i method">GetHDInsightUnitTestingClient</a>(<a href="#3fdd7baa8ef4c561" class="t t">TestDelegatingHandler</a> <span id="r10 rd" class="r10 r">handler</span>)
        {
            <a href="/Microsoft.Rest.ClientRuntime/A.html#a6e915f66d65cdd3" class="t t">ServiceClientCredentials</a> <span id="r11 rd" class="r11 r">cred</span> = <b>new</b> <a href="/Microsoft.Rest.ClientRuntime/A.html#477b0f704300d58b" class="t constructor">BasicAuthenticationCredentials</a>();
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1c044629d789bf7c" class="t t">HDInsightManagementClient</a> <span id="r12 rd" class="r12 r">client</span> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#66c5502beb27eee4" class="t constructor">HDInsightManagementClient</a>(<span class="r11 r">cred</span>, <span class="r10 r">handler</span>)
            {
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#282770e0d15ef7cc" class="i property">SubscriptionId</a> = <a href="@1@System.Runtime/A.html#b622ef5f6b76c10a" class="t t">Guid</a>.<a href="@1@System.Runtime/A.html#b7fae6994c22c22e" class="i method">NewGuid</a>().<a href="@1@System.Runtime/A.html#a6547a472def7796" class="i method">ToString</a>()
            };
 
            <b>return</b> <span class="r12 r">client</span>;
        }
 
        <b>private static</b> <span class="t t">Dictionary</span>&lt;<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <a id="17471d228d69c93e" href="../R/17471d228d69c93e.html" target="n" data-glyph="76,1" class="i method">GetCoreConfigsForWasb</a>(<a href="/Microsoft.Azure.Management.HDInsight/A.html#61f443381626ff8d" class="t t">StorageAccount</a> <span id="r13 rd" class="r13 r">storageAccount</span>)
        {
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r14 rd" class="r14 r">blobEndpoint</span> = <span class="s">$&quot;</span>{<span class="r13 r">storageAccount</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#ee59b14f037ee346" class="i property">Name</a>.<a href="@1@System.Runtime/A.html#2d51c212cb09178e" class="i method">ToLowerInvariant</a>()}<span class="s">.blob.core.windows.net</span><span class="s">&quot;</span>;
            <b>return</b> <b>new</b> <span class="t constructor">Dictionary</span>&lt;<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>&gt;
            {
                { <a href="/Microsoft.Azure.Management.HDInsight/A.html#2413e798fe9516fa" class="t t">Constants</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#068b3928e5562d6e" class="t t">StorageConfigurations</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#3018c5c1e94c7087" class="i field">DefaultFsKey</a>, <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@System.Runtime/A.html#7432dab173fae5fc" class="i method">Format</a>(<span class="s">&quot;wasb://{0}@{1}&quot;</span>, <span class="r13 r">storageAccount</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#954479a222705214" class="i property">Container</a>, <span class="r14 r">blobEndpoint</span>)},
                { <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@System.Runtime/A.html#9d5604d4425b216f" class="i method">Format</a>(<a href="/Microsoft.Azure.Management.HDInsight/A.html#2413e798fe9516fa" class="t t">Constants</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#068b3928e5562d6e" class="t t">StorageConfigurations</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f0e2cde8a01bd790" class="i field">WasbStorageAccountKeyFormat</a>, <span class="r14 r">blobEndpoint</span>), <span class="r13 r">storageAccount</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#1d6a69ae0576c2c2" class="i property">Key</a>}
            };
        }
 
        <b>private static</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#0af45786eec66a38" class="t t">ClusterCreateParameters</a> <a id="9078d4b16af11899" href="../R/9078d4b16af11899.html" target="n" data-glyph="76,1" class="i method">PrepareCustomClusterCreateParamsForWasb</a>(<a href="../TestHelpers/CommonTestsFixture.cs.html#553cd16bb195d8a0" class="t t">CommonTestFixture</a> <span id="r15 rd" class="r15 r">commonData</span>)
        {
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#0af45786eec66a38" class="t t">ClusterCreateParameters</a> <span id="r16 rd" class="r16 r">clusterparams</span> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#5ca9dabae566c990" class="t constructor">ClusterCreateParameters</a>
            {
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#f8480241c3bcab0f" class="i property">ClusterSizeInNodes</a> = 3,
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#309c78066c899d9f" class="i property">ClusterType</a> = <span class="s">&quot;Hadoop&quot;</span>,
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#6a40b7324da0430d" class="i property">WorkerNodeSize</a> = <span class="s">&quot;Large&quot;</span>,
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#6518d83c00c4f3b1" class="i property">DefaultStorageInfo</a> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#a9b168ce15bc4f49" class="t constructor">AzureStorageInfo</a>(<span class="r15 r">commonData</span>.<a href="../TestHelpers/CommonTestsFixture.cs.html#2bd4d94eb58e7e0e" class="i property">StorageAccountName</a>, <span class="r15 r">commonData</span>.<a href="../TestHelpers/CommonTestsFixture.cs.html#c595f301cb6693a4" class="i property">StorageAccountKey</a>, <span class="r15 r">commonData</span>.<a href="../TestHelpers/CommonTestsFixture.cs.html#0fe65d4671a357eb" class="i property">ContainerName</a>),
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#c1bbbd2a56ede999" class="i property">UserName</a> = <span class="r15 r">commonData</span>.<a href="../TestHelpers/CommonTestsFixture.cs.html#76dea77c138d9f62" class="i property">ClusterUserName</a>,
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#5688f6bd062e8284" class="i property">Password</a> = <span class="r15 r">commonData</span>.<a href="../TestHelpers/CommonTestsFixture.cs.html#373cdbf8adbfc6d6" class="i property">ClusterPassword</a>,
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#042c3e6fc3816754" class="i property">Location</a> = <span class="r15 r">commonData</span>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6062cb3407743238" class="i property">Location</a>,
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#4b2f5bf51412f011" class="i property">SshUserName</a> = <span class="r15 r">commonData</span>.<a href="../TestHelpers/CommonTestsFixture.cs.html#974e3d85f1d36aa5" class="i property">SshUsername</a>,
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#29ac1c4a97ba00e1" class="i property">SshPassword</a> = <span class="r15 r">commonData</span>.<a href="../TestHelpers/CommonTestsFixture.cs.html#da68f65ee8c982e2" class="i property">SshPassword</a>,
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#567b13c5be3fbd3b" class="i property">Version</a> = <span class="s">&quot;3.6&quot;</span>
            };
            <b>return</b> <span class="r16 r">clusterparams</span>;
        }
 
        <b>private static</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#b40349c3dfb11e02" class="t t">ClusterCreateParametersExtended</a> <a id="6e8392b2a6df5018" href="../R/6e8392b2a6df5018.html" target="n" data-glyph="76,1" class="i method">PrepareClusterCreateParamsForWasb</a>(<a href="../TestHelpers/CommonTestsFixture.cs.html#553cd16bb195d8a0" class="t t">CommonTestFixture</a> <span id="r17 rd" class="r17 r">commonData</span>)
        {
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#b40349c3dfb11e02" class="k">var</a> <span id="r18 rd" class="r18 r">createParams</span> = <span class="r17 r">commonData</span>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#45750bba7a204f74" class="i method">PrepareClusterCreateParamsForWasb</a>();
 
            <span class="c">// Tags</span>
            <span class="r18 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#94352a85ac22f74f" class="i property">Tags</a> = <b>new</b> <span class="t constructor">Dictionary</span>&lt;<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>&gt;();
 
            <span class="c">// Cluster Definition</span>
            <span class="r18 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f8dcb4ff658c96d8" class="i property">ClusterDefinition</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#9ff1d247893a721f" class="i property">ComponentVersion</a> = <b>new</b> <span class="t constructor">Dictionary</span>&lt;<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>&gt;();
 
            <span class="c">// Storage</span>
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#61f443381626ff8d" class="k">var</a> <span id="r19 rd" class="r19 r">storageAccount</span> = <span class="r18 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#59cdf04de9bcc2c9" class="i property">StorageProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#2a922bdea0059b60" class="i property">Storageaccounts</a>.<span class="i method">First</span>();
            <span class="r18 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#59cdf04de9bcc2c9" class="i property">StorageProfile</a> = <b>null</b>;
 
            <span class="c">// Configurations</span>
            <b>var</b> <span id="r20 rd" class="r20 r">configurations</span> = (<span class="t t">Dictionary</span>&lt;<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>, <span class="t t">Dictionary</span>&lt;<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>&gt;&gt;)<span class="r18 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f8dcb4ff658c96d8" class="i property">ClusterDefinition</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#e33338149b1b4260" class="i property">Configurations</a>;
            <span class="r18 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f8dcb4ff658c96d8" class="i property">ClusterDefinition</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#e33338149b1b4260" class="i property">Configurations</a> = <b>new</b> <span class="t constructor">Dictionary</span>&lt;<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>, <span class="t t">Dictionary</span>&lt;<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>&gt;&gt;
            {
                { <a href="/Microsoft.Azure.Management.HDInsight/A.html#c374046cc2f5e443" class="t t">ConfigurationKey</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bc9ee609559026fd" class="i field">CoreSite</a>, <a href="#17471d228d69c93e" class="i method">GetCoreConfigsForWasb</a>(<span class="r19 r">storageAccount</span>) },
                { <a href="/Microsoft.Azure.Management.HDInsight/A.html#c374046cc2f5e443" class="t t">ConfigurationKey</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#7a63c3148ca4b8d6" class="i field">Gateway</a>, <span class="r20 r">configurations</span>[<a href="/Microsoft.Azure.Management.HDInsight/A.html#c374046cc2f5e443" class="t t">ConfigurationKey</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#7a63c3148ca4b8d6" class="i field">Gateway</a>] }
            };
 
            <span class="c">// Roles</span>
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#a0a42be8d61a8e23" class="k">var</a> <span id="r21 rd" class="r21 r">headNode</span> = <span class="r18 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#d30c89932f32148c" class="i property">ComputeProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#81969beedb3162c1" class="i property">Roles</a>.<span class="i method">First</span>(<span id="r22 rd" class="r22 r">role</span> =&gt; <span class="r22 r">role</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#fb24039d3cd14132" class="i property">Name</a> == <span class="s">&quot;headnode&quot;</span>);
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r23 rd" class="r23 r">clusterType</span> = <span class="r18 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f8dcb4ff658c96d8" class="i property">ClusterDefinition</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#fdbfcdc1fa742ae1" class="i property">Kind</a>;
            <span class="r21 r">headNode</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#86ee5696e59186d4" class="i property">HardwareProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#3e6a31f8dbb3cf06" class="i property">VmSize</a> = <a href="/Microsoft.Azure.Management.HDInsight/A.html#27252b0c509d3904" class="t t">DefaultVmSizes</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#496edc29c69d8854" class="t t">HeadNode</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#d393d9edb7612902" class="i method">GetSize</a>(<span class="r23 r">clusterType</span>);
 
            <b>return</b> <span class="r18 r">createParams</span>;
        }
 
        <b>private class</b> <a id="3fdd7baa8ef4c561" href="../R/3fdd7baa8ef4c561.html" target="n" data-glyph="4,1" class="t t">TestDelegatingHandler</a> : <span class="t t">DelegatingHandler</span>
        {
            <b>protected override async</b> <a href="@1@System.Runtime/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<span class="t t">HttpResponseMessage</span>&gt; <a id="130a2b3ca3c414dc" href="../R/130a2b3ca3c414dc.html" target="n" data-glyph="75,2" class="i method">SendAsync</a>(<span class="t t">HttpRequestMessage</span> <span id="r24 rd" class="r24 r">request</span>, <a href="@1@System.Runtime/A.html#36b17ded8b1a228c" class="t t">CancellationToken</a> <span id="r25 rd" class="r25 r">cancellationToken</span>)
            {
                <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r26 rd" class="r26 r">content</span> = <b>await</b> <span class="r24 r">request</span>.<span class="i property">Content</span>.<span class="i method">ReadAsStringAsync</span>();
                <a href="#288f61c544a45e11" class="i property">Requests</a>.<span class="i method">Add</span>(<span class="r26 r">content</span>);
 
                <b>return</b> <b>new</b> <span class="t constructor">HttpResponseMessage</span>
                {
                    <span class="i property">Content</span> = <b>new</b> <span class="t constructor">StringContent</span>(<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@System.Runtime/A.html#c9f70a27facb27cf" class="i field">Empty</a>)
                };
            }
 
            <b>public</b> <span class="t t">List</span>&lt;<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>&gt; <a id="288f61c544a45e11" href="../R/288f61c544a45e11.html" target="n" data-glyph="102,2" class="i property">Requests</a> { <b>get</b>; <b>private set</b>; }
 
            <b>public</b> <a id="35d7c07e7387203b" href="../R/35d7c07e7387203b.html" target="n" data-glyph="72,2" class="t constructor">TestDelegatingHandler</a>()
            {
                <a href="#288f61c544a45e11" class="i property">Requests</a> = <b>new</b> <span class="t constructor">List</span>&lt;<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>&gt;();
            }
        }
    }
}
</pre></td></tr></table></div></body></html>

<!DOCTYPE html>
<html><head><title>ClusterOperationTests.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(930);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Microsoft.Azure.Management.HDInsight.Tests/ScenarioTests/ClusterOperationTests.cs" target="_top">ScenarioTests\ClusterOperationTests.cs</a><br/></td><td><a class="blueLink" href="https://github.com/Azure/azure-sdk-for-net/tree/main/sdk/hdinsight/Microsoft.Azure.Management.HDInsight/tests/ScenarioTests/ClusterOperationTests.cs" target="_blank">View on GitHub</a></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Microsoft.Azure.Management.HDInsight.Tests" target="_top">Microsoft.Azure.Management.HDInsight.Tests.csproj</a> (Microsoft.Azure.Management.HDInsight.Tests)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License. See License.txt in the project root for license information.</span>
 
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i n">HDInsight</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i n">HDInsight</span>.<span class="i n">Models</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i n">KeyVault</span>.<span class="i n">Models</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i n">Storage</span>.<span class="i n">Models</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Rest</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Rest</span>.<span class="i n">ClientRuntime</span>.<span class="i n">Azure</span>.<span class="i n">TestFramework</span>;
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Net</span>;
<b>using</b> <span class="i n">Xunit</span>;
<b>using static</b> <span class="i n">Management</span>.<span class="i n">HDInsight</span>.<span class="i n">Tests</span>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#c477825a07e09160" class="t t">HDInsightManagementTestUtilities</a>;
<b>using</b> <span class="t">Permissions</span> = <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i n">KeyVault</span>.<span class="i n">Models</span>.<a href="/Microsoft.Azure.Management.KeyVault/A.html#e3fb5b1314d27048" class="t t">Permissions</a>;
<b>using</b> <span class="t">StorageAccount</span> = <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i n">HDInsight</span>.<span class="i n">Models</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#61f443381626ff8d" class="t t">StorageAccount</a>;
 
<b>namespace</b> <span class="i n">Management</span>.<span class="i n">HDInsight</span>.<span class="i n">Tests</span>
{
    <b>public class</b> <a id="bec3d59a6a5cdae4" href="../R/../../0000000000.html" target="n" data-glyph="0,0" class="t t"><span id="c0e38f5aed253b44">ClusterOperationTests</span></a> : <a href="HDInsightManagementTestBase.cs.html#c30c1c779e7b7348" class="t t">HDInsightManagementTestBase</a>
    {
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="125ef4f0d2e29463" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestCreateHumboldtCluster</a>()
        {
            <a href="HDInsightManagementTestBase.cs.html#3e556594d1ac3c07" class="i method">TestInitialize</a>();
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r0 rd" class="r0 r">clusterName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdisdk-humboldt&quot;</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#b40349c3dfb11e02" class="k">var</a> <span id="r1 rd" class="r1 r">createParams</span> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#45750bba7a204f74" class="i method">PrepareClusterCreateParamsForWasb</a>();
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r2 rd" class="r2 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f0e6207bb6ab0bf0" class="i method">Create</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r0 r">clusterName</span>, <span class="r1 r">createParams</span>);
            <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#bb03592a007be12a" class="i method">ValidateCluster</a>(<span class="r0 r">clusterName</span>, <span class="r1 r">createParams</span>, <span class="r2 r">cluster</span>);
        }
 
        [<span class="t constructor">Fact</span>(<span class="i property">Skip</span> = <span class="s">&quot;Premium Cluster only available for ESP cluster.&quot;</span>)]
        <b>public void</b> <a id="4f65d41ed460e490" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestCreateHumboldtClusterWithPremiumTier</a>()
        {
            <a href="HDInsightManagementTestBase.cs.html#3e556594d1ac3c07" class="i method">TestInitialize</a>();
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r3 rd" class="r3 r">clusterName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdisdk-premium&quot;</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#b40349c3dfb11e02" class="k">var</a> <span id="r4 rd" class="r4 r">createParams</span> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#45750bba7a204f74" class="i method">PrepareClusterCreateParamsForWasb</a>();
            <span class="r4 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#00ac3333a180c869" class="i property">Tier</a> = <a href="/Microsoft.Azure.Management.HDInsight/A.html#6328d41e58dc3548" class="t t">Tier</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#9f132cdf71acfa91" class="i field">Premium</a>;
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r5 rd" class="r5 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f0e6207bb6ab0bf0" class="i method">Create</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r3 r">clusterName</span>, <span class="r4 r">createParams</span>);
            <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#bb03592a007be12a" class="i method">ValidateCluster</a>(<span class="r3 r">clusterName</span>, <span class="r4 r">createParams</span>, <span class="r5 r">cluster</span>);
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="bdb96c43d69a5e9b" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestCreateWithEmptyExtendedParameters</a>()
        {
            <a href="HDInsightManagementTestBase.cs.html#3e556594d1ac3c07" class="i method">TestInitialize</a>();
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r6 rd" class="r6 r">clusterName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdisdk-cluster&quot;</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#7244ec914a70326a" class="k">var</a> <span id="r7 rd" class="r7 r">ex</span> = <span class="t t">Assert</span>.<span class="i method">Throws</span>&lt;<a href="/Microsoft.Azure.Management.HDInsight/A.html#7244ec914a70326a" class="t t">ErrorResponseException</a>&gt;(() =&gt; <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f0e6207bb6ab0bf0" class="i method">Create</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r6 r">clusterName</span>, <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#bdebcc8675452944" class="t constructor">ClusterCreateParametersExtended</a>()));
            <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="t t">HttpStatusCode</span>.<span class="i field">BadRequest</span>, <span class="r7 r">ex</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#9c69fdfc27e695f4" class="i property">Response</a>.<a href="/Microsoft.Rest.ClientRuntime/A.html#8160e7ac2a8f7438" class="i property">StatusCode</a>);
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="43c6e9fae30fda5c" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestCreateHumboldtClusterWithCustomVMSizes</a>()
        {
            <a href="HDInsightManagementTestBase.cs.html#3e556594d1ac3c07" class="i method">TestInitialize</a>();
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r8 rd" class="r8 r">clusterName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdisdk-customvmsizes&quot;</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#b40349c3dfb11e02" class="k">var</a> <span id="r9 rd" class="r9 r">createParams</span> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#45750bba7a204f74" class="i method">PrepareClusterCreateParamsForWasb</a>();
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#a0a42be8d61a8e23" class="k">var</a> <span id="r10 rd" class="r10 r">headNode</span> = <span class="r9 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#d30c89932f32148c" class="i property">ComputeProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#81969beedb3162c1" class="i property">Roles</a>.<span class="i method">First</span>(<span id="r11 rd" class="r11 r">role</span> =&gt; <span class="r11 r">role</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#fb24039d3cd14132" class="i property">Name</a> == <span class="s">&quot;headnode&quot;</span>);
            <span class="r10 r">headNode</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#86ee5696e59186d4" class="i property">HardwareProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#3e6a31f8dbb3cf06" class="i property">VmSize</a> = <span class="s">&quot;ExtraLarge&quot;</span>;
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#a0a42be8d61a8e23" class="k">var</a> <span id="r12 rd" class="r12 r">zookeeperNode</span> = <span class="r9 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#d30c89932f32148c" class="i property">ComputeProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#81969beedb3162c1" class="i property">Roles</a>.<span class="i method">First</span>(<span id="r13 rd" class="r13 r">role</span> =&gt; <span class="r13 r">role</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#fb24039d3cd14132" class="i property">Name</a> == <span class="s">&quot;zookeepernode&quot;</span>);
            <span class="r12 r">zookeeperNode</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#86ee5696e59186d4" class="i property">HardwareProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#3e6a31f8dbb3cf06" class="i property">VmSize</a> = <span class="s">&quot;Medium&quot;</span>;
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r14 rd" class="r14 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f0e6207bb6ab0bf0" class="i method">Create</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r8 r">clusterName</span>, <span class="r9 r">createParams</span>);
            <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#bb03592a007be12a" class="i method">ValidateCluster</a>(<span class="r8 r">clusterName</span>, <span class="r9 r">createParams</span>, <span class="r14 r">cluster</span>);
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="9e53e9e92735daee" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestCreateLinuxSparkClusterWithComponentVersion</a>()
        {
            <a href="HDInsightManagementTestBase.cs.html#3e556594d1ac3c07" class="i method">TestInitialize</a>();
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r15 rd" class="r15 r">clusterName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdisdk-sparkcomponentversions&quot;</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#b40349c3dfb11e02" class="k">var</a> <span id="r16 rd" class="r16 r">createParams</span> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#45750bba7a204f74" class="i method">PrepareClusterCreateParamsForWasb</a>();
            <span class="r16 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f8dcb4ff658c96d8" class="i property">ClusterDefinition</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#fdbfcdc1fa742ae1" class="i property">Kind</a> = <span class="s">&quot;Spark&quot;</span>;
            <span class="r16 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f8dcb4ff658c96d8" class="i property">ClusterDefinition</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#9ff1d247893a721f" class="i property">ComponentVersion</a> = <b>new</b> <span class="t constructor">Dictionary</span>&lt;<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>&gt;()
            {
                { <span class="s">&quot;Spark&quot;</span>, <span class="s">&quot;2.2&quot;</span> }
            };
 
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r17 rd" class="r17 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f0e6207bb6ab0bf0" class="i method">Create</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r15 r">clusterName</span>, <span class="r16 r">createParams</span>);
            <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#bb03592a007be12a" class="i method">ValidateCluster</a>(<span class="r15 r">clusterName</span>, <span class="r16 r">createParams</span>, <span class="r17 r">cluster</span>);
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="e7e941b81373e66c" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestCreateKafkaClusterWithManagedDisks</a>()
        {
            <a href="HDInsightManagementTestBase.cs.html#3e556594d1ac3c07" class="i method">TestInitialize</a>();
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r18 rd" class="r18 r">clusterName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdisdk-kafka&quot;</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#b40349c3dfb11e02" class="k">var</a> <span id="r19 rd" class="r19 r">createParams</span> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#45750bba7a204f74" class="i method">PrepareClusterCreateParamsForWasb</a>();
            <span class="r19 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f8dcb4ff658c96d8" class="i property">ClusterDefinition</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#fdbfcdc1fa742ae1" class="i property">Kind</a> = <span class="s">&quot;Kafka&quot;</span>;
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#a0a42be8d61a8e23" class="k">var</a> <span id="r20 rd" class="r20 r">workerNode</span> = <span class="r19 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#d30c89932f32148c" class="i property">ComputeProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#81969beedb3162c1" class="i property">Roles</a>.<span class="i method">First</span>(<span id="r21 rd" class="r21 r">role</span> =&gt; <span class="r21 r">role</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#fb24039d3cd14132" class="i property">Name</a> == <span class="s">&quot;workernode&quot;</span>);
            <span class="r20 r">workerNode</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#5e7516bcbd579cd0" class="i property">DataDisksGroups</a> = <b>new</b> <span class="t constructor">List</span>&lt;<a href="/Microsoft.Azure.Management.HDInsight/A.html#7bc67cceb6bec85d" class="t t">DataDisksGroups</a>&gt;
            {
                <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#eddd4896bd96331a" class="t constructor">DataDisksGroups</a>
                {
                     <a href="/Microsoft.Azure.Management.HDInsight/A.html#2881f7bffd3c9919" class="i property">DisksPerNode</a> = 8
                }
            };
 
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r22 rd" class="r22 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f0e6207bb6ab0bf0" class="i method">Create</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r18 r">clusterName</span>, <span class="r19 r">createParams</span>);
            <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#bb03592a007be12a" class="i method">ValidateCluster</a>(<span class="r18 r">clusterName</span>, <span class="r19 r">createParams</span>, <span class="r22 r">cluster</span>);
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="e9300a0e7f569646" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestCreateKafkaClusterWithDiskEncryption</a>()
        {
            <a href="HDInsightManagementTestBase.cs.html#3e556594d1ac3c07" class="i method">TestInitialize</a>();
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r23 rd" class="r23 r">mockedTenantId</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#9e2449af3e7920d5" class="i method">GenerateGuid</a>().<a href="@1@System.Runtime/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#3dd50c3a4cf25fdf" class="i property">TenantId</a> = <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#2f55464eec7ba6e8" class="i method">GetTenantId</a>();
            <a href="#bec3d59a6a5cdae4" class="k">this</a>.<a href="HDInsightManagementTestBase.cs.html#5ed01e6f51c580cd" class="i property">Context</a>.<a href="../TestHelpers/HDInsightMockContext.cs.html#8ac667c68f15237f" class="i method">AddTextReplacementRule</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#3dd50c3a4cf25fdf" class="i property">TenantId</a>, <span class="r23 r">mockedTenantId</span>);
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r24 rd" class="r24 r">mockedClientObjectId</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#9e2449af3e7920d5" class="i method">GenerateGuid</a>().<a href="@1@System.Runtime/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#4a36949c099612cf" class="i property">ClientObjectId</a> = <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#e2f47667b1a05d11" class="i method">GetServicePrincipalObjectId</a>();
            <a href="#bec3d59a6a5cdae4" class="k">this</a>.<a href="HDInsightManagementTestBase.cs.html#5ed01e6f51c580cd" class="i property">Context</a>.<a href="../TestHelpers/HDInsightMockContext.cs.html#8ac667c68f15237f" class="i method">AddTextReplacementRule</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#4a36949c099612cf" class="i property">ClientObjectId</a>, <span class="r24 r">mockedClientObjectId</span>);
 
            <a href="/Microsoft.Azure.Management.KeyVault/A.html#eb2f517c972c41f5" class="t t">Vault</a> <span id="r25 rd" class="r25 r">vault</span> = <b>null</b>;
            <b>try</b>
            {
                <span class="c">// create key vault with soft delete enabled</span>
                <span class="r25 r">vault</span> = <a href="HDInsightManagementTestBase.cs.html#5b327abbdebadd8d" class="i method">CreateVault</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#5d7ac73d6abfc4e9" class="i property">VaultName</a>, <b>true</b>);
 
                <span class="c">// create managed identities for Azure resources.</span>
                <a href="/Microsoft.Azure.Management.ManagedServiceIdentity/A.html#022a46d7656d30e9" class="k">var</a> <span id="r26 rd" class="r26 r">msi</span> = <a href="HDInsightManagementTestBase.cs.html#2ae9fe31f2b1df81" class="i method">CreateMsi</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#ae9653c418bb1123" class="i property">ManagedIdentityName</a>);
 
                <span class="c">// add managed identity to vault</span>
                <a href="/Microsoft.Azure.Management.KeyVault/A.html#e3fb5b1314d27048" class="k">var</a> <span id="r27 rd" class="r27 r">requiredPermissions</span> = <b>new</b> <a href="/Microsoft.Azure.Management.KeyVault/A.html#02732a8882fc8aad" class="t constructor">Permissions</a>
                {
                    <a href="/Microsoft.Azure.Management.KeyVault/A.html#64d916b0edd40dc5" class="i property">Keys</a> = <b>new</b> <span class="t constructor">List</span>&lt;<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>&gt;() { <a href="/Microsoft.Azure.Management.KeyVault/A.html#1de55fe00fe0edaf" class="t t">KeyPermissions</a>.<a href="/Microsoft.Azure.Management.KeyVault/A.html#7614040515c4153e" class="i field">Get</a>, <a href="/Microsoft.Azure.Management.KeyVault/A.html#1de55fe00fe0edaf" class="t t">KeyPermissions</a>.<a href="/Microsoft.Azure.Management.KeyVault/A.html#72c2a3dcd5168ee1" class="i field">WrapKey</a>, <a href="/Microsoft.Azure.Management.KeyVault/A.html#1de55fe00fe0edaf" class="t t">KeyPermissions</a>.<a href="/Microsoft.Azure.Management.KeyVault/A.html#3d2b4281c75b334f" class="i field">UnwrapKey</a> },
                    <a href="/Microsoft.Azure.Management.KeyVault/A.html#a1473e836c5b8398" class="i property">Secrets</a> = <b>new</b> <span class="t constructor">List</span>&lt;<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>&gt;() { <a href="/Microsoft.Azure.Management.KeyVault/A.html#b1765cfe089fbbb5" class="t t">SecretPermissions</a>.<a href="/Microsoft.Azure.Management.KeyVault/A.html#0f4424d7043b3b32" class="i field">Get</a>, <a href="/Microsoft.Azure.Management.KeyVault/A.html#b1765cfe089fbbb5" class="t t">SecretPermissions</a>.<a href="/Microsoft.Azure.Management.KeyVault/A.html#066c45845dbf7e3f" class="i field">Set</a>, <a href="/Microsoft.Azure.Management.KeyVault/A.html#b1765cfe089fbbb5" class="t t">SecretPermissions</a>.<a href="/Microsoft.Azure.Management.KeyVault/A.html#e462b5f01fc72e1e" class="i field">Delete</a> }
                };
 
                <span class="r25 r">vault</span> = <a href="HDInsightManagementTestBase.cs.html#64bf965df5a0782f" class="i method">SetVaultPermissions</a>(<span class="r25 r">vault</span>, <span class="r26 r">msi</span>.<a href="/Microsoft.Azure.Management.ManagedServiceIdentity/A.html#4bfbe62c650fc331" class="i property">PrincipalId</a>.<a href="@1@System.Runtime/A.html#d83d2db767b43db7" class="i method">ToString</a>(), <span class="r27 r">requiredPermissions</span>);
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r25 r">vault</span>);
 
                <span class="c">// create key</span>
                <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r28 rd" class="r28 r">keyName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdicsharpkey1&quot;</span>);
                <a href="/Microsoft.Azure.KeyVault/A.html#3ff6311593b8db9a" class="k">var</a> <span id="r29 rd" class="r29 r">keyIdentifier</span> = <a href="HDInsightManagementTestBase.cs.html#a8b5ae4c5a9d5a78" class="i method">GenerateVaultKey</a>(<span class="r25 r">vault</span>, <span class="r28 r">keyName</span>);
 
                <span class="c">// create HDInsight cluster with Kafka disk encryption</span>
                <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r30 rd" class="r30 r">clusterName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdisdk-kafka-byok&quot;</span>);
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#b40349c3dfb11e02" class="k">var</a> <span id="r31 rd" class="r31 r">createParams</span> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#45750bba7a204f74" class="i method">PrepareClusterCreateParamsForWasb</a>();
                <span class="r31 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f8dcb4ff658c96d8" class="i property">ClusterDefinition</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#fdbfcdc1fa742ae1" class="i property">Kind</a> = <span class="s">&quot;Kafka&quot;</span>;
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#a0a42be8d61a8e23" class="k">var</a> <span id="r32 rd" class="r32 r">workerNode</span> = <span class="r31 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#d30c89932f32148c" class="i property">ComputeProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#81969beedb3162c1" class="i property">Roles</a>.<span class="i method">First</span>(<span id="r33 rd" class="r33 r">role</span> =&gt; <span class="r33 r">role</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#fb24039d3cd14132" class="i property">Name</a> == <span class="s">&quot;workernode&quot;</span>);
                <span class="r32 r">workerNode</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#5e7516bcbd579cd0" class="i property">DataDisksGroups</a> = <b>new</b> <span class="t constructor">List</span>&lt;<a href="/Microsoft.Azure.Management.HDInsight/A.html#7bc67cceb6bec85d" class="t t">DataDisksGroups</a>&gt;
                {
                    <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#eddd4896bd96331a" class="t constructor">DataDisksGroups</a>
                    {
                         <a href="/Microsoft.Azure.Management.HDInsight/A.html#2881f7bffd3c9919" class="i property">DisksPerNode</a> = 8
                    }
                };
 
                <span class="r31 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#546536c4629b9b01" class="i property">Identity</a> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#56c7713bf8a31196" class="t constructor">ClusterIdentity</a>
                {
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#b50b5c5c1dabbdb4" class="i property">Type</a> = <a href="/Microsoft.Azure.Management.HDInsight/A.html#2956a1ce4b18bb34" class="t t">ResourceIdentityType</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#e659f0d6715ea4d7" class="i field">UserAssigned</a>,
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#9f5b19457f4c6c04" class="i property">UserAssignedIdentities</a> = <b>new</b> <span class="t constructor">Dictionary</span>&lt;<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b026ed9ad202cfd" class="t t">UserAssignedIdentity</a>&gt;
                    {
                        { <span class="r26 r">msi</span>.<a href="/Microsoft.Azure.Management.ManagedServiceIdentity/A.html#e8a5e2370d215dff" class="i property">Id</a>, <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#c154f45ff25bd09a" class="t constructor">UserAssignedIdentity</a>() }
                    }
                };
 
                <span class="r31 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#4d0a1271afc63b36" class="i property">DiskEncryptionProperties</a> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#0ffff1ae35943227" class="t constructor">DiskEncryptionProperties</a>
                {
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#3a39b4e1e8a7b2a6" class="i property">VaultUri</a> = <span class="r29 r">keyIdentifier</span>.<a href="/Microsoft.Azure.KeyVault/A.html#08ef7ec7f118860b" class="i property">Vault</a>,
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#51f925ffdebd3d07" class="i property">KeyName</a> = <span class="r29 r">keyIdentifier</span>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>,
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#5b0f3d4c6c8b78bd" class="i property">KeyVersion</a> = <span class="r29 r">keyIdentifier</span>.<a href="/Microsoft.Azure.KeyVault/A.html#97a4e42e4cd29250" class="i property">Version</a>,
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#92b7ed5a75593718" class="i property">MsiResourceId</a> = <span class="r26 r">msi</span>.<a href="/Microsoft.Azure.Management.ManagedServiceIdentity/A.html#e8a5e2370d215dff" class="i property">Id</a>
                };
 
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r34 rd" class="r34 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f0e6207bb6ab0bf0" class="i method">Create</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r30 r">clusterName</span>, <span class="r31 r">createParams</span>);
                <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#bb03592a007be12a" class="i method">ValidateCluster</a>(<span class="r30 r">clusterName</span>, <span class="r31 r">createParams</span>, <span class="r34 r">cluster</span>);
 
                <span class="c">// check disk encryption properties</span>
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#a5d33524791414d2" class="k">var</a> <span id="r35 rd" class="r35 r">diskEncryptionProperties</span> = <span class="r34 r">cluster</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#27d1965c115d2591" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#ca4d63cca052c86f" class="i property">DiskEncryptionProperties</a>;
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#a5d33524791414d2" class="k">var</a> <span id="r36 rd" class="r36 r">diskEncryptionPropertiesParams</span> = <span class="r31 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#4d0a1271afc63b36" class="i property">DiskEncryptionProperties</a>;
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r35 r">diskEncryptionProperties</span>);
                <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r36 r">diskEncryptionPropertiesParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#3a39b4e1e8a7b2a6" class="i property">VaultUri</a>, <span class="r35 r">diskEncryptionProperties</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#3a39b4e1e8a7b2a6" class="i property">VaultUri</a>);
                <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r36 r">diskEncryptionPropertiesParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#51f925ffdebd3d07" class="i property">KeyName</a>, <span class="r35 r">diskEncryptionProperties</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#51f925ffdebd3d07" class="i property">KeyName</a>);
                <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r36 r">diskEncryptionPropertiesParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#5b0f3d4c6c8b78bd" class="i property">KeyVersion</a>, <span class="r35 r">diskEncryptionProperties</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#5b0f3d4c6c8b78bd" class="i property">KeyVersion</a>);
                <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r26 r">msi</span>.<a href="/Microsoft.Azure.Management.ManagedServiceIdentity/A.html#e8a5e2370d215dff" class="i property">Id</a>, <span class="r35 r">diskEncryptionProperties</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#92b7ed5a75593718" class="i property">MsiResourceId</a>, <b>true</b>);
 
                <span class="r28 r">keyName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdicsharpkey2&quot;</span>);
                <a href="/Microsoft.Azure.KeyVault/A.html#3ff6311593b8db9a" class="k">var</a> <span id="r37 rd" class="r37 r">secondKeyIdentifier</span> = <a href="HDInsightManagementTestBase.cs.html#a8b5ae4c5a9d5a78" class="i method">GenerateVaultKey</a>(<span class="r25 r">vault</span>, <span class="r28 r">keyName</span>);
 
                <span class="c">// rotate cluster key</span>
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#efddfcd9f1868b64" class="k">var</a> <span id="r38 rd" class="r38 r">rotateParams</span> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#2b1b084349a70b75" class="t constructor">ClusterDiskEncryptionParameters</a>
                {
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#8666c41bd71f5b9f" class="i property">VaultUri</a> = <span class="r37 r">secondKeyIdentifier</span>.<a href="/Microsoft.Azure.KeyVault/A.html#08ef7ec7f118860b" class="i property">Vault</a>,
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#7d5b8b474f535230" class="i property">KeyName</a> = <span class="r37 r">secondKeyIdentifier</span>.<a href="/Microsoft.Azure.KeyVault/A.html#16cf181322c94363" class="i property">Name</a>,
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#83b3718eee294d27" class="i property">KeyVersion</a> = <span class="r37 r">secondKeyIdentifier</span>.<a href="/Microsoft.Azure.KeyVault/A.html#97a4e42e4cd29250" class="i property">Version</a>
                };
 
                <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#2afc977c107fa2a2" class="i method">RotateDiskEncryptionKey</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r30 r">clusterName</span>, <span class="r38 r">rotateParams</span>);
                <span class="r34 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#04138739787f1c82" class="i method">Get</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r30 r">clusterName</span>);
 
                <span class="c">// check disk encryption properties</span>
                <span class="r35 r">diskEncryptionProperties</span> = <span class="r34 r">cluster</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#27d1965c115d2591" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#ca4d63cca052c86f" class="i property">DiskEncryptionProperties</a>;
                <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r35 r">diskEncryptionProperties</span>);
                <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r38 r">rotateParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#8666c41bd71f5b9f" class="i property">VaultUri</a>, <span class="r35 r">diskEncryptionProperties</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#3a39b4e1e8a7b2a6" class="i property">VaultUri</a>);
                <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r38 r">rotateParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#7d5b8b474f535230" class="i property">KeyName</a>, <span class="r35 r">diskEncryptionProperties</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#51f925ffdebd3d07" class="i property">KeyName</a>);
                <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r38 r">rotateParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#83b3718eee294d27" class="i property">KeyVersion</a>, <span class="r35 r">diskEncryptionProperties</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#5b0f3d4c6c8b78bd" class="i property">KeyVersion</a>);
                <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r26 r">msi</span>.<a href="/Microsoft.Azure.Management.ManagedServiceIdentity/A.html#e8a5e2370d215dff" class="i property">Id</a>, <span class="r35 r">diskEncryptionProperties</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#92b7ed5a75593718" class="i property">MsiResourceId</a>, <b>true</b>);
            }
            <b>finally</b>
            {
                <b>if</b> (<span class="r25 r">vault</span> != <b>null</b>)
                {
                    <a href="HDInsightManagementTestBase.cs.html#9be965e65b62e76c" class="i method">DeleteVault</a>(<span class="r25 r">vault</span>);
                }
            }
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="76dcbc3cd2166d62" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestCreateKafkaClusterWithRestProxyProperties</a>()
        {
            <a href="HDInsightManagementTestBase.cs.html#3e556594d1ac3c07" class="i method">TestInitialize</a>();
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r39 rd" class="r39 r">clusterName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdisdk-kafka-restproxy&quot;</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#b40349c3dfb11e02" class="k">var</a> <span id="r40 rd" class="r40 r">createParams</span> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#45750bba7a204f74" class="i method">PrepareClusterCreateParamsForWasb</a>();
            <span class="r40 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#acff7f47c74afc17" class="i property">ClusterVersion</a> = <span class="s">&quot;4.0&quot;</span>;
            <span class="r40 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f8dcb4ff658c96d8" class="i property">ClusterDefinition</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#fdbfcdc1fa742ae1" class="i property">Kind</a> = <span class="s">&quot;kafka&quot;</span>;
            <span class="r40 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f8dcb4ff658c96d8" class="i property">ClusterDefinition</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#9ff1d247893a721f" class="i property">ComponentVersion</a> = <b>new</b> <span class="t constructor">Dictionary</span>&lt;<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>&gt;{ { <span class="s">&quot;Kafka&quot;</span>, <span class="s">&quot;2.1&quot;</span>} };
            <span class="r40 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#9170a0a45eb684fe" class="i property">Location</a> = <span class="s">&quot;West US 2&quot;</span>;
 
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#a0a42be8d61a8e23" class="k">var</a> <span id="r41 rd" class="r41 r">workerNode</span> = <span class="r40 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#d30c89932f32148c" class="i property">ComputeProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#81969beedb3162c1" class="i property">Roles</a>.<span class="i method">First</span>(<span id="r42 rd" class="r42 r">role</span> =&gt; <span class="r42 r">role</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#fb24039d3cd14132" class="i property">Name</a> == <span class="s">&quot;workernode&quot;</span>);
            <span class="r41 r">workerNode</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#5e7516bcbd579cd0" class="i property">DataDisksGroups</a> = <b>new</b> <span class="t constructor">List</span>&lt;<a href="/Microsoft.Azure.Management.HDInsight/A.html#7bc67cceb6bec85d" class="t t">DataDisksGroups</a>&gt;
            {
                <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#eddd4896bd96331a" class="t constructor">DataDisksGroups</a>
                {
                     <a href="/Microsoft.Azure.Management.HDInsight/A.html#2881f7bffd3c9919" class="i property">DisksPerNode</a> = 8
                }
            };
 
            <span class="c">//KafkaManagementNode must be defined for Kafka Rest Proxy to be provisioned</span>
            <span class="r40 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#d30c89932f32148c" class="i property">ComputeProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#81969beedb3162c1" class="i property">Roles</a>.<a href="@1@System.Runtime/A.html#a9319db8c62ae453" class="i method">Add</a>(<b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#96118194aa53f18a" class="t constructor">Role</a>
            {
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#fb24039d3cd14132" class="i property">Name</a> = <span class="s">&quot;kafkamanagementnode&quot;</span>,
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#b3144617377d4ddd" class="i property">TargetInstanceCount</a> = 2,
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#86ee5696e59186d4" class="i property">HardwareProfile</a> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#a579366d6336d16a" class="t constructor">HardwareProfile</a>
                {
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#3e6a31f8dbb3cf06" class="i property">VmSize</a> = <span class="s">&quot;Standard_D4_v2&quot;</span>
                },
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#9d3b7fec5973340b" class="i property">OsProfile</a> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#570306fcca988e24" class="t constructor">OsProfile</a>
                {
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#3b0aaf6588c8acc5" class="i property">LinuxOperatingSystemProfile</a> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#78203b6437011646" class="t constructor">LinuxOperatingSystemProfile</a>
                    {
                        <a href="/Microsoft.Azure.Management.HDInsight/A.html#2d7f635cd13455ad" class="i property">Username</a> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#974e3d85f1d36aa5" class="i property">SshUsername</a>,
                        <a href="/Microsoft.Azure.Management.HDInsight/A.html#a8e52deb860237ff" class="i property">Password</a> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#da68f65ee8c982e2" class="i property">SshPassword</a>
                    }
                }
            });
            <span class="c">//only kafaka cluster with hdi 4.0 and above with kafaka version 2.1 and above can be deployed with rest proxy.</span>
            <span class="r40 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#7f01427df3a7b557" class="i property">KafkaRestProperties</a> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#e1ccc50488aea098" class="t constructor">KafkaRestProperties</a>
            {
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#c22390792a2387ff" class="i property">ClientGroupInfo</a> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#4dfd9849644beecb" class="t constructor">ClientGroupInfo</a>
                {
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#e64b877acf87c074" class="i property">GroupId</a> = <a href="../../GuidAssembly/R/7bef90fa-0aa3-4bb4-b4d2-2ae7c14cfe41.html" target="n" class="s">&quot;7bef90fa-0aa3-4bb4-b4d2-2ae7c14cfe41&quot;</a>,
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#261e649efb114bec" class="i property">GroupName</a> = <span class="s">&quot;KafakaRestProperties&quot;</span>
                }
            };
 
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r43 rd" class="r43 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f0e6207bb6ab0bf0" class="i method">Create</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r39 r">clusterName</span>, <span class="r40 r">createParams</span>);
            <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#bb03592a007be12a" class="i method">ValidateCluster</a>(<span class="r39 r">clusterName</span>, <span class="r40 r">createParams</span>, <span class="r43 r">cluster</span>);
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r43 r">cluster</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#27d1965c115d2591" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#e430916415a1facd" class="i property">KafkaRestProperties</a>);
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="4191f191597f287d" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestCreateWithADLSv1</a>() {
 
            <a href="HDInsightManagementTestBase.cs.html#3e556594d1ac3c07" class="i method">TestInitialize</a>();
 
            <span class="c">// This test case require ADLS gen1 storage account created beforehand</span>
            <b>if</b> (<a href="HDInsightManagementTestBase.cs.html#ef48a712e642a527" class="i method">IsPartialRecordMode</a>())
            {
                <b>return</b>;
            }
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r44 rd" class="r44 r">mockedTenantId</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#9e2449af3e7920d5" class="i method">GenerateGuid</a>().<a href="@1@System.Runtime/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#3dd50c3a4cf25fdf" class="i property">TenantId</a> = <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#2f55464eec7ba6e8" class="i method">GetTenantId</a>();
            <a href="#bec3d59a6a5cdae4" class="k">this</a>.<a href="HDInsightManagementTestBase.cs.html#5ed01e6f51c580cd" class="i property">Context</a>.<a href="../TestHelpers/HDInsightMockContext.cs.html#8ac667c68f15237f" class="i method">AddTextReplacementRule</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#3dd50c3a4cf25fdf" class="i property">TenantId</a>, <span class="r44 r">mockedTenantId</span>);
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r45 rd" class="r45 r">mockedDataLakeClientId</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#9e2449af3e7920d5" class="i method">GenerateGuid</a>().<a href="@1@System.Runtime/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#c528dd1a2136fc9a" class="i property">DataLakeClientId</a> = <a href="../TestHelpers/TestConfigurationManager.cs.html#da6439a50ba65554" class="t t">TestConfigurationManager</a>.<a href="../TestHelpers/TestConfigurationManager.cs.html#1105fe1d79699390" class="i property">Instance</a>.<a href="../TestHelpers/TestConfigurationManager.cs.html#581656e0d1766a37" class="i property">AppSettings</a>.<a href="../TestHelpers/TestConfigurationManager.cs.html#404a57f44e230148" class="i property">DataLakeClientId</a>;
            <a href="#bec3d59a6a5cdae4" class="k">this</a>.<a href="HDInsightManagementTestBase.cs.html#5ed01e6f51c580cd" class="i property">Context</a>.<a href="../TestHelpers/HDInsightMockContext.cs.html#8ac667c68f15237f" class="i method">AddTextReplacementRule</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#c528dd1a2136fc9a" class="i property">DataLakeClientId</a>, <span class="r45 r">mockedDataLakeClientId</span>);
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r46 rd" class="r46 r">mockedDataLakeStoreAccountName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;fakehdiadlsaccount&quot;</span>);
            <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#783880fa639c7135" class="i property">DataLakeStoreAccountName</a> = <a href="../TestHelpers/TestConfigurationManager.cs.html#da6439a50ba65554" class="t t">TestConfigurationManager</a>.<a href="../TestHelpers/TestConfigurationManager.cs.html#1105fe1d79699390" class="i property">Instance</a>.<a href="../TestHelpers/TestConfigurationManager.cs.html#581656e0d1766a37" class="i property">AppSettings</a>.<a href="../TestHelpers/TestConfigurationManager.cs.html#ca12cb9c9b2c77e5" class="i property">DataLakeStoreAccountName</a>;
            <a href="#bec3d59a6a5cdae4" class="k">this</a>.<a href="HDInsightManagementTestBase.cs.html#5ed01e6f51c580cd" class="i property">Context</a>.<a href="../TestHelpers/HDInsightMockContext.cs.html#8ac667c68f15237f" class="i method">AddTextReplacementRule</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#783880fa639c7135" class="i property">DataLakeStoreAccountName</a>, <span class="r46 r">mockedDataLakeStoreAccountName</span>);
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r47 rd" class="r47 r">clusterName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdisdk-adlgen1&quot;</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#b40349c3dfb11e02" class="k">var</a> <span id="r48 rd" class="r48 r">createParams</span> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#05804a7e983df8b2" class="i method">PrepareClusterCreateParamsForADLSv1</a>();
 
            <span class="c">// Add additional storage account</span>
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r49 rd" class="r49 r">secondaryStorageAccountName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdicsharpstorage2&quot;</span>);
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r50 rd" class="r50 r">secondaryStorageAccountKey</span> = <a href="HDInsightManagementTestBase.cs.html#82e2701b43dbe717" class="i method">CreateStorageAccount</a>(<span class="r49 r">secondaryStorageAccountName</span>);
            <span class="r48 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#59cdf04de9bcc2c9" class="i property">StorageProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#2a922bdea0059b60" class="i property">Storageaccounts</a>.<a href="@1@System.Runtime/A.html#a9319db8c62ae453" class="i method">Add</a>(
                <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#1c4b0280c0a50e27" class="t constructor">StorageAccount</a>
                {
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#ee59b14f037ee346" class="i property">Name</a> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#2bd4d94eb58e7e0e" class="i property">StorageAccountName</a> + <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#3202b9e58dcb894f" class="i property">BlobEndpointSuffix</a>,
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#1d6a69ae0576c2c2" class="i property">Key</a> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#c595f301cb6693a4" class="i property">StorageAccountKey</a>,
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#954479a222705214" class="i property">Container</a> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#0fe65d4671a357eb" class="i property">ContainerName</a>.<a href="@1@System.Runtime/A.html#0b5a1ee33618e0b3" class="i method">ToLower</a>(),
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#ea3f8856de947b06" class="i property">IsDefault</a> = <b>false</b>
                }
            );
 
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r51 rd" class="r51 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f0e6207bb6ab0bf0" class="i method">Create</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r47 r">clusterName</span>, <span class="r48 r">createParams</span>);
            <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#bb03592a007be12a" class="i method">ValidateCluster</a>(<span class="r47 r">clusterName</span>, <span class="r48 r">createParams</span>, <span class="r51 r">cluster</span>);
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="51b8a46c915ea8e1" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestCreateWithADLSv2</a>()
        {
            <a href="HDInsightManagementTestBase.cs.html#3e556594d1ac3c07" class="i method">TestInitialize</a>();
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r52 rd" class="r52 r">mockedTenantId</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#9e2449af3e7920d5" class="i method">GenerateGuid</a>().<a href="@1@System.Runtime/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#3dd50c3a4cf25fdf" class="i property">TenantId</a> = <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#2f55464eec7ba6e8" class="i method">GetTenantId</a>();
            <a href="#bec3d59a6a5cdae4" class="k">this</a>.<a href="HDInsightManagementTestBase.cs.html#5ed01e6f51c580cd" class="i property">Context</a>.<a href="../TestHelpers/HDInsightMockContext.cs.html#8ac667c68f15237f" class="i method">AddTextReplacementRule</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#3dd50c3a4cf25fdf" class="i property">TenantId</a>, <span class="r52 r">mockedTenantId</span>);
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r53 rd" class="r53 r">mockedClientObjectId</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#9e2449af3e7920d5" class="i method">GenerateGuid</a>().<a href="@1@System.Runtime/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#4a36949c099612cf" class="i property">ClientObjectId</a> = <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#e2f47667b1a05d11" class="i method">GetServicePrincipalObjectId</a>();
            <a href="#bec3d59a6a5cdae4" class="k">this</a>.<a href="HDInsightManagementTestBase.cs.html#5ed01e6f51c580cd" class="i property">Context</a>.<a href="../TestHelpers/HDInsightMockContext.cs.html#8ac667c68f15237f" class="i method">AddTextReplacementRule</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#4a36949c099612cf" class="i property">ClientObjectId</a>, <span class="r53 r">mockedClientObjectId</span>);
 
            <span class="c">// Create an Azure storage account with Data Lake Storage Gen 2.</span>
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r54 rd" class="r54 r">adlsV2AccountName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdicsharpadlsv2&quot;</span>);
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r55 rd" class="r55 r">storageV2AccountAccessKey</span> = <a href="HDInsightManagementTestBase.cs.html#993463aeb96cb876" class="i property">HDInsightManagementHelper</a>.<a href="../TestHelpers/HDInsightManagementHelper.cs.html#7e769c6e258af3ce" class="i method">CreateStorageAccount</a>(
                <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>,
                <span class="r54 r">adlsV2AccountName</span>,
                <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6062cb3407743238" class="i property">Location</a>,
                <b>out string</b> <span id="r56 rd" class="r56 r">storageAccountSuffix</span>,
                <a href="/Microsoft.Azure.Management.Storage/A.html#da9852c6887c7ca0" class="t t">Kind</a>.<a href="/Microsoft.Azure.Management.Storage/A.html#d6ee97275f551bb3" class="i field">StorageV2</a>,
                <b>true</b>);
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r57 rd" class="r57 r">storageResourceId</span> = <a href="HDInsightManagementTestBase.cs.html#993463aeb96cb876" class="i property">HDInsightManagementHelper</a>.<a href="../TestHelpers/HDInsightManagementHelper.cs.html#604c628e220568c4" class="i method">GetStorageAccountId</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r54 r">adlsV2AccountName</span>);
 
            <span class="c">// Create a user assigned managed identity.</span>
            <a href="/Microsoft.Azure.Management.ManagedServiceIdentity/A.html#022a46d7656d30e9" class="k">var</a> <span id="r58 rd" class="r58 r">msi</span> = <a href="HDInsightManagementTestBase.cs.html#2ae9fe31f2b1df81" class="i method">CreateMsi</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#ae9653c418bb1123" class="i property">ManagedIdentityName</a>);
 
            <span class="c">// Wait some time in order to improve robustness</span>
            <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#22c7c2c5a736288d" class="i method">Wait</a>(<a href="@1@System.Runtime/A.html#865ef7b89f41b632" class="t t">TimeSpan</a>.<a href="@1@System.Runtime/A.html#ae74be5264df78d8" class="i method">FromMinutes</a>(1));
 
            <span class="c">// Assign Storage Blob Data Contributor access to the created managed identity on Azure Storage.</span>
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r59 rd" class="r59 r">assignmentName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#9e2449af3e7920d5" class="i method">GenerateGuid</a>().<a href="@1@System.Runtime/A.html#a6547a472def7796" class="i method">ToString</a>();
            <a href="HDInsightManagementTestBase.cs.html#993463aeb96cb876" class="i property">HDInsightManagementHelper</a>.<a href="../TestHelpers/HDInsightManagementHelper.cs.html#f761fee40970f67b" class="i method">AddRoleAssignment</a>(<span class="r57 r">storageResourceId</span>, <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#0dfff26f3aa00b60" class="i property">AdlsGen2RequiredRoleName</a>, <span class="r59 r">assignmentName</span>, <span class="r58 r">msi</span>.<a href="/Microsoft.Azure.Management.ManagedServiceIdentity/A.html#4bfbe62c650fc331" class="i property">PrincipalId</a>?.<a href="@1@System.Runtime/A.html#a6547a472def7796" class="i method">ToString</a>());
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r60 rd" class="r60 r">clusterName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdisdk-adlgen2&quot;</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#b40349c3dfb11e02" class="k">var</a> <span id="r61 rd" class="r61 r">createParams</span> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#feb28dea03029133" class="i method">PrepareClusterCreateParamsForADLSv2</a>(<span class="r54 r">adlsV2AccountName</span>, <span class="r57 r">storageResourceId</span>, <span class="r58 r">msi</span>.<a href="/Microsoft.Azure.Management.ManagedServiceIdentity/A.html#e8a5e2370d215dff" class="i property">Id</a>);
 
            <span class="c">// Add additional storage account</span>
            <span class="r61 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#59cdf04de9bcc2c9" class="i property">StorageProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#2a922bdea0059b60" class="i property">Storageaccounts</a>.<a href="@1@System.Runtime/A.html#a9319db8c62ae453" class="i method">Add</a>(
                <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#1c4b0280c0a50e27" class="t constructor">StorageAccount</a>
                {
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#ee59b14f037ee346" class="i property">Name</a> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#2bd4d94eb58e7e0e" class="i property">StorageAccountName</a> + <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#3202b9e58dcb894f" class="i property">BlobEndpointSuffix</a>,
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#1d6a69ae0576c2c2" class="i property">Key</a> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#c595f301cb6693a4" class="i property">StorageAccountKey</a>,
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#954479a222705214" class="i property">Container</a> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#0fe65d4671a357eb" class="i property">ContainerName</a>.<a href="@1@System.Runtime/A.html#0b5a1ee33618e0b3" class="i method">ToLower</a>(),
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#ea3f8856de947b06" class="i property">IsDefault</a> = <b>false</b>
                }
            );
 
            <span class="c">// Create a HDInsight cluster</span>
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r62 rd" class="r62 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f0e6207bb6ab0bf0" class="i method">Create</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r60 r">clusterName</span>, <span class="r61 r">createParams</span>);
            <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#bb03592a007be12a" class="i method">ValidateCluster</a>(<span class="r60 r">clusterName</span>, <span class="r61 r">createParams</span>, <span class="r62 r">cluster</span>);
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="6c3f04f4e9b64c9f" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestCreateWithAdditionalStorageAccount</a>()
        {
            <a href="HDInsightManagementTestBase.cs.html#3e556594d1ac3c07" class="i method">TestInitialize</a>();
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r63 rd" class="r63 r">clusterName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdisdk-additional&quot;</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#b40349c3dfb11e02" class="k">var</a> <span id="r64 rd" class="r64 r">createParams</span> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#45750bba7a204f74" class="i method">PrepareClusterCreateParamsForWasb</a>();
 
            <span class="c">// Add additional storage account</span>
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r65 rd" class="r65 r">secondaryStorageAccountName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdicsharpstorage2&quot;</span>);
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r66 rd" class="r66 r">secondaryStorageAccountKey</span> = <a href="HDInsightManagementTestBase.cs.html#82e2701b43dbe717" class="i method">CreateStorageAccount</a>(<span class="r65 r">secondaryStorageAccountName</span>);
            <span class="r64 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#59cdf04de9bcc2c9" class="i property">StorageProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#2a922bdea0059b60" class="i property">Storageaccounts</a>.<a href="@1@System.Runtime/A.html#a9319db8c62ae453" class="i method">Add</a>(
                <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#1c4b0280c0a50e27" class="t constructor">StorageAccount</a>
                {
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#ee59b14f037ee346" class="i property">Name</a> = <span class="r65 r">secondaryStorageAccountName</span> + <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#3202b9e58dcb894f" class="i property">BlobEndpointSuffix</a>,
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#1d6a69ae0576c2c2" class="i property">Key</a> = <span class="r66 r">secondaryStorageAccountKey</span>,
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#954479a222705214" class="i property">Container</a> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#0fe65d4671a357eb" class="i property">ContainerName</a>.<a href="@1@System.Runtime/A.html#0b5a1ee33618e0b3" class="i method">ToLower</a>(),
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#ea3f8856de947b06" class="i property">IsDefault</a> = <b>false</b>
                }
            );
 
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r67 rd" class="r67 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f0e6207bb6ab0bf0" class="i method">Create</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r63 r">clusterName</span>, <span class="r64 r">createParams</span>);
            <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#bb03592a007be12a" class="i method">ValidateCluster</a>(<span class="r63 r">clusterName</span>, <span class="r64 r">createParams</span>, <span class="r67 r">cluster</span>);
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="f9177592dd02fe55" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestCreateClusterWithAutoScaleLoadBasedType</a>()
        {
            <a href="HDInsightManagementTestBase.cs.html#3e556594d1ac3c07" class="i method">TestInitialize</a>();
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r68 rd" class="r68 r">clusterName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdisdk-loadbased&quot;</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#b40349c3dfb11e02" class="k">var</a> <span id="r69 rd" class="r69 r">createParams</span> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#45750bba7a204f74" class="i method">PrepareClusterCreateParamsForWasb</a>();
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#a0a42be8d61a8e23" class="k">var</a> <span id="r70 rd" class="r70 r">workerNode</span> = <span class="r69 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#d30c89932f32148c" class="i property">ComputeProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#81969beedb3162c1" class="i property">Roles</a>.<span class="i method">First</span>(<span id="r71 rd" class="r71 r">role</span> =&gt; <span class="r71 r">role</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#fb24039d3cd14132" class="i property">Name</a>.<a href="@1@System.Runtime/A.html#31b307b02a3bd6b9" class="i method">Equals</a>(<span class="s">&quot;workernode&quot;</span>));
 
            <span class="c">//Add auto scale configuration Load-based type</span>
            <span class="r70 r">workerNode</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#3df8221f80ab8693" class="i property">AutoscaleConfiguration</a> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#f13a5b9c0fb692c0" class="t constructor">Autoscale</a>
            {
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#b57e7a1d391b027e" class="i property">Capacity</a> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#565a6d00d9051015" class="t constructor">AutoscaleCapacity</a>
                {
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#e96f2b24be115d32" class="i property">MinInstanceCount</a> = 4,
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#1c808fcf5a0a9cf7" class="i property">MaxInstanceCount</a> = 5
                }
            };
 
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r72 rd" class="r72 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f0e6207bb6ab0bf0" class="i method">Create</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r68 r">clusterName</span>, <span class="r69 r">createParams</span>);
            <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#b74cbe7bbcb76a17" class="i method">ValidateAutoScaleConfig</a>(<span class="r70 r">workerNode</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#3df8221f80ab8693" class="i property">AutoscaleConfiguration</a>,
                <span class="r72 r">cluster</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#27d1965c115d2591" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#00c7bd0a2d5d3be4" class="i property">ComputeProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#81969beedb3162c1" class="i property">Roles</a>.<span class="i method">First</span>(<span id="r73 rd" class="r73 r">role</span> =&gt; <span class="r73 r">role</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#fb24039d3cd14132" class="i property">Name</a>.<a href="@1@System.Runtime/A.html#31b307b02a3bd6b9" class="i method">Equals</a>(<span class="s">&quot;workernode&quot;</span>)).<a href="/Microsoft.Azure.Management.HDInsight/A.html#3df8221f80ab8693" class="i property">AutoscaleConfiguration</a>);
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="56190320de6c6613" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestCreateClusterWithAutoScaleScheduleBasedType</a>()
        {
            <a href="HDInsightManagementTestBase.cs.html#3e556594d1ac3c07" class="i method">TestInitialize</a>();
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r74 rd" class="r74 r">clusterName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdisdk-schedulebased&quot;</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#b40349c3dfb11e02" class="k">var</a> <span id="r75 rd" class="r75 r">createParams</span> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#45750bba7a204f74" class="i method">PrepareClusterCreateParamsForWasb</a>();
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#a0a42be8d61a8e23" class="k">var</a> <span id="r76 rd" class="r76 r">workerNode</span> = <span class="r75 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#d30c89932f32148c" class="i property">ComputeProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#81969beedb3162c1" class="i property">Roles</a>.<span class="i method">First</span>(<span id="r77 rd" class="r77 r">role</span> =&gt; <span class="r77 r">role</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#fb24039d3cd14132" class="i property">Name</a>.<a href="@1@System.Runtime/A.html#31b307b02a3bd6b9" class="i method">Equals</a>(<span class="s">&quot;workernode&quot;</span>));
 
            <span class="c">//Add auto scale configuration.</span>
            <span class="r76 r">workerNode</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#3df8221f80ab8693" class="i property">AutoscaleConfiguration</a> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#f13a5b9c0fb692c0" class="t constructor">Autoscale</a>
            {
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#731bda7ff2f99eea" class="i property">Recurrence</a> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#f1ab345b2d4f68ba" class="t constructor">AutoscaleRecurrence</a>
                {
                    <span class="c">//&quot;China Standard Time&quot;, &quot;Central Standard Time&quot;,&quot;Central American Standard Time&quot;</span>
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#2e3134fa3fcae2b9" class="i property">TimeZone</a> = <span class="s">&quot;China Standard Time&quot;</span>,
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#377398cd3b3b4f69" class="i property">Schedule</a> = <b>new</b> <span class="t constructor">List</span>&lt;<a href="/Microsoft.Azure.Management.HDInsight/A.html#82a4e4e6eab4723b" class="t t">AutoscaleSchedule</a>&gt;
                    {
                        <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#8e25b2f426f2ca2d" class="t constructor">AutoscaleSchedule</a>
                        {
                            <a href="/Microsoft.Azure.Management.HDInsight/A.html#b3718bc198cfcdbb" class="i property">Days</a> = <b>new</b> <span class="t constructor">List</span>&lt;<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>&gt;
                            {
                                <a href="/Microsoft.Azure.Management.HDInsight/A.html#b7740ae8cbbcaba3" class="t t">DaysOfWeek</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1f22eccb4467a92" class="i field">Thursday</a>
                            },
                            <a href="/Microsoft.Azure.Management.HDInsight/A.html#fe76602d6b7050e5" class="i property">TimeAndCapacity</a> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#9427015fefda2724" class="t constructor">AutoscaleTimeAndCapacity</a>
                            {
                                <a href="/Microsoft.Azure.Management.HDInsight/A.html#4791215e96e2b030" class="i property">Time</a> = <span class="s">&quot;16:00&quot;</span>,
                                <a href="/Microsoft.Azure.Management.HDInsight/A.html#111a8a60a4555529" class="i property">MinInstanceCount</a> = 4,
                                <a href="/Microsoft.Azure.Management.HDInsight/A.html#bce5556859e2690b" class="i property">MaxInstanceCount</a> = 4
                            }
                        }
                    }
                }
            };
 
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r78 rd" class="r78 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f0e6207bb6ab0bf0" class="i method">Create</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r74 r">clusterName</span>, <span class="r75 r">createParams</span>);
            <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#b74cbe7bbcb76a17" class="i method">ValidateAutoScaleConfig</a>(<span class="r76 r">workerNode</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#3df8221f80ab8693" class="i property">AutoscaleConfiguration</a>,
                <span class="r78 r">cluster</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#27d1965c115d2591" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#00c7bd0a2d5d3be4" class="i property">ComputeProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#81969beedb3162c1" class="i property">Roles</a>.<span class="i method">First</span>(<span id="r79 rd" class="r79 r">role</span> =&gt; <span class="r79 r">role</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#fb24039d3cd14132" class="i property">Name</a>.<a href="@1@System.Runtime/A.html#31b307b02a3bd6b9" class="i method">Equals</a>(<span class="s">&quot;workernode&quot;</span>)).<a href="/Microsoft.Azure.Management.HDInsight/A.html#3df8221f80ab8693" class="i property">AutoscaleConfiguration</a>);
        }
 
        [<span class="t constructor">Fact</span>(<span class="i property">Skip</span> = <span class="s">&quot;HDI 4.0 doesn&#39;t support create MLServices cluster and 3.6 will be deprecated soon.&quot;</span>)]
        <b>public void</b> <a id="89faa7f014885d5e" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestCreateRServerCluster</a>()
        {
            <a href="HDInsightManagementTestBase.cs.html#3e556594d1ac3c07" class="i method">TestInitialize</a>();
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r80 rd" class="r80 r">clusterName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdisdk-rserver&quot;</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#b40349c3dfb11e02" class="k">var</a> <span id="r81 rd" class="r81 r">createParams</span> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#45750bba7a204f74" class="i method">PrepareClusterCreateParamsForWasb</a>();
            <span class="r81 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f8dcb4ff658c96d8" class="i property">ClusterDefinition</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#fdbfcdc1fa742ae1" class="i property">Kind</a> = <span class="s">&quot;RServer&quot;</span>;
            <span class="r81 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f8dcb4ff658c96d8" class="i property">ClusterDefinition</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#9ff1d247893a721f" class="i property">ComponentVersion</a> = <b>new</b> <span class="t constructor">Dictionary</span>&lt;<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>&gt;
            {
                { <span class="s">&quot;RServer&quot;</span>, <span class="s">&quot;9.3&quot;</span>},
            };
            <span class="r81 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#d30c89932f32148c" class="i property">ComputeProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#81969beedb3162c1" class="i property">Roles</a>.<a href="@1@System.Runtime/A.html#a9319db8c62ae453" class="i method">Add</a>(
                <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#96118194aa53f18a" class="t constructor">Role</a>
                {
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#fb24039d3cd14132" class="i property">Name</a> = <span class="s">&quot;edgenode&quot;</span>,
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#b3144617377d4ddd" class="i property">TargetInstanceCount</a> = 1,
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#86ee5696e59186d4" class="i property">HardwareProfile</a> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#a579366d6336d16a" class="t constructor">HardwareProfile</a>
                    {
                        <a href="/Microsoft.Azure.Management.HDInsight/A.html#3e6a31f8dbb3cf06" class="i property">VmSize</a> = <span class="s">&quot;Standard_D4_v2&quot;</span>
                    },
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#9d3b7fec5973340b" class="i property">OsProfile</a> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#570306fcca988e24" class="t constructor">OsProfile</a>
                    {
                        <a href="/Microsoft.Azure.Management.HDInsight/A.html#3b0aaf6588c8acc5" class="i property">LinuxOperatingSystemProfile</a> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#78203b6437011646" class="t constructor">LinuxOperatingSystemProfile</a>
                        {
                            <a href="/Microsoft.Azure.Management.HDInsight/A.html#2d7f635cd13455ad" class="i property">Username</a> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#974e3d85f1d36aa5" class="i property">SshUsername</a>,
                            <a href="/Microsoft.Azure.Management.HDInsight/A.html#a8e52deb860237ff" class="i property">Password</a> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#da68f65ee8c982e2" class="i property">SshPassword</a>
                        }
                    }
                }
            );
 
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r82 rd" class="r82 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f0e6207bb6ab0bf0" class="i method">Create</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r80 r">clusterName</span>, <span class="r81 r">createParams</span>);
            <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#bb03592a007be12a" class="i method">ValidateCluster</a>(<span class="r80 r">clusterName</span>, <span class="r81 r">createParams</span>, <span class="r82 r">cluster</span>);
        }
 
        [<span class="t constructor">Fact</span>(<span class="i property">Skip</span> =<span class="s">&quot;HDI 4.0 doesn&#39;t support create MLServices cluster and 3.6 will be deprecated soon.&quot;</span>)]
        <b>public void</b> <a id="cda38a8c5a30e5c1" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestCreateMLServicesCluster</a>()
        {
            <a href="HDInsightManagementTestBase.cs.html#3e556594d1ac3c07" class="i method">TestInitialize</a>();
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r83 rd" class="r83 r">clusterName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdisdk-mlservices&quot;</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#b40349c3dfb11e02" class="k">var</a> <span id="r84 rd" class="r84 r">createParams</span> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#45750bba7a204f74" class="i method">PrepareClusterCreateParamsForWasb</a>();
            <span class="r84 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f8dcb4ff658c96d8" class="i property">ClusterDefinition</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#fdbfcdc1fa742ae1" class="i property">Kind</a> = <span class="s">&quot;MLServices&quot;</span>;
            <span class="r84 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#acff7f47c74afc17" class="i property">ClusterVersion</a> = <span class="s">&quot;4.0&quot;</span>;
            <span class="r84 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#d30c89932f32148c" class="i property">ComputeProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#81969beedb3162c1" class="i property">Roles</a>.<a href="@1@System.Runtime/A.html#a9319db8c62ae453" class="i method">Add</a>(
                <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#96118194aa53f18a" class="t constructor">Role</a>
                {
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#fb24039d3cd14132" class="i property">Name</a> = <span class="s">&quot;edgenode&quot;</span>,
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#b3144617377d4ddd" class="i property">TargetInstanceCount</a> = 1,
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#86ee5696e59186d4" class="i property">HardwareProfile</a> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#a579366d6336d16a" class="t constructor">HardwareProfile</a>
                    {
                        <a href="/Microsoft.Azure.Management.HDInsight/A.html#3e6a31f8dbb3cf06" class="i property">VmSize</a> = <span class="s">&quot;Standard_D4_v2&quot;</span>
                    },
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#9d3b7fec5973340b" class="i property">OsProfile</a> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#570306fcca988e24" class="t constructor">OsProfile</a>
                    {
                        <a href="/Microsoft.Azure.Management.HDInsight/A.html#3b0aaf6588c8acc5" class="i property">LinuxOperatingSystemProfile</a> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#78203b6437011646" class="t constructor">LinuxOperatingSystemProfile</a>
                        {
                            <a href="/Microsoft.Azure.Management.HDInsight/A.html#2d7f635cd13455ad" class="i property">Username</a> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#974e3d85f1d36aa5" class="i property">SshUsername</a>,
                            <a href="/Microsoft.Azure.Management.HDInsight/A.html#a8e52deb860237ff" class="i property">Password</a> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#da68f65ee8c982e2" class="i property">SshPassword</a>
                        }
                    }
                }
            );
 
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r85 rd" class="r85 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f0e6207bb6ab0bf0" class="i method">Create</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r83 r">clusterName</span>, <span class="r84 r">createParams</span>);
            <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#bb03592a007be12a" class="i method">ValidateCluster</a>(<span class="r83 r">clusterName</span>, <span class="r84 r">createParams</span>, <span class="r85 r">cluster</span>);
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="20e0aa75e101f1e0" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestListClustersInResourceGroup</a>()
        {
            <a href="HDInsightManagementTestBase.cs.html#3e556594d1ac3c07" class="i method">TestInitialize</a>();
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r86 rd" class="r86 r">clusterName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdisdk-cluster-rg1&quot;</span>);
            <a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#8125b18f5d7ee303" class="k">var</a> <span id="r87 rd" class="r87 r">clusterPage</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#12aeac42f2e33387" class="i method">ListByResourceGroup</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>);
            <b>var</b> <span id="r88 rd" class="r88 r">clusterList</span> = <b>new</b> <span class="t constructor">List</span>&lt;<a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="t t">Cluster</a>&gt;(<span class="r87 r">clusterPage</span>);
            <b>while</b> (!<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@System.Runtime/A.html#23a8597f842071f4" class="i method">IsNullOrEmpty</a>(<span class="r87 r">clusterPage</span>.<a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#e77457a6e30fcfe3" class="i property">NextPageLink</a>))
            {
                <span class="r87 r">clusterPage</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#c022834c91a8d6f4" class="i method">ListByResourceGroupNext</a>(<span class="r87 r">clusterPage</span>.<a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#e77457a6e30fcfe3" class="i property">NextPageLink</a>);
            }
 
            <span class="t t">Assert</span>.<span class="i method">DoesNotContain</span>(<span class="r88 r">clusterList</span>, <span id="r89 rd" class="r89 r">c</span> =&gt; <span class="r89 r">c</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#0dd70a6fbad4194b" class="i property">Name</a>.<a href="@1@System.Runtime/A.html#b98069ccbe2d3960" class="i method">Equals</a>(<span class="r86 r">clusterName</span>, <a href="@1@System.Runtime/A.html#702797def97ecb7c" class="t t">StringComparison</a>.<a href="@1@System.Runtime/A.html#6c3139b940557bf9" class="i field">OrdinalIgnoreCase</a>));
 
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#b40349c3dfb11e02" class="k">var</a> <span id="r90 rd" class="r90 r">createParams</span> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#45750bba7a204f74" class="i method">PrepareClusterCreateParamsForWasb</a>();
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r91 rd" class="r91 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f0e6207bb6ab0bf0" class="i method">Create</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r86 r">clusterName</span>, <span class="r90 r">createParams</span>);
            <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#bb03592a007be12a" class="i method">ValidateCluster</a>(<span class="r86 r">clusterName</span>, <span class="r90 r">createParams</span>, <span class="r91 r">cluster</span>);
 
            <span class="r87 r">clusterPage</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#12aeac42f2e33387" class="i method">ListByResourceGroup</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>);
            <span class="r88 r">clusterList</span> = <b>new</b> <span class="t constructor">List</span>&lt;<a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="t t">Cluster</a>&gt;(<span class="r87 r">clusterPage</span>);
            <b>while</b> (!<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@System.Runtime/A.html#23a8597f842071f4" class="i method">IsNullOrEmpty</a>(<span class="r87 r">clusterPage</span>.<a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#e77457a6e30fcfe3" class="i property">NextPageLink</a>))
            {
                <span class="r87 r">clusterPage</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#c022834c91a8d6f4" class="i method">ListByResourceGroupNext</a>(<span class="r87 r">clusterPage</span>.<a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#e77457a6e30fcfe3" class="i property">NextPageLink</a>);
            }
 
            <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r88 r">clusterList</span>, <span id="r92 rd" class="r92 r">c</span> =&gt; <span class="r92 r">c</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#0dd70a6fbad4194b" class="i property">Name</a>.<a href="@1@System.Runtime/A.html#b98069ccbe2d3960" class="i method">Equals</a>(<span class="r86 r">clusterName</span>, <a href="@1@System.Runtime/A.html#702797def97ecb7c" class="t t">StringComparison</a>.<a href="@1@System.Runtime/A.html#6c3139b940557bf9" class="i field">OrdinalIgnoreCase</a>));
        }
 
        [<span class="t constructor">Fact</span>(<span class="i property">Skip</span> = <span class="s">&quot;Test case will list all clusters under a subscription.&quot;</span>)]
        <b>public void</b> <a id="231b6b2f73126468" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestListClustersInSubscription</a>()
        {
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r93 rd" class="r93 r">clusterName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdisdk-cluster-rg1&quot;</span>);
            <a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#8125b18f5d7ee303" class="k">var</a> <span id="r94 rd" class="r94 r">clusterPage</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#0e3d15cb9a360281" class="i method">List</a>();
            <b>var</b> <span id="r95 rd" class="r95 r">clusterList</span> = <b>new</b> <span class="t constructor">List</span>&lt;<a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="t t">Cluster</a>&gt;(<span class="r94 r">clusterPage</span>);
            <b>while</b> (!<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@System.Runtime/A.html#23a8597f842071f4" class="i method">IsNullOrEmpty</a>(<span class="r94 r">clusterPage</span>.<a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#e77457a6e30fcfe3" class="i property">NextPageLink</a>))
            {
                <span class="r94 r">clusterPage</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#cfcdc4a4697e12d1" class="i method">ListNext</a>(<span class="r94 r">clusterPage</span>.<a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#e77457a6e30fcfe3" class="i property">NextPageLink</a>);
            }
 
            <span class="t t">Assert</span>.<span class="i method">DoesNotContain</span>(<span class="r95 r">clusterList</span>, <span id="r96 rd" class="r96 r">c</span> =&gt; <span class="r96 r">c</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#0dd70a6fbad4194b" class="i property">Name</a>.<a href="@1@System.Runtime/A.html#b98069ccbe2d3960" class="i method">Equals</a>(<span class="r93 r">clusterName</span>, <a href="@1@System.Runtime/A.html#702797def97ecb7c" class="t t">StringComparison</a>.<a href="@1@System.Runtime/A.html#6c3139b940557bf9" class="i field">OrdinalIgnoreCase</a>));
 
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#b40349c3dfb11e02" class="k">var</a> <span id="r97 rd" class="r97 r">createParams</span> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#45750bba7a204f74" class="i method">PrepareClusterCreateParamsForWasb</a>();
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r98 rd" class="r98 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f0e6207bb6ab0bf0" class="i method">Create</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r93 r">clusterName</span>, <span class="r97 r">createParams</span>);
            <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#bb03592a007be12a" class="i method">ValidateCluster</a>(<span class="r93 r">clusterName</span>, <span class="r97 r">createParams</span>, <span class="r98 r">cluster</span>);
 
            <span class="r94 r">clusterPage</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#0e3d15cb9a360281" class="i method">List</a>();
            <span class="r95 r">clusterList</span> = <b>new</b> <span class="t constructor">List</span>&lt;<a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="t t">Cluster</a>&gt;(<span class="r94 r">clusterPage</span>);
            <b>while</b> (!<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@System.Runtime/A.html#23a8597f842071f4" class="i method">IsNullOrEmpty</a>(<span class="r94 r">clusterPage</span>.<a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#e77457a6e30fcfe3" class="i property">NextPageLink</a>))
            {
                <span class="r94 r">clusterPage</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#cfcdc4a4697e12d1" class="i method">ListNext</a>(<span class="r94 r">clusterPage</span>.<a href="/Microsoft.Rest.ClientRuntime.Azure/A.html#e77457a6e30fcfe3" class="i property">NextPageLink</a>);
            }
 
            <span class="t t">Assert</span>.<span class="i method">Contains</span>(<span class="r95 r">clusterList</span>, <span id="r99 rd" class="r99 r">c</span> =&gt; <span class="r99 r">c</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#0dd70a6fbad4194b" class="i property">Name</a>.<a href="@1@System.Runtime/A.html#b98069ccbe2d3960" class="i method">Equals</a>(<span class="r93 r">clusterName</span>, <a href="@1@System.Runtime/A.html#702797def97ecb7c" class="t t">StringComparison</a>.<a href="@1@System.Runtime/A.html#6c3139b940557bf9" class="i field">OrdinalIgnoreCase</a>));
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="1c6c0efded0806a7" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestResizeCluster</a>()
        {
            <a href="HDInsightManagementTestBase.cs.html#3e556594d1ac3c07" class="i method">TestInitialize</a>();
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r100 rd" class="r100 r">clusterName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdisdk-clusterresize&quot;</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#b40349c3dfb11e02" class="k">var</a> <span id="r101 rd" class="r101 r">createParams</span> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#45750bba7a204f74" class="i method">PrepareClusterCreateParamsForWasb</a>();
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#a0a42be8d61a8e23" class="k">var</a> <span id="r102 rd" class="r102 r">workerNodeParams</span> = <span class="r101 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#d30c89932f32148c" class="i property">ComputeProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#81969beedb3162c1" class="i property">Roles</a>.<span class="i method">First</span>(<span id="r103 rd" class="r103 r">role</span> =&gt; <span class="r103 r">role</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#fb24039d3cd14132" class="i property">Name</a> == <span class="s">&quot;workernode&quot;</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r104 rd" class="r104 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f0e6207bb6ab0bf0" class="i method">Create</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r100 r">clusterName</span>, <span class="r101 r">createParams</span>);
            <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#bb03592a007be12a" class="i method">ValidateCluster</a>(<span class="r100 r">clusterName</span>, <span class="r101 r">createParams</span>, <span class="r104 r">cluster</span>);
 
            <span class="r104 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#04138739787f1c82" class="i method">Get</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r100 r">clusterName</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#a0a42be8d61a8e23" class="k">var</a> <span id="r105 rd" class="r105 r">workerNode</span> = <span class="r104 r">cluster</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#27d1965c115d2591" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#00c7bd0a2d5d3be4" class="i property">ComputeProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#81969beedb3162c1" class="i property">Roles</a>.<span class="i method">First</span>(<span id="r106 rd" class="r106 r">role</span> =&gt; <span class="r106 r">role</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#fb24039d3cd14132" class="i property">Name</a> == <span class="s">&quot;workernode&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r102 r">workerNodeParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b3144617377d4ddd" class="i property">TargetInstanceCount</a>, <span class="r105 r">workerNode</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b3144617377d4ddd" class="i property">TargetInstanceCount</a>);
 
            <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#2839c8834a69934e" class="i method">Resize</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r100 r">clusterName</span>, <span class="r102 r">workerNodeParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b3144617377d4ddd" class="i property">TargetInstanceCount</a>.<a href="@1@System.Runtime/A.html#7b38d1fa76071c95" class="i property">Value</a> + 1);
            <span class="r104 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#04138739787f1c82" class="i method">Get</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r100 r">clusterName</span>);
            <span class="r105 r">workerNode</span> = <span class="r104 r">cluster</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#27d1965c115d2591" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#00c7bd0a2d5d3be4" class="i property">ComputeProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#81969beedb3162c1" class="i property">Roles</a>.<span class="i method">First</span>(<span id="r107 rd" class="r107 r">role</span> =&gt; <span class="r107 r">role</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#fb24039d3cd14132" class="i property">Name</a> == <span class="s">&quot;workernode&quot;</span>);
            <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r102 r">workerNodeParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b3144617377d4ddd" class="i property">TargetInstanceCount</a>.<a href="@1@System.Runtime/A.html#7b38d1fa76071c95" class="i property">Value</a> + 1, <span class="r105 r">workerNode</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b3144617377d4ddd" class="i property">TargetInstanceCount</a>);
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="d163a53cc20437f8" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestGetOrUpdateGatewaySettings</a>()
        {
            <a href="HDInsightManagementTestBase.cs.html#3e556594d1ac3c07" class="i method">TestInitialize</a>();
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r108 rd" class="r108 r">clusterName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdisdk-gateway&quot;</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#b40349c3dfb11e02" class="k">var</a> <span id="r109 rd" class="r109 r">createParams</span> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#45750bba7a204f74" class="i method">PrepareClusterCreateParamsForWasb</a>();
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r110 rd" class="r110 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f0e6207bb6ab0bf0" class="i method">Create</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r108 r">clusterName</span>, <span class="r109 r">createParams</span>);
            <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#bb03592a007be12a" class="i method">ValidateCluster</a>(<span class="r108 r">clusterName</span>, <span class="r109 r">createParams</span>, <span class="r110 r">cluster</span>);
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r111 rd" class="r111 r">expectedUserName</span> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#76dea77c138d9f62" class="i property">ClusterUserName</a>;
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r112 rd" class="r112 r">expectedPassword</span> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#373cdbf8adbfc6d6" class="i property">ClusterPassword</a>;
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#14651ffe1afd97a7" class="k">var</a> <span id="r113 rd" class="r113 r">gatewaySettings</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#769e99fb2b816f6e" class="i method">GetGatewaySettings</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r108 r">clusterName</span>);
            <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#f39687eb51bd7180" class="i method">ValidateGatewaySettings</a>(<span class="r111 r">expectedUserName</span>, <span class="r112 r">expectedPassword</span>, <span class="r113 r">gatewaySettings</span>);
 
            <span class="c">// Disable gateway settings is not allowed.</span>
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#abae8598a48ee674" class="k">var</a> <span id="r114 rd" class="r114 r">updateParams</span> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#69c2497866670893" class="t constructor">UpdateGatewaySettingsParameters</a>
            {
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#b1dc76ebb0d0ffc1" class="i property">IsCredentialEnabled</a> = <b>false</b>
            };
 
            <b>try</b>
            {
                <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#33a1e096dce53d70" class="i method">UpdateGatewaySettings</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r108 r">clusterName</span>, <span class="r114 r">updateParams</span>);
                <span class="t t">Assert</span>.<span class="i method">True</span>(<b>false</b>, <span class="s">&quot;Disable gateway settings should fail&quot;</span>);
            }
            <b>catch</b>(<a href="/Microsoft.Azure.Management.HDInsight/A.html#7244ec914a70326a" class="t t">ErrorResponseException</a> <span id="r115 rd" class="r115 r">ex</span>)
            {
                <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="t t">HttpStatusCode</span>.<span class="i field">MethodNotAllowed</span>, <span class="r115 r">ex</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#9c69fdfc27e695f4" class="i property">Response</a>.<a href="/Microsoft.Rest.ClientRuntime/A.html#8160e7ac2a8f7438" class="i property">StatusCode</a>);
            }
 
            <span class="c">// Make sure anything stay unchanged after attempting to disable gateway settings.</span>
            <span class="r113 r">gatewaySettings</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#769e99fb2b816f6e" class="i method">GetGatewaySettings</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r108 r">clusterName</span>);
            <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#f39687eb51bd7180" class="i method">ValidateGatewaySettings</a>(<span class="r111 r">expectedUserName</span>, <span class="r112 r">expectedPassword</span>, <span class="r113 r">gatewaySettings</span>);
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r116 rd" class="r116 r">newExpectedPassword</span> = <span class="s">&quot;NewPassword1!&quot;</span>;
            <span class="r114 r">updateParams</span> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#69c2497866670893" class="t constructor">UpdateGatewaySettingsParameters</a>
            {
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#b1dc76ebb0d0ffc1" class="i property">IsCredentialEnabled</a> = <b>true</b>,
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#8a7b73dc40a397ab" class="i property">UserName</a> = <span class="r111 r">expectedUserName</span>,
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#2a81fe4e45a4093e" class="i property">Password</a> = <span class="r116 r">newExpectedPassword</span>
            };
 
            <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#33a1e096dce53d70" class="i method">UpdateGatewaySettings</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r108 r">clusterName</span>, <span class="r114 r">updateParams</span>);
            <span class="r113 r">gatewaySettings</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#769e99fb2b816f6e" class="i method">GetGatewaySettings</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r108 r">clusterName</span>);
            <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#f39687eb51bd7180" class="i method">ValidateGatewaySettings</a>(<span class="r111 r">expectedUserName</span>, <span class="r116 r">newExpectedPassword</span>, <span class="r113 r">gatewaySettings</span>);
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="5ca4f4d1c94b6221" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestCreateClusterWithTLS12</a>()
        {
            <a href="HDInsightManagementTestBase.cs.html#3e556594d1ac3c07" class="i method">TestInitialize</a>();
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r117 rd" class="r117 r">clusterName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdisdk-tls12&quot;</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#b40349c3dfb11e02" class="k">var</a> <span id="r118 rd" class="r118 r">createParams</span> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#45750bba7a204f74" class="i method">PrepareClusterCreateParamsForWasb</a>();
            <span class="r118 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#5f7dd24782300ccc" class="i property">MinSupportedTlsVersion</a> = <span class="s">&quot;1.2&quot;</span>;
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r119 rd" class="r119 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f0e6207bb6ab0bf0" class="i method">Create</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r117 r">clusterName</span>, <span class="r118 r">createParams</span>);
            <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="s">&quot;1.2&quot;</span>, <span class="r119 r">cluster</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#27d1965c115d2591" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#d01d0d486b0d45b1" class="i property">MinSupportedTlsVersion</a>);
            <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#bb03592a007be12a" class="i method">ValidateCluster</a>(<span class="r117 r">clusterName</span>, <span class="r118 r">createParams</span>, <span class="r119 r">cluster</span>);
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="07ddbf0495f112bd" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestCreateClusterWithOutboundAndPrivateLink</a>()
        {
            <a href="HDInsightManagementTestBase.cs.html#3e556594d1ac3c07" class="i method">TestInitialize</a>();
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r120 rd" class="r120 r">clusterName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdisdk-outboundpl&quot;</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#b40349c3dfb11e02" class="k">var</a> <span id="r121 rd" class="r121 r">createParams</span> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#45750bba7a204f74" class="i method">PrepareClusterCreateParamsForWasb</a>();
            <span class="r121 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#9170a0a45eb684fe" class="i property">Location</a> = <span class="s">&quot;South Central US&quot;</span>;
 
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#3cc341334f064e4c" class="k">var</a> <span id="r122 rd" class="r122 r">networkProperties</span> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#51b4276beedc7810" class="t constructor">NetworkProperties</a>(<a href="/Microsoft.Azure.Management.HDInsight/A.html#a58b1464241dedd7" class="t t">ResourceProviderConnection</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#1b27067d8e6d3fe3" class="i field">Outbound</a>, <a href="/Microsoft.Azure.Management.HDInsight/A.html#781068ab4a39ad24" class="t t">PrivateLink</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#e609281d70d999d3" class="i field">Enabled</a>);
            <span class="r121 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#6ec6bb8a236be634" class="i property">NetworkProperties</a> = <span class="r122 r">networkProperties</span>;
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r123 rd" class="r123 r">storageAccountResourceId</span> = <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@System.Runtime/A.html#6e5f254563fed78e" class="i method">Format</a>(<span class="s">&quot;/subscriptions/{0}/resourceGroups/{1}/providers/Microsoft.Storage/storageAccounts/{2}&quot;</span>, <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#c7d9489efef33f37" class="i property">SubscriptionId</a>, <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#2bd4d94eb58e7e0e" class="i property">StorageAccountName</a>);
            <span class="r121 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#59cdf04de9bcc2c9" class="i property">StorageProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#2a922bdea0059b60" class="i property">Storageaccounts</a>[0].<a href="/Microsoft.Azure.Management.HDInsight/A.html#cefe2d5bc5f4c2ca" class="i property">ResourceId</a> = <span class="r123 r">storageAccountResourceId</span>;
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r124 rd" class="r124 r">vnetId</span> = <span class="s">&quot;/subscriptions/964c10bb-8a6c-43bc-83d3-6b318c6c7305/resourceGroups/rg/providers/Microsoft.Network/virtualNetworks/fakevnet&quot;</span>;
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r125 rd" class="r125 r">subnetId</span> = <span class="s">&quot;/subscriptions/964c10bb-8a6c-43bc-83d3-6b318c6c7305/resourceGroups/rg/providers/Microsoft.Network/virtualNetworks/fakevnet/subnets/default&quot;</span>;
 
            <b>foreach</b> (<a href="/Microsoft.Azure.Management.HDInsight/A.html#a0a42be8d61a8e23" class="k">var</a> <span id="r126 rd" class="r126 r">role</span> <b>in</b> <span class="r121 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#d30c89932f32148c" class="i property">ComputeProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#81969beedb3162c1" class="i property">Roles</a>)
            {
               <span class="r126 r">role</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#df3ac378b7930b5d" class="i property">VirtualNetworkProfile</a> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#d5c9f6da3e888fe1" class="t constructor">VirtualNetworkProfile</a>(<span class="r124 r">vnetId</span>, <span class="r125 r">subnetId</span>);
            }
 
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r127 rd" class="r127 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f0e6207bb6ab0bf0" class="i method">Create</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r120 r">clusterName</span>, <span class="r121 r">createParams</span>);
 
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r128 rd" class="r128 r">result</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#04138739787f1c82" class="i method">Get</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r120 r">clusterName</span>);
            <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#bb03592a007be12a" class="i method">ValidateCluster</a>(<span class="r120 r">clusterName</span>, <span class="r121 r">createParams</span>, <span class="r128 r">result</span>);
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r128 r">result</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#27d1965c115d2591" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#4c371e4fd315a141" class="i property">ConnectivityEndpoints</a>.<span class="i method">First</span>().<a href="/Microsoft.Azure.Management.HDInsight/A.html#97ae4a481ee77665" class="i property">PrivateIPAddress</a>);
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="869e8a0ea4b23c43" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestCreateClusterWithEncryptionInTransit</a>()
        {
            <a href="HDInsightManagementTestBase.cs.html#3e556594d1ac3c07" class="i method">TestInitialize</a>();
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r129 rd" class="r129 r">clusterName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdisdk-encryption&quot;</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#b40349c3dfb11e02" class="k">var</a> <span id="r130 rd" class="r130 r">createParams</span> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#45750bba7a204f74" class="i method">PrepareClusterCreateParamsForWasb</a>();
            <span class="r130 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#9170a0a45eb684fe" class="i property">Location</a> = <span class="s">&quot;South Central US&quot;</span>;
            <span class="r130 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#c78ab45ff76c11cf" class="i property">EncryptionInTransitProperties</a> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#1da47b95cdfd01ae" class="t constructor">EncryptionInTransitProperties</a>
            {
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#ed25be2418ce04bd" class="i property">IsEncryptionInTransitEnabled</a> = <b>true</b>
            };
 
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r131 rd" class="r131 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f0e6207bb6ab0bf0" class="i method">Create</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r129 r">clusterName</span>, <span class="r130 r">createParams</span>);
 
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r132 rd" class="r132 r">result</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#04138739787f1c82" class="i method">Get</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r129 r">clusterName</span>);
            <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#bb03592a007be12a" class="i method">ValidateCluster</a>(<span class="r129 r">clusterName</span>, <span class="r130 r">createParams</span>, <span class="r132 r">result</span>);
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="44bd769476943f22" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestUpdateAutoScaleConfiguration</a>()
        {
            <a href="HDInsightManagementTestBase.cs.html#3e556594d1ac3c07" class="i method">TestInitialize</a>();
 
            <span class="c">//create a cluster without autoscale config</span>
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r133 rd" class="r133 r">clusterName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdisdk-updateautoscale&quot;</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#b40349c3dfb11e02" class="k">var</a> <span id="r134 rd" class="r134 r">createParams</span> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#45750bba7a204f74" class="i method">PrepareClusterCreateParamsForWasb</a>();
            <span class="r134 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#9170a0a45eb684fe" class="i property">Location</a> = <span class="s">&quot;South Central US&quot;</span>;
 
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r135 rd" class="r135 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f0e6207bb6ab0bf0" class="i method">Create</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r133 r">clusterName</span>, <span class="r134 r">createParams</span>);
            <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#bb03592a007be12a" class="i method">ValidateCluster</a>(<span class="r133 r">clusterName</span>, <span class="r134 r">createParams</span>, <span class="r135 r">cluster</span>);
 
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r136 rd" class="r136 r">clusterWithoutAutoscale</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#04138739787f1c82" class="i method">Get</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r133 r">clusterName</span>);
            <span class="t t">Assert</span>.<span class="i method">Null</span>(<span class="r135 r">cluster</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#27d1965c115d2591" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#00c7bd0a2d5d3be4" class="i property">ComputeProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#81969beedb3162c1" class="i property">Roles</a>.<span class="i method">First</span>(<span id="r137 rd" class="r137 r">role</span> =&gt; <span class="r137 r">role</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#fb24039d3cd14132" class="i property">Name</a>.<a href="@1@System.Runtime/A.html#31b307b02a3bd6b9" class="i method">Equals</a>(<span class="s">&quot;workernode&quot;</span>)).<a href="/Microsoft.Azure.Management.HDInsight/A.html#3df8221f80ab8693" class="i property">AutoscaleConfiguration</a>);
 
            <span class="c">// enable autoscale</span>
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#19aacff49123692e" class="t t">AutoscaleConfigurationUpdateParameter</a> <span id="r138 rd" class="r138 r">loadBasedAutoScaleConfig</span> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#47423670701c3fb9" class="t constructor">AutoscaleConfigurationUpdateParameter</a>
            {
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#f7c6eea52a253ed0" class="i property">Autoscale</a> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#f13a5b9c0fb692c0" class="t constructor">Autoscale</a>
                {
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#b57e7a1d391b027e" class="i property">Capacity</a> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#565a6d00d9051015" class="t constructor">AutoscaleCapacity</a>
                    {
                        <a href="/Microsoft.Azure.Management.HDInsight/A.html#e96f2b24be115d32" class="i property">MinInstanceCount</a> = 3,
                        <a href="/Microsoft.Azure.Management.HDInsight/A.html#1c808fcf5a0a9cf7" class="i property">MaxInstanceCount</a> = 4
                    }
                }
            };
            <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#fc6a13abb4f7f9e8" class="i method">UpdateAutoScaleConfiguration</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r133 r">clusterName</span>, <span class="r138 r">loadBasedAutoScaleConfig</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r139 rd" class="r139 r">clusterEnabledAutoScale</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#04138739787f1c82" class="i method">Get</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r133 r">clusterName</span>);
 
            <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#b74cbe7bbcb76a17" class="i method">ValidateAutoScaleConfig</a>(<span class="r138 r">loadBasedAutoScaleConfig</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f7c6eea52a253ed0" class="i property">Autoscale</a>, <span class="r139 r">clusterEnabledAutoScale</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#27d1965c115d2591" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#00c7bd0a2d5d3be4" class="i property">ComputeProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#81969beedb3162c1" class="i property">Roles</a>.<span class="i method">First</span>(<span id="r140 rd" class="r140 r">role</span> =&gt; <span class="r140 r">role</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#fb24039d3cd14132" class="i property">Name</a>.<a href="@1@System.Runtime/A.html#31b307b02a3bd6b9" class="i method">Equals</a>(<span class="s">&quot;workernode&quot;</span>)).<a href="/Microsoft.Azure.Management.HDInsight/A.html#3df8221f80ab8693" class="i property">AutoscaleConfiguration</a>);
 
            <span class="c">// disable autoscale</span>
            <span class="r138 r">loadBasedAutoScaleConfig</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f7c6eea52a253ed0" class="i property">Autoscale</a> = <b>null</b>;
            <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#fc6a13abb4f7f9e8" class="i method">UpdateAutoScaleConfiguration</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r133 r">clusterName</span>, <span class="r138 r">loadBasedAutoScaleConfig</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r141 rd" class="r141 r">clusterDisabledAutoScale</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#04138739787f1c82" class="i method">Get</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r133 r">clusterName</span>);
 
            <span class="t t">Assert</span>.<span class="i method">Null</span>(<span class="r141 r">clusterDisabledAutoScale</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#27d1965c115d2591" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#00c7bd0a2d5d3be4" class="i property">ComputeProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#81969beedb3162c1" class="i property">Roles</a>.<span class="i method">First</span>(<span id="r142 rd" class="r142 r">role</span> =&gt; <span class="r142 r">role</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#fb24039d3cd14132" class="i property">Name</a>.<a href="@1@System.Runtime/A.html#31b307b02a3bd6b9" class="i method">Equals</a>(<span class="s">&quot;workernode&quot;</span>)).<a href="/Microsoft.Azure.Management.HDInsight/A.html#3df8221f80ab8693" class="i property">AutoscaleConfiguration</a>);
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="139d7c2a80afc005" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestCreateClusterWithEncryptionAtHost</a>()
        {
            <a href="HDInsightManagementTestBase.cs.html#3e556594d1ac3c07" class="i method">TestInitialize</a>();
 
            <span class="c">// create HDInsight cluster with encrytpion at host</span>
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r143 rd" class="r143 r">clusterName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdisdk-encryptionathost&quot;</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#b40349c3dfb11e02" class="k">var</a> <span id="r144 rd" class="r144 r">createParams</span> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#45750bba7a204f74" class="i method">PrepareClusterCreateParamsForWasb</a>();
            <span class="r144 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#9170a0a45eb684fe" class="i property">Location</a> = <span class="s">&quot;South Central US&quot;</span>;
            <span class="r144 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f8dcb4ff658c96d8" class="i property">ClusterDefinition</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#fdbfcdc1fa742ae1" class="i property">Kind</a> = <span class="s">&quot;Spark&quot;</span>;
 
            <span class="r144 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#d30c89932f32148c" class="i property">ComputeProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#81969beedb3162c1" class="i property">Roles</a>.<span class="i method">ToList</span>().<span class="i method">ForEach</span>(<span id="r145 rd" class="r145 r">role</span> =&gt; <span class="r145 r">role</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#86ee5696e59186d4" class="i property">HardwareProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#3e6a31f8dbb3cf06" class="i property">VmSize</a> = <span class="s">&quot;Standard_DS14_v2&quot;</span>);
 
            <span class="r144 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#4d0a1271afc63b36" class="i property">DiskEncryptionProperties</a> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#0ffff1ae35943227" class="t constructor">DiskEncryptionProperties</a>
            {
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#6b73ea15e2d3aa9f" class="i property">EncryptionAtHost</a> = <b>true</b>
            };
 
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r146 rd" class="r146 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f0e6207bb6ab0bf0" class="i method">Create</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r143 r">clusterName</span>, <span class="r144 r">createParams</span>);
            <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#bb03592a007be12a" class="i method">ValidateCluster</a>(<span class="r143 r">clusterName</span>, <span class="r144 r">createParams</span>, <span class="r146 r">cluster</span>);
 
            <span class="c">// check encryption at host properties</span>
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#a5d33524791414d2" class="k">var</a> <span id="r147 rd" class="r147 r">diskEncryptionProperties</span> = <span class="r146 r">cluster</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#27d1965c115d2591" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#ca4d63cca052c86f" class="i property">DiskEncryptionProperties</a>;
            <span class="t t">Assert</span>.<span class="i method">True</span>(<span class="r147 r">diskEncryptionProperties</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#6b73ea15e2d3aa9f" class="i property">EncryptionAtHost</a>);
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="748a6defbf579fc4" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestCreateClusterWithAvailabilityZones</a>()
        {
            <a href="HDInsightManagementTestBase.cs.html#3e556594d1ac3c07" class="i method">TestInitialize</a>();
 
            <span class="c">// create HDInsight cluster with encrytpion at host</span>
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r148 rd" class="r148 r">clusterName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdisdk-az&quot;</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#b40349c3dfb11e02" class="k">var</a> <span id="r149 rd" class="r149 r">createParams</span> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#45750bba7a204f74" class="i method">PrepareClusterCreateParamsForWasb</a>();
            <span class="r149 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#9170a0a45eb684fe" class="i property">Location</a> = <span class="s">&quot;South Central US&quot;</span>;
            <span class="r149 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f8dcb4ff658c96d8" class="i property">ClusterDefinition</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#fdbfcdc1fa742ae1" class="i property">Kind</a> = <span class="s">&quot;Spark&quot;</span>;
            <span class="r149 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#acff7f47c74afc17" class="i property">ClusterVersion</a> = <span class="s">&quot;4.0&quot;</span>;
            <span class="c">// set zones</span>
            <span class="r149 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#323d748c9157f66a" class="i property">Zones</a> = <b>new</b> <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>[] { <span class="s">&quot;1&quot;</span>};
 
            <span class="c">// availability zones requires custom vnet</span>
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r150 rd" class="r150 r">vnetId</span> = <span class="s">&quot;/subscriptions/964c10bb-8a6c-43bc-83d3-6b318c6c7305/resourceGroups/rg/providers/Microsoft.Network/virtualNetworks/vnetforcreatcluster&quot;</span>;
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r151 rd" class="r151 r">subnetId</span> = <span class="s">&quot;/subscriptions/964c10bb-8a6c-43bc-83d3-6b318c6c7305/resourceGroups/rg/providers/Microsoft.Network/virtualNetworks/vnetforcreatcluster/subnets/default&quot;</span>;
            <b>foreach</b> (<a href="/Microsoft.Azure.Management.HDInsight/A.html#a0a42be8d61a8e23" class="k">var</a> <span id="r152 rd" class="r152 r">role</span> <b>in</b> <span class="r149 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#d30c89932f32148c" class="i property">ComputeProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#81969beedb3162c1" class="i property">Roles</a>)
            {
                <span class="r152 r">role</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#df3ac378b7930b5d" class="i property">VirtualNetworkProfile</a> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#d5c9f6da3e888fe1" class="t constructor">VirtualNetworkProfile</a>(<span class="r150 r">vnetId</span>, <span class="r151 r">subnetId</span>);
            }
 
            <span class="c">// availability zones requires custom metastore: ambari, hive,oozie</span>
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r153 rd" class="r153 r">sqlServerName</span> = <span class="s">&quot;scustestsqlserver.database.windows.net&quot;</span>;
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r154 rd" class="r154 r">sqlServerUserName</span> = <span class="s">&quot;sqlserveruser&quot;</span>;
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r155 rd" class="r155 r">sqlServerPassword</span> = <span class="s">&quot;***&quot;</span>;
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r156 rd" class="r156 r">ambariDatabase</span> = <span class="s">&quot;ambaridb1&quot;</span>;
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r157 rd" class="r157 r">hiveDatabase</span> = <span class="s">&quot;hivemetastore1&quot;</span>;
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r158 rd" class="r158 r">oozieDatabase</span> = <span class="s">&quot;ooziemetastore1&quot;</span>;
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r159 rd" class="r159 r">hiveConnectionUrl</span> =  <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@System.Runtime/A.html#7432dab173fae5fc" class="i method">Format</a>(<a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#06abd09ca6d300a3" class="i field">ConnectionUrlFormat</a>, <span class="r153 r">sqlServerName</span>, <span class="r157 r">hiveDatabase</span>);
 
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r160 rd" class="r160 r">oozieConnectionUrl</span> = <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@System.Runtime/A.html#7432dab173fae5fc" class="i method">Format</a>(<a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#06abd09ca6d300a3" class="i field">ConnectionUrlFormat</a>, <span class="r153 r">sqlServerName</span>, <span class="r158 r">oozieDatabase</span>);
 
            <span class="r149 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f8dcb4ff658c96d8" class="i property">ClusterDefinition</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#e33338149b1b4260" class="i property">Configurations</a> = <b>new</b> <span class="t constructor">Dictionary</span>&lt;<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>, <span class="t t">Dictionary</span>&lt;<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>&gt;&gt;
            {
                <span class="c">// custom ambari db</span>
                { <a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#ab8066e3db37abe5" class="t t">ConfigurationKey</a>.<a href="../Constants.cs.html#5015651758dacb30" class="i field">AmbariConf</a>, <b>new</b> <span class="t constructor">Dictionary</span>&lt;<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>&gt;
                   {
                       { <a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#8af542cb23b873cb" class="t t">AmbariConfiguration</a>.<a href="../Constants.cs.html#4251f42da86e2129" class="i field">SqlServerKey</a>, <span class="r153 r">sqlServerName</span> },
                       { <a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#8af542cb23b873cb" class="t t">AmbariConfiguration</a>.<a href="../Constants.cs.html#2a419a2ae6ecb12c" class="i field">DatabaseNameKey</a>, <span class="r156 r">ambariDatabase</span> },
                       { <a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#8af542cb23b873cb" class="t t">AmbariConfiguration</a>.<a href="../Constants.cs.html#2c74a1f3b3584890" class="i field">DatabaseUserKey</a>, <span class="r154 r">sqlServerUserName</span> },
                       { <a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#8af542cb23b873cb" class="t t">AmbariConfiguration</a>.<a href="../Constants.cs.html#ff45dd6cc6148bb5" class="i field">DatabasePasswordKey</a>, <span class="r155 r">sqlServerPassword</span> },
                   }
                },
                { <span class="s">&quot;gateway&quot;</span>, <b>new</b> <span class="t constructor">Dictionary</span>&lt;<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>&gt;
                {
                    { <span class="s">&quot;restAuthCredential.isEnabled&quot;</span>, <span class="s">&quot;true&quot;</span> },
                    { <span class="s">&quot;restAuthCredential.username&quot;</span>, <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#76dea77c138d9f62" class="i property">ClusterUserName</a> },
                    { <span class="s">&quot;restAuthCredential.password&quot;</span>, <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#373cdbf8adbfc6d6" class="i property">ClusterPassword</a> }
                }
                },
                <span class="c">// custom hive metastore</span>
                { <a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#ab8066e3db37abe5" class="t t">ConfigurationKey</a>.<a href="../Constants.cs.html#2b15483e16cbf54b" class="i field">HiveSite</a>, <b>new</b> <span class="t constructor">Dictionary</span>&lt;<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>&gt;
                    {
                        {<a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#636d401f828fd0c0" class="t t">HiveSite</a>.<a href="../Constants.cs.html#98fa340f16c9e979" class="i field">ConnectionUrlKey</a>, <span class="r159 r">hiveConnectionUrl</span>},
                        {<a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#636d401f828fd0c0" class="t t">HiveSite</a>.<a href="../Constants.cs.html#e35fd16ff301cfa4" class="i field">ConnectionUserNameKey</a>, <span class="r154 r">sqlServerUserName</span>},
                        {<a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#636d401f828fd0c0" class="t t">HiveSite</a>.<a href="../Constants.cs.html#89de4fd890010d82" class="i field">ConnectionPasswordKey</a>, <span class="r155 r">sqlServerPassword</span>},
                        {<a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#636d401f828fd0c0" class="t t">HiveSite</a>.<a href="../Constants.cs.html#87847100fc30ef51" class="i field">ConnectionDriverNameKey</a>, <a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#636d401f828fd0c0" class="t t">HiveSite</a>.<a href="../Constants.cs.html#d0613d208377912a" class="i field">ConnectionDriverNameValue</a>}
                    }
                },
 
                { <a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#ab8066e3db37abe5" class="t t">ConfigurationKey</a>.<a href="../Constants.cs.html#eaac627461cb5351" class="i field">HiveEnv</a>, <b>new</b> <span class="t constructor">Dictionary</span>&lt;<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>&gt;
                    {
                        {<a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#392c49bf2c830a37" class="t t">HiveEnv</a>.<a href="../Constants.cs.html#7b6e9226ea616982" class="i field">DatabaseKey</a>, <a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#ed7f71d8c6bec644" class="i field">DatabaseValue</a>},
                        {<a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#392c49bf2c830a37" class="t t">HiveEnv</a>.<a href="../Constants.cs.html#c60c7369b89ef9cb" class="i field">DatabaseNameKey</a>, <span class="r157 r">hiveDatabase</span>},
                        {<a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#392c49bf2c830a37" class="t t">HiveEnv</a>.<a href="../Constants.cs.html#4df67d3693f8eb24" class="i field">DatabaseTypeKey</a>, <a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#50120d7abcde208d" class="i field">DatabaseTypeValue</a>},
                        {<a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#392c49bf2c830a37" class="t t">HiveEnv</a>.<a href="../Constants.cs.html#f0e17039b976c98c" class="i field">ExistingDatabaseKey</a>, <span class="r157 r">hiveDatabase</span>},
                        {<a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#392c49bf2c830a37" class="t t">HiveEnv</a>.<a href="../Constants.cs.html#84220c28063b9c49" class="i field">ExistingHostKey</a>, <span class="r153 r">sqlServerName</span>},
                        {<a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#392c49bf2c830a37" class="t t">HiveEnv</a>.<a href="../Constants.cs.html#e593ab3131e8a62b" class="i field">HostNameKey</a>, <span class="r153 r">sqlServerName</span>}
                    }
                },
               
                <span class="c">// custom oozie metastore</span>
                { <a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#ab8066e3db37abe5" class="t t">ConfigurationKey</a>.<a href="../Constants.cs.html#10bb515f7d3e1d43" class="i field">OozieSite</a>, <b>new</b> <span class="t constructor">Dictionary</span>&lt;<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>&gt;
                    {
                        {<a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#30653ae4c3d3cdc5" class="t t">OozieSite</a>.<a href="../Constants.cs.html#7ca58632c434111b" class="i field">UrlKey</a>, <span class="r160 r">oozieConnectionUrl</span>},
                        {<a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#30653ae4c3d3cdc5" class="t t">OozieSite</a>.<a href="../Constants.cs.html#b8b4b10b0c7c10f8" class="i field">UserNameKey</a>, <span class="r154 r">sqlServerUserName</span>},
                        {<a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#30653ae4c3d3cdc5" class="t t">OozieSite</a>.<a href="../Constants.cs.html#2bee580e4b83f9aa" class="i field">PasswordKey</a>, <span class="r155 r">sqlServerPassword</span>},
                        {<a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#30653ae4c3d3cdc5" class="t t">OozieSite</a>.<a href="../Constants.cs.html#4b2ee2e8af3e74ca" class="i field">DriverKey</a>, <a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#30653ae4c3d3cdc5" class="t t">OozieSite</a>.<a href="../Constants.cs.html#b59dfe48fec289ba" class="i field">DriverValue</a>},
                        {<a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#30653ae4c3d3cdc5" class="t t">OozieSite</a>.<a href="../Constants.cs.html#93659b05ca340708" class="i field">SchemaKey</a>, <a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#30653ae4c3d3cdc5" class="t t">OozieSite</a>.<a href="../Constants.cs.html#424becbca813927d" class="i field">SchemaValue</a>}
                    }
                },
                { <a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#ab8066e3db37abe5" class="t t">ConfigurationKey</a>.<a href="../Constants.cs.html#3ce5a0183f9f9d0f" class="i field">OozieEnv</a>, <b>new</b> <span class="t constructor">Dictionary</span>&lt;<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>, <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>&gt;
                    {
                        {<a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#06b6cee5620d1244" class="t t">OozieEnv</a>.<a href="../Constants.cs.html#465c1beb80b01d26" class="i field">DatabaseKey</a>, <a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#ed7f71d8c6bec644" class="i field">DatabaseValue</a>},
                        {<a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#06b6cee5620d1244" class="t t">OozieEnv</a>.<a href="../Constants.cs.html#db207195cd253d9f" class="i field">DatabaseNameKey</a>, <span class="r158 r">oozieDatabase</span>},
                        {<a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#06b6cee5620d1244" class="t t">OozieEnv</a>.<a href="../Constants.cs.html#599ba84af09631ad" class="i field">DatabaseTypeKey</a>, <a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#50120d7abcde208d" class="i field">DatabaseTypeValue</a>},
                        {<a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#06b6cee5620d1244" class="t t">OozieEnv</a>.<a href="../Constants.cs.html#a84ff35cdbefb960" class="i field">ExistingDatabaseKey</a>, <span class="r158 r">oozieDatabase</span>},
                        {<a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#06b6cee5620d1244" class="t t">OozieEnv</a>.<a href="../Constants.cs.html#b083bb7f30d5b5cc" class="i field">ExistingHostKey</a>, <span class="r153 r">sqlServerName</span>},
                        {<a href="../Constants.cs.html#b5f6738e585ef0db" class="t t">Constants</a>.<a href="../Constants.cs.html#f7dac68b77048b37" class="t t">MetastoreConfigurations</a>.<a href="../Constants.cs.html#06b6cee5620d1244" class="t t">OozieEnv</a>.<a href="../Constants.cs.html#098883a87597dfcf" class="i field">HostNameKey</a>, <span class="r153 r">sqlServerName</span>}
                    }
                }
            };
 
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r161 rd" class="r161 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f0e6207bb6ab0bf0" class="i method">Create</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r148 r">clusterName</span>, <span class="r149 r">createParams</span>);
            <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#bb03592a007be12a" class="i method">ValidateCluster</a>(<span class="r148 r">clusterName</span>, <span class="r149 r">createParams</span>, <span class="r161 r">cluster</span>);
 
            <span class="c">// check zones property</span>
            <a href="@1@System.Runtime/A.html#b19f71a84062554b" class="k">var</a> <span id="r162 rd" class="r162 r">zones</span> = <span class="r161 r">cluster</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#4b36aa9dea77738f" class="i property">Zones</a>;
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r162 r">zones</span>);
            <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="s">&quot;1&quot;</span>, <span class="r162 r">zones</span>[0]);
        }
 
        [<span class="t constructor">Fact</span>]
        <b>public void</b> <a id="59c47a02fdb0094a" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestCreateClusterWithPrivateLinkConfiguration</a>()
        {
            <a href="HDInsightManagementTestBase.cs.html#3e556594d1ac3c07" class="i method">TestInitialize</a>();
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r163 rd" class="r163 r">clusterName</span> = <a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#7e37892582ee2554" class="t t">TestUtilities</a>.<a href="/Microsoft.Rest.ClientRuntime.Azure.TestFramework/A.html#c43847d890ddffef" class="i method">GenerateName</a>(<span class="s">&quot;hdisdk-plconfig&quot;</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#b40349c3dfb11e02" class="k">var</a> <span id="r164 rd" class="r164 r">createParams</span> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#45750bba7a204f74" class="i method">PrepareClusterCreateParamsForWasb</a>();
            <span class="r164 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#9170a0a45eb684fe" class="i property">Location</a> = <span class="s">&quot;South Central US&quot;</span>;
 
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#3cc341334f064e4c" class="k">var</a> <span id="r165 rd" class="r165 r">networkProperties</span> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#51b4276beedc7810" class="t constructor">NetworkProperties</a>(<a href="/Microsoft.Azure.Management.HDInsight/A.html#a58b1464241dedd7" class="t t">ResourceProviderConnection</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#1b27067d8e6d3fe3" class="i field">Outbound</a>, <a href="/Microsoft.Azure.Management.HDInsight/A.html#781068ab4a39ad24" class="t t">PrivateLink</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#e609281d70d999d3" class="i field">Enabled</a>);
            <span class="r164 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#6ec6bb8a236be634" class="i property">NetworkProperties</a> = <span class="r165 r">networkProperties</span>;
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r166 rd" class="r166 r">storageAccountResourceId</span> = <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@System.Runtime/A.html#6e5f254563fed78e" class="i method">Format</a>(<span class="s">&quot;/subscriptions/{0}/resourceGroups/{1}/providers/Microsoft.Storage/storageAccounts/{2}&quot;</span>, <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#c7d9489efef33f37" class="i property">SubscriptionId</a>, <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#2bd4d94eb58e7e0e" class="i property">StorageAccountName</a>);
            <span class="r164 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#59cdf04de9bcc2c9" class="i property">StorageProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#2a922bdea0059b60" class="i property">Storageaccounts</a>[0].<a href="/Microsoft.Azure.Management.HDInsight/A.html#cefe2d5bc5f4c2ca" class="i property">ResourceId</a> = <span class="r166 r">storageAccountResourceId</span>;
 
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r167 rd" class="r167 r">vnetId</span> = <span class="s">&quot;/subscriptions/964c10bb-8a6c-43bc-83d3-6b318c6c7305/resourceGroups/rg/providers/Microsoft.Network/virtualNetworks/fakevnet&quot;</span>;
            <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r168 rd" class="r168 r">subnetId</span> = <span class="s">&quot;/subscriptions/964c10bb-8a6c-43bc-83d3-6b318c6c7305/resourceGroups/rg/providers/Microsoft.Network/virtualNetworks/fakevnet/subnets/default&quot;</span>;
 
            <b>foreach</b> (<a href="/Microsoft.Azure.Management.HDInsight/A.html#a0a42be8d61a8e23" class="k">var</a> <span id="r169 rd" class="r169 r">role</span> <b>in</b> <span class="r164 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#d30c89932f32148c" class="i property">ComputeProfile</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#81969beedb3162c1" class="i property">Roles</a>)
            {
                <span class="r169 r">role</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#df3ac378b7930b5d" class="i property">VirtualNetworkProfile</a> = <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#d5c9f6da3e888fe1" class="t constructor">VirtualNetworkProfile</a>(<span class="r167 r">vnetId</span>, <span class="r168 r">subnetId</span>);
            }
 
            <span class="r164 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#daa8b81451f44e01" class="i property">PrivateLinkConfigurations</a> = <b>new</b> <span class="t constructor">List</span>&lt;<a href="/Microsoft.Azure.Management.HDInsight/A.html#1b3071c7776e998d" class="t t">PrivateLinkConfiguration</a>&gt;{
                <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#492681d3bda029c8" class="t constructor">PrivateLinkConfiguration</a>()
                {
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#e60a0dc36078bea3" class="i property">Name</a>=<span class="s">&quot;plconfig&quot;</span>,
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#8b00d7b871015e1f" class="i property">GroupId</a>=<span class="s">&quot;headnode&quot;</span>,
                    <a href="/Microsoft.Azure.Management.HDInsight/A.html#6d4adacbf52a4790" class="i property">IpConfigurations</a> = <b>new</b> <span class="t constructor">List</span>&lt;<a href="/Microsoft.Azure.Management.HDInsight/A.html#ba13a2c6b15f31f5" class="t t">IPConfiguration</a>&gt;
                    {
                        <b>new</b> <a href="/Microsoft.Azure.Management.HDInsight/A.html#ef59ae24df0eddaf" class="t constructor">IPConfiguration</a>()
                        {
                            <a href="/Microsoft.Azure.Management.HDInsight/A.html#227739bf82d202f6" class="i property">Name</a>=<span class="s">&quot;ipconfig&quot;</span>,
                            <a href="/Microsoft.Azure.Management.HDInsight/A.html#fcce164a940abc4a" class="i property">Primary</a>=<b>true</b>,
                        }
                    }
                } 
            };
 
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r170 rd" class="r170 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f0e6207bb6ab0bf0" class="i method">Create</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r163 r">clusterName</span>, <span class="r164 r">createParams</span>);
 
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#1b7cc34fc3e6fb4a" class="k">var</a> <span id="r171 rd" class="r171 r">result</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#04138739787f1c82" class="i method">Get</a>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r163 r">clusterName</span>);
            <a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#bb03592a007be12a" class="i method">ValidateCluster</a>(<span class="r163 r">clusterName</span>, <span class="r164 r">createParams</span>, <span class="r171 r">result</span>);
            <span class="t t">Assert</span>.<span class="i method">NotNull</span>(<span class="r171 r">result</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#27d1965c115d2591" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#76432f7d5c10852b" class="i property">PrivateLinkConfigurations</a>.<span class="i method">First</span>());
            <span class="t t">Assert</span>.<span class="i method">Equal</span>(<span class="r164 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#daa8b81451f44e01" class="i property">PrivateLinkConfigurations</a>.<span class="i method">First</span>().<a href="/Microsoft.Azure.Management.HDInsight/A.html#8b00d7b871015e1f" class="i property">GroupId</a>, <span class="r171 r">result</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#27d1965c115d2591" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#76432f7d5c10852b" class="i property">PrivateLinkConfigurations</a>.<span class="i method">First</span>().<a href="/Microsoft.Azure.Management.HDInsight/A.html#8b00d7b871015e1f" class="i property">GroupId</a>);
        }
    }
}
</pre></td></tr></table></div></body></html>

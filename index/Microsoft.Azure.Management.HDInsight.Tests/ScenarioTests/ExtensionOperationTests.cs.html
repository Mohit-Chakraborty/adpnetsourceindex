<!DOCTYPE html>
<html><head><title>ExtensionOperationTests.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(43);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#Microsoft.Azure.Management.HDInsight.Tests/ScenarioTests/ExtensionOperationTests.cs" target="_top">ScenarioTests\ExtensionOperationTests.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Microsoft.Azure.Management.HDInsight.Tests" target="_top">tests\Microsoft.Azure.Management.HDInsight.Tests.csproj</a> (Microsoft.Azure.Management.HDInsight.Tests)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="c">// Copyright (c) Microsoft Corporation. All rights reserved.</span>
<span class="c">// Licensed under the MIT License. See License.txt in the project root for license information.</span>
 
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i n">HDInsight</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Azure</span>.<span class="i n">Management</span>.<span class="i n">HDInsight</span>.<span class="i n">Models</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i">Rest</span>.<span class="i">ClientRuntime</span>.<span class="i">Azure</span>.<span class="i">TestFramework</span>;
<b>using</b> <span class="i">Xunit</span>;
<b>using static</b> <span class="i n">Management</span>.<span class="i n">HDInsight</span>.<span class="i n">Tests</span>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#c477825a07e09160" class="t t">HDInsightManagementTestUtilities</a>;
 
<b>namespace</b> <span class="i n">Management</span>.<span class="i n">HDInsight</span>.<span class="i n">Tests</span>
{
    <b>public class</b> <a id="ed429d5af5b5b42f" href="../R/../../0000000000.html" target="n" data-glyph="0,0" class="t t"><span id="96d07cb0ccdac625">ExtensionOperationTests</span></a> : <a href="HDInsightManagementTestBase.cs.html#c30c1c779e7b7348" class="t t">HDInsightManagementTestBase</a>
    {
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="5e2a75843517a4be" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TestOMSOnRunningCluster</a>()
        {
            <a href="HDInsightManagementTestBase.cs.html#3e556594d1ac3c07" class="i method">TestInitialize</a>();
 
            <b>string</b> <span id="r0 rd" class="r0 r">clusterName</span> = <span class="i">TestUtilities</span>.<span class="i">GenerateName</span>(<span class="s">&quot;hdisdk-oms&quot;</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#b40349c3dfb11e02" class="k">var</a> <span id="r1 rd" class="r1 r">createParams</span> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/HDInsightManagementTestUtilities.cs.html#45750bba7a204f74" class="i method">PrepareClusterCreateParamsForWasb</a>();
            <span class="r1 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#f8dcb4ff658c96d8" class="i property">ClusterDefinition</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#fdbfcdc1fa742ae1" class="i property">Kind</a> = <span class="s">&quot;Spark&quot;</span>;
            <span class="r1 r">createParams</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bbc24cdd78abc182" class="i property">Properties</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#acff7f47c74afc17" class="i property">ClusterVersion</a> = <span class="s">&quot;3.6&quot;</span>;
            <b>var</b> <span id="r2 rd" class="r2 r">cluster</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#b1c6604bd2a9ab38" class="i property">Clusters</a>.<span class="i">Create</span>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r0 r">clusterName</span>, <span class="r1 r">createParams</span>);
            <span class="i">ValidateCluster</span>(<span class="r0 r">clusterName</span>, <span class="r1 r">createParams</span>, <span class="r2 r">cluster</span>);
 
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#15726d0e6456ee63" class="k">var</a> <span id="r3 rd" class="r3 r">request</span> = <b>new</b> <span class="t">ClusterMonitoringRequest</span>
            {
                <a href="/Microsoft.Azure.Management.HDInsight/A.html#2f6e1d332583f2e6" class="i property">WorkspaceId</a> = <a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#1121ad655107a13e" class="i property">WorkspaceId</a>
            };
 
            <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#56001f5ad178da67" class="i property">Extensions</a>.<span class="i">EnableMonitoring</span>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r0 r">clusterName</span>, <span class="r3 r">request</span>);
            <a href="/Microsoft.Azure.Management.HDInsight/A.html#60b0ea16bff0ec84" class="k">var</a> <span id="r4 rd" class="r4 r">monitoringStatus</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#56001f5ad178da67" class="i property">Extensions</a>.<span class="i">GetMonitoringStatus</span>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r0 r">clusterName</span>);
            <span class="i">Assert</span>.<span class="i">True</span>(<span class="r4 r">monitoringStatus</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bb3b6431bb966ba8" class="i property">ClusterMonitoringEnabled</a>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r3 r">request</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#2f6e1d332583f2e6" class="i property">WorkspaceId</a>, <span class="r4 r">monitoringStatus</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#39876e0d1578abc2" class="i property">WorkspaceId</a>);
 
            <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#56001f5ad178da67" class="i property">Extensions</a>.<span class="i">DisableMonitoring</span>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r0 r">clusterName</span>);
            <span class="r4 r">monitoringStatus</span> = <a href="HDInsightManagementTestBase.cs.html#fe3e7869a11be622" class="i property">HDInsightClient</a>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#56001f5ad178da67" class="i property">Extensions</a>.<span class="i">GetMonitoringStatus</span>(<a href="HDInsightManagementTestBase.cs.html#e4e83f5856c511b0" class="i property">CommonData</a>.<a href="../TestHelpers/CommonTestsFixture.cs.html#6bbaafd9400ebcaa" class="i property">ResourceGroupName</a>, <span class="r0 r">clusterName</span>);
            <span class="i">Assert</span>.<span class="i">False</span>(<span class="r4 r">monitoringStatus</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#bb3b6431bb966ba8" class="i property">ClusterMonitoringEnabled</a>);
            <span class="i">Assert</span>.<span class="i">Null</span>(<span class="r4 r">monitoringStatus</span>.<a href="/Microsoft.Azure.Management.HDInsight/A.html#39876e0d1578abc2" class="i property">WorkspaceId</a>);
        }
    }
}
</pre></td></tr></table></div></body></html>
